<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: audiohook.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">audiohook.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Audiohooks Architecture.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d7d/slinfactory_8h_source.html">asterisk/slinfactory.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for audiohook.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d08/audiohook_8h__incl.png" border="0" usemap="#audiohook_8h" alt=""/></div>
<map name="audiohook_8h" id="audiohook_8h">
<area shape="rect" id="node2" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="435,155,548,181"/>
<area shape="rect" id="node16" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="529,80,680,107"/>
<area shape="rect" id="node17" href="../../da/d7d/slinfactory_8h.html" title="A machine to gather up arbitrary frames and convert them to raw slinear on demand. " alt="" coords="917,80,1068,107"/>
<area shape="rect" id="node4" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="113,229,176,256"/>
<area shape="rect" id="node8" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="259,304,406,331"/>
<area shape="rect" id="node11" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="488,229,639,256"/>
<area shape="rect" id="node12" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="663,229,789,256"/>
<area shape="rect" id="node14" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="813,229,956,256"/>
<area shape="rect" id="node5" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="221,379,375,405"/>
<area shape="rect" id="node13" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="519,304,653,331"/>
<area shape="rect" id="node18" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="998,155,1129,181"/>
<area shape="rect" id="node19" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="1072,229,1199,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d97/audiohook_8h__dep__incl.png" border="0" usemap="#audiohook_8hdep" alt=""/></div>
<map name="audiohook_8hdep" id="audiohook_8hdep">
<area shape="rect" id="node2" href="../../dc/d04/app__chanspy_8c.html" title="ChanSpy: Listen in on any channel. " alt="" coords="5,80,120,107"/>
<area shape="rect" id="node3" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="144,80,275,107"/>
<area shape="rect" id="node4" href="../../de/dcd/app__jack_8c.html" title="Jack Application. " alt="" coords="299,80,389,107"/>
<area shape="rect" id="node5" href="../../d8/d93/app__mixmonitor_8c.html" title="MixMonitor() &#45; Record a call and mix the audio during the recording. " alt="" coords="413,80,549,107"/>
<area shape="rect" id="node6" href="../../d9/d4a/app__tonedetect_8c.html" title="Tone detection module. " alt="" coords="574,80,709,107"/>
<area shape="rect" id="node7" href="../../d9/d45/bridge__builtin__features_8c.html" title="Built in bridging features. " alt="" coords="733,80,912,107"/>
<area shape="rect" id="node8" href="../../dc/dcf/func__periodic__hook_8c.html" title="Periodic dialplan hooks. " alt="" coords="936,80,1091,107"/>
<area shape="rect" id="node9" href="../../d3/d24/func__pitchshift_8c.html" title="Pitch Shift Audio Effect. " alt="" coords="1115,80,1240,107"/>
<area shape="rect" id="node10" href="../../d2/d94/func__scramble_8c.html" title="Frequency inverter. " alt="" coords="1265,80,1391,107"/>
<area shape="rect" id="node11" href="../../da/d22/func__speex_8c.html" title="Noise reduction and automatic gain control (AGC) " alt="" coords="1415,80,1521,107"/>
<area shape="rect" id="node12" href="../../d4/df5/func__talkdetect_8c.html" title="Function that raises events when talking is detected on a channel. " alt="" coords="1544,80,1675,107"/>
<area shape="rect" id="node13" href="../../db/d57/func__volume_8c.html" title="Technology independent volume control. " alt="" coords="1699,80,1813,107"/>
<area shape="rect" id="node14" href="../../d9/d4f/audiohook_8c.html" title="Audiohooks Architecture. " alt="" coords="1837,80,1936,107"/>
<area shape="rect" id="node15" href="../../d4/d28/channel_8c.html" title="Channel Management. " alt="" coords="1960,80,2043,107"/>
<area shape="rect" id="node16" href="../../d5/d92/features_8c.html" title="Routines implementing call features as call pickup, parking and transfer. " alt="" coords="2067,80,2154,107"/>
<area shape="rect" id="node17" href="../../db/d8e/res__mutestream_8c.html" title="MUTESTREAM audiohooks. " alt="" coords="2178,80,2318,107"/>
<area shape="rect" id="node18" href="../../dd/da3/res__stasis__snoop_8c.html" title="Stasis application snoop control support. " alt="" coords="2342,80,2485,107"/>
</map>
</div>
</div>
<p><a href="../../d0/d79/audiohook_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d77/structast__audiohook__options.html">ast_audiohook_options</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6456e346fe813617f13d5bbf7e92db5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a6456e346fe813617f13d5bbf7e92db5a">ast_audiohook_lock</a>(ah)&#160;&#160;&#160;<a class="el" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;(ah)-&gt;<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>)</td></tr>
<tr class="memdesc:a6456e346fe813617f13d5bbf7e92db5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock an audiohook.  <a href="#a6456e346fe813617f13d5bbf7e92db5a">More...</a><br /></td></tr>
<tr class="separator:a6456e346fe813617f13d5bbf7e92db5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4ac794c0f7ab8decd713cb9c43acf4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#aae4ac794c0f7ab8decd713cb9c43acf4">ast_audiohook_unlock</a>(ah)&#160;&#160;&#160;<a class="el" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;(ah)-&gt;<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>)</td></tr>
<tr class="memdesc:aae4ac794c0f7ab8decd713cb9c43acf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock an audiohook.  <a href="#aae4ac794c0f7ab8decd713cb9c43acf4">More...</a><br /></td></tr>
<tr class="separator:aae4ac794c0f7ab8decd713cb9c43acf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4f534572a65340acaf6745f64c42d660"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a4f534572a65340acaf6745f64c42d660">ast_audiohook_manipulate_callback</a>) (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>)</td></tr>
<tr class="memdesc:a4f534572a65340acaf6745f64c42d660"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for manipulate audiohook type.  <a href="#a4f534572a65340acaf6745f64c42d660">More...</a><br /></td></tr>
<tr class="separator:a4f534572a65340acaf6745f64c42d660"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a34d75d3d5e7418b6a772e3d522a16899"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> { <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> = 0, 
<a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, 
<a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>
 }</td></tr>
<tr class="separator:a34d75d3d5e7418b6a772e3d522a16899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4c98ade1d3dd2e755ffb52b1106951"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951">ast_audiohook_flags</a> { <br />
&#160;&#160;<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226">AST_AUDIOHOOK_TRIGGER_MODE</a> = (3 &lt;&lt; 0), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e">AST_AUDIOHOOK_TRIGGER_READ</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6">AST_AUDIOHOOK_TRIGGER_WRITE</a> = (2 &lt;&lt; 0), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a76af7a6555f4582850cfaef9d5391e32">AST_AUDIOHOOK_WANTS_DTMF</a> = (1 &lt;&lt; 2), 
<br />
&#160;&#160;<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e">AST_AUDIOHOOK_TRIGGER_SYNC</a> = (1 &lt;&lt; 3), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622">AST_AUDIOHOOK_SMALL_QUEUE</a> = (1 &lt;&lt; 4), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951aa612c089312c6841fa6225b3efef44e2">AST_AUDIOHOOK_MUTE_READ</a> = (1 &lt;&lt; 5), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951aa7f52dd0d5d1d0cc63e0d62b98f97f5c">AST_AUDIOHOOK_MUTE_WRITE</a> = (1 &lt;&lt; 6), 
<br />
&#160;&#160;<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a494198800404c4b767170a1dac060e87">AST_AUDIOHOOK_COMPATIBLE</a> = (1 &lt;&lt; 7), 
<a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abb1912897be4282234afc9ffca28e238">AST_AUDIOHOOK_SUBSTITUTE_SILENCE</a> = (1 &lt;&lt; 8)
<br />
 }</td></tr>
<tr class="separator:a6d4c98ade1d3dd2e755ffb52b1106951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015c8ec4d6538b316b6297279134d87f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87f">ast_audiohook_init_flags</a> { <a class="el" href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87fadb150b4fd16c62ba0820d6b2c4b609f0">AST_AUDIOHOOK_MANIPULATE_ALL_RATES</a> = (1 &lt;&lt; 0)
 }</td></tr>
<tr class="separator:a015c8ec4d6538b316b6297279134d87f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf2dd361123daa6446ade7c7ecfe55ad"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ad">ast_audiohook_status</a> { <a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a> = 0, 
<a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a>, 
<a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a>, 
<a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>
 }</td></tr>
<tr class="separator:acf2dd361123daa6446ade7c7ecfe55ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce1d2faae234aa016905215014542b0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a> { <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a> = 0, 
<a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>, 
<a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a>
 }</td></tr>
<tr class="separator:abce1d2faae234aa016905215014542b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a94abfad20db137f9d6a33f641d37ac31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a94abfad20db137f9d6a33f641d37ac31">ast_audiohook_attach</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook)</td></tr>
<tr class="memdesc:a94abfad20db137f9d6a33f641d37ac31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach audiohook to channel.  <a href="#a94abfad20db137f9d6a33f641d37ac31">More...</a><br /></td></tr>
<tr class="separator:a94abfad20db137f9d6a33f641d37ac31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa661730d6fa6b9b12e410d66a3437b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a9fa661730d6fa6b9b12e410d66a3437b">ast_audiohook_destroy</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook)</td></tr>
<tr class="memdesc:a9fa661730d6fa6b9b12e410d66a3437b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys an audiohook structure.  <a href="#a9fa661730d6fa6b9b12e410d66a3437b">More...</a><br /></td></tr>
<tr class="separator:a9fa661730d6fa6b9b12e410d66a3437b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b9ad3730e7adbc3b396bef4e85b12a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a88b9ad3730e7adbc3b396bef4e85b12a">ast_audiohook_detach</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook)</td></tr>
<tr class="memdesc:a88b9ad3730e7adbc3b396bef4e85b12a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach audiohook from channel.  <a href="#a88b9ad3730e7adbc3b396bef4e85b12a">More...</a><br /></td></tr>
<tr class="separator:a88b9ad3730e7adbc3b396bef4e85b12a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5da9cb8531c18cbae0c703a57acbf0f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a5da9cb8531c18cbae0c703a57acbf0f3">ast_audiohook_detach_list</a> (struct <a class="el" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *audiohook_list)</td></tr>
<tr class="memdesc:a5da9cb8531c18cbae0c703a57acbf0f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach audiohooks from list and destroy said list.  <a href="#a5da9cb8531c18cbae0c703a57acbf0f3">More...</a><br /></td></tr>
<tr class="separator:a5da9cb8531c18cbae0c703a57acbf0f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ed9fa0751083523ea90d1ad7c81fbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a34ed9fa0751083523ea90d1ad7c81fbf">ast_audiohook_detach_source</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *source)</td></tr>
<tr class="memdesc:a34ed9fa0751083523ea90d1ad7c81fbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach specified source audiohook from channel.  <a href="#a34ed9fa0751083523ea90d1ad7c81fbf">More...</a><br /></td></tr>
<tr class="separator:a34ed9fa0751083523ea90d1ad7c81fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cdfa0bb99da5247ab56d5ca67483a8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a2cdfa0bb99da5247ab56d5ca67483a8f">ast_audiohook_init</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *source, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87f">ast_audiohook_init_flags</a> flags)</td></tr>
<tr class="memdesc:a2cdfa0bb99da5247ab56d5ca67483a8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an audiohook structure.  <a href="#a2cdfa0bb99da5247ab56d5ca67483a8f">More...</a><br /></td></tr>
<tr class="separator:a2cdfa0bb99da5247ab56d5ca67483a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee985c02a01f9cbd475bf4481f5f66f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#aee985c02a01f9cbd475bf4481f5f66f9">ast_audiohook_move_all</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *old_chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *new_chan)</td></tr>
<tr class="memdesc:aee985c02a01f9cbd475bf4481f5f66f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move all audiohooks from one channel to another.  <a href="#aee985c02a01f9cbd475bf4481f5f66f9">More...</a><br /></td></tr>
<tr class="separator:aee985c02a01f9cbd475bf4481f5f66f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09727634eabe798d8abc95d46fa7b1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#ae09727634eabe798d8abc95d46fa7b1e">ast_audiohook_move_by_source</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *old_chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *new_chan, const char *source)</td></tr>
<tr class="memdesc:ae09727634eabe798d8abc95d46fa7b1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move an audiohook from one channel to a new one.  <a href="#ae09727634eabe798d8abc95d46fa7b1e">More...</a><br /></td></tr>
<tr class="separator:ae09727634eabe798d8abc95d46fa7b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02f2b31337c6e7dc8b8d2c514b64ea0a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a02f2b31337c6e7dc8b8d2c514b64ea0a">ast_audiohook_read_frame</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, size_t samples, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</td></tr>
<tr class="memdesc:a02f2b31337c6e7dc8b8d2c514b64ea0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a frame in from the audiohook structure.  <a href="#a02f2b31337c6e7dc8b8d2c514b64ea0a">More...</a><br /></td></tr>
<tr class="separator:a02f2b31337c6e7dc8b8d2c514b64ea0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38494f36536e00ab9a4a9f0f3f65ac03"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a38494f36536e00ab9a4a9f0f3f65ac03">ast_audiohook_read_frame_all</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, size_t samples, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> **<a class="el" href="../../d6/d13/file_8c.html#a3d11f27997994d366d52d54a084ec944">read_frame</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> **write_frame)</td></tr>
<tr class="memdesc:a38494f36536e00ab9a4a9f0f3f65ac03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a frame in from the audiohook structure in mixed audio mode and copies read and write frame data to provided arguments.  <a href="#a38494f36536e00ab9a4a9f0f3f65ac03">More...</a><br /></td></tr>
<tr class="separator:a38494f36536e00ab9a4a9f0f3f65ac03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c80f85a6c8c76a4138323837c116d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a34c80f85a6c8c76a4138323837c116d4">ast_audiohook_remove</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook)</td></tr>
<tr class="memdesc:a34c80f85a6c8c76a4138323837c116d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an audiohook from a specified channel.  <a href="#a34c80f85a6c8c76a4138323837c116d4">More...</a><br /></td></tr>
<tr class="separator:a34c80f85a6c8c76a4138323837c116d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305c3d4f03f737f1958d9b2fd4af0a37"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a305c3d4f03f737f1958d9b2fd4af0a37">ast_audiohook_set_mute</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *source, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951">ast_audiohook_flags</a> <a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>, int clear)</td></tr>
<tr class="memdesc:a305c3d4f03f737f1958d9b2fd4af0a37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mute frames read from or written to a channel.  <a href="#a305c3d4f03f737f1958d9b2fd4af0a37">More...</a><br /></td></tr>
<tr class="separator:a305c3d4f03f737f1958d9b2fd4af0a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47bb160cbe5e534c0fca6560015ffe59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a47bb160cbe5e534c0fca6560015ffe59">ast_audiohook_trigger_wait</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook)</td></tr>
<tr class="memdesc:a47bb160cbe5e534c0fca6560015ffe59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for audiohook trigger to be triggered.  <a href="#a47bb160cbe5e534c0fca6560015ffe59">More...</a><br /></td></tr>
<tr class="separator:a47bb160cbe5e534c0fca6560015ffe59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f263b2006fa3bd3e9a96d4580d0125c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, enum <a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ad">ast_audiohook_status</a> <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="memdesc:a5f263b2006fa3bd3e9a96d4580d0125c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update audiohook's status.  <a href="#a5f263b2006fa3bd3e9a96d4580d0125c">More...</a><br /></td></tr>
<tr class="separator:a5f263b2006fa3bd3e9a96d4580d0125c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf8f4fc0dfd6a5f54e301ac66c5bc434"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#acf8f4fc0dfd6a5f54e301ac66c5bc434">ast_audiohook_volume_adjust</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, int <a class="el" href="../../da/d4c/structvolume.html">volume</a>)</td></tr>
<tr class="memdesc:acf8f4fc0dfd6a5f54e301ac66c5bc434"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the volume on frames read from or written to a channel.  <a href="#acf8f4fc0dfd6a5f54e301ac66c5bc434">More...</a><br /></td></tr>
<tr class="separator:acf8f4fc0dfd6a5f54e301ac66c5bc434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f5dbdf5ef7a979d4ba48f9ee71a422"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a39f5dbdf5ef7a979d4ba48f9ee71a422">ast_audiohook_volume_get</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>)</td></tr>
<tr class="memdesc:a39f5dbdf5ef7a979d4ba48f9ee71a422"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the volume adjustment value on frames read from or written to a channel.  <a href="#a39f5dbdf5ef7a979d4ba48f9ee71a422">More...</a><br /></td></tr>
<tr class="separator:a39f5dbdf5ef7a979d4ba48f9ee71a422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae042519f3d210ea48604952be74044a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#ae042519f3d210ea48604952be74044a2">ast_audiohook_volume_set</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, int <a class="el" href="../../da/d4c/structvolume.html">volume</a>)</td></tr>
<tr class="memdesc:ae042519f3d210ea48604952be74044a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the volume on frames read from or written to a channel.  <a href="#ae042519f3d210ea48604952be74044a2">More...</a><br /></td></tr>
<tr class="separator:ae042519f3d210ea48604952be74044a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3391dbd95c95f041cf14fa30e0f5c73d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a3391dbd95c95f041cf14fa30e0f5c73d">ast_audiohook_write_frame</a> (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="memdesc:a3391dbd95c95f041cf14fa30e0f5c73d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a frame into the audiohook structure.  <a href="#a3391dbd95c95f041cf14fa30e0f5c73d">More...</a><br /></td></tr>
<tr class="separator:a3391dbd95c95f041cf14fa30e0f5c73d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6351c89eb98b1832e85fa9c0fca7383f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *audiohook_list, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="memdesc:a6351c89eb98b1832e85fa9c0fca7383f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pass a frame off to be handled by the audiohook core.  <a href="#a6351c89eb98b1832e85fa9c0fca7383f">More...</a><br /></td></tr>
<tr class="separator:a6351c89eb98b1832e85fa9c0fca7383f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46613f6e1524089bf8c4b2a7880f716d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a46613f6e1524089bf8c4b2a7880f716d">ast_audiohook_write_list_empty</a> (struct <a class="el" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *audiohook_list)</td></tr>
<tr class="memdesc:a46613f6e1524089bf8c4b2a7880f716d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a audiohook_list is empty or not.  <a href="#a46613f6e1524089bf8c4b2a7880f716d">More...</a><br /></td></tr>
<tr class="separator:a46613f6e1524089bf8c4b2a7880f716d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f07afe75e6c2405d124d98faaf9800"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a86f07afe75e6c2405d124d98faaf9800">ast_channel_audiohook_count_by_source</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *source, enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a86f07afe75e6c2405d124d98faaf9800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out how many audiohooks from a certain source exist on a given channel, regardless of status.  <a href="#a86f07afe75e6c2405d124d98faaf9800">More...</a><br /></td></tr>
<tr class="separator:a86f07afe75e6c2405d124d98faaf9800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c85bb250bc65d74fecce3a388ef30bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/audiohook_8h.html#a9c85bb250bc65d74fecce3a388ef30bd">ast_channel_audiohook_count_by_source_running</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *source, enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a9c85bb250bc65d74fecce3a388ef30bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out how many spies of a certain type exist on a given channel, and are in state running.  <a href="#a9c85bb250bc65d74fecce3a388ef30bd">More...</a><br /></td></tr>
<tr class="separator:a9c85bb250bc65d74fecce3a388ef30bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Audiohooks Architecture. </p>

<p class="definition">Definition in file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6456e346fe813617f13d5bbf7e92db5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6456e346fe813617f13d5bbf7e92db5a">&#9670;&nbsp;</a></span>ast_audiohook_lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_audiohook_lock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ah</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;(ah)-&gt;<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock an audiohook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ah</td><td>Audiohook structure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00295">295</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook_move()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00640">channel_spy()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00201">destroy_callback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00515">destroy_monitor_audiohook()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00800">dtmf_audiohook_write_list()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00128">hook_datastore_destroy_callback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00709">mixmonitor_thread()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00212">snoop_hangup()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00173">snoop_read()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00152">snoop_write()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00459">spy_generate()</a>, and <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01257">stop_mixmonitor_full()</a>.</p>

</div>
</div>
<a id="aae4ac794c0f7ab8decd713cb9c43acf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4ac794c0f7ab8decd713cb9c43acf4">&#9670;&nbsp;</a></span>ast_audiohook_unlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_audiohook_unlock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ah</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;(ah)-&gt;<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock an audiohook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ah</td><td>Audiohook structure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00300">300</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook_move()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00640">channel_spy()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00201">destroy_callback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00515">destroy_monitor_audiohook()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00800">dtmf_audiohook_write_list()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00128">hook_datastore_destroy_callback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00709">mixmonitor_thread()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00212">snoop_hangup()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00173">snoop_read()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00152">snoop_write()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00459">spy_generate()</a>, and <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01257">stop_mixmonitor_full()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a4f534572a65340acaf6745f64c42d660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f534572a65340acaf6745f64c42d660">&#9670;&nbsp;</a></span>ast_audiohook_manipulate_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* ast_audiohook_manipulate_callback) (struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame, enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a> <a class="el" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for manipulate audiohook type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">chan</td><td>Channel </td></tr>
    <tr><td class="paramname">frame</td><td>Frame of audio to manipulate </td></tr>
    <tr><td class="paramname">direction</td><td>Direction frame came from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>An audiohook does not have any reference to a private data structure for manipulate types. It is up to the manipulate callback to store this data via it's own method. An example would be datastores. </dd>
<dd>
The input frame should never be freed or corrupted during a manipulate callback. If the callback has the potential to corrupt the frame's data during manipulation, local data should be used for the manipulation and only copied to the frame on success. </dd>
<dd>
A failure return value indicates that the frame was not manipulated and that is being returned in its original state. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00096">96</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a34d75d3d5e7418b6a772e3d522a16899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d75d3d5e7418b6a772e3d522a16899">&#9670;&nbsp;</a></span>ast_audiohook_direction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"></a>AST_AUDIOHOOK_DIRECTION_READ&#160;</td><td class="fielddoc"><p>Reading audio in </p>
</td></tr>
<tr><td class="fieldname"><a id="a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"></a>AST_AUDIOHOOK_DIRECTION_WRITE&#160;</td><td class="fielddoc"><p>Writing audio out </p>
</td></tr>
<tr><td class="fieldname"><a id="a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360"></a>AST_AUDIOHOOK_DIRECTION_BOTH&#160;</td><td class="fielddoc"><p>Both reading audio in and writing audio out </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00048">48</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                             {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> = 0, <span class="comment">/*!&lt; Reading audio in */</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>,    <span class="comment">/*!&lt; Writing audio out */</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>,     <span class="comment">/*!&lt; Both reading audio in and writing audio out */</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;};</div><div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00051">audiohook.h:51</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d4c98ade1d3dd2e755ffb52b1106951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4c98ade1d3dd2e755ffb52b1106951">&#9670;&nbsp;</a></span>ast_audiohook_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951">ast_audiohook_flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226"></a>AST_AUDIOHOOK_TRIGGER_MODE&#160;</td><td class="fielddoc"><p>When audiohook should be triggered to do something </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e"></a>AST_AUDIOHOOK_TRIGGER_READ&#160;</td><td class="fielddoc"><p>Audiohook wants to be triggered when reading audio in </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6"></a>AST_AUDIOHOOK_TRIGGER_WRITE&#160;</td><td class="fielddoc"><p>Audiohook wants to be triggered when writing audio out </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951a76af7a6555f4582850cfaef9d5391e32"></a>AST_AUDIOHOOK_WANTS_DTMF&#160;</td><td class="fielddoc"><p>Audiohook also wants to receive DTMF frames </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e"></a>AST_AUDIOHOOK_TRIGGER_SYNC&#160;</td><td class="fielddoc"><p>Audiohook wants to be triggered when both sides have combined audio available </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622"></a>AST_AUDIOHOOK_SMALL_QUEUE&#160;</td><td class="fielddoc"><p>Audiohooks with this flag set will not allow for a large amount of samples to build up on its slinfactories. We will flush the factories if they contain too many samples. </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951aa612c089312c6841fa6225b3efef44e2"></a>AST_AUDIOHOOK_MUTE_READ&#160;</td><td class="fielddoc"><p>audiohook should be mute frames read </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951aa7f52dd0d5d1d0cc63e0d62b98f97f5c"></a>AST_AUDIOHOOK_MUTE_WRITE&#160;</td><td class="fielddoc"><p>audiohook should be mute frames written </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951a494198800404c4b767170a1dac060e87"></a>AST_AUDIOHOOK_COMPATIBLE&#160;</td><td class="fielddoc"><p>is the audiohook native slin compatible </p>
</td></tr>
<tr><td class="fieldname"><a id="a6d4c98ade1d3dd2e755ffb52b1106951abb1912897be4282234afc9ffca28e238"></a>AST_AUDIOHOOK_SUBSTITUTE_SILENCE&#160;</td><td class="fielddoc"><p>Substitute silence for missing audio </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00054">54</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                         {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226">AST_AUDIOHOOK_TRIGGER_MODE</a>  = (3 &lt;&lt; 0), <span class="comment">/*!&lt; When audiohook should be triggered to do something */</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e">AST_AUDIOHOOK_TRIGGER_READ</a>  = (1 &lt;&lt; 0), <span class="comment">/*!&lt; Audiohook wants to be triggered when reading audio in */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6">AST_AUDIOHOOK_TRIGGER_WRITE</a> = (2 &lt;&lt; 0), <span class="comment">/*!&lt; Audiohook wants to be triggered when writing audio out */</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a76af7a6555f4582850cfaef9d5391e32">AST_AUDIOHOOK_WANTS_DTMF</a>    = (1 &lt;&lt; 2), <span class="comment">/*!&lt; Audiohook also wants to receive DTMF frames */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e">AST_AUDIOHOOK_TRIGGER_SYNC</a>  = (1 &lt;&lt; 3), <span class="comment">/*!&lt; Audiohook wants to be triggered when both sides have combined audio available */</span><span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">   /*! Audiohooks with this flag set will not allow for a large amount of samples to build up on its</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">    * slinfactories. We will flush the factories if they contain too many samples.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622">AST_AUDIOHOOK_SMALL_QUEUE</a>   = (1 &lt;&lt; 4),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951aa612c089312c6841fa6225b3efef44e2">AST_AUDIOHOOK_MUTE_READ</a>     = (1 &lt;&lt; 5), <span class="comment">/*!&lt; audiohook should be mute frames read */</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951aa7f52dd0d5d1d0cc63e0d62b98f97f5c">AST_AUDIOHOOK_MUTE_WRITE</a>    = (1 &lt;&lt; 6), <span class="comment">/*!&lt; audiohook should be mute frames written */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a494198800404c4b767170a1dac060e87">AST_AUDIOHOOK_COMPATIBLE</a>    = (1 &lt;&lt; 7), <span class="comment">/*!&lt; is the audiohook native slin compatible */</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abb1912897be4282234afc9ffca28e238">AST_AUDIOHOOK_SUBSTITUTE_SILENCE</a> = (1 &lt;&lt; 8), <span class="comment">/*!&lt; Substitute silence for missing audio */</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div><div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951abb1912897be4282234afc9ffca28e238"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abb1912897be4282234afc9ffca28e238">AST_AUDIOHOOK_SUBSTITUTE_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00068">audiohook.h:68</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e">AST_AUDIOHOOK_TRIGGER_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00056">audiohook.h:56</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951aa612c089312c6841fa6225b3efef44e2"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951aa612c089312c6841fa6225b3efef44e2">AST_AUDIOHOOK_MUTE_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00064">audiohook.h:64</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226">AST_AUDIOHOOK_TRIGGER_MODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00055">audiohook.h:55</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6">AST_AUDIOHOOK_TRIGGER_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00057">audiohook.h:57</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951aa7f52dd0d5d1d0cc63e0d62b98f97f5c"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951aa7f52dd0d5d1d0cc63e0d62b98f97f5c">AST_AUDIOHOOK_MUTE_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00065">audiohook.h:65</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e">AST_AUDIOHOOK_TRIGGER_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00059">audiohook.h:59</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622">AST_AUDIOHOOK_SMALL_QUEUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00063">audiohook.h:63</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951a76af7a6555f4582850cfaef9d5391e32"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a76af7a6555f4582850cfaef9d5391e32">AST_AUDIOHOOK_WANTS_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00058">audiohook.h:58</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951a494198800404c4b767170a1dac060e87"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a494198800404c4b767170a1dac060e87">AST_AUDIOHOOK_COMPATIBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00066">audiohook.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a015c8ec4d6538b316b6297279134d87f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015c8ec4d6538b316b6297279134d87f">&#9670;&nbsp;</a></span>ast_audiohook_init_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87f">ast_audiohook_init_flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a015c8ec4d6538b316b6297279134d87fadb150b4fd16c62ba0820d6b2c4b609f0"></a>AST_AUDIOHOOK_MANIPULATE_ALL_RATES&#160;</td><td class="fielddoc"><p>Audiohook manipulate callback is capable of handling slinear at any sample rate. Without enabling this flag on initialization the manipulation callback is guaranteed 8khz audio only. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00071">71</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                              {<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">   /*! Audiohook manipulate callback is capable of handling slinear at any sample rate.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">    * Without enabling this flag on initialization the manipulation callback is guaranteed</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">    * 8khz audio only. */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87fadb150b4fd16c62ba0820d6b2c4b609f0">AST_AUDIOHOOK_MANIPULATE_ALL_RATES</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;};</div><div class="ttc" id="audiohook_8h_html_a015c8ec4d6538b316b6297279134d87fadb150b4fd16c62ba0820d6b2c4b609f0"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87fadb150b4fd16c62ba0820d6b2c4b609f0">AST_AUDIOHOOK_MANIPULATE_ALL_RATES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00075">audiohook.h:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf2dd361123daa6446ade7c7ecfe55ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf2dd361123daa6446ade7c7ecfe55ad">&#9670;&nbsp;</a></span>ast_audiohook_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ad">ast_audiohook_status</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480"></a>AST_AUDIOHOOK_STATUS_NEW&#160;</td><td class="fielddoc"><p>Audiohook was just created, not in use yet </p>
</td></tr>
<tr><td class="fieldname"><a id="acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26"></a>AST_AUDIOHOOK_STATUS_RUNNING&#160;</td><td class="fielddoc"><p>Audiohook is running on a channel </p>
</td></tr>
<tr><td class="fieldname"><a id="acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57"></a>AST_AUDIOHOOK_STATUS_SHUTDOWN&#160;</td><td class="fielddoc"><p>Audiohook is being shutdown </p>
</td></tr>
<tr><td class="fieldname"><a id="acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"></a>AST_AUDIOHOOK_STATUS_DONE&#160;</td><td class="fielddoc"><p>Audiohook has shutdown and is not running on a channel any longer </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00041">41</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                          {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a> = 0,  <span class="comment">/*!&lt; Audiohook was just created, not in use yet */</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a>,  <span class="comment">/*!&lt; Audiohook is running on a channel */</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a>, <span class="comment">/*!&lt; Audiohook is being shutdown */</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>,     <span class="comment">/*!&lt; Audiohook has shutdown and is not running on a channel any longer */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;};</div><div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00042">audiohook.h:42</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00043">audiohook.h:43</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00045">audiohook.h:45</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00044">audiohook.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abce1d2faae234aa016905215014542b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce1d2faae234aa016905215014542b0">&#9670;&nbsp;</a></span>ast_audiohook_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"></a>AST_AUDIOHOOK_TYPE_SPY&#160;</td><td class="fielddoc"><p>Audiohook wants to receive audio </p>
</td></tr>
<tr><td class="fieldname"><a id="abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"></a>AST_AUDIOHOOK_TYPE_WHISPER&#160;</td><td class="fielddoc"><p>Audiohook wants to provide audio to be mixed with existing audio </p>
</td></tr>
<tr><td class="fieldname"><a id="abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08"></a>AST_AUDIOHOOK_TYPE_MANIPULATE&#160;</td><td class="fielddoc"><p>Audiohook wants to manipulate the audio </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00035">35</a> of file <a class="el" href="../../d0/d79/audiohook_8h_source.html">audiohook.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                        {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a> = 0,    <span class="comment">/*!&lt; Audiohook wants to receive audio */</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>,    <span class="comment">/*!&lt; Audiohook wants to provide audio to be mixed with existing audio */</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a>, <span class="comment">/*!&lt; Audiohook wants to manipulate the audio */</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;};</div><div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00037">audiohook.h:37</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00038">audiohook.h:38</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a94abfad20db137f9d6a33f641d37ac31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94abfad20db137f9d6a33f641d37ac31">&#9670;&nbsp;</a></span>ast_audiohook_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_attach </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attach audiohook to channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel </td></tr>
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00501">501</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00043">AST_AUDIOHOOK_STATUS_RUNNING</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00038">AST_AUDIOHOOK_TYPE_MANIPULATE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00036">AST_AUDIOHOOK_TYPE_SPY</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00037">AST_AUDIOHOOK_TYPE_WHISPER</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00585">ast_channel_audiohooks_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01028">ast_channel_set_unbridged_nolock()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00988">AST_FLAG_ZOMBIE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00468">audiohook_list_set_samplerate_compatibility()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00070">audiohook_set_internal_rate()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00048">DEFAULT_INTERNAL_SAMPLE_RATE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00061">ast_audiohook_list::list_internal_samp_rate</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00106">ast_audiohook::type</a>, and <a class="el" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook_move()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook_volume_get()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00399">detect_write()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00875">enable_jack_hook()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00294">init_hook()</a>, <a class="el" href="../../d3/d24/func__pitchshift_8c_source.html#l00192">pitchshift_helper()</a>, <a class="el" href="../../d2/d94/func__scramble_8c_source.html#l00160">scramble_write()</a>, <a class="el" href="../../d4/df5/func__talkdetect_8c_source.html#l00260">set_talk_detect()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00281">snoop_setup_audiohook()</a>, <a class="el" href="../../da/d22/func__speex_8c_source.html#l00196">speex_write()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00507">start_spying()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00529">startmon()</a>, and <a class="el" href="../../db/d57/func__volume_8c_source.html#l00150">volume_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <span class="comment">/* Don&#39;t allow an audiohook to be attached to a channel that is already hung up.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    * The hang up process is what actually notifies the audiohook that it should</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">    * stop.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *ahlist;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="comment">/* Whoops... allocate a new structure */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">if</span> (!(ahlist = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ahlist)))) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a8dec5f0bd378a1c23bbd9dba03b213fb">ast_channel_audiohooks_set</a>(chan, ahlist);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">spy_list</a>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">whisper_list</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">manipulate_list</a>);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="comment">/* This sample rate will adjust as necessary when writing to the list. */</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a1128eae9a08e01b224d00b6a1cedc9c7">list_internal_samp_rate</a> = <a class="code" href="../../d9/d4f/audiohook_8c.html#af20f926968e64afd048407a44d0d8cd1">DEFAULT_INTERNAL_SAMPLE_RATE</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="comment">/* Drop into respective list */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a>) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">spy_list</a>, audiohook, list);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">whisper_list</a>, audiohook, list);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a>) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">manipulate_list</a>, audiohook, list);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">    * Initialize the audiohook&#39;s rate to the default. If it needs to be,</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">    * it will get updated later.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#acdd6bc52a0838f53b4edb0fc8ccd90e0">audiohook_set_internal_rate</a>(audiohook, <a class="code" href="../../d9/d4f/audiohook_8c.html#af20f926968e64afd048407a44d0d8cd1">DEFAULT_INTERNAL_SAMPLE_RATE</a>, 1);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a0fdc87d6cbd536904831639d2eda924f">audiohook_list_set_samplerate_compatibility</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan));</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="comment">/* Change status over to running since it is now attached */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(chan)) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a>(chan, 1);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a8c401a6c8562abc320351d23f6aea958"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a></div><div class="ttdeci">struct ast_audiohook_list::@344 manipulate_list</div></div>
<div class="ttc" id="structast__audiohook_html_a2ad9abd9447a1c58bfe6b03e05f98335"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">ast_audiohook::type</a></div><div class="ttdeci">enum ast_audiohook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00106">audiohook.h:106</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a1128eae9a08e01b224d00b6a1cedc9c7"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a1128eae9a08e01b224d00b6a1cedc9c7">ast_audiohook_list::list_internal_samp_rate</a></div><div class="ttdeci">int list_internal_samp_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00061">audiohook.c:61</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="audiohook_8c_html_a5f263b2006fa3bd3e9a96d4580d0125c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a></div><div class="ttdeci">void ast_audiohook_update_status(struct ast_audiohook *audiohook, enum ast_audiohook_status status)</div><div class="ttdoc">Update audiohook&amp;#39;s status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00565">audiohook.c:565</a></div></div>
<div class="ttc" id="channel_8h_html_a8dec5f0bd378a1c23bbd9dba03b213fb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8dec5f0bd378a1c23bbd9dba03b213fb">ast_channel_audiohooks_set</a></div><div class="ttdeci">void ast_channel_audiohooks_set(struct ast_channel *chan, struct ast_audiohook_list *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00585">channel_internal_api.c:585</a></div></div>
<div class="ttc" id="structast__audiohook__list_html"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00055">audiohook.c:55</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a1bece4014d4ca841845778fc934e801a"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a></div><div class="ttdeci">struct ast_audiohook_list::@342 spy_list</div></div>
<div class="ttc" id="audiohook_8c_html_acdd6bc52a0838f53b4edb0fc8ccd90e0"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#acdd6bc52a0838f53b4edb0fc8ccd90e0">audiohook_set_internal_rate</a></div><div class="ttdeci">static int audiohook_set_internal_rate(struct ast_audiohook *audiohook, int rate, int reset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00070">audiohook.c:70</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00043">audiohook.h:43</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00037">audiohook.h:37</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00038">audiohook.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a175086606377b46d09f3f26a083416c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a></div><div class="ttdeci">void ast_channel_set_unbridged_nolock(struct ast_channel *chan, int value)</div><div class="ttdoc">Variant of ast_channel_set_unbridged. Use this if the channel is already locked prior to calling...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01028">channel_internal_api.c:1028</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00988">channel.h:988</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a7aa221428b0e2ffd70761b67968e3ddd"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a></div><div class="ttdeci">struct ast_audiohook_list::@343 whisper_list</div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="audiohook_8c_html_a0fdc87d6cbd536904831639d2eda924f"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a0fdc87d6cbd536904831639d2eda924f">audiohook_list_set_samplerate_compatibility</a></div><div class="ttdeci">static void audiohook_list_set_samplerate_compatibility(struct ast_audiohook_list *audiohook_list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00468">audiohook.c:468</a></div></div>
<div class="ttc" id="audiohook_8c_html_af20f926968e64afd048407a44d0d8cd1"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#af20f926968e64afd048407a44d0d8cd1">DEFAULT_INTERNAL_SAMPLE_RATE</a></div><div class="ttdeci">#define DEFAULT_INTERNAL_SAMPLE_RATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00048">audiohook.c:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fa661730d6fa6b9b12e410d66a3437b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa661730d6fa6b9b12e410d66a3437b">&#9670;&nbsp;</a></span>ast_audiohook_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys an audiohook structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00133">133</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00036">AST_AUDIOHOOK_TYPE_SPY</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00037">AST_AUDIOHOOK_TYPE_WHISPER</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00058">ast_slinfactory_destroy()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00115">ast_audiohook::format</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00104">ast_audiohook::lock</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00111">ast_audiohook::read_factory</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00116">ast_audiohook::trans_pvt</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00105">ast_audiohook::trigger</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00106">ast_audiohook::type</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00112">ast_audiohook::write_factory</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01241">audiohook_volume_destroy()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00640">channel_spy()</a>, <a class="el" href="../../d4/df5/func__talkdetect_8c_source.html#l00134">datastore_destroy_cb()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00201">destroy_callback()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00343">destroy_jack_data()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00515">destroy_monitor_audiohook()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00128">hook_datastore_destroy_callback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00933">launch_monitor_thread()</a>, and <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00080">snoop_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="comment">/* Drop the factories used by this audiohook type */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordflow">switch</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a>) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a>:</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>:</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#ab5361491bac02fb60732df5671879652">ast_slinfactory_destroy</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a72d12418b888e36b3d47a7703d2edced">read_factory</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#ab5361491bac02fb60732df5671879652">ast_slinfactory_destroy</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#aecd1ea17a6f1a4cc3bf683296792b262">write_factory</a>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="comment">/* Destroy translation path if present */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a747ca6507654d33f73cf289e8172a5dd">trans_pvt</a>)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a747ca6507654d33f73cf289e8172a5dd">trans_pvt</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <span class="comment">/* Lock and trigger be gone! */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="ttc" id="structast__audiohook_html_aecd1ea17a6f1a4cc3bf683296792b262"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#aecd1ea17a6f1a4cc3bf683296792b262">ast_audiohook::write_factory</a></div><div class="ttdeci">struct ast_slinfactory write_factory</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00112">audiohook.h:112</a></div></div>
<div class="ttc" id="structast__audiohook_html_a2ad9abd9447a1c58bfe6b03e05f98335"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">ast_audiohook::type</a></div><div class="ttdeci">enum ast_audiohook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00106">audiohook.h:106</a></div></div>
<div class="ttc" id="structast__audiohook_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_audiohook::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00104">audiohook.h:104</a></div></div>
<div class="ttc" id="structast__audiohook_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#ab425a484a0916077c5a30d9d7b229b44">ast_audiohook::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00115">audiohook.h:115</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00037">audiohook.h:37</a></div></div>
<div class="ttc" id="structast__audiohook_html_a747ca6507654d33f73cf289e8172a5dd"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a747ca6507654d33f73cf289e8172a5dd">ast_audiohook::trans_pvt</a></div><div class="ttdeci">struct ast_trans_pvt * trans_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00116">audiohook.h:116</a></div></div>
<div class="ttc" id="slinfactory_8h_html_ab5361491bac02fb60732df5671879652"><div class="ttname"><a href="../../da/d7d/slinfactory_8h.html#ab5361491bac02fb60732df5671879652">ast_slinfactory_destroy</a></div><div class="ttdeci">void ast_slinfactory_destroy(struct ast_slinfactory *sf)</div><div class="ttdoc">Destroy the contents of a slinfactory. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/slinfactory_8c_source.html#l00058">slinfactory.c:58</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
<div class="ttc" id="structast__audiohook_html_a1730983172cdc5373cf60e0e40294fb0"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">ast_audiohook::trigger</a></div><div class="ttdeci">ast_cond_t trigger</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00105">audiohook.h:105</a></div></div>
<div class="ttc" id="structast__audiohook_html_a72d12418b888e36b3d47a7703d2edced"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a72d12418b888e36b3d47a7703d2edced">ast_audiohook::read_factory</a></div><div class="ttdeci">struct ast_slinfactory read_factory</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00111">audiohook.h:111</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88b9ad3730e7adbc3b396bef4e85b12a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b9ad3730e7adbc3b396bef4e85b12a">&#9670;&nbsp;</a></span>ast_audiohook_detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_detach </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach audiohook from channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00579">579</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00045">AST_AUDIOHOOK_STATUS_DONE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00042">AST_AUDIOHOOK_STATUS_NEW</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00044">AST_AUDIOHOOK_STATUS_SHUTDOWN</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01142">ast_audiohook_trigger_wait()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00107">ast_audiohook::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00640">channel_spy()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00201">destroy_callback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00515">destroy_monitor_audiohook()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00942">disable_jack_hook()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00128">hook_datastore_destroy_callback()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00212">snoop_hangup()</a>, and <a class="el" href="../../da/d22/func__speex_8c_source.html#l00196">speex_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a> || audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">while</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> != <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a47bb160cbe5e534c0fca6560015ffe59">ast_audiohook_trigger_wait</a>(audiohook);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div><div class="ttc" id="audiohook_8c_html_a5f263b2006fa3bd3e9a96d4580d0125c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a></div><div class="ttdeci">void ast_audiohook_update_status(struct ast_audiohook *audiohook, enum ast_audiohook_status status)</div><div class="ttdoc">Update audiohook&amp;#39;s status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00565">audiohook.c:565</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00042">audiohook.h:42</a></div></div>
<div class="ttc" id="audiohook_8c_html_a47bb160cbe5e534c0fca6560015ffe59"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a47bb160cbe5e534c0fca6560015ffe59">ast_audiohook_trigger_wait</a></div><div class="ttdeci">void ast_audiohook_trigger_wait(struct ast_audiohook *audiohook)</div><div class="ttdoc">Wait for audiohook trigger to be triggered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01142">audiohook.c:1142</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00045">audiohook.h:45</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00044">audiohook.h:44</a></div></div>
<div class="ttc" id="structast__audiohook_html_a9c2c1a66c786d5e486ac428388d62e28"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">ast_audiohook::status</a></div><div class="ttdeci">enum ast_audiohook_status status</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00107">audiohook.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5da9cb8531c18cbae0c703a57acbf0f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5da9cb8531c18cbae0c703a57acbf0f3">&#9670;&nbsp;</a></span>ast_audiohook_detach_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_audiohook_detach_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *&#160;</td>
          <td class="paramname"><em>audiohook_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach audiohooks from list and destroy said list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook_list</td><td>List of audiohooks (NULL tolerant) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00594">594</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00045">AST_AUDIOHOOK_STATUS_DONE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00052">ast_audiohook_translate::format</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00063">ast_audiohook_list::in_translate</a>, <a class="el" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00117">ast_audiohook::manipulate_callback</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00064">ast_audiohook_list::out_translate</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00051">ast_audiohook_translate::trans_pvt</a>, and <a class="el" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l02537">destroy_hooks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <span class="keywordflow">if</span> (!audiohook_list) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="comment">/* Drop any spies */</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordflow">while</span> ((audiohook = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">spy_list</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>))) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="comment">/* Drop any whispering sources */</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keywordflow">while</span> ((audiohook = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">whisper_list</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>))) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="comment">/* Drop any manipulaters */</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="keywordflow">while</span> ((audiohook = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">manipulate_list</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>))) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a4592709f9cf7b13798a0afcafbd96893">manipulate_callback</a>(audiohook, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="comment">/* Drop translation paths if present */</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#afe31074fcddab60b8fb0019b1f16e67d">in_translate</a>[i].<a class="code" href="../../d6/d81/structast__audiohook__translate.html#a747ca6507654d33f73cf289e8172a5dd">trans_pvt</a>) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#afe31074fcddab60b8fb0019b1f16e67d">in_translate</a>[i].<a class="code" href="../../d6/d81/structast__audiohook__translate.html#a747ca6507654d33f73cf289e8172a5dd">trans_pvt</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#afe31074fcddab60b8fb0019b1f16e67d">in_translate</a>[i].<a class="code" href="../../d6/d81/structast__audiohook__translate.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      }</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">if</span> (audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a0ef356831a74b5632d5223819b992069">out_translate</a>[i].<a class="code" href="../../d6/d81/structast__audiohook__translate.html#a747ca6507654d33f73cf289e8172a5dd">trans_pvt</a>) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a0ef356831a74b5632d5223819b992069">out_translate</a>[i].<a class="code" href="../../d6/d81/structast__audiohook__translate.html#a747ca6507654d33f73cf289e8172a5dd">trans_pvt</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#afe31074fcddab60b8fb0019b1f16e67d">in_translate</a>[i].<a class="code" href="../../d6/d81/structast__audiohook__translate.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="comment">/* Free ourselves */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(audiohook_list);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div><div class="ttc" id="structast__audiohook__list_html_a8c401a6c8562abc320351d23f6aea958"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a></div><div class="ttdeci">struct ast_audiohook_list::@344 manipulate_list</div></div>
<div class="ttc" id="structast__audiohook__translate_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d6/d81/structast__audiohook__translate.html#ab425a484a0916077c5a30d9d7b229b44">ast_audiohook_translate::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00052">audiohook.c:52</a></div></div>
<div class="ttc" id="audiohook_8c_html_a5f263b2006fa3bd3e9a96d4580d0125c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a></div><div class="ttdeci">void ast_audiohook_update_status(struct ast_audiohook *audiohook, enum ast_audiohook_status status)</div><div class="ttdoc">Update audiohook&amp;#39;s status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00565">audiohook.c:565</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a0ef356831a74b5632d5223819b992069"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a0ef356831a74b5632d5223819b992069">ast_audiohook_list::out_translate</a></div><div class="ttdeci">struct ast_audiohook_translate out_translate[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00064">audiohook.c:64</a></div></div>
<div class="ttc" id="structast__audiohook__translate_html_a747ca6507654d33f73cf289e8172a5dd"><div class="ttname"><a href="../../d6/d81/structast__audiohook__translate.html#a747ca6507654d33f73cf289e8172a5dd">ast_audiohook_translate::trans_pvt</a></div><div class="ttdeci">struct ast_trans_pvt * trans_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00051">audiohook.c:51</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a1bece4014d4ca841845778fc934e801a"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a></div><div class="ttdeci">struct ast_audiohook_list::@342 spy_list</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__audiohook_html_a4592709f9cf7b13798a0afcafbd96893"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a4592709f9cf7b13798a0afcafbd96893">ast_audiohook::manipulate_callback</a></div><div class="ttdeci">ast_audiohook_manipulate_callback manipulate_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00117">audiohook.h:117</a></div></div>
<div class="ttc" id="structast__audiohook_html_a3c7494ffebc77669f8fe0ff589a3e253"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a></div><div class="ttdeci">struct ast_audiohook::@225 list</div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_afe31074fcddab60b8fb0019b1f16e67d"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#afe31074fcddab60b8fb0019b1f16e67d">ast_audiohook_list::in_translate</a></div><div class="ttdeci">struct ast_audiohook_translate in_translate[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00063">audiohook.c:63</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00045">audiohook.h:45</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a7aa221428b0e2ffd70761b67968e3ddd"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a></div><div class="ttdeci">struct ast_audiohook_list::@343 whisper_list</div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34ed9fa0751083523ea90d1ad7c81fbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ed9fa0751083523ea90d1ad7c81fbf">&#9670;&nbsp;</a></span>ast_audiohook_detach_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_detach_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach specified source audiohook from channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to detach from </td></tr>
    <tr><td class="paramname">source</td><td>Name of source to detach</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The channel does not need to be locked before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to detach from </td></tr>
    <tr><td class="paramname">source</td><td>Name of source to detach </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00731">731</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00045">AST_AUDIOHOOK_STATUS_DONE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00044">AST_AUDIOHOOK_STATUS_SHUTDOWN</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00640">find_audiohook_by_source()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00107">ast_audiohook::status</a>.</p>
<div class="fragment"><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;{</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="comment">/* Ensure the channel has audiohooks on it */</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   audiohook = <a class="code" href="../../d9/d4f/audiohook_8c.html#a1e0a923b8b1fa6d4be9060b3ece13b3b">find_audiohook_by_source</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordflow">if</span> (audiohook &amp;&amp; audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> != <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a>);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keywordflow">return</span> (audiohook ? 0 : -1);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="audiohook_8c_html_a5f263b2006fa3bd3e9a96d4580d0125c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a></div><div class="ttdeci">void ast_audiohook_update_status(struct ast_audiohook *audiohook, enum ast_audiohook_status status)</div><div class="ttdoc">Update audiohook&amp;#39;s status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00565">audiohook.c:565</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8c_html_a1e0a923b8b1fa6d4be9060b3ece13b3b"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a1e0a923b8b1fa6d4be9060b3ece13b3b">find_audiohook_by_source</a></div><div class="ttdeci">static struct ast_audiohook * find_audiohook_by_source(struct ast_audiohook_list *audiohook_list, const char *source)</div><div class="ttdoc">find an audiohook based on its source </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00640">audiohook.c:640</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__audiohook_html_af2ed45b90afa2ef4ec6e09625335a082"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">ast_audiohook::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00109">audiohook.h:109</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00045">audiohook.h:45</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adac1d3e44970c0af0ebd25b95f59b5cf57">AST_AUDIOHOOK_STATUS_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00044">audiohook.h:44</a></div></div>
<div class="ttc" id="structast__audiohook_html_a9c2c1a66c786d5e486ac428388d62e28"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">ast_audiohook::status</a></div><div class="ttdeci">enum ast_audiohook_status status</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00107">audiohook.h:107</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cdfa0bb99da5247ab56d5ca67483a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cdfa0bb99da5247ab56d5ca67483a8f">&#9670;&nbsp;</a></span>ast_audiohook_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a015c8ec4d6538b316b6297279134d87f">ast_audiohook_init_flags</a>&#160;</td>
          <td class="paramname"><em>init_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an audiohook structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">type</td><td>Type of audiohook to initialize this as </td></tr>
    <tr><td class="paramname">source</td><td>Who is initializing this audiohook </td></tr>
    <tr><td class="paramname">init</td><td>flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">type</td><td></td></tr>
    <tr><td class="paramname">source,init_flags</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00108">108</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00042">AST_AUDIOHOOK_STATUS_NEW</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00070">audiohook_set_internal_rate()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00048">DEFAULT_INTERNAL_SAMPLE_RATE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00108">ast_audiohook::init_flags</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00104">ast_audiohook::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00109">ast_audiohook::source</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00105">ast_audiohook::trigger</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00106">ast_audiohook::type</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00605">attach_barge()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook_volume_get()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00640">channel_spy()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00399">detect_write()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00875">enable_jack_hook()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00273">hook_state_alloc()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00933">launch_monitor_thread()</a>, <a class="el" href="../../d3/d24/func__pitchshift_8c_source.html#l00192">pitchshift_helper()</a>, <a class="el" href="../../d2/d94/func__scramble_8c_source.html#l00160">scramble_write()</a>, <a class="el" href="../../d4/df5/func__talkdetect_8c_source.html#l00260">set_talk_detect()</a>, <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00281">snoop_setup_audiohook()</a>, <a class="el" href="../../da/d22/func__speex_8c_source.html#l00196">speex_write()</a>, and <a class="el" href="../../db/d57/func__volume_8c_source.html#l00150">volume_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="comment">/* Need to keep the type and source */</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a> = <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="comment">/* Initialize lock that protects our audiohook */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a946d6a08822d2e60f531f94f555ccbd5">init_flags</a> = <a class="code" href="../../d2/d49/structast__audiohook.html#a946d6a08822d2e60f531f94f555ccbd5">init_flags</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="comment">/* initialize internal rate at 8khz, this will adjust if necessary */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#acdd6bc52a0838f53b4edb0fc8ccd90e0">audiohook_set_internal_rate</a>(audiohook, <a class="code" href="../../d9/d4f/audiohook_8c.html#af20f926968e64afd048407a44d0d8cd1">DEFAULT_INTERNAL_SAMPLE_RATE</a>, 0);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="comment">/* Since we are just starting out... this audiohook is new */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__audiohook_html_a2ad9abd9447a1c58bfe6b03e05f98335"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">ast_audiohook::type</a></div><div class="ttdeci">enum ast_audiohook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00106">audiohook.h:106</a></div></div>
<div class="ttc" id="audiohook_8c_html_a5f263b2006fa3bd3e9a96d4580d0125c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a></div><div class="ttdeci">void ast_audiohook_update_status(struct ast_audiohook *audiohook, enum ast_audiohook_status status)</div><div class="ttdoc">Update audiohook&amp;#39;s status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00565">audiohook.c:565</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="structast__audiohook_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_audiohook::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00104">audiohook.h:104</a></div></div>
<div class="ttc" id="audiohook_8c_html_acdd6bc52a0838f53b4edb0fc8ccd90e0"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#acdd6bc52a0838f53b4edb0fc8ccd90e0">audiohook_set_internal_rate</a></div><div class="ttdeci">static int audiohook_set_internal_rate(struct ast_audiohook *audiohook, int rate, int reset)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00070">audiohook.c:70</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adab303a4f550e2d8232d9803bf2d95f480">AST_AUDIOHOOK_STATUS_NEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00042">audiohook.h:42</a></div></div>
<div class="ttc" id="structast__audiohook_html_a946d6a08822d2e60f531f94f555ccbd5"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a946d6a08822d2e60f531f94f555ccbd5">ast_audiohook::init_flags</a></div><div class="ttdeci">enum ast_audiohook_init_flags init_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00108">audiohook.h:108</a></div></div>
<div class="ttc" id="structast__audiohook_html_af2ed45b90afa2ef4ec6e09625335a082"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">ast_audiohook::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00109">audiohook.h:109</a></div></div>
<div class="ttc" id="structast__audiohook_html_a1730983172cdc5373cf60e0e40294fb0"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">ast_audiohook::trigger</a></div><div class="ttdeci">ast_cond_t trigger</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00105">audiohook.h:105</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="audiohook_8c_html_af20f926968e64afd048407a44d0d8cd1"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#af20f926968e64afd048407a44d0d8cd1">DEFAULT_INTERNAL_SAMPLE_RATE</a></div><div class="ttdeci">#define DEFAULT_INTERNAL_SAMPLE_RATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00048">audiohook.c:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee985c02a01f9cbd475bf4481f5f66f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee985c02a01f9cbd475bf4481f5f66f9">&#9670;&nbsp;</a></span>ast_audiohook_move_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_audiohook_move_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>old_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>new_chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move all audiohooks from one channel to another. </p>
<dl class="section note"><dt>Note</dt><dd>It is required that both old_chan and new_chan are locked prior to calling this function. Besides needing to protect the data within the channels, not locking these channels can lead to a potential deadlock.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_chan</td><td>The source of the audiohooks being moved </td></tr>
    <tr><td class="paramname">new_chan</td><td>The destination channel for the audiohooks to be moved to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00700">700</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook_move()</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a>, and <a class="el" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06952">channel_do_masquerade()</a>.</p>
<div class="fragment"><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *audiohook_list;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   audiohook_list = <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(old_chan);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="keywordflow">if</span> (!audiohook_list) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">spy_list</a>, audiohook, list) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a68a690c4f5ffd3a5bf9f2458d83f7d41">audiohook_move</a>(old_chan, new_chan, audiohook);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">whisper_list</a>, audiohook, list) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a68a690c4f5ffd3a5bf9f2458d83f7d41">audiohook_move</a>(old_chan, new_chan, audiohook);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">manipulate_list</a>, audiohook, list) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <a class="code" href="../../d9/d4f/audiohook_8c.html#a68a690c4f5ffd3a5bf9f2458d83f7d41">audiohook_move</a>(old_chan, new_chan, audiohook);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div><div class="ttc" id="structast__audiohook__list_html_a8c401a6c8562abc320351d23f6aea958"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a></div><div class="ttdeci">struct ast_audiohook_list::@344 manipulate_list</div></div>
<div class="ttc" id="structast__audiohook__list_html"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00055">audiohook.c:55</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a1bece4014d4ca841845778fc934e801a"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a></div><div class="ttdeci">struct ast_audiohook_list::@342 spy_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="audiohook_8c_html_a68a690c4f5ffd3a5bf9f2458d83f7d41"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a68a690c4f5ffd3a5bf9f2458d83f7d41">audiohook_move</a></div><div class="ttdeci">static void audiohook_move(struct ast_channel *old_chan, struct ast_channel *new_chan, struct ast_audiohook *audiohook)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook.c:665</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a7aa221428b0e2ffd70761b67968e3ddd"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a></div><div class="ttdeci">struct ast_audiohook_list::@343 whisper_list</div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae09727634eabe798d8abc95d46fa7b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09727634eabe798d8abc95d46fa7b1e">&#9670;&nbsp;</a></span>ast_audiohook_move_by_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_audiohook_move_by_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>old_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>new_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move an audiohook from one channel to a new one. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000051">Todo:</a></b></dt><dd>Currently only the first audiohook of a specific source found will be moved. We should add the capability to move multiple audiohooks from a single source as well.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>It is required that both old_chan and new_chan are locked prior to calling this function. Besides needing to protect the data within the channels, not locking these channels can lead to a potential deadlock</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_chan</td><td>The source of the audiohook to move </td></tr>
    <tr><td class="paramname">new_chan</td><td>The destination to which we want the audiohook to move </td></tr>
    <tr><td class="paramname">source</td><td>The source of the audiohook we want to move </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00684">684</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook_move()</a>, and <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00640">find_audiohook_by_source()</a>.</p>
<div class="fragment"><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(old_chan)) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   audiohook = <a class="code" href="../../d9/d4f/audiohook_8c.html#a1e0a923b8b1fa6d4be9060b3ece13b3b">find_audiohook_by_source</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(old_chan), <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">if</span> (!audiohook) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a68a690c4f5ffd3a5bf9f2458d83f7d41">audiohook_move</a>(old_chan, new_chan, audiohook);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div><div class="ttc" id="audiohook_8c_html_a1e0a923b8b1fa6d4be9060b3ece13b3b"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a1e0a923b8b1fa6d4be9060b3ece13b3b">find_audiohook_by_source</a></div><div class="ttdeci">static struct ast_audiohook * find_audiohook_by_source(struct ast_audiohook_list *audiohook_list, const char *source)</div><div class="ttdoc">find an audiohook based on its source </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00640">audiohook.c:640</a></div></div>
<div class="ttc" id="structast__audiohook_html_af2ed45b90afa2ef4ec6e09625335a082"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">ast_audiohook::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00109">audiohook.h:109</a></div></div>
<div class="ttc" id="audiohook_8c_html_a68a690c4f5ffd3a5bf9f2458d83f7d41"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a68a690c4f5ffd3a5bf9f2458d83f7d41">audiohook_move</a></div><div class="ttdeci">static void audiohook_move(struct ast_channel *old_chan, struct ast_channel *new_chan, struct ast_audiohook *audiohook)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook.c:665</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02f2b31337c6e7dc8b8d2c514b64ea0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02f2b31337c6e7dc8b8d2c514b64ea0a">&#9670;&nbsp;</a></span>ast_audiohook_read_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_audiohook_read_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a frame in from the audiohook structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">samples</td><td>Number of samples wanted </td></tr>
    <tr><td class="paramname">direction</td><td>Direction the audio frame came from </td></tr>
    <tr><td class="paramname">format</td><td>Format of frame remote side wants back </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns frame on success, NULL on failure</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">samples</td><td>Number of samples wanted in requested output format </td></tr>
    <tr><td class="paramname">direction</td><td>Direction the audio frame came from </td></tr>
    <tr><td class="paramname">format</td><td>Format of frame remote side wants back </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns frame on success, NULL on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00449">449</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook_read_frame_helper()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00173">snoop_read()</a>, and <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00459">spy_generate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;{</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d4f/audiohook_8c.html#afa060ca2ccdb992716293353b8fbbccd">audiohook_read_frame_helper</a>(audiohook, samples, <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, format, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8c_html_afa060ca2ccdb992716293353b8fbbccd"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#afa060ca2ccdb992716293353b8fbbccd">audiohook_read_frame_helper</a></div><div class="ttdeci">static struct ast_frame * audiohook_read_frame_helper(struct ast_audiohook *audiohook, size_t samples, enum ast_audiohook_direction direction, struct ast_format *format, struct ast_frame **read_reference, struct ast_frame **write_reference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook.c:380</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a38494f36536e00ab9a4a9f0f3f65ac03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38494f36536e00ab9a4a9f0f3f65ac03">&#9670;&nbsp;</a></span>ast_audiohook_read_frame_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_audiohook_read_frame_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> **&#160;</td>
          <td class="paramname"><em>read_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> **&#160;</td>
          <td class="paramname"><em>write_frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a frame in from the audiohook structure in mixed audio mode and copies read and write frame data to provided arguments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">samples</td><td>Number of samples wanted </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d0/d98/structast__format.html" title="Definition of a media format. ">ast_format</a></td><td>Format of frame remote side wants back </td></tr>
    <tr><td class="paramname">read_frame</td><td>if available, we'll copy the read buffer to this. </td></tr>
    <tr><td class="paramname">write_frame</td><td>if available, we'll copy the write buffer to this. </td></tr>
    <tr><td class="paramname">direction</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns frame on success, NULL on failure</dd></dl>
<p>Reads a frame in from the audiohook structure in mixed audio mode and copies read and write frame data to provided arguments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">samples</td><td>Number of samples wanted </td></tr>
    <tr><td class="paramname">direction</td><td>Direction the audio frame came from </td></tr>
    <tr><td class="paramname">format</td><td>Format of frame remote side wants back </td></tr>
    <tr><td class="paramname">read_frame</td><td>frame pointer for copying read frame data </td></tr>
    <tr><td class="paramname">write_frame</td><td>frame pointer for copying write frame data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns frame on success, NULL on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00463">463</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00051">AST_AUDIOHOOK_DIRECTION_BOTH</a>, and <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook_read_frame_helper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00709">mixmonitor_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;{</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d4f/audiohook_8c.html#afa060ca2ccdb992716293353b8fbbccd">audiohook_read_frame_helper</a>(audiohook, samples, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>, format, read_frame, write_frame);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00051">audiohook.h:51</a></div></div>
<div class="ttc" id="audiohook_8c_html_afa060ca2ccdb992716293353b8fbbccd"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#afa060ca2ccdb992716293353b8fbbccd">audiohook_read_frame_helper</a></div><div class="ttdeci">static struct ast_frame * audiohook_read_frame_helper(struct ast_audiohook *audiohook, size_t samples, enum ast_audiohook_direction direction, struct ast_format *format, struct ast_frame **read_reference, struct ast_frame **write_reference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook.c:380</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34c80f85a6c8c76a4138323837c116d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34c80f85a6c8c76a4138323837c116d4">&#9670;&nbsp;</a></span>ast_audiohook_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove an audiohook from a specified channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to remove from </td></tr>
    <tr><td class="paramname">audiohook</td><td>Audiohook to remove</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The channel does not need to be locked before calling this function </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00764">764</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00045">AST_AUDIOHOOK_STATUS_DONE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00038">AST_AUDIOHOOK_TYPE_MANIPULATE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00036">AST_AUDIOHOOK_TYPE_SPY</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00037">AST_AUDIOHOOK_TYPE_WHISPER</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">ast_audiohook_update_status()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01028">ast_channel_set_unbridged_nolock()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00468">audiohook_list_set_samplerate_compatibility()</a>, <a class="el" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00106">ast_audiohook::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00665">audiohook_move()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00270">remove_detect()</a>, <a class="el" href="../../d2/d94/func__scramble_8c_source.html#l00131">remove_scrambler()</a>, <a class="el" href="../../d4/df5/func__talkdetect_8c_source.html#l00229">remove_talk_detect()</a>, and <a class="el" href="../../da/d22/func__speex_8c_source.html#l00196">speex_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;{</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a>) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;spy_list, audiohook, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;whisper_list, audiohook, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">type</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a>) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;manipulate_list, audiohook, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a0fdc87d6cbd536904831639d2eda924f">audiohook_list_set_samplerate_compatibility</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan));</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(chan)) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a>(chan, 1);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__audiohook_html_a2ad9abd9447a1c58bfe6b03e05f98335"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a2ad9abd9447a1c58bfe6b03e05f98335">ast_audiohook::type</a></div><div class="ttdeci">enum ast_audiohook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00106">audiohook.h:106</a></div></div>
<div class="ttc" id="audiohook_8c_html_a5f263b2006fa3bd3e9a96d4580d0125c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a5f263b2006fa3bd3e9a96d4580d0125c">ast_audiohook_update_status</a></div><div class="ttdeci">void ast_audiohook_update_status(struct ast_audiohook *audiohook, enum ast_audiohook_status status)</div><div class="ttdoc">Update audiohook&amp;#39;s status. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00565">audiohook.c:565</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="structast__audiohook_html_a3c7494ffebc77669f8fe0ff589a3e253"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a></div><div class="ttdeci">struct ast_audiohook::@225 list</div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00037">audiohook.h:37</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00038">audiohook.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a175086606377b46d09f3f26a083416c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a></div><div class="ttdeci">void ast_channel_set_unbridged_nolock(struct ast_channel *chan, int value)</div><div class="ttdoc">Variant of ast_channel_set_unbridged. Use this if the channel is already locked prior to calling...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01028">channel_internal_api.c:1028</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00045">audiohook.h:45</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="audiohook_8c_html_a0fdc87d6cbd536904831639d2eda924f"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a0fdc87d6cbd536904831639d2eda924f">audiohook_list_set_samplerate_compatibility</a></div><div class="ttdeci">static void audiohook_list_set_samplerate_compatibility(struct ast_audiohook_list *audiohook_list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00468">audiohook.c:468</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a305c3d4f03f737f1958d9b2fd4af0a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a305c3d4f03f737f1958d9b2fd4af0a37">&#9670;&nbsp;</a></span>ast_audiohook_set_mute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_set_mute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951">ast_audiohook_flags</a>&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>clear</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mute frames read from or written to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to muck with </td></tr>
    <tr><td class="paramname">source</td><td>Type of audiohook </td></tr>
    <tr><td class="paramname">flag</td><td>which direction to set / clear </td></tr>
    <tr><td class="paramname">clear</td><td>set or clear muted frames on direction based on flag parameter </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to muck with </td></tr>
    <tr><td class="paramname">source</td><td>Type of audiohook </td></tr>
    <tr><td class="paramname">flag</td><td>which flag to set / clear </td></tr>
    <tr><td class="paramname">clear</td><td>set or clear </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01424">1424</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00640">find_audiohook_by_source()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *audiohook = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="comment">/* Ensure the channel has audiohooks on it */</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   audiohook = <a class="code" href="../../d9/d4f/audiohook_8c.html#a1e0a923b8b1fa6d4be9060b3ece13b3b">find_audiohook_by_source</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="keywordflow">if</span> (audiohook) {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">if</span> (clear) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(audiohook, <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(audiohook, <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      }</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   <span class="keywordflow">return</span> (audiohook ? 0 : -1);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8c_html_a1e0a923b8b1fa6d4be9060b3ece13b3b"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a1e0a923b8b1fa6d4be9060b3ece13b3b">find_audiohook_by_source</a></div><div class="ttdeci">static struct ast_audiohook * find_audiohook_by_source(struct ast_audiohook_list *audiohook_list, const char *source)</div><div class="ttdoc">find an audiohook based on its source </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00640">audiohook.c:640</a></div></div>
<div class="ttc" id="f2c_8h_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00083">f2c.h:83</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__audiohook_html_af2ed45b90afa2ef4ec6e09625335a082"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">ast_audiohook::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00109">audiohook.h:109</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47bb160cbe5e534c0fca6560015ffe59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47bb160cbe5e534c0fca6560015ffe59">&#9670;&nbsp;</a></span>ast_audiohook_trigger_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_audiohook_trigger_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for audiohook trigger to be triggered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook to wait on </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01142">1142</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00104">ast_audiohook::lock</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00105">ast_audiohook::trigger</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00579">ast_audiohook_detach()</a>, and <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00709">mixmonitor_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;{</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keyword">struct </span>timeval wait;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keyword">struct </span>timespec ts;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(50000, 1000));</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   ts.tv_sec = wait.tv_sec;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   ts.tv_nsec = wait.tv_usec * 1000;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>, &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ts);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structast__audiohook_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_audiohook::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00104">audiohook.h:104</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="structast__audiohook_html_a1730983172cdc5373cf60e0e40294fb0"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">ast_audiohook::trigger</a></div><div class="ttdeci">ast_cond_t trigger</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00105">audiohook.h:105</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f263b2006fa3bd3e9a96d4580d0125c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f263b2006fa3bd3e9a96d4580d0125c">&#9670;&nbsp;</a></span>ast_audiohook_update_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_audiohook_update_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ad">ast_audiohook_status</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update audiohook's status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">audiohook</td><td>status enum</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>once status is updated to DONE, this function can not be used to set the status back to any other setting. Setting DONE effectively locks the status as such.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">status</td><td>Audiohook status enum</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>once status is updated to DONE, this function can not be used to set the status back to any other setting. Setting DONE effectively locks the status as such. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00565">565</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00295">ast_audiohook_lock</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00045">AST_AUDIOHOOK_STATUS_DONE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00300">ast_audiohook_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00107">ast_audiohook::status</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00105">ast_audiohook::trigger</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00501">ast_audiohook_attach()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00579">ast_audiohook_detach()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00594">ast_audiohook_detach_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00731">ast_audiohook_detach_source()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00108">ast_audiohook_init()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00764">ast_audiohook_remove()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00800">dtmf_audiohook_write_list()</a>, and <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01257">stop_mixmonitor_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#a6456e346fe813617f13d5bbf7e92db5a">ast_audiohook_lock</a>(audiohook);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">if</span> (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> != <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a>) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> = <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#aae4ac794c0f7ab8decd713cb9c43acf4">ast_audiohook_unlock</a>(audiohook);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="audiohook_8h_html_aae4ac794c0f7ab8decd713cb9c43acf4"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#aae4ac794c0f7ab8decd713cb9c43acf4">ast_audiohook_unlock</a></div><div class="ttdeci">#define ast_audiohook_unlock(ah)</div><div class="ttdoc">Unlock an audiohook. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00300">audiohook.h:300</a></div></div>
<div class="ttc" id="structast__audiohook_html_a1730983172cdc5373cf60e0e40294fb0"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">ast_audiohook::trigger</a></div><div class="ttdeci">ast_cond_t trigger</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00105">audiohook.h:105</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55ada82b3db86f4b5d34ca212dfb6fec2db14">AST_AUDIOHOOK_STATUS_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00045">audiohook.h:45</a></div></div>
<div class="ttc" id="structast__audiohook_html_a9c2c1a66c786d5e486ac428388d62e28"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">ast_audiohook::status</a></div><div class="ttdeci">enum ast_audiohook_status status</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00107">audiohook.h:107</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6456e346fe813617f13d5bbf7e92db5a"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6456e346fe813617f13d5bbf7e92db5a">ast_audiohook_lock</a></div><div class="ttdeci">#define ast_audiohook_lock(ah)</div><div class="ttdoc">Lock an audiohook. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00295">audiohook.h:295</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf8f4fc0dfd6a5f54e301ac66c5bc434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf8f4fc0dfd6a5f54e301ac66c5bc434">&#9670;&nbsp;</a></span>ast_audiohook_volume_adjust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_volume_adjust </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>volume</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the volume on frames read from or written to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to muck with </td></tr>
    <tr><td class="paramname">direction</td><td>Direction to increase </td></tr>
    <tr><td class="paramname">volume</td><td>Value to adjust the adjustment by </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to muck with </td></tr>
    <tr><td class="paramname">direction</td><td>Direction to increase </td></tr>
    <tr><td class="paramname">volume</td><td>Value to adjust the adjustment by </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01397">1397</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00051">AST_AUDIOHOOK_DIRECTION_BOTH</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00049">AST_AUDIOHOOK_DIRECTION_READ</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00050">AST_AUDIOHOOK_DIRECTION_WRITE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook_volume_get()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01233">audiohook_volume::read_adjustment</a>, and <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01234">audiohook_volume::write_adjustment</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03103">execute_menu_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;{</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a> *<a class="code" href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <span class="comment">/* Attempt to find the audiohook volume information, and create an audiohook if none exists */</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keywordflow">if</span> (!(audiohook_volume = <a class="code" href="../../d9/d4f/audiohook_8c.html#afe3e6285c5a976be492b202f870f6845">audiohook_volume_get</a>(chan, 1))) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="comment">/* Based on the direction change the specific adjustment value */</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> || <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>) {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      audiohook_volume-&gt;<a class="code" href="../../d9/dcb/structaudiohook__volume.html#a0a766b2643ed747312a40990b7792a07">read_adjustment</a> += <a class="code" href="../../da/d4c/structvolume.html">volume</a>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a> || <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      audiohook_volume-&gt;<a class="code" href="../../d9/dcb/structaudiohook__volume.html#ac97a76d6712af0af6937fe394d4c8432">write_adjustment</a> += <a class="code" href="../../da/d4c/structvolume.html">volume</a>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;}</div><div class="ttc" id="structaudiohook__volume_html"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a></div><div class="ttdoc">Audiohook volume adjustment structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01231">audiohook.c:1231</a></div></div>
<div class="ttc" id="structaudiohook__volume_html_ac97a76d6712af0af6937fe394d4c8432"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html#ac97a76d6712af0af6937fe394d4c8432">audiohook_volume::write_adjustment</a></div><div class="ttdeci">int write_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01234">audiohook.c:1234</a></div></div>
<div class="ttc" id="audiohook_8c_html_afe3e6285c5a976be492b202f870f6845"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#afe3e6285c5a976be492b202f870f6845">audiohook_volume_get</a></div><div class="ttdeci">static struct audiohook_volume * audiohook_volume_get(struct ast_channel *chan, int create)</div><div class="ttdoc">Helper function which finds and optionally creates an audiohook_volume_datastore datastore on a chann...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook.c:1305</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="structvolume_html"><div class="ttname"><a href="../../da/d4c/structvolume.html">volume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00890">app_meetme.c:890</a></div></div>
<div class="ttc" id="structaudiohook__volume_html_a0a766b2643ed747312a40990b7792a07"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html#a0a766b2643ed747312a40990b7792a07">audiohook_volume::read_adjustment</a></div><div class="ttdeci">int read_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01233">audiohook.c:1233</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00051">audiohook.h:51</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a39f5dbdf5ef7a979d4ba48f9ee71a422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f5dbdf5ef7a979d4ba48f9ee71a422">&#9670;&nbsp;</a></span>ast_audiohook_volume_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_volume_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the volume adjustment value on frames read from or written to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to retrieve volume adjustment from </td></tr>
    <tr><td class="paramname">direction</td><td>Direction to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns adjustment value </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to retrieve volume adjustment from </td></tr>
    <tr><td class="paramname">direction</td><td>Direction to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns adjustment value </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01371">1371</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00049">AST_AUDIOHOOK_DIRECTION_READ</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00050">AST_AUDIOHOOK_DIRECTION_WRITE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook_volume_get()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01233">audiohook_volume::read_adjustment</a>, and <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01234">audiohook_volume::write_adjustment</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;{</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a> *<a class="code" href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <span class="keywordtype">int</span> adjustment = 0;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="comment">/* Attempt to find the audiohook volume information, but do not create it as we only want to look at the values */</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="keywordflow">if</span> (!(audiohook_volume = <a class="code" href="../../d9/d4f/audiohook_8c.html#afe3e6285c5a976be492b202f870f6845">audiohook_volume_get</a>(chan, 0))) {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="comment">/* Grab the adjustment value based on direction given */</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>) {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      adjustment = audiohook_volume-&gt;<a class="code" href="../../d9/dcb/structaudiohook__volume.html#a0a766b2643ed747312a40990b7792a07">read_adjustment</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      adjustment = audiohook_volume-&gt;<a class="code" href="../../d9/dcb/structaudiohook__volume.html#ac97a76d6712af0af6937fe394d4c8432">write_adjustment</a>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   <span class="keywordflow">return</span> adjustment;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div><div class="ttc" id="structaudiohook__volume_html"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a></div><div class="ttdoc">Audiohook volume adjustment structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01231">audiohook.c:1231</a></div></div>
<div class="ttc" id="structaudiohook__volume_html_ac97a76d6712af0af6937fe394d4c8432"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html#ac97a76d6712af0af6937fe394d4c8432">audiohook_volume::write_adjustment</a></div><div class="ttdeci">int write_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01234">audiohook.c:1234</a></div></div>
<div class="ttc" id="audiohook_8c_html_afe3e6285c5a976be492b202f870f6845"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#afe3e6285c5a976be492b202f870f6845">audiohook_volume_get</a></div><div class="ttdeci">static struct audiohook_volume * audiohook_volume_get(struct ast_channel *chan, int create)</div><div class="ttdoc">Helper function which finds and optionally creates an audiohook_volume_datastore datastore on a chann...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook.c:1305</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="structaudiohook__volume_html_a0a766b2643ed747312a40990b7792a07"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html#a0a766b2643ed747312a40990b7792a07">audiohook_volume::read_adjustment</a></div><div class="ttdeci">int read_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01233">audiohook.c:1233</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae042519f3d210ea48604952be74044a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae042519f3d210ea48604952be74044a2">&#9670;&nbsp;</a></span>ast_audiohook_volume_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_volume_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>volume</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the volume on frames read from or written to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to muck with </td></tr>
    <tr><td class="paramname">direction</td><td>Direction to set on </td></tr>
    <tr><td class="paramname">volume</td><td>Value to adjust the volume by </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to muck with </td></tr>
    <tr><td class="paramname">direction</td><td>Direction to set on </td></tr>
    <tr><td class="paramname">volume</td><td>Value to adjust the volume by </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01346">1346</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00051">AST_AUDIOHOOK_DIRECTION_BOTH</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00049">AST_AUDIOHOOK_DIRECTION_READ</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00050">AST_AUDIOHOOK_DIRECTION_WRITE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook_volume_get()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01233">audiohook_volume::read_adjustment</a>, and <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01234">audiohook_volume::write_adjustment</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l03103">execute_menu_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a> *<a class="code" href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="comment">/* Attempt to find the audiohook volume information, but only create it if we are not setting the adjustment value to zero */</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordflow">if</span> (!(audiohook_volume = <a class="code" href="../../d9/d4f/audiohook_8c.html#afe3e6285c5a976be492b202f870f6845">audiohook_volume_get</a>(chan, (<a class="code" href="../../da/d4c/structvolume.html">volume</a> ? 1 : 0)))) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <span class="comment">/* Now based on the direction set the proper value */</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> || <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      audiohook_volume-&gt;<a class="code" href="../../d9/dcb/structaudiohook__volume.html#a0a766b2643ed747312a40990b7792a07">read_adjustment</a> = <a class="code" href="../../da/d4c/structvolume.html">volume</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a> || <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a>) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      audiohook_volume-&gt;<a class="code" href="../../d9/dcb/structaudiohook__volume.html#ac97a76d6712af0af6937fe394d4c8432">write_adjustment</a> = <a class="code" href="../../da/d4c/structvolume.html">volume</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;}</div><div class="ttc" id="structaudiohook__volume_html"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html">audiohook_volume</a></div><div class="ttdoc">Audiohook volume adjustment structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01231">audiohook.c:1231</a></div></div>
<div class="ttc" id="structaudiohook__volume_html_ac97a76d6712af0af6937fe394d4c8432"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html#ac97a76d6712af0af6937fe394d4c8432">audiohook_volume::write_adjustment</a></div><div class="ttdeci">int write_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01234">audiohook.c:1234</a></div></div>
<div class="ttc" id="audiohook_8c_html_afe3e6285c5a976be492b202f870f6845"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#afe3e6285c5a976be492b202f870f6845">audiohook_volume_get</a></div><div class="ttdeci">static struct audiohook_volume * audiohook_volume_get(struct ast_channel *chan, int create)</div><div class="ttdoc">Helper function which finds and optionally creates an audiohook_volume_datastore datastore on a chann...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01305">audiohook.c:1305</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="structvolume_html"><div class="ttname"><a href="../../da/d4c/structvolume.html">volume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00890">app_meetme.c:890</a></div></div>
<div class="ttc" id="structaudiohook__volume_html_a0a766b2643ed747312a40990b7792a07"><div class="ttname"><a href="../../d9/dcb/structaudiohook__volume.html#a0a766b2643ed747312a40990b7792a07">audiohook_volume::read_adjustment</a></div><div class="ttdeci">int read_adjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01233">audiohook.c:1233</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899af84e1c36b65319be79e79b03c8f4a360">AST_AUDIOHOOK_DIRECTION_BOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00051">audiohook.h:51</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3391dbd95c95f041cf14fa30e0f5c73d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3391dbd95c95f041cf14fa30e0f5c73d">&#9670;&nbsp;</a></span>ast_audiohook_write_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_write_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *&#160;</td>
          <td class="paramname"><em>audiohook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a frame into the audiohook structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook structure </td></tr>
    <tr><td class="paramname">direction</td><td>Direction the audio frame came from </td></tr>
    <tr><td class="paramname">frame</td><td>Frame to write in </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00170">170</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00049">AST_AUDIOHOOK_DIRECTION_READ</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00050">AST_AUDIOHOOK_DIRECTION_WRITE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00046">AST_AUDIOHOOK_LONG_QUEUE_TOLERANCE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00063">AST_AUDIOHOOK_SMALL_QUEUE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00045">AST_AUDIOHOOK_SMALL_QUEUE_TOLERANCE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00044">AST_AUDIOHOOK_SYNC_TOLERANCE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00055">AST_AUDIOHOOK_TRIGGER_MODE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00056">AST_AUDIOHOOK_TRIGGER_READ</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00059">AST_AUDIOHOOK_TRIGGER_SYNC</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00057">AST_AUDIOHOOK_TRIGGER_WRITE</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00199">ast_slinfactory_available()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00077">ast_slinfactory_feed()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00204">ast_slinfactory_flush()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00119">ast_audiohook::hook_internal_samp_rate</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00111">ast_audiohook::read_factory</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00113">ast_audiohook::read_time</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00105">ast_audiohook::trigger</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00112">ast_audiohook::write_factory</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00114">ast_audiohook::write_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00640">channel_spy()</a>, and <a class="el" href="../../dd/da3/res__stasis__snoop_8c_source.html#l00152">snoop_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *factory = (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> ? &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a72d12418b888e36b3d47a7703d2edced">read_factory</a> : &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#aecd1ea17a6f1a4cc3bf683296792b262">write_factory</a>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a> *other_factory = (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> ? &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#aecd1ea17a6f1a4cc3bf683296792b262">write_factory</a> : &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a72d12418b888e36b3d47a7703d2edced">read_factory</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keyword">struct </span>timeval *rwtime = (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a> ? &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a384631601a0f954752c9dc823974e2ce">read_time</a> : &amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1d0413130ca2d50bf809f74d6e4bfa21">write_time</a>), previous_time = *rwtime;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keywordtype">int</span> our_factory_samples;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keywordtype">int</span> our_factory_ms;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keywordtype">int</span> other_factory_samples;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keywordtype">int</span> other_factory_ms;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="comment">/* Update last feeding time to be current */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   *rwtime = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   our_factory_samples = <a class="code" href="../../da/d7d/slinfactory_8h.html#a6c48d283b3d2bce6af0a09c3b8b7fd0e">ast_slinfactory_available</a>(factory);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   our_factory_ms = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(*rwtime, previous_time) + (our_factory_samples / (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a5104fe646d3c7a4dd137c56db14a3640">hook_internal_samp_rate</a> / 1000));</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   other_factory_samples = <a class="code" href="../../da/d7d/slinfactory_8h.html#a6c48d283b3d2bce6af0a09c3b8b7fd0e">ast_slinfactory_available</a>(other_factory);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   other_factory_ms = other_factory_samples / (audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a5104fe646d3c7a4dd137c56db14a3640">hook_internal_samp_rate</a> / 1000);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e">AST_AUDIOHOOK_TRIGGER_SYNC</a>) &amp;&amp; (our_factory_ms - other_factory_ms &gt; <a class="code" href="../../d9/d4f/audiohook_8c.html#a4f988050ac148e5a281fc86313999be6">AST_AUDIOHOOK_SYNC_TOLERANCE</a>)) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Flushing audiohook %p so it remains in sync\n&quot;</span>, audiohook);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a>(factory);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a>(other_factory);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622">AST_AUDIOHOOK_SMALL_QUEUE</a>) &amp;&amp; ((our_factory_ms &gt; <a class="code" href="../../d9/d4f/audiohook_8c.html#aebbf36bcc8a123701ace1f3060701686">AST_AUDIOHOOK_SMALL_QUEUE_TOLERANCE</a>) || (other_factory_ms &gt; <a class="code" href="../../d9/d4f/audiohook_8c.html#aebbf36bcc8a123701ace1f3060701686">AST_AUDIOHOOK_SMALL_QUEUE_TOLERANCE</a>))) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Audiohook %p has stale audio in its factories. Flushing them both\n&quot;</span>, audiohook);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a>(factory);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a>(other_factory);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((our_factory_ms &gt; <a class="code" href="../../d9/d4f/audiohook_8c.html#a352722f588343ff2ce72362e923d92d1">AST_AUDIOHOOK_LONG_QUEUE_TOLERANCE</a>) || (other_factory_ms &gt; <a class="code" href="../../d9/d4f/audiohook_8c.html#a352722f588343ff2ce72362e923d92d1">AST_AUDIOHOOK_LONG_QUEUE_TOLERANCE</a>)) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Audiohook %p has stale audio in its factories. Flushing them both\n&quot;</span>, audiohook);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a>(factory);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a>(other_factory);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="comment">/* Write frame out to respective factory */</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <a class="code" href="../../da/d7d/slinfactory_8h.html#a83e5056051013853a0d80fc5862a9fe8">ast_slinfactory_feed</a>(factory, frame);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="comment">/* If we need to notify the respective handler of this audiohook, do so */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226">AST_AUDIOHOOK_TRIGGER_MODE</a>) == <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e">AST_AUDIOHOOK_TRIGGER_READ</a>) &amp;&amp; (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>)) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226">AST_AUDIOHOOK_TRIGGER_MODE</a>) == <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6">AST_AUDIOHOOK_TRIGGER_WRITE</a>) &amp;&amp; (<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>)) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(audiohook, <a class="code" href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e">AST_AUDIOHOOK_TRIGGER_SYNC</a>)) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;audiohook-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">trigger</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="ttc" id="structast__audiohook_html_aecd1ea17a6f1a4cc3bf683296792b262"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#aecd1ea17a6f1a4cc3bf683296792b262">ast_audiohook::write_factory</a></div><div class="ttdeci">struct ast_slinfactory write_factory</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00112">audiohook.h:112</a></div></div>
<div class="ttc" id="slinfactory_8h_html_a808da481a1c8673571179c51a97fb009"><div class="ttname"><a href="../../da/d7d/slinfactory_8h.html#a808da481a1c8673571179c51a97fb009">ast_slinfactory_flush</a></div><div class="ttdeci">void ast_slinfactory_flush(struct ast_slinfactory *sf)</div><div class="ttdoc">Flush the contents of a slinfactory. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/slinfactory_8c_source.html#l00204">slinfactory.c:204</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951ae6f7d2c4b49d2585445408f917be7e6e">AST_AUDIOHOOK_TRIGGER_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00056">audiohook.h:56</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="slinfactory_8h_html_a83e5056051013853a0d80fc5862a9fe8"><div class="ttname"><a href="../../da/d7d/slinfactory_8h.html#a83e5056051013853a0d80fc5862a9fe8">ast_slinfactory_feed</a></div><div class="ttdeci">int ast_slinfactory_feed(struct ast_slinfactory *sf, struct ast_frame *f)</div><div class="ttdoc">Feed audio into a slinfactory. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/slinfactory_8c_source.html#l00077">slinfactory.c:77</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structast__slinfactory_html"><div class="ttname"><a href="../../d8/dc7/structast__slinfactory.html">ast_slinfactory</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7d/slinfactory_8h_source.html#l00035">slinfactory.h:35</a></div></div>
<div class="ttc" id="slinfactory_8h_html_a6c48d283b3d2bce6af0a09c3b8b7fd0e"><div class="ttname"><a href="../../da/d7d/slinfactory_8h.html#a6c48d283b3d2bce6af0a09c3b8b7fd0e">ast_slinfactory_available</a></div><div class="ttdeci">unsigned int ast_slinfactory_available(const struct ast_slinfactory *sf)</div><div class="ttdoc">Retrieve number of samples currently in a slinfactory. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/slinfactory_8c_source.html#l00199">slinfactory.c:199</a></div></div>
<div class="ttc" id="audiohook_8c_html_a352722f588343ff2ce72362e923d92d1"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a352722f588343ff2ce72362e923d92d1">AST_AUDIOHOOK_LONG_QUEUE_TOLERANCE</a></div><div class="ttdeci">#define AST_AUDIOHOOK_LONG_QUEUE_TOLERANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00046">audiohook.c:46</a></div></div>
<div class="ttc" id="audiohook_8c_html_a4f988050ac148e5a281fc86313999be6"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a4f988050ac148e5a281fc86313999be6">AST_AUDIOHOOK_SYNC_TOLERANCE</a></div><div class="ttdeci">#define AST_AUDIOHOOK_SYNC_TOLERANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00044">audiohook.c:44</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951a9114a8e97375acbc3a3202c2d75a9226">AST_AUDIOHOOK_TRIGGER_MODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00055">audiohook.h:55</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951af3c73a99c0171f1121551b38cee3d6c6">AST_AUDIOHOOK_TRIGGER_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00057">audiohook.h:57</a></div></div>
<div class="ttc" id="structast__audiohook_html_a5104fe646d3c7a4dd137c56db14a3640"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a5104fe646d3c7a4dd137c56db14a3640">ast_audiohook::hook_internal_samp_rate</a></div><div class="ttdeci">unsigned int hook_internal_samp_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00119">audiohook.h:119</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951afe01f1fbfa9f1096386a2c7905f2630e">AST_AUDIOHOOK_TRIGGER_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00059">audiohook.h:59</a></div></div>
<div class="ttc" id="audiohook_8c_html_aebbf36bcc8a123701ace1f3060701686"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#aebbf36bcc8a123701ace1f3060701686">AST_AUDIOHOOK_SMALL_QUEUE_TOLERANCE</a></div><div class="ttdeci">#define AST_AUDIOHOOK_SMALL_QUEUE_TOLERANCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00045">audiohook.c:45</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6d4c98ade1d3dd2e755ffb52b1106951abffa78ee38fcba6555775cd6b5f46622">AST_AUDIOHOOK_SMALL_QUEUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00063">audiohook.h:63</a></div></div>
<div class="ttc" id="structast__audiohook_html_a1730983172cdc5373cf60e0e40294fb0"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a1730983172cdc5373cf60e0e40294fb0">ast_audiohook::trigger</a></div><div class="ttdeci">ast_cond_t trigger</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00105">audiohook.h:105</a></div></div>
<div class="ttc" id="structast__audiohook_html_a72d12418b888e36b3d47a7703d2edced"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a72d12418b888e36b3d47a7703d2edced">ast_audiohook::read_factory</a></div><div class="ttdeci">struct ast_slinfactory read_factory</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00111">audiohook.h:111</a></div></div>
<div class="ttc" id="structast__audiohook_html_a1d0413130ca2d50bf809f74d6e4bfa21"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a1d0413130ca2d50bf809f74d6e4bfa21">ast_audiohook::write_time</a></div><div class="ttdeci">struct timeval write_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00114">audiohook.h:114</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
<div class="ttc" id="structast__audiohook_html_a384631601a0f954752c9dc823974e2ce"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a384631601a0f954752c9dc823974e2ce">ast_audiohook::read_time</a></div><div class="ttdeci">struct timeval read_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00113">audiohook.h:113</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6351c89eb98b1832e85fa9c0fca7383f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6351c89eb98b1832e85fa9c0fca7383f">&#9670;&nbsp;</a></span>ast_audiohook_write_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_audiohook_write_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *&#160;</td>
          <td class="paramname"><em>audiohook_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899">ast_audiohook_direction</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pass a frame off to be handled by the audiohook core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel that the list is coming off of </td></tr>
    <tr><td class="paramname">audiohook_list</td><td>List of audiohooks </td></tr>
    <tr><td class="paramname">direction</td><td>Direction frame is coming in from </td></tr>
    <tr><td class="paramname">frame</td><td>The frame itself </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return frame on success, NULL on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01127">1127</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00955">audio_audiohook_write_list()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00800">dtmf_audiohook_write_list()</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;{</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="comment">/* Pass off frame to it&#39;s respective list write function */</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d4f/audiohook_8c.html#aa670562cb376cb726a122412d173127c">audio_audiohook_write_list</a>(chan, audiohook_list, <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, frame);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/d4f/audiohook_8c.html#a24cd014c45720f22b594db9cda49ee12">dtmf_audiohook_write_list</a>(chan, audiohook_list, <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, frame);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">return</span> frame;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;}</div><div class="ttc" id="audiohook_8c_html_aa670562cb376cb726a122412d173127c"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#aa670562cb376cb726a122412d173127c">audio_audiohook_write_list</a></div><div class="ttdeci">static struct ast_frame * audio_audiohook_write_list(struct ast_channel *chan, struct ast_audiohook_list *audiohook_list, enum ast_audiohook_direction direction, struct ast_frame *frame)</div><div class="ttdoc">Pass an AUDIO frame off to be handled by the audiohook core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00955">audiohook.c:955</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="audiohook_8c_html_a24cd014c45720f22b594db9cda49ee12"><div class="ttname"><a href="../../d9/d4f/audiohook_8c.html#a24cd014c45720f22b594db9cda49ee12">dtmf_audiohook_write_list</a></div><div class="ttdeci">static struct ast_frame * dtmf_audiohook_write_list(struct ast_channel *chan, struct ast_audiohook_list *audiohook_list, enum ast_audiohook_direction direction, struct ast_frame *frame)</div><div class="ttdoc">Pass a DTMF frame off to be handled by the audiohook core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00800">audiohook.c:800</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46613f6e1524089bf8c4b2a7880f716d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46613f6e1524089bf8c4b2a7880f716d">&#9670;&nbsp;</a></span>ast_audiohook_write_list_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_audiohook_write_list_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__audiohook__list.html">ast_audiohook_list</a> *&#160;</td>
          <td class="paramname"><em>audiohook_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if a audiohook_list is empty or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">audiohook</td><td>Audiohook to check. (NULL also means empty)</td></tr>
  </table>
  </dd>
</dl>
<p>retval 0 false, 1 true </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01112">1112</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a>, <a class="el" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a>, and <a class="el" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02523">ast_channel_has_audio_frame_or_monitor()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02530">ast_channel_has_hook_requiring_audio()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;{</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">return</span> !audiohook_list</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      || (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">spy_list</a>)</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         &amp;&amp; <a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">whisper_list</a>)</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;         &amp;&amp; <a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;audiohook_list-&gt;<a class="code" href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">manipulate_list</a>));</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div><div class="ttc" id="structast__audiohook__list_html_a8c401a6c8562abc320351d23f6aea958"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a8c401a6c8562abc320351d23f6aea958">ast_audiohook_list::manipulate_list</a></div><div class="ttdeci">struct ast_audiohook_list::@344 manipulate_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structast__audiohook__list_html_a1bece4014d4ca841845778fc934e801a"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a1bece4014d4ca841845778fc934e801a">ast_audiohook_list::spy_list</a></div><div class="ttdeci">struct ast_audiohook_list::@342 spy_list</div></div>
<div class="ttc" id="structast__audiohook__list_html_a7aa221428b0e2ffd70761b67968e3ddd"><div class="ttname"><a href="../../dd/d12/structast__audiohook__list.html#a7aa221428b0e2ffd70761b67968e3ddd">ast_audiohook_list::whisper_list</a></div><div class="ttdeci">struct ast_audiohook_list::@343 whisper_list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86f07afe75e6c2405d124d98faaf9800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f07afe75e6c2405d124d98faaf9800">&#9670;&nbsp;</a></span>ast_channel_audiohook_count_by_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_channel_audiohook_count_by_source </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find out how many audiohooks from a certain source exist on a given channel, regardless of status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel on which to find the spies </td></tr>
    <tr><td class="paramname">source</td><td>The audiohook's source </td></tr>
    <tr><td class="paramname">type</td><td>The type of audiohook </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the number of audiohooks which are from the source specified</dd></dl>
<p>Note: Function performs nlocking. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01157">1157</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00038">AST_AUDIOHOOK_TYPE_MANIPULATE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00036">AST_AUDIOHOOK_TYPE_SPY</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00037">AST_AUDIOHOOK_TYPE_WHISPER</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00109">ast_audiohook::source</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *ah = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a>:</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;spy_list, ah, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keywordflow">if</span> (!strcmp(ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>)) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;               count++;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;         }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>:</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;whisper_list, ah, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>) {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            <span class="keywordflow">if</span> (!strcmp(ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>)) {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;               count++;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;         }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a>:</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;manipulate_list, ah, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="keywordflow">if</span> (!strcmp(ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>)) {</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;               count++;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;         }</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Invalid audiohook type supplied, (%u)\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__audiohook_html_a3c7494ffebc77669f8fe0ff589a3e253"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a></div><div class="ttdeci">struct ast_audiohook::@225 list</div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00037">audiohook.h:37</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00038">audiohook.h:38</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__audiohook_html_af2ed45b90afa2ef4ec6e09625335a082"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">ast_audiohook::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00109">audiohook.h:109</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c85bb250bc65d74fecce3a388ef30bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c85bb250bc65d74fecce3a388ef30bd">&#9670;&nbsp;</a></span>ast_channel_audiohook_count_by_source_running()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_channel_audiohook_count_by_source_running </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0">ast_audiohook_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find out how many spies of a certain type exist on a given channel, and are in state running. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel on which to find the spies </td></tr>
    <tr><td class="paramname">source</td><td>The source of the audiohook </td></tr>
    <tr><td class="paramname">type</td><td>The type of spy to look for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the number of running audiohooks which are from the source specified</dd></dl>
<p>Note: Function performs no locking. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01197">1197</a> of file <a class="el" href="../../d9/d4f/audiohook_8c_source.html">audiohook.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00043">AST_AUDIOHOOK_STATUS_RUNNING</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00038">AST_AUDIOHOOK_TYPE_MANIPULATE</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00036">AST_AUDIOHOOK_TYPE_SPY</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00037">AST_AUDIOHOOK_TYPE_WHISPER</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00581">ast_channel_audiohooks()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00109">ast_audiohook::source</a>, and <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00107">ast_audiohook::status</a>.</p>
<div class="fragment"><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;{</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d49/structast__audiohook.html">ast_audiohook</a> *ah = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan))</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a>:</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;spy_list, ah, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>) {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="keywordflow">if</span> ((!strcmp(ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>)) &amp;&amp; (ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a>))</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;               count++;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;         }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a>:</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;whisper_list, ah, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <span class="keywordflow">if</span> ((!strcmp(ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>)) &amp;&amp; (ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a>))</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;               count++;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;         }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a>:</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)-&gt;manipulate_list, ah, <a class="code" href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">list</a>) {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <span class="keywordflow">if</span> ((!strcmp(ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>, <a class="code" href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">source</a>)) &amp;&amp; (ah-&gt;<a class="code" href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">status</a> == <a class="code" href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a>))</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;               count++;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;         }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Invalid audiohook type supplied, (%u)\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__audiohook_html_a3c7494ffebc77669f8fe0ff589a3e253"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a3c7494ffebc77669f8fe0ff589a3e253">ast_audiohook::list</a></div><div class="ttdeci">struct ast_audiohook::@225 list</div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf2dd361123daa6446ade7c7ecfe55adabcc7793ac9fbdcaa9e727aacfda27f26">AST_AUDIOHOOK_STATUS_RUNNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00043">audiohook.h:43</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0aecdafbcdb7048512d25cd19089198edd">AST_AUDIOHOOK_TYPE_WHISPER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00037">audiohook.h:37</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a20dda44508f42e63dc8ed45760affe08">AST_AUDIOHOOK_TYPE_MANIPULATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00038">audiohook.h:38</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__audiohook_html_af2ed45b90afa2ef4ec6e09625335a082"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#af2ed45b90afa2ef4ec6e09625335a082">ast_audiohook::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00109">audiohook.h:109</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
<div class="ttc" id="structast__audiohook_html_a9c2c1a66c786d5e486ac428388d62e28"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html#a9c2c1a66c786d5e486ac428388d62e28">ast_audiohook::status</a></div><div class="ttdeci">enum ast_audiohook_status status</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00107">audiohook.h:107</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="structast__audiohook_html"><div class="ttname"><a href="../../d2/d49/structast__audiohook.html">ast_audiohook</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00103">audiohook.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:51 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
