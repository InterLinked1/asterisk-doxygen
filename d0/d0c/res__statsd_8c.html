<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_statsd.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_statsd.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dfe/config__options_8h_source.html">asterisk/config_options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d67/statsd_8h_source.html">asterisk/statsd.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_statsd.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d87/res__statsd_8c__incl.png" border="0" usemap="#res__statsd_8c" alt=""/></div>
<map name="res__statsd_8c" id="res__statsd_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="868,80,952,107"/>
<area shape="rect" id="node22" href="../../db/dfe/config__options_8h.html" title="Configuration option&#45;handling. " alt="" coords="1161,80,1341,107"/>
<area shape="rect" id="node29" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1403,80,1539,107"/>
<area shape="rect" id="node30" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="1563,80,1710,107"/>
<area shape="rect" id="node33" href="../../d4/d67/statsd_8h.html" title="asterisk/statsd.h" alt="" coords="1791,80,1919,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="638,155,793,181"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="788,229,925,256"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="895,155,1029,181"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="617,229,763,256"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="355,304,497,331"/>
<area shape="rect" id="node24" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1307,155,1433,181"/>
<area shape="rect" id="node28" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1148,155,1283,181"/>
<area shape="rect" id="node25" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1397,229,1511,256"/>
<area shape="rect" id="node27" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1183,229,1330,256"/>
<area shape="rect" id="node26" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1513,304,1640,331"/>
<area shape="rect" id="node34" href="../../df/d3c/optional__api_8h.html" title="Optional API function macros. " alt="" coords="1831,155,1997,181"/>
</map>
</div>
</div>
<p><a href="../../d0/d0c/res__statsd_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/de8/structconf.html">conf</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">All configuration options for statsd client.  <a href="../../d6/de8/structconf.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/db5/structconf__global__options.html">conf_global_options</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global configuration options for statsd client.  <a href="../../da/db5/structconf__global__options.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a></td></tr>
<tr class="memdesc:a805616595a796949ade4a78edc628f99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Support for publishing to a StatsD server.  <a href="#a805616595a796949ade4a78edc628f99">More...</a><br /></td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea89c9d1fa09b69406d503a4e660ff5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#aaea89c9d1fa09b69406d503a4e660ff5">DEFAULT_STATSD_PORT</a>&#160;&#160;&#160;8125</td></tr>
<tr class="separator:aaea89c9d1fa09b69406d503a4e660ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb32037d29b6d4c9d903ba03b56f065"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#aecb32037d29b6d4c9d903ba03b56f065">MAX_PREFIX</a>&#160;&#160;&#160;40</td></tr>
<tr class="separator:aecb32037d29b6d4c9d903ba03b56f065"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a919de3e7988c56d7c8b2d3e255852c15"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a919de3e7988c56d7c8b2d3e255852c15">__init_statsd_buf</a> (void)</td></tr>
<tr class="separator:a919de3e7988c56d7c8b2d3e255852c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fca24c129fd3f25a49cadca39ad0a46"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a3fca24c129fd3f25a49cadca39ad0a46">AO2_GLOBAL_OBJ_STATIC</a> (<a class="el" href="../../df/dd2/structconfs.html">confs</a>)</td></tr>
<tr class="memdesc:a3fca24c129fd3f25a49cadca39ad0a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locking container for safe configuration access.  <a href="#a3fca24c129fd3f25a49cadca39ad0a46">More...</a><br /></td></tr>
<tr class="separator:a3fca24c129fd3f25a49cadca39ad0a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af766afeb615380c0321abe60eba7efb4"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#af766afeb615380c0321abe60eba7efb4">ast_statsd_log</a> (const char *metric_name, const char *metric_type, intmax_t <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:af766afeb615380c0321abe60eba7efb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a stat to the configured statsd server.  <a href="#af766afeb615380c0321abe60eba7efb4">More...</a><br /></td></tr>
<tr class="separator:af766afeb615380c0321abe60eba7efb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62bf91f3b650d9be741f40f312ad8996"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a62bf91f3b650d9be741f40f312ad8996">ast_statsd_log_full</a> (const char *metric_name, const char *metric_type, intmax_t <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, double sample_rate)</td></tr>
<tr class="memdesc:a62bf91f3b650d9be741f40f312ad8996"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a stat to the configured statsd server.  <a href="#a62bf91f3b650d9be741f40f312ad8996">More...</a><br /></td></tr>
<tr class="separator:a62bf91f3b650d9be741f40f312ad8996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf39155d70fe6bb8466d7484eb98edbe"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#acf39155d70fe6bb8466d7484eb98edbe">ast_statsd_log_full_va</a> (const char *metric_name, const char *metric_type, intmax_t <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, double sample_rate,...)</td></tr>
<tr class="memdesc:acf39155d70fe6bb8466d7484eb98edbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a stat to the configured statsd server.  <a href="#acf39155d70fe6bb8466d7484eb98edbe">More...</a><br /></td></tr>
<tr class="separator:acf39155d70fe6bb8466d7484eb98edbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c752296ac886b6707c9673c6e69aee"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ab8c752296ac886b6707c9673c6e69aee">ast_statsd_log_sample</a> (const char *metric_name, intmax_t <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, double sample_rate)</td></tr>
<tr class="memdesc:ab8c752296ac886b6707c9673c6e69aee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a random sampling of a stat to the configured statsd server.  <a href="#ab8c752296ac886b6707c9673c6e69aee">More...</a><br /></td></tr>
<tr class="separator:ab8c752296ac886b6707c9673c6e69aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8204ecd304e0800b8e6ff9cd19de1c2e"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a> (const char *metric_name, const char *metric_type, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, double sample_rate)</td></tr>
<tr class="memdesc:a8204ecd304e0800b8e6ff9cd19de1c2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a stat to the configured statsd server.  <a href="#a8204ecd304e0800b8e6ff9cd19de1c2e">More...</a><br /></td></tr>
<tr class="separator:a8204ecd304e0800b8e6ff9cd19de1c2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234ce495ad9dfebdfba1bd7bef233e2e"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a234ce495ad9dfebdfba1bd7bef233e2e">ast_statsd_log_string_va</a> (const char *metric_name, const char *metric_type, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>, double sample_rate,...)</td></tr>
<tr class="memdesc:a234ce495ad9dfebdfba1bd7bef233e2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a stat to the configured statsd server.  <a href="#a234ce495ad9dfebdfba1bd7bef233e2e">More...</a><br /></td></tr>
<tr class="separator:a234ce495ad9dfebdfba1bd7bef233e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dcdb65abe603fc64955bbb918449708"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a4dcdb65abe603fc64955bbb918449708">conf_alloc</a> (void)</td></tr>
<tr class="memdesc:a4dcdb65abe603fc64955bbb918449708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the statis http conf object.  <a href="#a4dcdb65abe603fc64955bbb918449708">More...</a><br /></td></tr>
<tr class="separator:a4dcdb65abe603fc64955bbb918449708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd85a7fe4bb3599f0bdc0b0bf98a2c2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a7dd85a7fe4bb3599f0bdc0b0bf98a2c2">conf_destructor</a> (void *obj)</td></tr>
<tr class="memdesc:a7dd85a7fe4bb3599f0bdc0b0bf98a2c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disposes of the statsd conf object.  <a href="#a7dd85a7fe4bb3599f0bdc0b0bf98a2c2">More...</a><br /></td></tr>
<tr class="separator:a7dd85a7fe4bb3599f0bdc0b0bf98a2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e2275df9b3eb4bb20c3f5cebacdd59"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a87e2275df9b3eb4bb20c3f5cebacdd59">conf_server</a> (const struct <a class="el" href="../../d6/de8/structconf.html">conf</a> *cfg, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:a87e2275df9b3eb4bb20c3f5cebacdd59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157072956aed9ed93604357a39bcae06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a157072956aed9ed93604357a39bcae06">CONFIG_INFO_STANDARD</a> (cfg_info, <a class="el" href="../../df/dd2/structconfs.html">confs</a>, <a class="el" href="../../d0/d0c/res__statsd_8c.html#a4dcdb65abe603fc64955bbb918449708">conf_alloc</a>,.files=<a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../d0/d0c/res__statsd_8c.html#a48d8fd7ac6a03bbb4c1e8694ee0d771f">conf_file</a>))</td></tr>
<tr class="separator:a157072956aed9ed93604357a39bcae06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273079f942c10840cc4992dc481c2b2e"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a> (void)</td></tr>
<tr class="memdesc:a273079f942c10840cc4992dc481c2b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to check if module is enabled.  <a href="#a273079f942c10840cc4992dc481c2b2e">More...</a><br /></td></tr>
<tr class="separator:a273079f942c10840cc4992dc481c2b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f9e9df37123f7f1bb79384fb08ae59"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ad5f9e9df37123f7f1bb79384fb08ae59">statsd_init</a> (void)</td></tr>
<tr class="separator:ad5f9e9df37123f7f1bb79384fb08ae59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3178239dd56aa39a36e60babf9445708"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a3178239dd56aa39a36e60babf9445708">statsd_shutdown</a> (void)</td></tr>
<tr class="separator:a3178239dd56aa39a36e60babf9445708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;StatsD client support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a9f8870a5687abe3d9a6b0b3fbc89a800">AST_MODULE_SUPPORT_EXTENDED</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .<a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="el" href="../../d6/d80/test__res__prometheus_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a8201de64237a41919013d62ae5d6721d">AST_MODPRI_REALTIME_DRIVER</a> + 5, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d8fd7ac6a03bbb4c1e8694ee0d771f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a48d8fd7ac6a03bbb4c1e8694ee0d771f">conf_file</a></td></tr>
<tr class="memdesc:a48d8fd7ac6a03bbb4c1e8694ee0d771f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The conf file that's processed for the module.  <a href="#a48d8fd7ac6a03bbb4c1e8694ee0d771f">More...</a><br /></td></tr>
<tr class="separator:a48d8fd7ac6a03bbb4c1e8694ee0d771f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab1543f7ac14f52ba5148960429e849"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a></td></tr>
<tr class="memdesc:aeab1543f7ac14f52ba5148960429e849"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping of the statsd conf struct's globals to the general context in the config file.  <a href="#aeab1543f7ac14f52ba5148960429e849">More...</a><br /></td></tr>
<tr class="separator:aeab1543f7ac14f52ba5148960429e849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b71d76cff3ccd9fe2a0c4a16d21271"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a> [] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../dc/d6b/res__xmpp_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>)</td></tr>
<tr class="separator:a05b71d76cff3ccd9fe2a0c4a16d21271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad02424c03e4b1b3ddbdb78d829489ac3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> = -1</td></tr>
<tr class="separator:ad02424c03e4b1b3ddbdb78d829489ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb7cae94e5c6078ed5baf0bbd61f11b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a8eb7cae94e5c6078ed5baf0bbd61f11b">statsd_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d0/d0c/res__statsd_8c.html#a919de3e7988c56d7c8b2d3e255852c15">__init_statsd_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a8eb7cae94e5c6078ed5baf0bbd61f11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Support for publishing to a StatsD server. </p>
<dl class="section author"><dt>Author</dt><dd>David M. Lee, II <a href="#" onclick="location.href='mai'+'lto:'+'dle'+'e@'+'dig'+'iu'+'m.c'+'om'; return false;">dlee@<span style="display: none;">.nosp@m.</span>digi<span style="display: none;">.nosp@m.</span>um.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00072">72</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="aaea89c9d1fa09b69406d503a4e660ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea89c9d1fa09b69406d503a4e660ff5">&#9670;&nbsp;</a></span>DEFAULT_STATSD_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_STATSD_PORT&#160;&#160;&#160;8125</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00075">75</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00103">conf_server()</a>.</p>

</div>
</div>
<a id="aecb32037d29b6d4c9d903ba03b56f065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb32037d29b6d4c9d903ba03b56f065">&#9670;&nbsp;</a></span>MAX_PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PREFIX&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00077">77</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a919de3e7988c56d7c8b2d3e255852c15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a919de3e7988c56d7c8b2d3e255852c15">&#9670;&nbsp;</a></span>__init_statsd_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_statsd_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00174">174</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00427">427</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00427">427</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="a3fca24c129fd3f25a49cadca39ad0a46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fca24c129fd3f25a49cadca39ad0a46">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dd2/structconfs.html">confs</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locking container for safe configuration access. </p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00427">427</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="af766afeb615380c0321abe60eba7efb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af766afeb615380c0321abe60eba7efb4">&#9670;&nbsp;</a></span>ast_statsd_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_statsd_log </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">intmax_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a stat to the configured statsd server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>String (UTF-8) name of the metric. </td></tr>
    <tr><td class="paramname">metric_type</td><td>Type of metric to send. </td></tr>
    <tr><td class="paramname">value</td><td>Value to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00222">222</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02508">load_module()</a>, <a class="el" href="../../d0/dff/res__chan__stats_8c_source.html#l00057">statsmaker()</a>, and <a class="el" href="../../d0/dff/res__chan__stats_8c_source.html#l00089">updates()</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="keywordtype">char</span> char_value[30];</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   snprintf(char_value, <span class="keyword">sizeof</span>(char_value), <span class="stringliteral">&quot;%jd&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a>(metric_name, metric_type, char_value, 1.0);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a8204ecd304e0800b8e6ff9cd19de1c2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_statsd_log_string(const char *metric_name, const char *metric_type, const char *value, double sample_rate)</div><div class="ttdoc">Send a stat to the configured statsd server. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00111">res_statsd.c:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62bf91f3b650d9be741f40f312ad8996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62bf91f3b650d9be741f40f312ad8996">&#9670;&nbsp;</a></span>ast_statsd_log_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_statsd_log_full </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">intmax_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sample_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a stat to the configured statsd server. </p>
<p>The is nearly the most flexible function for sending a message to the statsd server, but also the least easy to use. See <a class="el" href="../../d4/d67/statsd_8h.html#ab28a718bc4cbc0a95c67d16289258b7c" title="Send a stat to the configured statsd server. ">ast_statsd_log()</a> or <a class="el" href="../../d4/d67/statsd_8h.html#a58332cecf28c45ca5f59e15b47eff464" title="Send a random sampling of a stat to the configured statsd server. ">ast_statsd_log_sample()</a> for a slightly more convenient interface.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>String (UTF-8) name of the metric. </td></tr>
    <tr><td class="paramname">type_str</td><td>Type of metric to send. </td></tr>
    <tr><td class="paramname">value</td><td>Value to send. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>Percentage of samples to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00164">164</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00199">ast_statsd_log_full_va()</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordtype">char</span> char_value[30];</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   snprintf(char_value, <span class="keyword">sizeof</span>(char_value), <span class="stringliteral">&quot;%jd&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a>(metric_name, metric_type, char_value, sample_rate);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a8204ecd304e0800b8e6ff9cd19de1c2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_statsd_log_string(const char *metric_name, const char *metric_type, const char *value, double sample_rate)</div><div class="ttdoc">Send a stat to the configured statsd server. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00111">res_statsd.c:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf39155d70fe6bb8466d7484eb98edbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf39155d70fe6bb8466d7484eb98edbe">&#9670;&nbsp;</a></span>ast_statsd_log_full_va()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_statsd_log_full_va </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">intmax_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a stat to the configured statsd server. </p>
<dl class="section since"><dt>Since</dt><dd>13.7.0</dd></dl>
<p>This is the most flexible function for sending a message to the statsd server. In addition to allowing the value and sample rate to be specified, the metric_name can be formed as a printf style string with variable arguments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>Format string (UTF-8) specifying the name of the metric. </td></tr>
    <tr><td class="paramname">metric_type</td><td>Type of metric to send. </td></tr>
    <tr><td class="paramname">value</td><td>Value to send. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>Percentage of samples to send.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage: </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d67/statsd_8h.html#a99eb6797e9fb7e292a24a4f2b1f80e22">ast_statsd_log_full_va</a>(<a class="code" href="../../d4/d67/statsd_8h.html#a5228298c6ff272ebe04f872f92d13573">AST_STATSD_TIMER</a>, rtt, 1.0, <span class="stringliteral">&quot;endpoint.%s.rtt&quot;</span>, endpoint_name);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00199">199</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00895">AST_DYNSTR_BUILD_FAILED</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00164">ast_statsd_log_full()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00982">ast_str_set_va()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00174">statsd_buf</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dad/location_8c_source.html#l01366">ast_sip_initialize_sorcery_location()</a>, <a class="el" href="../../d6/d6a/res__endpoint__stats_8c_source.html#l00060">handle_endpoint_update()</a>, and <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00661">sip_options_contact_status_notify_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   va_list ap;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../d0/d0c/res__statsd_8c.html#a8eb7cae94e5c6078ed5baf0bbd61f11b">statsd_buf</a>, 128);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   va_start(ap, sample_rate);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a>(&amp;buf, 0, metric_name, ap);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   va_end(ap);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a62bf91f3b650d9be741f40f312ad8996">ast_statsd_log_full</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf), metric_type, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, sample_rate);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a271350c7540474095b75cbea17d4837a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a></div><div class="ttdeci">int ast_str_set_va(struct ast_str **buf, ssize_t max_len, const char *fmt, va_list ap)</div><div class="ttdoc">Set a dynamic string from a va_list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00982">strings.h:982</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a62bf91f3b650d9be741f40f312ad8996"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a62bf91f3b650d9be741f40f312ad8996">ast_statsd_log_full</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_statsd_log_full(const char *metric_name, const char *metric_type, intmax_t value, double sample_rate)</div><div class="ttdoc">Send a stat to the configured statsd server. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00164">res_statsd.c:164</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00895">strings.h:895</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a8eb7cae94e5c6078ed5baf0bbd61f11b"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a8eb7cae94e5c6078ed5baf0bbd61f11b">statsd_buf</a></div><div class="ttdeci">static struct ast_threadstorage statsd_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00174">res_statsd.c:174</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8c752296ac886b6707c9673c6e69aee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c752296ac886b6707c9673c6e69aee">&#9670;&nbsp;</a></span>ast_statsd_log_sample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_statsd_log_sample </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">intmax_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sample_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a random sampling of a stat to the configured statsd server. </p>
<p>The type of sampled metrics is always <a class="el" href="../../d4/d67/statsd_8h.html#a1a6b047259092c54df8702298188663a">AST_STATSD_COUNTER</a>. The given <em>sample_rate</em> should be a percentage between 0.0 and 1.0. If it's &lt;= 0.0, then no samples will be sent. If it's &gt;= 1.0, then all samples will be sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>String (UTF-8) name of the metric. </td></tr>
    <tr><td class="paramname">value</td><td>Value to send. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>Percentage of samples to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00231">231</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d67/statsd_8h_source.html#l00039">AST_STATSD_COUNTER</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keywordtype">char</span> char_value[30];</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   snprintf(char_value, <span class="keyword">sizeof</span>(char_value), <span class="stringliteral">&quot;%jd&quot;</span>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a>(metric_name, <a class="code" href="../../d4/d67/statsd_8h.html#a1a6b047259092c54df8702298188663a">AST_STATSD_COUNTER</a>, char_value,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      sample_rate);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a8204ecd304e0800b8e6ff9cd19de1c2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_statsd_log_string(const char *metric_name, const char *metric_type, const char *value, double sample_rate)</div><div class="ttdoc">Send a stat to the configured statsd server. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00111">res_statsd.c:111</a></div></div>
<div class="ttc" id="statsd_8h_html_a1a6b047259092c54df8702298188663a"><div class="ttname"><a href="../../d4/d67/statsd_8h.html#a1a6b047259092c54df8702298188663a">AST_STATSD_COUNTER</a></div><div class="ttdeci">#define AST_STATSD_COUNTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/statsd_8h_source.html#l00039">statsd.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8204ecd304e0800b8e6ff9cd19de1c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8204ecd304e0800b8e6ff9cd19de1c2e">&#9670;&nbsp;</a></span>ast_statsd_log_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_statsd_log_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sample_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a stat to the configured statsd server. </p>
<p>This function uses a character argument for value instead of an intmax_t argument. This is designed to be simpler to use for updating a current value rather than resetting it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>String (UTF-8) name of the metric. </td></tr>
    <tr><td class="paramname">type_str</td><td>Type of metric to send. </td></tr>
    <tr><td class="paramname">value</td><td>Value to send. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>Percentage of samples to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">111</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00087">conf_global_options::add_newline</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00599">ast_random_double</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00614">ast_sendto()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00688">ast_str_strlen()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00103">conf_server()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00097">conf::global</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00091">conf_global_options::prefix</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00080">socket_fd</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00222">ast_statsd_log()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00164">ast_statsd_log_full()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00231">ast_statsd_log_sample()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00176">ast_statsd_log_string_va()</a>, <a class="el" href="../../d6/d6a/res__endpoint__stats_8c_source.html#l00060">handle_endpoint_update()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01297">sip_outbound_registration_client_state_destroy()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01314">sip_outbound_registration_state_alloc()</a>, <a class="el" href="../../d8/d4d/app__statsd_8c_source.html#l00347">statsd_exec()</a>, <a class="el" href="../../d6/d6a/res__endpoint__stats_8c_source.html#l00045">update_endpoint_state()</a>, and <a class="el" href="../../d0/dff/res__chan__stats_8c_source.html#l00089">updates()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/de8/structconf.html">conf</a> *cfg;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *msg;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> statsd_server;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> == -1) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="comment">/* Rates &lt;= 0.0 never get logged.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">    * Rates &gt;= 1.0 always get logged.</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    * All others leave it to chance.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordflow">if</span> (sample_rate &lt;= 0.0 ||</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      (sample_rate &lt; 1.0 &amp;&amp; sample_rate &lt; <a class="code" href="../../d5/d60/utils_8h.html#ac90a7be57c48464fa2214b5aba227e8d">ast_random_double</a>())) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a87e2275df9b3eb4bb20c3f5cebacdd59">conf_server</a>(cfg, &amp;statsd_server);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   msg = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(40);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>-&gt;<a class="code" href="../../da/db5/structconf__global__options.html#aee83c133483f9c41237fe63077da525e">prefix</a>)) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;msg, 0, <span class="stringliteral">&quot;%s.&quot;</span>, cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>-&gt;<a class="code" href="../../da/db5/structconf__global__options.html#aee83c133483f9c41237fe63077da525e">prefix</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;msg, 0, <span class="stringliteral">&quot;%s:%s|%s&quot;</span>, metric_name, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, metric_type);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keywordflow">if</span> (sample_rate &lt; 1.0) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;msg, 0, <span class="stringliteral">&quot;|@%.2f&quot;</span>, sample_rate);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>-&gt;<a class="code" href="../../da/db5/structconf__global__options.html#af83f7f0ff5a1d9c25a8491268b6be225">add_newline</a>) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;msg, 0, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   len = <a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(msg);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;Sending statistic %s to StatsD server\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(msg));</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(msg), len, 0, &amp;statsd_server);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(msg);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a></div><div class="ttdeci">ssize_t ast_sendto(int sockfd, const void *buf, size_t len, int flags, const struct ast_sockaddr *dest_addr)</div><div class="ttdoc">Wrapper around sendto(2) that uses ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00614">netsock2.c:614</a></div></div>
<div class="ttc" id="structconf_html_ae5f2ed4b743e77795199677844ab931d"><div class="ttname"><a href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">conf::global</a></div><div class="ttdeci">struct conf_global_options * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00097">res_statsd.c:97</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structconf__global__options_html_af83f7f0ff5a1d9c25a8491268b6be225"><div class="ttname"><a href="../../da/db5/structconf__global__options.html#af83f7f0ff5a1d9c25a8491268b6be225">conf_global_options::add_newline</a></div><div class="ttdeci">int add_newline</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00087">res_statsd.c:87</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structconfs_html"><div class="ttname"><a href="../../df/dd2/structconfs.html">confs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00886">app_meetme.c:886</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="structconf__global__options_html_aee83c133483f9c41237fe63077da525e"><div class="ttname"><a href="../../da/db5/structconf__global__options.html#aee83c133483f9c41237fe63077da525e">conf_global_options::prefix</a></div><div class="ttdeci">char prefix[MAX_PREFIX+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00091">res_statsd.c:91</a></div></div>
<div class="ttc" id="res__statsd_8c_html_ad02424c03e4b1b3ddbdb78d829489ac3"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a></div><div class="ttdeci">static int socket_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00080">res_statsd.c:80</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="utils_8h_html_ac90a7be57c48464fa2214b5aba227e8d"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ac90a7be57c48464fa2214b5aba227e8d">ast_random_double</a></div><div class="ttdeci">#define ast_random_double()</div><div class="ttdoc">Returns a random number between 0.0 and 1.0, inclusive. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00599">utils.h:599</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a87e2275df9b3eb4bb20c3f5cebacdd59"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a87e2275df9b3eb4bb20c3f5cebacdd59">conf_server</a></div><div class="ttdeci">static void conf_server(const struct conf *cfg, struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00103">res_statsd.c:103</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a234ce495ad9dfebdfba1bd7bef233e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234ce495ad9dfebdfba1bd7bef233e2e">&#9670;&nbsp;</a></span>ast_statsd_log_string_va()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_statsd_log_string_va </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>metric_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a stat to the configured statsd server. </p>
<dl class="section since"><dt>Since</dt><dd>13.7.0</dd></dl>
<p>This is the most flexible function for sending a message to the statsd server. In addition to allowing the string value and sample rate to be specified, the metric_name can be formed as a printf style string with variable arguments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>Format string (UTF-8) specifying the name of the metric. </td></tr>
    <tr><td class="paramname">metric_type</td><td>Type of metric to send. </td></tr>
    <tr><td class="paramname">value</td><td>Value to send. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>Percentage of samples to send.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage: </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d67/statsd_8h.html#a2d6d16d49502503505c1b5748be47c83">ast_statsd_log_string_va</a>(<a class="code" href="../../d4/d67/statsd_8h.html#a6afb619b8958442badec05d4303a0d5d">AST_STATSD_GAUGE</a>, <span class="stringliteral">&quot;+1&quot;</span>, 1.0, <span class="stringliteral">&quot;endpoints.states.%s&quot;</span>, state_name);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00176">176</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00895">AST_DYNSTR_BUILD_FAILED</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00982">ast_str_set_va()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00174">statsd_buf</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00462">ast_res_pjsip_find_or_create_contact_status()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00661">sip_options_contact_status_notify_task()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l01010">sip_options_remove_contact_status()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l01110">sip_options_set_contact_status()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01297">sip_outbound_registration_client_state_destroy()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01314">sip_outbound_registration_state_alloc()</a>, and <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l00743">update_client_state_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   va_list ap;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   buf = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../d0/d0c/res__statsd_8c.html#a8eb7cae94e5c6078ed5baf0bbd61f11b">statsd_buf</a>, 128);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   va_start(ap, sample_rate);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   res = <a class="code" href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a>(&amp;buf, 0, metric_name, ap);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   va_end(ap);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a>) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf), metric_type, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, sample_rate);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a271350c7540474095b75cbea17d4837a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a271350c7540474095b75cbea17d4837a">ast_str_set_va</a></div><div class="ttdeci">int ast_str_set_va(struct ast_str **buf, ssize_t max_len, const char *fmt, va_list ap)</div><div class="ttdoc">Set a dynamic string from a va_list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00982">strings.h:982</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a640e110a8e92c1283f2aae76e4649f48a46fbdfa757aef01471bab9679ce4281f">AST_DYNSTR_BUILD_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00895">strings.h:895</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a8eb7cae94e5c6078ed5baf0bbd61f11b"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a8eb7cae94e5c6078ed5baf0bbd61f11b">statsd_buf</a></div><div class="ttdeci">static struct ast_threadstorage statsd_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00174">res_statsd.c:174</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a8204ecd304e0800b8e6ff9cd19de1c2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a8204ecd304e0800b8e6ff9cd19de1c2e">ast_statsd_log_string</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_statsd_log_string(const char *metric_name, const char *metric_type, const char *value, double sample_rate)</div><div class="ttdoc">Send a stat to the configured statsd server. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00111">res_statsd.c:111</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4dcdb65abe603fc64955bbb918449708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dcdb65abe603fc64955bbb918449708">&#9670;&nbsp;</a></span>conf_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* conf_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the statis http conf object. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00261">261</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00254">conf_destructor()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00097">conf::global</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00340">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de8/structconf.html">conf</a> *cfg;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cfg), <a class="code" href="../../d0/d0c/res__statsd_8c.html#a7dd85a7fe4bb3599f0bdc0b0bf98a2c2">conf_destructor</a>))) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (!(cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="structconf_html_ae5f2ed4b743e77795199677844ab931d"><div class="ttname"><a href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">conf::global</a></div><div class="ttdeci">struct conf_global_options * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00097">res_statsd.c:97</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a7dd85a7fe4bb3599f0bdc0b0bf98a2c2"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a7dd85a7fe4bb3599f0bdc0b0bf98a2c2">conf_destructor</a></div><div class="ttdeci">static void conf_destructor(void *obj)</div><div class="ttdoc">Disposes of the statsd conf object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00254">res_statsd.c:254</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7dd85a7fe4bb3599f0bdc0b0bf98a2c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dd85a7fe4bb3599f0bdc0b0bf98a2c2">&#9670;&nbsp;</a></span>conf_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void conf_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disposes of the statsd conf object. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00254">254</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00097">conf::global</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00261">conf_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/de8/structconf.html">conf</a> *cfg = obj;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div><div class="ttc" id="structconf_html_ae5f2ed4b743e77795199677844ab931d"><div class="ttname"><a href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">conf::global</a></div><div class="ttdeci">struct conf_global_options * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00097">res_statsd.c:97</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87e2275df9b3eb4bb20c3f5cebacdd59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87e2275df9b3eb4bb20c3f5cebacdd59">&#9670;&nbsp;</a></span>conf_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void conf_server </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d6/de8/structconf.html">conf</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00103">103</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00075">DEFAULT_STATSD_PORT</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00097">conf::global</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00089">conf_global_options::statsd_server</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">statsd_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   *addr = cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>-&gt;<a class="code" href="../../da/db5/structconf__global__options.html#a2a09291e29edb88823e56ef60454edc9">statsd_server</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(addr) == 0) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(addr, <a class="code" href="../../d0/d0c/res__statsd_8c.html#aaea89c9d1fa09b69406d503a4e660ff5">DEFAULT_STATSD_PORT</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="ttc" id="structconf_html_ae5f2ed4b743e77795199677844ab931d"><div class="ttname"><a href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">conf::global</a></div><div class="ttdeci">struct conf_global_options * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00097">res_statsd.c:97</a></div></div>
<div class="ttc" id="structconf__global__options_html_a2a09291e29edb88823e56ef60454edc9"><div class="ttname"><a href="../../da/db5/structconf__global__options.html#a2a09291e29edb88823e56ef60454edc9">conf_global_options::statsd_server</a></div><div class="ttdeci">struct ast_sockaddr statsd_server</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00089">res_statsd.c:89</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="res__statsd_8c_html_aaea89c9d1fa09b69406d503a4e660ff5"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#aaea89c9d1fa09b69406d503a4e660ff5">DEFAULT_STATSD_PORT</a></div><div class="ttdeci">#define DEFAULT_STATSD_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00075">res_statsd.c:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a157072956aed9ed93604357a39bcae06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a157072956aed9ed93604357a39bcae06">&#9670;&nbsp;</a></span>CONFIG_INFO_STANDARD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CONFIG_INFO_STANDARD </td>
          <td>(</td>
          <td class="paramtype">cfg_info&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/dd2/structconfs.html">confs</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d0c/res__statsd_8c.html#a4dcdb65abe603fc64955bbb918449708">conf_alloc</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>files</em> = <code><a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../d0/d0c/res__statsd_8c.html#a48d8fd7ac6a03bbb4c1e8694ee0d771f">conf_file</a>)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a273079f942c10840cc4992dc481c2b2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a273079f942c10840cc4992dc481c2b2e">&#9670;&nbsp;</a></span>is_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char is_enabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to check if module is enabled. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00288">288</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00340">load_module()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00396">reload_module()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">statsd_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/de8/structconf.html">conf</a> *, cfg, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../df/dd2/structconfs.html">confs</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">return</span> cfg-&gt;global-&gt;enabled;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structconfs_html"><div class="ttname"><a href="../../df/dd2/structconfs.html">confs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00886">app_meetme.c:886</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00340">340</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dfe/config__options_8h_source.html#l00064">ACO_EXACT</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00910">aco_info_destroy()</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00877">aco_info_init()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00623">aco_option_register</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00924">aco_set_defaults()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00087">conf_global_options::add_newline</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00835">CHARFLDSET</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00261">conf_alloc()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00085">conf_global_options::enabled</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00816">FLDSET</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00097">conf::global</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00288">is_enabled()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00330">OPT_CHAR_ARRAY_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00416">OPT_SOCKADDR_T</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00091">conf_global_options::prefix</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">statsd_init()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00089">conf_global_options::statsd_server</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00332">unload_module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00396">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a>(&amp;cfg_info)) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;enabled&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d0c/res__statsd_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="stringliteral">&quot;no&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>, 1,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../da/db5/structconf__global__options.html">conf_global_options</a>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>));</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;add_newline&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d0c/res__statsd_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="stringliteral">&quot;no&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>, 1,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../da/db5/structconf__global__options.html">conf_global_options</a>, add_newline));</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;server&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d0c/res__statsd_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>,</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="stringliteral">&quot;127.0.0.1&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ab1b335f36061d5ce7ca356168a496dbd">OPT_SOCKADDR_T</a>, 0,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../da/db5/structconf__global__options.html">conf_global_options</a>, statsd_server));</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;prefix&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d0c/res__statsd_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a">OPT_CHAR_ARRAY_T</a>, 0,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5a18d813ca848db340644212d89aac1a">CHARFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../da/db5/structconf__global__options.html">conf_global_options</a>, <a class="code" href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a>));</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 0) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/de8/structconf.html">conf</a> *cfg;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Could not load statsd config; using defaults\n&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      cfg = <a class="code" href="../../d0/d0c/res__statsd_8c.html#a4dcdb65abe603fc64955bbb918449708">conf_alloc</a>();</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a>(&amp;<a class="code" href="../../d0/d0c/res__statsd_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>, <span class="stringliteral">&quot;general&quot;</span>, cfg-&gt;<a class="code" href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">global</a>)) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize statsd defaults.\n&quot;</span>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;         <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cfg);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a>()) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad5f9e9df37123f7f1bb79384fb08ae59">statsd_init</a>()) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="../../d0/d0c/res__statsd_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ab1b335f36061d5ce7ca356168a496dbd"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ab1b335f36061d5ce7ca356168a496dbd">OPT_SOCKADDR_T</a></div><div class="ttdoc">Type for default handler for ast_sockaddrs. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00416">config_options.h:416</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a4dcdb65abe603fc64955bbb918449708"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a4dcdb65abe603fc64955bbb918449708">conf_alloc</a></div><div class="ttdeci">static void * conf_alloc(void)</div><div class="ttdoc">Creates the statis http conf object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00261">res_statsd.c:261</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="config__options_8h_html_a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00064">config_options.h:64</a></div></div>
<div class="ttc" id="structconf_html_ae5f2ed4b743e77795199677844ab931d"><div class="ttname"><a href="../../d6/de8/structconf.html#ae5f2ed4b743e77795199677844ab931d">conf::global</a></div><div class="ttdeci">struct conf_global_options * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00097">res_statsd.c:97</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a273079f942c10840cc4992dc481c2b2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a></div><div class="ttdeci">static char is_enabled(void)</div><div class="ttdoc">Helper function to check if module is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00288">res_statsd.c:288</a></div></div>
<div class="ttc" id="config__options_8h_html_a60d17d3e9451ddcb5aa861339c757bed"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a></div><div class="ttdeci">#define aco_option_register(info, name, matchtype, types, default_val, opt_type, flags,...)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00623">config_options.h:623</a></div></div>
<div class="ttc" id="config__options_8h_html_a5a18d813ca848db340644212d89aac1a"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5a18d813ca848db340644212d89aac1a">CHARFLDSET</a></div><div class="ttdeci">#define CHARFLDSET(type, field)</div><div class="ttdoc">A helper macro to pass the appropriate arguments to aco_option_register for OPT_CHAR_ARRAY_T. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00835">config_options.h:835</a></div></div>
<div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="res__statsd_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00332">res_statsd.c:332</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a">OPT_CHAR_ARRAY_T</a></div><div class="ttdoc">Type for default option handler for character array strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00330">config_options.h:330</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a5793d5d6ccf2df0b2423eb3274af7802"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a></div><div class="ttdeci">#define FLDSET(type,...)</div><div class="ttdoc">Convert a struct and list of fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00816">config_options.h:816</a></div></div>
<div class="ttc" id="config__options_8h_html_a3f40a7cffea07c21a21faaee64d24398"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a></div><div class="ttdeci">int aco_info_init(struct aco_info *info)</div><div class="ttdoc">Initialize an aco_info structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00877">config_options.c:877</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a05b71d76cff3ccd9fe2a0c4a16d21271"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a></div><div class="ttdeci">static struct aco_type * global_options[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00251">res_statsd.c:251</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="config__options_8h_html_a21b11339ca4d0b1167c956a9f816bd19"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a></div><div class="ttdeci">void aco_info_destroy(struct aco_info *info)</div><div class="ttdoc">Destroy an initialized aco_info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00910">config_options.c:910</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="config__options_8h_html_a206bf60e38d1114efdeeabc35b7eaa69"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a></div><div class="ttdeci">int aco_set_defaults(struct aco_type *type, const char *category, void *obj)</div><div class="ttdoc">Set all default options of obj. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00924">config_options.c:924</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="structconfs_html"><div class="ttname"><a href="../../df/dd2/structconfs.html">confs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00886">app_meetme.c:886</a></div></div>
<div class="ttc" id="structconf__global__options_html"><div class="ttname"><a href="../../da/db5/structconf__global__options.html">conf_global_options</a></div><div class="ttdoc">Global configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00083">res_statsd.c:83</a></div></div>
<div class="ttc" id="res__statsd_8c_html_aeab1543f7ac14f52ba5148960429e849"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a></div><div class="ttdeci">static struct aco_type global_option</div><div class="ttdoc">Mapping of the statsd conf struct&amp;#39;s globals to the general context in the config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00243">res_statsd.c:243</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="res__statsd_8c_html_ad5f9e9df37123f7f1bb79384fb08ae59"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#ad5f9e9df37123f7f1bb79384fb08ae59">statsd_init</a></div><div class="ttdeci">static int statsd_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00294">res_statsd.c:294</a></div></div>
<div class="ttc" id="http_8c_html_a6f25bc812d09fedb86bf394c01061c56"><div class="ttname"><a href="../../dd/d43/http_8c.html#a6f25bc812d09fedb86bf394c01061c56">prefix</a></div><div class="ttdeci">static char prefix[MAX_PREFIX]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00141">http.c:141</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00091">dnsmgr.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00396">396</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00525">ACO_PROCESS_OK</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00526">ACO_PROCESS_UNCHANGED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00323">AST_MODPRI_REALTIME_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00122">AST_MODULE_SUPPORT_EXTENDED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00288">is_enabled()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00340">load_module()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">statsd_init()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00323">statsd_shutdown()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00332">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 1)) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75aaa6b602f6af309569d2645824b2d142f">ACO_PROCESS_OK</a>:</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a495c9f3ecdfcdf875948b74cf22a633d">ACO_PROCESS_UNCHANGED</a>:</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>:</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a>()) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad5f9e9df37123f7f1bb79384fb08ae59">statsd_init</a>()) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="../../d0/d0c/res__statsd_8c.html#a3178239dd56aa39a36e60babf9445708">statsd_shutdown</a>();</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a3178239dd56aa39a36e60babf9445708"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a3178239dd56aa39a36e60babf9445708">statsd_shutdown</a></div><div class="ttdeci">static void statsd_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00323">res_statsd.c:323</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a273079f942c10840cc4992dc481c2b2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a></div><div class="ttdeci">static char is_enabled(void)</div><div class="ttdoc">Helper function to check if module is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00288">res_statsd.c:288</a></div></div>
<div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a495c9f3ecdfcdf875948b74cf22a633d"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a495c9f3ecdfcdf875948b74cf22a633d">ACO_PROCESS_UNCHANGED</a></div><div class="ttdoc">The config had not been edited and no changes applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00526">config_options.h:526</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75aaa6b602f6af309569d2645824b2d142f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75aaa6b602f6af309569d2645824b2d142f">ACO_PROCESS_OK</a></div><div class="ttdoc">The config was processed and applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00525">config_options.h:525</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__statsd_8c_html_ad5f9e9df37123f7f1bb79384fb08ae59"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#ad5f9e9df37123f7f1bb79384fb08ae59">statsd_init</a></div><div class="ttdeci">static int statsd_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00294">res_statsd.c:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5f9e9df37123f7f1bb79384fb08ae59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f9e9df37123f7f1bb79384fb08ae59">&#9670;&nbsp;</a></span>statsd_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int statsd_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">294</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00207">AST_SOCKADDR_STR_DEFAULT</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00065">ast_sockaddr_stringify_fmt()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00139">AST_YESNO</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00103">conf_server()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00288">is_enabled()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00080">socket_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00340">load_module()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00396">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/de8/structconf.html">conf</a> *, cfg, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../df/dd2/structconfs.html">confs</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordtype">char</span> *server;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> statsd_server;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a>());</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Configuring StatsD client.\n&quot;</span>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> == -1) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Creating StatsD socket.\n&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> == -1) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;         perror(<span class="stringliteral">&quot;Error creating StatsD socket&quot;</span>);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a87e2275df9b3eb4bb20c3f5cebacdd59">conf_server</a>(cfg, &amp;statsd_server);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   server = <a class="code" href="../../db/df1/netsock2_8h.html#aad2e0cad576255ff62b04a6b11b65491">ast_sockaddr_stringify_fmt</a>(&amp;statsd_server,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a66c24baffb112589545fb859cb507d22">AST_SOCKADDR_STR_DEFAULT</a>);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;  StatsD server = %s.\n&quot;</span>, server);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;  add newline = %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(cfg-&gt;global-&gt;add_newline));</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;  prefix = %s\n&quot;</span>, cfg-&gt;global-&gt;prefix);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="ttc" id="res__statsd_8c_html_a273079f942c10840cc4992dc481c2b2e"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a273079f942c10840cc4992dc481c2b2e">is_enabled</a></div><div class="ttdeci">static char is_enabled(void)</div><div class="ttdoc">Helper function to check if module is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00288">res_statsd.c:288</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_a66c24baffb112589545fb859cb507d22"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a66c24baffb112589545fb859cb507d22">AST_SOCKADDR_STR_DEFAULT</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00207">netsock2.h:207</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad2e0cad576255ff62b04a6b11b65491"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad2e0cad576255ff62b04a6b11b65491">ast_sockaddr_stringify_fmt</a></div><div class="ttdeci">char * ast_sockaddr_stringify_fmt(const struct ast_sockaddr *addr, int format)</div><div class="ttdoc">Convert a socket address to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00065">netsock2.c:65</a></div></div>
<div class="ttc" id="structconfs_html"><div class="ttname"><a href="../../df/dd2/structconfs.html">confs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00886">app_meetme.c:886</a></div></div>
<div class="ttc" id="strings_8h_html_ab7cad97bd640223a24b4bd60ef0e406f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a></div><div class="ttdeci">#define AST_YESNO(x)</div><div class="ttdoc">return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00139">strings.h:139</a></div></div>
<div class="ttc" id="res__statsd_8c_html_ad02424c03e4b1b3ddbdb78d829489ac3"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a></div><div class="ttdeci">static int socket_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00080">res_statsd.c:80</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__statsd_8c_html_a87e2275df9b3eb4bb20c3f5cebacdd59"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a87e2275df9b3eb4bb20c3f5cebacdd59">conf_server</a></div><div class="ttdeci">static void conf_server(const struct conf *cfg, struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00103">res_statsd.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3178239dd56aa39a36e60babf9445708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3178239dd56aa39a36e60babf9445708">&#9670;&nbsp;</a></span>statsd_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void statsd_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00323">323</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00080">socket_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00396">reload_module()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00332">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Shutting down StatsD client.\n&quot;</span>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> != -1) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      close(<a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <a class="code" href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a> = -1;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div><div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="res__statsd_8c_html_ad02424c03e4b1b3ddbdb78d829489ac3"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#ad02424c03e4b1b3ddbdb78d829489ac3">socket_fd</a></div><div class="ttdeci">static int socket_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00080">res_statsd.c:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00332">332</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00910">aco_info_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00323">statsd_shutdown()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00340">load_module()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00396">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <a class="code" href="../../d0/d0c/res__statsd_8c.html#a3178239dd56aa39a36e60babf9445708">statsd_shutdown</a>();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div><div class="ttc" id="res__statsd_8c_html_a3178239dd56aa39a36e60babf9445708"><div class="ttname"><a href="../../d0/d0c/res__statsd_8c.html#a3178239dd56aa39a36e60babf9445708">statsd_shutdown</a></div><div class="ttdeci">static void statsd_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00323">res_statsd.c:323</a></div></div>
<div class="ttc" id="config__options_8h_html_a21b11339ca4d0b1167c956a9f816bd19"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a></div><div class="ttdeci">void aco_info_destroy(struct aco_info *info)</div><div class="ttdoc">Destroy an initialized aco_info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00910">config_options.c:910</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="structconfs_html"><div class="ttname"><a href="../../df/dd2/structconfs.html">confs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00886">app_meetme.c:886</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;StatsD client support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a9f8870a5687abe3d9a6b0b3fbc89a800">AST_MODULE_SUPPORT_EXTENDED</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .<a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="el" href="../../d6/d80/test__res__prometheus_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a8201de64237a41919013d62ae5d6721d">AST_MODPRI_REALTIME_DRIVER</a> + 5, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00427">427</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00427">427</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="a48d8fd7ac6a03bbb4c1e8694ee0d771f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d8fd7ac6a03bbb4c1e8694ee0d771f">&#9670;&nbsp;</a></span>conf_file</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a> conf_file</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The conf file that's processed for the module. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00277">277</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="aeab1543f7ac14f52ba5148960429e849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeab1543f7ac14f52ba5148960429e849">&#9670;&nbsp;</a></span>global_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> global_option</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mapping of the statsd conf struct's globals to the general context in the config file. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00243">243</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="a05b71d76cff3ccd9fe2a0c4a16d21271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05b71d76cff3ccd9fe2a0c4a16d21271">&#9670;&nbsp;</a></span>global_options</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>* global_options[] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../dc/d6b/res__xmpp_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00251">251</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

</div>
</div>
<a id="ad02424c03e4b1b3ddbdb78d829489ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad02424c03e4b1b3ddbdb78d829489ac3">&#9670;&nbsp;</a></span>socket_fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int socket_fd = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Socket for sending statd messages </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00080">80</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">statsd_init()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00323">statsd_shutdown()</a>.</p>

</div>
</div>
<a id="a8eb7cae94e5c6078ed5baf0bbd61f11b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eb7cae94e5c6078ed5baf0bbd61f11b">&#9670;&nbsp;</a></span>statsd_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> statsd_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d0/d0c/res__statsd_8c.html#a919de3e7988c56d7c8b2d3e255852c15">__init_statsd_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00174">174</a> of file <a class="el" href="../../d0/d0c/res__statsd_8c_source.html">res_statsd.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00199">ast_statsd_log_full_va()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00176">ast_statsd_log_string_va()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:39 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
