<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: app_confbridge.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">app_confbridge.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/dcf/app__confbridge_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2007-2008, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Joshua Colp &lt;jcolp@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * David Vossel &lt;dvossel@digium.com&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * \brief Conference Bridge application</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * \author\verbatim Joshua Colp &lt;jcolp@digium.com&gt; \endverbatim</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * \author\verbatim David Vossel &lt;dvossel@digium.com&gt; \endverbatim</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * This is a conference bridge application utilizing the bridging core.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * \ingroup applications</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/*! \li \ref app_confbridge.c uses the configuration file \ref confbridge.conf</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * \addtogroup configuration_file Configuration Files</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * \page confbridge.conf confbridge.conf</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * \verbinclude confbridge.conf.sample</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db0/cli_8h.html">asterisk/cli.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4d/file_8h.html">asterisk/file.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d42/lock_8h.html">asterisk/lock.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d56/bridge_8h.html">asterisk/bridge.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d07/musiconhold_8h.html">asterisk/musiconhold.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/say_8h.html">asterisk/say.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d79/audiohook_8h.html">asterisk/audiohook.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/de3/confbridge_8h.html">confbridge/include/confbridge.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/df2/paths_8h.html">asterisk/paths.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/ddc/test_8h.html">asterisk/test.h</a>&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d4e/stasis__bridges_8h.html">asterisk/stasis_bridges.h</a>&quot;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d05/json_8h.html">asterisk/json.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d1c/format__cache_8h.html">asterisk/format_cache.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d1e/taskprocessor_8h.html">asterisk/taskprocessor.h</a>&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d95/stream_8h.html">asterisk/stream.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d0d/message_8h.html">asterisk/message.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">   &lt;application name=&quot;ConfBridge&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">         Conference bridge application.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">         &lt;parameter name=&quot;conference&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">            &lt;para&gt;Name of the conference bridge.  You are not limited to just</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">            numbers.&lt;/para&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">         &lt;parameter name=&quot;bridge_profile&quot;&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">            &lt;para&gt;The bridge profile name from confbridge.conf.  When left blank,</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">            a dynamically built bridge profile created by the CONFBRIDGE dialplan</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">            function is searched for on the channel and used.  If no dynamic</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">            profile is present, the &#39;default_bridge&#39; profile found in</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">            confbridge.conf is used. &lt;/para&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">            &lt;para&gt;It is important to note that while user profiles may be unique</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">            for each participant, mixing bridge profiles on a single conference</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">            is _NOT_ recommended and will produce undefined results.&lt;/para&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">         &lt;parameter name=&quot;user_profile&quot;&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">            &lt;para&gt;The user profile name from confbridge.conf.  When left blank,</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">            a dynamically built user profile created by the CONFBRIDGE dialplan</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">            function is searched for on the channel and used.  If no dynamic</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">            profile is present, the &#39;default_user&#39; profile found in</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">            confbridge.conf is used.&lt;/para&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">         &lt;parameter name=&quot;menu&quot;&gt;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">            &lt;para&gt;The name of the DTMF menu in confbridge.conf to be applied to</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">            this channel.  When left blank, a dynamically built menu profile</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">            created by the CONFBRIDGE dialplan function is searched for on</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">            the channel and used. If no dynamic profile is present, the</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">            &#39;default_menu&#39; profile found in confbridge.conf is used.&lt;/para&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">         &lt;para&gt;Enters the user into a specified conference bridge.  The user can</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">         exit the conference by hangup or DTMF menu option.&lt;/para&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">         &lt;para&gt;This application sets the following channel variable upon completion:&lt;/para&gt;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">            &lt;variable name=&quot;CONFBRIDGE_RESULT&quot;&gt;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">               &lt;value name=&quot;FAILED&quot;&gt;The channel encountered an error and could not enter the conference.&lt;/value&gt;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">               &lt;value name=&quot;HANGUP&quot;&gt;The channel exited the conference by hanging up.&lt;/value&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">               &lt;value name=&quot;KICKED&quot;&gt;The channel was kicked from the conference.&lt;/value&gt;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">               &lt;value name=&quot;ENDMARKED&quot;&gt;The channel left the conference as a result of the last marked user leaving.&lt;/value&gt;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">               &lt;value name=&quot;DTMF&quot;&gt;The channel pressed a DTMF sequence to exit the conference.&lt;/value&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">               &lt;value name=&quot;TIMEOUT&quot;&gt;The channel reached its configured timeout.&lt;/value&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;ConfKick&lt;/ref&gt;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">         &lt;ref type=&quot;function&quot;&gt;CONFBRIDGE&lt;/ref&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">         &lt;ref type=&quot;function&quot;&gt;CONFBRIDGE_INFO&lt;/ref&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">   &lt;application name=&quot;ConfKick&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">         Kicks channel(s) from the requested ConfBridge.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">         &lt;parameter name=&quot;conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">         &lt;parameter name=&quot;channel&quot;&gt;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">            &lt;para&gt;The channel to kick, &lt;literal&gt;all&lt;/literal&gt;</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">            to kick all users, or &lt;literal&gt;participants&lt;/literal&gt;</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">            to kick all non-admin participants. Default is all.&lt;/para&gt;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">         &lt;para&gt;Kicks the requested channel(s) from a conference bridge.&lt;/para&gt;</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">            &lt;variable name=&quot;CONFKICKSTATUS&quot;&gt;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">               &lt;value name=&quot;FAILURE&quot;&gt;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">                  Could not kick any users with the provided arguments.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">               &lt;value name=&quot;SUCCESS&quot;&gt;</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                  Successfully kicked users from specified conference bridge.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;ConfBridge&lt;/ref&gt;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">         &lt;ref type=&quot;function&quot;&gt;CONFBRIDGE&lt;/ref&gt;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">         &lt;ref type=&quot;function&quot;&gt;CONFBRIDGE_INFO&lt;/ref&gt;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">   &lt;function name=&quot;CONFBRIDGE&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">         Set a custom dynamic bridge, user, or menu profile on a channel for the</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">         ConfBridge application using the same options available in confbridge.conf.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">         &lt;parameter name=&quot;type&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">            &lt;para&gt;To what type of conference profile the option applies.&lt;/para&gt;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">            &lt;enumlist&gt;</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">               &lt;enum name=&quot;bridge&quot;&gt;&lt;/enum&gt;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">               &lt;enum name=&quot;menu&quot;&gt;&lt;/enum&gt;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">               &lt;enum name=&quot;user&quot;&gt;&lt;/enum&gt;</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">            &lt;/enumlist&gt;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">         &lt;parameter name=&quot;option&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">            &lt;para&gt;Option refers to a &lt;filename&gt;confbridge.conf&lt;/filename&gt; option</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">            that is being set dynamically on this channel, or &lt;literal&gt;clear&lt;/literal&gt;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">            to remove already applied profile options from the channel.&lt;/para&gt;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">         &lt;para&gt;A custom profile uses the default profile type settings defined in</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">         &lt;filename&gt;confbridge.conf&lt;/filename&gt; as defaults if the profile template</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">         is not explicitly specified first.&lt;/para&gt;</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">         &lt;para&gt;For &lt;literal&gt;bridge&lt;/literal&gt; profiles the default template is &lt;literal&gt;default_bridge&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">         &lt;para&gt;For &lt;literal&gt;menu&lt;/literal&gt; profiles the default template is &lt;literal&gt;default_menu&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">         &lt;para&gt;For &lt;literal&gt;user&lt;/literal&gt; profiles the default template is &lt;literal&gt;default_user&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">         &lt;para&gt;---- Example 1 ----&lt;/para&gt;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">         &lt;para&gt;In this example the custom user profile set on the channel will</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">         automatically be used by the ConfBridge application.&lt;/para&gt;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">         &lt;para&gt;exten =&gt; 1,1,Answer()&lt;/para&gt;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">         &lt;para&gt;; In this example the effect of the following line is&lt;/para&gt;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">         &lt;para&gt;; implied:&lt;/para&gt;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">         &lt;para&gt;; same =&gt; n,Set(CONFBRIDGE(user,template)=default_user)&lt;/para&gt;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,Set(CONFBRIDGE(user,announce_join_leave)=yes)&lt;/para&gt;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,Set(CONFBRIDGE(user,startmuted)=yes)&lt;/para&gt;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,ConfBridge(1) &lt;/para&gt;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">         &lt;para&gt;---- Example 2 ----&lt;/para&gt;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">         &lt;para&gt;This example shows how to use a predefined user profile in</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">         &lt;filename&gt;confbridge.conf&lt;/filename&gt; as a template for a dynamic profile.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">         Here we make an admin/marked user out of the &lt;literal&gt;my_user&lt;/literal&gt;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">         profile that you define in &lt;filename&gt;confbridge.conf&lt;/filename&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">         &lt;para&gt;exten =&gt; 1,1,Answer()&lt;/para&gt;</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,Set(CONFBRIDGE(user,template)=my_user)&lt;/para&gt;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,Set(CONFBRIDGE(user,admin)=yes)&lt;/para&gt;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,Set(CONFBRIDGE(user,marked)=yes)&lt;/para&gt;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">         &lt;para&gt;same =&gt; n,ConfBridge(1)&lt;/para&gt;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">   &lt;/function&gt;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">   &lt;function name=&quot;CONFBRIDGE_INFO&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">         Get information about a ConfBridge conference.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">         &lt;parameter name=&quot;type&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">            &lt;para&gt;What conference information is requested.&lt;/para&gt;</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">            &lt;enumlist&gt;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">               &lt;enum name=&quot;admins&quot;&gt;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">                  &lt;para&gt;Get the number of admin users in the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">               &lt;enum name=&quot;locked&quot;&gt;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">                  &lt;para&gt;Determine if the conference is locked. (0 or 1)&lt;/para&gt;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">               &lt;enum name=&quot;marked&quot;&gt;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">                  &lt;para&gt;Get the number of marked users in the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">               &lt;enum name=&quot;muted&quot;&gt;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">                  &lt;para&gt;Determine if the conference is muted. (0 or 1)&lt;/para&gt;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">               &lt;enum name=&quot;parties&quot;&gt;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">                  &lt;para&gt;Get the number of users in the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">            &lt;/enumlist&gt;</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">         &lt;parameter name=&quot;conf&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">            &lt;para&gt;The name of the conference being referenced.&lt;/para&gt;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">         &lt;para&gt;This function returns a non-negative integer for valid conference</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">         names and an empty string for invalid conference names.&lt;/para&gt;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">   &lt;/function&gt;</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeList&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">         List participants in a conference.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">            &lt;para&gt;Conference number.&lt;/para&gt;</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">         &lt;para&gt;Lists all users in a particular ConfBridge conference.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">         ConfbridgeList will follow as separate events, followed by a final event called</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">         ConfbridgeListComplete.&lt;/para&gt;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;ConfbridgeList&quot;&gt;</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_REPORTING&quot;&gt;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised as part of the ConfbridgeList action response list.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">            &lt;parameter name=&quot;Conference&quot;&gt;</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">               &lt;para&gt;The name of the Confbridge conference.&lt;/para&gt;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">            &lt;parameter name=&quot;Admin&quot;&gt;</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">               &lt;para&gt;Identifies this user as an admin user.&lt;/para&gt;</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">            &lt;parameter name=&quot;MarkedUser&quot;&gt;</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">               &lt;para&gt;Identifies this user as a marked user.&lt;/para&gt;</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">            &lt;parameter name=&quot;WaitMarked&quot;&gt;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">               &lt;para&gt;Must this user wait for a marked user to join?&lt;/para&gt;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">            &lt;parameter name=&quot;EndMarked&quot;&gt;</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">               &lt;para&gt;Does this user get kicked after the last marked user leaves?&lt;/para&gt;</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">            &lt;parameter name=&quot;Waiting&quot;&gt;</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">               &lt;para&gt;Is this user waiting for a marked user to join?&lt;/para&gt;</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">            &lt;parameter name=&quot;Muted&quot;&gt;</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">               &lt;para&gt;The current mute status.&lt;/para&gt;</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">            &lt;parameter name=&quot;Talking&quot;&gt;</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">               &lt;para&gt;Is this user talking?&lt;/para&gt;</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">            &lt;parameter name=&quot;AnsweredTime&quot;&gt;</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">               &lt;para&gt;The number of seconds the channel has been up.&lt;/para&gt;</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeListRooms&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">         List active conferences.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">         &lt;para&gt;Lists data about all active conferences.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">            ConfbridgeListRooms will follow as separate events, followed by a final event called</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">            ConfbridgeListRoomsComplete.&lt;/para&gt;</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeMute&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">         Mute a Confbridge user.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is not a complete channel name, the first channel with this prefix will be used.&lt;/para&gt;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is &quot;all&quot;, all channels will be muted.&lt;/para&gt;</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is &quot;participants&quot;, all non-admin channels will be muted.&lt;/para&gt;</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeUnmute&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">         Unmute a Confbridge user.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is not a complete channel name, the first channel with this prefix will be used.&lt;/para&gt;</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is &quot;all&quot;, all channels will be unmuted.&lt;/para&gt;</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is &quot;participants&quot;, all non-admin channels will be unmuted.&lt;/para&gt;</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeKick&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">         Kick a Confbridge user.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel&quot; required=&quot;true&quot; &gt;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is &quot;all&quot;, all channels will be kicked from the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is &quot;participants&quot;, all non-admin channels will be kicked from the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeLock&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">         Lock a Confbridge conference.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeUnlock&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">         Unlock a Confbridge conference.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeStartRecord&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">         Start recording a Confbridge conference.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">         &lt;parameter name=&quot;RecordFile&quot; required=&quot;false&quot; /&gt;</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">         &lt;para&gt;Start recording a conference. If recording is already present an error will be returned. If RecordFile is not provided, the default record file specified in the conference&#39;s bridge profile will be used, if that is not present either a file will automatically be generated in the monitor directory.&lt;/para&gt;</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeStopRecord&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">         Stop recording a Confbridge conference.</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">   &lt;manager name=&quot;ConfbridgeSetSingleVideoSrc&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">         Set a conference user as the single video source distributed to all other participants.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">            &lt;para&gt;If this parameter is not a complete channel name, the first channel with this prefix will be used.&lt;/para&gt;</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">***/</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"> * \par Playing back a file to a channel in a conference</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"> * You might notice in this application that while playing a sound file</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"> * to a channel the actual conference bridge lock is not held. This is done so</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"> * that other channels are not blocked from interacting with the conference bridge.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"> * Unfortunately because of this it is possible for things to change after the sound file</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"> * is done being played. Data must therefore be checked after reacquiring the conference</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"> * bridge lock if it is important.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">  459</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>[] = <span class="stringliteral">&quot;ConfBridge&quot;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a6cffecf2a021a06d24eaf268c3ef2895">  460</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a6cffecf2a021a06d24eaf268c3ef2895">app2</a>[] = <span class="stringliteral">&quot;ConfKick&quot;</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">/*! Number of buckets our conference bridges container can have */</span></div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a52a0e4c83c7ff4b0e7b1a4ec096d3419">  463</a></span>&#160;<span class="preprocessor">#define CONFERENCE_BRIDGE_BUCKETS 53</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/*! Initial recording filename space. */</span></div><div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ae0daf457eb908b81a0ec7a96bdfac222">  466</a></span>&#160;<span class="preprocessor">#define RECORD_FILENAME_INITIAL_SPACE  128</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/*! \brief Container to hold all conference bridges in progress */</span></div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#aba18f75e10a4c0aaa4d6de41aa30c09e">  469</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#aba18f75e10a4c0aaa4d6de41aa30c09e">conference_bridges</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e149d3f4646b6542df30d90b9960479">play_sound_number</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference, <span class="keywordtype">int</span> say_number);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#add4efc724870cceaa73010102ab55a74">execute_menu_entry</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference,</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>,</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dd/d43/structconf__menu__entry.html">conf_menu_entry</a> *menu_entry,</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dc/dd3/structconf__menu.html">conf_menu</a> *menu);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">/*! \brief Hashing function used for conference bridges container */</span></div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab70a2ae9f2778c6c5a61328abe7acb90">  480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab70a2ae9f2778c6c5a61328abe7acb90">conference_bridge_hash_cb</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *obj, <span class="keyword">const</span> <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference = obj;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = obj;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <span class="keywordtype">int</span> hash;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; (<a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>)) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>:</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      name = conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>:</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      hash = <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(name);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>:</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">/* Should never happen in hash callback. */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      hash = 0;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keywordflow">return</span> hash;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">/*! \brief Comparison function used for conference bridges container */</span></div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a725ab63b13835417e5f9704a024a74dc">  504</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a725ab63b13835417e5f9704a024a74dc">conference_bridge_cmp_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *left = obj;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *right = arg;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_name = arg;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; (<a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>)) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>:</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      right_name = right-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>:</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      cmp = strcasecmp(left-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, right_name);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>:</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      cmp = strncasecmp(left-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, right_name, strlen(right_name));</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordflow">return</span> cmp ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a287f97e438a0a7a2f7a6ae08fb15efbf">  526</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<span class="keyword">enum</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1">conf_sounds</a> sound, <span class="keyword">struct</span> <a class="code" href="../../dc/d0c/structbridge__profile__sounds.html">bridge_profile_sounds</a> *custom_sounds)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="keywordflow">switch</span> (sound) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1ab5aa36620e6f220174807517a6579927">CONF_SOUND_HAS_JOINED</a>:</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#adf941e08876c444bc3f90c5e5856207f">hasjoin</a>, <span class="stringliteral">&quot;conf-hasjoin&quot;</span>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a88d68105d02ba5062e1ecfb03f471049">CONF_SOUND_HAS_LEFT</a>:</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#ab11fb69bdb07113786e684acc03d7e05">hasleft</a>, <span class="stringliteral">&quot;conf-hasleft&quot;</span>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1af5ce08bb2b402e0dcff932347c95b7e1">CONF_SOUND_KICKED</a>:</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#ab04379436362eb6e1406269d19e45d3a">kicked</a>, <span class="stringliteral">&quot;conf-kicked&quot;</span>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1ac62e5eb942140605ba3fe1c1d7275688">CONF_SOUND_MUTED</a>:</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#af4223cc64d7d8ea2fb6aeaba7c1fc473">muted</a>, <span class="stringliteral">&quot;conf-muted&quot;</span>);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1abec7ff7b0e7afeaf9964103ca02acbb4">CONF_SOUND_UNMUTED</a>:</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#abf54cf48145c35c5cd77b7e8dc7862b4">unmuted</a>, <span class="stringliteral">&quot;conf-unmuted&quot;</span>);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a4f73336407d622bc9533e528ed626538">CONF_SOUND_BINAURAL_ON</a>:</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a5395950c15761028bedce9fb173077a1">binauralon</a>, <span class="stringliteral">&quot;confbridge-binaural-on&quot;</span>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a963e688839fb8422c87c65cdcc8d4d0d">CONF_SOUND_BINAURAL_OFF</a>:</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#ae182176861b13b6c64bc247a33f3a50f">binauraloff</a>, <span class="stringliteral">&quot;confbridge-binaural-off&quot;</span>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a34bfc9a12a07c862731e2f16c3da78fd">CONF_SOUND_ONLY_ONE</a>:</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a3eada297ca7d168fcce5795b2f371c86">onlyone</a>, <span class="stringliteral">&quot;conf-onlyone&quot;</span>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a2fee187a548352f8860ba44f9e806ef6">CONF_SOUND_THERE_ARE</a>:</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#af177255dbc4e3fc2314a24e24324f542">thereare</a>, <span class="stringliteral">&quot;conf-thereare&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a0bdd287fa25f9309f6fba7e2fbbe2167">CONF_SOUND_OTHER_IN_PARTY</a>:</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a3f2c8722c474ea88b259115085454185">otherinparty</a>, <span class="stringliteral">&quot;conf-otherinparty&quot;</span>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1aa1fb78d0bee9ac0774695ea208534158">CONF_SOUND_PLACE_IN_CONF</a>:</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a0f4e68d681da04eebd925ca273a5a0d8">placeintoconf</a>, <span class="stringliteral">&quot;conf-placeintoconf&quot;</span>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a6a3fd8922479ad7515c184b18c0de2d0">CONF_SOUND_WAIT_FOR_LEADER</a>:</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a0840068eadef76e523fb0db7538be260">waitforleader</a>, <span class="stringliteral">&quot;conf-waitforleader&quot;</span>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a9ef4aa1d64fb3ad952898a62eb6d775c">CONF_SOUND_LEADER_HAS_LEFT</a>:</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#ac4e16ab7201edf4e8866ff87d13cc36c">leaderhasleft</a>, <span class="stringliteral">&quot;conf-leaderhasleft&quot;</span>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a3603c24dc6ec2ae56a0f87032c93ef90">CONF_SOUND_GET_PIN</a>:</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a7b35e4f298b75cd77e4e4bb4d2ddaba5">getpin</a>, <span class="stringliteral">&quot;conf-getpin&quot;</span>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a1f617173e9ccd424815974c7f08e1f7d">CONF_SOUND_INVALID_PIN</a>:</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a0d1be6870b50c4eb7847c95c42eb87dd">invalidpin</a>, <span class="stringliteral">&quot;conf-invalidpin&quot;</span>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a50da2481e1b2dee0996facfd2e75a3b7">CONF_SOUND_ONLY_PERSON</a>:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#aeab68189075afaef278e3f84a6106577">onlyperson</a>, <span class="stringliteral">&quot;conf-onlyperson&quot;</span>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1af1229abdb521712343b99fe885de4b86">CONF_SOUND_LOCKED</a>:</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a9558de181741086f610de7fb3203f9da">locked</a>, <span class="stringliteral">&quot;conf-locked&quot;</span>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a2ddaf9054cceb938e8d00e8e0363d845">CONF_SOUND_LOCKED_NOW</a>:</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#ad8d1610fe8df62b22eede33ad7447a56">lockednow</a>, <span class="stringliteral">&quot;conf-lockednow&quot;</span>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1aba6e7263418ca6e10ed062e1660815ba">CONF_SOUND_UNLOCKED_NOW</a>:</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a533c996c6daaa40c11c31667e097bca1">unlockednow</a>, <span class="stringliteral">&quot;conf-unlockednow&quot;</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a36f571ad2bb52978f293bbde40e952ea">CONF_SOUND_ERROR_MENU</a>:</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a83781d043ea2270c3baf377e3c6bae86">errormenu</a>, <span class="stringliteral">&quot;conf-errormenu&quot;</span>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a07a04718f40d6d81a50f1ec639d2b394">CONF_SOUND_JOIN</a>:</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a9d6b57386c751b078b60708a4981585d">join</a>, <span class="stringliteral">&quot;confbridge-join&quot;</span>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a9c4a5daa97f23b28b17f9754237b7a9f">CONF_SOUND_LEAVE</a>:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a94df77401f42e8434e7a9347fffe727d">leave</a>, <span class="stringliteral">&quot;confbridge-leave&quot;</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a6795c77d3d8042366c64e2d394863481">CONF_SOUND_PARTICIPANTS_MUTED</a>:</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a8dcaa78528e94a4bdc17e3986a4ce20d">participantsmuted</a>, <span class="stringliteral">&quot;conf-now-muted&quot;</span>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a43f4227e6426b05c4e131c38d4bff20a">CONF_SOUND_PARTICIPANTS_UNMUTED</a>:</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#a86e9666ad94d8a21e270f06265c0e16a">participantsunmuted</a>, <span class="stringliteral">&quot;conf-now-unmuted&quot;</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a5de0d3b219564307250ac55488717f1d">CONF_SOUND_BEGIN</a>:</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(custom_sounds-&gt;<a class="code" href="../../dc/d0c/structbridge__profile__sounds.html#afca3a77b00f712ba54bde64ee1e007ee">begin</a>, <span class="stringliteral">&quot;confbridge-conf-begin&quot;</span>);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">  585</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *extras, <span class="keywordtype">int</span> channel_topic)</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;{</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json_object, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="stringliteral">&quot;conference&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keywordflow">if</span> (extras) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#af7ffb5efb418e60eaa2b3d06a4c6e458">ast_json_object_update</a>(json_object, extras);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   msg = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#aca77a07a50fb0eb50440b036e741ff0a">ast_bridge_blob_create</a>(type,</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      chan,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      json_object);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffab61e34a8252b1f3970c1ead5977f2c09">BRIDGE_OPT_ENABLE_EVENTS</a>)) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <a class="code" href="../../dd/d92/confbridge__manager_8c.html#a343956e51d78b42095e635acc641a61a">conf_send_event_to_participants</a>(conference, chan, msg);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">if</span> (channel_topic) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(chan), msg);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>), msg);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#aec406215395213c0d9b65a8cd622039b">  622</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aec406215395213c0d9b65a8cd622039b">send_conf_stasis_snapshots</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference,</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *chan_snapshot, <span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>,</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *extras)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json_object, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a> *, bridge_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="stringliteral">&quot;conference&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">if</span> (extras) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#af7ffb5efb418e60eaa2b3d06a4c6e458">ast_json_object_update</a>(json_object, extras);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   bridge_snapshot = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keywordflow">if</span> (!bridge_snapshot) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   msg = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#ae095d11ac6bdce5f4c9c9af8adeb0a86">ast_bridge_blob_create_from_snapshots</a>(type,</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      bridge_snapshot,</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      chan_snapshot,</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      json_object);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>), msg);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a0d82d814db405d902f4843b46f70ed15">  659</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0d82d814db405d902f4843b46f70ed15">send_conf_start_event</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a8651034b4e7f9f21d9a6bd7737e2a0a5">confbridge_start_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af434c074021a99d74d24b04a217af30a">  664</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af434c074021a99d74d24b04a217af30a">send_conf_end_event</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;{</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a33052b88dfb7cd0c00634d3a88d06d21">confbridge_end_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a4d63510d2f8432cd7ec0dab1859f2a3a">  669</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4d63510d2f8432cd7ec0dab1859f2a3a">send_join_event</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: b, s: b}&quot;</span>,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>),</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="stringliteral">&quot;muted&quot;</span>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad363438fb5e5f08460700c353c5e1680">confbridge_join_type</a>(), json_object, 0);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a8841a2fd54bcd985957984b6392d04a6">  683</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a8841a2fd54bcd985957984b6392d04a6">send_leave_event</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: b}&quot;</span>,</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   );</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a82a110b69bbee2dbf2dadcdae6f332a9">confbridge_leave_type</a>(), json_object, 0);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af102cf3a015c38f6e482d30f3f6b3b08">  697</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af102cf3a015c38f6e482d30f3f6b3b08">send_start_record_event</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;{</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a25afb0209de2b9f190e445bf29fcf739">confbridge_start_record_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;}</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a4e32fecfe809b9343c6a64d3909c678d">  702</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4e32fecfe809b9343c6a64d3909c678d">send_stop_record_event</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a375e2ce6818e95a27d583702d02d52a3">confbridge_stop_record_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a5127fef7847bdcfc160fb5dcc4a4fc45">  707</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5127fef7847bdcfc160fb5dcc4a4fc45">send_mute_event</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: b}&quot;</span>,</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   );</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a11ef4c7b78c0389f598e46dc5426b32e">confbridge_mute_type</a>(), json_object, 1);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab3e73b746efd9e3c5da937b54010b5bb">  721</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab3e73b746efd9e3c5da937b54010b5bb">send_unmute_event</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: b}&quot;</span>,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   );</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(conference, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#aab425977a8a2a0f6a877b1e6dc7f5c6b">confbridge_unmute_type</a>(), json_object, 1);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ac4066329d069a42b9a23c69fd8855569">  735</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac4066329d069a42b9a23c69fd8855569">set_rec_filename</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference, <span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> **filename, <span class="keywordtype">int</span> is_new)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordtype">char</span> *rec_file = conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">rec_file</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   time_t now;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a>(*filename)</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffae8ce3cccfa03454447306db4923ceb0f">BRIDGE_OPT_RECORD_FILE_APPEND</a>)</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      &amp;&amp; !is_new) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   time(&amp;now);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(*filename);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rec_file)) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(filename, 0, <span class="stringliteral">&quot;confbridge-%s-%u.wav&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;         (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) now);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffaae9ec029957beba41dd62d7e98b9c915">BRIDGE_OPT_RECORD_FILE_TIMESTAMP</a>)) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">/* insert time before file extension */</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      ext = strrchr(rec_file, <span class="charliteral">&#39;.&#39;</span>);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">if</span> (ext) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#abda810b81f8f0349aca3fad136e5d416">ast_str_set_substr</a>(filename, 0, rec_file, ext - rec_file);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(filename, 0, <span class="stringliteral">&quot;-%u%s&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) now, ext);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(filename, 0, <span class="stringliteral">&quot;%s-%u&quot;</span>, rec_file, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) now);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(filename, 0, <span class="stringliteral">&quot;%s&quot;</span>, rec_file);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(filename, 0, <span class="stringliteral">&quot;,%s%s,%s&quot;</span>,</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffae8ce3cccfa03454447306db4923ceb0f">BRIDGE_OPT_RECORD_FILE_APPEND</a>) ? <span class="stringliteral">&quot;a&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a0637d52ef1a2a05bb7af6bb84ec0197d">rec_options</a>,</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a6ae60ea5888c3eac1176a41c3fb6ea4d">rec_command</a>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;}</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a41c4a9fbe6e065881ad31bd2de33dc0c">  771</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a41c4a9fbe6e065881ad31bd2de33dc0c">is_new_rec_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *rec_file, <span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> **orig_rec_file)</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;{</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rec_file)) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">if</span> (!*orig_rec_file) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;         *orig_rec_file = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae0daf457eb908b81a0ec7a96bdfac222">RECORD_FILENAME_INITIAL_SPACE</a>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">if</span> (*orig_rec_file</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;         &amp;&amp; strcmp(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*orig_rec_file), rec_file)) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(orig_rec_file, 0, <span class="stringliteral">&quot;%s&quot;</span>, rec_file);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#aec801e9356884c574ab2b7e4d013971a">  787</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#aec801e9356884c574ab2b7e4d013971a">conf_find_bridge</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name)</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;{</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"> * \brief Returns whether or not conference is being recorded.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"> * \param conference The bridge to check for recording</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"> * \note Must be called with the conference locked</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment"> * \retval 1, conference is recording.</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"> * \retval 0, conference is NOT recording.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">  803</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">conf_is_recording</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;{</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <span class="keywordflow">return</span> conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">record_chan</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;}</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"> * \brief Stop recording a conference bridge</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> * \param conference The conference bridge on which to stop the recording</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"> * \note Must be called with the conference locked</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment"> * \retval -1 Failure</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a5a0cac7b97323a1e6ccc774502693185">  819</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5a0cac7b97323a1e6ccc774502693185">conf_stop_record</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;{</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a> };</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">conf_is_recording</a>(conference)) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="comment">/* Remove the recording channel from the conference bridge. */</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   chan = conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">record_chan</a>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">record_chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_STOP_RECORD&quot;</span>, <span class="stringliteral">&quot;Message: stopped conference recording channel\r\nConference: %s&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">name</a>);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4e32fecfe809b9343c6a64d3909c678d">send_stop_record_event</a>(conference);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"> * \brief Start recording the conference</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"> * \param conference The conference bridge to start recording</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"> * \note Must be called with the conference locked</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"> * \retval non-zero failure</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a86bcab7d021c72030f52bace16f95367">  851</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a86bcab7d021c72030f52bace16f95367">conf_start_record</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;{</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *mixmonapp;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">conf_is_recording</a>(conference)) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   mixmonapp = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;MixMonitor&quot;</span>);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <span class="keywordflow">if</span> (!mixmonapp) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot record ConfBridge, MixMonitor app is not installed\n&quot;</span>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   features = <a class="code" href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a>();</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keywordflow">if</span> (!features) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(features);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="comment">/* Create the recording channel. */</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="stringliteral">&quot;CBRec&quot;</span>, cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cap, -1);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(features);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="comment">/* Start recording. */</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac4066329d069a42b9a23c69fd8855569">set_rec_filename</a>(conference, &amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a42d1cd86242ce54400631e115a5efc28">record_filename</a>,</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a41c4a9fbe6e065881ad31bd2de33dc0c">is_new_rec_file</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">rec_file</a>, &amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a3e0424b5a06f74180210b77524a51d26">orig_rec_file</a>));</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan, mixmonapp, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a42d1cd86242ce54400631e115a5efc28">record_filename</a>));</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="comment">/* Put the channel into the conference bridge. */</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">record_chan</a> = chan;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features,</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a>)) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">record_chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_START_RECORD&quot;</span>, <span class="stringliteral">&quot;Message: started conference recording channel\r\nConference: %s&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">name</a>);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af102cf3a015c38f6e482d30f3f6b3b08">send_start_record_event</a>(conference);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">/* \brief Playback the given filename and monitor for any dtmf interrupts.</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"> * This function is used to playback sound files on a given channel and optionally</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment"> * allow dtmf interrupts to occur.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"> * If the optional bridge_channel parameter is given then sound file playback</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"> * is played on that channel and dtmf interruptions are allowed. However, if</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"> * bridge_channel is not set then the channel parameter is expected to be set</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment"> * instead and non interruptible playback is played on that channel.</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment"> * \param bridge_channel Bridge channel to play file on</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment"> * \param channel Optional channel to play file on if bridge_channel not given</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment"> * \param filename The file name to playback</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment"> * \retval -1 failure during playback, 0 on file was fully played, 1 on dtmf interrupt.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">  928</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a>,</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;           <span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;{</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *stop_digits;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">if</span> (bridge_channel) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      chan = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      stop_digits = <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      chan = channel;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      stop_digits = <a class="code" href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   digit = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, filename, stop_digits);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keywordflow">if</span> (digit &lt; 0) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to playback file &#39;%s&#39; to channel\n&quot;</span>, filename);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keywordflow">if</span> (digit &gt; 0) {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a2a3de22abaf5ae848a3745186fa399e0">ast_bridge_channel_feature_digit_add</a>(bridge_channel, digit);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"> * \brief Complain if the given sound file does not exist.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment"> * \param filename Sound file to check if exists.</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"> * \retval non-zero if the file exists.</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">  966</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(filename, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;File %s does not exist in any format\n&quot;</span>, filename);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment"> * \brief Announce number of users in the conference bridge to the caller</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"> * \param conference Conference bridge to peek at</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"> * \param user Optional Caller</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment"> * \param bridge_channel The bridged channel involved</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"> * \note if caller is NULL, the announcment will be sent to all participants in the conference.</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment"> * \return Returns 0 on success, -1 if the user hung up</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#aaf709c6d26e10455b9d58d6cabda33c4">  985</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aaf709c6d26e10455b9d58d6cabda33c4">announce_user_count</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>,</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *other_in_party = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a0bdd287fa25f9309f6fba7e2fbbe2167">CONF_SOUND_OTHER_IN_PARTY</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *only_one = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a34bfc9a12a07c862731e2f16c3da78fd">CONF_SOUND_ONLY_ONE</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *there_are = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a2fee187a548352f8860ba44f9e806ef6">CONF_SOUND_THERE_ARE</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">if</span> (conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> &lt;= 1) {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="comment">/* Awww we are the only person in the conference bridge OR we only have waitmarked users */</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> == 2) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">if</span> (user) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;         <span class="comment">/* Eep, there is one other person */</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, only_one) &lt; 0) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference, only_one);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="comment">/* Alas multiple others in here */</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">if</span> (user) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            there_are,</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="stringliteral">&quot;&quot;</span>)) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;         }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> - 1, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;         }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, other_in_party) &lt; 0) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;         }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a>(there_are) &amp;&amp; <a class="code" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a>(other_in_party)) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference, there_are);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e149d3f4646b6542df30d90b9960479">play_sound_number</a>(conference, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> - 1);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference, other_in_party);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;}</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment"> * \brief Play back an audio file to a channel</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"> * \param user User to play audio prompt to</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"> * \param filename Prompt to play</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment"> * \return Returns 0 on success, -1 if the user hung up</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment"> * \note Generally this should be called when the conference is unlocked to avoid blocking</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment"> * the entire conference while the sound is played. But don&#39;t unlock the conference bridge</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment"> * in the middle of a state transition.</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ad9ff2226d7811c0575bba037b7ff62f6"> 1038</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad9ff2226d7811c0575bba037b7ff62f6">play_prompt_to_user</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, filename, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;}</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a676b75acfdc72d821ac2a85fd14cba0d"> 1043</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676b75acfdc72d821ac2a85fd14cba0d">handle_video_on_join</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *conference, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> marked)</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;{</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="comment">/* Right now, only marked users are automatically set as the single src of video.*/</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keywordflow">if</span> (!marked) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffafcba7558b57bbfa66361e0fdce865e99">BRIDGE_OPT_VIDEO_SRC_FIRST_MARKED</a>)) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <span class="keywordtype">int</span> <span class="keyword">set</span> = 1;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="comment">/* see if anyone is already the video src */</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;         <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;         }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#adb755c02424a98c8ec3bd636c609e120">ast_bridge_is_video_src</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="keyword">set</span> = 0;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;         }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">set</span>) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, chan);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa4a07ae66e3fc78e5a35038be30ea773b">BRIDGE_OPT_VIDEO_SRC_LAST_MARKED</a>)) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="comment">/* we joined and are video capable, we override anyone else that may have already been the video feed */</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, chan);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ac338dd660e7509403a2f684b5abcde0b"> 1075</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac338dd660e7509403a2f684b5abcde0b">handle_video_on_exit</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;{</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="comment">/* if this isn&#39;t a video source, nothing to update */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d56/bridge_8h.html#adb755c02424a98c8ec3bd636c609e120">ast_bridge_is_video_src</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, chan)) {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a98000e740561c2e40e39f9edd191c38a">ast_bridge_remove_video_src</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, chan);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="comment">/* If in follow talker mode, make sure to restore this mode on the</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">    * bridge when a source is removed.  It is possible this channel was</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">    * only set temporarily as a video source by an AMI or DTMF action. */</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa417a64e52a78102253a27d209ed16bf8">BRIDGE_OPT_VIDEO_SRC_FOLLOW_TALKER</a>)) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0a2e9bb75a3d3276cd8153e1f4a4a389">ast_bridge_set_talker_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="comment">/* if the video_mode isn&#39;t set to automatically pick the video source, do nothing on exit. */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffafcba7558b57bbfa66361e0fdce865e99">BRIDGE_OPT_VIDEO_SRC_FIRST_MARKED</a>) &amp;&amp;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa4a07ae66e3fc78e5a35038be30ea773b">BRIDGE_OPT_VIDEO_SRC_LAST_MARKED</a>)) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="comment">/* Make the next available marked user the video src.  */</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>)) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;}</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"><a class="line" href="../../d5/ddb/structhangup__data.html"> 1113</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;{</div><div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2"> 1115</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902"> 1116</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9"> 1117</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l01118"></a><span class="lineno"><a class="line" href="../../d5/ddb/structhangup__data.html#ae20009e49fd2cb8dfaf4c8384c642597"> 1118</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/ddb/structhangup__data.html#ae20009e49fd2cb8dfaf4c8384c642597">hungup</a>;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;};</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment"> * \brief Hang up the announcer channel</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment"> * This hangs up the announcer channel in the conference. This</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment"> * runs in the playback queue taskprocessor since we do not want</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment"> * to hang up the channel while it&#39;s trying to play an announcement.</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment"> * This task is performed synchronously, so there is no need to</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment"> * perform any cleanup on the passed-in data.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"> * \param data A hangup_data structure</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment"> * \return 0</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#acbc307fc3edf50401f841d3e5f183562"> 1134</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#acbc307fc3edf50401f841d3e5f183562">hangup_playback</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;{</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a> = data;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#ae20009e49fd2cb8dfaf4c8384c642597">hungup</a> = 1;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a2ac64f03c24f850fb90a5c7ce57bfe5e"> 1151</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2ac64f03c24f850fb90a5c7ce57bfe5e">hangup_data_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a>, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;{</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#ae20009e49fd2cb8dfaf4c8384c642597">hungup</a> = 0;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#acb3277f7b46775fddfa1e1d76d11511d"> 1160</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#acb3277f7b46775fddfa1e1d76d11511d">hangup_data_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a>)</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;{</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;hangup-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;}</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment"> * \brief Destroy a conference bridge</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"> * \param obj The conference bridge object</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment"> * \return Returns nothing</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01173"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#aafee70428b84848275fce95324283500"> 1173</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aafee70428b84848275fce95324283500">destroy_conference_bridge</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;{</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = obj;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Destroying conference bridge &#39;%s&#39;\n&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordflow">if</span> (conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keywordflow">if</span> (conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> hangup;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2ac64f03c24f850fb90a5c7ce57bfe5e">hangup_data_init</a>(&amp;hangup, conference);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#acbc307fc3edf50401f841d3e5f183562">hangup_playback</a>, &amp;hangup)) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;hangup.<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="keywordflow">while</span> (!hangup.<a class="code" href="../../d5/ddb/structhangup__data.html#ae20009e49fd2cb8dfaf4c8384c642597">hungup</a>) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;hangup.<a class="code" href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;hangup.<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;hangup.<a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#acb3277f7b46775fddfa1e1d76d11511d">hangup_data_destroy</a>(&amp;hangup);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;         <span class="comment">/* Playback queue is not yet allocated. Just hang up the channel straight */</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;         conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      }</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <span class="comment">/* Destroying a conference bridge is simple, all we have to do is destroy the bridging object */</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <span class="keywordflow">if</span> (conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>) {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, 0);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   }</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">record_chan</a>);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a3e0424b5a06f74180210b77524a51d26">orig_rec_file</a>);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a42d1cd86242ce54400631e115a5efc28">record_filename</a>);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   <a class="code" href="../../dc/d40/conf__config__parser_8c.html#a6c41b83a47f1b19d4324afcf53be5a49">conf_bridge_profile_destroy</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">/*! \brief Call the proper join event handler for the user for the conference bridge&#39;s current state</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment"> * \param user The conference bridge user that is joining</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment"> * \retval -1 failure</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab32b3f4abae184ff8f2fc6dbf3404c28"> 1220</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab32b3f4abae184ff8f2fc6dbf3404c28">handle_conf_user_join</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <a class="code" href="../../d6/dcb/conf__state_8h.html#aa9228b773d320374118e7c20656ae52f">conference_event_fn</a> <a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>)) {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      handler = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a>-&gt;<a class="code" href="../../d3/db9/structconfbridge__state.html#af83ee7b25abca80641bf8be671d5cbd3">join_marked</a>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1">USER_OPT_WAITMARKED</a>)) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      handler = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a>-&gt;<a class="code" href="../../d3/db9/structconfbridge__state.html#a0d0eaf2e456cc0a7cf2a58682976da29">join_waitmarked</a>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      handler = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a>-&gt;<a class="code" href="../../d3/db9/structconfbridge__state.html#a02cb7ee6d07f626bd860274307f53972">join_unmarked</a>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(handler != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordflow">if</span> (!handler) {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <a class="code" href="../../d8/d26/conf__state_8c.html#abdf6c4a6d72ee8d0b467e903006c5548">conf_invalid_event_fn</a>(user);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>(user);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;}</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">/*! \brief Call the proper leave event handler for the user for the conference bridge&#39;s current state</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment"> * \param user The conference bridge user that is leaving</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"> * \retval -1 failure</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01249"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a45d8f739b9add218627211f49bffdc34"> 1249</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a45d8f739b9add218627211f49bffdc34">handle_conf_user_leave</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;{</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <a class="code" href="../../d6/dcb/conf__state_8h.html#aa9228b773d320374118e7c20656ae52f">conference_event_fn</a> <a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>)) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      handler = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a>-&gt;<a class="code" href="../../d3/db9/structconfbridge__state.html#a979bb905c490d19212a883df0322ef77">leave_marked</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1">USER_OPT_WAITMARKED</a>)) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      handler = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a>-&gt;<a class="code" href="../../d3/db9/structconfbridge__state.html#a6a2b618817b1df81a53ad47b036d320a">leave_waitmarked</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      handler = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a>-&gt;<a class="code" href="../../d3/db9/structconfbridge__state.html#accaa0513c72476d4f75599cc3f928f30">leave_unmarked</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(handler != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <span class="keywordflow">if</span> (!handler) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="comment">/* This should never happen. If it does, though, it is bad. The user will not have been removed</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">       * from the appropriate list, so counts will be off and stuff. The conference won&#39;t be torn down, etc.</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">       * Shouldn&#39;t happen, though. */</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <a class="code" href="../../d8/d26/conf__state_8c.html#abdf6c4a6d72ee8d0b467e903006c5548">conf_invalid_event_fn</a>(user);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <a class="code" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a>(user);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#aa8fb5653de084dfe2470d12f75839a51"> 1275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa8fb5653de084dfe2470d12f75839a51">conf_update_user_mute</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;{</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   <span class="keywordtype">int</span> mute_user;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   <span class="keywordtype">int</span> mute_system;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   <span class="keywordtype">int</span> mute_effective;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="comment">/* User level mute request. */</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   mute_user = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   <span class="comment">/* System level mute request. */</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   mute_system = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#af1b002bfa8785b8b426b965746d3eb03">playing_moh</a></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">       * Do not allow waitmarked users to talk to anyone unless there</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment">       * is a marked user present.</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      || (!user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#abccd4b1475b8b192c029e77ff0ded0c3">markedusers</a></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;         &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1">USER_OPT_WAITMARKED</a>));</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   mute_effective = mute_user || mute_system;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;User %s is %s: user:%d system:%d.\n&quot;</span>,</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), mute_effective ? <span class="stringliteral">&quot;muted&quot;</span> : <span class="stringliteral">&quot;unmuted&quot;</span>,</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      mute_user, mute_system);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>.<a class="code" href="../../db/dba/structast__bridge__features.html#aa09e22acd94cd548a204c100e11fd612">mute</a> = mute_effective;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_MUTE_UPDATE&quot;</span>,</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="stringliteral">&quot;Mode: %s\r\n&quot;</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="stringliteral">&quot;Channel: %s&quot;</span>,</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      mute_effective ? <span class="stringliteral">&quot;muted&quot;</span> : <span class="stringliteral">&quot;unmuted&quot;</span>,</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">name</a>,</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment"> * \brief Mute/unmute a single user.</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01312"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#abb3c7ba95c53c0a64298d852a96b37ee"> 1312</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abb3c7ba95c53c0a64298d852a96b37ee">generic_mute_unmute_user</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>)</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;{</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   <span class="comment">/* Set user level mute request. */</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a> = mute ? 1 : 0;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa8fb5653de084dfe2470d12f75839a51">conf_update_user_mute</a>(user);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_MUTE&quot;</span>,</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="stringliteral">&quot;Message: participant %s %s\r\n&quot;</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="stringliteral">&quot;Channel: %s&quot;</span>,</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      mute ? <span class="stringliteral">&quot;muted&quot;</span> : <span class="stringliteral">&quot;unmuted&quot;</span>,</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">name</a>,</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">if</span> (mute) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5127fef7847bdcfc160fb5dcc4a4fc45">send_mute_event</a>(user, conference);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab3e73b746efd9e3c5da937b54010b5bb">send_unmute_event</a>(user, conference);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;}</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a08c3d1fe162cebc00303b9a9bf54eabb"> 1333</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a08c3d1fe162cebc00303b9a9bf54eabb">conf_moh_stop</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;{</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#af1b002bfa8785b8b426b965746d3eb03">playing_moh</a> = 0;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordflow">if</span> (!user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ae96984679ed85ea4bbd83482e81b1e5b">suspended_moh</a>) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordtype">int</span> in_bridge;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">       * Locking the ast_bridge here is the only way to hold off the</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">       * call to ast_bridge_join() in confbridge_exec() from</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">       * interfering with the bridge and MOH operations here.</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">       * Temporarily suspend the user from the bridge so we have</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">       * control to stop MOH if needed.</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      in_bridge = !<a class="code" href="../../d4/d56/bridge_8h.html#a85bc0d4138ac2af7b207d8f1325f051a">ast_bridge_suspend</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">if</span> (in_bridge) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#aab4cd1153d39a6744eca6a84d5255820">ast_bridge_unsuspend</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#abff61e66b7a63e3a68ff1ae51092a804"> 1360</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abff61e66b7a63e3a68ff1ae51092a804">conf_moh_start</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;{</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#af1b002bfa8785b8b426b965746d3eb03">playing_moh</a> = 1;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keywordflow">if</span> (!user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ae96984679ed85ea4bbd83482e81b1e5b">suspended_moh</a>) {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <span class="keywordtype">int</span> in_bridge;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">       * Locking the ast_bridge here is the only way to hold off the</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">       * call to ast_bridge_join() in confbridge_exec() from</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">       * interfering with the bridge and MOH operations here.</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">       * Temporarily suspend the user from the bridge so we have</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">       * control to start MOH if needed.</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      in_bridge = !<a class="code" href="../../d4/d56/bridge_8h.html#a85bc0d4138ac2af7b207d8f1325f051a">ast_bridge_suspend</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a8b49a6bd7c71a5136b2bcc371b3b24dd">moh_class</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">if</span> (in_bridge) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#aab4cd1153d39a6744eca6a84d5255820">ast_bridge_unsuspend</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      }</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;}</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment"> * \brief Unsuspend MOH for the conference user.</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment"> * \param user Conference user to unsuspend MOH on.</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01395"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a2c7b3faff850c992fd562910b48b41db"> 1395</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2c7b3faff850c992fd562910b48b41db">conf_moh_unsuspend</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">if</span> (--user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ae96984679ed85ea4bbd83482e81b1e5b">suspended_moh</a> == 0 &amp;&amp; user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#af1b002bfa8785b8b426b965746d3eb03">playing_moh</a>) {</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a8b49a6bd7c71a5136b2bcc371b3b24dd">moh_class</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;}</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment"> * \brief Suspend MOH for the conference user.</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment"> * \param user Conference user to suspend MOH on.</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a984bb2336dcf6384a2e7ac427bc7c6b0"> 1412</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a984bb2336dcf6384a2e7ac427bc7c6b0">conf_moh_suspend</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;{</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ae96984679ed85ea4bbd83482e81b1e5b">suspended_moh</a>++ == 0 &amp;&amp; user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#af1b002bfa8785b8b426b965746d3eb03">playing_moh</a>) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;}</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a398e2e4eba6aa408d00415a115e4fa9b"> 1421</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a398e2e4eba6aa408d00415a115e4fa9b">conf_handle_inactive_waitmarked</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;{</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="comment">/* If we have not been quieted play back that they are waiting for the leader */</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a3867e256f612cd8589e3ac89c3103ea1">USER_OPT_QUIET</a>) &amp;&amp; <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad9ff2226d7811c0575bba037b7ff62f6">play_prompt_to_user</a>(user,</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a6a3fd8922479ad7515c184b18c0de2d0">CONF_SOUND_WAIT_FOR_LEADER</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>))) {</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <span class="comment">/* user hungup while the sound was playing */</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   }</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a02f83920c93cce65a8c16ecc0edd8c28"> 1432</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a02f83920c93cce65a8c16ecc0edd8c28">conf_handle_only_person</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;{</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <span class="comment">/* If audio prompts have not been quieted or this prompt quieted play it on out */</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a3867e256f612cd8589e3ac89c3103ea1">USER_OPT_QUIET</a> | <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a788dde4b6497a122ecb61d467b6168de">USER_OPT_NOONLYPERSON</a>)) {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad9ff2226d7811c0575bba037b7ff62f6">play_prompt_to_user</a>(user,</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a50da2481e1b2dee0996facfd2e75a3b7">CONF_SOUND_ONLY_PERSON</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>))) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;         <span class="comment">/* user hungup while the sound was playing */</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#aba7d725f051bbc3b87ce74f9e3392c23"> 1445</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aba7d725f051bbc3b87ce74f9e3392c23">conf_add_post_join_action</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">int</span> (*func)(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user))</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d46/structpost__join__action.html">post_join_action</a> *action;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   <span class="keywordflow">if</span> (!(action = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*action)))) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   action-&gt;<a class="code" href="../../df/d46/structpost__join__action.html#a378d0111468d21961a0aa0f4d34dbb90">func</a> = <a class="code" href="../../df/d46/structpost__join__action.html#a378d0111468d21961a0aa0f4d34dbb90">func</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aaa3e259a9e4bd5202039310d50692ea4">post_join_list</a>, action, <a class="code" href="../../df/d46/structpost__join__action.html#a6d1895a5641e418ff64a528050054478">list</a>);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;}</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#abf6fc30e7ace72d9e867cd6d06d01c0a"> 1457</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abf6fc30e7ace72d9e867cd6d06d01c0a">conf_handle_first_join</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;{</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;confbridge:%s&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;}</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#af3a404e4ad75307279d29dc2c72eaba5"> 1462</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af3a404e4ad75307279d29dc2c72eaba5">conf_handle_second_active</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;{</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   <span class="comment">/* If we are the second participant we may need to stop music on hold on the first */</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *first_user = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;first_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a92f6fdccdb7fe0169c435a2dfb85c772">USER_OPT_MUSICONHOLD</a>)) {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a08c3d1fe162cebc00303b9a9bf54eabb">conf_moh_stop</a>(first_user);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa8fb5653de084dfe2470d12f75839a51">conf_update_user_mute</a>(first_user);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;}</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a6e73a8d9881e9d546ae4ef299c27c5fd"> 1473</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a6e73a8d9881e9d546ae4ef299c27c5fd">conf_ended</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;{</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d81/structpbx__find__info.html">pbx_find_info</a> q = { .<a class="code" href="../../db/d81/structpbx__find__info.html#a31dd453024f17e9e35717368cf8c87fb">stacklen</a> = 0 };</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="comment">/* Called with a reference to conference */</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(conference_bridges, conference);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af434c074021a99d74d24b04a217af30a">send_conf_end_event</a>(conference);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">regcontext</a>) &amp;&amp;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#ae12539be833fc552d4556c886605f17f">pbx_find_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;q, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">regcontext</a>,</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../dd/ddb/extconf_8h.html#a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be">E_MATCH</a>)) {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a721c6ba091102f155a586e09b2a526bf">ast_context_remove_extension</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">regcontext</a>,</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5a0cac7b97323a1e6ccc774502693185">conf_stop_record</a>(conference);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;}</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment"> * \brief Allocate playback channel for a conference.</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment"> * \pre expects conference to be locked before calling this function</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01496"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ae1544ec93f95c6eb2adbf3a2ad01f360"> 1496</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae1544ec93f95c6eb2adbf3a2ad01f360">alloc_playback_chan</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;{</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordtype">char</span> taskprocessor_name[<a class="code" href="../../d0/d1e/taskprocessor_8h.html#adf4c5a237767eb6db5b1db41ccdfc689">AST_TASKPROCESSOR_MAX_NAME</a> + 1];</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   }</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="stringliteral">&quot;CBAnn&quot;</span>, cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cap, -1);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <span class="keywordflow">if</span> (!conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>) {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;   }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <span class="comment">/* To make sure playback_chan has the same language as the bridge */</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   ast_channel_language_set(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#adf416dc058363e2fd5750c77e2d78bee">language</a>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Created announcer channel &#39;%s&#39; to conference bridge &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>), conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a>(taskprocessor_name, <span class="keyword">sizeof</span>(taskprocessor_name),</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="stringliteral">&quot;Confbridge/%s&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a> = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(taskprocessor_name, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   <span class="keywordflow">if</span> (!conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>) {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;}</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment"> * \brief Push the announcer channel into the bridge</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment"> * \param conference Conference bridge to push the announcer to</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment"> * \retval -1 Failed to push the channel to the bridge</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01539"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a0813ee6781d29ba0f7b248643194845d"> 1539</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0813ee6781d29ba0f7b248643194845d">push_announcer</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;{</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4f/conf__chan__announce_8c.html#afdb66683abdcb6c75fd7531778d97e9a">conf_announce_channel_push</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>)) {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af3d0d8d091f0b152452a460ec8d77e05"> 1551</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af3d0d8d091f0b152452a460ec8d77e05">confbridge_unlock_and_unref</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;{</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = obj;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   <span class="keywordflow">if</span> (!obj) {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   }</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;}</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a4053a42c7e0ff75390e771cabac16ed3"> 1562</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4053a42c7e0ff75390e771cabac16ed3">confbridge_handle_atxfer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a> *msg)</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;{</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *old_snapshot;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *new_snapshot;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   <span class="keywordtype">char</span> *confbr_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   <span class="keywordtype">char</span> *comma;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *, <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af3d0d8d091f0b152452a460ec8d77e05">confbridge_unlock_and_unref</a>);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordtype">int</span> found_user = 0;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      &amp;&amp; strcmp(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, <span class="stringliteral">&quot;ConfBridge&quot;</span>) == 0</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      &amp;&amp; msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>) {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="comment">/* We&#39;re transferring a bridge to an extension */</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      old_snapshot = msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">to_transferee</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      new_snapshot = msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">target</a>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      &amp;&amp; strcmp(msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">appl</a>, <span class="stringliteral">&quot;ConfBridge&quot;</span>) == 0</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      &amp;&amp; msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>) {</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="comment">/* We&#39;re transferring a call to a bridge */</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      old_snapshot = msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">to_transfer_target</a>.<a class="code" href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">channel_snapshot</a>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      new_snapshot = msg-&gt;<a class="code" href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">transferee</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not determine proper channels\n&quot;</span>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">    * old_snapshot-&gt;data should have the original parameters passed to</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">    * the ConfBridge app:</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">    * conference[,bridge_profile[,user_profile[,menu]]]</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">    * We&#39;ll use &quot;conference&quot; to look up the bridge.</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment">    * We _could_ use old_snapshot-&gt;bridgeid to get the bridge but</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">    * that would involve locking the conference_bridges container</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">    * and iterating over it looking for a matching bridge.</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">data</a>)) {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Channel &#39;%s&#39; didn&#39;t have app data set\n&quot;</span>, old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   }</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   confbr_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">dialplan</a>-&gt;<a class="code" href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">data</a>);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   comma = strchr(confbr_name, <span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   <span class="keywordflow">if</span> (comma) {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      *comma = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Confbr: %s  Leaving: %s  Joining: %s\n&quot;</span>, confbr_name, old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, new_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, confbr_name, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>) {</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Conference bridge &#39;%s&#39; not found\n&quot;</span>, confbr_name);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment">    * We need to grab the user profile for the departing user in order to</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment">    * properly format the join/leave messages.</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list) {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>) == 0) {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;         found_user = 1;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      }</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">    * If we didn&#39;t find the user in the active list, try the waiting list.</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <span class="keywordflow">if</span> (!found_user &amp;&amp; <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a88ad9a0b3a21ed23b18bc1abbf8eaeb3">waitingusers</a>) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, list) {</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;         <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>) == 0) {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;            found_user = 1;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;         }</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <span class="keywordflow">if</span> (!found_user) {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to find user profile for channel &#39;%s&#39; in bridge &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;         old_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, confbr_name);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment">    * We&#39;re going to use the existing user profile to create the messages.</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: b}&quot;</span>,</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   );</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   }</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aec406215395213c0d9b65a8cd622039b">send_conf_stasis_snapshots</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, old_snapshot, <a class="code" href="../../d4/de3/confbridge_8h.html#a82a110b69bbee2dbf2dadcdae6f332a9">confbridge_leave_type</a>(), json_object);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: b, s: b}&quot;</span>,</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>),</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="stringliteral">&quot;muted&quot;</span>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   }</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aec406215395213c0d9b65a8cd622039b">send_conf_stasis_snapshots</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, new_snapshot, <a class="code" href="../../d4/de3/confbridge_8h.html#ad363438fb5e5f08460700c353c5e1680">confbridge_join_type</a>(), json_object);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json_object);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;}</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment"> * \brief Join a conference bridge</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment"> * \param conference_name The conference name</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment"> * \param user Conference bridge user structure</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment"> * \return A pointer to the conference bridge struct, or NULL if the conference room wasn&#39;t found.</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01679"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a19ad7d7ca439cdaad565b018191778e2"> 1679</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a19ad7d7ca439cdaad565b018191778e2">join_conference_bridge</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;{</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d46/structpost__join__action.html">post_join_action</a> *action;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   <span class="keywordtype">int</span> max_members_reached = 0;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   <span class="comment">/* We explictly lock the conference bridges container ourselves so that other callers can not create duplicate conferences at the same */</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference_bridges);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Trying to find conference bridge &#39;%s&#39;\n&quot;</span>, conference_name);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <span class="comment">/* Attempt to find an existing conference bridge */</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   <span class="keywordflow">if</span> (conference &amp;&amp; conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ae051ef7bd04982b20b62b3c429e775a8">max_members</a>) {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      max_members_reached = conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ae051ef7bd04982b20b62b3c429e775a8">max_members</a> &gt; conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> ? 0 : 1;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   }</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   <span class="comment">/* When finding a conference bridge that already exists make sure that it is not locked, and if so that we are not an admin */</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">if</span> (conference &amp;&amp; (max_members_reached || conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Conference &#39;%s&#39; is locked and caller is not an admin\n&quot;</span>, conference_name);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1af1229abdb521712343b99fe885de4b86">CONF_SOUND_LOCKED</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>),</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;         <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <span class="comment">/* If no conference bridge was found see if we can create one */</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="comment">/* Try to allocate memory for a new conference bridge, if we fail... this won&#39;t end well. */</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">if</span> (!(conference = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*conference), <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aafee70428b84848275fce95324283500">destroy_conference_bridge</a>))) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Conference &#39;%s&#39; could not be created.\n&quot;</span>, conference_name);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      }</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="comment">/* Setup for the record channel */</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a42d1cd86242ce54400631e115a5efc28">record_filename</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae0daf457eb908b81a0ec7a96bdfac222">RECORD_FILENAME_INITIAL_SPACE</a>);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="keywordflow">if</span> (!conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a42d1cd86242ce54400631e115a5efc28">record_filename</a>) {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      }</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <span class="comment">/* Setup conference bridge parameters */</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, conference_name, <span class="keyword">sizeof</span>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>));</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <a class="code" href="../../dc/d40/conf__config__parser_8c.html#ac0aa3e5e68000a96bd2103416e0b1f9b">conf_bridge_profile_copy</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, &amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <span class="comment">/* Create an actual bridge that will do the audio mixing */</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a> = <a class="code" href="../../d4/d56/bridge_8h.html#a32767ed0f51795590f41a662523c88b0">ast_bridge_base_new</a>(<a class="code" href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfabd40da8a498f3027c44dfa2e92d5f4ac">AST_BRIDGE_CAPABILITY_MULTIMIX</a>,</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444aa4c16c3a1a317253eace111e15f40e6d">AST_BRIDGE_FLAG_MASQUERADE_ONLY</a> | <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a165a875b9d5bac3aba4ad54da1861ab3">AST_BRIDGE_FLAG_TRANSFER_BRIDGE_ONLY</a>,</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>, conference_name, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      <span class="keywordflow">if</span> (!conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>) {</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Conference &#39;%s&#39; mixing bridge could not be created.\n&quot;</span>, conference_name);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <span class="comment">/* Set the internal sample rate on the bridge from the bridge profile */</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#af3e15bc4236a2a074953cfb1c4530cf5">ast_bridge_set_internal_sample_rate</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ac4a5819e66f436d283aa19d986f04e52">internal_sample_rate</a>);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <span class="comment">/* Set the maximum sample rate on the bridge from the bridge profile */</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a3d4866f7184c581cd87f93ee0f2fca63">ast_bridge_set_maximum_sample_rate</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a20440d4454d1d575acbba1e14c39cb28">maximum_sample_rate</a>);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="comment">/* Set the internal mixing interval on the bridge from the bridge profile */</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a8a14f1c30f04c6d50dac556cf53e1201">ast_bridge_set_mixing_interval</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a6ea4cf11ba98a8c5d135563fa542d26d">mix_interval</a>);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a214c6742929d7db707c94d9856908e61">ast_bridge_set_binaural_active</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa76e30c9525a9f661ee4f4bf46b5788c6">BRIDGE_OPT_BINAURAL_ACTIVE</a>));</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa417a64e52a78102253a27d209ed16bf8">BRIDGE_OPT_VIDEO_SRC_FOLLOW_TALKER</a>)) {</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0a2e9bb75a3d3276cd8153e1f4a4a389">ast_bridge_set_talker_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa746f4569fd42c3e13fd27dd14887b394">BRIDGE_OPT_VIDEO_SRC_SFU</a>)) {</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a34a177a8cf79f8158638ebf6ae05ac1c">ast_bridge_set_sfu_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a46b990e3c3b853c3f9d19f2924dff5d1">ast_bridge_set_video_update_discard</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a827ffb5b7363100b4470c4cd5ec2332e">video_update_discard</a>);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#ae7f6701ef6b78dea4da4723994d9c211">ast_bridge_set_remb_send_interval</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a0a1c43a89347238ad53bdaa7f733a014">remb_send_interval</a>);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa04698fde942bcfa285396c19d0b2a48c">BRIDGE_OPT_REMB_BEHAVIOR_AVERAGE</a>)) {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba4643daa2205912210019f2a54e567964">AST_BRIDGE_VIDEO_SFU_REMB_AVERAGE</a>);</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa1e609e538f6ff1e2db711154d1733364">BRIDGE_OPT_REMB_BEHAVIOR_LOWEST</a>)) {</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba14ab1a13df8c27aa690625d667f52f3a">AST_BRIDGE_VIDEO_SFU_REMB_LOWEST</a>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffaf70db137570ebd8a8a34cdd22671d9b6">BRIDGE_OPT_REMB_BEHAVIOR_HIGHEST</a>)) {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba83b326eea831aaf8864b88955e7fe7a4">AST_BRIDGE_VIDEO_SFU_REMB_HIGHEST</a>);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffaf5ef2009c96309b8dbaabd5796c589d8">BRIDGE_OPT_REMB_BEHAVIOR_AVERAGE_ALL</a>)) {</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35bab2a59c3a7d08362c5c99bbce00028d8e">AST_BRIDGE_VIDEO_SFU_REMB_AVERAGE_ALL</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa878ab09424035dc6fd7646205a29fe70">BRIDGE_OPT_REMB_BEHAVIOR_LOWEST_ALL</a>)) {</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35baed87d2e68e3a4ed12e09eee7a1993c51">AST_BRIDGE_VIDEO_SFU_REMB_LOWEST_ALL</a>);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa189bf671f16a34b7043a89a32f5084df">BRIDGE_OPT_REMB_BEHAVIOR_HIGHEST_ALL</a>)) {</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba1fa9d011ae5e2f298c3875155a2a3e2f">AST_BRIDGE_VIDEO_SFU_REMB_HIGHEST_ALL</a>);</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffab8440977d98af91231044bd2ada8e7e0">BRIDGE_OPT_REMB_BEHAVIOR_FORCE</a>)) {</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35bac1c124829151b23928ceb83a7894be7d">AST_BRIDGE_VIDEO_SFU_REMB_FORCE</a>);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a02bd31522656ae0e86ec0d4cfdace1b1">ast_bridge_set_remb_estimated_bitrate</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4b9434aeb6ff5a213d5409c1794be028">remb_estimated_bitrate</a>);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;         }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      }</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffab61e34a8252b1f3970c1ead5977f2c09">BRIDGE_OPT_ENABLE_EVENTS</a>)) {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#aaba0073c46b7c4e52f55a0f34036f43b">ast_bridge_set_send_sdp_label</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, 1);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="comment">/* Link it into the conference bridges container */</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(conference_bridges, conference)) {</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            <span class="stringliteral">&quot;Conference &#39;%s&#39; could not be added to the conferences list.\n&quot;</span>, conference_name);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="comment">/* Set the initial state to EMPTY */</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">state</a> = <a class="code" href="../../d2/d2d/conf__state__empty_8c.html#a9ffef527f4c78acdb740e9d81bfa06bb">CONF_STATE_EMPTY</a>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae1544ec93f95c6eb2adbf3a2ad01f360">alloc_playback_chan</a>(conference)) {</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(conference_bridges, conference);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not allocate announcer channel for conference &#39;%s&#39;\n&quot;</span>, conference_name);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0813ee6781d29ba0f7b248643194845d">push_announcer</a>(conference)) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(conference_bridges, conference);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not add announcer channel for conference &#39;%s&#39; bridge\n&quot;</span>, conference_name);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      }</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa7b6c2ac442857d932a27bbb98ddba78e">BRIDGE_OPT_RECORD_CONFERENCE</a>)) {</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a86bcab7d021c72030f52bace16f95367">conf_start_record</a>(conference);</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0d82d814db405d902f4843b46f70ed15">send_conf_start_event</a>(conference);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">regcontext</a>)) {</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">regcontext</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">regcontext</a>, 1, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Noop&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;ConfBridge&quot;</span>);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;         }</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      }</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Created conference &#39;%s&#39; and linked to container.\n&quot;</span>, conference_name);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   }</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference_bridges);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;   <span class="comment">/* Setup conference bridge user parameters */</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <span class="comment">/* Determine if the new user should join the conference muted. */</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4aaa91e99cfd36ebc13f54a7b113612012">USER_OPT_STARTMUTED</a>)</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      || (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>) &amp;&amp; conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>)) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="comment">/* Set user level mute request. */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a> = 1;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">    * Suspend any MOH until the user actually joins the bridge of</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment">    * the conference.  This way any pre-join file playback does not</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">    * need to worry about MOH.</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ae96984679ed85ea4bbd83482e81b1e5b">suspended_moh</a> = 1;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab32b3f4abae184ff8f2fc6dbf3404c28">handle_conf_user_join</a>(user)) {</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="comment">/* Invalid event, nothing was done, so we don&#39;t want to process a leave. */</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(user);</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   }</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   <span class="comment">/* If an announcement is to be played play it */</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a67d9f33546c6c0c7fcbb6b47860161d6">announcement</a>)) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad9ff2226d7811c0575bba037b7ff62f6">play_prompt_to_user</a>(user,</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;         user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a67d9f33546c6c0c7fcbb6b47860161d6">announcement</a>)) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(user);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <span class="comment">/* Announce number of users if need be */</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a95396ed8706529c9e1ea6b9ad3e3af65">USER_OPT_ANNOUNCEUSERCOUNT</a>)) {</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#aaf709c6d26e10455b9d58d6cabda33c4">announce_user_count</a>(conference, user, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(user);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      }</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   }</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a14058832327f6b08112045f3d3cefb85">USER_OPT_ANNOUNCEUSERCOUNTALL</a>) &amp;&amp;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      (conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> &gt; user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#ae1eedae96e3c5a990922b3291e31ac43">announce_user_count_all_after</a>)) {</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="keywordtype">int</span> user_count_res;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">       * We have to autoservice the new user because he has not quite</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">       * joined the conference yet.</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      user_count_res = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aaf709c6d26e10455b9d58d6cabda33c4">announce_user_count</a>(conference, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      <span class="keywordflow">if</span> (user_count_res) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(user);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      }</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   }</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <span class="comment">/* Handle post-join actions */</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="keywordflow">while</span> ((action = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aaa3e259a9e4bd5202039310d50692ea4">post_join_list</a>, <a class="code" href="../../df/d46/structpost__join__action.html#a6d1895a5641e418ff64a528050054478">list</a>))) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      action-&gt;<a class="code" href="../../df/d46/structpost__join__action.html#a378d0111468d21961a0aa0f4d34dbb90">func</a>(user);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(action);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   }</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;}</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="comment"> * \brief Leave a conference</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment"> * \param user The conference user</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01905"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666"> 1905</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;{</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d46/structpost__join__action.html">post_join_action</a> *action;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a45d8f739b9add218627211f49bffdc34">handle_conf_user_leave</a>(user);</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   <span class="comment">/* Discard any post-join actions */</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;   <span class="keywordflow">while</span> ((action = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aaa3e259a9e4bd5202039310d50692ea4">post_join_list</a>, <a class="code" href="../../df/d46/structpost__join__action.html#a6d1895a5641e418ff64a528050054478">list</a>))) {</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(action);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <span class="comment">/* Done mucking with the conference, huzzah */</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, -1);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;}</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a0197b4e3640cff76be2d93b1cd970d29"> 1923</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0197b4e3640cff76be2d93b1cd970d29">playback_common</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> say_number)</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;{</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   <span class="comment">/* Don&#39;t try to play if the playback channel has been hung up */</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <span class="keywordflow">if</span> (!conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>) {</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;   }</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <span class="comment">/* The channel is all under our control, in goes the prompt */</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>, filename, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (say_number &gt;= 0) {</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>, say_number, <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   }</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">playback_chan</a>);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;}</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html"> 1943</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../de/ddd/structplayback__task__data.html">playback_task_data</a> {</div><div class="line"><a name="l01944"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2"> 1944</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../de/ddd/structplayback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01945"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d"> 1945</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>;</div><div class="line"><a name="l01946"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957"> 1946</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>;</div><div class="line"><a name="l01947"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html#a5f179bbfc8c5db7f65849ab31346a5c8"> 1947</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/ddd/structplayback__task__data.html#a5f179bbfc8c5db7f65849ab31346a5c8">playback_finished</a>;</div><div class="line"><a name="l01948"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902"> 1948</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l01949"></a><span class="lineno"><a class="line" href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9"> 1949</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;};</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment"> * \brief Play an announcement into a confbridge</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment"> * This runs in the playback queue taskprocessor. This ensures that</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment"> * all playbacks are handled in sequence and do not play over top one</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment"> * another.</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment"> * This task runs synchronously so there is no need for performing any</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment"> * sort of cleanup on the input parameter.</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment"> * \param data A playback_task_data</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment"> * \return 0</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01965"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#aa133d4b1aa15e4c407cd6b35926593ed"> 1965</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa133d4b1aa15e4c407cd6b35926593ed">playback_task</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;{</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/ddd/structplayback__task__data.html">playback_task_data</a> *ptd = data;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0197b4e3640cff76be2d93b1cd970d29">playback_common</a>(ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a5f179bbfc8c5db7f65849ab31346a5c8">playback_finished</a> = 1;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;}</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a035a04613a0ce5ee896c78dde81a1228"> 1979</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a035a04613a0ce5ee896c78dde81a1228">playback_task_data_init</a>(<span class="keyword">struct</span> <a class="code" href="../../de/ddd/structplayback__task__data.html">playback_task_data</a> *ptd, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, <span class="keywordtype">int</span> <a class="code" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>)</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;{</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a> = <a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a> = <a class="code" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a5f179bbfc8c5db7f65849ab31346a5c8">playback_finished</a> = 0;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;}</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a41ece0aa60ed0539f0d44f112f8b3d91"> 1991</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a41ece0aa60ed0539f0d44f112f8b3d91">playback_task_data_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../de/ddd/structplayback__task__data.html">playback_task_data</a> *ptd)</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;{</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;ptd-&gt;<a class="code" href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;}</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div><div class="line"><a name="l01997"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a90b7c08b6834f1ced4df9e5f7a4c1d92"> 1997</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a90b7c08b6834f1ced4df9e5f7a4c1d92">play_sound_helper</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, <span class="keywordtype">int</span> <a class="code" href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>)</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;{</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/ddd/structplayback__task__data.html">playback_task_data</a> ptd;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   <span class="comment">/* Do not waste resources trying to play files that do not exist */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="keywordflow">if</span> (say_number &lt; 0) {</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      }</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a>(filename)) {</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   }</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a035a04613a0ce5ee896c78dde81a1228">playback_task_data_init</a>(&amp;ptd, conference, filename, say_number);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa133d4b1aa15e4c407cd6b35926593ed">playback_task</a>, &amp;ptd)) {</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to play file &#39;%s&#39; to conference %s\n&quot;</span>,</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            filename, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to say number &#39;%d&#39; to conference %s\n&quot;</span>,</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            say_number, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      }</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a41ece0aa60ed0539f0d44f112f8b3d91">playback_task_data_destroy</a>(&amp;ptd);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;   }</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   <span class="comment">/* Wait for the playback to complete */</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;ptd.<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <span class="keywordflow">while</span> (!ptd.<a class="code" href="../../de/ddd/structplayback__task__data.html#a5f179bbfc8c5db7f65849ab31346a5c8">playback_finished</a>) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;ptd.<a class="code" href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;ptd.<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;ptd.<a class="code" href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a41ece0aa60ed0539f0d44f112f8b3d91">playback_task_data_destroy</a>(&amp;ptd);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;}</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a7e5cdb3c2c8292271096996042b8bedb"> 2035</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;{</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a90b7c08b6834f1ced4df9e5f7a4c1d92">play_sound_helper</a>(conference, filename, -1);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;}</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"><a class="line" href="../../d4/d0a/structasync__playback__task__data.html"> 2040</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a> {</div><div class="line"><a name="l02041"></a><span class="lineno"><a class="line" href="../../d4/d0a/structasync__playback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2"> 2041</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02042"></a><span class="lineno"><a class="line" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957"> 2042</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>;</div><div class="line"><a name="l02043"></a><span class="lineno"><a class="line" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c"> 2043</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>;</div><div class="line"><a name="l02044"></a><span class="lineno"><a class="line" href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3"> 2044</a></span>&#160;   <span class="keywordtype">char</span> filename[0];</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;};</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div><div class="line"><a name="l02047"></a><span class="lineno"><a class="line" href="../../df/d8d/structasync__datastore__data.html"> 2047</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> {</div><div class="line"><a name="l02048"></a><span class="lineno"><a class="line" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902"> 2048</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l02049"></a><span class="lineno"><a class="line" href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9"> 2049</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l02050"></a><span class="lineno"><a class="line" href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68"> 2050</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68">wait</a>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;};</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div><div class="line"><a name="l02053"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a817e8efc5e46a8b97e73046549fbc443"> 2053</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a817e8efc5e46a8b97e73046549fbc443">async_datastore_data_destroy</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;{</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> *add = data;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(add);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;}</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment"> * \brief Datastore used for timing of async announcement playback</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment"> * Announcements that are played to the entire conference can be played</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment"> * asynchronously (i.e. The channel that queues the playback does not wait</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="comment"> * for the playback to complete before continuing)</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment"> * The thing about async announcements is that the channel that queues the</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment"> * announcement is either not in the bridge or is in some other way &quot;occupied&quot;</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment"> * at the time the announcement is queued. Because of that, the initiator of</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment"> * the announcement may enter after the announcement has already started,</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment"> * resulting in the sound being &quot;clipped&quot;.</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment"> * This datastore makes it so that the channel that queues the async announcement</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment"> * can say &quot;I&#39;m ready now&quot;. This way the announcement does not start until the</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"> * initiator of the announcement is ready to hear the sound.</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02080"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a11020411a5fd2a9987e0c5fd44d1eedb"> 2080</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a11020411a5fd2a9987e0c5fd44d1eedb">async_datastore_info</a> = {</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;Confbridge async playback&quot;</span>,</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   .destroy = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a817e8efc5e46a8b97e73046549fbc443">async_datastore_data_destroy</a>,</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;};</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab7d739f01d81cf85b6b6ccabbe57ae2f"> 2085</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab7d739f01d81cf85b6b6ccabbe57ae2f">async_datastore_data_alloc</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;{</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> *add;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   add = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*add));</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   <span class="keywordflow">if</span> (!add) {</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;   add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68">wait</a> = 1;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <span class="keywordflow">return</span> add;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;}</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment"> * \brief Prepare the async playback datastore</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment"> * This is done prior to queuing an async announcement. If the</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="comment"> * datastore has not yet been created, it is allocated and initialized.</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment"> * If it already exists, we set it to be in &quot;waiting&quot; mode.</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment"> * \param initiator The channel that is queuing the async playback</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment"> * \retval 0 Success</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="comment"> * \retval -1 Failure :(</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02112"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ae53b27c9dbe4c16b195b321b57cb04fd"> 2112</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae53b27c9dbe4c16b195b321b57cb04fd">setup_async_playback_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *initiator)</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;{</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *async_datastore;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   async_datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(initiator, &amp;async_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   <span class="keywordflow">if</span> (async_datastore) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> *add;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      add = async_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68">wait</a> = 1;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   async_datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;async_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <span class="keywordflow">if</span> (!async_datastore) {</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;   }</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   async_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab7d739f01d81cf85b6b6ccabbe57ae2f">async_datastore_data_alloc</a>();</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   <span class="keywordflow">if</span> (!async_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(async_datastore);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   }</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(initiator, async_datastore);</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;}</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#aea593709aae4f44a21021a40d733a9a0"> 2141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#aea593709aae4f44a21021a40d733a9a0">async_playback_task_data_alloc</a>(</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>,</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>)</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;{</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a> *aptd;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   aptd = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*aptd) + strlen(filename) + 1);</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <span class="keywordflow">if</span> (!aptd) {</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;   }</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="comment">/* Safe */</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   strcpy(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, filename);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a> = <a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <span class="comment">/* You may think that we need to bump the conference refcount since we are pushing</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">    * this task to the taskprocessor.</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">    * In this case, that actually causes a problem. The destructor for the conference</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">    * pushes a hangup task into the taskprocessor and waits for it to complete before</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">    * continuing. If the destructor gets called from a taskprocessor task, we&#39;re</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">    * deadlocked.</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment">    * So is there a risk of the conference being freed out from under us? No. Since</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment">    * the destructor pushes a task into the taskprocessor and waits for it to complete,</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="comment">    * the destructor cannot free the conference out from under us. No further tasks</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="comment">    * can be queued onto the taskprocessor after the hangup since no channels are referencing</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment">    * the conference at that point any more.</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;   aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a> = <a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;   <span class="keywordflow">if</span> (initiator) {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(initiator);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <span class="comment">/* We don&#39;t really care if this fails. If the datastore fails to get set up</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment">       * we&#39;ll still play the announcement. It&#39;s possible that the sound will be</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="comment">       * clipped for the initiator, but that&#39;s not the end of the world.</span></div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae53b27c9dbe4c16b195b321b57cb04fd">setup_async_playback_datastore</a>(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   }</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <span class="keywordflow">return</span> aptd;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;}</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a90af4a37744f546793c64b6028efcab1"> 2187</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a90af4a37744f546793c64b6028efcab1">async_playback_task_data_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a> *aptd)</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;{</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>);</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(aptd);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment"> * \brief Wait for the initiator of an async playback to be ready</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment"> * See the description on the async_datastore_info structure for more</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment"> * information about what this is about.</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment"> * \param initiator The channel that queued the async announcement</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02201"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af4b6432760e76c348b3ce223f36e18dd"> 2201</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af4b6432760e76c348b3ce223f36e18dd">wait_for_initiator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>)</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;{</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *async_datastore;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> *add;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(initiator);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   async_datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(initiator, &amp;async_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(initiator);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (!async_datastore) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   add = async_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   <span class="keywordflow">while</span> (add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68">wait</a>) {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   }</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;}</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment"> * \brief Play an announcement into a confbridge asynchronously</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment"> * This runs in the playback queue taskprocessor. This ensures that</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment"> * all playbacks are handled in sequence and do not play over top one</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment"> * another.</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment"> * \param data An async_playback_task_data</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment"> * \return 0</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02233"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af1ab64d133bf4b422073e111c8b0728e"> 2233</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af1ab64d133bf4b422073e111c8b0728e">async_playback_task</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;{</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a> *aptd = data;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <span class="comment">/* Wait for the initiator to get back in the bridge or be hung up */</span></div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <span class="keywordflow">if</span> (aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>) {</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af4b6432760e76c348b3ce223f36e18dd">wait_for_initiator</a>(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   }</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0197b4e3640cff76be2d93b1cd970d29">playback_common</a>(aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, aptd-&gt;<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a90af4a37744f546793c64b6028efcab1">async_playback_task_data_destroy</a>(aptd);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;}</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div><div class="line"><a name="l02248"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#abab77aec47d0343c3612eaeb5ce58910"> 2248</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abab77aec47d0343c3612eaeb5ce58910">async_play_sound_helper</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">say_number</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>)</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;{</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a> *aptd;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   <span class="comment">/* Do not waste resources trying to play files that do not exist */</span></div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">if</span> (say_number &lt; 0) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a>(filename)) {</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   }</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   aptd = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aea593709aae4f44a21021a40d733a9a0">async_playback_task_data_alloc</a>(conference, filename, say_number, initiator);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   <span class="keywordflow">if</span> (!aptd) {</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   }</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af1ab64d133bf4b422073e111c8b0728e">async_playback_task</a>, aptd)) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to play file &#39;%s&#39; to conference &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            filename, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to say number &#39;%d&#39; to conference &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            say_number, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      }</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a90af4a37744f546793c64b6028efcab1">async_playback_task_data_destroy</a>(aptd);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   }</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;}</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div><div class="line"><a name="l02282"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a7b2ea4c9f3ad44bb831a633712da35ca"> 2282</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">initiator</a>)</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;{</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abab77aec47d0343c3612eaeb5ce58910">async_play_sound_helper</a>(conference, filename, -1, initiator);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;}</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#ae36954c48e2b0691ef8cafbdb7f21011"> 2288</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae36954c48e2b0691ef8cafbdb7f21011">async_play_sound_ready</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;{</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *async_datastore;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a> *add;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   async_datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;async_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <span class="keywordflow">if</span> (!async_datastore) {</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   }</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   add = async_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68">wait</a> = 0;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;add-&gt;<a class="code" href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;}</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment"> * \brief Play number into the conference bridge</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment"> * \param conference The conference bridge to say the number into</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment"> * \param say_number number to say</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment"> * \retval -1 failure</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02317"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a7e149d3f4646b6542df30d90b9960479"> 2317</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e149d3f4646b6542df30d90b9960479">play_sound_number</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keywordtype">int</span> say_number)</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;{</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a90b7c08b6834f1ced4df9e5f7a4c1d92">play_sound_helper</a>(conference, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, say_number);</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;}</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#abee66f5a1cd0302e5598049d7836a107"> 2322</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abee66f5a1cd0302e5598049d7836a107">conf_handle_talker_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keywordtype">void</span> *hook_pvt, <span class="keywordtype">int</span> talking)</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;{</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user = hook_pvt;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *, <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *talking_extras;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>) {</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      <span class="comment">/* Remove the hook since the conference does not exist. */</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   }</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a08a0f0056a7313fd8cf481f5f8ee327a">talking</a> = talking;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   talking_extras = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: b}&quot;</span>,</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <span class="stringliteral">&quot;talking_status&quot;</span>, talking ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span>,</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      <span class="stringliteral">&quot;admin&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>));</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keywordflow">if</span> (!talking_extras) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   }</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#addef04882cb71861a37e40f1a61bc3d4">confbridge_talking_type</a>(), talking_extras, 0);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(talking_extras);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;}</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;</div><div class="line"><a name="l02350"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a6505f800c65ac4b11e3fcac69273460b"> 2350</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a6505f800c65ac4b11e3fcac69273460b">conf_get_pin</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;{</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <span class="keywordtype">char</span> pin_guess[<a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>+1] = { 0, };</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *pin = user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#ad3479638ded235d29e4bbba475abe931">pin</a>;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = pin_guess;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="keywordtype">int</span> i, res;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="comment">    * NOTE: We have not joined a conference yet so we have to use</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;<span class="comment">    * the bridge profile requested by the user.</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <span class="comment">/* give them three tries to get the pin right */</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++) {</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af3f76858d4dd513e59dbe5e67bc46220">ast_app_getdata</a>(chan,</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a3603c24dc6ec2ae56a0f87032c93ef90">CONF_SOUND_GET_PIN</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>),</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         tmp, len, 0) &gt;= 0) {</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(pin, pin_guess)) {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;         }</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      }</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan,</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a1f617173e9ccd424815974c7f08e1f7d">CONF_SOUND_INVALID_PIN</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>),</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;         <span class="comment">/* Account for digit already read during ivalid pin playback</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment">          * resetting pin buf. */</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;         pin_guess[0] = res;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;         pin_guess[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;         tmp = pin_guess + 1;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;         len = <a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a> - 1;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;         <span class="comment">/* reset pin buf as empty buffer. */</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;         tmp = pin_guess;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;         len = <a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      }</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   }</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;}</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;</div><div class="line"><a name="l02392"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab19c634ffc6331a8791e93f876355c62"> 2392</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab19c634ffc6331a8791e93f876355c62">user_timeout</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keywordtype">void</span> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#a1229bdedff51a0fc453b7c482cd8dd49">ignore</a>)</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;{</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, 0);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;TIMEOUT&quot;</span>);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;}</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a666cb6504e192bbe8b4c7619b0fad11d"> 2399</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a666cb6504e192bbe8b4c7619b0fad11d">conf_rec_name</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user, <span class="keyword">const</span> <span class="keywordtype">char</span> *conf_name)</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;{</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <span class="keywordtype">char</span> destdir[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <span class="keywordtype">int</span> duration = 20;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   snprintf(destdir, <span class="keyword">sizeof</span>(destdir), <span class="stringliteral">&quot;%s/confbridge&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a>);</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a>(destdir, 0777) != 0) {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;mkdir &#39;%s&#39; failed: %s\n&quot;</span>, destdir, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   }</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   snprintf(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>, <span class="keyword">sizeof</span>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>),</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;       <span class="stringliteral">&quot;%s/confbridge-name-%s-%s&quot;</span>, destdir,</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;       conf_name, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4afc4a2e338837ad1cc81bf687a25fdb37">USER_OPT_ANNOUNCE_JOIN_LEAVE_REVIEW</a>))) {</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a675ebd613588a960e37bd6fa2477f30f">ast_play_and_record</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;         <span class="stringliteral">&quot;vm-rec-name&quot;</span>,</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;         user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>,</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;         10,</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;         <span class="stringliteral">&quot;sln&quot;</span>,</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;         &amp;duration,</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;         <a class="code" href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a>(<a class="code" href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a>),</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;         0,</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a88b6ee77eea0c8a6cc0a315e1c1fc815">ast_record_review</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;         <span class="stringliteral">&quot;vm-rec-name&quot;</span>,</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;         user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>,</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;         10,</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;         <span class="stringliteral">&quot;sln&quot;</span>,</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;         &amp;duration,</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   }</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   }</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;}</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;</div><div class="line"><a name="l02444"></a><span class="lineno"><a class="line" href="../../da/daf/structasync__delete__name__rec__task__data.html"> 2444</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a> {</div><div class="line"><a name="l02445"></a><span class="lineno"><a class="line" href="../../da/daf/structasync__delete__name__rec__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2"> 2445</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02446"></a><span class="lineno"><a class="line" href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3"> 2446</a></span>&#160;   <span class="keywordtype">char</span> filename[0];</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;};</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a0ce0cba48a05e992316f0e27f8a48452"> 2449</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0ce0cba48a05e992316f0e27f8a48452">async_delete_name_rec_task_data_alloc</a>(</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>)</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;{</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a> *atd;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   atd = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*atd) + strlen(filename) + 1);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <span class="keywordflow">if</span> (!atd) {</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   }</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <span class="comment">/* Safe */</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   strcpy(atd-&gt;<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, filename);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   atd-&gt;<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <span class="keywordflow">return</span> atd;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;}</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div><div class="line"><a name="l02466"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a751b5dcd51a2fe7bfaeae35308fb4399"> 2466</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a751b5dcd51a2fe7bfaeae35308fb4399">async_delete_name_rec_task_data_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a> *atd)</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;{</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(atd);</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;}</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="comment"> * \brief Delete user&#39;s name file asynchronously</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment"> * This runs in the playback queue taskprocessor. This ensures that</span></div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment"> * sound file is removed after playback is finished and not before.</span></div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="comment"> * \param data An async_delete_name_rec_task_data</span></div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="comment"> * \return 0</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02480"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab273ee7695ece891abe7c4d0ea85334a"> 2480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab273ee7695ece891abe7c4d0ea85334a">async_delete_name_rec_task</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;{</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a> *atd = data;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(atd-&gt;<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Conference &#39;%s&#39; removed user name file &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      atd-&gt;<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, atd-&gt;<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a751b5dcd51a2fe7bfaeae35308fb4399">async_delete_name_rec_task_data_destroy</a>(atd);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;}</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div><div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab0992cd9d6fe1c4244cdbb9c0ffd2c6e"> 2492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab0992cd9d6fe1c4244cdbb9c0ffd2c6e">async_delete_name_rec</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">filename</a>)</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;{</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a> *atd;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a>(filename)) {</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   }</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;   atd = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a0ce0cba48a05e992316f0e27f8a48452">async_delete_name_rec_task_data_alloc</a>(conference, filename);</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   <span class="keywordflow">if</span> (!atd) {</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   }</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">playback_queue</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab273ee7695ece891abe7c4d0ea85334a">async_delete_name_rec_task</a>, atd)) {</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Conference &#39;%s&#39; was unable to remove user name file &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;         conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, filename);</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a751b5dcd51a2fe7bfaeae35308fb4399">async_delete_name_rec_task_data_destroy</a>(atd);</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;   }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;}</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;</div><div class="line"><a name="l02518"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a1c57bf9fe1996abf95b28b73b6b30e30"> 2518</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1c57bf9fe1996abf95b28b73b6b30e30">join_callback</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keywordtype">void</span> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#a1229bdedff51a0fc453b7c482cd8dd49">ignore</a>)</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;{</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae36954c48e2b0691ef8cafbdb7f21011">async_play_sound_ready</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;}</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"><a class="line" href="../../d2/dd4/structconfbridge__hook__data.html"> 2524</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/dd4/structconfbridge__hook__data.html">confbridge_hook_data</a> {</div><div class="line"><a name="l02525"></a><span class="lineno"><a class="line" href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2"> 2525</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02526"></a><span class="lineno"><a class="line" href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7"> 2526</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7">user</a>;</div><div class="line"><a name="l02527"></a><span class="lineno"><a class="line" href="../../d2/dd4/structconfbridge__hook__data.html#aed529e4d09a23d59c37004a5ad59af6d"> 2527</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3">ast_bridge_hook_type</a> hook_type;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;};</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a135aea9764be6ade97935d728bdacae8"> 2530</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a135aea9764be6ade97935d728bdacae8">send_event_hook_callback</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keywordtype">void</span> *data)</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;{</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dd4/structconfbridge__hook__data.html">confbridge_hook_data</a> *hook_data = data;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   <span class="keywordflow">if</span> (hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aed529e4d09a23d59c37004a5ad59af6d">hook_type</a> == <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee">AST_BRIDGE_HOOK_TYPE_JOIN</a>) {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4d63510d2f8432cd7ec0dab1859f2a3a">send_join_event</a>(hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7">user</a>, hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a8841a2fd54bcd985957984b6392d04a6">send_leave_event</a>(hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7">user</a>, hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   }</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;}</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="comment">/*! \brief The ConfBridge application */</span></div><div class="line"><a name="l02544"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a84e1ce360c4036881f7079eb067e3f29"> 2544</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a84e1ce360c4036881f7079eb067e3f29">confbridge_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;{</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   <span class="keywordtype">int</span> res = 0, volume_adjustments[2];</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d2/db7/ael__main_8c.html#a55602ca214fb365e8deef9a73c8442e7">quiet</a> = 0;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;   <span class="keywordtype">int</span> async_delete_task_pushed = 0;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *b_profile_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *u_profile_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *menu_profile_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> user = {</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      .<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      .tech_args.talking_threshold = <a class="code" href="../../d4/de3/confbridge_8h.html#a6c6d45b3173fa54bfb780e8b01dbe408">DEFAULT_TALKING_THRESHOLD</a>,</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      .tech_args.silence_threshold = <a class="code" href="../../d4/de3/confbridge_8h.html#a1c635ac5ad9b16ea79cf8387ab6e9c11">DEFAULT_SILENCE_THRESHOLD</a>,</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      .tech_args.drop_silence = 0,</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;   };</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dd4/structconfbridge__hook__data.html">confbridge_hook_data</a> *join_hook_data;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dd4/structconfbridge__hook__data.html">confbridge_hook_data</a> *leave_hook_data;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(conf_name);</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(b_profile_name);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(u_profile_name);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(menu_profile_name);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;   );</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>)) {</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      res = -1;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   }</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <span class="comment">/* We need to make a copy of the input string if we are going to modify it! */</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.conf_name)) {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s requires an argument (conference name[,options])\n&quot;</span>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>);</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      res = -1;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   }</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   <span class="keywordflow">if</span> (strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.conf_name) &gt;= <a class="code" href="../../d4/de3/confbridge_8h.html#af06136a3da0a98829d389f3d061bc8e8">MAX_CONF_NAME</a>) {</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s does not accept conference names longer than %d\n&quot;</span>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#af06136a3da0a98829d389f3d061bc8e8">MAX_CONF_NAME</a> - 1);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      res = -1;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;   }</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   <span class="comment">/* bridge profile name */</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc &gt; 1 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.b_profile_name)) {</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;      b_profile_name = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.b_profile_name;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   }</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d40/conf__config__parser_8c.html#a3dd7626f16e8359a2aaf281cefb8aff0">conf_find_bridge_profile</a>(chan, b_profile_name, &amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>)) {</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Conference bridge profile %s does not exist\n&quot;</span>, b_profile_name ?</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;         b_profile_name : <a class="code" href="../../d4/de3/confbridge_8h.html#a8e1844f77711d689f7dcb661d3f49dc8">DEFAULT_BRIDGE_PROFILE</a>);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      res = -1;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;   }</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <span class="comment">/* user profile name */</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc &gt; 2 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.u_profile_name)) {</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      u_profile_name = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.u_profile_name;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   }</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d40/conf__config__parser_8c.html#a23f9998d93ca56bdce5452fdbe70bf76">conf_find_user_profile</a>(chan, u_profile_name, &amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>)) {</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Conference user profile %s does not exist\n&quot;</span>, u_profile_name ?</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;         u_profile_name : <a class="code" href="../../d4/de3/confbridge_8h.html#aabf05890f552841fb4df80739fc047ff">DEFAULT_USER_PROFILE</a>);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      res = -1;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   <span class="comment">/* If channel hasn&#39;t been answered already, answer it, unless we&#39;re explicitly not supposed to */</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4ab9a1c9f4be2b7c9084392fd5b34439f3">USER_OPT_ANSWER_CHANNEL</a>))) {</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   }</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   quiet = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a3867e256f612cd8589e3ac89c3103ea1">USER_OPT_QUIET</a>);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="comment">/* ask for a PIN immediately after finding user profile.  This has to be</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="comment">    * prompted for requardless of quiet setting. */</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#ad3479638ded235d29e4bbba475abe931">pin</a>)) {</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a6505f800c65ac4b11e3fcac69273460b">conf_get_pin</a>(chan, &amp;user)) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;         res = -1; <span class="comment">/* invalid PIN */</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;         <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      }</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;   }</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   <span class="comment">/* See if we need them to record a intro name */</span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <span class="keywordflow">if</span> (!quiet &amp;&amp;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4afa00866ee3fff551be9402bb16ddcf23">USER_OPT_ANNOUNCE_JOIN_LEAVE</a>) ||</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4afc4a2e338837ad1cc81bf687a25fdb37">USER_OPT_ANNOUNCE_JOIN_LEAVE_REVIEW</a>)))) {</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a666cb6504e192bbe8b4c7619b0fad11d">conf_rec_name</a>(&amp;user, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.conf_name)) {</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;         res = -1; <span class="comment">/* Hangup during name recording */</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;         <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      }</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;   }</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;   <span class="comment">/* menu name */</span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc &gt; 3 &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.menu_profile_name)) {</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      menu_profile_name = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.menu_profile_name;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   }</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d40/conf__config__parser_8c.html#abc02d32a4392fd90c575dd8a9e1de07d">conf_set_menu_to_user</a>(chan, &amp;user, menu_profile_name)) {</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Conference menu profile %s does not exist\n&quot;</span>, menu_profile_name ?</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;         menu_profile_name : <a class="code" href="../../d4/de3/confbridge_8h.html#a75e6804f31f544a09b224a32673218cb">DEFAULT_MENU_PROFILE</a>);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      res = -1;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;   <span class="comment">/* Set if DTMF should pass through for this user or not */</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a6389c2ad08a2ff22eef9fea06b588938">USER_OPT_DTMF_PASS</a>)) {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>.<a class="code" href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">dtmf_passthrough</a> = 1;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>.<a class="code" href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">dtmf_passthrough</a> = 0;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   }</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   <span class="comment">/* Set if text messaging is enabled for this user or not */</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a2ad3272a82f68843830b668e79d2a418">USER_OPT_TEXT_MESSAGING</a>)) {</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>.<a class="code" href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">text_messaging</a> = 1;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>.<a class="code" href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">text_messaging</a> = 0;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;   }</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;   <span class="comment">/* Set dsp threshold values if present */</span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;   <span class="keywordflow">if</span> (user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a91f62b0358f1b431bc3907b81c401447">talking_threshold</a>) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acfc2cc36cba9e208c9d45e39d7cff506">tech_args</a>.<a class="code" href="../../d6/d97/structast__bridge__tech__optimizations.html#a91f62b0358f1b431bc3907b81c401447">talking_threshold</a> = user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a91f62b0358f1b431bc3907b81c401447">talking_threshold</a>;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   }</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;   <span class="keywordflow">if</span> (user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a46ab747e08f8a9e23484a31cf8898a7c">silence_threshold</a>) {</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acfc2cc36cba9e208c9d45e39d7cff506">tech_args</a>.<a class="code" href="../../d6/d97/structast__bridge__tech__optimizations.html#a46ab747e08f8a9e23484a31cf8898a7c">silence_threshold</a> = user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a46ab747e08f8a9e23484a31cf8898a7c">silence_threshold</a>;</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;   }</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   <span class="comment">/* Set a talker indicate call back if talking detection is requested */</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a81b7b94e95d57a2227ba9c6bea429bd9">USER_OPT_TALKER_DETECT</a>)) {</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a47aa4de3736ec9da5831351848e6522d">ast_bridge_talk_detector_hook</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abee66f5a1cd0302e5598049d7836a107">conf_handle_talker_cb</a>,</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;         &amp;user, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>)) {</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;         res = -1;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;         <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      }</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;   }</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   <span class="comment">/* Look for a conference bridge matching the provided name */</span></div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;   <span class="keywordflow">if</span> (!(conference = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a19ad7d7ca439cdaad565b018191778e2">join_conference_bridge</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.conf_name, &amp;user))) {</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;FAILED&quot;</span>);</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      res = -1;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   }</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;   <span class="comment">/* Keep a copy of volume adjustments so we can restore them later if need be */</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;   volume_adjustments[0] = <a class="code" href="../../d0/d79/audiohook_8h.html#a39f5dbdf5ef7a979d4ba48f9ee71a422">ast_audiohook_volume_get</a>(chan, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>);</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   volume_adjustments[1] = <a class="code" href="../../d0/d79/audiohook_8h.html#a39f5dbdf5ef7a979d4ba48f9ee71a422">ast_audiohook_volume_get</a>(chan, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4aab69efd5897808436bd1a82abc10fba5">USER_OPT_DROP_SILENCE</a>)) {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;      user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acfc2cc36cba9e208c9d45e39d7cff506">tech_args</a>.<a class="code" href="../../d6/d97/structast__bridge__tech__optimizations.html#a961c9c78140a6f1a64efacc2002c1624">drop_silence</a> = 1;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;   }</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4ae5acbe92ae4356e9544072d4a39adcdc">USER_OPT_JITTERBUFFER</a>)) {</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a>(chan, <span class="stringliteral">&quot;JITTERBUFFER(adaptive)&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>);</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;   }</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a3ea8aba6ea05c151f1791ed05677d359">USER_OPT_DENOISE</a>)) {</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a>(chan, <span class="stringliteral">&quot;DENOISE(rx)&quot;</span>, <span class="stringliteral">&quot;on&quot;</span>);</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   }</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;   <span class="comment">/* if this user has a intro, play it before entering */</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>)) {</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference, user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>);</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference,</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1ab5aa36620e6f220174807517a6579927">CONF_SOUND_HAS_JOINED</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>));</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;   }</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   <span class="comment">/* Play the Join sound to both the conference and the user entering. */</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;   <span class="keywordflow">if</span> (!quiet) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *join_sound = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a07a04718f40d6d81a50f1ec639d2b394">CONF_SOUND_JOIN</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      <span class="keywordflow">if</span> (strcmp(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, join_sound, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference, join_sound);</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a>(conference, join_sound, chan);</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      }</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;   }</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   <span class="keywordflow">if</span> (user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a25af7eefd48048fb067a60b8e295caf1">timeout</a>) {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>,</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;         0,</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;         user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#a25af7eefd48048fb067a60b8e295caf1">timeout</a> * 1000,</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab19c634ffc6331a8791e93f876355c62">user_timeout</a>,</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;   }</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;   <span class="comment">/* See if we need to automatically set this user as a video source or not */</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676b75acfdc72d821ac2a85fd14cba0d">handle_video_on_join</a>(conference, user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>));</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2c7b3faff850c992fd562910b48b41db">conf_moh_unsuspend</a>(&amp;user);</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;   join_hook_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*join_hook_data));</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;   <span class="keywordflow">if</span> (!join_hook_data) {</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      res = -1;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   }</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   join_hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7">user</a> = &amp;<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;   join_hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;   join_hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aed529e4d09a23d59c37004a5ad59af6d">hook_type</a> = <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee">AST_BRIDGE_HOOK_TYPE_JOIN</a>;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;   res = <a class="code" href="../../dc/d7a/bridge__features_8h.html#a5ef8af740b139874195a394ba4abee3d">ast_bridge_join_hook</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a135aea9764be6ade97935d728bdacae8">send_event_hook_callback</a>,</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      join_hook_data, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, 0);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(join_hook_data);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Couldn&#39;t add bridge join hook for channel &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;   leave_hook_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*leave_hook_data));</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;   <span class="keywordflow">if</span> (!leave_hook_data) {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      <span class="comment">/* join_hook_data is cleaned up by ast_bridge_features_cleanup via the goto */</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      res = -1;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;   }</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;   leave_hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7">user</a> = &amp;<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;   leave_hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;   leave_hook_data-&gt;<a class="code" href="../../d2/dd4/structconfbridge__hook__data.html#aed529e4d09a23d59c37004a5ad59af6d">hook_type</a> = <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3ac47686eedfc6349818302b402b72461d">AST_BRIDGE_HOOK_TYPE_LEAVE</a>;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;   res = <a class="code" href="../../dc/d7a/bridge__features_8h.html#aaaf5765651d9a3697813f9752660da57">ast_bridge_leave_hook</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a135aea9764be6ade97935d728bdacae8">send_event_hook_callback</a>,</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      leave_hook_data, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, 0);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      <span class="comment">/* join_hook_data is cleaned up by ast_bridge_features_cleanup via the goto */</span></div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(leave_hook_data);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Couldn&#39;t add bridge leave hook for channel &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;   }</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a5ef8af740b139874195a394ba4abee3d">ast_bridge_join_hook</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1c57bf9fe1996abf95b28b73b6b30e30">join_callback</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae36954c48e2b0691ef8cafbdb7f21011">async_play_sound_ready</a>(user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   }</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>,</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      chan,</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      &amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>,</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;      &amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#acfc2cc36cba9e208c9d45e39d7cff506">tech_args</a>,</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;      0);</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;   <span class="comment">/* This is a catch-all in case joining the bridge failed or for some reason</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="comment">    * an async announcement got queued up and hasn&#39;t been told to play yet</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae36954c48e2b0691ef8cafbdb7f21011">async_play_sound_ready</a>(chan);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   <span class="keywordflow">if</span> (!user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;HANGUP&quot;</span>);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;   }</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   <span class="comment">/* if we&#39;re shutting down, don&#39;t attempt to do further processing */</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a>()) {</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="comment">       * Not taking any new calls at this time.  We cannot create</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="comment">       * the announcer channel if this is the first channel into</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="comment">       * the conference and we certainly cannot create any</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="comment">       * recording channel.</span></div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(&amp;user);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      conference = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;      <span class="keywordflow">goto</span> confbridge_cleanup;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;   }</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;   <span class="comment">/* If this user was a video source, we need to clean up and possibly pick a new source. */</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac338dd660e7509403a2f684b5abcde0b">handle_video_on_exit</a>(conference, user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;   <span class="comment">/* if this user has a intro, play it when leaving */</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;   <span class="keywordflow">if</span> (!quiet &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>)) {</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a>(conference, user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a>(conference,</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a88d68105d02ba5062e1ecfb03f471049">CONF_SOUND_HAS_LEFT</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab0992cd9d6fe1c4244cdbb9c0ffd2c6e">async_delete_name_rec</a>(conference, user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>);</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      async_delete_task_pushed = 1;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   }</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;   <span class="comment">/* play the leave sound */</span></div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;   <span class="keywordflow">if</span> (!quiet) {</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *leave_sound = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a9c4a5daa97f23b28b17f9754237b7a9f">CONF_SOUND_LEAVE</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a>(conference, leave_sound, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   }</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;   <span class="comment">/* If the user was kicked from the conference play back the audio prompt for it */</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   <span class="keywordflow">if</span> (!quiet &amp;&amp; user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a>) {</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan,</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1af5ce08bb2b402e0dcff932347c95b7e1">CONF_SOUND_KICKED</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>),</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;         <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;   }</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;   <span class="comment">/* Easy as pie, depart this channel from the conference bridge */</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a>(&amp;user);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;   conference = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   <span class="comment">/* Restore volume adjustments to previous values in case they were changed */</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   <span class="keywordflow">if</span> (volume_adjustments[0]) {</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <a class="code" href="../../d0/d79/audiohook_8h.html#ae042519f3d210ea48604952be74044a2">ast_audiohook_volume_set</a>(chan, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, volume_adjustments[0]);</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;   }</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;   <span class="keywordflow">if</span> (volume_adjustments[1]) {</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;      <a class="code" href="../../d0/d79/audiohook_8h.html#ae042519f3d210ea48604952be74044a2">ast_audiohook_volume_set</a>(chan, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, volume_adjustments[1]);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   }</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;confbridge_cleanup:</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   <span class="keywordflow">if</span> (!async_delete_task_pushed &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>)) {</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">name_rec_location</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;   }</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">features</a>);</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;   <a class="code" href="../../dc/d40/conf__config__parser_8c.html#a6c41b83a47f1b19d4324afcf53be5a49">conf_bridge_profile_destroy</a>(&amp;user.<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>);</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;}</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;</div><div class="line"><a name="l02866"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a4cd1b182f2c971d72675e717c9fe8ead"> 2866</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4cd1b182f2c971d72675e717c9fe8ead">action_toggle_mute</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;               <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user,</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;               <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;{</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   <span class="comment">/* Toggle user level mute request. */</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;   mute = !user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abb3c7ba95c53c0a64298d852a96b37ee">generic_mute_unmute_user</a>(conference, user, mute);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(mute ? <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1ac62e5eb942140605ba3fe1c1d7275688">CONF_SOUND_MUTED</a> : <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1abec7ff7b0e7afeaf9964103ca02acbb4">CONF_SOUND_UNMUTED</a>,</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;         conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>)) &lt; 0;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;}</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div><div class="line"><a name="l02881"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab2025b0d7b6930ebe21e9835a5868708"> 2881</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab2025b0d7b6930ebe21e9835a5868708">action_toggle_binaural</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user,</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;{</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> binaural;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   binaural = !bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a51b81f24642f8eff2d89a0cab1533167">binaural_suspended</a>;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a51b81f24642f8eff2d89a0cab1533167">binaural_suspended</a> = binaural;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (binaural ?</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;            <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a963e688839fb8422c87c65cdcc8d4d0d">CONF_SOUND_BINAURAL_OFF</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>) :</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;            <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a4f73336407d622bc9533e528ed626538">CONF_SOUND_BINAURAL_ON</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>))) &lt; 0;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;}</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div><div class="line"><a name="l02895"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a7372834be37bf98fcc890f7a8dc46780"> 2895</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7372834be37bf98fcc890f7a8dc46780">action_toggle_mute_participants</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;{</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *cur_user = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *sound_to_play;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="comment">/* Toggle bridge level mute request. */</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   mute = !conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, cur_user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;cur_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)) {</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;         <span class="comment">/* Set user level to bridge level mute request. */</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;         cur_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa8fb5653de084dfe2470d12f75839a51">conf_update_user_mute</a>(cur_user);</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      }</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   }</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;   sound_to_play = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      mute ? <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a6795c77d3d8042366c64e2d394863481">CONF_SOUND_PARTICIPANTS_MUTED</a> : <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a43f4227e6426b05c4e131c38d4bff20a">CONF_SOUND_PARTICIPANTS_UNMUTED</a>,</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>);</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   <span class="keywordflow">if</span> (strcmp(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>))) {</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      <span class="comment">/* The host needs to hear it seperately, as they don&#39;t get the audio from play_sound_helper */</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, sound_to_play, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <span class="comment">/* Announce to the group that all participants are muted */</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a>(conference, sound_to_play);</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="comment">/* Playing the sound asynchronously lets the sound be heard by everyone at once */</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a>(conference, sound_to_play, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;   }</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;}</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a426b1c7a3b0265c4e89ff6e46fe08c78"> 2937</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a426b1c7a3b0265c4e89ff6e46fe08c78">action_playback</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keyword">const</span> <span class="keywordtype">char</span> *playback_file)</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;{</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;   <span class="keywordtype">char</span> *file_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(playback_file);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;   <span class="keywordflow">while</span> ((file = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;file_copy, <span class="stringliteral">&quot;&amp;&quot;</span>))) {</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, file, <span class="stringliteral">&quot;&quot;</span>)) {</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to playback file %s to channel\n&quot;</span>, file);</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      }</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   }</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;}</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div><div class="line"><a name="l02951"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a33eea3a20d4a3edfc5596d604fbdf80f"> 2951</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a33eea3a20d4a3edfc5596d604fbdf80f">action_playback_and_continue</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user,</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel,</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dc/dd3/structconf__menu.html">conf_menu</a> *menu,</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *playback_file,</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cur_dtmf,</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;   <span class="keywordtype">int</span> *stop_prompts)</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;{</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = 0;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;   <span class="keywordtype">char</span> dtmf[<a class="code" href="../../dc/d7a/bridge__features_8h.html#a8f882f130b89dd63d656d176884095a1">MAXIMUM_DTMF_FEATURE_STRING</a>];</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d43/structconf__menu__entry.html">conf_menu_entry</a> new_menu_entry = { { 0, }, };</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   <span class="keywordtype">char</span> *file_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(playback_file);</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;   <span class="keywordflow">while</span> ((file = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;file_copy, <span class="stringliteral">&quot;&amp;&quot;</span>))) {</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, file, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>))) {</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to playback file %s to channel\n&quot;</span>, file);</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      }</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      <span class="comment">/* now wait for more digits. */</span></div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="keywordflow">if</span> (!(digit = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>))) {</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;         <span class="comment">/* streaming finished and no DTMF was entered */</span></div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == -1) {</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;         <span class="comment">/* error */</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;         <span class="keywordflow">break</span>; <span class="comment">/* dtmf was entered */</span></div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      }</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   }</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   <span class="keywordflow">if</span> (!digit) {</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <span class="comment">/* streaming finished on all files and no DTMF was entered */</span></div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;   }</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;   <span class="comment">/* If we get here, then DTMF has been entered, This means no</span></div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="comment">    * additional prompts should be played for this menu entry */</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;   *stop_prompts = 1;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;   <span class="comment">/* If a digit was pressed during the payback, update</span></div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;<span class="comment">    * the dtmf string and look for a new menu entry in the</span></div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="comment">    * menu structure */</span></div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dtmf, cur_dtmf, <span class="keyword">sizeof</span>(dtmf));</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a8f882f130b89dd63d656d176884095a1">MAXIMUM_DTMF_FEATURE_STRING</a> - 1); i++) {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      dtmf[i] = cur_dtmf[i];</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;      <span class="keywordflow">if</span> (!dtmf[i]) {</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;         dtmf[i] = (char) digit;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;         dtmf[i + 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;         i = -1;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      }</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   }</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   <span class="comment">/* If i is not -1 then the new dtmf digit was _NOT_ added to the string.</span></div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;<span class="comment">    * If this is the case, no new DTMF sequence should be looked for. */</span></div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   <span class="keywordflow">if</span> (i != -1) {</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   }</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d40/conf__config__parser_8c.html#a643df55138b29ea6d301896822786fae">conf_find_menu_entry_by_sequence</a>(dtmf, menu, &amp;new_menu_entry)) {</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#add4efc724870cceaa73010102ab55a74">execute_menu_entry</a>(conference,</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;         user,</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;         bridge_channel,</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;         &amp;new_menu_entry, menu);</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      <a class="code" href="../../dc/d40/conf__config__parser_8c.html#affac9dbd3f70c579f9ed6553a2d93db9">conf_menu_entry_destroy</a>(&amp;new_menu_entry);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   }</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;}</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;</div><div class="line"><a name="l03022"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab1ba20874bbec2f0ec79015b5c15bfcb"> 3022</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab1ba20874bbec2f0ec79015b5c15bfcb">action_kick_last</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel,</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;{</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *last_user = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;   <span class="keywordtype">int</span> isadmin = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>);</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;   <span class="keywordflow">if</span> (!isadmin) {</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a36f571ad2bb52978f293bbde40e952ea">CONF_SOUND_ERROR_MENU</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>));</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Only admin users can use the kick_last menu action. Channel %s of conf %s is not an admin.\n&quot;</span>,</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;         conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;   }</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   last_user = <a class="code" href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>);</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;   <span class="keywordflow">if</span> (!last_user) {</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;   }</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   <span class="keywordflow">if</span> (last_user == user || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;last_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)) {</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(<a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a36f571ad2bb52978f293bbde40e952ea">CONF_SOUND_ERROR_MENU</a>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>));</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!last_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a>) {</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      last_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a> = 1;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(last_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;KICKED&quot;</span>);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a66d6a521530f4fb208eb8ee33e257b6c">ast_bridge_remove</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, last_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;   }</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;}</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a25ff7bf4b3fd0c35b89409651aee3bca"> 3059</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a25ff7bf4b3fd0c35b89409651aee3bca">action_dialplan_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keyword">struct</span> <a class="code" href="../../d1/d6f/structconf__menu__action.html">conf_menu_action</a> *menu_action)</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;{</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/db8/structast__pbx__args.html">ast_pbx_args</a> args;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d83/structast__pbx.html">ast_pbx</a> *pbx;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>;</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;   memset(&amp;args, 0, <span class="keyword">sizeof</span>(args));</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;   args.<a class="code" href="../../da/db8/structast__pbx__args.html#a0449b0be05342e431e60937c47fc52f7">no_hangup_chan</a> = 1;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   <span class="comment">/*save off*/</span></div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;   exten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   priority = <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   pbx = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af89b0f98c227230d7180a90627c0901c">ast_channel_pbx_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   <span class="comment">/*set new*/</span></div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">data</a>.<a class="code" href="../../d1/d6f/structconf__menu__action.html#a7fed7344d1400c3ca5099cd399c5d106">dialplan_args</a>.exten);</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">data</a>.<a class="code" href="../../d1/d6f/structconf__menu__action.html#a7fed7344d1400c3ca5099cd399c5d106">dialplan_args</a>.context);</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">data</a>.<a class="code" href="../../d1/d6f/structconf__menu__action.html#a7fed7344d1400c3ca5099cd399c5d106">dialplan_args</a>.priority);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;   <span class="comment">/*execute*/</span></div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;   res = <a class="code" href="../../db/de0/pbx_8h.html#a2c502c100b8b4791d9efe395e08d620b">ast_pbx_run_args</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, &amp;args);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;   <span class="comment">/*restore*/</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, exten);</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, context);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, priority);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af89b0f98c227230d7180a90627c0901c">ast_channel_pbx_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, pbx);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;}</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;</div><div class="line"><a name="l03103"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#add4efc724870cceaa73010102ab55a74"> 3103</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#add4efc724870cceaa73010102ab55a74">execute_menu_entry</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user,</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel,</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dd/d43/structconf__menu__entry.html">conf_menu_entry</a> *menu_entry,</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dc/dd3/structconf__menu.html">conf_menu</a> *menu)</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;{</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d6f/structconf__menu__action.html">conf_menu_action</a> *menu_action;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   <span class="keywordtype">int</span> isadmin = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>);</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;   <span class="keywordtype">int</span> stop_prompts = 0;</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;menu_entry-&gt;<a class="code" href="../../dd/d43/structconf__menu__entry.html#a0276204e71b257d944dbb3c80227ea1e">actions</a>, menu_action, <a class="code" href="../../d1/d6f/structconf__menu__action.html#a0057c96bc1d247e36b00d88cc6d00cf8">action</a>) {</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      <span class="keywordflow">switch</span> (menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a479cca20d9d333ac00adc0351de30683">id</a>) {</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3ac3bd31ee1726dff2effa8f0f928f14e6">MENU_ACTION_TOGGLE_MUTE</a>:</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;         res |= <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a4cd1b182f2c971d72675e717c9fe8ead">action_toggle_mute</a>(conference, user, bridge_channel);</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a2fd4f67d74be01d58941bb8ab1aa2e88">MENU_ACTION_TOGGLE_BINAURAL</a>:</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab2025b0d7b6930ebe21e9835a5868708">action_toggle_binaural</a>(conference, user, bridge_channel);</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a5013cc6331ef13d353e9985f402c240a">MENU_ACTION_ADMIN_TOGGLE_MUTE_PARTICIPANTS</a>:</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;         <span class="keywordflow">if</span> (!isadmin) {</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;         }</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a7372834be37bf98fcc890f7a8dc46780">action_toggle_mute_participants</a>(conference, user);</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3aa672931e76070ba4de84538560796db8">MENU_ACTION_PARTICIPANT_COUNT</a>:</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aaf709c6d26e10455b9d58d6cabda33c4">announce_user_count</a>(conference, user, bridge_channel);</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a3443c564643fdfbd1d58a1c1de2c6afa">MENU_ACTION_PLAYBACK</a>:</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;         <span class="keywordflow">if</span> (!stop_prompts) {</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            res |= <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a426b1c7a3b0265c4e89ff6e46fe08c78">action_playback</a>(bridge_channel, menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">data</a>.<a class="code" href="../../d1/d6f/structconf__menu__action.html#ab35b6e8fcf1018b072b1fdf1c117686e">playback_file</a>);</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_MENU_PLAYBACK&quot;</span>,</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;               <span class="stringliteral">&quot;Message: %s\r\nChannel: %s&quot;</span>,</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;               menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">data</a>.<a class="code" href="../../d1/d6f/structconf__menu__action.html#ab35b6e8fcf1018b072b1fdf1c117686e">playback_file</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;         }</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a378454d8158b6dee03b6750c08c75a4a">MENU_ACTION_RESET_LISTENING</a>:</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         <a class="code" href="../../d0/d79/audiohook_8h.html#ae042519f3d210ea48604952be74044a2">ast_audiohook_volume_set</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, 0);</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3aff14e582f66e9f971a9c447f30cb7dd7">MENU_ACTION_RESET_TALKING</a>:</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;         <a class="code" href="../../d0/d79/audiohook_8h.html#ae042519f3d210ea48604952be74044a2">ast_audiohook_volume_set</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, 0);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a5510199b24a774eb25fefc25713f036f">MENU_ACTION_INCREASE_LISTENING</a>:</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         <a class="code" href="../../d0/d79/audiohook_8h.html#acf8f4fc0dfd6a5f54e301ac66c5bc434">ast_audiohook_volume_adjust</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, 1);</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a7670668a4f2693b10f8e86eaf770e4b0">MENU_ACTION_DECREASE_LISTENING</a>:</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;         <a class="code" href="../../d0/d79/audiohook_8h.html#acf8f4fc0dfd6a5f54e301ac66c5bc434">ast_audiohook_volume_adjust</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, -1);</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a44304b8f5cfce8d8288e06d491c90280">MENU_ACTION_INCREASE_TALKING</a>:</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;         <a class="code" href="../../d0/d79/audiohook_8h.html#acf8f4fc0dfd6a5f54e301ac66c5bc434">ast_audiohook_volume_adjust</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, 1);</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3aa053ee1cae5f4356c5c1d2e45d96a623">MENU_ACTION_DECREASE_TALKING</a>:</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;         <a class="code" href="../../d0/d79/audiohook_8h.html#acf8f4fc0dfd6a5f54e301ac66c5bc434">ast_audiohook_volume_adjust</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, -1);</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a8eac53db053db219563cb2b6c80e1895">MENU_ACTION_PLAYBACK_AND_CONTINUE</a>:</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;         <span class="keywordflow">if</span> (!(stop_prompts)) {</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;            res |= <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a33eea3a20d4a3edfc5596d604fbdf80f">action_playback_and_continue</a>(conference,</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;               user,</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;               bridge_channel,</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;               menu,</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;               menu_action-&gt;<a class="code" href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">data</a>.<a class="code" href="../../d1/d6f/structconf__menu__action.html#ab35b6e8fcf1018b072b1fdf1c117686e">playback_file</a>,</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;               menu_entry-&gt;<a class="code" href="../../dd/d43/structconf__menu__entry.html#a33464dba524e69ccf4c908b486d8301e">dtmf</a>,</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;               &amp;stop_prompts);</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;         }</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a6ecf3d9a3881bfc58263b352372907a0">MENU_ACTION_DIALPLAN_EXEC</a>:</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;         res |= <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a25ff7bf4b3fd0c35b89409651aee3bca">action_dialplan_exec</a>(bridge_channel, menu_action);</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a9f65cbb864ab09658caa6adebf391e0a">MENU_ACTION_ADMIN_TOGGLE_LOCK</a>:</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;         <span class="keywordflow">if</span> (!isadmin) {</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;         }</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;         conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> = (!conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> ? 1 : 0);</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;         res |= <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;            <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a>(</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;               conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> ? <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a2ddaf9054cceb938e8d00e8e0363d845">CONF_SOUND_LOCKED_NOW</a> : <a class="code" href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1aba6e7263418ca6e10ed062e1660815ba">CONF_SOUND_UNLOCKED_NOW</a>,</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;               conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">sounds</a>)) &lt; 0;</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a22bff6e4031df4b71be0aecf5d852222">MENU_ACTION_ADMIN_KICK_LAST</a>:</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;         res |= <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab1ba20874bbec2f0ec79015b5c15bfcb">action_kick_last</a>(conference, bridge_channel, user);</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a36fd47c3d989917cc8da5a8f3515f777">MENU_ACTION_LEAVE</a>:</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;DTMF&quot;</span>);</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a66d6a521530f4fb208eb8ee33e257b6c">ast_bridge_remove</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_MENU_LEAVE&quot;</span>,</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;            <span class="stringliteral">&quot;Channel: %s&quot;</span>,</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3afb38173c1ab306d24ce52f5e0429baea">MENU_ACTION_NOOP</a>:</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a0aae69e975ba42c8009f9edae18cc5de">MENU_ACTION_SET_SINGLE_VIDEO_SRC</a>:</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa746f4569fd42c3e13fd27dd14887b394">BRIDGE_OPT_VIDEO_SRC_SFU</a>)) {</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            <a class="code" href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;         }</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a02a29bd757c2bb69039bd3a11aba361f">MENU_ACTION_RELEASE_SINGLE_VIDEO_SRC</a>:</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac338dd660e7509403a2f684b5abcde0b">handle_video_on_exit</a>(conference, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;      }</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;   }</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;}</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;</div><div class="line"><a name="l03214"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a91ddf65a979dd82086b523285d32b3e0"> 3214</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a91ddf65a979dd82086b523285d32b3e0">conf_handle_dtmf</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel,</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user,</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dd/d43/structconf__menu__entry.html">conf_menu_entry</a> *menu_entry,</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../dc/dd3/structconf__menu.html">conf_menu</a> *menu)</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;{</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   <span class="comment">/* See if music on hold is playing */</span></div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a984bb2336dcf6384a2e7ac427bc7c6b0">conf_moh_suspend</a>(user);</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;   <span class="comment">/* execute the list of actions associated with this menu entry */</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#add4efc724870cceaa73010102ab55a74">execute_menu_entry</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, user, bridge_channel, menu_entry, menu);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;   <span class="comment">/* See if music on hold needs to be started back up again */</span></div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2c7b3faff850c992fd562910b48b41db">conf_moh_unsuspend</a>(user);</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae36954c48e2b0691ef8cafbdb7f21011">async_play_sound_ready</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;}</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div><div class="line"><a name="l03233"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563"> 3233</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563">kick_conference_participant</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>,</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a>)</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;{</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;   <span class="keywordtype">int</span> all = !strcasecmp(<span class="stringliteral">&quot;all&quot;</span>, channel);</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;   <span class="keywordtype">int</span> participants = !strcasecmp(<span class="stringliteral">&quot;participants&quot;</span>, channel);</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(bridge_lock, conference);</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a>) {</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;      }</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      match = !strcasecmp(channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      <span class="keywordflow">if</span> (match || all</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            || (participants &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>))) {</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;         user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a> = 1;</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;KICKED&quot;</span>);</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a66d6a521530f4fb208eb8ee33e257b6c">ast_bridge_remove</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;         res = 0;</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;         <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;         }</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;      }</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;   }</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a>) {</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      }</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      match = !strcasecmp(channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <span class="keywordflow">if</span> (match || all</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            || (participants &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>))) {</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;         user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">kicked</a> = 1;</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;CONFBRIDGE_RESULT&quot;</span>, <span class="stringliteral">&quot;KICKED&quot;</span>);</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a66d6a521530f4fb208eb8ee33e257b6c">ast_bridge_remove</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;         res = 0;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;         <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;         }</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      }</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;   }</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;}</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;</div><div class="line"><a name="l03280"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb"> 3280</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *line, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;{</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;   <span class="keywordtype">char</span> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(word);</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(conference_bridges, 0);</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;   <span class="keywordflow">while</span> ((conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>, word, wordlen) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;         res = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>);</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      }</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;   }</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;}</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;</div><div class="line"><a name="l03302"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a9955a722c6e7a9e47a0b93356d0678fa"> 3302</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9955a722c6e7a9e47a0b93356d0678fa">complete_confbridge_participant</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name, <span class="keyword">const</span> <span class="keywordtype">char</span> *line, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;{</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *, <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;   <span class="keywordtype">char</span> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(word);</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;   <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>) {</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;   }</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(<span class="stringliteral">&quot;all&quot;</span>, word, wordlen) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;all&quot;</span>);</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;   }</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(<span class="stringliteral">&quot;participants&quot;</span>, word, wordlen) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;participants&quot;</span>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;   }</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;   {</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(bridge_lock, <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;         <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), word, wordlen) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;            res = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;         }</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      }</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;         <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), word, wordlen) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            res = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;         }</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;      }</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   }</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;}</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;</div><div class="line"><a name="l03342"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a697a03880a9da57a5a1aee8c4a7346b4"> 3342</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a697a03880a9da57a5a1aee8c4a7346b4">handle_cli_confbridge_kick</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;{</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;   <span class="keywordtype">int</span> not_found;</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge kick&quot;</span>;</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge kick &lt;conference&gt; &lt;channel&gt;\n&quot;</span></div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;         <span class="stringliteral">&quot;       Kicks a channel out of the conference bridge.\n&quot;</span></div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;         <span class="stringliteral">&quot;             (all to kick everyone, participants to kick non-admins).\n&quot;</span>;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;      }</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9955a722c6e7a9e47a0b93356d0678fa">complete_confbridge_participant</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;      }</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   }</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;   }</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No conference bridge named &#39;%s&#39; found!\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;   }</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;   not_found = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563">kick_conference_participant</a>(conference, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;   <span class="keywordflow">if</span> (not_found) {</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;all&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]) || !strcasecmp(<span class="stringliteral">&quot;participants&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3])) {</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No participants found!\n&quot;</span>);</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No participant named &#39;%s&#39; found!\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      }</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;   }</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Kicked &#39;%s&#39; out of conference &#39;%s&#39;\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;}</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div><div class="line"><a name="l03388"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af289d880969d8d4ed7854c42100ec449"> 3388</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af289d880969d8d4ed7854c42100ec449">handle_cli_confbridge_list_item</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user, <span class="keywordtype">int</span> waiting)</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;{</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;   <span class="keywordtype">char</span> flag_str[6 + 1];<span class="comment">/* Max flags + terminator */</span></div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;   <span class="keywordtype">int</span> pos = 0;</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   <span class="comment">/* Build flags column string. */</span></div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)) {</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      flag_str[pos++] = <span class="charliteral">&#39;A&#39;</span>;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;   }</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>)) {</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;      flag_str[pos++] = <span class="charliteral">&#39;M&#39;</span>;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;   }</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1">USER_OPT_WAITMARKED</a>)) {</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      flag_str[pos++] = <span class="charliteral">&#39;W&#39;</span>;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;   }</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0f2b712e6457a406ff913d99440fa300">USER_OPT_ENDMARKED</a>)) {</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      flag_str[pos++] = <span class="charliteral">&#39;E&#39;</span>;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   }</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>) {</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      flag_str[pos++] = <span class="charliteral">&#39;m&#39;</span>;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   }</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;   <span class="keywordflow">if</span> (waiting) {</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;      flag_str[pos++] = <span class="charliteral">&#39;w&#39;</span>;</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;   }</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;   flag_str[pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-30s %-6s %-16s %-16s %-16s %s\n&quot;</span>,</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      flag_str,</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>.<a class="code" href="../../de/df0/structuser__profile.html#af42582af82a949f4925915ac8775a768">name</a>,</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">name</a>,</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;      user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a633c85c514f23e2a9478666af23d3d62">menu_name</a>,</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>,</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>));</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;}</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;</div><div class="line"><a name="l03424"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#acc0a7a2e23bfdae78c04543276c9c4a0"> 3424</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#acc0a7a2e23bfdae78c04543276c9c4a0">handle_cli_confbridge_list</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;{</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge list&quot;</span>;</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge list [&lt;name&gt;]\n&quot;</span></div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;         <span class="stringliteral">&quot;       Lists all currently active conference bridges or a specific conference bridge.\n&quot;</span></div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;         <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;         <span class="stringliteral">&quot;       When a conference bridge name is provided, flags may be shown for users. Below\n&quot;</span></div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;         <span class="stringliteral">&quot;       are the flags and what they represent.\n&quot;</span></div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;         <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;         <span class="stringliteral">&quot;       Flags:\n&quot;</span></div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;         <span class="stringliteral">&quot;         A - The user is an admin\n&quot;</span></div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;         <span class="stringliteral">&quot;         M - The user is a marked user\n&quot;</span></div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;         <span class="stringliteral">&quot;         W - The user must wait for a marked user to join\n&quot;</span></div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;         <span class="stringliteral">&quot;         E - The user will be kicked after the last marked user leaves the conference\n&quot;</span></div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;         <span class="stringliteral">&quot;         m - The user is muted\n&quot;</span></div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;         <span class="stringliteral">&quot;         w - The user is waiting for a marked user to join\n&quot;</span>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      }</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;   }</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 2) {</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference Bridge Name           Users  Marked Locked Muted\n&quot;</span>);</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;================================ ====== ====== ====== =====\n&quot;</span>);</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;      iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(conference_bridges, 0);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;      <span class="keywordflow">while</span> ((conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-32s %6u %6u %-6s %s\n&quot;</span>,</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;            conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>,</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;            conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> + conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a88ad9a0b3a21ed23b18bc1abbf8eaeb3">waitingusers</a>,</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;            conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#abccd4b1475b8b192c029e77ff0ded0c3">markedusers</a>,</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>),</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>));</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      }</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;   }</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3) {</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;      conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No conference bridge named &#39;%s&#39; found!\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;      }</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Channel                        Flags  User Profile     Bridge Profile   Menu             CallerID\n&quot;</span>);</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;============================== ====== ================ ================ ================ ================\n&quot;</span>);</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af289d880969d8d4ed7854c42100ec449">handle_cli_confbridge_list_item</a>(a, user, 0);</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      }</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;         <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af289d880969d8d4ed7854c42100ec449">handle_cli_confbridge_list_item</a>(a, user, 1);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      }</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;   }</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;}</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;<span class="comment">/* \internal</span></div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;<span class="comment"> * \brief finds a conference by name and locks/unlocks.</span></div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;<span class="comment"> * \retval -1 conference not found</span></div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03503"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a17e4c08dd6b6ccf06678b422cd8fa179"> 3503</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a17e4c08dd6b6ccf06678b422cd8fa179">generic_lock_unlock_helper</a>(<span class="keywordtype">int</span> <a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name)</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;{</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   }</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONF_LOCK&quot;</span>, <span class="stringliteral">&quot;Message: conference %s\r\nConference: %s&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> ? <span class="stringliteral">&quot;locked&quot;</span> : <span class="stringliteral">&quot;unlocked&quot;</span>, conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">name</a>);</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;}</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;<span class="comment">/* \internal</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;<span class="comment"> * \brief finds a conference user by channel name and mutes/unmutes them.</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;<span class="comment"> * \retval 0 success</span></div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;<span class="comment"> * \retval -1 conference not found</span></div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;<span class="comment"> * \retval -2 user not found</span></div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03528"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ac567c84195db9be54dd509071c65d5e7"> 3528</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac567c84195db9be54dd509071c65d5e7">generic_mute_unmute_helper</a>(<span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name,</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chan_name)</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;{</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *, <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   <span class="keywordtype">int</span> all = !strcasecmp(<span class="stringliteral">&quot;all&quot;</span>, chan_name);</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;   <span class="keywordtype">int</span> participants = !strcasecmp(<span class="stringliteral">&quot;participants&quot;</span>, chan_name);</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;   <span class="keywordtype">int</span> res = -2;</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;   <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>) {</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   }</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;   {</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(bridge_lock, <a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>);</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = !strncasecmp(chan_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;            strlen(chan_name));</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;         <span class="keywordflow">if</span> (match || all</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;            || (participants &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>))) {</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abb3c7ba95c53c0a64298d852a96b37ee">generic_mute_unmute_user</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, user, mute);</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            res = 0;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;            <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;               <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;            }</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;         }</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      }</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = !strncasecmp(chan_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;            strlen(chan_name));</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;         <span class="keywordflow">if</span> (match || all</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;            || (participants &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>))) {</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;            <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abb3c7ba95c53c0a64298d852a96b37ee">generic_mute_unmute_user</a>(<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, user, mute);</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;            res = 0;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;            <span class="keywordflow">if</span> (match) {</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;               <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;            }</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;         }</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;      }</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;   }</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;}</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;</div><div class="line"><a name="l03574"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a445038d41045ab9d671e4f30aecd9e98"> 3574</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a445038d41045ab9d671e4f30aecd9e98">cli_mute_unmute_helper</a>(<span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;{</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac567c84195db9be54dd509071c65d5e7">generic_mute_unmute_helper</a>(mute, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;   <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No conference bridge named &#39;%s&#39; found!\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -2) {</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;all&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]) || !strcasecmp(<span class="stringliteral">&quot;participants&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3])) {</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No participants found in conference %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No channel named &#39;%s&#39; found in conference %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      }</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;   }</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s %s from confbridge %s\n&quot;</span>, mute ? <span class="stringliteral">&quot;Muting&quot;</span> : <span class="stringliteral">&quot;Unmuting&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;}</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;</div><div class="line"><a name="l03593"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a3044c6a96c8a5e1dabdf9c13836d39e2"> 3593</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a3044c6a96c8a5e1dabdf9c13836d39e2">handle_cli_confbridge_mute</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;{</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge mute&quot;</span>;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge mute &lt;conference&gt; &lt;channel&gt;\n&quot;</span></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;         <span class="stringliteral">&quot;       Mute a channel in a conference.\n&quot;</span></div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;         <span class="stringliteral">&quot;              (all to mute everyone, participants to mute non-admins)\n&quot;</span></div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;         <span class="stringliteral">&quot;       If the specified channel is a prefix,\n&quot;</span></div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;         <span class="stringliteral">&quot;       the action will be taken on the first\n&quot;</span></div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;         <span class="stringliteral">&quot;       matching channel.\n&quot;</span>;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      }</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9955a722c6e7a9e47a0b93356d0678fa">complete_confbridge_participant</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;      }</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;   }</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;   }</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a445038d41045ab9d671e4f30aecd9e98">cli_mute_unmute_helper</a>(1, a);</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;}</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;</div><div class="line"><a name="l03624"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af4d6efe9e306e2947984d854d9282a27"> 3624</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#af4d6efe9e306e2947984d854d9282a27">handle_cli_confbridge_unmute</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;{</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge unmute&quot;</span>;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge unmute &lt;conference&gt; &lt;channel&gt;\n&quot;</span></div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;         <span class="stringliteral">&quot;       Unmute a channel in a conference.\n&quot;</span></div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;         <span class="stringliteral">&quot;              (all to unmute everyone, participants to unmute non-admins)\n&quot;</span></div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;         <span class="stringliteral">&quot;       If the specified channel is a prefix,\n&quot;</span></div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;         <span class="stringliteral">&quot;       the action will be taken on the first\n&quot;</span></div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;         <span class="stringliteral">&quot;       matching channel.\n&quot;</span>;</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      }</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9955a722c6e7a9e47a0b93356d0678fa">complete_confbridge_participant</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      }</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;   }</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   }</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a445038d41045ab9d671e4f30aecd9e98">cli_mute_unmute_helper</a>(0, a);</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;}</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div><div class="line"><a name="l03655"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a5547a93d1e1ae584acf3e78846da655f"> 3655</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5547a93d1e1ae584acf3e78846da655f">handle_cli_confbridge_lock</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;{</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge lock&quot;</span>;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge lock &lt;conference&gt;\n&quot;</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;         <span class="stringliteral">&quot;       Lock a conference. While locked, no new non-admins\n&quot;</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;         <span class="stringliteral">&quot;       may join the conference.\n&quot;</span>;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      }</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;   }</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;   }</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a17e4c08dd6b6ccf06678b422cd8fa179">generic_lock_unlock_helper</a>(1, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2])) {</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference %s is not found\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference %s is locked.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;   }</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;}</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;</div><div class="line"><a name="l03682"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ac3d7810910ab9457229c806c1abb9239"> 3682</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac3d7810910ab9457229c806c1abb9239">handle_cli_confbridge_unlock</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;{</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge unlock&quot;</span>;</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge unlock &lt;conference&gt;\n&quot;</span></div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;         <span class="stringliteral">&quot;       Unlock a previously locked conference.\n&quot;</span>;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      }</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   }</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;   }</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a17e4c08dd6b6ccf06678b422cd8fa179">generic_lock_unlock_helper</a>(0, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2])) {</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference %s is not found\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference %s is unlocked.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;   }</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;}</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;</div><div class="line"><a name="l03708"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#abcb618a46918c12d499b7eb8d73badf1"> 3708</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#abcb618a46918c12d499b7eb8d73badf1">handle_cli_confbridge_start_record</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;{</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *rec_file = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge record start&quot;</span>;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge record start &lt;conference&gt; &lt;file&gt;\n&quot;</span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;         <span class="stringliteral">&quot;       &lt;file&gt; is optional, Otherwise the bridge profile\n&quot;</span></div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;         <span class="stringliteral">&quot;       record file will be used.  If the bridge profile\n&quot;</span></div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;         <span class="stringliteral">&quot;       has no record file specified, a file will automatically\n&quot;</span></div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;         <span class="stringliteral">&quot;       be generated in the monitor directory\n&quot;</span>;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;      }</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;   }</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4) {</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;   }</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) {</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;      rec_file = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4];</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;   }</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference not found.\n&quot;</span>);</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;   }</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">conf_is_recording</a>(conference)) {</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference is already being recorded.\n&quot;</span>);</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;   }</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(rec_file)) {</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">rec_file</a>, rec_file, <span class="keyword">sizeof</span>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">rec_file</a>));</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;   }</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a86bcab7d021c72030f52bace16f95367">conf_start_record</a>(conference)) {</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not start recording due to internal error.\n&quot;</span>);</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;   }</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Recording started\n&quot;</span>);</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;}</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;</div><div class="line"><a name="l03765"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a96d17a4cf61c4ba43467b8848bcf08d8"> 3765</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a96d17a4cf61c4ba43467b8848bcf08d8">handle_cli_confbridge_stop_record</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;{</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;confbridge record stop&quot;</span>;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;         <span class="stringliteral">&quot;Usage: confbridge record stop &lt;conference&gt;\n&quot;</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;         <span class="stringliteral">&quot;       Stop a previously started recording.\n&quot;</span>;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;      }</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;   }</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;   }</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Conference not found.\n&quot;</span>);</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;   }</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;   ret = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5a0cac7b97323a1e6ccc774502693185">conf_stop_record</a>(conference);</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Recording %sstopped.\n&quot;</span>, ret ? <span class="stringliteral">&quot;could not be &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;}</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;</div><div class="line"><a name="l03800"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#af2ab4740529a4cdb9bfffec435fdb8fa"> 3800</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#af2ab4740529a4cdb9bfffec435fdb8fa">cli_confbridge</a>[] = {</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#acc0a7a2e23bfdae78c04543276c9c4a0">handle_cli_confbridge_list</a>, <span class="stringliteral">&quot;List conference bridges and participants.&quot;</span>),</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a697a03880a9da57a5a1aee8c4a7346b4">handle_cli_confbridge_kick</a>, <span class="stringliteral">&quot;Kick participants out of conference bridges.&quot;</span>),</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a3044c6a96c8a5e1dabdf9c13836d39e2">handle_cli_confbridge_mute</a>, <span class="stringliteral">&quot;Mute participants.&quot;</span>),</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#af4d6efe9e306e2947984d854d9282a27">handle_cli_confbridge_unmute</a>, <span class="stringliteral">&quot;Unmute participants.&quot;</span>),</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5547a93d1e1ae584acf3e78846da655f">handle_cli_confbridge_lock</a>, <span class="stringliteral">&quot;Lock a conference.&quot;</span>),</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac3d7810910ab9457229c806c1abb9239">handle_cli_confbridge_unlock</a>, <span class="stringliteral">&quot;Unlock a conference.&quot;</span>),</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#abcb618a46918c12d499b7eb8d73badf1">handle_cli_confbridge_start_record</a>, <span class="stringliteral">&quot;Start recording a conference&quot;</span>),</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a96d17a4cf61c4ba43467b8848bcf08d8">handle_cli_confbridge_stop_record</a>, <span class="stringliteral">&quot;Stop recording a conference.&quot;</span>),</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;};</div><div class="line"><a name="l03810"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a41b39e78c1d90a965f27a0ff96e52387"> 3810</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a41b39e78c1d90a965f27a0ff96e52387">confbridge_function</a> = {</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;   .<a class="code" href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <span class="stringliteral">&quot;CONFBRIDGE&quot;</span>,</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;   .write = <a class="code" href="../../dc/d40/conf__config__parser_8c.html#a00ed53ef698c568e371352917a715f13">func_confbridge_helper</a>,</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;};</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a50d6cad5ed8ba839b8fdb909d04ed108">func_confbridge_info</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd, <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l03816"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a73b51e242f08d672eda12536d21e0cbb"> 3816</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a73b51e242f08d672eda12536d21e0cbb">confbridge_info_function</a> = {</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;   .<a class="code" href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <span class="stringliteral">&quot;CONFBRIDGE_INFO&quot;</span>,</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;   .read = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a50d6cad5ed8ba839b8fdb909d04ed108">func_confbridge_info</a>,</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;};</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;</div><div class="line"><a name="l03821"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#adeb2f558f89eeeeafd32585989a3426e"> 3821</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#adeb2f558f89eeeeafd32585989a3426e">action_confbridgelist_item</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *id_text, <span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user, <span class="keywordtype">int</span> waiting)</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;{</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *snap_str;</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;   }</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;   snap_str = <a class="code" href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a>(snapshot);</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   <span class="keywordflow">if</span> (!snap_str) {</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   }</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      <span class="stringliteral">&quot;Event: ConfbridgeList\r\n&quot;</span></div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;      <span class="stringliteral">&quot;Admin: %s\r\n&quot;</span></div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;      <span class="stringliteral">&quot;MarkedUser: %s\r\n&quot;</span></div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;      <span class="stringliteral">&quot;WaitMarked: %s\r\n&quot;</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;      <span class="stringliteral">&quot;EndMarked: %s\r\n&quot;</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;      <span class="stringliteral">&quot;Waiting: %s\r\n&quot;</span></div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;      <span class="stringliteral">&quot;Muted: %s\r\n&quot;</span></div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      <span class="stringliteral">&quot;Talking: %s\r\n&quot;</span></div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      <span class="stringliteral">&quot;AnsweredTime: %d\r\n&quot;</span></div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      id_text,</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>,</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)),</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>)),</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1">USER_OPT_WAITMARKED</a>)),</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0f2b712e6457a406ff913d99440fa300">USER_OPT_ENDMARKED</a>)),</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(waiting),</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>),</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a08a0f0056a7313fd8cf481f5f8ee327a">talking</a>),</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abf858a4aac3ad8e1f87236611fce8db6">ast_channel_get_up_time</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(snap_str));</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(snap_str);</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;}</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;</div><div class="line"><a name="l03869"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a612ddc10b8547bbd5e419e2fd7448c2e"> 3869</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a612ddc10b8547bbd5e419e2fd7448c2e">action_confbridgelist</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;{</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;   <span class="keywordtype">char</span> id_text[80];</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a> = 0;</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;   id_text[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)) {</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;      snprintf(id_text, <span class="keyword">sizeof</span>(id_text), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;   }</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;   }</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;   }</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;   }</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Confbridge user list will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list) {</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;      total += <a class="code" href="../../d0/dcf/app__confbridge_8c.html#adeb2f558f89eeeeafd32585989a3426e">action_confbridgelist_item</a>(s, id_text, conference, user, 0);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;   }</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, list) {</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;      total += <a class="code" href="../../d0/dcf/app__confbridge_8c.html#adeb2f558f89eeeeafd32585989a3426e">action_confbridgelist_item</a>(s, id_text, conference, user, 1);</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;   }</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a>(s, m, <span class="stringliteral">&quot;ConfbridgeListComplete&quot;</span>, total);</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a>(s);</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;}</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;</div><div class="line"><a name="l03914"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab86b0f7c9a6f9961c9e574216dd2fd6c"> 3914</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab86b0f7c9a6f9961c9e574216dd2fd6c">action_confbridgelistrooms</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;{</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;   <span class="keywordtype">char</span> id_text[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;   <span class="keywordtype">int</span> totalitems = 0;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)) {</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      snprintf(id_text, <span class="keyword">sizeof</span>(id_text), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;   }</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;   }</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Confbridge conferences will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;   <span class="comment">/* Traverse the conference list */</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(conference_bridges, 0);</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;   <span class="keywordflow">while</span> ((conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      totalitems++;</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      <span class="stringliteral">&quot;Event: ConfbridgeListRooms\r\n&quot;</span></div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;      <span class="stringliteral">&quot;Parties: %u\r\n&quot;</span></div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      <span class="stringliteral">&quot;Marked: %u\r\n&quot;</span></div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;      <span class="stringliteral">&quot;Locked: %s\r\n&quot;</span></div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      <span class="stringliteral">&quot;Muted: %s\r\n&quot;</span></div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      id_text,</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">name</a>,</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a> + conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a88ad9a0b3a21ed23b18bc1abbf8eaeb3">waitingusers</a>,</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#abccd4b1475b8b192c029e77ff0ded0c3">markedusers</a>,</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>),</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>));</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;   }</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;   <span class="comment">/* Send final confirmation */</span></div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a>(s, m, <span class="stringliteral">&quot;ConfbridgeListRoomsComplete&quot;</span>, totalitems);</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a>(s);</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;}</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div><div class="line"><a name="l03966"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a9dec1062bd1f96b38031c28fdbb1731c"> 3966</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9dec1062bd1f96b38031c28fdbb1731c">action_mute_unmute_helper</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m, <span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>)</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;{</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channel_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;   }</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channel_name)) {</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel name provided.&quot;</span>);</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;   }</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;   }</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;   res = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac567c84195db9be54dd509071c65d5e7">generic_mute_unmute_helper</a>(mute, conference_name, channel_name);</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;   <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -2) {</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Channel by that name found in Conference.&quot;</span>);</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;   }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, mute ? <span class="stringliteral">&quot;User muted&quot;</span> : <span class="stringliteral">&quot;User unmuted&quot;</span>);</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;}</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;</div><div class="line"><a name="l03999"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a39af08057e60029a0402c0310688de68"> 3999</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a39af08057e60029a0402c0310688de68">action_confbridgeunmute</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;{</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9dec1062bd1f96b38031c28fdbb1731c">action_mute_unmute_helper</a>(s, m, 0);</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;}</div><div class="line"><a name="l04003"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a046f14d3fea7a6a0bd14e8937f667d16"> 4003</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a046f14d3fea7a6a0bd14e8937f667d16">action_confbridgemute</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;{</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a9dec1062bd1f96b38031c28fdbb1731c">action_mute_unmute_helper</a>(s, m, 1);</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;}</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;</div><div class="line"><a name="l04008"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab48652fefbb21d29ec00098cd9d1c375"> 4008</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab48652fefbb21d29ec00098cd9d1c375">action_lock_unlock_helper</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m, <span class="keywordtype">int</span> <a class="code" href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>)</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;{</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;   }</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;   }</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a17e4c08dd6b6ccf06678b422cd8fa179">generic_lock_unlock_helper</a>(lock, conference_name))) {</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;   }</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, lock ? <span class="stringliteral">&quot;Conference locked&quot;</span> : <span class="stringliteral">&quot;Conference unlocked&quot;</span>);</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;}</div><div class="line"><a name="l04028"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a18b8fe668f1f8c9bc8f9ef7b78701425"> 4028</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a18b8fe668f1f8c9bc8f9ef7b78701425">action_confbridgeunlock</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;{</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab48652fefbb21d29ec00098cd9d1c375">action_lock_unlock_helper</a>(s, m, 0);</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;}</div><div class="line"><a name="l04032"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ad3a4e20fa303b1699bc4b105398af0f0"> 4032</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3a4e20fa303b1699bc4b105398af0f0">action_confbridgelock</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;{</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab48652fefbb21d29ec00098cd9d1c375">action_lock_unlock_helper</a>(s, m, 1);</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;}</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;</div><div class="line"><a name="l04037"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a255eb584faf47478ffe30eb07c2de2e7"> 4037</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a255eb584faf47478ffe30eb07c2de2e7">action_confbridgekick</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;{</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;   <span class="keywordtype">int</span> found;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;   }</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;   }</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;   }</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;   found = !<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563">kick_conference_participant</a>(conference, channel);</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;   <span class="keywordflow">if</span> (found) {</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, !strcmp(<span class="stringliteral">&quot;all&quot;</span>, channel) ? <span class="stringliteral">&quot;All participants kicked&quot;</span> : <span class="stringliteral">&quot;User kicked&quot;</span>);</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Channel by that name found in Conference.&quot;</span>);</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;   }</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;}</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;</div><div class="line"><a name="l04070"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ab40d13fd51fb2be7d69a014554793536"> 4070</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab40d13fd51fb2be7d69a014554793536">action_confbridgestartrecord</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;{</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *recordfile = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;RecordFile&quot;</span>);</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;   }</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;   }</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;   }</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">conf_is_recording</a>(conference)) {</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Conference is already being recorded.&quot;</span>);</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;   }</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(recordfile)) {</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">rec_file</a>, recordfile, <span class="keyword">sizeof</span>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">b_profile</a>.<a class="code" href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">rec_file</a>));</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;   }</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a86bcab7d021c72030f52bace16f95367">conf_start_record</a>(conference)) {</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Internal error starting conference recording.&quot;</span>);</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;   }</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Conference Recording Started.&quot;</span>);</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;}</div><div class="line"><a name="l04115"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a3e82c60adbdb6e6b7980d95651fbf7f0"> 4115</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a3e82c60adbdb6e6b7980d95651fbf7f0">action_confbridgestoprecord</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;{</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;   }</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;   }</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;   }</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a5a0cac7b97323a1e6ccc774502693185">conf_stop_record</a>(conference)) {</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Internal error while stopping recording.&quot;</span>);</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;   }</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Conference Recording Stopped.&quot;</span>);</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;}</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;</div><div class="line"><a name="l04149"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a2f32475ecb143255c3dc78e6de2decf1"> 4149</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2f32475ecb143255c3dc78e6de2decf1">action_confbridgesetsinglevideosrc</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;{</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_name = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference_name)) {</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference name provided.&quot;</span>);</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;   }</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channel)) {</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel name provided.&quot;</span>);</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;   }</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(conference_bridges)) {</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;   }</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, conference_name, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No Conference by that name found.&quot;</span>);</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;   }</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;   <span class="comment">/* find channel and set as video src. */</span></div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list) {</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;      <span class="keywordflow">if</span> (!strncmp(channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), strlen(channel))) {</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a>(conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;      }</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;   }</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;   <span class="comment">/* do not access user after conference unlock.  We are just</span></div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;<span class="comment">    * using this check to see if it was found or not */</span></div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;   <span class="keywordflow">if</span> (!user) {</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel by that name found in conference.&quot;</span>);</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;   }</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Conference single video source set.&quot;</span>);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;}</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;</div><div class="line"><a name="l04196"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a50d6cad5ed8ba839b8fdb909d04ed108"> 4196</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a50d6cad5ed8ba839b8fdb909d04ed108">func_confbridge_info</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd, <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> len)</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;{</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(confno);</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;   );</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;   <span class="comment">/* parse all the required arguments and make sure they exist. */</span></div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;   }</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confno) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type)) {</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;   }</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confno, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      snprintf(buf, len, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;   }</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;   <span class="comment">/* get the correct count for the type requested */</span></div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conference);</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type, <span class="stringliteral">&quot;parties&quot;</span>)) {</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;         count++;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;      }</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;         count++;</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;      }</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type, <span class="stringliteral">&quot;admins&quot;</span>)) {</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a>)) {</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;            count++;</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;         }</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;      }</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type, <span class="stringliteral">&quot;marked&quot;</span>)) {</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>) {</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a>)) {</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;            count++;</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;         }</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      }</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type, <span class="stringliteral">&quot;locked&quot;</span>)) {</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;      count = conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type, <span class="stringliteral">&quot;muted&quot;</span>)) {</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;      count = conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">muted</a>;</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid keyword &#39;%s&#39; passed to CONFBRIDGE_INFO.\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.type);</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;   }</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;   snprintf(buf, len, <span class="stringliteral">&quot;%d&quot;</span>, count);</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conference);</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;}</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;</div><div class="line"><a name="l04256"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#afa948535b40059c3ea4068adeab0e815"> 4256</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#afa948535b40059c3ea4068adeab0e815">confkick_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;{</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;   <span class="keywordtype">int</span> not_found;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(confbridge);</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d84/structchannel.html">channel</a>);</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;   );</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No conference bridge specified.\n&quot;</span>);</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFKICKSTATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;   }</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;   conference = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conference_bridges, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confbridge, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;   <span class="keywordflow">if</span> (!conference) {</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No conference bridge named &#39;%s&#39; found!\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confbridge);</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFKICKSTATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;   }</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel)) {</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;      not_found = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563">kick_conference_participant</a>(conference, <span class="stringliteral">&quot;all&quot;</span>);</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;      not_found = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563">kick_conference_participant</a>(conference, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel);</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;   }</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conference, -1);</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;   <span class="keywordflow">if</span> (not_found) {</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel) || !strcasecmp(<span class="stringliteral">&quot;all&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel) || !strcasecmp(<span class="stringliteral">&quot;participants&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel)) {</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No participants found in conference bridge &#39;%s&#39;!\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confbridge);</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No participant named &#39;%s&#39; found in conference bridge &#39;%s&#39;!\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confbridge);</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      }</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFKICKSTATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;   }</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Kicked &#39;%s&#39; out of conference &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.confbridge);</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CONFKICKSTATUS&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;}</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;</div><div class="line"><a name="l04303"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a1d4773bb21afb542f4eec9f715b24e71"> 4303</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d4773bb21afb542f4eec9f715b24e71">conf_add_user_active</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;{</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list);</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a>++;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;}</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;</div><div class="line"><a name="l04309"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a419bded32f3b4eb08047e082b4b86399"> 4309</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a419bded32f3b4eb08047e082b4b86399">conf_add_user_marked</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;{</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list);</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a>++;</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#abccd4b1475b8b192c029e77ff0ded0c3">markedusers</a>++;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;}</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;</div><div class="line"><a name="l04316"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a54a894c2cece2bca0aad149141198b27"> 4316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a54a894c2cece2bca0aad149141198b27">conf_add_user_waiting</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;{</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, list);</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a88ad9a0b3a21ed23b18bc1abbf8eaeb3">waitingusers</a>++;</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;}</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;</div><div class="line"><a name="l04322"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#ae20ee9274a57552d2320c2081eb80dff"> 4322</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ae20ee9274a57552d2320c2081eb80dff">conf_remove_user_active</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;{</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list);</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a>--;</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;}</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;</div><div class="line"><a name="l04328"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a894ae02861f33862f9f9a4f10ee33fe6"> 4328</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a894ae02861f33862f9f9a4f10ee33fe6">conf_remove_user_marked</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;{</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>, user, list);</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">activeusers</a>--;</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#abccd4b1475b8b192c029e77ff0ded0c3">markedusers</a>--;</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;}</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;</div><div class="line"><a name="l04335"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#ab9cdfaedd74dd0f7b09a0038e15e93a2"> 4335</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab9cdfaedd74dd0f7b09a0038e15e93a2">conf_mute_only_active</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>)</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;{</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *only_user = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">active_list</a>);</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;   <span class="comment">/* Turn on MOH if the single participant is set up for it */</span></div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;only_user-&gt;<a class="code" href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">u_profile</a>, <a class="code" href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a92f6fdccdb7fe0169c435a2dfb85c772">USER_OPT_MUSICONHOLD</a>)) {</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#abff61e66b7a63e3a68ff1ae51092a804">conf_moh_start</a>(only_user);</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;   }</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#aa8fb5653de084dfe2470d12f75839a51">conf_update_user_mute</a>(only_user);</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;}</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;</div><div class="line"><a name="l04346"></a><span class="lineno"><a class="line" href="../../d4/de3/confbridge_8h.html#a62877f765c856091be3e1f75fa392129"> 4346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a62877f765c856091be3e1f75fa392129">conf_remove_user_waiting</a>(<span class="keyword">struct</span> <a class="code" href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a> *<a class="code" href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">conference</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a> *user)</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;{</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">waiting_list</a>, user, <a class="code" href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">list</a>);</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;   conference-&gt;<a class="code" href="../../da/df3/structconfbridge__conference.html#a88ad9a0b3a21ed23b18bc1abbf8eaeb3">waitingusers</a>--;</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;}</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;<span class="comment"> * \brief Unregister a ConfBridge channel technology.</span></div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;<span class="comment"> * \param tech What to unregister.</span></div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04361"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a2be372e2111b0c7f12ff8f8b1c40336f"> 4361</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2be372e2111b0c7f12ff8f8b1c40336f">unregister_channel_tech</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *tech)</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;{</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(tech);</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>);</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;}</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;<span class="comment"> * \brief Register a ConfBridge channel technology.</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;<span class="comment"> * \param tech What to register.</span></div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;<span class="comment"> * \retval 0 on success.</span></div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;<span class="comment"> * \retval -1 on error.</span></div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04377"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a2b054d79fc23571e37fe2312769895d1"> 4377</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2b054d79fc23571e37fe2312769895d1">register_channel_tech</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *tech)</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;{</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;   tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;   <span class="keywordflow">if</span> (!tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>) {</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;   }</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a>(tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(tech)) {</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register channel technology %s(%s).\n&quot;</span>,</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;         tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>, tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#ac57ec035c076b222b9420a68ddab3bf1">description</a>);</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;   }</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;}</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;<span class="comment">/*! \brief Called when module is being unloaded */</span></div><div class="line"><a name="l04393"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae"> 4393</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;{</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>);</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a6cffecf2a021a06d24eaf268c3ef2895">app2</a>);</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;confbridge_function);</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;confbridge_info_function);</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(cli_confbridge, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_confbridge));</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeList&quot;</span>);</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeListRooms&quot;</span>);</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeMute&quot;</span>);</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeUnmute&quot;</span>);</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeKick&quot;</span>);</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeUnlock&quot;</span>);</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeLock&quot;</span>);</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeStartRecord&quot;</span>);</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeStopRecord&quot;</span>);</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ConfbridgeSetSingleVideoSrc&quot;</span>);</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;   <span class="comment">/* Unsubscribe from stasis confbridge message type and clean it up. */</span></div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;   <a class="code" href="../../dd/d92/confbridge__manager_8c.html#a5828604897d724f97df62e8e7480dcc5">manager_confbridge_shutdown</a>();</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;   <span class="comment">/* Get rid of the conference bridges container. Since we only allow dynamic ones none will be active. */</span></div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(conference_bridges);</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;   conference_bridges = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;   <a class="code" href="../../dc/d40/conf__config__parser_8c.html#ad2996174a9ef467fd418bfc4045d67bf">conf_destroy_config</a>();</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2be372e2111b0c7f12ff8f8b1c40336f">unregister_channel_tech</a>(<a class="code" href="../../d8/d4f/conf__chan__announce_8c.html#a05ce8036bf22aed79b497b16f066cdf3">conf_announce_get_tech</a>());</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;   <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2be372e2111b0c7f12ff8f8b1c40336f">unregister_channel_tech</a>(<a class="code" href="../../d9/d44/conf__chan__record_8c.html#a7a71b18c21b40127438b56da9f31f488">conf_record_get_tech</a>());</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;}</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;<span class="comment"> * \brief Load the module</span></div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;<span class="comment"> * Module loading including tests for configuration or dependencies.</span></div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;<span class="comment"> * This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE,</span></div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;<span class="comment"> * or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails</span></div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;<span class="comment"> * tests return AST_MODULE_LOAD_FAILURE. If the module can not load the</span></div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;<span class="comment"> * configuration file or other non-critical problem return</span></div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;<span class="comment"> * AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS.</span></div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04439"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9"> 4439</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;{</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d40/conf__config__parser_8c.html#a96dbc941d6d5258b32e5e53adfc43666">conf_load_config</a>()) {</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to load config. Not loading module.\n&quot;</span>);</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;   }</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2b054d79fc23571e37fe2312769895d1">register_channel_tech</a>(<a class="code" href="../../d9/d44/conf__chan__record_8c.html#a7a71b18c21b40127438b56da9f31f488">conf_record_get_tech</a>())</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;      || <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2b054d79fc23571e37fe2312769895d1">register_channel_tech</a>(<a class="code" href="../../d8/d4f/conf__chan__announce_8c.html#a05ce8036bf22aed79b497b16f066cdf3">conf_announce_get_tech</a>())) {</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;   }</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;   <span class="comment">/* Create a container to hold the conference bridges */</span></div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;   conference_bridges = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a52a0e4c83c7ff4b0e7b1a4ec096d3419">CONFERENCE_BRIDGE_BUCKETS</a>,</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab70a2ae9f2778c6c5a61328abe7acb90">conference_bridge_hash_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a725ab63b13835417e5f9704a024a74dc">conference_bridge_cmp_cb</a>);</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;   <span class="keywordflow">if</span> (!conference_bridges) {</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;   }</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;   <span class="comment">/* Setup manager stasis subscriptions */</span></div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;   res |= <a class="code" href="../../dd/d92/confbridge__manager_8c.html#a1f16d97dc10f41bbc9ca29a19c66d46a">manager_confbridge_init</a>();</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a84e1ce360c4036881f7079eb067e3f29">confbridge_exec</a>);</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../d0/dcf/app__confbridge_8c.html#a6cffecf2a021a06d24eaf268c3ef2895">app2</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#afa948535b40059c3ea4068adeab0e815">confkick_exec</a>);</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a82a6116c57689246592c0707b8eec102">ast_custom_function_register_escalating</a>(&amp;confbridge_function, <a class="code" href="../../db/de0/pbx_8h.html#ae44f095e3bb053c0d3f8d6b963df4a25a6afc0bfde80d0417ea42250f2ce6e311">AST_CFE_WRITE</a>);</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;confbridge_info_function);</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;   res |= <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(cli_confbridge, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_confbridge));</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeList&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a612ddc10b8547bbd5e419e2fd7448c2e">action_confbridgelist</a>);</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeListRooms&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab86b0f7c9a6f9961c9e574216dd2fd6c">action_confbridgelistrooms</a>);</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeMute&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a046f14d3fea7a6a0bd14e8937f667d16">action_confbridgemute</a>);</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeUnmute&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a39af08057e60029a0402c0310688de68">action_confbridgeunmute</a>);</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeKick&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a255eb584faf47478ffe30eb07c2de2e7">action_confbridgekick</a>);</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeUnlock&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a18b8fe668f1f8c9bc8f9ef7b78701425">action_confbridgeunlock</a>);</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeLock&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad3a4e20fa303b1699bc4b105398af0f0">action_confbridgelock</a>);</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeStartRecord&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ab40d13fd51fb2be7d69a014554793536">action_confbridgestartrecord</a>);</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeStopRecord&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a3e82c60adbdb6e6b7980d95651fbf7f0">action_confbridgestoprecord</a>);</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ConfbridgeSetSingleVideoSrc&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d0/dcf/app__confbridge_8c.html#a2f32475ecb143255c3dc78e6de2decf1">action_confbridgesetsinglevideosrc</a>);</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;      <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;   }</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;}</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;</div><div class="line"><a name="l04492"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#ad1982509765f4870f1f63412a53ea668"> 4492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;{</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d40/conf__config__parser_8c.html#a25950d518afe66f772dad6891a93b991">conf_reload_config</a>();</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;}</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;<a class="code" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO</a>(<a class="code" href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a>, <a class="code" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a>, <span class="stringliteral">&quot;Conference Bridge Application&quot;</span>,</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;   .support_level = <a class="code" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>,</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;   .load = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>,</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;   .unload = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>,</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;   .<a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="code" href="../../d0/dcf/app__confbridge_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>,</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;   .load_pri = <a class="code" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58af2d6c20d90a068171cc852484a435980">AST_MODPRI_DEVSTATE_PROVIDER</a>,</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;   .optional_modules = <span class="stringliteral">&quot;codec_speex,func_jitterbuffer&quot;</span>,</div><div class="line"><a name="l04504"></a><span class="lineno"><a class="line" href="../../d0/dcf/app__confbridge_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae"> 4504</a></span>&#160;);</div><div class="ttc" id="res__config__ldap_8c_html_a930c15eddfe0826ff30e658c9d50b9b4"><div class="ttname"><a href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a></div><div class="ttdeci">static char user[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d12/res__config__ldap_8c_source.html#l00075">res_config_ldap.c:75</a></div></div>
<div class="ttc" id="confbridge_8h_html_a25afb0209de2b9f190e445bf29fcf739"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a25afb0209de2b9f190e445bf29fcf739">confbridge_start_record_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_start_record_type(void)</div><div class="ttdoc">get the confbridge start_record stasis message type </div></div>
<div class="ttc" id="structast__custom__function_html_afcd1706c9144e6d6eee6127661ae3be2"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">ast_custom_function::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00119">pbx.h:119</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffaf5ef2009c96309b8dbaabd5796c589d8"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffaf5ef2009c96309b8dbaabd5796c589d8">BRIDGE_OPT_REMB_BEHAVIOR_AVERAGE_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00088">confbridge.h:88</a></div></div>
<div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__datastore__info_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_datastore_info::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00032">datastore.h:32</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a2c7b3faff850c992fd562910b48b41db"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a2c7b3faff850c992fd562910b48b41db">conf_moh_unsuspend</a></div><div class="ttdeci">static void conf_moh_unsuspend(struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01395">app_confbridge.c:1395</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a894ae02861f33862f9f9a4f10ee33fe6"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a894ae02861f33862f9f9a4f10ee33fe6">conf_remove_user_marked</a></div><div class="ttdeci">void conf_remove_user_marked(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdoc">Remove a conference bridge user from the marked active conference users in the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04328">app_confbridge.c:4328</a></div></div>
<div class="ttc" id="audiohook_8h_html_ae042519f3d210ea48604952be74044a2"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#ae042519f3d210ea48604952be74044a2">ast_audiohook_volume_set</a></div><div class="ttdeci">int ast_audiohook_volume_set(struct ast_channel *chan, enum ast_audiohook_direction direction, int volume)</div><div class="ttdoc">Adjust the volume on frames read from or written to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01346">audiohook.c:1346</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a533c996c6daaa40c11c31667e097bca1"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a533c996c6daaa40c11c31667e097bca1">bridge_profile_sounds::unlockednow</a></div><div class="ttdeci">const ast_string_field unlockednow</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structconf__menu__action_html"><div class="ttname"><a href="../../d1/d6f/structconf__menu__action.html">conf_menu_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00120">confbridge.h:120</a></div></div>
<div class="ttc" id="bridge_8h_html_a34a177a8cf79f8158638ebf6ae05ac1c"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a34a177a8cf79f8158638ebf6ae05ac1c">ast_bridge_set_sfu_video_mode</a></div><div class="ttdeci">void ast_bridge_set_sfu_video_mode(struct ast_bridge *bridge)</div><div class="ttdoc">Set the bridge to be a selective forwarding unit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03841">bridge.c:3841</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_a7870f447ef3c43ebf148da15363b25dd"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#a7870f447ef3c43ebf148da15363b25dd">ast_channel_snapshot_dialplan::data</a></div><div class="ttdeci">const ast_string_field data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a1d4773bb21afb542f4eec9f715b24e71"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a1d4773bb21afb542f4eec9f715b24e71">conf_add_user_active</a></div><div class="ttdeci">void conf_add_user_active(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdoc">Add a conference bridge user as an unmarked active user of the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04303">app_confbridge.c:4303</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a5510199b24a774eb25fefc25713f036f"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a5510199b24a774eb25fefc25713f036f">MENU_ACTION_INCREASE_LISTENING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00098">confbridge.h:98</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_af177255dbc4e3fc2314a24e24324f542"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#af177255dbc4e3fc2314a24e24324f542">bridge_profile_sounds::thereare</a></div><div class="ttdeci">const ast_string_field thereare</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structast__pbx__args_html"><div class="ttname"><a href="../../da/db8/structast__pbx__args.html">ast_pbx_args</a></div><div class="ttdoc">Options for ast_pbx_run() </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00391">pbx.h:391</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a255eb584faf47478ffe30eb07c2de2e7"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a255eb584faf47478ffe30eb07c2de2e7">action_confbridgekick</a></div><div class="ttdeci">static int action_confbridgekick(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04037">app_confbridge.c:4037</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a8841a2fd54bcd985957984b6392d04a6"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a8841a2fd54bcd985957984b6392d04a6">send_leave_event</a></div><div class="ttdeci">static void send_leave_event(struct confbridge_user *user, struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00683">app_confbridge.c:683</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a07a04718f40d6d81a50f1ec639d2b394"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a07a04718f40d6d81a50f1ec639d2b394">CONF_SOUND_JOIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00186">confbridge.h:186</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a3044c6a96c8a5e1dabdf9c13836d39e2"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a3044c6a96c8a5e1dabdf9c13836d39e2">handle_cli_confbridge_mute</a></div><div class="ttdeci">static char * handle_cli_confbridge_mute(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03593">app_confbridge.c:3593</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a2fee187a548352f8860ba44f9e806ef6"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a2fee187a548352f8860ba44f9e806ef6">CONF_SOUND_THERE_ARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00174">confbridge.h:174</a></div></div>
<div class="ttc" id="bridge_8h_html_a66d6a521530f4fb208eb8ee33e257b6c"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a66d6a521530f4fb208eb8ee33e257b6c">ast_bridge_remove</a></div><div class="ttdeci">int ast_bridge_remove(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Remove a channel from a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01997">bridge.c:1997</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aaf709c6d26e10455b9d58d6cabda33c4"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aaf709c6d26e10455b9d58d6cabda33c4">announce_user_count</a></div><div class="ttdeci">static int announce_user_count(struct confbridge_conference *conference, struct confbridge_user *user, struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Announce number of users in the conference bridge to the caller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00985">app_confbridge.c:985</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="musiconhold_8h_html"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html">musiconhold.h</a></div><div class="ttdoc">Music on hold handling. </div></div>
<div class="ttc" id="structconfbridge__state_html_a02cb7ee6d07f626bd860274307f53972"><div class="ttname"><a href="../../d3/db9/structconfbridge__state.html#a02cb7ee6d07f626bd860274307f53972">confbridge_state::join_unmarked</a></div><div class="ttdeci">conference_event_fn join_unmarked</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00050">conf_state.h:50</a></div></div>
<div class="ttc" id="cli_8h_html_a5c4130cf8f1e93acfdd84416cebf1aef"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a></div><div class="ttdeci">#define AST_CLI_DEFINE(fn, txt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00197">cli.h:197</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aba7d725f051bbc3b87ce74f9e3392c23"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aba7d725f051bbc3b87ce74f9e3392c23">conf_add_post_join_action</a></div><div class="ttdeci">int conf_add_post_join_action(struct confbridge_user *user, int(*func)(struct confbridge_user *user))</div><div class="ttdoc">Queue a function to run with the given conference bridge user as an argument once the state transitio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01445">app_confbridge.c:1445</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4ae5acbe92ae4356e9544072d4a39adcdc"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4ae5acbe92ae4356e9544072d4a39adcdc">USER_OPT_JITTERBUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00067">confbridge.h:67</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="extconf_8h_html_a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be"><div class="ttname"><a href="../../dd/ddb/extconf_8h.html#a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be">E_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00218">extconf.h:218</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="bridge_8h_html_a8a14f1c30f04c6d50dac556cf53e1201"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a8a14f1c30f04c6d50dac556cf53e1201">ast_bridge_set_mixing_interval</a></div><div class="ttdeci">void ast_bridge_set_mixing_interval(struct ast_bridge *bridge, unsigned int mixing_interval)</div><div class="ttdoc">Adjust the internal mixing interval of a bridge used during multimix mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03765">bridge.c:3765</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ab47623e207bf2cdd0edfa613d91894e5"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a></div><div class="ttdeci">void ast_taskprocessor_build_name(char *buf, unsigned int size, const char *format,...)</div><div class="ttdoc">Build a taskprocessor name with a sequence number on the end. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01295">taskprocessor.c:1295</a></div></div>
<div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a8ff938fb2f815be425fd2859a21e6d61"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">ast_channel_tech::type</a></div><div class="ttdeci">const char *const type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00630">channel.h:630</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="lock_8h_html"><div class="ttname"><a href="../../dd/d42/lock_8h.html">lock.h</a></div><div class="ttdoc">Asterisk locking-related definitions: </div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="stasis__channels_8h_html"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html">stasis_channels.h</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35bab2a59c3a7d08362c5c99bbce00028d8e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35bab2a59c3a7d08362c5c99bbce00028d8e">AST_BRIDGE_VIDEO_SFU_REMB_AVERAGE_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00139">bridge.h:139</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="asterisk_8h_html_a6b112b17aed018d85c397e7591948793"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a></div><div class="ttdeci">int ast_shutting_down(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01834">asterisk.c:1834</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a9d6b57386c751b078b60708a4981585d"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a9d6b57386c751b078b60708a4981585d">bridge_profile_sounds::join</a></div><div class="ttdeci">const ast_string_field join</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a984bb2336dcf6384a2e7ac427bc7c6b0"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a984bb2336dcf6384a2e7ac427bc7c6b0">conf_moh_suspend</a></div><div class="ttdeci">static void conf_moh_suspend(struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01412">app_confbridge.c:1412</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ae20ee9274a57552d2320c2081eb80dff"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ae20ee9274a57552d2320c2081eb80dff">conf_remove_user_active</a></div><div class="ttdeci">void conf_remove_user_active(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdoc">Remove a conference bridge user from the unmarked active conference users in the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04322">app_confbridge.c:4322</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html">bridge_profile_sounds</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00195">confbridge.h:195</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html">stasis_bridges.h</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a8eac53db053db219563cb2b6c80e1895"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a8eac53db053db219563cb2b6c80e1895">MENU_ACTION_PLAYBACK_AND_CONTINUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00097">confbridge.h:97</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="confbridge__manager_8c_html_a1f16d97dc10f41bbc9ca29a19c66d46a"><div class="ttname"><a href="../../dd/d92/confbridge__manager_8c.html#a1f16d97dc10f41bbc9ca29a19c66d46a">manager_confbridge_init</a></div><div class="ttdeci">int manager_confbridge_init(void)</div><div class="ttdoc">register stasis message routers to handle manager events for confbridge messages </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d92/confbridge__manager_8c_source.html#l00721">confbridge_manager.c:721</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad363438fb5e5f08460700c353c5e1680"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad363438fb5e5f08460700c353c5e1680">confbridge_join_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_join_type(void)</div><div class="ttdoc">get the confbridge join stasis message type </div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af434c074021a99d74d24b04a217af30a"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af434c074021a99d74d24b04a217af30a">send_conf_end_event</a></div><div class="ttdeci">static void send_conf_end_event(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00664">app_confbridge.c:664</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a14058832327f6b08112045f3d3cefb85"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a14058832327f6b08112045f3d3cefb85">USER_OPT_ANNOUNCEUSERCOUNTALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00066">confbridge.h:66</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a1c57bf9fe1996abf95b28b73b6b30e30"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a1c57bf9fe1996abf95b28b73b6b30e30">join_callback</a></div><div class="ttdeci">static int join_callback(struct ast_bridge_channel *bridge_channel, void *ignore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02518">app_confbridge.c:2518</a></div></div>
<div class="ttc" id="bridge_8h_html_a214c6742929d7db707c94d9856908e61"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a214c6742929d7db707c94d9856908e61">ast_bridge_set_binaural_active</a></div><div class="ttdeci">void ast_bridge_set_binaural_active(struct ast_bridge *bridge, unsigned int binaural_active)</div><div class="ttdoc">Activates the use of binaural signals in a conference bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03772">bridge.c:3772</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_acc0a7a2e23bfdae78c04543276c9c4a0"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#acc0a7a2e23bfdae78c04543276c9c4a0">handle_cli_confbridge_list</a></div><div class="ttdeci">static char * handle_cli_confbridge_list(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03424">app_confbridge.c:3424</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a84d1435c5b8d387806714ea7079304b7">confbridge_user::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00277">confbridge.h:277</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a963e688839fb8422c87c65cdcc8d4d0d"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a963e688839fb8422c87c65cdcc8d4d0d">CONF_SOUND_BINAURAL_OFF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00192">confbridge.h:192</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab19c634ffc6331a8791e93f876355c62"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab19c634ffc6331a8791e93f876355c62">user_timeout</a></div><div class="ttdeci">static int user_timeout(struct ast_bridge_channel *bridge_channel, void *ignore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02392">app_confbridge.c:2392</a></div></div>
<div class="ttc" id="audiohook_8h_html_a39f5dbdf5ef7a979d4ba48f9ee71a422"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a39f5dbdf5ef7a979d4ba48f9ee71a422">ast_audiohook_volume_get</a></div><div class="ttdeci">int ast_audiohook_volume_get(struct ast_channel *chan, enum ast_audiohook_direction direction)</div><div class="ttdoc">Retrieve the volume adjustment value on frames read from or written to a channel. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01371">audiohook.c:1371</a></div></div>
<div class="ttc" id="structconfbridge__user_html_af1b002bfa8785b8b426b965746d3eb03"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#af1b002bfa8785b8b426b965746d3eb03">confbridge_user::playing_moh</a></div><div class="ttdeci">unsigned int playing_moh</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00283">confbridge.h:283</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="module_8h_html_ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15"><div class="ttname"><a href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00121">module.h:121</a></div></div>
<div class="ttc" id="bridge_8h_html_a3d4866f7184c581cd87f93ee0f2fca63"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a3d4866f7184c581cd87f93ee0f2fca63">ast_bridge_set_maximum_sample_rate</a></div><div class="ttdeci">void ast_bridge_set_maximum_sample_rate(struct ast_bridge *bridge, unsigned int sample_rate)</div><div class="ttdoc">Adjust the maximum mixing sample rate of a bridge used during multimix mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03786">bridge.c:3786</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a88d68105d02ba5062e1ecfb03f471049"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a88d68105d02ba5062e1ecfb03f471049">CONF_SOUND_HAS_LEFT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00169">confbridge.h:169</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4ab9a1c9f4be2b7c9084392fd5b34439f3"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4ab9a1c9f4be2b7c9084392fd5b34439f3">USER_OPT_ANSWER_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00072">confbridge.h:72</a></div></div>
<div class="ttc" id="structconfbridge__hook__data_html"><div class="ttname"><a href="../../d2/dd4/structconfbridge__hook__data.html">confbridge_hook_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02524">app_confbridge.c:2524</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html">ast_attended_transfer_message</a></div><div class="ttdoc">Message representing attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00319">stasis_bridges.h:319</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a3f2c8722c474ea88b259115085454185"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a3f2c8722c474ea88b259115085454185">bridge_profile_sounds::otherinparty</a></div><div class="ttdeci">const ast_string_field otherinparty</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aaaf5765651d9a3697813f9752660da57"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aaaf5765651d9a3697813f9752660da57">ast_bridge_leave_hook</a></div><div class="ttdeci">int ast_bridge_leave_hook(struct ast_bridge_features *features, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach a bridge channel leave hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03348">bridge.c:3348</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a378454d8158b6dee03b6750c08c75a4a"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a378454d8158b6dee03b6750c08c75a4a">MENU_ACTION_RESET_LISTENING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00100">confbridge.h:100</a></div></div>
<div class="ttc" id="structconf__menu_html"><div class="ttname"><a href="../../dc/dd3/structconf__menu.html">conf_menu</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00147">confbridge.h:147</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a4d63510d2f8432cd7ec0dab1859f2a3a"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a4d63510d2f8432cd7ec0dab1859f2a3a">send_join_event</a></div><div class="ttdeci">static void send_join_event(struct confbridge_user *user, struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00669">app_confbridge.c:669</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a196ae2bebfe61feb1ffb97c5d2d18ef2"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">confbridge_user::conference</a></div><div class="ttdeci">struct confbridge_conference * conference</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00272">confbridge.h:272</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structplayback__task__data_html_a5f179bbfc8c5db7f65849ab31346a5c8"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html#a5f179bbfc8c5db7f65849ab31346a5c8">playback_task_data::playback_finished</a></div><div class="ttdeci">int playback_finished</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01947">app_confbridge.c:1947</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a287f97e438a0a7a2f7a6ae08fb15efbf"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a287f97e438a0a7a2f7a6ae08fb15efbf">conf_get_sound</a></div><div class="ttdeci">const char * conf_get_sound(enum conf_sounds sound, struct bridge_profile_sounds *custom_sounds)</div><div class="ttdoc">Looks to see if sound file is stored in bridge profile sounds, if not default sound is provided...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00526">app_confbridge.c:526</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a36fd47c3d989917cc8da5a8f3515f777"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a36fd47c3d989917cc8da5a8f3515f777">MENU_ACTION_LEAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00107">confbridge.h:107</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af4b6432760e76c348b3ce223f36e18dd"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af4b6432760e76c348b3ce223f36e18dd">wait_for_initiator</a></div><div class="ttdeci">static void wait_for_initiator(struct ast_channel *initiator)</div><div class="ttdoc">Wait for the initiator of an async playback to be ready. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02201">app_confbridge.c:2201</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a2f32475ecb143255c3dc78e6de2decf1"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a2f32475ecb143255c3dc78e6de2decf1">action_confbridgesetsinglevideosrc</a></div><div class="ttdeci">static int action_confbridgesetsinglevideosrc(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04149">app_confbridge.c:4149</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structconf__menu__entry_html"><div class="ttname"><a href="../../dd/d43/structconf__menu__entry.html">conf_menu_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00136">confbridge.h:136</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a7e149d3f4646b6542df30d90b9960479"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a7e149d3f4646b6542df30d90b9960479">play_sound_number</a></div><div class="ttdeci">static int play_sound_number(struct confbridge_conference *conference, int say_number)</div><div class="ttdoc">Play number into the conference bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02317">app_confbridge.c:2317</a></div></div>
<div class="ttc" id="structbridge__profile_html_af42582af82a949f4925915ac8775a768"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#af42582af82a949f4925915ac8775a768">bridge_profile::name</a></div><div class="ttdeci">char name[MAX_PROFILE_NAME]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00226">confbridge.h:226</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a7372834be37bf98fcc890f7a8dc46780"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a7372834be37bf98fcc890f7a8dc46780">action_toggle_mute_participants</a></div><div class="ttdeci">static int action_toggle_mute_participants(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02895">app_confbridge.c:2895</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a5ef8af740b139874195a394ba4abee3d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a5ef8af740b139874195a394ba4abee3d">ast_bridge_join_hook</a></div><div class="ttdeci">int ast_bridge_join_hook(struct ast_bridge_features *features, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Unregisters a handler for a built in interval feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03338">bridge.c:3338</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00183">bridge_features.h:183</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aa133d4b1aa15e4c407cd6b35926593ed"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aa133d4b1aa15e4c407cd6b35926593ed">playback_task</a></div><div class="ttdeci">static int playback_task(void *data)</div><div class="ttdoc">Play an announcement into a confbridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01965">app_confbridge.c:1965</a></div></div>
<div class="ttc" id="structast__bridge__tech__optimizations_html_a91f62b0358f1b431bc3907b81c401447"><div class="ttname"><a href="../../d6/d97/structast__bridge__tech__optimizations.html#a91f62b0358f1b431bc3907b81c401447">ast_bridge_tech_optimizations::talking_threshold</a></div><div class="ttdeci">unsigned int talking_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00050">bridge_technology.h:50</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="json_8h_html_af7ffb5efb418e60eaa2b3d06a4c6e458"><div class="ttname"><a href="../../d4/d05/json_8h.html#af7ffb5efb418e60eaa2b3d06a4c6e458">ast_json_object_update</a></div><div class="ttdeci">int ast_json_object_update(struct ast_json *object, struct ast_json *other)</div><div class="ttdoc">Update object with all of the fields of other. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00416">json.c:416</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a36f571ad2bb52978f293bbde40e952ea"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a36f571ad2bb52978f293bbde40e952ea">CONF_SOUND_ERROR_MENU</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00185">confbridge.h:185</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4afc4a2e338837ad1cc81bf687a25fdb37"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4afc4a2e338837ad1cc81bf687a25fdb37">USER_OPT_ANNOUNCE_JOIN_LEAVE_REVIEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00068">confbridge.h:68</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga58c3e3da5d31739cafaee1df6ddf9342"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a></div><div class="ttdeci">void astman_send_list_complete_start(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdoc">Start the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03237">manager.c:3237</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a62877f765c856091be3e1f75fa392129"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a62877f765c856091be3e1f75fa392129">conf_remove_user_waiting</a></div><div class="ttdeci">void conf_remove_user_waiting(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdoc">Remove a conference bridge user from the waiting conference users in the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04346">app_confbridge.c:4346</a></div></div>
<div class="ttc" id="structplayback__task__data_html_a7efa5e9c7494c7d4586359300221aa5d"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html#a7efa5e9c7494c7d4586359300221aa5d">playback_task_data::filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01945">app_confbridge.c:1945</a></div></div>
<div class="ttc" id="audiohook_8h_html"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html">audiohook.h</a></div><div class="ttdoc">Audiohooks Architecture. </div></div>
<div class="ttc" id="structbridge__profile_html_a6ae60ea5888c3eac1176a41c3fb6ea4d"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a6ae60ea5888c3eac1176a41c3fb6ea4d">bridge_profile::rec_command</a></div><div class="ttdeci">char rec_command[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00230">confbridge.h:230</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a22bff6e4031df4b71be0aecf5d852222"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a22bff6e4031df4b71be0aecf5d852222">MENU_ACTION_ADMIN_KICK_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00106">confbridge.h:106</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa7b6c2ac442857d932a27bbb98ddba78e"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa7b6c2ac442857d932a27bbb98ddba78e">BRIDGE_OPT_RECORD_CONFERENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00076">confbridge.h:76</a></div></div>
<div class="ttc" id="bridge_8h_html_aab4cd1153d39a6744eca6a84d5255820"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aab4cd1153d39a6744eca6a84d5255820">ast_bridge_unsuspend</a></div><div class="ttdeci">int ast_bridge_unsuspend(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Unsuspend a channel from a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03089">bridge.c:3089</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a47aa4de3736ec9da5831351848e6522d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a47aa4de3736ec9da5831351848e6522d">ast_bridge_talk_detector_hook</a></div><div class="ttdeci">int ast_bridge_talk_detector_hook(struct ast_bridge_features *features, ast_bridge_talking_indicate_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach a bridge channel talk detection hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03358">bridge.c:3358</a></div></div>
<div class="ttc" id="structconfbridge__user_html_aaa3e259a9e4bd5202039310d50692ea4"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#aaa3e259a9e4bd5202039310d50692ea4">confbridge_user::post_join_list</a></div><div class="ttdeci">struct confbridge_user::@93 post_join_list</div></div>
<div class="ttc" id="structast__bridge__snapshot_html"><div class="ttname"><a href="../../d0/d99/structast__bridge__snapshot.html">ast_bridge_snapshot</a></div><div class="ttdoc">Structure that contains a snapshot of information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00322">bridge.h:322</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a23f9998d93ca56bdce5452fdbe70bf76"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a23f9998d93ca56bdce5452fdbe70bf76">conf_find_user_profile</a></div><div class="ttdeci">const struct user_profile * conf_find_user_profile(struct ast_channel *chan, const char *user_profile_name, struct user_profile *result)</div><div class="ttdoc">find a user profile given a user profile&amp;#39;s name and store that profile in result structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02486">conf_config_parser.c:2486</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a0f2b712e6457a406ff913d99440fa300"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0f2b712e6457a406ff913d99440fa300">USER_OPT_ENDMARKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00060">confbridge.h:60</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_abee66f5a1cd0302e5598049d7836a107"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#abee66f5a1cd0302e5598049d7836a107">conf_handle_talker_cb</a></div><div class="ttdeci">static int conf_handle_talker_cb(struct ast_bridge_channel *bridge_channel, void *hook_pvt, int talking)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02322">app_confbridge.c:2322</a></div></div>
<div class="ttc" id="structpost__join__action_html_a6d1895a5641e418ff64a528050054478"><div class="ttname"><a href="../../df/d46/structpost__join__action.html#a6d1895a5641e418ff64a528050054478">post_join_action::list</a></div><div class="ttdeci">struct post_join_action::@92 list</div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ac3382bf6da54c56b37069bd76bbdf4f9"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a></div><div class="ttdeci">static int load_module(void)</div><div class="ttdoc">Load the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04439">app_confbridge.c:4439</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a19ad7d7ca439cdaad565b018191778e2"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a19ad7d7ca439cdaad565b018191778e2">join_conference_bridge</a></div><div class="ttdeci">static struct confbridge_conference * join_conference_bridge(const char *conference_name, struct confbridge_user *user)</div><div class="ttdoc">Join a conference bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01679">app_confbridge.c:1679</a></div></div>
<div class="ttc" id="structbridge__profile_html_ad16e7752d126b9bc0f90a33e49561771"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#ad16e7752d126b9bc0f90a33e49561771">bridge_profile::rec_file</a></div><div class="ttdeci">char rec_file[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00228">confbridge.h:228</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a527d4f80a25f8173a571ff1e62dddb45">USER_OPT_MARKEDUSER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00054">confbridge.h:54</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a9f65cbb864ab09658caa6adebf391e0a"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a9f65cbb864ab09658caa6adebf391e0a">MENU_ACTION_ADMIN_TOGGLE_LOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00105">confbridge.h:105</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_abcb618a46918c12d499b7eb8d73badf1"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#abcb618a46918c12d499b7eb8d73badf1">handle_cli_confbridge_start_record</a></div><div class="ttdeci">static char * handle_cli_confbridge_start_record(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03708">app_confbridge.c:3708</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a6389c2ad08a2ff22eef9fea06b588938"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a6389c2ad08a2ff22eef9fea06b588938">USER_OPT_DTMF_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00065">confbridge.h:65</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structbridge__profile_html_af901c1a90132718ba5937a5667d6fcec"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#af901c1a90132718ba5937a5667d6fcec">bridge_profile::sounds</a></div><div class="ttdeci">struct bridge_profile_sounds * sounds</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00236">confbridge.h:236</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a4f73336407d622bc9533e528ed626538"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a4f73336407d622bc9533e528ed626538">CONF_SOUND_BINAURAL_ON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00191">confbridge.h:191</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a0bdd287fa25f9309f6fba7e2fbbe2167"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a0bdd287fa25f9309f6fba7e2fbbe2167">CONF_SOUND_OTHER_IN_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00175">confbridge.h:175</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ac338dd660e7509403a2f684b5abcde0b"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ac338dd660e7509403a2f684b5abcde0b">handle_video_on_exit</a></div><div class="ttdeci">static void handle_video_on_exit(struct confbridge_conference *conference, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01075">app_confbridge.c:1075</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444a165a875b9d5bac3aba4ad54da1861ab3"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a165a875b9d5bac3aba4ad54da1861ab3">AST_BRIDGE_FLAG_TRANSFER_BRIDGE_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00055">bridge_features.h:55</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a6505f800c65ac4b11e3fcac69273460b"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a6505f800c65ac4b11e3fcac69273460b">conf_get_pin</a></div><div class="ttdeci">static int conf_get_pin(struct ast_channel *chan, struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02350">app_confbridge.c:2350</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a3eada297ca7d168fcce5795b2f371c86"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a3eada297ca7d168fcce5795b2f371c86">bridge_profile_sounds::onlyone</a></div><div class="ttdeci">const ast_string_field onlyone</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="test_8h_html"><div class="ttname"><a href="../../d2/ddc/test_8h.html">test.h</a></div><div class="ttdoc">Test Framework API. </div></div>
<div class="ttc" id="structconfbridge__user_html_ae96984679ed85ea4bbd83482e81b1e5b"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#ae96984679ed85ea4bbd83482e81b1e5b">confbridge_user::suspended_moh</a></div><div class="ttdeci">unsigned int suspended_moh</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00280">confbridge.h:280</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a5a0cac7b97323a1e6ccc774502693185"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a5a0cac7b97323a1e6ccc774502693185">conf_stop_record</a></div><div class="ttdeci">static int conf_stop_record(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00819">app_confbridge.c:819</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a2a3de22abaf5ae848a3745186fa399e0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a2a3de22abaf5ae848a3745186fa399e0">ast_bridge_channel_feature_digit_add</a></div><div class="ttdeci">void ast_bridge_channel_feature_digit_add(struct ast_bridge_channel *bridge_channel, int digit)</div><div class="ttdoc">Add a DTMF digit to the collected digits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01754">bridge_channel.c:1754</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_affac9dbd3f70c579f9ed6553a2d93db9"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#affac9dbd3f70c579f9ed6553a2d93db9">conf_menu_entry_destroy</a></div><div class="ttdeci">void conf_menu_entry_destroy(struct conf_menu_entry *menu_entry)</div><div class="ttdoc">Destroys and frees all the actions stored in a menu_entry structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02602">conf_config_parser.c:2602</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3aff14e582f66e9f971a9c447f30cb7dd7"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3aff14e582f66e9f971a9c447f30cb7dd7">MENU_ACTION_RESET_TALKING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00101">confbridge.h:101</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a4cd1b182f2c971d72675e717c9fe8ead"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a4cd1b182f2c971d72675e717c9fe8ead">action_toggle_mute</a></div><div class="ttdeci">static int action_toggle_mute(struct confbridge_conference *conference, struct confbridge_user *user, struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02866">app_confbridge.c:2866</a></div></div>
<div class="ttc" id="structast__datastore__info_html"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a></div><div class="ttdoc">Structure for a data store type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00031">datastore.h:31</a></div></div>
<div class="ttc" id="structhangup__data_html_ae20009e49fd2cb8dfaf4c8384c642597"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#ae20009e49fd2cb8dfaf4c8384c642597">hangup_data::hungup</a></div><div class="ttdeci">int hungup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01118">app_confbridge.c:1118</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_adb1db9449fd1828a7cc4e1df8f22c3c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#adb1db9449fd1828a7cc4e1df8f22c3c4">ast_attended_transfer_message::target</a></div><div class="ttdeci">struct ast_channel_snapshot * target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00333">stasis_bridges.h:333</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab9cdfaedd74dd0f7b09a0038e15e93a2"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab9cdfaedd74dd0f7b09a0038e15e93a2">conf_mute_only_active</a></div><div class="ttdeci">void conf_mute_only_active(struct confbridge_conference *conference)</div><div class="ttdoc">Attempt to mute/play MOH to the only user in the conference if they require it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04335">app_confbridge.c:4335</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_abb3c7ba95c53c0a64298d852a96b37ee"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#abb3c7ba95c53c0a64298d852a96b37ee">generic_mute_unmute_user</a></div><div class="ttdeci">static void generic_mute_unmute_user(struct confbridge_conference *conference, struct confbridge_user *user, int mute)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01312">app_confbridge.c:1312</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="format__cap_8h_html_a0c30a7fc5698f5e075cfe620cddfc7f1"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a></div><div class="ttdeci">int ast_format_cap_append_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Add all codecs Asterisk knows about for a specific type to the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00216">format_cap.c:216</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aa8fb5653de084dfe2470d12f75839a51"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aa8fb5653de084dfe2470d12f75839a51">conf_update_user_mute</a></div><div class="ttdeci">void conf_update_user_mute(struct confbridge_user *user)</div><div class="ttdoc">Update the actual mute status of the user and set it on the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01275">app_confbridge.c:1275</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a9c4a5daa97f23b28b17f9754237b7a9f"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a9c4a5daa97f23b28b17f9754237b7a9f">CONF_SOUND_LEAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00187">confbridge.h:187</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffab61e34a8252b1f3970c1ead5977f2c09"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffab61e34a8252b1f3970c1ead5977f2c09">BRIDGE_OPT_ENABLE_EVENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00087">confbridge.h:87</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a95396ed8706529c9e1ea6b9ad3e3af65"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a95396ed8706529c9e1ea6b9ad3e3af65">USER_OPT_ANNOUNCEUSERCOUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00058">confbridge.h:58</a></div></div>
<div class="ttc" id="channel_8h_html_abf858a4aac3ad8e1f87236611fce8db6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf858a4aac3ad8e1f87236611fce8db6">ast_channel_get_up_time</a></div><div class="ttdeci">int ast_channel_get_up_time(struct ast_channel *chan)</div><div class="ttdoc">Obtain how long it has been since the channel was answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02854">channel.c:2854</a></div></div>
<div class="ttc" id="conf__state__empty_8c_html_a9ffef527f4c78acdb740e9d81bfa06bb"><div class="ttname"><a href="../../d2/d2d/conf__state__empty_8c.html#a9ffef527f4c78acdb740e9d81bfa06bb">CONF_STATE_EMPTY</a></div><div class="ttdeci">struct confbridge_state * CONF_STATE_EMPTY</div><div class="ttdoc">Conference state with no active or waiting users. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2d/conf__state__empty_8c_source.html#l00053">conf_state_empty.c:53</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structuser__profile_html_a46ab747e08f8a9e23484a31cf8898a7c"><div class="ttname"><a href="../../de/df0/structuser__profile.html#a46ab747e08f8a9e23484a31cf8898a7c">user_profile::silence_threshold</a></div><div class="ttdeci">unsigned int silence_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00162">confbridge.h:162</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a73b51e242f08d672eda12536d21e0cbb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a73b51e242f08d672eda12536d21e0cbb">confbridge_info_function</a></div><div class="ttdeci">static struct ast_custom_function confbridge_info_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03816">app_confbridge.c:3816</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a51b81f24642f8eff2d89a0cab1533167"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a51b81f24642f8eff2d89a0cab1533167">ast_bridge_channel::binaural_suspended</a></div><div class="ttdeci">unsigned int binaural_suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00181">bridge_channel.h:181</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4aaa91e99cfd36ebc13f54a7b113612012"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4aaa91e99cfd36ebc13f54a7b113612012">USER_OPT_STARTMUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00055">confbridge.h:55</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a676f6caf24ce3a40cdc018baa3f06563"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a676f6caf24ce3a40cdc018baa3f06563">kick_conference_participant</a></div><div class="ttdeci">static int kick_conference_participant(struct confbridge_conference *conference, const char *channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03233">app_confbridge.c:3233</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ad3d42cd196c118125b9c8af049d10acb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ad3d42cd196c118125b9c8af049d10acb">complete_confbridge_name</a></div><div class="ttdeci">static char * complete_confbridge_name(const char *line, const char *word, int pos, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03280">app_confbridge.c:3280</a></div></div>
<div class="ttc" id="structasync__delete__name__rec__task__data_html_afae8c108f5d360038fa8b099eb4ab2f3"><div class="ttname"><a href="../../da/daf/structasync__delete__name__rec__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">async_delete_name_rec_task_data::filename</a></div><div class="ttdeci">char filename[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02446">app_confbridge.c:2446</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="structasync__delete__name__rec__task__data_html_a196ae2bebfe61feb1ffb97c5d2d18ef2"><div class="ttname"><a href="../../da/daf/structasync__delete__name__rec__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">async_delete_name_rec_task_data::conference</a></div><div class="ttdeci">struct confbridge_conference * conference</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02445">app_confbridge.c:2445</a></div></div>
<div class="ttc" id="structconfbridge__hook__data_html_a196ae2bebfe61feb1ffb97c5d2d18ef2"><div class="ttname"><a href="../../d2/dd4/structconfbridge__hook__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">confbridge_hook_data::conference</a></div><div class="ttdeci">struct confbridge_conference * conference</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02525">app_confbridge.c:2525</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a7dff3baad97d51c5c39b4113a135e507"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a7dff3baad97d51c5c39b4113a135e507">confbridge_user::list</a></div><div class="ttdeci">struct confbridge_user::@94 list</div></div>
<div class="ttc" id="structasync__playback__task__data_html"><div class="ttname"><a href="../../d4/d0a/structasync__playback__task__data.html">async_playback_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02040">app_confbridge.c:2040</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aae28b3b590d6f2c84e472625c81ae2bb"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a></div><div class="ttdeci">static int hangup(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02483">chan_pjsip.c:2483</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="../../d2/d4d/file_8h.html">file.h</a></div><div class="ttdoc">Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. </div></div>
<div class="ttc" id="app__confbridge_8c_html_a4053a42c7e0ff75390e771cabac16ed3"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a4053a42c7e0ff75390e771cabac16ed3">confbridge_handle_atxfer</a></div><div class="ttdeci">void confbridge_handle_atxfer(struct ast_attended_transfer_message *msg)</div><div class="ttdoc">Create join/leave events for attended transfers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01562">app_confbridge.c:1562</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a788dde4b6497a122ecb61d467b6168de"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a788dde4b6497a122ecb61d467b6168de">USER_OPT_NOONLYPERSON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00053">confbridge.h:53</a></div></div>
<div class="ttc" id="structconf__menu__action_html_a0057c96bc1d247e36b00d88cc6d00cf8"><div class="ttname"><a href="../../d1/d6f/structconf__menu__action.html#a0057c96bc1d247e36b00d88cc6d00cf8">conf_menu_action::action</a></div><div class="ttdeci">struct conf_menu_action::@85 action</div></div>
<div class="ttc" id="app__confbridge_8c_html_a1d9b1eccfc259a14525ce817482a3f88"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a></div><div class="ttdeci">static const char app[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00459">app_confbridge.c:459</a></div></div>
<div class="ttc" id="structconfbridge__state_html_accaa0513c72476d4f75599cc3f928f30"><div class="ttname"><a href="../../d3/db9/structconfbridge__state.html#accaa0513c72476d4f75599cc3f928f30">confbridge_state::leave_unmarked</a></div><div class="ttdeci">conference_event_fn leave_unmarked</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00053">conf_state.h:53</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a18b8fe668f1f8c9bc8f9ef7b78701425"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a18b8fe668f1f8c9bc8f9ef7b78701425">action_confbridgeunlock</a></div><div class="ttdeci">static int action_confbridgeunlock(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04028">app_confbridge.c:4028</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1af5ce08bb2b402e0dcff932347c95b7e1"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1af5ce08bb2b402e0dcff932347c95b7e1">CONF_SOUND_KICKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00170">confbridge.h:170</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a419bded32f3b4eb08047e082b4b86399"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a419bded32f3b4eb08047e082b4b86399">conf_add_user_marked</a></div><div class="ttdeci">void conf_add_user_marked(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdoc">Add a conference bridge user as a marked active user of the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04309">app_confbridge.c:4309</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_ad6720009679933e12008eccbbae1cad2"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#ad6720009679933e12008eccbbae1cad2">confbridge_conference::record_chan</a></div><div class="ttdeci">struct ast_channel * record_chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00255">confbridge.h:255</a></div></div>
<div class="ttc" id="confbridge_8h_html_a8651034b4e7f9f21d9a6bd7737e2a0a5"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a8651034b4e7f9f21d9a6bd7737e2a0a5">confbridge_start_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_start_type(void)</div><div class="ttdoc">get the confbridge start stasis message type </div></div>
<div class="ttc" id="app__confbridge_8c_html_a52a0e4c83c7ff4b0e7b1a4ec096d3419"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a52a0e4c83c7ff4b0e7b1a4ec096d3419">CONFERENCE_BRIDGE_BUCKETS</a></div><div class="ttdeci">#define CONFERENCE_BRIDGE_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00463">app_confbridge.c:463</a></div></div>
<div class="ttc" id="message_8h_html"><div class="ttname"><a href="../../d2/d0d/message_8h.html">message.h</a></div><div class="ttdoc">Out-of-call text message support. </div></div>
<div class="ttc" id="file_8h_html_adb15d6efecc1a13b8835bee6d3562ddb"><div class="ttname"><a href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a></div><div class="ttdeci">int ast_filedelete(const char *filename, const char *fmt)</div><div class="ttdoc">Deletes a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01098">file.c:1098</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a5127fef7847bdcfc160fb5dcc4a4fc45"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a5127fef7847bdcfc160fb5dcc4a4fc45">send_mute_event</a></div><div class="ttdeci">static void send_mute_event(struct confbridge_user *user, struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00707">app_confbridge.c:707</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_adf4c5a237767eb6db5b1db41ccdfc689"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#adf4c5a237767eb6db5b1db41ccdfc689">AST_TASKPROCESSOR_MAX_NAME</a></div><div class="ttdeci">#define AST_TASKPROCESSOR_MAX_NAME</div><div class="ttdoc">Suggested maximum taskprocessor name length (less null terminator). </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00060">taskprocessor.h:60</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a02a29bd757c2bb69039bd3a11aba361f"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a02a29bd757c2bb69039bd3a11aba361f">MENU_ACTION_RELEASE_SINGLE_VIDEO_SRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00110">confbridge.h:110</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a3e0424b5a06f74180210b77524a51d26"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a3e0424b5a06f74180210b77524a51d26">confbridge_conference::orig_rec_file</a></div><div class="ttdeci">struct ast_str * orig_rec_file</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00257">confbridge.h:257</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_abccd4b1475b8b192c029e77ff0ded0c3"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#abccd4b1475b8b192c029e77ff0ded0c3">confbridge_conference::markedusers</a></div><div class="ttdeci">unsigned int markedusers</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00250">confbridge.h:250</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a6a3fd8922479ad7515c184b18c0de2d0"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a6a3fd8922479ad7515c184b18c0de2d0">CONF_SOUND_WAIT_FOR_LEADER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00177">confbridge.h:177</a></div></div>
<div class="ttc" id="structasync__playback__task__data_html_afa341aa6058876d1bda5e97731c3b29c"><div class="ttname"><a href="../../d4/d0a/structasync__playback__task__data.html#afa341aa6058876d1bda5e97731c3b29c">async_playback_task_data::initiator</a></div><div class="ttdeci">struct ast_channel * initiator</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02043">app_confbridge.c:2043</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="channel_8h_html_a6610c8171ced0a69738622c11736ff5e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a></div><div class="ttdeci">int ast_channel_priority(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00444">channel_internal_api.c:444</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_a5be1fb9b43b051b087f6952b6346909a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#a5be1fb9b43b051b087f6952b6346909a">ast_channel_snapshot::dialplan</a></div><div class="ttdeci">struct ast_channel_snapshot_dialplan * dialplan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00151">stasis_channels.h:151</a></div></div>
<div class="ttc" id="structuser__profile_html_ae1eedae96e3c5a990922b3291e31ac43"><div class="ttname"><a href="../../de/df0/structuser__profile.html#ae1eedae96e3c5a990922b3291e31ac43">user_profile::announce_user_count_all_after</a></div><div class="ttdeci">unsigned int announce_user_count_all_after</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00158">confbridge.h:158</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_ad4cabb0173fd175d7bac078a1a49bcb4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#ad4cabb0173fd175d7bac078a1a49bcb4">ast_attended_transfer_message::to_transferee</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00325">stasis_bridges.h:325</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ad3debd15062b4b9463e5703724dd9a1f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a></div><div class="ttdeci">void ast_bridge_features_destroy(struct ast_bridge_features *features)</div><div class="ttdoc">Destroy an allocated bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03741">bridge.c:3741</a></div></div>
<div class="ttc" id="structast__cli__args_html_a2a7a1aa13a4f14075411123a4495593c"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">ast_cli_args::line</a></div><div class="ttdeci">const char * line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00162">cli.h:162</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_adf941e08876c444bc3f90c5e5856207f"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#adf941e08876c444bc3f90c5e5856207f">bridge_profile_sounds::hasjoin</a></div><div class="ttdeci">const ast_string_field hasjoin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structast__bridge__features_html_aa09e22acd94cd548a204c100e11fd612"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#aa09e22acd94cd548a204c100e11fd612">ast_bridge_features::mute</a></div><div class="ttdeci">unsigned int mute</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00277">bridge_features.h:277</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_acbc307fc3edf50401f841d3e5f183562"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#acbc307fc3edf50401f841d3e5f183562">hangup_playback</a></div><div class="ttdeci">static int hangup_playback(void *data)</div><div class="ttdoc">Hang up the announcer channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01134">app_confbridge.c:1134</a></div></div>
<div class="ttc" id="structconfbridge__state_html_af83ee7b25abca80641bf8be671d5cbd3"><div class="ttname"><a href="../../d3/db9/structconfbridge__state.html#af83ee7b25abca80641bf8be671d5cbd3">confbridge_state::join_marked</a></div><div class="ttdeci">conference_event_fn join_marked</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00052">conf_state.h:52</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ae36954c48e2b0691ef8cafbdb7f21011"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ae36954c48e2b0691ef8cafbdb7f21011">async_play_sound_ready</a></div><div class="ttdeci">void async_play_sound_ready(struct ast_channel *chan)</div><div class="ttdoc">Indicate the initiator of an async sound file is ready for it to play. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02288">app_confbridge.c:2288</a></div></div>
<div class="ttc" id="structconf__menu__entry_html_a33464dba524e69ccf4c908b486d8301e"><div class="ttname"><a href="../../dd/d43/structconf__menu__entry.html#a33464dba524e69ccf4c908b486d8301e">conf_menu_entry::dtmf</a></div><div class="ttdeci">char dtmf[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00138">confbridge.h:138</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a8cc14922bea3d988d5ac7ea92e73d59d"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a8cc14922bea3d988d5ac7ea92e73d59d">confbridge_conference::active_list</a></div><div class="ttdeci">struct confbridge_conference::@90 active_list</div></div>
<div class="ttc" id="stream_8h_html"><div class="ttname"><a href="../../d8/d95/stream_8h.html">stream.h</a></div><div class="ttdoc">Media Stream API. </div></div>
<div class="ttc" id="structconfbridge__conference_html_a9221e722481e35d13e34c40669629758"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a9221e722481e35d13e34c40669629758">confbridge_conference::playback_queue</a></div><div class="ttdeci">struct ast_taskprocessor * playback_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00260">confbridge.h:260</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a29128ae5c15a12dea5fe4f263ba6cec1"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a></div><div class="ttdeci">static int mute</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00144">chan_alsa.c:144</a></div></div>
<div class="ttc" id="pbx_8h_html_a721c6ba091102f155a586e09b2a526bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a721c6ba091102f155a586e09b2a526bf">ast_context_remove_extension</a></div><div class="ttdeci">int ast_context_remove_extension(const char *context, const char *extension, int priority, const char *registrar)</div><div class="ttdoc">Simply remove extension from context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04952">pbx.c:4952</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ac4066329d069a42b9a23c69fd8855569"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ac4066329d069a42b9a23c69fd8855569">set_rec_filename</a></div><div class="ttdeci">static void set_rec_filename(struct confbridge_conference *conference, struct ast_str **filename, int is_new)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00735">app_confbridge.c:735</a></div></div>
<div class="ttc" id="structasync__datastore__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d8d/structasync__datastore__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_datastore_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02048">app_confbridge.c:2048</a></div></div>
<div class="ttc" id="structasync__datastore__data_html_aaefdb10b18059f3c08332338630b3f68"><div class="ttname"><a href="../../df/d8d/structasync__datastore__data.html#aaefdb10b18059f3c08332338630b3f68">async_datastore_data::wait</a></div><div class="ttdeci">int wait</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02050">app_confbridge.c:2050</a></div></div>
<div class="ttc" id="bridge_8h_html_a02bd31522656ae0e86ec0d4cfdace1b1"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a02bd31522656ae0e86ec0d4cfdace1b1">ast_bridge_set_remb_estimated_bitrate</a></div><div class="ttdeci">void ast_bridge_set_remb_estimated_bitrate(struct ast_bridge *bridge, float estimated_bitrate)</div><div class="ttdoc">Force the REMB report estimated bitrate to a specific max value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03874">bridge.c:3874</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab0b4e11aba1e0a898b5d75427d3b13fa"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a></div><div class="ttdeci">#define OBJ_PARTIAL_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01156">astobj2.h:1156</a></div></div>
<div class="ttc" id="structast__bridge__tech__optimizations_html_a46ab747e08f8a9e23484a31cf8898a7c"><div class="ttname"><a href="../../d6/d97/structast__bridge__tech__optimizations.html#a46ab747e08f8a9e23484a31cf8898a7c">ast_bridge_tech_optimizations::silence_threshold</a></div><div class="ttdeci">unsigned int silence_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00052">bridge_technology.h:52</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab1ba20874bbec2f0ec79015b5c15bfcb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab1ba20874bbec2f0ec79015b5c15bfcb">action_kick_last</a></div><div class="ttdeci">static int action_kick_last(struct confbridge_conference *conference, struct ast_bridge_channel *bridge_channel, struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03022">app_confbridge.c:3022</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a3443c564643fdfbd1d58a1c1de2c6afa"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a3443c564643fdfbd1d58a1c1de2c6afa">MENU_ACTION_PLAYBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00096">confbridge.h:96</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35bac1c124829151b23928ceb83a7894be7d"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35bac1c124829151b23928ceb83a7894be7d">AST_BRIDGE_VIDEO_SFU_REMB_FORCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00145">bridge.h:145</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1af1229abdb521712343b99fe885de4b86"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1af1229abdb521712343b99fe885de4b86">CONF_SOUND_LOCKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00182">confbridge.h:182</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_aa6178fe541706eed1f7198cb90180542"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#aa6178fe541706eed1f7198cb90180542">confbridge_conference::b_profile</a></div><div class="ttdeci">struct bridge_profile b_profile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00248">confbridge.h:248</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_afa330a895fe8ef506be047091f21d940"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#afa330a895fe8ef506be047091f21d940">confbridge_conference::locked</a></div><div class="ttdeci">unsigned int locked</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00252">confbridge.h:252</a></div></div>
<div class="ttc" id="lock_8h_html_ab134d98cdfe7de0f7a72b377c0765dc7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a></div><div class="ttdeci">pthread_cond_t ast_cond_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00176">lock.h:176</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a0e985ea384c79e5e35055ecc0ffb2c57">AST_BRIDGE_CHANNEL_FLAG_IMMOVABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00067">bridge_features.h:67</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aafee70428b84848275fce95324283500"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aafee70428b84848275fce95324283500">destroy_conference_bridge</a></div><div class="ttdeci">static void destroy_conference_bridge(void *obj)</div><div class="ttdoc">Destroy a conference bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01173">app_confbridge.c:1173</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a45d8f739b9add218627211f49bffdc34"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a45d8f739b9add218627211f49bffdc34">handle_conf_user_leave</a></div><div class="ttdeci">static int handle_conf_user_leave(struct confbridge_user *user)</div><div class="ttdoc">Call the proper leave event handler for the user for the conference bridge&amp;#39;s current state...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01249">app_confbridge.c:1249</a></div></div>
<div class="ttc" id="conf__chan__record_8c_html_a7a71b18c21b40127438b56da9f31f488"><div class="ttname"><a href="../../d9/d44/conf__chan__record_8c.html#a7a71b18c21b40127438b56da9f31f488">conf_record_get_tech</a></div><div class="ttdeci">struct ast_channel_tech * conf_record_get_tech(void)</div><div class="ttdoc">Get ConfBridge record channel technology struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d44/conf__chan__record_8c_source.html#l00102">conf_chan_record.c:102</a></div></div>
<div class="ttc" id="channel_8h_html_a39fc055500e09810d0afd0bff87407c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a></div><div class="ttdeci">struct ast_channel * ast_request(const char *type, struct ast_format_cap *request_cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06444">channel.c:6444</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af3a404e4ad75307279d29dc2c72eaba5"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af3a404e4ad75307279d29dc2c72eaba5">conf_handle_second_active</a></div><div class="ttdeci">void conf_handle_second_active(struct confbridge_conference *conference)</div><div class="ttdoc">Handle when a conference moves to having more than one active participant. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01462">app_confbridge.c:1462</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a88ad9a0b3a21ed23b18bc1abbf8eaeb3"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a88ad9a0b3a21ed23b18bc1abbf8eaeb3">confbridge_conference::waitingusers</a></div><div class="ttdeci">unsigned int waitingusers</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00251">confbridge.h:251</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ae53b27c9dbe4c16b195b321b57cb04fd"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ae53b27c9dbe4c16b195b321b57cb04fd">setup_async_playback_datastore</a></div><div class="ttdeci">static int setup_async_playback_datastore(struct ast_channel *initiator)</div><div class="ttdoc">Prepare the async playback datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02112">app_confbridge.c:2112</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1aa1fb78d0bee9ac0774695ea208534158"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1aa1fb78d0bee9ac0774695ea208534158">CONF_SOUND_PLACE_IN_CONF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00176">confbridge.h:176</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a88b6ee77eea0c8a6cc0a315e1c1fc815"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a88b6ee77eea0c8a6cc0a315e1c1fc815">ast_record_review</a></div><div class="ttdeci">int ast_record_review(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, const char *path)</div><div class="ttdoc">Allow to record message and have a review option. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02489">main/app.c:2489</a></div></div>
<div class="ttc" id="dsp_8h_html_a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00073">dsp.h:73</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_ac0aa3e5e68000a96bd2103416e0b1f9b"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#ac0aa3e5e68000a96bd2103416e0b1f9b">conf_bridge_profile_copy</a></div><div class="ttdeci">void conf_bridge_profile_copy(struct bridge_profile *dst, struct bridge_profile *src)</div><div class="ttdoc">copies a bridge profile </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02523">conf_config_parser.c:2523</a></div></div>
<div class="ttc" id="confbridge_8h_html_a82a110b69bbee2dbf2dadcdae6f332a9"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a82a110b69bbee2dbf2dadcdae6f332a9">confbridge_leave_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_leave_type(void)</div><div class="ttdoc">get the confbridge leave stasis message type </div></div>
<div class="ttc" id="app__confbridge_8c_html_a9955a722c6e7a9e47a0b93356d0678fa"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a9955a722c6e7a9e47a0b93356d0678fa">complete_confbridge_participant</a></div><div class="ttdeci">static char * complete_confbridge_participant(const char *conference_name, const char *line, const char *word, int pos, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03302">app_confbridge.c:3302</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="bridge_8h_html_a815c9b3e933dfd4b8f523cf55caa5bbfabd40da8a498f3027c44dfa2e92d5f4ac"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfabd40da8a498f3027c44dfa2e92d5f4ac">AST_BRIDGE_CAPABILITY_MULTIMIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00094">bridge.h:94</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aea593709aae4f44a21021a40d733a9a0"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aea593709aae4f44a21021a40d733a9a0">async_playback_task_data_alloc</a></div><div class="ttdeci">static struct async_playback_task_data * async_playback_task_data_alloc(struct confbridge_conference *conference, const char *filename, int say_number, struct ast_channel *initiator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02141">app_confbridge.c:2141</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a82a439e20f31112e595909550f5201c4"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a82a439e20f31112e595909550f5201c4">ast_attended_transfer_message::to_transfer_target</a></div><div class="ttdeci">struct ast_bridge_channel_snapshot_pair to_transfer_target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00327">stasis_bridges.h:327</a></div></div>
<div class="ttc" id="pbx_8h_html_a82a6116c57689246592c0707b8eec102"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a82a6116c57689246592c0707b8eec102">ast_custom_function_register_escalating</a></div><div class="ttdeci">#define ast_custom_function_register_escalating(acf, escalation)</div><div class="ttdoc">Register a custom function which requires escalated privileges. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01517">pbx.h:1517</a></div></div>
<div class="ttc" id="ael__main_8c_html_a55602ca214fb365e8deef9a73c8442e7"><div class="ttname"><a href="../../d2/db7/ael__main_8c.html#a55602ca214fb365e8deef9a73c8442e7">quiet</a></div><div class="ttdeci">static int quiet</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00123">ael_main.c:123</a></div></div>
<div class="ttc" id="structast__bridge__features_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge_features::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00271">bridge_features.h:271</a></div></div>
<div class="ttc" id="structast__pbx_html"><div class="ttname"><a href="../../d6/d83/structast__pbx.html">ast_pbx</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00211">pbx.h:211</a></div></div>
<div class="ttc" id="structast__bridge__features_html_ad1ee5fa0669878cce5cf86ca3d3dd921"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">ast_bridge_features::text_messaging</a></div><div class="ttdeci">unsigned int text_messaging</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00283">bridge_features.h:283</a></div></div>
<div class="ttc" id="bridge_8h_html_a98000e740561c2e40e39f9edd191c38a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a98000e740561c2e40e39f9edd191c38a">ast_bridge_remove_video_src</a></div><div class="ttdeci">void ast_bridge_remove_video_src(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">remove a channel as a source of video for the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03984">bridge.c:3984</a></div></div>
<div class="ttc" id="manager_8h_html_a420f0f755e1c3378b45ca7f6f0669ffa"><div class="ttname"><a href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a></div><div class="ttdeci">#define EVENT_FLAG_SYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00071">manager.h:71</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_afca3a77b00f712ba54bde64ee1e007ee"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#afca3a77b00f712ba54bde64ee1e007ee">bridge_profile_sounds::begin</a></div><div class="ttdeci">const ast_string_field begin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a90af4a37744f546793c64b6028efcab1"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a90af4a37744f546793c64b6028efcab1">async_playback_task_data_destroy</a></div><div class="ttdeci">static void async_playback_task_data_destroy(struct async_playback_task_data *aptd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02187">app_confbridge.c:2187</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="bridge_8h_html_aaba0073c46b7c4e52f55a0f34036f43b"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aaba0073c46b7c4e52f55a0f34036f43b">ast_bridge_set_send_sdp_label</a></div><div class="ttdeci">void ast_bridge_set_send_sdp_label(struct ast_bridge *bridge, unsigned int send_sdp_label)</div><div class="ttdoc">Controls whether to send a &quot;label&quot; attribute in each stream in an SDP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04033">bridge.c:4033</a></div></div>
<div class="ttc" id="structconfbridge__state_html_a979bb905c490d19212a883df0322ef77"><div class="ttname"><a href="../../d3/db9/structconfbridge__state.html#a979bb905c490d19212a883df0322ef77">confbridge_state::leave_marked</a></div><div class="ttdeci">conference_event_fn leave_marked</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00055">conf_state.h:55</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a50da2481e1b2dee0996facfd2e75a3b7"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a50da2481e1b2dee0996facfd2e75a3b7">CONF_SOUND_ONLY_PERSON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00181">confbridge.h:181</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a11020411a5fd2a9987e0c5fd44d1eedb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a11020411a5fd2a9987e0c5fd44d1eedb">async_datastore_info</a></div><div class="ttdeci">static struct ast_datastore_info async_datastore_info</div><div class="ttdoc">Datastore used for timing of async announcement playback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02080">app_confbridge.c:2080</a></div></div>
<div class="ttc" id="conf__chan__announce_8c_html_afdb66683abdcb6c75fd7531778d97e9a"><div class="ttname"><a href="../../d8/d4f/conf__chan__announce_8c.html#afdb66683abdcb6c75fd7531778d97e9a">conf_announce_channel_push</a></div><div class="ttdeci">int conf_announce_channel_push(struct ast_channel *ast)</div><div class="ttdoc">Push the announcer channel into the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/conf__chan__announce_8c_source.html#l00144">conf_chan_announce.c:144</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a7b2ea4c9f3ad44bb831a633712da35ca"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a7b2ea4c9f3ad44bb831a633712da35ca">async_play_sound_file</a></div><div class="ttdeci">int async_play_sound_file(struct confbridge_conference *conference, const char *filename, struct ast_channel *initiator)</div><div class="ttdoc">Play sound file into conference bridge asynchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02282">app_confbridge.c:2282</a></div></div>
<div class="ttc" id="structpbx__find__info_html"><div class="ttname"><a href="../../db/d81/structpbx__find__info.html">pbx_find_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00230">extconf.h:230</a></div></div>
<div class="ttc" id="confbridge_8h_html_a6c6d45b3173fa54bfb780e8b01dbe408"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a6c6d45b3173fa54bfb780e8b01dbe408">DEFAULT_TALKING_THRESHOLD</a></div><div class="ttdeci">#define DEFAULT_TALKING_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00046">confbridge.h:46</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab48652fefbb21d29ec00098cd9d1c375"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab48652fefbb21d29ec00098cd9d1c375">action_lock_unlock_helper</a></div><div class="ttdeci">static int action_lock_unlock_helper(struct mansession *s, const struct message *m, int lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04008">app_confbridge.c:4008</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="bridge_8h_html_a5bff6bf264928e1fff47eb6968192228"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a5bff6bf264928e1fff47eb6968192228">ast_brige_set_remb_behavior</a></div><div class="ttdeci">void ast_brige_set_remb_behavior(struct ast_bridge *bridge, enum ast_bridge_video_sfu_remb_behavior behavior)</div><div class="ttdoc">Set the REMB report generation behavior on a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03865">bridge.c:3865</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="json_8h_html"><div class="ttname"><a href="../../d4/d05/json_8h.html">json.h</a></div><div class="ttdoc">Asterisk JSON abstraction layer. </div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3">ast_bridge_hook_type</a></div><div class="ttdeci">ast_bridge_hook_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00188">bridge_features.h:188</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a0d82d814db405d902f4843b46f70ed15"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a0d82d814db405d902f4843b46f70ed15">send_conf_start_event</a></div><div class="ttdeci">static void send_conf_start_event(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00659">app_confbridge.c:659</a></div></div>
<div class="ttc" id="module_8h_html_a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223"><div class="ttname"><a href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00317">module.h:317</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a5547a93d1e1ae584acf3e78846da655f"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a5547a93d1e1ae584acf3e78846da655f">handle_cli_confbridge_lock</a></div><div class="ttdeci">static char * handle_cli_confbridge_lock(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03655">app_confbridge.c:3655</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af289d880969d8d4ed7854c42100ec449"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af289d880969d8d4ed7854c42100ec449">handle_cli_confbridge_list_item</a></div><div class="ttdeci">static void handle_cli_confbridge_list_item(struct ast_cli_args *a, struct confbridge_user *user, int waiting)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03388">app_confbridge.c:3388</a></div></div>
<div class="ttc" id="paths_8h_html"><div class="ttname"><a href="../../dd/df2/paths_8h.html">paths.h</a></div><div class="ttdoc">Asterisk file paths, configured in asterisk.conf. </div></div>
<div class="ttc" id="structplayback__task__data_html_a196ae2bebfe61feb1ffb97c5d2d18ef2"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">playback_task_data::conference</a></div><div class="ttdeci">struct confbridge_conference * conference</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01944">app_confbridge.c:1944</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gabf7c909efbfc26d0d9c66786c83b8f69"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a></div><div class="ttdeci">void astman_send_list_complete_end(struct mansession *s)</div><div class="ttdoc">End the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03245">manager.c:3245</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa04698fde942bcfa285396c19d0b2a48c"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa04698fde942bcfa285396c19d0b2a48c">BRIDGE_OPT_REMB_BEHAVIOR_AVERAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00084">confbridge.h:84</a></div></div>
<div class="ttc" id="structast__channel__snapshot__dialplan_html_af535fe520577fb6b8795dea539bd0230"><div class="ttname"><a href="../../dc/d3d/structast__channel__snapshot__dialplan.html#af535fe520577fb6b8795dea539bd0230">ast_channel_snapshot_dialplan::appl</a></div><div class="ttdeci">const ast_string_field appl</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00070">stasis_channels.h:70</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a83781d043ea2270c3baf377e3c6bae86"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a83781d043ea2270c3baf377e3c6bae86">bridge_profile_sounds::errormenu</a></div><div class="ttdeci">const ast_string_field errormenu</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a41b39e78c1d90a965f27a0ff96e52387"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a41b39e78c1d90a965f27a0ff96e52387">confbridge_function</a></div><div class="ttdeci">static struct ast_custom_function confbridge_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03810">app_confbridge.c:3810</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab7d739f01d81cf85b6b6ccabbe57ae2f"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab7d739f01d81cf85b6b6ccabbe57ae2f">async_datastore_data_alloc</a></div><div class="ttdeci">static struct async_datastore_data * async_datastore_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02085">app_confbridge.c:2085</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a91ddf65a979dd82086b523285d32b3e0"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a91ddf65a979dd82086b523285d32b3e0">conf_handle_dtmf</a></div><div class="ttdeci">int conf_handle_dtmf(struct ast_bridge_channel *bridge_channel, struct confbridge_user *user, struct conf_menu_entry *menu_entry, struct conf_menu *menu)</div><div class="ttdoc">Once a DTMF sequence matches a sequence in the user&amp;#39;s DTMF menu, this function will get called to per...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03214">app_confbridge.c:3214</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="structast__custom__function_html"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html">ast_custom_function</a></div><div class="ttdoc">Data structure associated with a custom dialplan function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00118">pbx.h:118</a></div></div>
<div class="ttc" id="structast__attended__transfer__message_html_a9b1d5bd6bf7fd25f9a35a6e3717f9959"><div class="ttname"><a href="../../df/d6d/structast__attended__transfer__message.html#a9b1d5bd6bf7fd25f9a35a6e3717f9959">ast_attended_transfer_message::transferee</a></div><div class="ttdeci">struct ast_channel_snapshot * transferee</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00331">stasis_bridges.h:331</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="pbx_8h_html_a2c502c100b8b4791d9efe395e08d620b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2c502c100b8b4791d9efe395e08d620b">ast_pbx_run_args</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_run_args(struct ast_channel *c, struct ast_pbx_args *args)</div><div class="ttdoc">Execute the PBX in the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04739">pbx.c:4739</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a6c41b83a47f1b19d4324afcf53be5a49"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a6c41b83a47f1b19d4324afcf53be5a49">conf_bridge_profile_destroy</a></div><div class="ttdeci">void conf_bridge_profile_destroy(struct bridge_profile *b_profile)</div><div class="ttdoc">Destroy a bridge profile found by &amp;#39;conf_find_bridge_profile&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02531">conf_config_parser.c:2531</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_abf6fc30e7ace72d9e867cd6d06d01c0a"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#abf6fc30e7ace72d9e867cd6d06d01c0a">conf_handle_first_join</a></div><div class="ttdeci">void conf_handle_first_join(struct confbridge_conference *conference)</div><div class="ttdoc">Callback to execute any time we transition from zero to one active users. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01457">app_confbridge.c:1457</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a4e32fecfe809b9343c6a64d3909c678d"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a4e32fecfe809b9343c6a64d3909c678d">send_stop_record_event</a></div><div class="ttdeci">static void send_stop_record_event(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00702">app_confbridge.c:702</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35ba1fa9d011ae5e2f298c3875155a2a3e2f"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba1fa9d011ae5e2f298c3875155a2a3e2f">AST_BRIDGE_VIDEO_SFU_REMB_HIGHEST_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00143">bridge.h:143</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a25950d518afe66f772dad6891a93b991"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a25950d518afe66f772dad6891a93b991">conf_reload_config</a></div><div class="ttdeci">int conf_reload_config(void)</div><div class="ttdoc">reload confbridge.conf file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02472">conf_config_parser.c:2472</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab0992cd9d6fe1c4244cdbb9c0ffd2c6e"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab0992cd9d6fe1c4244cdbb9c0ffd2c6e">async_delete_name_rec</a></div><div class="ttdeci">static int async_delete_name_rec(struct confbridge_conference *conference, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02492">app_confbridge.c:2492</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_ae182176861b13b6c64bc247a33f3a50f"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#ae182176861b13b6c64bc247a33f3a50f">bridge_profile_sounds::binauraloff</a></div><div class="ttdeci">const ast_string_field binauraloff</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffafcba7558b57bbfa66361e0fdce865e99"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffafcba7558b57bbfa66361e0fdce865e99">BRIDGE_OPT_VIDEO_SRC_FIRST_MARKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00078">confbridge.h:78</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444aa4c16c3a1a317253eace111e15f40e6d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444aa4c16c3a1a317253eace111e15f40e6d">AST_BRIDGE_FLAG_MASQUERADE_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00051">bridge_features.h:51</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a0ce0cba48a05e992316f0e27f8a48452"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a0ce0cba48a05e992316f0e27f8a48452">async_delete_name_rec_task_data_alloc</a></div><div class="ttdeci">static struct async_delete_name_rec_task_data * async_delete_name_rec_task_data_alloc(struct confbridge_conference *conference, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02449">app_confbridge.c:2449</a></div></div>
<div class="ttc" id="conf__chan__announce_8c_html_a05ce8036bf22aed79b497b16f066cdf3"><div class="ttname"><a href="../../d8/d4f/conf__chan__announce_8c.html#a05ce8036bf22aed79b497b16f066cdf3">conf_announce_get_tech</a></div><div class="ttdeci">struct ast_channel_tech * conf_announce_get_tech(void)</div><div class="ttdoc">Get ConfBridge announce channel technology struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/conf__chan__announce_8c_source.html#l00139">conf_chan_announce.c:139</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04492">app_confbridge.c:4492</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa746f4569fd42c3e13fd27dd14887b394"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa746f4569fd42c3e13fd27dd14887b394">BRIDGE_OPT_VIDEO_SRC_SFU</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00083">confbridge.h:83</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3e9bdb7b62b531f001b7dcb5c39b3551"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a></div><div class="ttdeci">int ast_bridge_interval_hook(struct ast_bridge_features *features, enum ast_bridge_hook_timer_option flags, unsigned int interval, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach an interval hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03382">bridge.c:3382</a></div></div>
<div class="ttc" id="structplayback__task__data_html_afe4ed8fe6d2b063abbfe4b5683d68957"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">playback_task_data::say_number</a></div><div class="ttdeci">int say_number</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01946">app_confbridge.c:1946</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a8f882f130b89dd63d656d176884095a1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a8f882f130b89dd63d656d176884095a1">MAXIMUM_DTMF_FEATURE_STRING</a></div><div class="ttdeci">#define MAXIMUM_DTMF_FEATURE_STRING</div><div class="ttdoc">Maximum length of a DTMF feature string. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00217">bridge_features.h:217</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aba18f75e10a4c0aaa4d6de41aa30c09e"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aba18f75e10a4c0aaa4d6de41aa30c09e">conference_bridges</a></div><div class="ttdeci">struct ao2_container * conference_bridges</div><div class="ttdoc">Container to hold all conference bridges in progress. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00469">app_confbridge.c:469</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a9dec1062bd1f96b38031c28fdbb1731c"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a9dec1062bd1f96b38031c28fdbb1731c">action_mute_unmute_helper</a></div><div class="ttdeci">static int action_mute_unmute_helper(struct mansession *s, const struct message *m, int mute)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03966">app_confbridge.c:3966</a></div></div>
<div class="ttc" id="structasync__playback__task__data_html_afe4ed8fe6d2b063abbfe4b5683d68957"><div class="ttname"><a href="../../d4/d0a/structasync__playback__task__data.html#afe4ed8fe6d2b063abbfe4b5683d68957">async_playback_task_data::say_number</a></div><div class="ttdeci">int say_number</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02042">app_confbridge.c:2042</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="structbridge__profile_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#adf416dc058363e2fd5750c77e2d78bee">bridge_profile::language</a></div><div class="ttdeci">char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00227">confbridge.h:227</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a0840068eadef76e523fb0db7538be260"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a0840068eadef76e523fb0db7538be260">bridge_profile_sounds::waitforleader</a></div><div class="ttdeci">const ast_string_field waitforleader</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a3867e256f612cd8589e3ac89c3103ea1"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a3867e256f612cd8589e3ac89c3103ea1">USER_OPT_QUIET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00057">confbridge.h:57</a></div></div>
<div class="ttc" id="bridge_8h_html_a32767ed0f51795590f41a662523c88b0"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a32767ed0f51795590f41a662523c88b0">ast_bridge_base_new</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_base_new(uint32_t capabilities, unsigned int flags, const char *creator, const char *name, const char *id)</div><div class="ttdoc">Create a new base class bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00960">bridge.c:960</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffab8440977d98af91231044bd2ada8e7e0"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffab8440977d98af91231044bd2ada8e7e0">BRIDGE_OPT_REMB_BEHAVIOR_FORCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00091">confbridge.h:91</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a0fc754d37c92f0da32a396f7a7c09eb1">USER_OPT_WAITMARKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00059">confbridge.h:59</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structbridge__profile_html_a20440d4454d1d575acbba1e14c39cb28"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a20440d4454d1d575acbba1e14c39cb28">bridge_profile::maximum_sample_rate</a></div><div class="ttdeci">unsigned int maximum_sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00234">confbridge.h:234</a></div></div>
<div class="ttc" id="manager_8h_html_a777cde87d12b331902f862ec44641688"><div class="ttname"><a href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00561">manager_channels.c:561</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a6ecf3d9a3881bfc58263b352372907a0"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a6ecf3d9a3881bfc58263b352372907a0">MENU_ACTION_DIALPLAN_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00104">confbridge.h:104</a></div></div>
<div class="ttc" id="structpost__join__action_html_a378d0111468d21961a0aa0f4d34dbb90"><div class="ttname"><a href="../../df/d46/structpost__join__action.html#a378d0111468d21961a0aa0f4d34dbb90">post_join_action::func</a></div><div class="ttdeci">int(* func)(struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00266">confbridge.h:266</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a445038d41045ab9d671e4f30aecd9e98"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a445038d41045ab9d671e4f30aecd9e98">cli_mute_unmute_helper</a></div><div class="ttdeci">static int cli_mute_unmute_helper(int mute, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03574">app_confbridge.c:3574</a></div></div>
<div class="ttc" id="structast__channel__tech_html"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a></div><div class="ttdoc">Structure to describe a channel &quot;technology&quot;, ie a channel driver See for examples: ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00629">channel.h:629</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="app__confbridge_8c_html_a3e82c60adbdb6e6b7980d95651fbf7f0"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a3e82c60adbdb6e6b7980d95651fbf7f0">action_confbridgestoprecord</a></div><div class="ttdeci">static int action_confbridgestoprecord(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04115">app_confbridge.c:4115</a></div></div>
<div class="ttc" id="structbridge__profile_html_ac4a5819e66f436d283aa19d986f04e52"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#ac4a5819e66f436d283aa19d986f04e52">bridge_profile::internal_sample_rate</a></div><div class="ttdeci">unsigned int internal_sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00233">confbridge.h:233</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="structconf__menu__action_html_a7fed7344d1400c3ca5099cd399c5d106"><div class="ttname"><a href="../../d1/d6f/structconf__menu__action.html#a7fed7344d1400c3ca5099cd399c5d106">conf_menu_action::dialplan_args</a></div><div class="ttdeci">struct conf_menu_action::@84::@86 dialplan_args</div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="confbridge_8h_html_a375e2ce6818e95a27d583702d02d52a3"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a375e2ce6818e95a27d583702d02d52a3">confbridge_stop_record_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_stop_record_type(void)</div><div class="ttdoc">get the confbridge stop_record stasis message type </div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="bridge_8h_html_a46b990e3c3b853c3f9d19f2924dff5d1"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a46b990e3c3b853c3f9d19f2924dff5d1">ast_bridge_set_video_update_discard</a></div><div class="ttdeci">void ast_bridge_set_video_update_discard(struct ast_bridge *bridge, unsigned int video_update_discard)</div><div class="ttdoc">Set the amount of time to discard subsequent video updates after a video update has been sent...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03849">bridge.c:3849</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a18875695672c63a4829f83975c519077"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a18875695672c63a4829f83975c519077">confbridge_conference::state</a></div><div class="ttdeci">struct confbridge_state * state</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00246">confbridge.h:246</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ad3a4e20fa303b1699bc4b105398af0f0"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ad3a4e20fa303b1699bc4b105398af0f0">action_confbridgelock</a></div><div class="ttdeci">static int action_confbridgelock(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04032">app_confbridge.c:4032</a></div></div>
<div class="ttc" id="structhangup__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#a1c7181c39f99ee801943a0d0aa9872b9">hangup_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01117">app_confbridge.c:1117</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1ac62e5eb942140605ba3fe1c1d7275688"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1ac62e5eb942140605ba3fe1c1d7275688">CONF_SOUND_MUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00171">confbridge.h:171</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa417a64e52a78102253a27d209ed16bf8"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa417a64e52a78102253a27d209ed16bf8">BRIDGE_OPT_VIDEO_SRC_FOLLOW_TALKER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00079">confbridge.h:79</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa76e30c9525a9f661ee4f4bf46b5788c6"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa76e30c9525a9f661ee4f4bf46b5788c6">BRIDGE_OPT_BINAURAL_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00082">confbridge.h:82</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structuser__profile_html_ad3479638ded235d29e4bbba475abe931"><div class="ttname"><a href="../../de/df0/structuser__profile.html#ad3479638ded235d29e4bbba475abe931">user_profile::pin</a></div><div class="ttdeci">char pin[MAX_PIN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00154">confbridge.h:154</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a2fd4f67d74be01d58941bb8ab1aa2e88"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a2fd4f67d74be01d58941bb8ab1aa2e88">MENU_ACTION_TOGGLE_BINAURAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00113">confbridge.h:113</a></div></div>
<div class="ttc" id="structconf__menu__action_html_ab35b6e8fcf1018b072b1fdf1c117686e"><div class="ttname"><a href="../../d1/d6f/structconf__menu__action.html#ab35b6e8fcf1018b072b1fdf1c117686e">conf_menu_action::playback_file</a></div><div class="ttdeci">char playback_file[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00123">confbridge.h:123</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a86bcab7d021c72030f52bace16f95367"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a86bcab7d021c72030f52bace16f95367">conf_start_record</a></div><div class="ttdeci">static int conf_start_record(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00851">app_confbridge.c:851</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a9ed40fc6a252b84f86044f975cc94283"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">ast_bridge_features::dtmf_passthrough</a></div><div class="ttdeci">unsigned int dtmf_passthrough</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00279">bridge_features.h:279</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="structconfbridge__hook__data_html_aabe405b9e3bc77da62794df520feb6f7"><div class="ttname"><a href="../../d2/dd4/structconfbridge__hook__data.html#aabe405b9e3bc77da62794df520feb6f7">confbridge_hook_data::user</a></div><div class="ttdeci">struct confbridge_user * user</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02526">app_confbridge.c:2526</a></div></div>
<div class="ttc" id="structhangup__data_html"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html">hangup_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01113">app_confbridge.c:1113</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab2025b0d7b6930ebe21e9835a5868708"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab2025b0d7b6930ebe21e9835a5868708">action_toggle_binaural</a></div><div class="ttdeci">static int action_toggle_binaural(struct confbridge_conference *conference, struct confbridge_user *user, struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02881">app_confbridge.c:2881</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_abff61e66b7a63e3a68ff1ae51092a804"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#abff61e66b7a63e3a68ff1ae51092a804">conf_moh_start</a></div><div class="ttdeci">void conf_moh_start(struct confbridge_user *user)</div><div class="ttdoc">Start MOH for the conference user. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01360">app_confbridge.c:1360</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af61ee1bb9ab06e76339539788ca48479"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af61ee1bb9ab06e76339539788ca48479">send_conf_stasis</a></div><div class="ttdeci">static void send_conf_stasis(struct confbridge_conference *conference, struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *extras, int channel_topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00585">app_confbridge.c:585</a></div></div>
<div class="ttc" id="structbridge__profile_html_a827ffb5b7363100b4470c4cd5ec2332e"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a827ffb5b7363100b4470c4cd5ec2332e">bridge_profile::video_update_discard</a></div><div class="ttdeci">unsigned int video_update_discard</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00238">confbridge.h:238</a></div></div>
<div class="ttc" id="structast__bridge__channel__snapshot__pair_html_adc69b45f11dbab86e83609b31b952033"><div class="ttname"><a href="../../da/db4/structast__bridge__channel__snapshot__pair.html#adc69b45f11dbab86e83609b31b952033">ast_bridge_channel_snapshot_pair::channel_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * channel_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4e/stasis__bridges_8h_source.html#l00235">stasis_bridges.h:235</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structbridge__profile_html_a0637d52ef1a2a05bb7af6bb84ec0197d"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a0637d52ef1a2a05bb7af6bb84ec0197d">bridge_profile::rec_options</a></div><div class="ttdeci">char rec_options[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00229">confbridge.h:229</a></div></div>
<div class="ttc" id="structhangup__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">hangup_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02451">chan_pjsip.c:2451</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa4a07ae66e3fc78e5a35038be30ea773b"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa4a07ae66e3fc78e5a35038be30ea773b">BRIDGE_OPT_VIDEO_SRC_LAST_MARKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00077">confbridge.h:77</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ae0daf457eb908b81a0ec7a96bdfac222"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ae0daf457eb908b81a0ec7a96bdfac222">RECORD_FILENAME_INITIAL_SPACE</a></div><div class="ttdeci">#define RECORD_FILENAME_INITIAL_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00466">app_confbridge.c:466</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_ad2996174a9ef467fd418bfc4045d67bf"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#ad2996174a9ef467fd418bfc4045d67bf">conf_destroy_config</a></div><div class="ttdeci">void conf_destroy_config(void)</div><div class="ttdoc">destroy the information loaded from the confbridge.conf file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02694">conf_config_parser.c:2694</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a92f6fdccdb7fe0169c435a2dfb85c772"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a92f6fdccdb7fe0169c435a2dfb85c772">USER_OPT_MUSICONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00056">confbridge.h:56</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structasync__datastore__data_html"><div class="ttname"><a href="../../df/d8d/structasync__datastore__data.html">async_datastore_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02047">app_confbridge.c:2047</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a02f83920c93cce65a8c16ecc0edd8c28"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a02f83920c93cce65a8c16ecc0edd8c28">conf_handle_only_person</a></div><div class="ttdeci">int conf_handle_only_person(struct confbridge_user *user)</div><div class="ttdoc">Handle actions whenever an user joins an empty conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01432">app_confbridge.c:1432</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af3d0d8d091f0b152452a460ec8d77e05"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af3d0d8d091f0b152452a460ec8d77e05">confbridge_unlock_and_unref</a></div><div class="ttdeci">static void confbridge_unlock_and_unref(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01551">app_confbridge.c:1551</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a7b35e4f298b75cd77e4e4bb4d2ddaba5"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a7b35e4f298b75cd77e4e4bb4d2ddaba5">bridge_profile_sounds::getpin</a></div><div class="ttdeci">const ast_string_field getpin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a7670668a4f2693b10f8e86eaf770e4b0"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a7670668a4f2693b10f8e86eaf770e4b0">MENU_ACTION_DECREASE_LISTENING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00099">confbridge.h:99</a></div></div>
<div class="ttc" id="confbridge_8h_html_af06136a3da0a98829d389f3d061bc8e8"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#af06136a3da0a98829d389f3d061bc8e8">MAX_CONF_NAME</a></div><div class="ttdeci">#define MAX_CONF_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00035">confbridge.h:35</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1aba6e7263418ca6e10ed062e1660815ba"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1aba6e7263418ca6e10ed062e1660815ba">CONF_SOUND_UNLOCKED_NOW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00184">confbridge.h:184</a></div></div>
<div class="ttc" id="file_8h_html_abb7bdff3c549191072878402b0a0ca9c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a></div><div class="ttdeci">#define AST_DIGIT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00047">file.h:47</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af1ab64d133bf4b422073e111c8b0728e"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af1ab64d133bf4b422073e111c8b0728e">async_playback_task</a></div><div class="ttdeci">static int async_playback_task(void *data)</div><div class="ttdoc">Play an announcement into a confbridge asynchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02233">app_confbridge.c:2233</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ac567c84195db9be54dd509071c65d5e7"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ac567c84195db9be54dd509071c65d5e7">generic_mute_unmute_helper</a></div><div class="ttdeci">static int generic_mute_unmute_helper(int mute, const char *conference_name, const char *chan_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03528">app_confbridge.c:3528</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a18a3a8f373661dd2e20ddb9035abead2"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a18a3a8f373661dd2e20ddb9035abead2">confbridge_user::muted</a></div><div class="ttdeci">unsigned int muted</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00281">confbridge.h:281</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00604">bridge.h:604</a></div></div>
<div class="ttc" id="bridge_8h_html_adb755c02424a98c8ec3bd636c609e120"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#adb755c02424a98c8ec3bd636c609e120">ast_bridge_is_video_src</a></div><div class="ttdeci">int ast_bridge_is_video_src(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is a video src for the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03958">bridge.c:3958</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a8dcaa78528e94a4bdc17e3986a4ce20d"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a8dcaa78528e94a4bdc17e3986a4ce20d">bridge_profile_sounds::participantsmuted</a></div><div class="ttdeci">const ast_string_field participantsmuted</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35ba83b326eea831aaf8864b88955e7fe7a4"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba83b326eea831aaf8864b88955e7fe7a4">AST_BRIDGE_VIDEO_SFU_REMB_HIGHEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00137">bridge.h:137</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structasync__datastore__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../df/d8d/structasync__datastore__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_datastore_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02049">app_confbridge.c:2049</a></div></div>
<div class="ttc" id="structplayback__task__data_html"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html">playback_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01943">app_confbridge.c:1943</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aec406215395213c0d9b65a8cd622039b"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aec406215395213c0d9b65a8cd622039b">send_conf_stasis_snapshots</a></div><div class="ttdeci">static void send_conf_stasis_snapshots(struct confbridge_conference *conference, struct ast_channel_snapshot *chan_snapshot, struct stasis_message_type *type, struct ast_json *extras)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00622">app_confbridge.c:622</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a6795c77d3d8042366c64e2d394863481"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a6795c77d3d8042366c64e2d394863481">CONF_SOUND_PARTICIPANTS_MUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00188">confbridge.h:188</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a675ebd613588a960e37bd6fa2477f30f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a675ebd613588a960e37bd6fa2477f30f">ast_play_and_record</a></div><div class="ttdeci">int ast_play_and_record(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime_sec, const char *fmt, int *duration, int *sound_duration, int silencethreshold, int maxsilence_ms, const char *path)</div><div class="ttdoc">Record a file based on input from a channel. Use default accept and cancel DTMF. This function will p...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01997">main/app.c:1997</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3ac47686eedfc6349818302b402b72461d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3ac47686eedfc6349818302b402b72461d">AST_BRIDGE_HOOK_TYPE_LEAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00195">bridge_features.h:195</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_a1229bdedff51a0fc453b7c482cd8dd49"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#a1229bdedff51a0fc453b7c482cd8dd49">sip_to_pjsip.ignore</a></div><div class="ttdeci">def ignore(key=None, val=None, section=None, pjsip=None, nmapped=None, type='endpoint')</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l00048">sip_to_pjsip.py:48</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a676b75acfdc72d821ac2a85fd14cba0d"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a676b75acfdc72d821ac2a85fd14cba0d">handle_video_on_join</a></div><div class="ttdeci">static void handle_video_on_join(struct confbridge_conference *conference, struct ast_channel *chan, int marked)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01043">app_confbridge.c:1043</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a95241898553c1d42ea46964b277433ad"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a95241898553c1d42ea46964b277433ad">ast_bridge_snapshot_create</a></div><div class="ttdeci">struct ast_bridge_snapshot * ast_bridge_snapshot_create(struct ast_bridge *bridge)</div><div class="ttdoc">Generate a snapshot of the bridge state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00202">stasis_bridges.c:202</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="bridge_8h_html_ae7f6701ef6b78dea4da4723994d9c211"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ae7f6701ef6b78dea4da4723994d9c211">ast_bridge_set_remb_send_interval</a></div><div class="ttdeci">void ast_bridge_set_remb_send_interval(struct ast_bridge *bridge, unsigned int remb_send_interval)</div><div class="ttdoc">Set the interval at which a combined REMB frame will be sent to video sources. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03856">bridge.c:3856</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a817e8efc5e46a8b97e73046549fbc443"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a817e8efc5e46a8b97e73046549fbc443">async_datastore_data_destroy</a></div><div class="ttdeci">static void async_datastore_data_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02053">app_confbridge.c:2053</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a1e37109bb72d95999821eb45f28c261c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a></div><div class="ttdeci">#define AST_LIST_LAST(head)</div><div class="ttdoc">Returns the last entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00428">linkedlists.h:428</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a08c3d1fe162cebc00303b9a9bf54eabb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a08c3d1fe162cebc00303b9a9bf54eabb">conf_moh_stop</a></div><div class="ttdeci">void conf_moh_stop(struct confbridge_user *user)</div><div class="ttdoc">Stop MOH for the conference user. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01333">app_confbridge.c:1333</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a3603c24dc6ec2ae56a0f87032c93ef90"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a3603c24dc6ec2ae56a0f87032c93ef90">CONF_SOUND_GET_PIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00179">confbridge.h:179</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa878ab09424035dc6fd7646205a29fe70"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa878ab09424035dc6fd7646205a29fe70">BRIDGE_OPT_REMB_BEHAVIOR_LOWEST_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00089">confbridge.h:89</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structbridge__profile_html_ae051ef7bd04982b20b62b3c429e775a8"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#ae051ef7bd04982b20b62b3c429e775a8">bridge_profile::max_members</a></div><div class="ttdeci">unsigned int max_members</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00232">confbridge.h:232</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a54a894c2cece2bca0aad149141198b27"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a54a894c2cece2bca0aad149141198b27">conf_add_user_waiting</a></div><div class="ttdeci">void conf_add_user_waiting(struct confbridge_conference *conference, struct confbridge_user *user)</div><div class="ttdoc">Add a conference bridge user as an waiting user of the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04316">app_confbridge.c:4316</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a94df77401f42e8434e7a9347fffe727d"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a94df77401f42e8434e7a9347fffe727d">bridge_profile_sounds::leave</a></div><div class="ttdeci">const ast_string_field leave</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structuser__profile_html_a91f62b0358f1b431bc3907b81c401447"><div class="ttname"><a href="../../de/df0/structuser__profile.html#a91f62b0358f1b431bc3907b81c401447">user_profile::talking_threshold</a></div><div class="ttdeci">unsigned int talking_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00160">confbridge.h:160</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_ad8d1610fe8df62b22eede33ad7447a56"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#ad8d1610fe8df62b22eede33ad7447a56">bridge_profile_sounds::lockednow</a></div><div class="ttdeci">const ast_string_field lockednow</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="confbridge__manager_8c_html_a5828604897d724f97df62e8e7480dcc5"><div class="ttname"><a href="../../dd/d92/confbridge__manager_8c.html#a5828604897d724f97df62e8e7480dcc5">manager_confbridge_shutdown</a></div><div class="ttdeci">void manager_confbridge_shutdown(void)</div><div class="ttdoc">unregister stasis message routers to handle manager events for confbridge messages ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d92/confbridge__manager_8c_source.html#l00698">confbridge_manager.c:698</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1">conf_sounds</a></div><div class="ttdeci">conf_sounds</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00167">confbridge.h:167</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ad6bef189a3c92336d5b7cf68686917bb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ad6bef189a3c92336d5b7cf68686917bb">conf_is_recording</a></div><div class="ttdeci">static int conf_is_recording(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00803">app_confbridge.c:803</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_abc02d32a4392fd90c575dd8a9e1de07d"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#abc02d32a4392fd90c575dd8a9e1de07d">conf_set_menu_to_user</a></div><div class="ttdeci">int conf_set_menu_to_user(struct ast_channel *chan, struct confbridge_user *user, const char *menu_profile_name)</div><div class="ttdoc">find a menu profile given a menu profile&amp;#39;s name and apply the menu in DTMF hooks. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02656">conf_config_parser.c:2656</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structasync__delete__name__rec__task__data_html"><div class="ttname"><a href="../../da/daf/structasync__delete__name__rec__task__data.html">async_delete_name_rec_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02444">app_confbridge.c:2444</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a5395950c15761028bedce9fb173077a1"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a5395950c15761028bedce9fb173077a1">bridge_profile_sounds::binauralon</a></div><div class="ttdeci">const ast_string_field binauralon</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a2ddaf9054cceb938e8d00e8e0363d845"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a2ddaf9054cceb938e8d00e8e0363d845">CONF_SOUND_LOCKED_NOW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00183">confbridge.h:183</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffaae9ec029957beba41dd62d7e98b9c915"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffaae9ec029957beba41dd62d7e98b9c915">BRIDGE_OPT_RECORD_FILE_TIMESTAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00081">confbridge.h:81</a></div></div>
<div class="ttc" id="structconfbridge__state_html_a0d0eaf2e456cc0a7cf2a58682976da29"><div class="ttname"><a href="../../d3/db9/structconfbridge__state.html#a0d0eaf2e456cc0a7cf2a58682976da29">confbridge_state::join_waitmarked</a></div><div class="ttdeci">conference_event_fn join_waitmarked</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00051">conf_state.h:51</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_add4efc724870cceaa73010102ab55a74"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#add4efc724870cceaa73010102ab55a74">execute_menu_entry</a></div><div class="ttdeci">static int execute_menu_entry(struct confbridge_conference *conference, struct confbridge_user *user, struct ast_bridge_channel *bridge_channel, struct conf_menu_entry *menu_entry, struct conf_menu *menu)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03103">app_confbridge.c:3103</a></div></div>
<div class="ttc" id="structuser__profile_html_a25af7eefd48048fb067a60b8e295caf1"><div class="ttname"><a href="../../de/df0/structuser__profile.html#a25af7eefd48048fb067a60b8e295caf1">user_profile::timeout</a></div><div class="ttdeci">unsigned int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00164">confbridge.h:164</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a81b7b94e95d57a2227ba9c6bea429bd9"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a81b7b94e95d57a2227ba9c6bea429bd9">USER_OPT_TALKER_DETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00063">confbridge.h:63</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a86e9666ad94d8a21e270f06265c0e16a"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a86e9666ad94d8a21e270f06265c0e16a">bridge_profile_sounds::participantsunmuted</a></div><div class="ttdeci">const ast_string_field participantsunmuted</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="bridge_8h_html_a0a2e9bb75a3d3276cd8153e1f4a4a389"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0a2e9bb75a3d3276cd8153e1f4a4a389">ast_bridge_set_talker_src_video_mode</a></div><div class="ttdeci">void ast_bridge_set_talker_src_video_mode(struct ast_bridge *bridge)</div><div class="ttdoc">Set the bridge to pick the strongest talker supporting video as the single source video feed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03833">bridge.c:3833</a></div></div>
<div class="ttc" id="structasync__playback__task__data_html_afae8c108f5d360038fa8b099eb4ab2f3"><div class="ttname"><a href="../../d4/d0a/structasync__playback__task__data.html#afae8c108f5d360038fa8b099eb4ab2f3">async_playback_task_data::filename</a></div><div class="ttdeci">char filename[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02044">app_confbridge.c:2044</a></div></div>
<div class="ttc" id="structconfbridge__user_html_aa6178fe541706eed1f7198cb90180542"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#aa6178fe541706eed1f7198cb90180542">confbridge_user::b_profile</a></div><div class="ttdeci">struct bridge_profile b_profile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00273">confbridge.h:273</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ac3d7810910ab9457229c806c1abb9239"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ac3d7810910ab9457229c806c1abb9239">handle_cli_confbridge_unlock</a></div><div class="ttdeci">static char * handle_cli_confbridge_unlock(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03682">app_confbridge.c:3682</a></div></div>
<div class="ttc" id="structpbx__find__info_html_a31dd453024f17e9e35717368cf8c87fb"><div class="ttname"><a href="../../db/d81/structpbx__find__info.html#a31dd453024f17e9e35717368cf8c87fb">pbx_find_info::stacklen</a></div><div class="ttdeci">int stacklen</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00238">extconf.h:238</a></div></div>
<div class="ttc" id="structconfbridge__user_html_aa5f7287d4bbab0f62a1bae18af89171d"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#aa5f7287d4bbab0f62a1bae18af89171d">confbridge_user::features</a></div><div class="ttdeci">struct ast_bridge_features features</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00278">confbridge.h:278</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a0813ee6781d29ba0f7b248643194845d"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a0813ee6781d29ba0f7b248643194845d">push_announcer</a></div><div class="ttdeci">static int push_announcer(struct confbridge_conference *conference)</div><div class="ttdoc">Push the announcer channel into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01539">app_confbridge.c:1539</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a046f14d3fea7a6a0bd14e8937f667d16"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a046f14d3fea7a6a0bd14e8937f667d16">action_confbridgemute</a></div><div class="ttdeci">static int action_confbridgemute(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04003">app_confbridge.c:4003</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3ac3bd31ee1726dff2effa8f0f928f14e6"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3ac3bd31ee1726dff2effa8f0f928f14e6">MENU_ACTION_TOGGLE_MUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00095">confbridge.h:95</a></div></div>
<div class="ttc" id="channel_8h_html_af89b0f98c227230d7180a90627c0901c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af89b0f98c227230d7180a90627c0901c">ast_channel_pbx_set</a></div><div class="ttdeci">void ast_channel_pbx_set(struct ast_channel *chan, struct ast_pbx *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00725">channel_internal_api.c:725</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa189bf671f16a34b7043a89a32f5084df"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa189bf671f16a34b7043a89a32f5084df">BRIDGE_OPT_REMB_BEHAVIOR_HIGHEST_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00090">confbridge.h:90</a></div></div>
<div class="ttc" id="structconfbridge__conference_html"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html">confbridge_conference</a></div><div class="ttdoc">The structure that represents a conference bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00244">confbridge.h:244</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a50d6cad5ed8ba839b8fdb909d04ed108"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a50d6cad5ed8ba839b8fdb909d04ed108">func_confbridge_info</a></div><div class="ttdeci">static int func_confbridge_info(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04196">app_confbridge.c:4196</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a6103f2b3fd5b3b30ca362afe23ff461f"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a6103f2b3fd5b3b30ca362afe23ff461f">confbridge_conference::activeusers</a></div><div class="ttdeci">unsigned int activeusers</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00249">confbridge.h:249</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4aab69efd5897808436bd1a82abc10fba5"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4aab69efd5897808436bd1a82abc10fba5">USER_OPT_DROP_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00064">confbridge.h:64</a></div></div>
<div class="ttc" id="audiohook_8h_html_acf8f4fc0dfd6a5f54e301ac66c5bc434"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#acf8f4fc0dfd6a5f54e301ac66c5bc434">ast_audiohook_volume_adjust</a></div><div class="ttdeci">int ast_audiohook_volume_adjust(struct ast_channel *chan, enum ast_audiohook_direction direction, int volume)</div><div class="ttdoc">Adjust the volume on frames read from or written to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01397">audiohook.c:1397</a></div></div>
<div class="ttc" id="structconf__menu__action_html_a16ca95b04393f2e96e937ec88aa20eed"><div class="ttname"><a href="../../d1/d6f/structconf__menu__action.html#a16ca95b04393f2e96e937ec88aa20eed">conf_menu_action::data</a></div><div class="ttdeci">union conf_menu_action::@84 data</div></div>
<div class="ttc" id="paths_8h_html_a95c5b4ffe620dc96d1ea9311b35c4d4f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a></div><div class="ttdeci">const char * ast_config_AST_SPOOL_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00154">options.c:154</a></div></div>
<div class="ttc" id="structbridge__profile_html_a4d41e07a86f9575719f396ac801b0208"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a4d41e07a86f9575719f396ac801b0208">bridge_profile::regcontext</a></div><div class="ttdeci">char regcontext[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00237">confbridge.h:237</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a41ece0aa60ed0539f0d44f112f8b3d91"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a41ece0aa60ed0539f0d44f112f8b3d91">playback_task_data_destroy</a></div><div class="ttdeci">static void playback_task_data_destroy(struct playback_task_data *ptd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01991">app_confbridge.c:1991</a></div></div>
<div class="ttc" id="taskprocessor_8h_html"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html">taskprocessor.h</a></div><div class="ttdoc">An API for managing task processing threads that can be shared across modules. </div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a1f617173e9ccd424815974c7f08e1f7d"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a1f617173e9ccd424815974c7f08e1f7d">CONF_SOUND_INVALID_PIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00180">confbridge.h:180</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af4d6efe9e306e2947984d854d9282a27"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af4d6efe9e306e2947984d854d9282a27">handle_cli_confbridge_unmute</a></div><div class="ttdeci">static char * handle_cli_confbridge_unmute(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03624">app_confbridge.c:3624</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_abf54cf48145c35c5cd77b7e8dc7862b4"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#abf54cf48145c35c5cd77b7e8dc7862b4">bridge_profile_sounds::unmuted</a></div><div class="ttdeci">const ast_string_field unmuted</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af3f76858d4dd513e59dbe5e67bc46220"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af3f76858d4dd513e59dbe5e67bc46220">ast_app_getdata</a></div><div class="ttdeci">int ast_app_getdata(struct ast_channel *c, const char *prompt, char *s, int maxlen, int timeout)</div><div class="ttdoc">Plays a stream and gets DTMF data from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00197">main/app.c:197</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a135aea9764be6ade97935d728bdacae8"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a135aea9764be6ade97935d728bdacae8">send_event_hook_callback</a></div><div class="ttdeci">static int send_event_hook_callback(struct ast_bridge_channel *bridge_channel, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02530">app_confbridge.c:2530</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a2be372e2111b0c7f12ff8f8b1c40336f"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a2be372e2111b0c7f12ff8f8b1c40336f">unregister_channel_tech</a></div><div class="ttdeci">static void unregister_channel_tech(struct ast_channel_tech *tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04361">app_confbridge.c:4361</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a398e2e4eba6aa408d00415a115e4fa9b"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a398e2e4eba6aa408d00415a115e4fa9b">conf_handle_inactive_waitmarked</a></div><div class="ttdeci">int conf_handle_inactive_waitmarked(struct confbridge_user *user)</div><div class="ttdoc">Handle actions every time a waitmarked user joins w/o a marked user present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01421">app_confbridge.c:1421</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a643df55138b29ea6d301896822786fae"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a643df55138b29ea6d301896822786fae">conf_find_menu_entry_by_sequence</a></div><div class="ttdeci">int conf_find_menu_entry_by_sequence(const char *dtmf_sequence, struct conf_menu *menu, struct conf_menu_entry *result)</div><div class="ttdoc">Finds a menu_entry in a menu structure matched by DTMF sequence. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02610">conf_config_parser.c:2610</a></div></div>
<div class="ttc" id="confbridge__manager_8c_html_a343956e51d78b42095e635acc641a61a"><div class="ttname"><a href="../../dd/d92/confbridge__manager_8c.html#a343956e51d78b42095e635acc641a61a">conf_send_event_to_participants</a></div><div class="ttdeci">void conf_send_event_to_participants(struct confbridge_conference *conference, struct ast_channel *chan, struct stasis_message *msg)</div><div class="ttdoc">Send events to bridge participants. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d92/confbridge__manager_8c_source.html#l00414">confbridge_manager.c:414</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a426b1c7a3b0265c4e89ff6e46fe08c78"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a426b1c7a3b0265c4e89ff6e46fe08c78">action_playback</a></div><div class="ttdeci">static int action_playback(struct ast_bridge_channel *bridge_channel, const char *playback_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02937">app_confbridge.c:2937</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a33eea3a20d4a3edfc5596d604fbdf80f"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a33eea3a20d4a3edfc5596d604fbdf80f">action_playback_and_continue</a></div><div class="ttdeci">static int action_playback_and_continue(struct confbridge_conference *conference, struct confbridge_user *user, struct ast_bridge_channel *bridge_channel, struct conf_menu *menu, const char *playback_file, const char *cur_dtmf, int *stop_prompts)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02951">app_confbridge.c:2951</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__channel__tech_html_ac57ec035c076b222b9420a68ddab3bf1"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#ac57ec035c076b222b9420a68ddab3bf1">ast_channel_tech::description</a></div><div class="ttdeci">const char *const description</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00631">channel.h:631</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a2ad3272a82f68843830b668e79d2a418"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a2ad3272a82f68843830b668e79d2a418">USER_OPT_TEXT_MESSAGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00071">confbridge.h:71</a></div></div>
<div class="ttc" id="bridge_8h_html_a116a27b8e1e111729ee1828d4fab6b5a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a></div><div class="ttdeci">int ast_bridge_join(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, struct ast_bridge_tech_optimizations *tech_args, enum ast_bridge_join_flags flags)</div><div class="ttdoc">Join a channel to a bridge (blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01667">bridge.c:1667</a></div></div>
<div class="ttc" id="res__phoneprov_8c_html_addaa208b0ed785225e24490fb9f28a80"><div class="ttname"><a href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO</a></div><div class="ttdeci">AST_MODULE_INFO(ASTERISK_GPL_KEY, AST_MODFLAG_GLOBAL_SYMBOLS|AST_MODFLAG_LOAD_ORDER, &quot;HTTP Phone Provisioning&quot;,.support_level=AST_MODULE_SUPPORT_EXTENDED,.load=load_module,.unload=unload_module,.reload=reload,.load_pri=AST_MODPRI_CHANNEL_DEPEND,.requires=&quot;http&quot;,)</div></div>
<div class="ttc" id="conf__state_8c_html_abdf6c4a6d72ee8d0b467e903006c5548"><div class="ttname"><a href="../../d8/d26/conf__state_8c.html#abdf6c4a6d72ee8d0b467e903006c5548">conf_invalid_event_fn</a></div><div class="ttdeci">void conf_invalid_event_fn(struct confbridge_user *user)</div><div class="ttdoc">A handler for join/leave events that are invalid in a particular state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d26/conf__state_8c_source.html#l00045">conf_state.c:45</a></div></div>
<div class="ttc" id="bridge_8h_html_a8995453900a91100f3cd936594f41435"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a8995453900a91100f3cd936594f41435">ast_bridge_set_single_src_video_mode</a></div><div class="ttdeci">void ast_bridge_set_single_src_video_mode(struct ast_bridge *bridge, struct ast_channel *video_src_chan)</div><div class="ttdoc">Set a bridge to feed a single video source to all participants. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03816">bridge.c:3816</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a2ac64f03c24f850fb90a5c7ce57bfe5e"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a2ac64f03c24f850fb90a5c7ce57bfe5e">hangup_data_init</a></div><div class="ttdeci">static void hangup_data_init(struct hangup_data *hangup, struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01151">app_confbridge.c:1151</a></div></div>
<div class="ttc" id="structconfbridge__user_html_ab29fd94c427bd6399d019e979f4877e3"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#ab29fd94c427bd6399d019e979f4877e3">confbridge_user::name_rec_location</a></div><div class="ttdeci">char name_rec_location[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00276">confbridge.h:276</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35baed87d2e68e3a4ed12e09eee7a1993c51"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35baed87d2e68e3a4ed12e09eee7a1993c51">AST_BRIDGE_VIDEO_SFU_REMB_LOWEST_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00141">bridge.h:141</a></div></div>
<div class="ttc" id="confbridge_8h_html_a33052b88dfb7cd0c00634d3a88d06d21"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a33052b88dfb7cd0c00634d3a88d06d21">confbridge_end_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_end_type(void)</div><div class="ttdoc">get the confbridge end stasis message type </div></div>
<div class="ttc" id="app__confbridge_8c_html_a035a04613a0ce5ee896c78dde81a1228"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a035a04613a0ce5ee896c78dde81a1228">playback_task_data_init</a></div><div class="ttdeci">static void playback_task_data_init(struct playback_task_data *ptd, struct confbridge_conference *conference, const char *filename, int say_number)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01979">app_confbridge.c:1979</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffaf70db137570ebd8a8a34cdd22671d9b6"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffaf70db137570ebd8a8a34cdd22671d9b6">BRIDGE_OPT_REMB_BEHAVIOR_HIGHEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00086">confbridge.h:86</a></div></div>
<div class="ttc" id="pbx_8h_html_ae44f095e3bb053c0d3f8d6b963df4a25a6afc0bfde80d0417ea42250f2ce6e311"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae44f095e3bb053c0d3f8d6b963df4a25a6afc0bfde80d0417ea42250f2ce6e311">AST_CFE_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01501">pbx.h:1501</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a5de0d3b219564307250ac55488717f1d"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a5de0d3b219564307250ac55488717f1d">CONF_SOUND_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00190">confbridge.h:190</a></div></div>
<div class="ttc" id="bridge__features_8h_html_abf9e5d393615c63d27e0bd530301a1ed"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a></div><div class="ttdeci">struct ast_bridge_features * ast_bridge_features_new(void)</div><div class="ttdoc">Allocate a new bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03750">bridge.c:3750</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a5013cc6331ef13d353e9985f402c240a"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a5013cc6331ef13d353e9985f402c240a">MENU_ACTION_ADMIN_TOGGLE_MUTE_PARTICIPANTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00112">confbridge.h:112</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a612ddc10b8547bbd5e419e2fd7448c2e"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a612ddc10b8547bbd5e419e2fd7448c2e">action_confbridgelist</a></div><div class="ttdeci">static int action_confbridgelist(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03869">app_confbridge.c:3869</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffa1e609e538f6ff1e2db711154d1733364"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffa1e609e538f6ff1e2db711154d1733364">BRIDGE_OPT_REMB_BEHAVIOR_LOWEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00085">confbridge.h:85</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a6cffecf2a021a06d24eaf268c3ef2895"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a6cffecf2a021a06d24eaf268c3ef2895">app2</a></div><div class="ttdeci">static const char app2[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00460">app_confbridge.c:460</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="manager_8h_html_a0b1b4140c2836696a6950e92ab48a580"><div class="ttname"><a href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a></div><div class="ttdeci">#define EVENT_FLAG_REPORTING</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00080">manager.h:80</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="strings_8h_html_ab7cad97bd640223a24b4bd60ef0e406f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab7cad97bd640223a24b4bd60ef0e406f">AST_YESNO</a></div><div class="ttdeci">#define AST_YESNO(x)</div><div class="ttdoc">return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00139">strings.h:139</a></div></div>
<div class="ttc" id="structconf__menu__action_html_a479cca20d9d333ac00adc0351de30683"><div class="ttname"><a href="../../d1/d6f/structconf__menu__action.html#a479cca20d9d333ac00adc0351de30683">conf_menu_action::id</a></div><div class="ttdeci">enum conf_menu_action_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00121">confbridge.h:121</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a0d1be6870b50c4eb7847c95c42eb87dd"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a0d1be6870b50c4eb7847c95c42eb87dd">bridge_profile_sounds::invalidpin</a></div><div class="ttdeci">const ast_string_field invalidpin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab40d13fd51fb2be7d69a014554793536"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab40d13fd51fb2be7d69a014554793536">action_confbridgestartrecord</a></div><div class="ttdeci">static int action_confbridgestartrecord(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04070">app_confbridge.c:4070</a></div></div>
<div class="ttc" id="strings_8h_html_aabc005bd1c7e249e8f8659d57d4500b6"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aabc005bd1c7e249e8f8659d57d4500b6">ast_str_strlen</a></div><div class="ttdeci">size_t ast_str_strlen(const struct ast_str *buf)</div><div class="ttdoc">Returns the current length of the string stored within buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00688">strings.h:688</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af2ab4740529a4cdb9bfffec435fdb8fa"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af2ab4740529a4cdb9bfffec435fdb8fa">cli_confbridge</a></div><div class="ttdeci">static struct ast_cli_entry cli_confbridge[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03800">app_confbridge.c:3800</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdoc">Called when module is being unloaded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04393">app_confbridge.c:4393</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab70a2ae9f2778c6c5a61328abe7acb90"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab70a2ae9f2778c6c5a61328abe7acb90">conference_bridge_hash_cb</a></div><div class="ttdeci">static int conference_bridge_hash_cb(const void *obj, const int flags)</div><div class="ttdoc">Hashing function used for conference bridges container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00480">app_confbridge.c:480</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a41c4a9fbe6e065881ad31bd2de33dc0c"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a41c4a9fbe6e065881ad31bd2de33dc0c">is_new_rec_file</a></div><div class="ttdeci">static int is_new_rec_file(const char *rec_file, struct ast_str **orig_rec_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00771">app_confbridge.c:771</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_aeab68189075afaef278e3f84a6106577"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#aeab68189075afaef278e3f84a6106577">bridge_profile_sounds::onlyperson</a></div><div class="ttdeci">const ast_string_field onlyperson</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a633c85c514f23e2a9478666af23d3d62"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a633c85c514f23e2a9478666af23d3d62">confbridge_user::menu_name</a></div><div class="ttdeci">char menu_name[MAX_PROFILE_NAME]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00275">confbridge.h:275</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab3e73b746efd9e3c5da937b54010b5bb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab3e73b746efd9e3c5da937b54010b5bb">send_unmute_event</a></div><div class="ttdeci">static void send_unmute_event(struct confbridge_user *user, struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00721">app_confbridge.c:721</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="structconfbridge__state_html_a6a2b618817b1df81a53ad47b036d320a"><div class="ttname"><a href="../../d3/db9/structconfbridge__state.html#a6a2b618817b1df81a53ad47b036d320a">confbridge_state::leave_waitmarked</a></div><div class="ttdeci">conference_event_fn leave_waitmarked</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00054">conf_state.h:54</a></div></div>
<div class="ttc" id="pbx_8h_html_a07176e8d314eb68b3b50279fafa11390"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a></div><div class="ttdeci">int ast_add_extension(const char *context, int replace, const char *extension, int priority, const char *label, const char *callerid, const char *application, void *data, void(*datad)(void *), const char *registrar)</div><div class="ttdoc">Add and extension to an extension context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06970">pbx.c:6970</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ae1544ec93f95c6eb2adbf3a2ad01f360"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ae1544ec93f95c6eb2adbf3a2ad01f360">alloc_playback_chan</a></div><div class="ttdeci">static int alloc_playback_chan(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01496">app_confbridge.c:1496</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="say_8h_html_a899e1f86b2d65a32eeb6e17aabfa1f12"><div class="ttname"><a href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a></div><div class="ttdeci">int ast_say_number(struct ast_channel *chan, int num, const char *ints, const char *lang, const char *options)</div><div class="ttdoc">says a number </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08337">channel.c:8337</a></div></div>
<div class="ttc" id="cli_8h_html"><div class="ttname"><a href="../../dc/db0/cli_8h.html">cli.h</a></div><div class="ttdoc">Standard Command Line Interface. </div></div>
<div class="ttc" id="bridge__channel_8h_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="structconfbridge__hook__data_html_aed529e4d09a23d59c37004a5ad59af6d"><div class="ttname"><a href="../../d2/dd4/structconfbridge__hook__data.html#aed529e4d09a23d59c37004a5ad59af6d">confbridge_hook_data::hook_type</a></div><div class="ttdeci">enum ast_bridge_hook_type hook_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02527">app_confbridge.c:2527</a></div></div>
<div class="ttc" id="structplayback__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">playback_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01949">app_confbridge.c:1949</a></div></div>
<div class="ttc" id="bridge_8h_html_a85bc0d4138ac2af7b207d8f1325f051a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a85bc0d4138ac2af7b207d8f1325f051a">ast_bridge_suspend</a></div><div class="ttdeci">int ast_bridge_suspend(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Suspend a channel temporarily from a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03068">bridge.c:3068</a></div></div>
<div class="ttc" id="channel_8h_html_aca211972dac7b8f3f08a283bfe0aa8bf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a></div><div class="ttdeci">void ast_channel_context_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00348">channel_internal_api.c:348</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3afb38173c1ab306d24ce52f5e0429baea"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3afb38173c1ab306d24ce52f5e0429baea">MENU_ACTION_NOOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00108">confbridge.h:108</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_abab77aec47d0343c3612eaeb5ce58910"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#abab77aec47d0343c3612eaeb5ce58910">async_play_sound_helper</a></div><div class="ttdeci">static int async_play_sound_helper(struct confbridge_conference *conference, const char *filename, int say_number, struct ast_channel *initiator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02248">app_confbridge.c:2248</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3aa053ee1cae5f4356c5c1d2e45d96a623"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3aa053ee1cae5f4356c5c1d2e45d96a623">MENU_ACTION_DECREASE_TALKING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00103">confbridge.h:103</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab273ee7695ece891abe7c4d0ea85334a"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab273ee7695ece891abe7c4d0ea85334a">async_delete_name_rec_task</a></div><div class="ttdeci">static int async_delete_name_rec_task(void *data)</div><div class="ttdoc">Delete user&amp;#39;s name file asynchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02480">app_confbridge.c:2480</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structuser__profile_html_af42582af82a949f4925915ac8775a768"><div class="ttname"><a href="../../de/df0/structuser__profile.html#af42582af82a949f4925915ac8775a768">user_profile::name</a></div><div class="ttdeci">char name[MAX_PROFILE_NAME]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00153">confbridge.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="file_8h_html_affc21cb57c6bf72a2cb7ec8a379b2137"><div class="ttname"><a href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a></div><div class="ttdeci">int ast_waitstream(struct ast_channel *c, const char *breakon)</div><div class="ttdoc">Waits for a stream to stop or digit to be pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01776">file.c:1776</a></div></div>
<div class="ttc" id="file_8h_html_ab9b8ab8e5ee34c9b4da25779255cafde"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a></div><div class="ttdeci">int ast_fileexists(const char *filename, const char *fmt, const char *preflang)</div><div class="ttdoc">Checks for the existence of a given file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01086">file.c:1086</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1abec7ff7b0e7afeaf9964103ca02acbb4"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1abec7ff7b0e7afeaf9964103ca02acbb4">CONF_SOUND_UNMUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00172">confbridge.h:172</a></div></div>
<div class="ttc" id="confbridge_8h_html_a75e6804f31f544a09b224a32673218cb"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a75e6804f31f544a09b224a32673218cb">DEFAULT_MENU_PROFILE</a></div><div class="ttdeci">#define DEFAULT_MENU_PROFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00043">confbridge.h:43</a></div></div>
<div class="ttc" id="test__ari_8c_html_a695cc202c7a2869aa8202bb20726ea3c"><div class="ttname"><a href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a></div><div class="ttdeci">static void handler(const char *name, int response_code, struct ast_variable *get_params, struct ast_variable *path_vars, struct ast_variable *headers, struct ast_json *body, struct ast_ari_response *response)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/test__ari_8c_source.html#l00059">test_ari.c:59</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a17e4c08dd6b6ccf06678b422cd8fa179"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a17e4c08dd6b6ccf06678b422cd8fa179">generic_lock_unlock_helper</a></div><div class="ttdeci">static int generic_lock_unlock_helper(int lock, const char *conference_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03503">app_confbridge.c:3503</a></div></div>
<div class="ttc" id="confbridge_8h_html"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html">confbridge.h</a></div></div>
<div class="ttc" id="structbridge__profile_html_a4b9434aeb6ff5a213d5409c1794be028"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a4b9434aeb6ff5a213d5409c1794be028">bridge_profile::remb_estimated_bitrate</a></div><div class="ttdeci">unsigned int remb_estimated_bitrate</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00240">confbridge.h:240</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4afa00866ee3fff551be9402bb16ddcf23"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4afa00866ee3fff551be9402bb16ddcf23">USER_OPT_ANNOUNCE_JOIN_LEAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00062">confbridge.h:62</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_aec801e9356884c574ab2b7e4d013971a"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#aec801e9356884c574ab2b7e4d013971a">conf_find_bridge</a></div><div class="ttdeci">struct confbridge_conference * conf_find_bridge(const char *conference_name)</div><div class="ttdoc">Find a confbridge by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00787">app_confbridge.c:787</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a754214073bc068fc8a046f807712ea7e"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a754214073bc068fc8a046f807712ea7e">confbridge_conference::playback_chan</a></div><div class="ttdeci">struct ast_channel * playback_chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00254">confbridge.h:254</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a751b5dcd51a2fe7bfaeae35308fb4399"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a751b5dcd51a2fe7bfaeae35308fb4399">async_delete_name_rec_task_data_destroy</a></div><div class="ttdeci">static void async_delete_name_rec_task_data_destroy(struct async_delete_name_rec_task_data *atd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02466">app_confbridge.c:2466</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a00ed53ef698c568e371352917a715f13"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a00ed53ef698c568e371352917a715f13">func_confbridge_helper</a></div><div class="ttdeci">int func_confbridge_helper(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l01115">conf_config_parser.c:1115</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a34bfc9a12a07c862731e2f16c3da78fd"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a34bfc9a12a07c862731e2f16c3da78fd">CONF_SOUND_ONLY_ONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00173">confbridge.h:173</a></div></div>
<div class="ttc" id="res__adsi_8c_html_ac7af894858cf396a219d632f40afdc8d"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a></div><div class="ttdeci">static int total</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00968">res_adsi.c:968</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="stasis__bridges_8h_html_aca77a07a50fb0eb50440b036e741ff0a"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#aca77a07a50fb0eb50440b036e741ff0a">ast_bridge_blob_create</a></div><div class="ttdeci">struct stasis_message * ast_bridge_blob_create(struct stasis_message_type *type, struct ast_bridge *bridge, struct ast_channel *chan, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_bridge_blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00500">stasis_bridges.c:500</a></div></div>
<div class="ttc" id="confbridge_8h_html_addef04882cb71861a37e40f1a61bc3d4"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#addef04882cb71861a37e40f1a61bc3d4">confbridge_talking_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_talking_type(void)</div><div class="ttdoc">get the confbridge talking stasis message type </div></div>
<div class="ttc" id="confbridge_8h_html_aab425977a8a2a0f6a877b1e6dc7f5c6b"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#aab425977a8a2a0f6a877b1e6dc7f5c6b">confbridge_unmute_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_unmute_type(void)</div><div class="ttdoc">get the confbridge unmute stasis message type </div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structconfbridge__user_html"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html">confbridge_user</a></div><div class="ttdoc">The structure that represents a conference bridge user. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00271">confbridge.h:271</a></div></div>
<div class="ttc" id="structast__cli__args_html"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html">ast_cli_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00158">cli.h:158</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a76f974656d400196b2233f030cde0b31"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a76f974656d400196b2233f030cde0b31">confbridge_conference::waiting_list</a></div><div class="ttdeci">struct confbridge_conference::@91 waiting_list</div></div>
<div class="ttc" id="structconfbridge__conference_html_a18a3a8f373661dd2e20ddb9035abead2"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a18a3a8f373661dd2e20ddb9035abead2">confbridge_conference::muted</a></div><div class="ttdeci">unsigned int muted</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00253">confbridge.h:253</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a44304b8f5cfce8d8288e06d491c90280"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a44304b8f5cfce8d8288e06d491c90280">MENU_ACTION_INCREASE_TALKING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00102">confbridge.h:102</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a6e73a8d9881e9d546ae4ef299c27c5fd"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a6e73a8d9881e9d546ae4ef299c27c5fd">conf_ended</a></div><div class="ttdeci">void conf_ended(struct confbridge_conference *conference)</div><div class="ttdoc">Callback to be called when the conference has become empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01473">app_confbridge.c:1473</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_afa948535b40059c3ea4068adeab0e815"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#afa948535b40059c3ea4068adeab0e815">confkick_exec</a></div><div class="ttdeci">static int confkick_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04256">app_confbridge.c:4256</a></div></div>
<div class="ttc" id="conf__state_8h_html_aa9228b773d320374118e7c20656ae52f"><div class="ttname"><a href="../../d6/dcb/conf__state_8h.html#aa9228b773d320374118e7c20656ae52f">conference_event_fn</a></div><div class="ttdeci">void(* conference_event_fn)(struct confbridge_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcb/conf__state_8h_source.html#l00043">conf_state.h:43</a></div></div>
<div class="ttc" id="confbridge_8h_html_a8e1844f77711d689f7dcb661d3f49dc8"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a8e1844f77711d689f7dcb661d3f49dc8">DEFAULT_BRIDGE_PROFILE</a></div><div class="ttdeci">#define DEFAULT_BRIDGE_PROFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00042">confbridge.h:42</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a42d1cd86242ce54400631e115a5efc28"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a42d1cd86242ce54400631e115a5efc28">confbridge_conference::record_filename</a></div><div class="ttdeci">struct ast_str * record_filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00256">confbridge.h:256</a></div></div>
<div class="ttc" id="strings_8h_html_abda810b81f8f0349aca3fad136e5d416"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abda810b81f8f0349aca3fad136e5d416">ast_str_set_substr</a></div><div class="ttdeci">char * ast_str_set_substr(struct ast_str **buf, ssize_t maxlen, const char *src, size_t maxsrc)</div><div class="ttdoc">Set a dynamic string to a non-NULL terminated substring. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01007">strings.h:1007</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a725ab63b13835417e5f9704a024a74dc"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a725ab63b13835417e5f9704a024a74dc">conference_bridge_cmp_cb</a></div><div class="ttdeci">static int conference_bridge_cmp_cb(void *obj, void *arg, int flags)</div><div class="ttdoc">Comparison function used for conference bridges container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00504">app_confbridge.c:504</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ac43e427fd7bbe26987bbeed52777898d"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ac43e427fd7bbe26987bbeed52777898d">play_file</a></div><div class="ttdeci">static int play_file(struct ast_bridge_channel *bridge_channel, struct ast_channel *channel, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00928">app_confbridge.c:928</a></div></div>
<div class="ttc" id="structast__bridge__tech__optimizations_html_a961c9c78140a6f1a64efacc2002c1624"><div class="ttname"><a href="../../d6/d97/structast__bridge__tech__optimizations.html#a961c9c78140a6f1a64efacc2002c1624">ast_bridge_tech_optimizations::drop_silence</a></div><div class="ttdeci">unsigned int drop_silence</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00055">bridge_technology.h:55</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_adba0e384a30892d5ec10711c75d5ec8f"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#adba0e384a30892d5ec10711c75d5ec8f">sound_file_exists</a></div><div class="ttdeci">static int sound_file_exists(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00966">app_confbridge.c:966</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a39af08057e60029a0402c0310688de68"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a39af08057e60029a0402c0310688de68">action_confbridgeunmute</a></div><div class="ttdeci">static int action_confbridgeunmute(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03999">app_confbridge.c:3999</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab86b0f7c9a6f9961c9e574216dd2fd6c"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab86b0f7c9a6f9961c9e574216dd2fd6c">action_confbridgelistrooms</a></div><div class="ttdeci">static int action_confbridgelistrooms(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03914">app_confbridge.c:3914</a></div></div>
<div class="ttc" id="asterisk_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00040">asterisk.h:40</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a96dbc941d6d5258b32e5e53adfc43666"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a96dbc941d6d5258b32e5e53adfc43666">conf_load_config</a></div><div class="ttdeci">int conf_load_config(void)</div><div class="ttdoc">load confbridge.conf file </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02384">conf_config_parser.c:2384</a></div></div>
<div class="ttc" id="structplayback__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../de/ddd/structplayback__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">playback_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01948">app_confbridge.c:1948</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a0197b4e3640cff76be2d93b1cd970d29"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a0197b4e3640cff76be2d93b1cd970d29">playback_common</a></div><div class="ttdeci">static void playback_common(struct confbridge_conference *conference, const char *filename, int say_number)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01923">app_confbridge.c:1923</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a7e5cdb3c2c8292271096996042b8bedb"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a7e5cdb3c2c8292271096996042b8bedb">play_sound_file</a></div><div class="ttdeci">int play_sound_file(struct confbridge_conference *conference, const char *filename)</div><div class="ttdoc">Play sound file into conference bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02035">app_confbridge.c:2035</a></div></div>
<div class="ttc" id="confbridge_8h_html_a11ef4c7b78c0389f598e46dc5426b32e"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a11ef4c7b78c0389f598e46dc5426b32e">confbridge_mute_type</a></div><div class="ttdeci">struct stasis_message_type * confbridge_mute_type(void)</div><div class="ttdoc">get the confbridge mute stasis message type </div></div>
<div class="ttc" id="structconfbridge__user_html_acbff52f6bc1b2cdd4cf47b57280023ec"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#acbff52f6bc1b2cdd4cf47b57280023ec">confbridge_user::u_profile</a></div><div class="ttdeci">struct user_profile u_profile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00274">confbridge.h:274</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a08a0f0056a7313fd8cf481f5f8ee327a"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a08a0f0056a7313fd8cf481f5f8ee327a">confbridge_user::talking</a></div><div class="ttdeci">unsigned int talking</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00284">confbridge.h:284</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a636a212051cf4b5561e4c3ee652a58fe"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a></div><div class="ttdeci">#define MAX_PIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00820">app_meetme.c:820</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="cli_8h_html_a29e703082f8137e165097c41f249e6d1"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a></div><div class="ttdeci">#define AST_CLI_YESNO(x)</div><div class="ttdoc">Return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00071">cli.h:71</a></div></div>
<div class="ttc" id="confbridge_8h_html_aabf05890f552841fb4df80739fc047ff"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#aabf05890f552841fb4df80739fc047ff">DEFAULT_USER_PROFILE</a></div><div class="ttdeci">#define DEFAULT_USER_PROFILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00041">confbridge.h:41</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a697a03880a9da57a5a1aee8c4a7346b4"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a697a03880a9da57a5a1aee8c4a7346b4">handle_cli_confbridge_kick</a></div><div class="ttdeci">static char * handle_cli_confbridge_kick(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03342">app_confbridge.c:3342</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1ab5aa36620e6f220174807517a6579927"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1ab5aa36620e6f220174807517a6579927">CONF_SOUND_HAS_JOINED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00168">confbridge.h:168</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a7bdfd8273bb885f7a65f6f5d8188c915"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a7bdfd8273bb885f7a65f6f5d8188c915">ast_bridge_topic</a></div><div class="ttdeci">struct stasis_topic * ast_bridge_topic(struct ast_bridge *bridge)</div><div class="ttdoc">A topic which publishes the events for a particular bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00184">stasis_bridges.c:184</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ad9ff2226d7811c0575bba037b7ff62f6"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ad9ff2226d7811c0575bba037b7ff62f6">play_prompt_to_user</a></div><div class="ttdeci">static int play_prompt_to_user(struct confbridge_user *user, const char *filename)</div><div class="ttdoc">Play back an audio file to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01038">app_confbridge.c:1038</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a666cb6504e192bbe8b4c7619b0fad11d"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a666cb6504e192bbe8b4c7619b0fad11d">conf_rec_name</a></div><div class="ttdeci">static int conf_rec_name(struct confbridge_user *user, const char *conf_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02399">app_confbridge.c:2399</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a96d17a4cf61c4ba43467b8848bcf08d8"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a96d17a4cf61c4ba43467b8848bcf08d8">handle_cli_confbridge_stop_record</a></div><div class="ttdeci">static char * handle_cli_confbridge_stop_record(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03765">app_confbridge.c:3765</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_af4223cc64d7d8ea2fb6aeaba7c1fc473"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#af4223cc64d7d8ea2fb6aeaba7c1fc473">bridge_profile_sounds::muted</a></div><div class="ttdeci">const ast_string_field muted</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3aa672931e76070ba4de84538560796db8"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3aa672931e76070ba4de84538560796db8">MENU_ACTION_PARTICIPANT_COUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00111">confbridge.h:111</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_ab32b3f4abae184ff8f2fc6dbf3404c28"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#ab32b3f4abae184ff8f2fc6dbf3404c28">handle_conf_user_join</a></div><div class="ttdeci">static int handle_conf_user_join(struct confbridge_user *user)</div><div class="ttdoc">Call the proper join event handler for the user for the conference bridge&amp;#39;s current state...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01220">app_confbridge.c:1220</a></div></div>
<div class="ttc" id="structuser__profile_html_a8b49a6bd7c71a5136b2bcc371b3b24dd"><div class="ttname"><a href="../../de/df0/structuser__profile.html#a8b49a6bd7c71a5136b2bcc371b3b24dd">user_profile::moh_class</a></div><div class="ttdeci">char moh_class[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00155">confbridge.h:155</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="manager_8h_html_a5b63b8a8faede2d852e071e1f7b31c11"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a></div><div class="ttdeci">#define ast_manager_register_xml(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00186">manager.h:186</a></div></div>
<div class="ttc" id="say_8h_html"><div class="ttname"><a href="../../db/dce/say_8h.html">say.h</a></div><div class="ttdoc">Say numbers and dates (maybe words one day too) </div></div>
<div class="ttc" id="module_8h_html_aba2c8d4be709a254658b21a834f8294a"><div class="ttname"><a href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a></div><div class="ttdeci">#define ASTERISK_GPL_KEY</div><div class="ttdoc">The text the key() function should return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00046">module.h:46</a></div></div>
<div class="ttc" id="structbridge__profile_html_a0a1c43a89347238ad53bdaa7f733a014"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a0a1c43a89347238ad53bdaa7f733a014">bridge_profile::remb_send_interval</a></div><div class="ttdeci">unsigned int remb_send_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00239">confbridge.h:239</a></div></div>
<div class="ttc" id="channel_8h_html_ae56cab679c0cda6436b930bc74297895"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a></div><div class="ttdeci">void ast_channel_priority_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00448">channel_internal_api.c:448</a></div></div>
<div class="ttc" id="bridge_8h_html"><div class="ttname"><a href="../../d4/d56/bridge_8h.html">bridge.h</a></div><div class="ttdoc">Bridging API. </div></div>
<div class="ttc" id="app__confbridge_8c_html_adeb2f558f89eeeeafd32585989a3426e"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#adeb2f558f89eeeeafd32585989a3426e">action_confbridgelist_item</a></div><div class="ttdeci">static int action_confbridgelist_item(struct mansession *s, const char *id_text, struct confbridge_conference *conference, struct confbridge_user *user, int waiting)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03821">app_confbridge.c:3821</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_ac4e16ab7201edf4e8866ff87d13cc36c"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#ac4e16ab7201edf4e8866ff87d13cc36c">bridge_profile_sounds::leaderhasleft</a></div><div class="ttdeci">const ast_string_field leaderhasleft</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="dsp_8h_html_aab28c68838eaed4e0c89460a4e554cca"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a></div><div class="ttdeci">int ast_dsp_get_threshold_from_settings(enum threshold which)</div><div class="ttdoc">Get silence threshold from dsp.conf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01996">dsp.c:1996</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35ba14ab1a13df8c27aa690625d667f52f3a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba14ab1a13df8c27aa690625d667f52f3a">AST_BRIDGE_VIDEO_SFU_REMB_LOWEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00135">bridge.h:135</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="structconfbridge__conference_html_a11c38fccfc194cc0f316e77f4494516f"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a11c38fccfc194cc0f316e77f4494516f">confbridge_conference::name</a></div><div class="ttdeci">char name[MAX_CONF_NAME]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00245">confbridge.h:245</a></div></div>
<div class="ttc" id="structast__pbx__args_html_a0449b0be05342e431e60937c47fc52f7"><div class="ttname"><a href="../../da/db8/structast__pbx__args.html#a0449b0be05342e431e60937c47fc52f7">ast_pbx_args::no_hangup_chan</a></div><div class="ttdeci">unsigned int no_hangup_chan</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00398">pbx.h:398</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_ab04379436362eb6e1406269d19e45d3a"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#ab04379436362eb6e1406269d19e45d3a">bridge_profile_sounds::kicked</a></div><div class="ttdeci">const ast_string_field kicked</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="confbridge_8h_html_ad3fe32746d4735527e95d0b77c1de3ffae8ce3cccfa03454447306db4923ceb0f"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#ad3fe32746d4735527e95d0b77c1de3ffae8ce3cccfa03454447306db4923ceb0f">BRIDGE_OPT_RECORD_FILE_APPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00080">confbridge.h:80</a></div></div>
<div class="ttc" id="pbx_8h_html_ae12539be833fc552d4556c886605f17f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae12539be833fc552d4556c886605f17f">pbx_find_extension</a></div><div class="ttdeci">struct ast_exten * pbx_find_extension(struct ast_channel *chan, struct ast_context *bypass, struct pbx_find_info *q, const char *context, const char *exten, int priority, const char *label, const char *callerid, enum ext_match_t action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00152">ael_main.c:152</a></div></div>
<div class="ttc" id="structbridge__profile_html_a6ea4cf11ba98a8c5d135563fa542d26d"><div class="ttname"><a href="../../d7/db8/structbridge__profile.html#a6ea4cf11ba98a8c5d135563fa542d26d">bridge_profile::mix_interval</a></div><div class="ttdeci">unsigned int mix_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00235">confbridge.h:235</a></div></div>
<div class="ttc" id="pbx_8h_html_ae70e64cdf669396c88ea8eda900b0b3b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a></div><div class="ttdeci">int ast_func_write(struct ast_channel *chan, const char *function, const char *value)</div><div class="ttdoc">executes a write operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00692">pbx_functions.c:692</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a90b7c08b6834f1ced4df9e5f7a4c1d92"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a90b7c08b6834f1ced4df9e5f7a4c1d92">play_sound_helper</a></div><div class="ttdeci">static int play_sound_helper(struct confbridge_conference *conference, const char *filename, int say_number)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01997">app_confbridge.c:1997</a></div></div>
<div class="ttc" id="confbridge_8h_html_afafbb791402968e69f5a33cd5e903cf3a0aae69e975ba42c8009f9edae18cc5de"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#afafbb791402968e69f5a33cd5e903cf3a0aae69e975ba42c8009f9edae18cc5de">MENU_ACTION_SET_SINGLE_VIDEO_SRC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00109">confbridge.h:109</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="structconf__menu__entry_html_a0276204e71b257d944dbb3c80227ea1e"><div class="ttname"><a href="../../dd/d43/structconf__menu__entry.html#a0276204e71b257d944dbb3c80227ea1e">conf_menu_entry::actions</a></div><div class="ttdeci">struct conf_menu_entry::@87 actions</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a2b054d79fc23571e37fe2312769895d1"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a2b054d79fc23571e37fe2312769895d1">register_channel_tech</a></div><div class="ttdeci">static int register_channel_tech(struct ast_channel_tech *tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l04377">app_confbridge.c:4377</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_af102cf3a015c38f6e482d30f3f6b3b08"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#af102cf3a015c38f6e482d30f3f6b3b08">send_start_record_event</a></div><div class="ttdeci">static void send_start_record_event(struct confbridge_conference *conference)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l00697">app_confbridge.c:697</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_acb3277f7b46775fddfa1e1d76d11511d"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#acb3277f7b46775fddfa1e1d76d11511d">hangup_data_destroy</a></div><div class="ttdeci">static void hangup_data_destroy(struct hangup_data *hangup)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01160">app_confbridge.c:1160</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee">AST_BRIDGE_HOOK_TYPE_JOIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00194">bridge_features.h:194</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a25ff7bf4b3fd0c35b89409651aee3bca"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a25ff7bf4b3fd0c35b89409651aee3bca">action_dialplan_exec</a></div><div class="ttdeci">static int action_dialplan_exec(struct ast_bridge_channel *bridge_channel, struct conf_menu_action *menu_action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l03059">app_confbridge.c:3059</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4a3ea8aba6ea05c151f1791ed05677d359"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4a3ea8aba6ea05c151f1791ed05677d359">USER_OPT_DENOISE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00061">confbridge.h:61</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="structhangup__data_html_a196ae2bebfe61feb1ffb97c5d2d18ef2"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">hangup_data::conference</a></div><div class="ttdeci">struct confbridge_conference * conference</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01115">app_confbridge.c:1115</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_ae095d11ac6bdce5f4c9c9af8adeb0a86"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#ae095d11ac6bdce5f4c9c9af8adeb0a86">ast_bridge_blob_create_from_snapshots</a></div><div class="ttdeci">struct stasis_message * ast_bridge_blob_create_from_snapshots(struct stasis_message_type *type, struct ast_bridge_snapshot *bridge_snapshot, struct ast_channel_snapshot *chan_snapshot, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_bridge_blob message from snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00546">stasis_bridges.c:546</a></div></div>
<div class="ttc" id="module_8h_html_aa4f734041ffd9d75b07cefb0291e1e58af2d6c20d90a068171cc852484a435980"><div class="ttname"><a href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58af2d6c20d90a068171cc852484a435980">AST_MODPRI_DEVSTATE_PROVIDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00329">module.h:329</a></div></div>
<div class="ttc" id="structconfbridge__user_html_a0afbbd980cfe1d7c564c0f7850a82ed9"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#a0afbbd980cfe1d7c564c0f7850a82ed9">confbridge_user::kicked</a></div><div class="ttdeci">unsigned int kicked</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00282">confbridge.h:282</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="confbridge_8h_html_a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a4fed97a4b6554ca10596eda0ffdbcbc4acb3df82bcb67ca7ddff77130d5626a93">USER_OPT_ADMIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00052">confbridge.h:52</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a9558de181741086f610de7fb3203f9da"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a9558de181741086f610de7fb3203f9da">bridge_profile_sounds::locked</a></div><div class="ttdeci">const ast_string_field locked</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structpost__join__action_html"><div class="ttname"><a href="../../df/d46/structpost__join__action.html">post_join_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00265">confbridge.h:265</a></div></div>
<div class="ttc" id="confbridge_8h_html_a1c635ac5ad9b16ea79cf8387ab6e9c11"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a1c635ac5ad9b16ea79cf8387ab6e9c11">DEFAULT_SILENCE_THRESHOLD</a></div><div class="ttdeci">#define DEFAULT_SILENCE_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00049">confbridge.h:49</a></div></div>
<div class="ttc" id="structast__mutex__info_html"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html">ast_mutex_info</a></div><div class="ttdoc">Structure for mutex and tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00135">lock.h:135</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a9ef4aa1d64fb3ad952898a62eb6d775c"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a9ef4aa1d64fb3ad952898a62eb6d775c">CONF_SOUND_LEADER_HAS_LEFT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00178">confbridge.h:178</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
<div class="ttc" id="structhangup__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#adf04f66344e3fb0a6f6a69bf39d19902">hangup_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01116">app_confbridge.c:1116</a></div></div>
<div class="ttc" id="bridge_8h_html_a22e0b20cf0d941c2acc0710600c1c35ba4643daa2205912210019f2a54e567964"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a22e0b20cf0d941c2acc0710600c1c35ba4643daa2205912210019f2a54e567964">AST_BRIDGE_VIDEO_SFU_REMB_AVERAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00133">bridge.h:133</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a84e1ce360c4036881f7079eb067e3f29"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a84e1ce360c4036881f7079eb067e3f29">confbridge_exec</a></div><div class="ttdeci">static int confbridge_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">The ConfBridge application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02544">app_confbridge.c:2544</a></div></div>
<div class="ttc" id="structconfbridge__user_html_acfc2cc36cba9e208c9d45e39d7cff506"><div class="ttname"><a href="../../d8/d1a/structconfbridge__user.html#acfc2cc36cba9e208c9d45e39d7cff506">confbridge_user::tech_args</a></div><div class="ttdeci">struct ast_bridge_tech_optimizations tech_args</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00279">confbridge.h:279</a></div></div>
<div class="ttc" id="structuser__profile_html_a67d9f33546c6c0c7fcbb6b47860161d6"><div class="ttname"><a href="../../de/df0/structuser__profile.html#a67d9f33546c6c0c7fcbb6b47860161d6">user_profile::announcement</a></div><div class="ttdeci">char announcement[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00156">confbridge.h:156</a></div></div>
<div class="ttc" id="bridge_8h_html_af3e15bc4236a2a074953cfb1c4530cf5"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#af3e15bc4236a2a074953cfb1c4530cf5">ast_bridge_set_internal_sample_rate</a></div><div class="ttdeci">void ast_bridge_set_internal_sample_rate(struct ast_bridge *bridge, unsigned int sample_rate)</div><div class="ttdoc">Adjust the internal mixing sample rate of a bridge used during multimix mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03779">bridge.c:3779</a></div></div>
<div class="ttc" id="confbridge_8h_html_a5dcb8371a172768277036add6d2a7ca1a43f4227e6426b05c4e131c38d4bff20a"><div class="ttname"><a href="../../d4/de3/confbridge_8h.html#a5dcb8371a172768277036add6d2a7ca1a43f4227e6426b05c4e131c38d4bff20a">CONF_SOUND_PARTICIPANTS_UNMUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00189">confbridge.h:189</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel_snapshot_base::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="format__cache_8h_html"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html">format_cache.h</a></div><div class="ttdoc">Media Format Cache API. </div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="app__confbridge_8c_html_a546ec1434d0c21717abc2db0a2557666"><div class="ttname"><a href="../../d0/dcf/app__confbridge_8c.html#a546ec1434d0c21717abc2db0a2557666">leave_conference</a></div><div class="ttdeci">static void leave_conference(struct confbridge_user *user)</div><div class="ttdoc">Leave a conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01905">app_confbridge.c:1905</a></div></div>
<div class="ttc" id="structconfbridge__conference_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../da/df3/structconfbridge__conference.html#a4fe7571e3c1759f3689d4453c132bdb7">confbridge_conference::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00247">confbridge.h:247</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_a0f4e68d681da04eebd925ca273a5a0d8"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#a0f4e68d681da04eebd925ca273a5a0d8">bridge_profile_sounds::placeintoconf</a></div><div class="ttdeci">const ast_string_field placeintoconf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="structbridge__profile__sounds_html_ab11fb69bdb07113786e684acc03d7e05"><div class="ttname"><a href="../../dc/d0c/structbridge__profile__sounds.html#ab11fb69bdb07113786e684acc03d7e05">bridge_profile_sounds::hasleft</a></div><div class="ttdeci">const ast_string_field hasleft</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de3/confbridge_8h_source.html#l00222">confbridge.h:222</a></div></div>
<div class="ttc" id="utils_8h_html_a7c38859ed90e96df2b0a0fdf843769d0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a></div><div class="ttdeci">int ast_mkdir(const char *path, int mode)</div><div class="ttdoc">Recursively create directory path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02231">main/utils.c:2231</a></div></div>
<div class="ttc" id="conf__config__parser_8c_html_a3dd7626f16e8359a2aaf281cefb8aff0"><div class="ttname"><a href="../../dc/d40/conf__config__parser_8c.html#a3dd7626f16e8359a2aaf281cefb8aff0">conf_find_bridge_profile</a></div><div class="ttdeci">const struct bridge_profile * conf_find_bridge_profile(struct ast_channel *chan, const char *bridge_profile_name, struct bridge_profile *result)</div><div class="ttdoc">Find a bridge profile given a bridge profile&amp;#39;s name and store that profile in result structure...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d40/conf__config__parser_8c_source.html#l02539">conf_config_parser.c:2539</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga0ee6ee1f4d200f711e2983bffe770a72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a></div><div class="ttdeci">void astman_send_listack(struct mansession *s, const struct message *m, char *msg, char *listflag)</div><div class="ttdoc">Send ack in manager transaction to begin a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03201">manager.c:3201</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
<div class="ttc" id="structasync__playback__task__data_html_a196ae2bebfe61feb1ffb97c5d2d18ef2"><div class="ttname"><a href="../../d4/d0a/structasync__playback__task__data.html#a196ae2bebfe61feb1ffb97c5d2d18ef2">async_playback_task_data::conference</a></div><div class="ttdeci">struct confbridge_conference * conference</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l02041">app_confbridge.c:2041</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:42:58 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
