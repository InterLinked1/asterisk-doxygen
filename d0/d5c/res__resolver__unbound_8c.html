<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_resolver_unbound.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_resolver_unbound.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;unbound.h&gt;</code><br />
<code>#include &lt;arpa/nameser.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d51/dns__core_8h_source.html">asterisk/dns_core.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da7/dns__resolver_8h_source.html">asterisk/dns_resolver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dfe/config__options_8h_source.html">asterisk/config_options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d39/dns__srv_8h_source.html">asterisk/dns_srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/db6/dns__naptr_8h_source.html">asterisk/dns_naptr.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_resolver_unbound.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d16/res__resolver__unbound_8c__incl.png" border="0" usemap="#res__resolver__unbound_8c" alt=""/></div>
<map name="res__resolver__unbound_8c" id="res__resolver__unbound_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="367,379,451,405"/>
<area shape="rect" id="node25" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1446,155,1582,181"/>
<area shape="rect" id="node38" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1200,453,1351,480"/>
<area shape="rect" id="node39" href="../../d6/d51/dns__core_8h.html" title="Core DNS API. " alt="" coords="1858,155,2005,181"/>
<area shape="rect" id="node41" href="../../d9/da7/dns__resolver_8h.html" title="DNS Resolver API. " alt="" coords="2210,80,2378,107"/>
<area shape="rect" id="node42" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1701,155,1828,181"/>
<area shape="rect" id="node43" href="../../db/dfe/config__options_8h.html" title="Configuration option&#45;handling. " alt="" coords="1547,80,1727,107"/>
<area shape="rect" id="node45" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1257,155,1371,181"/>
<area shape="rect" id="node47" href="../../d6/d39/dns__srv_8h.html" title="DNS SRV Record Parsing API. " alt="" coords="2402,80,2538,107"/>
<area shape="rect" id="node48" href="../../db/db6/dns__naptr_8h.html" title="DNS NAPTR Record Parsing API. " alt="" coords="2563,80,2713,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="742,677,897,704"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="845,453,983,480"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,453,140,480"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="746,752,893,779"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1396,603,1539,629"/>
<area shape="rect" id="node26" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1558,229,1673,256"/>
<area shape="rect" id="node27" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="2041,304,2179,331"/>
<area shape="rect" id="node30" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1568,603,1631,629"/>
<area shape="rect" id="node32" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1519,528,1632,555"/>
<area shape="rect" id="node33" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1820,603,1947,629"/>
<area shape="rect" id="node34" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1598,304,1745,331"/>
<area shape="rect" id="node35" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2001,453,2158,480"/>
<area shape="rect" id="node36" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1241,304,1371,331"/>
<area shape="rect" id="node31" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1709,677,1855,704"/>
<area shape="rect" id="node37" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1283,379,1417,405"/>
<area shape="rect" id="node40" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="1870,304,2017,331"/>
<area shape="rect" id="node46" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1190,229,1291,256"/>
</map>
</div>
</div>
<p><a href="../../d0/d5c/res__resolver__unbound_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d9c/structasync__data.html">async_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data required for an asynchronous callback.  <a href="../../d2/d9c/structasync__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimal data required to signal the completion of an async resolve.  <a href="../../dd/d37/structasync__minimal__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/df1/structdns__record.html">dns_record</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A DNS record to be used during a test.  <a href="../../d6/df1/structdns__record.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">User data for off-nominal async resolution test.  <a href="../../d6/d57/structoff__nominal__async__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/da0/structunbound__config.html">unbound_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A container for config related information.  <a href="../../df/da0/structunbound__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d62/structunbound__config__state.html">unbound_config_state</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unbound configuration state information.  <a href="../../d1/d62/structunbound__config__state.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to hold global configuration-related options.  <a href="../../d7/d98/structunbound__global__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for an unbound resolver.  <a href="../../d2/de8/structunbound__resolver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for query resolver data.  <a href="../../d7/dd1/structunbound__resolver__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afef415f46bcfe1b4142ac75d8c46088a"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#afef415f46bcfe1b4142ac75d8c46088a">off_nominal_resolve_fn</a>) (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, int expected_rcode)</td></tr>
<tr class="separator:afef415f46bcfe1b4142ac75d8c46088a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd13bfdc85e2e7b7a73de4fd877be05"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#affd13bfdc85e2e7b7a73de4fd877be05">resolve_fn</a>) (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, size_t num_records)</td></tr>
<tr class="memdesc:affd13bfdc85e2e7b7a73de4fd877be05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolution function for tests.  <a href="#affd13bfdc85e2e7b7a73de4fd877be05">More...</a><br /></td></tr>
<tr class="separator:affd13bfdc85e2e7b7a73de4fd877be05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8f4ce31d30e5a3e2c3894e6224f952"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a6b8f4ce31d30e5a3e2c3894e6224f952">AO2_GLOBAL_OBJ_STATIC</a> (<a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>)</td></tr>
<tr class="memdesc:a6b8f4ce31d30e5a3e2c3894e6224f952"><td class="mdescLeft">&#160;</td><td class="mdescRight">A global object container that will contain the <a class="el" href="../../d2/db1/structglobal__config.html">global_config</a> that gets swapped out on reloads.  <a href="#a6b8f4ce31d30e5a3e2c3894e6224f952">More...</a><br /></td></tr>
<tr class="separator:a6b8f4ce31d30e5a3e2c3894e6224f952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc0717b1b969c6f90bc8b1424ae2051"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#abcc0717b1b969c6f90bc8b1424ae2051">AST_TEST_DEFINE</a> (resolve_sync)</td></tr>
<tr class="separator:abcc0717b1b969c6f90bc8b1424ae2051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa921b63ffbf63380671b38c190e7c3bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#aa921b63ffbf63380671b38c190e7c3bb">AST_TEST_DEFINE</a> (resolve_async)</td></tr>
<tr class="separator:aa921b63ffbf63380671b38c190e7c3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c2ba396876bd186240e5225bdd41033"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a6c2ba396876bd186240e5225bdd41033">AST_TEST_DEFINE</a> (resolve_sync_off_nominal)</td></tr>
<tr class="separator:a6c2ba396876bd186240e5225bdd41033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a20ff5d95f0fdb949c686590f3b9b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ae3a20ff5d95f0fdb949c686590f3b9b2">AST_TEST_DEFINE</a> (resolve_async_off_nominal)</td></tr>
<tr class="separator:ae3a20ff5d95f0fdb949c686590f3b9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d5ab3bea51408c9d841c6ef2860fd5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ad4d5ab3bea51408c9d841c6ef2860fd5">AST_TEST_DEFINE</a> (resolve_cancel_off_nominal)</td></tr>
<tr class="separator:ad4d5ab3bea51408c9d841c6ef2860fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4d5f4224f57f59bfa50ea62cc32048e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ae4d5f4224f57f59bfa50ea62cc32048e">AST_TEST_DEFINE</a> (resolve_naptr)</td></tr>
<tr class="separator:ae4d5f4224f57f59bfa50ea62cc32048e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9758f967b36b914b0128933ba5e3bf38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a9758f967b36b914b0128933ba5e3bf38">AST_TEST_DEFINE</a> (resolve_srv)</td></tr>
<tr class="separator:a9758f967b36b914b0128933ba5e3bf38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3c37596cb5a728433115e6d427b92d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a> (const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:aed3c37596cb5a728433115e6d427b92d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for asynchronous queries.  <a href="#aed3c37596cb5a728433115e6d427b92d">More...</a><br /></td></tr>
<tr class="separator:aed3c37596cb5a728433115e6d427b92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc1ac63c5e1c722c11c1851427e9372"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d9c/structasync__data.html">async_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a6cc1ac63c5e1c722c11c1851427e9372">async_data_alloc</a> (struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, size_t num_records)</td></tr>
<tr class="separator:a6cc1ac63c5e1c722c11c1851427e9372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab517f9e6e55d67b8b83c861ef8cfacc9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ab517f9e6e55d67b8b83c861ef8cfacc9">async_data_destructor</a> (void *obj)</td></tr>
<tr class="separator:ab517f9e6e55d67b8b83c861ef8cfacc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad978b1269b4c9be83f85867315010ca9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ad978b1269b4c9be83f85867315010ca9">async_minimal_data_alloc</a> (void)</td></tr>
<tr class="separator:ad978b1269b4c9be83f85867315010ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77593ed19ce7a145cd576b5fc353b35"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ac77593ed19ce7a145cd576b5fc353b35">async_minimal_data_destructor</a> (void *obj)</td></tr>
<tr class="separator:ac77593ed19ce7a145cd576b5fc353b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32cea5e9b0d586fcf9a0aff37980818"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ad32cea5e9b0d586fcf9a0aff37980818">CONFIG_INFO_STANDARD</a> (cfg_info, <a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a50914e37d486c59859683c677df59b85">unbound_config_alloc</a>,.files=<a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a761dc9992fb74d8296d3a6de5a506415">resolver_unbound_conf</a>),.pre_apply_config=<a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a8c5504fc70dcb318e76b59b5db4e6b4a">unbound_config_preapply_callback</a>,)</td></tr>
<tr class="memdesc:ad32cea5e9b0d586fcf9a0aff37980818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register information about the configs being processed by this module.  <a href="#ad32cea5e9b0d586fcf9a0aff37980818">More...</a><br /></td></tr>
<tr class="separator:ad32cea5e9b0d586fcf9a0aff37980818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54025226b7743db0a753c799e5a437c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#aa54025226b7743db0a753c799e5a437c">custom_nameserver_handler</a> (const struct <a class="el" href="../../db/de0/structaco__option.html">aco_option</a> *opt, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, void *obj)</td></tr>
<tr class="separator:aa54025226b7743db0a753c799e5a437c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d07be278336c2aff4fd63dbac00fbef"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a7d07be278336c2aff4fd63dbac00fbef">minimal_callback</a> (const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:a7d07be278336c2aff4fd63dbac00fbef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Async callback for off-nominal cancellation test.  <a href="#a7d07be278336c2aff4fd63dbac00fbef">More...</a><br /></td></tr>
<tr class="separator:a7d07be278336c2aff4fd63dbac00fbef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad122ac73403f67e6ead2493755b70fcc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ad122ac73403f67e6ead2493755b70fcc">nominal_async_run</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, size_t num_records)</td></tr>
<tr class="memdesc:ad122ac73403f67e6ead2493755b70fcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pluggable function for performing an asynchronous query during a test.  <a href="#ad122ac73403f67e6ead2493755b70fcc">More...</a><br /></td></tr>
<tr class="separator:ad122ac73403f67e6ead2493755b70fcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff071c60ce8956fb9aff39f2080a7c7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a5ff071c60ce8956fb9aff39f2080a7c7">nominal_sync_run</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, size_t num_records)</td></tr>
<tr class="memdesc:a5ff071c60ce8956fb9aff39f2080a7c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pluggable function for running a synchronous query and checking its results.  <a href="#a5ff071c60ce8956fb9aff39f2080a7c7">More...</a><br /></td></tr>
<tr class="separator:a5ff071c60ce8956fb9aff39f2080a7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e3243986c2073d0c29ea09851e78b0"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ac3e3243986c2073d0c29ea09851e78b0">nominal_test</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#affd13bfdc85e2e7b7a73de4fd877be05">resolve_fn</a> runner)</td></tr>
<tr class="memdesc:ac3e3243986c2073d0c29ea09851e78b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Framework for running a nominal DNS test.  <a href="#ac3e3243986c2073d0c29ea09851e78b0">More...</a><br /></td></tr>
<tr class="separator:ac3e3243986c2073d0c29ea09851e78b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff1daa307aa9a06c7d56c3a23487756"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a5ff1daa307aa9a06c7d56c3a23487756">off_nominal_async_callback</a> (const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:a5ff1daa307aa9a06c7d56c3a23487756"><td class="mdescLeft">&#160;</td><td class="mdescRight">Async callback for off-nominal async test.  <a href="#a5ff1daa307aa9a06c7d56c3a23487756">More...</a><br /></td></tr>
<tr class="separator:a5ff1daa307aa9a06c7d56c3a23487756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94d22feafdae173f48c537d48c70e5ba"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a94d22feafdae173f48c537d48c70e5ba">off_nominal_async_data_alloc</a> (int expected_rcode)</td></tr>
<tr class="separator:a94d22feafdae173f48c537d48c70e5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ec1aa86331ffc6a42e468980451f24"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a31ec1aa86331ffc6a42e468980451f24">off_nominal_async_data_destructor</a> (void *obj)</td></tr>
<tr class="separator:a31ec1aa86331ffc6a42e468980451f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d8ddf655641dc0cd21574d1472fd59"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a68d8ddf655641dc0cd21574d1472fd59">off_nominal_async_run</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, int expected_rcode)</td></tr>
<tr class="separator:a68d8ddf655641dc0cd21574d1472fd59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606f8a6e6927f924f4ff4daa8253c678"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a606f8a6e6927f924f4ff4daa8253c678">off_nominal_sync_run</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, int expected_rcode)</td></tr>
<tr class="separator:a606f8a6e6927f924f4ff4daa8253c678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6ff81b51991f00ee61715d5afdd4f1"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#aed6ff81b51991f00ee61715d5afdd4f1">off_nominal_test</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#afef415f46bcfe1b4142ac75d8c46088a">off_nominal_resolve_fn</a> runner)</td></tr>
<tr class="separator:aed6ff81b51991f00ee61715d5afdd4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50914e37d486c59859683c677df59b85"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a50914e37d486c59859683c677df59b85">unbound_config_alloc</a> (void)</td></tr>
<tr class="memdesc:a50914e37d486c59859683c677df59b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a <a class="el" href="../../df/da0/structunbound__config.html" title="A container for config related information. ">unbound_config</a> to hold a snapshot of the complete results of parsing a config.  <a href="#a50914e37d486c59859683c677df59b85">More...</a><br /></td></tr>
<tr class="separator:a50914e37d486c59859683c677df59b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ede01706a220b84c3cde5f3717ebde4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a8ede01706a220b84c3cde5f3717ebde4">unbound_config_apply_default</a> (void)</td></tr>
<tr class="separator:a8ede01706a220b84c3cde5f3717ebde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964e338ee0ac700ca3b8509a0b22eb85"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a964e338ee0ac700ca3b8509a0b22eb85">unbound_config_destructor</a> (void *obj)</td></tr>
<tr class="separator:a964e338ee0ac700ca3b8509a0b22eb85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83a67e2ae42baf762e2f388278bffe61"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a83a67e2ae42baf762e2f388278bffe61">unbound_config_preapply</a> (struct <a class="el" href="../../df/da0/structunbound__config.html">unbound_config</a> *cfg)</td></tr>
<tr class="separator:a83a67e2ae42baf762e2f388278bffe61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c5504fc70dcb318e76b59b5db4e6b4a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a8c5504fc70dcb318e76b59b5db4e6b4a">unbound_config_preapply_callback</a> (void)</td></tr>
<tr class="memdesc:a8c5504fc70dcb318e76b59b5db4e6b4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish initializing new configuration.  <a href="#a8c5504fc70dcb318e76b59b5db4e6b4a">More...</a><br /></td></tr>
<tr class="separator:a8c5504fc70dcb318e76b59b5db4e6b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc5b31a6af25224f011bf85f1a002ec7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#afc5b31a6af25224f011bf85f1a002ec7">unbound_config_state_destructor</a> (void *obj)</td></tr>
<tr class="separator:afc5b31a6af25224f011bf85f1a002ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad0cf4b54e4f4a553f7062f9c8158ac8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#aad0cf4b54e4f4a553f7062f9c8158ac8">unbound_global_config_destructor</a> (void *obj)</td></tr>
<tr class="separator:aad0cf4b54e4f4a553f7062f9c8158ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87aa2ee81cec9d7d54de82d8c6131f1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#af87aa2ee81cec9d7d54de82d8c6131f1">unbound_resolver_alloc</a> (void)</td></tr>
<tr class="memdesc:af87aa2ee81cec9d7d54de82d8c6131f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocator for unbound resolver.  <a href="#af87aa2ee81cec9d7d54de82d8c6131f1">More...</a><br /></td></tr>
<tr class="separator:af87aa2ee81cec9d7d54de82d8c6131f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b1c569bfee2e337983ac64d16a5685"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a28b1c569bfee2e337983ac64d16a5685">unbound_resolver_callback</a> (void *data, int err, struct ub_result *ub_result)</td></tr>
<tr class="memdesc:a28b1c569bfee2e337983ac64d16a5685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback invoked when resolution completes on a query.  <a href="#a28b1c569bfee2e337983ac64d16a5685">More...</a><br /></td></tr>
<tr class="separator:a28b1c569bfee2e337983ac64d16a5685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28dcf0c60947be2bdb2c676df4152011"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a28dcf0c60947be2bdb2c676df4152011">unbound_resolver_cancel</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:a28dcf0c60947be2bdb2c676df4152011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2be4d93fe1736fa904daf00689b715"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a9a2be4d93fe1736fa904daf00689b715">unbound_resolver_data_dtor</a> (void *vdoomed)</td></tr>
<tr class="separator:a9a2be4d93fe1736fa904daf00689b715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d5eab6696233a522cbec0f9abd96e3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a43d5eab6696233a522cbec0f9abd96e3">unbound_resolver_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:a43d5eab6696233a522cbec0f9abd96e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for unbound resolver.  <a href="#a43d5eab6696233a522cbec0f9abd96e3">More...</a><br /></td></tr>
<tr class="separator:a43d5eab6696233a522cbec0f9abd96e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af843d805254b6a0abfff2dd84212b8aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#af843d805254b6a0abfff2dd84212b8aa">unbound_resolver_resolve</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="separator:af843d805254b6a0abfff2dd84212b8aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0921e9d15be367ca7d1ebdf03540c61"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ac0921e9d15be367ca7d1ebdf03540c61">unbound_resolver_start</a> (struct <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *resolver)</td></tr>
<tr class="memdesc:ac0921e9d15be367ca7d1ebdf03540c61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start function for the unbound resolver.  <a href="#ac0921e9d15be367ca7d1ebdf03540c61">More...</a><br /></td></tr>
<tr class="separator:ac0921e9d15be367ca7d1ebdf03540c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4529b1a209a57f32f7c73061dcab308"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ac4529b1a209a57f32f7c73061dcab308">unbound_resolver_stop</a> (struct <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *resolver)</td></tr>
<tr class="memdesc:ac4529b1a209a57f32f7c73061dcab308"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop function for the unbound resolver.  <a href="#ac4529b1a209a57f32f7c73061dcab308">More...</a><br /></td></tr>
<tr class="separator:ac4529b1a209a57f32f7c73061dcab308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a298c3c715d19a49e82fa98a5f5442"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a06a298c3c715d19a49e82fa98a5f5442">unbound_resolver_thread</a> (void *data)</td></tr>
<tr class="memdesc:a06a298c3c715d19a49e82fa98a5f5442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolver thread which waits and handles results.  <a href="#a06a298c3c715d19a49e82fa98a5f5442">More...</a><br /></td></tr>
<tr class="separator:a06a298c3c715d19a49e82fa98a5f5442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Unbound DNS Resolver Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .<a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="el" href="../../d6/d80/test__res__prometheus_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a87717b8c3b913bbbb55297fc169086e0">AST_MODPRI_CHANNEL_DEPEND</a> - 4, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab1543f7ac14f52ba5148960429e849"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a></td></tr>
<tr class="memdesc:aeab1543f7ac14f52ba5148960429e849"><td class="mdescLeft">&#160;</td><td class="mdescRight">An <a class="el" href="../../de/d71/structaco__type.html" title="Type information about a category-level configurable object. ">aco_type</a> structure to link the "general" category to the <a class="el" href="../../d7/d98/structunbound__global__config.html" title="A structure to hold global configuration-related options. ">unbound_global_config</a> type.  <a href="#aeab1543f7ac14f52ba5148960429e849">More...</a><br /></td></tr>
<tr class="separator:aeab1543f7ac14f52ba5148960429e849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05b71d76cff3ccd9fe2a0c4a16d21271"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a> [] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../dc/d6b/res__xmpp_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>)</td></tr>
<tr class="separator:a05b71d76cff3ccd9fe2a0c4a16d21271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761dc9992fb74d8296d3a6de5a506415"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a761dc9992fb74d8296d3a6de5a506415">resolver_unbound_conf</a></td></tr>
<tr class="separator:a761dc9992fb74d8296d3a6de5a506415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0398b6845a141afa6b1e0f35bd49c963"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a0398b6845a141afa6b1e0f35bd49c963">unbound_resolver</a></td></tr>
<tr class="separator:a0398b6845a141afa6b1e0f35bd49c963"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="afef415f46bcfe1b4142ac75d8c46088a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afef415f46bcfe1b4142ac75d8c46088a">&#9670;&nbsp;</a></span>off_nominal_resolve_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* off_nominal_resolve_fn) (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, int expected_rcode)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00876">876</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="affd13bfdc85e2e7b7a73de4fd877be05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd13bfdc85e2e7b7a73de4fd877be05">&#9670;&nbsp;</a></span>resolve_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* resolve_fn) (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, int rr_type, int rr_class, struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *<a class="el" href="../../dd/d22/cdr__pgsql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>, size_t num_records)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolution function for tests. </p>
<p>Several tests will have similar setups but will want to make use of a different means of actually making queries and checking their results. This pluggable function pointer allows for similar tests to be operated in different ways.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test</td><td>The test being run </td></tr>
    <tr><td class="paramname">domain</td><td>The domain to look up </td></tr>
    <tr><td class="paramname">rr_type</td><td>The record type to look up </td></tr>
    <tr><td class="paramname">rr_class</td><td>The class of record to look up </td></tr>
    <tr><td class="paramname">records</td><td>All records that exist for the test. </td></tr>
    <tr><td class="paramname">num_records</td><td>Number of records in the records array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The test has passed thus far. </td></tr>
    <tr><td class="paramname">-1</td><td>The test has failed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00545">545</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01474">1474</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01474">1474</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="a6b8f4ce31d30e5a3e2c3894e6224f952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8f4ce31d30e5a3e2c3894e6224f952">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A global object container that will contain the <a class="el" href="../../d2/db1/structglobal__config.html">global_config</a> that gets swapped out on reloads. </p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01474">1474</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="abcc0717b1b969c6f90bc8b1424ae2051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc0717b1b969c6f90bc8b1424ae2051">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_sync&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00827">827</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00551">nominal_sync_run()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00743">nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_sync&quot;</span>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test nominal synchronous resolution using libunbound&quot;</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test performs the following:\n&quot;</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;         <span class="stringliteral">&quot;\t* Set two static A records and one static AAAA record on one domain\n&quot;</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;         <span class="stringliteral">&quot;\t* Set an A record for a second domain\n&quot;</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;         <span class="stringliteral">&quot;\t* Perform an A record lookup on the first domain\n&quot;</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that both A records are returned and no AAAA record is returned\n&quot;</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;         <span class="stringliteral">&quot;\t* Perform an AAAA record lookup on the first domain\n&quot;</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that the AAAA record is returned and no A record is returned\n&quot;</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;         <span class="stringliteral">&quot;\t* Perform an A record lookup on the second domain\n&quot;</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that the A record from the second domain is returned&quot;</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ac3e3243986c2073d0c29ea09851e78b0">nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a5ff071c60ce8956fb9aff39f2080a7c7">nominal_sync_run</a>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ac3e3243986c2073d0c29ea09851e78b0"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ac3e3243986c2073d0c29ea09851e78b0">nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state nominal_test(struct ast_test *test, resolve_fn runner)</div><div class="ttdoc">Framework for running a nominal DNS test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00743">res_resolver_unbound.c:743</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a5ff071c60ce8956fb9aff39f2080a7c7"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a5ff071c60ce8956fb9aff39f2080a7c7">nominal_sync_run</a></div><div class="ttdeci">static int nominal_sync_run(struct ast_test *test, const char *domain, int rr_type, int rr_class, struct dns_record *records, size_t num_records)</div><div class="ttdoc">Pluggable function for running a synchronous query and checking its results. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00551">res_resolver_unbound.c:551</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa921b63ffbf63380671b38c190e7c3bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa921b63ffbf63380671b38c190e7c3bb">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_async&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00852">852</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00695">nominal_async_run()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00743">nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;{</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_async&quot;</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test nominal asynchronous resolution using libunbound&quot;</span>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test performs the following:\n&quot;</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         <span class="stringliteral">&quot;\t* Set two static A records and one static AAAA record on one domain\n&quot;</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;         <span class="stringliteral">&quot;\t* Set an A record for a second domain\n&quot;</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <span class="stringliteral">&quot;\t* Perform an A record lookup on the first domain\n&quot;</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that both A records are returned and no AAAA record is returned\n&quot;</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;         <span class="stringliteral">&quot;\t* Perform an AAAA record lookup on the first domain\n&quot;</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that the AAAA record is returned and no A record is returned\n&quot;</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;         <span class="stringliteral">&quot;\t* Perform an A record lookup on the second domain\n&quot;</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that the A record from the second domain is returned&quot;</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ac3e3243986c2073d0c29ea09851e78b0">nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ad122ac73403f67e6ead2493755b70fcc">nominal_async_run</a>);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ac3e3243986c2073d0c29ea09851e78b0"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ac3e3243986c2073d0c29ea09851e78b0">nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state nominal_test(struct ast_test *test, resolve_fn runner)</div><div class="ttdoc">Framework for running a nominal DNS test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00743">res_resolver_unbound.c:743</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ad122ac73403f67e6ead2493755b70fcc"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ad122ac73403f67e6ead2493755b70fcc">nominal_async_run</a></div><div class="ttdeci">static int nominal_async_run(struct ast_test *test, const char *domain, int rr_type, int rr_class, struct dns_record *records, size_t num_records)</div><div class="ttdoc">Pluggable function for performing an asynchronous query during a test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00695">res_resolver_unbound.c:695</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c2ba396876bd186240e5225bdd41033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c2ba396876bd186240e5225bdd41033">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_sync_off_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01069">1069</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00879">off_nominal_sync_run()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01015">off_nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;{</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_sync_off_nominal&quot;</span>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test off-nominal synchronous resolution using libunbound&quot;</span>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test performs the following:\n&quot;</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;         <span class="stringliteral">&quot;\t* Attempt a lookup of a non-existent domain\n&quot;</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;         <span class="stringliteral">&quot;\t* Attempt a lookup of a AAAA record on a domain that contains only A records\n&quot;</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;         <span class="stringliteral">&quot;\t* Attempt a lookup of an A record on Chaos-net&quot;</span>;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aed6ff81b51991f00ee61715d5afdd4f1">off_nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a606f8a6e6927f924f4ff4daa8253c678">off_nominal_sync_run</a>);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a606f8a6e6927f924f4ff4daa8253c678"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a606f8a6e6927f924f4ff4daa8253c678">off_nominal_sync_run</a></div><div class="ttdeci">static int off_nominal_sync_run(struct ast_test *test, const char *domain, int rr_type, int rr_class, int expected_rcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00879">res_resolver_unbound.c:879</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aed6ff81b51991f00ee61715d5afdd4f1"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aed6ff81b51991f00ee61715d5afdd4f1">off_nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state off_nominal_test(struct ast_test *test, off_nominal_resolve_fn runner)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01015">res_resolver_unbound.c:1015</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3a20ff5d95f0fdb949c686590f3b9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3a20ff5d95f0fdb949c686590f3b9b2">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_async_off_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01088">1088</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00983">off_nominal_async_run()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01015">off_nominal_test()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_async_off_nominal&quot;</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test off-nominal synchronous resolution using libunbound&quot;</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test performs the following:\n&quot;</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;         <span class="stringliteral">&quot;\t* Attempt a lookup of a non-existent domain\n&quot;</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;         <span class="stringliteral">&quot;\t* Attempt a lookup of a AAAA record on a domain that contains only A records\n&quot;</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;         <span class="stringliteral">&quot;\t* Attempt a lookup of an A record on Chaos-net&quot;</span>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   }</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aed6ff81b51991f00ee61715d5afdd4f1">off_nominal_test</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a68d8ddf655641dc0cd21574d1472fd59">off_nominal_async_run</a>);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a68d8ddf655641dc0cd21574d1472fd59"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a68d8ddf655641dc0cd21574d1472fd59">off_nominal_async_run</a></div><div class="ttdeci">static int off_nominal_async_run(struct ast_test *test, const char *domain, int rr_type, int rr_class, int expected_rcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00983">res_resolver_unbound.c:983</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aed6ff81b51991f00ee61715d5afdd4f1"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aed6ff81b51991f00ee61715d5afdd4f1">off_nominal_test</a></div><div class="ttdeci">static enum ast_test_result_state off_nominal_test(struct ast_test *test, off_nominal_resolve_fn runner)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01015">res_resolver_unbound.c:1015</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4d5ab3bea51408c9d841c6ef2860fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d5ab3bea51408c9d841c6ef2860fd5">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_cancel_off_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01154">1154</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00247">ast_dns_resolve_async()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00272">ast_dns_resolve_cancel()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01124">async_minimal_data_alloc()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01144">minimal_callback()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;{</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dcd/structast__dns__query__active.html">ast_dns_query_active</a> *, active, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a> *, adata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_cancel_off_nominal&quot;</span>;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Off nominal cancellation test using libunbound&quot;</span>;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test does the following:\n&quot;</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;         <span class="stringliteral">&quot;\t* Perform an asynchronous query\n&quot;</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;         <span class="stringliteral">&quot;\t* Once the query has completed, attempt to cancel it&quot;</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   adata = <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ad978b1269b4c9be83f85867315010ca9">async_minimal_data_alloc</a>();</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordflow">if</span> (!adata) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to allocate necessary data for test\n&quot;</span>);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   active = <a class="code" href="../../d6/d51/dns__core_8h.html#a67e1cfb2c7b24d45cf003d49923f5d9f">ast_dns_resolve_async</a>(<span class="stringliteral">&quot;crunchy.peanut.butter&quot;</span>, ns_t_a, ns_c_in, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a7d07be278336c2aff4fd63dbac00fbef">minimal_callback</a>, adata);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordflow">if</span> (!active) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to perform asynchronous query\n&quot;</span>);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="comment">/* Wait for async query to complete */</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;adata-&gt;lock);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <span class="keywordflow">while</span> (!adata-&gt;complete) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;adata-&gt;cond, &amp;adata-&gt;lock);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;adata-&gt;lock);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d51/dns__core_8h.html#a431d6a3e91423d63efdcbe645f23d223">ast_dns_resolve_cancel</a>(active)) {</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Successfully canceled completed query\n&quot;</span>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   }</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="dns__core_8h_html_a67e1cfb2c7b24d45cf003d49923f5d9f"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a67e1cfb2c7b24d45cf003d49923f5d9f">ast_dns_resolve_async</a></div><div class="ttdeci">struct ast_dns_query_active * ast_dns_resolve_async(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00247">dns_core.c:247</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structast__dns__query__active_html"><div class="ttname"><a href="../../d8/dcd/structast__dns__query__active.html">ast_dns_query_active</a></div><div class="ttdoc">An active DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00201">dns_internal.h:201</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="structasync__minimal__data_html"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a></div><div class="ttdoc">Minimal data required to signal the completion of an async resolve. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01110">res_resolver_unbound.c:1110</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="dns__core_8h_html_a431d6a3e91423d63efdcbe645f23d223"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a431d6a3e91423d63efdcbe645f23d223">ast_dns_resolve_cancel</a></div><div class="ttdeci">int ast_dns_resolve_cancel(struct ast_dns_query_active *active)</div><div class="ttdoc">Cancel an asynchronous DNS resolution. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00272">dns_core.c:272</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a7d07be278336c2aff4fd63dbac00fbef"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a7d07be278336c2aff4fd63dbac00fbef">minimal_callback</a></div><div class="ttdeci">static void minimal_callback(const struct ast_dns_query *query)</div><div class="ttdoc">Async callback for off-nominal cancellation test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01144">res_resolver_unbound.c:1144</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ad978b1269b4c9be83f85867315010ca9"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ad978b1269b4c9be83f85867315010ca9">async_minimal_data_alloc</a></div><div class="ttdeci">static struct async_minimal_data * async_minimal_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01124">res_resolver_unbound.c:1124</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4d5f4224f57f59bfa50ea62cc32048e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4d5f4224f57f59bfa50ea62cc32048e">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_naptr&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01199">1199</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d3/de7/dns__naptr_8c_source.html#l00600">ast_dns_naptr_get_flags()</a>, <a class="el" href="../../d3/de7/dns__naptr_8c_source.html#l00632">ast_dns_naptr_get_order()</a>, <a class="el" href="../../d3/de7/dns__naptr_8c_source.html#l00640">ast_dns_naptr_get_preference()</a>, <a class="el" href="../../d3/de7/dns__naptr_8c_source.html#l00616">ast_dns_naptr_get_regexp()</a>, <a class="el" href="../../d3/de7/dns__naptr_8c_source.html#l00624">ast_dns_naptr_get_replacement()</a>, <a class="el" href="../../d3/de7/dns__naptr_8c_source.html#l00608">ast_dns_naptr_get_service()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00170">ast_dns_record_get_next()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d79/analys_8c_source.html#l00066">order</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">dns_record::visited</a>.</p>
<div class="fragment"><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;{</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *, resolver, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *, cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">char</span> * DOMAIN1 = <span class="stringliteral">&quot;goose.feathers&quot;</span>;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd2/structnaptr__record.html">naptr_record</a> {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *zone_entry;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      uint16_t <a class="code" href="../../dc/dd2/structnaptr__record.html#afd05883aec8e6070b12674a77c541025">order</a>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      uint16_t <a class="code" href="../../dc/dd2/structnaptr__record.html#a0895a8ef7de652dbf7ac2ece95f267df">preference</a>;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/dd2/structnaptr__record.html#ab69852e439dc4d1a2dc703cba8217cf3">flags</a>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/dd2/structnaptr__record.html#a011ecf93af6d4b30a72d8a563ca4154b">services</a>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/dd2/structnaptr__record.html#ac234a6f5bbc4408c3917e6d450014ab5">regexp</a>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/dd2/structnaptr__record.html#af13ea6e7567ddf33e5f2dc7fcafde92f">replacement</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="keywordtype">int</span> visited;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   } <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a> [] = {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN NAPTR 100 100 A SIP+D2U \&quot;\&quot; goose.down&quot;</span>, 100, 100, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;SIP+D2U&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;goose.down&quot;</span>, 0},</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN NAPTR 100 200 A SIP+D2T \&quot;\&quot; duck.down&quot;</span>, 100, 200, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;SIP+D2T&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;duck.down&quot;</span>, 0},</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN NAPTR 200 100 A SIPS+D2U \&quot;\&quot; pheasant.down&quot;</span>, 200, 100, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;SIPS+D2U&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;pheasant.down&quot;</span>, 0},</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN NAPTR 200 200 A SIPS+D2T \&quot;\&quot; platypus.fur&quot;</span>, 200, 200, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;SIPS+D2T&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;platypus.fur&quot;</span>, 0},</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   };</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_naptr&quot;</span>;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Attempt resolution of NAPTR record&quot;</span>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test performs a NAPTR lookup and ensures that\n&quot;</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;         <span class="stringliteral">&quot;the returned record has the appropriate values set&quot;</span>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   resolver = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(cfg-&gt;global-&gt;state-&gt;resolver);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   ub_ctx_zone_add(resolver-&gt;context, DOMAIN1, <span class="stringliteral">&quot;static&quot;</span>);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>); ++i) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      ub_ctx_data_add(resolver-&gt;context, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].zone_entry);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   }</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(DOMAIN1, ns_t_naptr, ns_c_in, &amp;<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to resolve domain\n&quot;</span>);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Successful resolution set a NULL result\n&quot;</span>);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <span class="keywordflow">if</span> (!record) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to get any DNS records from the result\n&quot;</span>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   i = 0;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   <span class="keywordflow">for</span> (record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>); record; record = <a class="code" href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a>(record)) {</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/db6/dns__naptr_8h.html#ac7abb9a5961a4c9774fe5c9151d9e0f7">ast_dns_naptr_get_order</a>(record) != <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].order) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected order %hu, got order %hu from NAPTR record\n&quot;</span>,</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;               <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].<a class="code" href="../../dc/dd2/structnaptr__record.html#afd05883aec8e6070b12674a77c541025">order</a>, <a class="code" href="../../db/db6/dns__naptr_8h.html#ac7abb9a5961a4c9774fe5c9151d9e0f7">ast_dns_naptr_get_order</a>(record));</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/db6/dns__naptr_8h.html#a5867b78c6f0764fe3bb834d9c0f08f39">ast_dns_naptr_get_preference</a>(record) != <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].<a class="code" href="../../dc/dd2/structnaptr__record.html#a0895a8ef7de652dbf7ac2ece95f267df">preference</a>) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected preference %hu, got preference %hu from NAPTR record\n&quot;</span>,</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;               <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].preference, <a class="code" href="../../db/db6/dns__naptr_8h.html#a5867b78c6f0764fe3bb834d9c0f08f39">ast_dns_naptr_get_preference</a>(record));</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../db/db6/dns__naptr_8h.html#a076ac63aa8bbba26973e834f68ed1628">ast_dns_naptr_get_flags</a>(record), <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].<a class="code" href="../../dc/dd2/structnaptr__record.html#ab69852e439dc4d1a2dc703cba8217cf3">flags</a>)) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected flags %s, got flags %s from NAPTR record\n&quot;</span>,</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;               <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].flags, <a class="code" href="../../db/db6/dns__naptr_8h.html#a076ac63aa8bbba26973e834f68ed1628">ast_dns_naptr_get_flags</a>(record));</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../db/db6/dns__naptr_8h.html#a5e1f7162110695c8a2b01a6bd58b9dd1">ast_dns_naptr_get_service</a>(record), <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].<a class="code" href="../../dc/dd2/structnaptr__record.html#a011ecf93af6d4b30a72d8a563ca4154b">services</a>)) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected services %s, got services %s from NAPTR record\n&quot;</span>,</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;               <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].services, <a class="code" href="../../db/db6/dns__naptr_8h.html#a5e1f7162110695c8a2b01a6bd58b9dd1">ast_dns_naptr_get_service</a>(record));</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../db/db6/dns__naptr_8h.html#a807ef199474c8570059720002911ba73">ast_dns_naptr_get_regexp</a>(record), <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].<a class="code" href="../../dc/dd2/structnaptr__record.html#ac234a6f5bbc4408c3917e6d450014ab5">regexp</a>)) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected regexp %s, got regexp %s from NAPTR record\n&quot;</span>,</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;               <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].regexp, <a class="code" href="../../db/db6/dns__naptr_8h.html#a807ef199474c8570059720002911ba73">ast_dns_naptr_get_regexp</a>(record));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../db/db6/dns__naptr_8h.html#ad91007ae5c71db24bad93aa8c9f257f5">ast_dns_naptr_get_replacement</a>(record), <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].<a class="code" href="../../dc/dd2/structnaptr__record.html#af13ea6e7567ddf33e5f2dc7fcafde92f">replacement</a>)) {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Expected replacement %s, got replacement %s from NAPTR record\n&quot;</span>,</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;               <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].replacement, <a class="code" href="../../db/db6/dns__naptr_8h.html#ad91007ae5c71db24bad93aa8c9f257f5">ast_dns_naptr_get_replacement</a>(record));</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      }</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].visited = 1;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      ++i;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <span class="keywordflow">if</span> (i != <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>)) {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unexpected number of records visited\n&quot;</span>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>); ++i) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>[i].visited) {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Did not visit all expected NAPTR records\n&quot;</span>);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div><div class="ttc" id="structnaptr__record_html"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html">naptr_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00035">test_dns_naptr.c:35</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="dns__core_8h_html_a60c7de83431c14325042733b66a591d1"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_record_get_next(const struct ast_dns_record *record)</div><div class="ttdoc">Get the next DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00170">dns_core.c:170</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="structnaptr__record_html_ab69852e439dc4d1a2dc703cba8217cf3"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html#ab69852e439dc4d1a2dc703cba8217cf3">naptr_record::flags</a></div><div class="ttdeci">struct ast_dns_test_string flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00038">test_dns_naptr.c:38</a></div></div>
<div class="ttc" id="structnaptr__record_html_a0895a8ef7de652dbf7ac2ece95f267df"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html#a0895a8ef7de652dbf7ac2ece95f267df">naptr_record::preference</a></div><div class="ttdeci">uint16_t preference</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00037">test_dns_naptr.c:37</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="dns__naptr_8h_html_a807ef199474c8570059720002911ba73"><div class="ttname"><a href="../../db/db6/dns__naptr_8h.html#a807ef199474c8570059720002911ba73">ast_dns_naptr_get_regexp</a></div><div class="ttdeci">const char * ast_dns_naptr_get_regexp(const struct ast_dns_record *record)</div><div class="ttdoc">Get the regular expression from a NAPTR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de7/dns__naptr_8c_source.html#l00616">dns_naptr.c:616</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="dns__naptr_8h_html_a5867b78c6f0764fe3bb834d9c0f08f39"><div class="ttname"><a href="../../db/db6/dns__naptr_8h.html#a5867b78c6f0764fe3bb834d9c0f08f39">ast_dns_naptr_get_preference</a></div><div class="ttdeci">unsigned short ast_dns_naptr_get_preference(const struct ast_dns_record *record)</div><div class="ttdoc">Get the preference from a NAPTR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de7/dns__naptr_8c_source.html#l00640">dns_naptr.c:640</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dns__naptr_8h_html_a5e1f7162110695c8a2b01a6bd58b9dd1"><div class="ttname"><a href="../../db/db6/dns__naptr_8h.html#a5e1f7162110695c8a2b01a6bd58b9dd1">ast_dns_naptr_get_service</a></div><div class="ttdeci">const char * ast_dns_naptr_get_service(const struct ast_dns_record *record)</div><div class="ttdoc">Get the service from a NAPTR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de7/dns__naptr_8c_source.html#l00608">dns_naptr.c:608</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="structnaptr__record_html_a011ecf93af6d4b30a72d8a563ca4154b"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html#a011ecf93af6d4b30a72d8a563ca4154b">naptr_record::services</a></div><div class="ttdeci">struct ast_dns_test_string services</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00039">test_dns_naptr.c:39</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="dns__naptr_8h_html_a076ac63aa8bbba26973e834f68ed1628"><div class="ttname"><a href="../../db/db6/dns__naptr_8h.html#a076ac63aa8bbba26973e834f68ed1628">ast_dns_naptr_get_flags</a></div><div class="ttdeci">const char * ast_dns_naptr_get_flags(const struct ast_dns_record *record)</div><div class="ttdoc">Get the flags from a NAPTR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de7/dns__naptr_8c_source.html#l00600">dns_naptr.c:600</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structnaptr__record_html_af13ea6e7567ddf33e5f2dc7fcafde92f"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html#af13ea6e7567ddf33e5f2dc7fcafde92f">naptr_record::replacement</a></div><div class="ttdeci">const char * replacement</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00041">test_dns_naptr.c:41</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="dns__naptr_8h_html_ac7abb9a5961a4c9774fe5c9151d9e0f7"><div class="ttname"><a href="../../db/db6/dns__naptr_8h.html#ac7abb9a5961a4c9774fe5c9151d9e0f7">ast_dns_naptr_get_order</a></div><div class="ttdeci">unsigned short ast_dns_naptr_get_order(const struct ast_dns_record *record)</div><div class="ttdoc">Get the order from a NAPTR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de7/dns__naptr_8c_source.html#l00632">dns_naptr.c:632</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
<div class="ttc" id="dns__naptr_8h_html_ad91007ae5c71db24bad93aa8c9f257f5"><div class="ttname"><a href="../../db/db6/dns__naptr_8h.html#ad91007ae5c71db24bad93aa8c9f257f5">ast_dns_naptr_get_replacement</a></div><div class="ttdeci">const char * ast_dns_naptr_get_replacement(const struct ast_dns_record *record)</div><div class="ttdoc">Get the replacement value from a NAPTR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de7/dns__naptr_8c_source.html#l00624">dns_naptr.c:624</a></div></div>
<div class="ttc" id="structnaptr__record_html_afd05883aec8e6070b12674a77c541025"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html#afd05883aec8e6070b12674a77c541025">naptr_record::order</a></div><div class="ttdeci">uint16_t order</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00036">test_dns_naptr.c:36</a></div></div>
<div class="ttc" id="structnaptr__record_html_ac234a6f5bbc4408c3917e6d450014ab5"><div class="ttname"><a href="../../dc/dd2/structnaptr__record.html#ac234a6f5bbc4408c3917e6d450014ab5">naptr_record::regexp</a></div><div class="ttdeci">struct ast_dns_test_string regexp</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db3/test__dns__naptr_8c_source.html#l00040">test_dns_naptr.c:40</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9758f967b36b914b0128933ba5e3bf38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9758f967b36b914b0128933ba5e3bf38">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">resolve_srv&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01316">1316</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00188">ast_dns_srv_get_host()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00212">ast_dns_srv_get_port()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00196">ast_dns_srv_get_priority()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00204">ast_dns_srv_get_weight()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;{</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *, resolver, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *, cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *DOMAIN1 = <span class="stringliteral">&quot;taco.bananas&quot;</span>;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *DOMAIN1_SRV = <span class="stringliteral">&quot;taco.bananas 12345 IN SRV 10 20 5060 sip.taco.bananas&quot;</span>;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;resolve_srv&quot;</span>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_resolver_unbound/&quot;</span>;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test synchronous SRV resolution using libunbound&quot;</span>;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test performs the following:\n&quot;</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;         <span class="stringliteral">&quot;\t* Set one SRV record on one domain\n&quot;</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;         <span class="stringliteral">&quot;\t* Perform an SRV lookup on the domain\n&quot;</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;         <span class="stringliteral">&quot;\t* Ensure that the SRV record returned matches the expected value&quot;</span>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   resolver = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(cfg-&gt;global-&gt;state-&gt;resolver);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   ub_ctx_zone_add(resolver-&gt;context, DOMAIN1, <span class="stringliteral">&quot;static&quot;</span>);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   ub_ctx_data_add(resolver-&gt;context, DOMAIN1_SRV);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(DOMAIN1, ns_t_srv, ns_c_in, &amp;<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)) {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to synchronously resolve SRV for domain &#39;%s&#39;\n&quot;</span>, DOMAIN1);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a>(record) != 10) {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV Record returned priority &#39;%d&#39; when we expected 10\n&quot;</span>, <a class="code" href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a>(record));</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a>(record) != 20) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV Record returned weight &#39;%d&#39; when we expected 20\n&quot;</span>, <a class="code" href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a>(record));</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a>(record) != 5060) {</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV Record returned port &#39;%d&#39; when we expected 5060\n&quot;</span>, <a class="code" href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a>(record));</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a>(record), <span class="stringliteral">&quot;sip.taco.bananas&quot;</span>)) {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;SRV Record returned host &#39;%s&#39; when we expected sip.taco.bananas\n&quot;</span>, <a class="code" href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a>(record));</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   ub_ctx_data_remove(resolver-&gt;context, DOMAIN1_SRV);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   ub_ctx_zone_remove(resolver-&gt;context, DOMAIN1);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;}</div><div class="ttc" id="dns__srv_8h_html_a78c74b574e091fd69e9b7c979176c5fe"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a78c74b574e091fd69e9b7c979176c5fe">ast_dns_srv_get_priority</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_priority(const struct ast_dns_record *record)</div><div class="ttdoc">Get the priority from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00196">dns_srv.c:196</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="dns__srv_8h_html_af77654636fa5bbe16a66123e248e0a6d"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#af77654636fa5bbe16a66123e248e0a6d">ast_dns_srv_get_port</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_port(const struct ast_dns_record *record)</div><div class="ttdoc">Get the port from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00212">dns_srv.c:212</a></div></div>
<div class="ttc" id="dns__srv_8h_html_ad7c1d64f481a6014b355a1276e3121d1"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#ad7c1d64f481a6014b355a1276e3121d1">ast_dns_srv_get_host</a></div><div class="ttdeci">const char * ast_dns_srv_get_host(const struct ast_dns_record *record)</div><div class="ttdoc">Get the hostname from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00188">dns_srv.c:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="dns__srv_8h_html_a865a8f4403946d85995086c7715f7a4c"><div class="ttname"><a href="../../d6/d39/dns__srv_8h.html#a865a8f4403946d85995086c7715f7a4c">ast_dns_srv_get_weight</a></div><div class="ttdeci">unsigned short ast_dns_srv_get_weight(const struct ast_dns_record *record)</div><div class="ttdoc">Get the weight from an SRV record. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/dns__srv_8c_source.html#l00204">dns_srv.c:204</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed3c37596cb5a728433115e6d427b92d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed3c37596cb5a728433115e6d427b92d">&#9670;&nbsp;</a></span>async_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void async_callback </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback for asynchronous queries. </p>
<p>This query will check that the records in the DNS result match records that the test has created. The success or failure of the query is indicated through the <a class="el" href="../../d2/d9c/structasync__data.html" title="Data required for an asynchronous callback. ">async_data</a> failed field.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The DNS query that has been resolved </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00649">649</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00077">ast_dns_query_get_result()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00160">ast_dns_record_get_data()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00170">ast_dns_record_get_next()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00150">ast_dns_record_get_rr_class()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00145">ast_dns_record_get_rr_type()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00155">ast_dns_record_get_ttl()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00521">dns_record::buf</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00523">dns_record::bufsize</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00610">async_data::complete</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00612">async_data::cond</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00608">async_data::failed</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00611">async_data::lock</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00606">async_data::num_records</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00604">async_data::records</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00517">dns_record::rr_class</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00515">dns_record::rr_type</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00519">dns_record::ttl</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">dns_record::visited</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00695">nominal_async_run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d9c/structasync__data.html">async_data</a> *adata = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <a class="code" href="../../d6/d51/dns__core_8h.html#a39c90d1f2d020fff6587d8014ca57da8">ast_dns_query_get_result</a>(query);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">failed</a> = -1;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">for</span> (record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(result); record; record = <a class="code" href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a>(record)) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = 0;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="comment">/* Let&#39;s make sure this matches one of our known records */</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a875a48343c2a2b1523bf8272d76ff59c">num_records</a>; ++i) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#abc1ded697e0cbcba8da698bc821d160f">ast_dns_record_get_rr_type</a>(record) == adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a>[i].<a class="code" href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a> &amp;&amp;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;               <a class="code" href="../../d6/d51/dns__core_8h.html#a2881bf7bbcf5aa487c98a402585a2c4e">ast_dns_record_get_rr_class</a>(record) == adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a>[i].<a class="code" href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a> &amp;&amp;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;               <a class="code" href="../../d6/d51/dns__core_8h.html#a3389d9f5ccb22eed7c90c37ce4e17fa8">ast_dns_record_get_ttl</a>(record) == adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a>[i].<a class="code" href="../../d6/df1/structdns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> &amp;&amp;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;               !memcmp(<a class="code" href="../../d6/d51/dns__core_8h.html#ae505e5cf22102f5a39588cec5708a1ad">ast_dns_record_get_data</a>(record), adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a>[i].<a class="code" href="../../d6/df1/structdns__record.html#ae92da6cbed6002407731bd51f7c6b984">buf</a>, adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a>[i].<a class="code" href="../../d6/df1/structdns__record.html#a849049aa2b5bddb21383ba4227fa5a5e">bufsize</a>)) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            match = 1;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a>[i].<a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> = 1;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;         }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">if</span> (!match) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">failed</a> = -1;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div><div class="ttc" id="dns__core_8h_html_a3389d9f5ccb22eed7c90c37ce4e17fa8"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a3389d9f5ccb22eed7c90c37ce4e17fa8">ast_dns_record_get_ttl</a></div><div class="ttdeci">int ast_dns_record_get_ttl(const struct ast_dns_record *record)</div><div class="ttdoc">Get the TTL of a DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00155">dns_core.c:155</a></div></div>
<div class="ttc" id="structasync__data_html"><div class="ttname"><a href="../../d2/d9c/structasync__data.html">async_data</a></div><div class="ttdoc">Data required for an asynchronous callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00602">res_resolver_unbound.c:602</a></div></div>
<div class="ttc" id="dns__core_8h_html_a60c7de83431c14325042733b66a591d1"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_record_get_next(const struct ast_dns_record *record)</div><div class="ttdoc">Get the next DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00170">dns_core.c:170</a></div></div>
<div class="ttc" id="dns__core_8h_html_ae505e5cf22102f5a39588cec5708a1ad"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ae505e5cf22102f5a39588cec5708a1ad">ast_dns_record_get_data</a></div><div class="ttdeci">const char * ast_dns_record_get_data(const struct ast_dns_record *record)</div><div class="ttdoc">Retrieve the raw DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00160">dns_core.c:160</a></div></div>
<div class="ttc" id="structasync__data_html_a875a48343c2a2b1523bf8272d76ff59c"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a875a48343c2a2b1523bf8272d76ff59c">async_data::num_records</a></div><div class="ttdeci">size_t num_records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00606">res_resolver_unbound.c:606</a></div></div>
<div class="ttc" id="structasync__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00612">res_resolver_unbound.c:612</a></div></div>
<div class="ttc" id="structasync__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00611">res_resolver_unbound.c:611</a></div></div>
<div class="ttc" id="structdns__record_html_a4b66973fd0abdd396e7c9af5f52a9600"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">dns_record::visited</a></div><div class="ttdeci">int visited</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">res_resolver_unbound.c:525</a></div></div>
<div class="ttc" id="structdns__record_html_a849049aa2b5bddb21383ba4227fa5a5e"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a849049aa2b5bddb21383ba4227fa5a5e">dns_record::bufsize</a></div><div class="ttdeci">const size_t bufsize</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00523">res_resolver_unbound.c:523</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="structdns__record_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">dns_record::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00519">res_resolver_unbound.c:519</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="structasync__data_html_ad4ec5aab9b62fbbe9b8fc2d8ac0a5989"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">async_data::failed</a></div><div class="ttdeci">int failed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00608">res_resolver_unbound.c:608</a></div></div>
<div class="ttc" id="structasync__data_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a520408f4775914f7510cc59db5a60b38">async_data::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00610">res_resolver_unbound.c:610</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="dns__core_8h_html_a39c90d1f2d020fff6587d8014ca57da8"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a39c90d1f2d020fff6587d8014ca57da8">ast_dns_query_get_result</a></div><div class="ttdeci">struct ast_dns_result * ast_dns_query_get_result(const struct ast_dns_query *query)</div><div class="ttdoc">Get the result information for a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00077">dns_core.c:77</a></div></div>
<div class="ttc" id="structasync__data_html_a4fb49ff7efea3fc81182d4c4e384c64b"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">async_data::records</a></div><div class="ttdeci">struct dns_record * records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00604">res_resolver_unbound.c:604</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="structdns__record_html_ae92da6cbed6002407731bd51f7c6b984"><div class="ttname"><a href="../../d6/df1/structdns__record.html#ae92da6cbed6002407731bd51f7c6b984">dns_record::buf</a></div><div class="ttdeci">const char * buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00521">res_resolver_unbound.c:521</a></div></div>
<div class="ttc" id="structdns__record_html_ac0d0e7420a9c7f7247c0f3068225df09"><div class="ttname"><a href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">dns_record::rr_type</a></div><div class="ttdeci">int rr_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00515">res_resolver_unbound.c:515</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structdns__record_html_abfde4c5353bcaf8fb444b116ef5cc8df"><div class="ttname"><a href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">dns_record::rr_class</a></div><div class="ttdeci">int rr_class</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00517">res_resolver_unbound.c:517</a></div></div>
<div class="ttc" id="dns__core_8h_html_a2881bf7bbcf5aa487c98a402585a2c4e"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a2881bf7bbcf5aa487c98a402585a2c4e">ast_dns_record_get_rr_class</a></div><div class="ttdeci">int ast_dns_record_get_rr_class(const struct ast_dns_record *record)</div><div class="ttdoc">Get the resource record class of a DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00150">dns_core.c:150</a></div></div>
<div class="ttc" id="dns__core_8h_html_abc1ded697e0cbcba8da698bc821d160f"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abc1ded697e0cbcba8da698bc821d160f">ast_dns_record_get_rr_type</a></div><div class="ttdeci">int ast_dns_record_get_rr_type(const struct ast_dns_record *record)</div><div class="ttdoc">Get the resource record type of a DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00145">dns_core.c:145</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cc1ac63c5e1c722c11c1851427e9372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc1ac63c5e1c722c11c1851427e9372">&#9670;&nbsp;</a></span>async_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/d9c/structasync__data.html">async_data</a>* async_data_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *&#160;</td>
          <td class="paramname"><em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_records</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00623">623</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00615">async_data_destructor()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00612">async_data::cond</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00611">async_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00606">async_data::num_records</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00084">records</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00604">async_data::records</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00695">nominal_async_run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d9c/structasync__data.html">async_data</a> *adata;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   adata = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*adata), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ab517f9e6e55d67b8b83c861ef8cfacc9">async_data_destructor</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordflow">if</span> (!adata) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">records</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a875a48343c2a2b1523bf8272d76ff59c">num_records</a> = <a class="code" href="../../d2/d9c/structasync__data.html#a875a48343c2a2b1523bf8272d76ff59c">num_records</a>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keywordflow">return</span> adata;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div><div class="ttc" id="structasync__data_html"><div class="ttname"><a href="../../d2/d9c/structasync__data.html">async_data</a></div><div class="ttdoc">Data required for an asynchronous callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00602">res_resolver_unbound.c:602</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="structasync__data_html_a875a48343c2a2b1523bf8272d76ff59c"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a875a48343c2a2b1523bf8272d76ff59c">async_data::num_records</a></div><div class="ttdeci">size_t num_records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00606">res_resolver_unbound.c:606</a></div></div>
<div class="ttc" id="structasync__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00612">res_resolver_unbound.c:612</a></div></div>
<div class="ttc" id="structasync__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00611">res_resolver_unbound.c:611</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structasync__data_html_a4fb49ff7efea3fc81182d4c4e384c64b"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a4fb49ff7efea3fc81182d4c4e384c64b">async_data::records</a></div><div class="ttdeci">struct dns_record * records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00604">res_resolver_unbound.c:604</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ab517f9e6e55d67b8b83c861ef8cfacc9"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ab517f9e6e55d67b8b83c861ef8cfacc9">async_data_destructor</a></div><div class="ttdeci">static void async_data_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00615">res_resolver_unbound.c:615</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab517f9e6e55d67b8b83c861ef8cfacc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab517f9e6e55d67b8b83c861ef8cfacc9">&#9670;&nbsp;</a></span>async_data_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void async_data_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00615">615</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00612">async_data::cond</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00611">async_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00623">async_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d9c/structasync__data.html">async_data</a> *adata = obj;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;adata-&gt;<a class="code" href="../../d2/d9c/structasync__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div><div class="ttc" id="structasync__data_html"><div class="ttname"><a href="../../d2/d9c/structasync__data.html">async_data</a></div><div class="ttdoc">Data required for an asynchronous callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00602">res_resolver_unbound.c:602</a></div></div>
<div class="ttc" id="structasync__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00612">res_resolver_unbound.c:612</a></div></div>
<div class="ttc" id="structasync__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d9c/structasync__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00611">res_resolver_unbound.c:611</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad978b1269b4c9be83f85867315010ca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad978b1269b4c9be83f85867315010ca9">&#9670;&nbsp;</a></span>async_minimal_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a>* async_minimal_data_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01124">1124</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01116">async_minimal_data_destructor()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01113">async_minimal_data::cond</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01112">async_minimal_data::lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01154">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;{</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a> *adata;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   adata = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*adata), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ac77593ed19ce7a145cd576b5fc353b35">async_minimal_data_destructor</a>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keywordflow">if</span> (!adata) {</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <span class="keywordflow">return</span> adata;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;}</div><div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ac77593ed19ce7a145cd576b5fc353b35"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ac77593ed19ce7a145cd576b5fc353b35">async_minimal_data_destructor</a></div><div class="ttdeci">static void async_minimal_data_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01116">res_resolver_unbound.c:1116</a></div></div>
<div class="ttc" id="structasync__minimal__data_html"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a></div><div class="ttdoc">Minimal data required to signal the completion of an async resolve. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01110">res_resolver_unbound.c:1110</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_minimal_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01113">res_resolver_unbound.c:1113</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_minimal_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01112">res_resolver_unbound.c:1112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac77593ed19ce7a145cd576b5fc353b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77593ed19ce7a145cd576b5fc353b35">&#9670;&nbsp;</a></span>async_minimal_data_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void async_minimal_data_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01116">1116</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01113">async_minimal_data::cond</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01112">async_minimal_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01124">async_minimal_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;{</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a> *adata = obj;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;}</div><div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="structasync__minimal__data_html"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a></div><div class="ttdoc">Minimal data required to signal the completion of an async resolve. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01110">res_resolver_unbound.c:1110</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_minimal_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01113">res_resolver_unbound.c:1113</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_minimal_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01112">res_resolver_unbound.c:1112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad32cea5e9b0d586fcf9a0aff37980818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32cea5e9b0d586fcf9a0aff37980818">&#9670;&nbsp;</a></span>CONFIG_INFO_STANDARD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CONFIG_INFO_STANDARD </td>
          <td>(</td>
          <td class="paramtype">cfg_info&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a50914e37d486c59859683c677df59b85">unbound_config_alloc</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>files</em> = <code><a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a761dc9992fb74d8296d3a6de5a506415">resolver_unbound_conf</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>pre_apply_config</em> = <code><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#a8c5504fc70dcb318e76b59b5db4e6b4a">unbound_config_preapply_callback</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register information about the configs being processed by this module. </p>

</div>
</div>
<a id="aa54025226b7743db0a753c799e5a437c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54025226b7743db0a753c799e5a437c">&#9670;&nbsp;</a></span>custom_nameserver_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int custom_nameserver_handler </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/de0/structaco__option.html">aco_option</a> *&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01409">1409</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00206">ast_str_container_add()</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00201">ast_str_container_alloc_options()</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01445">global</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00110">unbound_global_config::nameservers</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01423">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;{</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a> *<a class="code" href="../../d8/d4f/test__config_8c.html#ab8aa28659d870c360b8afb1662c1b302">global</a> = obj;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="keywordflow">if</span> (!global-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a>) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      global-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a> = <a class="code" href="../../d6/d90/strings_8h.html#a6764761a6222d4855cbf6f7abf117015">ast_str_container_alloc_options</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 1);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">if</span> (!global-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a>) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(global-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="test__config_8c_html_ab8aa28659d870c360b8afb1662c1b302"><div class="ttname"><a href="../../d8/d4f/test__config_8c.html#ab8aa28659d870c360b8afb1662c1b302">global</a></div><div class="ttdeci">static struct aco_type global</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/test__config_8c_source.html#l01445">test_config.c:1445</a></div></div>
<div class="ttc" id="structunbound__global__config_html"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a></div><div class="ttdoc">A structure to hold global configuration-related options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00103">res_resolver_unbound.c:103</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="strings_8h_html_a6764761a6222d4855cbf6f7abf117015"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6764761a6222d4855cbf6f7abf117015">ast_str_container_alloc_options</a></div><div class="ttdeci">struct ao2_container * ast_str_container_alloc_options(enum ao2_alloc_opts opts, int buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00201">strings.c:201</a></div></div>
<div class="ttc" id="structunbound__global__config_html_ade44783d68b51852b21577b4c03c0be8"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">unbound_global_config::nameservers</a></div><div class="ttdeci">struct ao2_container * nameservers</div><div class="ttdoc">List of nameservers (in order) to use for queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00110">res_resolver_unbound.c:110</a></div></div>
<div class="ttc" id="strings_8h_html_ae2861c04a240bbc90f32ade1e1261afa"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a></div><div class="ttdeci">int ast_str_container_add(struct ao2_container *str_container, const char *add)</div><div class="ttdoc">Adds a string to a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00206">strings.c:206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01423">1423</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dfe/config__options_8h_source.html#l00064">ACO_EXACT</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00877">aco_info_init()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00623">aco_option_register</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00638">aco_option_register_custom</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">ast_dns_resolver_register()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00326">AST_MODPRI_CHANNEL_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00464">ast_module_shutdown_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01409">custom_nameserver_handler()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l00435">debug</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00162">aco_file::filename</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00816">FLDSET</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00435">OPT_STRINGFIELD_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01385">reload_module()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00827">STRFLDSET</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00472">unbound_config_apply_default()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01394">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;{</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> cfg_flags = { 0, };</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a>(&amp;cfg_info)) {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;hosts&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>, <span class="stringliteral">&quot;system&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a>, hosts));</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;resolv&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>, <span class="stringliteral">&quot;system&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a>, resolv));</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a83b8d55eb1ba88ac7291f77a3ebfce45">aco_option_register_custom</a>(&amp;cfg_info, <span class="stringliteral">&quot;nameserver&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aa54025226b7743db0a753c799e5a437c">custom_nameserver_handler</a>, 0);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;debug&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>, <span class="stringliteral">&quot;0&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a>, <a class="code" href="../../dc/d6b/res__xmpp_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>));</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;ta_file&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a>, ta_file));</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="comment">/* This purposely checks for a configuration file so we don&#39;t output an error message in ACO if one is not present */</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a761dc9992fb74d8296d3a6de5a506415">resolver_unbound_conf</a>.<a class="code" href="../../d9/d9c/structaco__file.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, cfg_flags);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a8ede01706a220b84c3cde5f3717ebde4">unbound_config_apply_default</a>()) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;         <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 0) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;         <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a>(&amp;<a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a>);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a9967b09817639f2e15c3f074a60b6379">ast_module_shutdown_ref</a>(<a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>);</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_sync);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_async);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_sync_off_nominal);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_async_off_nominal);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_cancel_off_nominal);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_naptr);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(resolve_srv);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="config__options_8h_html_a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00064">config_options.h:64</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01394">res_resolver_unbound.c:1394</a></div></div>
<div class="ttc" id="config__options_8h_html_a83b8d55eb1ba88ac7291f77a3ebfce45"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a83b8d55eb1ba88ac7291f77a3ebfce45">aco_option_register_custom</a></div><div class="ttdeci">#define aco_option_register_custom(info, name, matchtype, types, default_val, handler, flags)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00638">config_options.h:638</a></div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="res__xmpp_8c_html_ac3e1795766a80ec63b157951b4b9a7d4"><div class="ttname"><a href="../../dc/d6b/res__xmpp_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a></div><div class="ttdeci">static int debug</div><div class="ttdoc">Global debug status. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/res__xmpp_8c_source.html#l00435">res_xmpp.c:435</a></div></div>
<div class="ttc" id="config__options_8h_html_a60d17d3e9451ddcb5aa861339c757bed"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a></div><div class="ttdeci">#define aco_option_register(info, name, matchtype, types, default_val, opt_type, flags,...)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00623">config_options.h:623</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aa54025226b7743db0a753c799e5a437c"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aa54025226b7743db0a753c799e5a437c">custom_nameserver_handler</a></div><div class="ttdeci">static int custom_nameserver_handler(const struct aco_option *opt, struct ast_variable *var, void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01409">res_resolver_unbound.c:1409</a></div></div>
<div class="ttc" id="structunbound__global__config_html"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a></div><div class="ttdoc">A structure to hold global configuration-related options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00103">res_resolver_unbound.c:103</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="config__options_8h_html_a5793d5d6ccf2df0b2423eb3274af7802"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a></div><div class="ttdeci">#define FLDSET(type,...)</div><div class="ttdoc">Convert a struct and list of fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00816">config_options.h:816</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="config__options_8h_html_a3f40a7cffea07c21a21faaee64d24398"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a></div><div class="ttdeci">int aco_info_init(struct aco_info *info)</div><div class="ttdoc">Initialize an aco_info structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00877">config_options.c:877</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a7cf990e0d32f790b61b1cdffc6f005a2"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a></div><div class="ttdeci">int ast_dns_resolver_register(struct ast_dns_resolver *resolver)</div><div class="ttdoc">Register a DNS resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00630">dns_core.c:630</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="module_8h_html_a9967b09817639f2e15c3f074a60b6379"><div class="ttname"><a href="../../d5/d16/module_8h.html#a9967b09817639f2e15c3f074a60b6379">ast_module_shutdown_ref</a></div><div class="ttdeci">#define ast_module_shutdown_ref(mod)</div><div class="ttdoc">Prevent unload of the module before shutdown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00464">module.h:464</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a8ede01706a220b84c3cde5f3717ebde4"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a8ede01706a220b84c3cde5f3717ebde4">unbound_config_apply_default</a></div><div class="ttdeci">static int unbound_config_apply_default(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00472">res_resolver_unbound.c:472</a></div></div>
<div class="ttc" id="config__options_8h_html_a3e5be807d4a10b6da6382a40a0004ace"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a></div><div class="ttdeci">#define STRFLDSET(type,...)</div><div class="ttdoc">Convert a struct and a list of stringfield fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00827">config_options.h:827</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="structaco__file_html_a7efa5e9c7494c7d4586359300221aa5d"><div class="ttname"><a href="../../d9/d9c/structaco__file.html#a7efa5e9c7494c7d4586359300221aa5d">aco_file::filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00162">config_options.h:162</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a05b71d76cff3ccd9fe2a0c4a16d21271"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a05b71d76cff3ccd9fe2a0c4a16d21271">global_options</a></div><div class="ttdeci">static struct aco_type * global_options[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00138">res_resolver_unbound.c:138</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a></div><div class="ttdoc">Type for default option handler for stringfields. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00435">config_options.h:435</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a761dc9992fb74d8296d3a6de5a506415"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a761dc9992fb74d8296d3a6de5a506415">resolver_unbound_conf</a></div><div class="ttdeci">static struct aco_file resolver_unbound_conf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00140">res_resolver_unbound.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d07be278336c2aff4fd63dbac00fbef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d07be278336c2aff4fd63dbac00fbef">&#9670;&nbsp;</a></span>minimal_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void minimal_callback </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Async callback for off-nominal cancellation test. </p>
<p>This simply signals the testing thread that the query completed </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01144">1144</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01111">async_minimal_data::complete</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01113">async_minimal_data::cond</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01112">async_minimal_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01154">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;{</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a> *adata = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;adata-&gt;<a class="code" href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;}</div><div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="structasync__minimal__data_html"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html">async_minimal_data</a></div><div class="ttdoc">Minimal data required to signal the completion of an async resolve. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01110">res_resolver_unbound.c:1110</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#a520408f4775914f7510cc59db5a60b38">async_minimal_data::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01111">res_resolver_unbound.c:1111</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#a1c7181c39f99ee801943a0d0aa9872b9">async_minimal_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01113">res_resolver_unbound.c:1113</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structasync__minimal__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d37/structasync__minimal__data.html#adf04f66344e3fb0a6f6a69bf39d19902">async_minimal_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01112">res_resolver_unbound.c:1112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad122ac73403f67e6ead2493755b70fcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad122ac73403f67e6ead2493755b70fcc">&#9670;&nbsp;</a></span>nominal_async_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nominal_async_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *&#160;</td>
          <td class="paramname"><em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_records</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pluggable function for performing an asynchronous query during a test. </p>
<p>Unlike the synchronous version, this does not check the records, instead leaving that to be done in the asynchronous callback. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00695">695</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00247">ast_dns_resolve_async()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00649">async_callback()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00623">async_data_alloc()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">dns_record::visited</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00852">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dcd/structast__dns__query__active.html">ast_dns_query_active</a> *, active, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d9c/structasync__data.html">async_data</a> *, adata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   adata = <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a6cc1ac63c5e1c722c11c1851427e9372">async_data_alloc</a>(records, num_records);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="keywordflow">if</span> (!adata) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unable to allocate data for async query\n&quot;</span>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="comment">/* Start by making sure no records have been visited */</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; num_records; ++i) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      records[i].<a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> = 0;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Performing DNS query &#39;%s&#39;, type %d\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>, rr_type);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   active = <a class="code" href="../../d6/d51/dns__core_8h.html#a67e1cfb2c7b24d45cf003d49923f5d9f">ast_dns_resolve_async</a>(<a class="code" href="../../dd/dac/structdomain.html">domain</a>, rr_type, rr_class, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a>, adata);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordflow">if</span> (!active) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Failed to perform asynchronous resolution of domain %s\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;adata-&gt;lock);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordflow">while</span> (!adata-&gt;complete) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;adata-&gt;cond, &amp;adata-&gt;lock);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;adata-&gt;lock);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <span class="keywordflow">if</span> (adata-&gt;failed) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unknown DNS record returned from domain %s\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">return</span> adata-&gt;failed;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div><div class="ttc" id="structasync__data_html"><div class="ttname"><a href="../../d2/d9c/structasync__data.html">async_data</a></div><div class="ttdoc">Data required for an asynchronous callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00602">res_resolver_unbound.c:602</a></div></div>
<div class="ttc" id="structdns__record_html_a4b66973fd0abdd396e7c9af5f52a9600"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">dns_record::visited</a></div><div class="ttdeci">int visited</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">res_resolver_unbound.c:525</a></div></div>
<div class="ttc" id="dns__core_8h_html_a67e1cfb2c7b24d45cf003d49923f5d9f"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a67e1cfb2c7b24d45cf003d49923f5d9f">ast_dns_resolve_async</a></div><div class="ttdeci">struct ast_dns_query_active * ast_dns_resolve_async(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00247">dns_core.c:247</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aed3c37596cb5a728433115e6d427b92d"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aed3c37596cb5a728433115e6d427b92d">async_callback</a></div><div class="ttdeci">static void async_callback(const struct ast_dns_query *query)</div><div class="ttdoc">Callback for asynchronous queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00649">res_resolver_unbound.c:649</a></div></div>
<div class="ttc" id="structast__dns__query__active_html"><div class="ttname"><a href="../../d8/dcd/structast__dns__query__active.html">ast_dns_query_active</a></div><div class="ttdoc">An active DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00201">dns_internal.h:201</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a6cc1ac63c5e1c722c11c1851427e9372"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a6cc1ac63c5e1c722c11c1851427e9372">async_data_alloc</a></div><div class="ttdeci">static struct async_data * async_data_alloc(struct dns_record *records, size_t num_records)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00623">res_resolver_unbound.c:623</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ff071c60ce8956fb9aff39f2080a7c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ff071c60ce8956fb9aff39f2080a7c7">&#9670;&nbsp;</a></span>nominal_sync_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int nominal_sync_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/df1/structdns__record.html">dns_record</a> *&#160;</td>
          <td class="paramname"><em>records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_records</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pluggable function for running a synchronous query and checking its results. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00551">551</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00160">ast_dns_record_get_data()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00170">ast_dns_record_get_next()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00150">ast_dns_record_get_rr_class()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00145">ast_dns_record_get_rr_type()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00155">ast_dns_record_get_ttl()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00517">dns_record::rr_class</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00515">dns_record::rr_type</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00519">dns_record::ttl</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">dns_record::visited</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00827">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="comment">/* Start by making sure no records have been visited */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; num_records; ++i) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      records[i].<a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> = 0;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Performing DNS query &#39;%s&#39;, type %d\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>, <a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(<a class="code" href="../../dd/dac/structdomain.html">domain</a>, <a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>, <a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>, &amp;<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Failed to perform synchronous resolution of domain %s\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Successful synchronous resolution of domain %s gave NULL result\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">for</span> (record = <a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>); record; record = <a class="code" href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a>(record)) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a> = 0;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="comment">/* Let&#39;s make sure this matches one of our known records */</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; num_records; ++i) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#abc1ded697e0cbcba8da698bc821d160f">ast_dns_record_get_rr_type</a>(record) == records[i].<a class="code" href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a> &amp;&amp;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;               <a class="code" href="../../d6/d51/dns__core_8h.html#a2881bf7bbcf5aa487c98a402585a2c4e">ast_dns_record_get_rr_class</a>(record) == records[i].<a class="code" href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a> &amp;&amp;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;               <a class="code" href="../../d6/d51/dns__core_8h.html#a3389d9f5ccb22eed7c90c37ce4e17fa8">ast_dns_record_get_ttl</a>(record) == records[i].<a class="code" href="../../d6/df1/structdns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> &amp;&amp;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;               !memcmp(<a class="code" href="../../d6/d51/dns__core_8h.html#ae505e5cf22102f5a39588cec5708a1ad">ast_dns_record_get_data</a>(record), records[i].<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, records[i].bufsize)) {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            match = 1;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            records[i].<a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> = 1;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">if</span> (!match) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unknown DNS record returned from domain %s\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="ttc" id="dns__core_8h_html_a3389d9f5ccb22eed7c90c37ce4e17fa8"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a3389d9f5ccb22eed7c90c37ce4e17fa8">ast_dns_record_get_ttl</a></div><div class="ttdeci">int ast_dns_record_get_ttl(const struct ast_dns_record *record)</div><div class="ttdoc">Get the TTL of a DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00155">dns_core.c:155</a></div></div>
<div class="ttc" id="dns__core_8h_html_a60c7de83431c14325042733b66a591d1"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a60c7de83431c14325042733b66a591d1">ast_dns_record_get_next</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_record_get_next(const struct ast_dns_record *record)</div><div class="ttdoc">Get the next DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00170">dns_core.c:170</a></div></div>
<div class="ttc" id="dns__core_8h_html_ae505e5cf22102f5a39588cec5708a1ad"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ae505e5cf22102f5a39588cec5708a1ad">ast_dns_record_get_data</a></div><div class="ttdeci">const char * ast_dns_record_get_data(const struct ast_dns_record *record)</div><div class="ttdoc">Retrieve the raw DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00160">dns_core.c:160</a></div></div>
<div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structdns__record_html_a4b66973fd0abdd396e7c9af5f52a9600"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">dns_record::visited</a></div><div class="ttdeci">int visited</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">res_resolver_unbound.c:525</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="structdns__record_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">dns_record::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00519">res_resolver_unbound.c:519</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="structdns__record_html_ac0d0e7420a9c7f7247c0f3068225df09"><div class="ttname"><a href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">dns_record::rr_type</a></div><div class="ttdeci">int rr_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00515">res_resolver_unbound.c:515</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structdns__record_html_abfde4c5353bcaf8fb444b116ef5cc8df"><div class="ttname"><a href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">dns_record::rr_class</a></div><div class="ttdeci">int rr_class</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00517">res_resolver_unbound.c:517</a></div></div>
<div class="ttc" id="dns__core_8h_html_a2881bf7bbcf5aa487c98a402585a2c4e"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a2881bf7bbcf5aa487c98a402585a2c4e">ast_dns_record_get_rr_class</a></div><div class="ttdeci">int ast_dns_record_get_rr_class(const struct ast_dns_record *record)</div><div class="ttdoc">Get the resource record class of a DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00150">dns_core.c:150</a></div></div>
<div class="ttc" id="dns__core_8h_html_abc1ded697e0cbcba8da698bc821d160f"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abc1ded697e0cbcba8da698bc821d160f">ast_dns_record_get_rr_type</a></div><div class="ttdeci">int ast_dns_record_get_rr_type(const struct ast_dns_record *record)</div><div class="ttdoc">Get the resource record type of a DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00145">dns_core.c:145</a></div></div>
<div class="ttc" id="structast__dns__record_html_ac0d0e7420a9c7f7247c0f3068225df09"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">ast_dns_record::rr_type</a></div><div class="ttdeci">int rr_type</div><div class="ttdoc">Resource record type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00041">dns_internal.h:41</a></div></div>
<div class="ttc" id="structast__dns__record_html_abfde4c5353bcaf8fb444b116ef5cc8df"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">ast_dns_record::rr_class</a></div><div class="ttdeci">int rr_class</div><div class="ttdoc">Resource record class. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00043">dns_internal.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3e3243986c2073d0c29ea09851e78b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e3243986c2073d0c29ea09851e78b0">&#9670;&nbsp;</a></span>nominal_test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> nominal_test </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#affd13bfdc85e2e7b7a73de4fd877be05">resolve_fn</a>&#160;</td>
          <td class="paramname"><em>runner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Framework for running a nominal DNS test. </p>
<p>Synchronous and asynchronous tests mostly have the same setup, so this function serves as a common way to set up both types of tests by accepting a pluggable function to determine which type of lookup is used</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test</td><td>The test being run </td></tr>
    <tr><td class="paramname">runner</td><td>The method for resolving queries on this test </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00743">743</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00511">dns_record::as_string</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00827">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *, resolver, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *, cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> V4_SIZE = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>in_addr);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> V6_SIZE = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>in6_addr);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *DOMAIN1 = <span class="stringliteral">&quot;goose.feathers&quot;</span>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *DOMAIN2 = <span class="stringliteral">&quot;duck.feathers&quot;</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR1 = <span class="stringliteral">&quot;127.0.0.2&quot;</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR2 = <span class="stringliteral">&quot;127.0.0.3&quot;</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR3 = <span class="stringliteral">&quot;::1&quot;</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR4 = <span class="stringliteral">&quot;127.0.0.4&quot;</span>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordtype">char</span> addr1_buf[V4_SIZE];</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keywordtype">char</span> addr2_buf[V4_SIZE];</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="keywordtype">char</span> addr3_buf[V6_SIZE];</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keywordtype">char</span> addr4_buf[V4_SIZE];</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/df1/structdns__record.html">dns_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a> [] = {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN A 127.0.0.2&quot;</span>, DOMAIN1, ns_t_a,    ns_c_in, 12345, addr1_buf, V4_SIZE, 0 },</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN A 127.0.0.3&quot;</span>, DOMAIN1, ns_t_a,    ns_c_in, 12345, addr2_buf, V4_SIZE, 0 },</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN AAAA ::1&quot;</span>,    DOMAIN1, ns_t_aaaa, ns_c_in, 12345, addr3_buf, V6_SIZE, 0 },</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      { <span class="stringliteral">&quot;duck.feathers 12345 IN A 127.0.0.4&quot;</span>,  DOMAIN2, ns_t_a,    ns_c_in, 12345, addr4_buf, V4_SIZE, 0 },</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   };</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keyword">struct </span>{</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/df1/structdns__record.html#a52e31162553211bc239fae1a464d7751">domain</a>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a>[<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records)];</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   } runs [] = {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      { DOMAIN1, ns_t_a,    ns_c_in, { 1, 1, 0, 0 } },</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      { DOMAIN1, ns_t_aaaa, ns_c_in, { 0, 0, 1, 0 } },</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      { DOMAIN2, ns_t_a,    ns_c_in, { 0, 0, 0, 1 } },</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   };</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   inet_pton(AF_INET,  ADDR1, addr1_buf);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   inet_pton(AF_INET,  ADDR2, addr2_buf);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   inet_pton(AF_INET6,  ADDR3, addr3_buf);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   inet_pton(AF_INET, ADDR4, addr4_buf);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   resolver = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(cfg-&gt;global-&gt;state-&gt;resolver);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   ub_ctx_zone_add(resolver-&gt;context, DOMAIN1, <span class="stringliteral">&quot;static&quot;</span>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   ub_ctx_zone_add(resolver-&gt;context, DOMAIN2, <span class="stringliteral">&quot;static&quot;</span>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records); ++i) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      ub_ctx_data_add(resolver-&gt;context, records[i].<a class="code" href="../../d6/df1/structdns__record.html#a2d68bb0df93475f2ca30c3877048c1fd">as_string</a>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(runs); ++i) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordtype">int</span> j;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keywordflow">if</span> (runner(test, runs[i].<a class="code" href="../../dd/dac/structdomain.html">domain</a>, runs[i].<a class="code" href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>, runs[i].<a class="code" href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>, records, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records))) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records); ++j) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;         <span class="keywordflow">if</span> (records[j].<a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a> != runs[i].<a class="code" href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">visited</a>[j]) {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;DNS results match unexpected records\n&quot;</span>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records); ++i) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      ub_ctx_data_remove(resolver-&gt;context, records[i].<a class="code" href="../../d6/df1/structdns__record.html#a2d68bb0df93475f2ca30c3877048c1fd">as_string</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   ub_ctx_zone_remove(resolver-&gt;context, DOMAIN1);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   ub_ctx_zone_remove(resolver-&gt;context, DOMAIN2);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="structdns__record_html_a4b66973fd0abdd396e7c9af5f52a9600"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a4b66973fd0abdd396e7c9af5f52a9600">dns_record::visited</a></div><div class="ttdeci">int visited</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00525">res_resolver_unbound.c:525</a></div></div>
<div class="ttc" id="structdns__record_html"><div class="ttname"><a href="../../d6/df1/structdns__record.html">dns_record</a></div><div class="ttdoc">A DNS record to be used during a test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00509">res_resolver_unbound.c:509</a></div></div>
<div class="ttc" id="structdns__record_html_a2d68bb0df93475f2ca30c3877048c1fd"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a2d68bb0df93475f2ca30c3877048c1fd">dns_record::as_string</a></div><div class="ttdeci">const char * as_string</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00511">res_resolver_unbound.c:511</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdns__record_html_a52e31162553211bc239fae1a464d7751"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a52e31162553211bc239fae1a464d7751">dns_record::domain</a></div><div class="ttdeci">const char * domain</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00513">res_resolver_unbound.c:513</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structdns__record_html_ac0d0e7420a9c7f7247c0f3068225df09"><div class="ttname"><a href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">dns_record::rr_type</a></div><div class="ttdeci">int rr_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00515">res_resolver_unbound.c:515</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
<div class="ttc" id="structdns__record_html_abfde4c5353bcaf8fb444b116ef5cc8df"><div class="ttname"><a href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">dns_record::rr_class</a></div><div class="ttdeci">int rr_class</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00517">res_resolver_unbound.c:517</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ff1daa307aa9a06c7d56c3a23487756"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ff1daa307aa9a06c7d56c3a23487756">&#9670;&nbsp;</a></span>off_nominal_async_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void off_nominal_async_callback </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Async callback for off-nominal async test. </p>
<p>This test ensures that there is a result present on the query, then it checks that the rcode on the result is the expected value and that there are no records on the result.</p>
<p>Once completed, the testing thread is signaled that the async query has completed. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00958">958</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00072">ast_dns_query_get_data()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00077">ast_dns_query_get_result()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00092">ast_dns_result_get_rcode()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00918">off_nominal_async_data::complete</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00920">off_nominal_async_data::cond</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00914">off_nominal_async_data::expected_rcode</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00916">off_nominal_async_data::failed</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00919">off_nominal_async_data::lock</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00983">off_nominal_async_run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;{</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a> *adata = <a class="code" href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a>(query);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <a class="code" href="../../d6/d51/dns__core_8h.html#a39c90d1f2d020fff6587d8014ca57da8">ast_dns_query_get_result</a>(query);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">failed</a> = -1;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   }</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#a6d8c6d6721c555cd8320e39d75aae059">ast_dns_result_get_rcode</a>(result) != adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">expected_rcode</a>) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">failed</a> = -1;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(result)) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">failed</a> = -1;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;}</div><div class="ttc" id="structoff__nominal__async__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#a1c7181c39f99ee801943a0d0aa9872b9">off_nominal_async_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00920">res_resolver_unbound.c:920</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a></div><div class="ttdoc">User data for off-nominal async resolution test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00912">res_resolver_unbound.c:912</a></div></div>
<div class="ttc" id="dns__core_8h_html_a4c14cc60e6bf38af12b6af632ffb1fff"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a4c14cc60e6bf38af12b6af632ffb1fff">ast_dns_query_get_data</a></div><div class="ttdeci">void * ast_dns_query_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Get the user specific data of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00072">dns_core.c:72</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#a520408f4775914f7510cc59db5a60b38">off_nominal_async_data::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00918">res_resolver_unbound.c:918</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">off_nominal_async_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00919">res_resolver_unbound.c:919</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_ab08465ff6d8751ee6dd117660e0f1856"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">off_nominal_async_data::expected_rcode</a></div><div class="ttdeci">int expected_rcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00914">res_resolver_unbound.c:914</a></div></div>
<div class="ttc" id="dns__core_8h_html_a39c90d1f2d020fff6587d8014ca57da8"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a39c90d1f2d020fff6587d8014ca57da8">ast_dns_query_get_result</a></div><div class="ttdeci">struct ast_dns_result * ast_dns_query_get_result(const struct ast_dns_query *query)</div><div class="ttdoc">Get the result information for a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00077">dns_core.c:77</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_ad4ec5aab9b62fbbe9b8fc2d8ac0a5989"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#ad4ec5aab9b62fbbe9b8fc2d8ac0a5989">off_nominal_async_data::failed</a></div><div class="ttdeci">int failed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00916">res_resolver_unbound.c:916</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="dns__core_8h_html_a6d8c6d6721c555cd8320e39d75aae059"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a6d8c6d6721c555cd8320e39d75aae059">ast_dns_result_get_rcode</a></div><div class="ttdeci">unsigned int ast_dns_result_get_rcode(const struct ast_dns_result *result)</div><div class="ttdoc">Get the error rcode of a DN result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00092">dns_core.c:92</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a94d22feafdae173f48c537d48c70e5ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94d22feafdae173f48c537d48c70e5ba">&#9670;&nbsp;</a></span>off_nominal_async_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a>* off_nominal_async_data_alloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expected_rcode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00931">931</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00920">off_nominal_async_data::cond</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00914">off_nominal_async_data::expected_rcode</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00919">off_nominal_async_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00923">off_nominal_async_data_destructor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00983">off_nominal_async_run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;{</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a> *adata;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   adata = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*adata), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a31ec1aa86331ffc6a42e468980451f24">off_nominal_async_data_destructor</a>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">if</span> (!adata) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">expected_rcode</a> = <a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">expected_rcode</a>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">return</span> adata;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;}</div><div class="ttc" id="structoff__nominal__async__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#a1c7181c39f99ee801943a0d0aa9872b9">off_nominal_async_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00920">res_resolver_unbound.c:920</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a31ec1aa86331ffc6a42e468980451f24"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a31ec1aa86331ffc6a42e468980451f24">off_nominal_async_data_destructor</a></div><div class="ttdeci">static void off_nominal_async_data_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00923">res_resolver_unbound.c:923</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a></div><div class="ttdoc">User data for off-nominal async resolution test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00912">res_resolver_unbound.c:912</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">off_nominal_async_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00919">res_resolver_unbound.c:919</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_ab08465ff6d8751ee6dd117660e0f1856"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">off_nominal_async_data::expected_rcode</a></div><div class="ttdeci">int expected_rcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00914">res_resolver_unbound.c:914</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31ec1aa86331ffc6a42e468980451f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31ec1aa86331ffc6a42e468980451f24">&#9670;&nbsp;</a></span>off_nominal_async_data_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void off_nominal_async_data_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00923">923</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00920">off_nominal_async_data::cond</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00919">off_nominal_async_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00931">off_nominal_async_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;{</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a> *adata = obj;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;adata-&gt;<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div><div class="ttc" id="structoff__nominal__async__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#a1c7181c39f99ee801943a0d0aa9872b9">off_nominal_async_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00920">res_resolver_unbound.c:920</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a></div><div class="ttdoc">User data for off-nominal async resolution test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00912">res_resolver_unbound.c:912</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#adf04f66344e3fb0a6f6a69bf39d19902">off_nominal_async_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00919">res_resolver_unbound.c:919</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68d8ddf655641dc0cd21574d1472fd59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d8ddf655641dc0cd21574d1472fd59">&#9670;&nbsp;</a></span>off_nominal_async_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int off_nominal_async_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expected_rcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00983">983</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00247">ast_dns_resolve_async()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00958">off_nominal_async_callback()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00931">off_nominal_async_data_alloc()</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01088">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;{</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dcd/structast__dns__query__active.html">ast_dns_query_active</a> *, active, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a> *, adata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   adata = <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a94d22feafdae173f48c537d48c70e5ba">off_nominal_async_data_alloc</a>(<a class="code" href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">expected_rcode</a>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">if</span> (!adata) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unable to allocate data for async query\n&quot;</span>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Performing DNS query &#39;%s&#39;, type %d\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>, rr_type);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   active = <a class="code" href="../../d6/d51/dns__core_8h.html#a67e1cfb2c7b24d45cf003d49923f5d9f">ast_dns_resolve_async</a>(<a class="code" href="../../dd/dac/structdomain.html">domain</a>, rr_type, rr_class, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a5ff1daa307aa9a06c7d56c3a23487756">off_nominal_async_callback</a>, adata);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">if</span> (!active) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Failed to perform asynchronous resolution of domain %s\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;adata-&gt;lock);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <span class="keywordflow">while</span> (!adata-&gt;complete) {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;adata-&gt;cond, &amp;adata-&gt;lock);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;adata-&gt;lock);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <span class="keywordflow">if</span> (adata-&gt;failed) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Asynchronous resolution failure %s\n&quot;</span>, <a class="code" href="../../dd/dac/structdomain.html">domain</a>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <span class="keywordflow">return</span> adata-&gt;failed;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div><div class="ttc" id="res__resolver__unbound_8c_html_a94d22feafdae173f48c537d48c70e5ba"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a94d22feafdae173f48c537d48c70e5ba">off_nominal_async_data_alloc</a></div><div class="ttdeci">static struct off_nominal_async_data * off_nominal_async_data_alloc(int expected_rcode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00931">res_resolver_unbound.c:931</a></div></div>
<div class="ttc" id="dns__core_8h_html_a67e1cfb2c7b24d45cf003d49923f5d9f"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a67e1cfb2c7b24d45cf003d49923f5d9f">ast_dns_resolve_async</a></div><div class="ttdeci">struct ast_dns_query_active * ast_dns_resolve_async(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data)</div><div class="ttdoc">Asynchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00247">dns_core.c:247</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html">off_nominal_async_data</a></div><div class="ttdoc">User data for off-nominal async resolution test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00912">res_resolver_unbound.c:912</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structoff__nominal__async__data_html_ab08465ff6d8751ee6dd117660e0f1856"><div class="ttname"><a href="../../d6/d57/structoff__nominal__async__data.html#ab08465ff6d8751ee6dd117660e0f1856">off_nominal_async_data::expected_rcode</a></div><div class="ttdeci">int expected_rcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00914">res_resolver_unbound.c:914</a></div></div>
<div class="ttc" id="structast__dns__query__active_html"><div class="ttname"><a href="../../d8/dcd/structast__dns__query__active.html">ast_dns_query_active</a></div><div class="ttdoc">An active DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00201">dns_internal.h:201</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a5ff1daa307aa9a06c7d56c3a23487756"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a5ff1daa307aa9a06c7d56c3a23487756">off_nominal_async_callback</a></div><div class="ttdeci">static void off_nominal_async_callback(const struct ast_dns_query *query)</div><div class="ttdoc">Async callback for off-nominal async test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00958">res_resolver_unbound.c:958</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a606f8a6e6927f924f4ff4daa8253c678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606f8a6e6927f924f4ff4daa8253c678">&#9670;&nbsp;</a></span>off_nominal_sync_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int off_nominal_sync_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expected_rcode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00879">879</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00314">ast_dns_resolve()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00092">ast_dns_result_get_rcode()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00102">ast_dns_result_get_records()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01069">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a>(<a class="code" href="../../dd/dac/structdomain.html">domain</a>, rr_type, rr_class, &amp;result)) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Failed to perform resolution :(\n&quot;</span>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Resolution returned no result\n&quot;</span>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#a6d8c6d6721c555cd8320e39d75aae059">ast_dns_result_get_rcode</a>(result) != expected_rcode) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unexpected rcode from DNS resolution\n&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      res = -1;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a>(result)) {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;DNS resolution returned records unexpectedly\n&quot;</span>);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      res = -1;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <a class="code" href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>(result);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div><div class="ttc" id="dns__core_8h_html_ace452a5e50044783b7b81caf7dbee17c"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#ace452a5e50044783b7b81caf7dbee17c">ast_dns_resolve</a></div><div class="ttdeci">int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result)</div><div class="ttdoc">Synchronously resolve a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00314">dns_core.c:314</a></div></div>
<div class="ttc" id="dns__core_8h_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structast__dns__result_html"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html">ast_dns_result</a></div><div class="ttdoc">The result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00117">dns_internal.h:117</a></div></div>
<div class="ttc" id="dns__core_8h_html_abad4eaaea3a60b0e8b9dc1f69a7d69fc"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#abad4eaaea3a60b0e8b9dc1f69a7d69fc">ast_dns_result_get_records</a></div><div class="ttdeci">const struct ast_dns_record * ast_dns_result_get_records(const struct ast_dns_result *result)</div><div class="ttdoc">Get the first record of a DNS Result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00102">dns_core.c:102</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="dns__core_8h_html_a6d8c6d6721c555cd8320e39d75aae059"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a6d8c6d6721c555cd8320e39d75aae059">ast_dns_result_get_rcode</a></div><div class="ttdeci">unsigned int ast_dns_result_get_rcode(const struct ast_dns_result *result)</div><div class="ttdoc">Get the error rcode of a DN result. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00092">dns_core.c:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed6ff81b51991f00ee61715d5afdd4f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6ff81b51991f00ee61715d5afdd4f1">&#9670;&nbsp;</a></span>off_nominal_test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> off_nominal_test </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d5c/res__resolver__unbound_8c.html#afef415f46bcfe1b4142ac75d8c46088a">off_nominal_resolve_fn</a>&#160;</td>
          <td class="paramname"><em>runner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01015">1015</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00511">dns_record::as_string</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01069">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *, resolver, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *, cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> V4_SIZE = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>in_addr);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *DOMAIN1 = <span class="stringliteral">&quot;goose.feathers&quot;</span>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *DOMAIN2 = <span class="stringliteral">&quot;duck.feathers&quot;</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ADDR1 = <span class="stringliteral">&quot;127.0.0.2&quot;</span>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordtype">char</span> addr1_buf[V4_SIZE];</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/df1/structdns__record.html">dns_record</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a> [] = {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      { <span class="stringliteral">&quot;goose.feathers 12345 IN A 127.0.0.2&quot;</span>, DOMAIN1, ns_t_a, ns_c_in, 12345, addr1_buf, V4_SIZE, 0, },</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   };</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keyword">struct </span>{</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/df1/structdns__record.html#a52e31162553211bc239fae1a464d7751">domain</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordtype">int</span> rcode;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   } runs [] = {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      { DOMAIN2, ns_t_a,    ns_c_in, ns_r_nxdomain },</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      { DOMAIN1, ns_t_aaaa, ns_c_in, ns_r_noerror },</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      { DOMAIN1, ns_t_a,    ns_c_chaos, ns_r_refused },</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   };</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   inet_pton(AF_INET,  ADDR1, addr1_buf);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   resolver = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(cfg-&gt;global-&gt;state-&gt;resolver);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   ub_ctx_zone_add(resolver-&gt;context, DOMAIN1, <span class="stringliteral">&quot;static&quot;</span>);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   ub_ctx_zone_add(resolver-&gt;context, DOMAIN2, <span class="stringliteral">&quot;static&quot;</span>);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(records); ++i) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      ub_ctx_data_add(resolver-&gt;context, records[i].<a class="code" href="../../d6/df1/structdns__record.html#a2d68bb0df93475f2ca30c3877048c1fd">as_string</a>);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(runs); ++i) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">if</span> (runner(test, runs[i].<a class="code" href="../../dd/dac/structdomain.html">domain</a>, runs[i].<a class="code" href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>, runs[i].<a class="code" href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>, runs[i].rcode)) {</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_ab18693215565ea1a797096dfe19e895f"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ab18693215565ea1a797096dfe19e895f">records</a></div><div class="ttdeci">static int records</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00084">cdr_mysql.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="structdns__record_html"><div class="ttname"><a href="../../d6/df1/structdns__record.html">dns_record</a></div><div class="ttdoc">A DNS record to be used during a test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00509">res_resolver_unbound.c:509</a></div></div>
<div class="ttc" id="structdns__record_html_a2d68bb0df93475f2ca30c3877048c1fd"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a2d68bb0df93475f2ca30c3877048c1fd">dns_record::as_string</a></div><div class="ttdeci">const char * as_string</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00511">res_resolver_unbound.c:511</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdns__record_html_a52e31162553211bc239fae1a464d7751"><div class="ttname"><a href="../../d6/df1/structdns__record.html#a52e31162553211bc239fae1a464d7751">dns_record::domain</a></div><div class="ttdeci">const char * domain</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00513">res_resolver_unbound.c:513</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structdns__record_html_ac0d0e7420a9c7f7247c0f3068225df09"><div class="ttname"><a href="../../d6/df1/structdns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">dns_record::rr_type</a></div><div class="ttdeci">int rr_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00515">res_resolver_unbound.c:515</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
<div class="ttc" id="structdns__record_html_abfde4c5353bcaf8fb444b116ef5cc8df"><div class="ttname"><a href="../../d6/df1/structdns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">dns_record::rr_class</a></div><div class="ttdeci">int rr_class</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00517">res_resolver_unbound.c:517</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01385">1385</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, and <a class="el" href="../../d5/d16/module_8h_source.html#l00113">AST_MODULE_RELOAD_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01423">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;{</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 1) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6">AST_MODULE_RELOAD_ERROR</a>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div><div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="module_8h_html_ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6"><div class="ttname"><a href="../../d5/d16/module_8h.html#ac9013ad6d9add8a9255568c7db032cb7aa719b0c0d0c58b358deaf9933a8dd3f6">AST_MODULE_RELOAD_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00113">module.h:113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50914e37d486c59859683c677df59b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50914e37d486c59859683c677df59b85">&#9670;&nbsp;</a></span>unbound_config_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * unbound_config_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate a <a class="el" href="../../df/da0/structunbound__config.html" title="A container for config related information. ">unbound_config</a> to hold a snapshot of the complete results of parsing a config. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00365">365</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">unbound_config::global</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00339">unbound_config_destructor()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00346">unbound_global_config_destructor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00472">unbound_config_apply_default()</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *cfg;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*cfg), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a964e338ee0ac700ca3b8509a0b22eb85">unbound_config_destructor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="comment">/* Allocate/initialize memory */</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aad0cf4b54e4f4a553f7062f9c8158ac8">unbound_global_config_destructor</a>,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>, 128)) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>:</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structunbound__config_html_a8ddc60c985475e1efa4fd6b38a9b7570"><div class="ttname"><a href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">unbound_config::global</a></div><div class="ttdeci">struct unbound_global_config * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">res_resolver_unbound.c:119</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aad0cf4b54e4f4a553f7062f9c8158ac8"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aad0cf4b54e4f4a553f7062f9c8158ac8">unbound_global_config_destructor</a></div><div class="ttdeci">static void unbound_global_config_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00346">res_resolver_unbound.c:346</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a964e338ee0ac700ca3b8509a0b22eb85"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a964e338ee0ac700ca3b8509a0b22eb85">unbound_config_destructor</a></div><div class="ttdeci">static void unbound_config_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00339">res_resolver_unbound.c:339</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ede01706a220b84c3cde5f3717ebde4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ede01706a220b84c3cde5f3717ebde4">&#9670;&nbsp;</a></span>unbound_config_apply_default()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unbound_config_apply_default </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00472">472</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00924">aco_set_defaults()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">unbound_config::global</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00365">unbound_config_alloc()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">unbound_config_preapply()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01423">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *cfg;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   cfg = <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a50914e37d486c59859683c677df59b85">unbound_config_alloc</a>();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create default configuration for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a>(&amp;<a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>, <span class="stringliteral">&quot;general&quot;</span>, cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a83a67e2ae42baf762e2f388278bffe61">unbound_config_preapply</a>(cfg)) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(1, <span class="stringliteral">&quot;Starting unbound resolver using default configuration\n&quot;</span>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, cfg);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div><div class="ttc" id="res__resolver__unbound_8c_html_a50914e37d486c59859683c677df59b85"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a50914e37d486c59859683c677df59b85">unbound_config_alloc</a></div><div class="ttdeci">static void * unbound_config_alloc(void)</div><div class="ttdoc">Allocate a unbound_config to hold a snapshot of the complete results of parsing a config...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00365">res_resolver_unbound.c:365</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="structunbound__config_html_a8ddc60c985475e1efa4fd6b38a9b7570"><div class="ttname"><a href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">unbound_config::global</a></div><div class="ttdeci">struct unbound_global_config * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">res_resolver_unbound.c:119</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a83a67e2ae42baf762e2f388278bffe61"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a83a67e2ae42baf762e2f388278bffe61">unbound_config_preapply</a></div><div class="ttdeci">static int unbound_config_preapply(struct unbound_config *cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">res_resolver_unbound.c:391</a></div></div>
<div class="ttc" id="config__options_8h_html_a206bf60e38d1114efdeeabc35b7eaa69"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a></div><div class="ttdeci">int aco_set_defaults(struct aco_type *type, const char *category, void *obj)</div><div class="ttdoc">Set all default options of obj. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00924">config_options.c:924</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aeab1543f7ac14f52ba5148960429e849"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a></div><div class="ttdeci">static struct aco_type global_option</div><div class="ttdoc">An aco_type structure to link the &quot;general&quot; category to the unbound_global_config type...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00130">res_resolver_unbound.c:130</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a964e338ee0ac700ca3b8509a0b22eb85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a964e338ee0ac700ca3b8509a0b22eb85">&#9670;&nbsp;</a></span>unbound_config_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_config_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00339">339</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">unbound_config::global</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00365">unbound_config_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *cfg = obj;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="structunbound__config_html_a8ddc60c985475e1efa4fd6b38a9b7570"><div class="ttname"><a href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">unbound_config::global</a></div><div class="ttdeci">struct unbound_global_config * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">res_resolver_unbound.c:119</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83a67e2ae42baf762e2f388278bffe61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83a67e2ae42baf762e2f388278bffe61">&#9670;&nbsp;</a></span>unbound_config_preapply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unbound_config_preapply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/da0/structunbound__config.html">unbound_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">391</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">unbound_resolver::context</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00112">unbound_global_config::debug</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">unbound_config::global</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00108">unbound_global_config::hosts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00110">unbound_global_config::nameservers</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00108">unbound_global_config::resolv</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00099">unbound_config_state::resolver</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00114">unbound_global_config::state</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00108">unbound_global_config::ta_file</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00355">unbound_config_state_destructor()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00171">unbound_resolver_alloc()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00217">unbound_resolver_start()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00472">unbound_config_apply_default()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00497">unbound_config_preapply_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#afc5b31a6af25224f011bf85f1a002ec7">unbound_config_state_destructor</a>,</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not allocate unbound resolver state structure\n&quot;</span>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a> = <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#af87aa2ee81cec9d7d54de82d8c6131f1">unbound_resolver_alloc</a>();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create an unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   ub_ctx_debuglevel(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#aa3770535f39c67ca0811e27731893370">debug</a>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordflow">if</span> (!strcmp(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ae76e3b0f4af8aaa41b48bb5dcd6b2037">hosts</a>, <span class="stringliteral">&quot;system&quot;</span>)) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      res = ub_ctx_hosts(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ae76e3b0f4af8aaa41b48bb5dcd6b2037">hosts</a>)) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      res = ub_ctx_hosts(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ae76e3b0f4af8aaa41b48bb5dcd6b2037">hosts</a>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to set hosts file to &#39;%s&#39; in unbound resolver: %s\n&quot;</span>,</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ae76e3b0f4af8aaa41b48bb5dcd6b2037">hosts</a>, ub_strerror(res));</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a>) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_nameservers;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordtype">char</span> *nameserver;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      it_nameservers = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a>, 0);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">while</span> (!res &amp;&amp; (nameserver = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_nameservers))) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         res = ub_ctx_set_fwd(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, nameserver);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to add nameserver &#39;%s&#39; to unbound resolver: %s\n&quot;</span>,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;               nameserver, ub_strerror(res));</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;         }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(nameserver, -1);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_nameservers);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keywordflow">if</span> (!strcmp(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a607caa65cb7b67f1ae60f3f4df7ea7fc">resolv</a>, <span class="stringliteral">&quot;system&quot;</span>)) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      res = ub_ctx_resolvconf(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a607caa65cb7b67f1ae60f3f4df7ea7fc">resolv</a>)) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      res = ub_ctx_resolvconf(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a607caa65cb7b67f1ae60f3f4df7ea7fc">resolv</a>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to set resolv.conf file to &#39;%s&#39; in unbound resolver: %s\n&quot;</span>,</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a607caa65cb7b67f1ae60f3f4df7ea7fc">resolv</a>, ub_strerror(res));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#afdb5d7cfbe5f2a456d28e427ac2c68dd">ta_file</a>)) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      res = ub_ctx_add_ta_file(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#afdb5d7cfbe5f2a456d28e427ac2c68dd">ta_file</a>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to set trusted anchor file to &#39;%s&#39; in unbound resolver: %s\n&quot;</span>,</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#afdb5d7cfbe5f2a456d28e427ac2c68dd">ta_file</a>, ub_strerror(res));</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ac0921e9d15be367ca7d1ebdf03540c61">unbound_resolver_start</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>)) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not start unbound resolver thread\n&quot;</span>);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div><div class="ttc" id="structunbound__global__config_html_ae76e3b0f4af8aaa41b48bb5dcd6b2037"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#ae76e3b0f4af8aaa41b48bb5dcd6b2037">unbound_global_config::hosts</a></div><div class="ttdeci">const ast_string_field hosts</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00108">res_resolver_unbound.c:108</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structunbound__global__config_html_a607caa65cb7b67f1ae60f3f4df7ea7fc"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#a607caa65cb7b67f1ae60f3f4df7ea7fc">unbound_global_config::resolv</a></div><div class="ttdeci">const ast_string_field resolv</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00108">res_resolver_unbound.c:108</a></div></div>
<div class="ttc" id="structunbound__global__config_html_afdb5d7cfbe5f2a456d28e427ac2c68dd"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#afdb5d7cfbe5f2a456d28e427ac2c68dd">unbound_global_config::ta_file</a></div><div class="ttdeci">const ast_string_field ta_file</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00108">res_resolver_unbound.c:108</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structunbound__config__state_html_a81cd821a7c226ad344df1ee8ec65e28b"><div class="ttname"><a href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">unbound_config_state::resolver</a></div><div class="ttdeci">struct unbound_resolver * resolver</div><div class="ttdoc">The configured resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00099">res_resolver_unbound.c:99</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structunbound__global__config_html_a0f2219e7dd2389d9d488d9591415278e"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">unbound_global_config::state</a></div><div class="ttdeci">struct unbound_config_state * state</div><div class="ttdoc">State information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00114">res_resolver_unbound.c:114</a></div></div>
<div class="ttc" id="structunbound__config_html_a8ddc60c985475e1efa4fd6b38a9b7570"><div class="ttname"><a href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">unbound_config::global</a></div><div class="ttdeci">struct unbound_global_config * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">res_resolver_unbound.c:119</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_afc5b31a6af25224f011bf85f1a002ec7"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#afc5b31a6af25224f011bf85f1a002ec7">unbound_config_state_destructor</a></div><div class="ttdeci">static void unbound_config_state_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00355">res_resolver_unbound.c:355</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_af87aa2ee81cec9d7d54de82d8c6131f1"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#af87aa2ee81cec9d7d54de82d8c6131f1">unbound_resolver_alloc</a></div><div class="ttdeci">static struct unbound_resolver * unbound_resolver_alloc(void)</div><div class="ttdoc">Allocator for unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00171">res_resolver_unbound.c:171</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ac0921e9d15be367ca7d1ebdf03540c61"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ac0921e9d15be367ca7d1ebdf03540c61">unbound_resolver_start</a></div><div class="ttdeci">static int unbound_resolver_start(struct unbound_resolver *resolver)</div><div class="ttdoc">Start function for the unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00217">res_resolver_unbound.c:217</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a34572e8b0fc025064cb348f9edead16e"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">unbound_resolver::context</a></div><div class="ttdeci">struct ub_ctx * context</div><div class="ttdoc">Resolver context itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">res_resolver_unbound.c:83</a></div></div>
<div class="ttc" id="structunbound__global__config_html_ade44783d68b51852b21577b4c03c0be8"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">unbound_global_config::nameservers</a></div><div class="ttdeci">struct ao2_container * nameservers</div><div class="ttdoc">List of nameservers (in order) to use for queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00110">res_resolver_unbound.c:110</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structunbound__global__config_html_aa3770535f39c67ca0811e27731893370"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#aa3770535f39c67ca0811e27731893370">unbound_global_config::debug</a></div><div class="ttdeci">unsigned int debug</div><div class="ttdoc">Debug level for the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00112">res_resolver_unbound.c:112</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c5504fc70dcb318e76b59b5db4e6b4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c5504fc70dcb318e76b59b5db4e6b4a">&#9670;&nbsp;</a></span>unbound_config_preapply_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unbound_config_preapply_callback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finish initializing new configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00497">497</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00103">aco_pending_config()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">unbound_config_preapply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;{</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a83a67e2ae42baf762e2f388278bffe61">unbound_config_preapply</a>(<a class="code" href="../../db/dfe/config__options_8h.html#a89d26f05dbb795e34651b889f0864e3a">aco_pending_config</a>(&amp;cfg_info));</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div><div class="ttc" id="config__options_8h_html_a89d26f05dbb795e34651b889f0864e3a"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a89d26f05dbb795e34651b889f0864e3a">aco_pending_config</a></div><div class="ttdeci">void * aco_pending_config(struct aco_info *info)</div><div class="ttdoc">Get pending config changes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00103">config_options.c:103</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a83a67e2ae42baf762e2f388278bffe61"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a83a67e2ae42baf762e2f388278bffe61">unbound_config_preapply</a></div><div class="ttdeci">static int unbound_config_preapply(struct unbound_config *cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">res_resolver_unbound.c:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afc5b31a6af25224f011bf85f1a002ec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc5b31a6af25224f011bf85f1a002ec7">&#9670;&nbsp;</a></span>unbound_config_state_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_config_state_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00355">355</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00099">unbound_config_state::resolver</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00237">unbound_resolver_stop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">unbound_config_preapply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;{</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d62/structunbound__config__state.html">unbound_config_state</a> *<a class="code" href="../../d4/d88/structstate.html">state</a> = obj;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">if</span> (state-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#ac4529b1a209a57f32f7c73061dcab308">unbound_resolver_stop</a>(state-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(state-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>, -1);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div><div class="ttc" id="structunbound__config__state_html"><div class="ttname"><a href="../../d1/d62/structunbound__config__state.html">unbound_config_state</a></div><div class="ttdoc">Unbound configuration state information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00097">res_resolver_unbound.c:97</a></div></div>
<div class="ttc" id="structunbound__config__state_html_a81cd821a7c226ad344df1ee8ec65e28b"><div class="ttname"><a href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">unbound_config_state::resolver</a></div><div class="ttdeci">struct unbound_resolver * resolver</div><div class="ttdoc">The configured resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00099">res_resolver_unbound.c:99</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_ac4529b1a209a57f32f7c73061dcab308"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#ac4529b1a209a57f32f7c73061dcab308">unbound_resolver_stop</a></div><div class="ttdeci">static void unbound_resolver_stop(struct unbound_resolver *resolver)</div><div class="ttdoc">Stop function for the unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00237">res_resolver_unbound.c:237</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad0cf4b54e4f4a553f7062f9c8158ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0cf4b54e4f4a553f7062f9c8158ac8">&#9670;&nbsp;</a></span>unbound_global_config_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_global_config_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00346">346</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01445">global</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00110">unbound_global_config::nameservers</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00114">unbound_global_config::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00365">unbound_config_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a> *<a class="code" href="../../d8/d4f/test__config_8c.html#ab8aa28659d870c360b8afb1662c1b302">global</a> = obj;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(global);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(global-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">nameservers</a>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(global-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div><div class="ttc" id="test__config_8c_html_ab8aa28659d870c360b8afb1662c1b302"><div class="ttname"><a href="../../d8/d4f/test__config_8c.html#ab8aa28659d870c360b8afb1662c1b302">global</a></div><div class="ttdeci">static struct aco_type global</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/test__config_8c_source.html#l01445">test_config.c:1445</a></div></div>
<div class="ttc" id="structunbound__global__config_html_a0f2219e7dd2389d9d488d9591415278e"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">unbound_global_config::state</a></div><div class="ttdeci">struct unbound_config_state * state</div><div class="ttdoc">State information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00114">res_resolver_unbound.c:114</a></div></div>
<div class="ttc" id="structunbound__global__config_html"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html">unbound_global_config</a></div><div class="ttdoc">A structure to hold global configuration-related options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00103">res_resolver_unbound.c:103</a></div></div>
<div class="ttc" id="structunbound__global__config_html_ade44783d68b51852b21577b4c03c0be8"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#ade44783d68b51852b21577b4c03c0be8">unbound_global_config::nameservers</a></div><div class="ttdeci">struct ao2_container * nameservers</div><div class="ttdoc">List of nameservers (in order) to use for queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00110">res_resolver_unbound.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af87aa2ee81cec9d7d54de82d8c6131f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af87aa2ee81cec9d7d54de82d8c6131f1">&#9670;&nbsp;</a></span>unbound_resolver_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a>* unbound_resolver_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocator for unbound resolver. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00171">171</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">unbound_resolver::context</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">unbound_resolver::thread</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00161">unbound_resolver_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">unbound_config_preapply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;{</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *resolver;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   resolver = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*resolver), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a43d5eab6696233a522cbec0f9abd96e3">unbound_resolver_destroy</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keywordflow">if</span> (!resolver) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a> = ub_ctx_create();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keywordflow">if</span> (!resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(resolver, -1);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="comment">/* Each async result should be invoked in a separate thread so others are not blocked */</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   ub_ctx_async(resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, 1);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">return</span> resolver;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="ttc" id="res__resolver__unbound_8c_html_a43d5eab6696233a522cbec0f9abd96e3"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a43d5eab6696233a522cbec0f9abd96e3">unbound_resolver_destroy</a></div><div class="ttdeci">static void unbound_resolver_destroy(void *obj)</div><div class="ttdoc">Destructor for unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00161">res_resolver_unbound.c:161</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">unbound_resolver::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdoc">Thread handling the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">res_resolver_unbound.c:85</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a34572e8b0fc025064cb348f9edead16e"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">unbound_resolver::context</a></div><div class="ttdeci">struct ub_ctx * context</div><div class="ttdoc">Resolver context itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">res_resolver_unbound.c:83</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a28b1c569bfee2e337983ac64d16a5685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b1c569bfee2e337983ac64d16a5685">&#9670;&nbsp;</a></span>unbound_resolver_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_resolver_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ub_result *&#160;</td>
          <td class="paramname"><em>ub_result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback invoked when resolution completes on a query. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00256">256</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00057">ast_dns_query_get_name()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00535">ast_dns_resolver_add_record()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00599">ast_dns_resolver_completed()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00456">ast_dns_resolver_set_result()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00285">unbound_resolver_resolve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query = data;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a>(query, ub_result-&gt;secure, ub_result-&gt;bogus, ub_result-&gt;rcode,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(ub_result-&gt;canonname, <a class="code" href="../../d6/d51/dns__core_8h.html#a1230d007a5d4af720d011cbe7d72380e">ast_dns_query_get_name</a>(query)), ub_result-&gt;answer_packet, ub_result-&gt;answer_len)) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordtype">char</span> *result_data;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">for</span> (i = 0; (result_data = ub_result-&gt;data[i]); i++) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a>(query, ub_result-&gt;qtype, ub_result-&gt;qclass, ub_result-&gt;ttl,</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            result_data, ub_result-&gt;len[i])) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a>(query);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(query, -1);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   ub_resolve_free(ub_result);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div><div class="ttc" id="dns__resolver_8h_html_ae88ff57fdf06ba45b931609978be2611"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a></div><div class="ttdeci">int ast_dns_resolver_add_record(struct ast_dns_query *query, int rr_type, int rr_class, int ttl, const char *data, const size_t size)</div><div class="ttdoc">Add a DNS record to the result of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00535">dns_core.c:535</a></div></div>
<div class="ttc" id="dns__core_8h_html_a1230d007a5d4af720d011cbe7d72380e"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a1230d007a5d4af720d011cbe7d72380e">ast_dns_query_get_name</a></div><div class="ttdeci">const char * ast_dns_query_get_name(const struct ast_dns_query *query)</div><div class="ttdoc">Get the name queried in a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00057">dns_core.c:57</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a3eae81285310e1c64e8cb9e59e79d2e9"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a></div><div class="ttdeci">void ast_dns_resolver_completed(struct ast_dns_query *query)</div><div class="ttdoc">Mark a DNS query as having been completed. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00599">dns_core.c:599</a></div></div>
<div class="ttc" id="structast__dns__query_html"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html">ast_dns_query</a></div><div class="ttdoc">A DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00137">dns_internal.h:137</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a321df8f3250551f796c99524dbcc2567"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a></div><div class="ttdeci">int ast_dns_resolver_set_result(struct ast_dns_query *query, unsigned int secure, unsigned int bogus, unsigned int rcode, const char *canonical, const char *answer, size_t answer_size)</div><div class="ttdoc">Set result information for a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00456">dns_core.c:456</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a28dcf0c60947be2bdb2c676df4152011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28dcf0c60947be2bdb2c676df4152011">&#9670;&nbsp;</a></span>unbound_resolver_cancel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unbound_resolver_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00316">316</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00451">ast_dns_resolver_get_data()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">unbound_resolver::context</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00091">unbound_resolver_data::id</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00093">unbound_resolver_data::resolver</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a> *data = <a class="code" href="../../d9/da7/dns__resolver_8h.html#aaf3d87b8ca10deacf438c70e030f9f8e">ast_dns_resolver_get_data</a>(query);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   res = ub_cancel(data-&gt;<a class="code" href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, data-&gt;<a class="code" href="../../d7/dd1/structunbound__resolver__data.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="comment">/* When this query was started we bumped the ref, now that it has been cancelled we have ownership and</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">       * need to drop it</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(query, -1);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div><div class="ttc" id="dns__resolver_8h_html_aaf3d87b8ca10deacf438c70e030f9f8e"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#aaf3d87b8ca10deacf438c70e030f9f8e">ast_dns_resolver_get_data</a></div><div class="ttdeci">void * ast_dns_resolver_get_data(const struct ast_dns_query *query)</div><div class="ttdoc">Retrieve resolver specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00451">dns_core.c:451</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a></div><div class="ttdoc">Structure for query resolver data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00089">res_resolver_unbound.c:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a34572e8b0fc025064cb348f9edead16e"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">unbound_resolver::context</a></div><div class="ttdeci">struct ub_ctx * context</div><div class="ttdoc">Resolver context itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">res_resolver_unbound.c:83</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html#a7441ef0865bcb3db9b8064dd7375c1ea">unbound_resolver_data::id</a></div><div class="ttdeci">int id</div><div class="ttdoc">ID for the specific query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00091">res_resolver_unbound.c:91</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html_a81cd821a7c226ad344df1ee8ec65e28b"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">unbound_resolver_data::resolver</a></div><div class="ttdeci">struct unbound_resolver * resolver</div><div class="ttdoc">The resolver in use for the query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00093">res_resolver_unbound.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a2be4d93fe1736fa904daf00689b715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2be4d93fe1736fa904daf00689b715">&#9670;&nbsp;</a></span>unbound_resolver_data_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_resolver_data_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdoomed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00278">278</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00093">unbound_resolver_data::resolver</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00285">unbound_resolver_resolve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a> *doomed = vdoomed;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div><div class="ttc" id="structunbound__resolver__data_html"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a></div><div class="ttdoc">Structure for query resolver data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00089">res_resolver_unbound.c:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html_a81cd821a7c226ad344df1ee8ec65e28b"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">unbound_resolver_data::resolver</a></div><div class="ttdeci">struct unbound_resolver * resolver</div><div class="ttdoc">The resolver in use for the query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00093">res_resolver_unbound.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43d5eab6696233a522cbec0f9abd96e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d5eab6696233a522cbec0f9abd96e3">&#9670;&nbsp;</a></span>unbound_resolver_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_resolver_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for unbound resolver. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00161">161</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">unbound_resolver::context</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00171">unbound_resolver_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *resolver = obj;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordflow">if</span> (resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      ub_ctx_delete(resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div><div class="ttc" id="structunbound__resolver_html_a34572e8b0fc025064cb348f9edead16e"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">unbound_resolver::context</a></div><div class="ttdeci">struct ub_ctx * context</div><div class="ttdoc">Resolver context itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">res_resolver_unbound.c:83</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af843d805254b6a0abfff2dd84212b8aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af843d805254b6a0abfff2dd84212b8aa">&#9670;&nbsp;</a></span>unbound_resolver_resolve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unbound_resolver_resolve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00285">285</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00057">ast_dns_query_get_name()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00067">ast_dns_query_get_rr_class()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00062">ast_dns_query_get_rr_type()</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00440">ast_dns_resolver_set_data()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">unbound_resolver::context</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">unbound_config::global</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00091">unbound_resolver_data::id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00093">unbound_resolver_data::resolver</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00099">unbound_config_state::resolver</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00114">unbound_global_config::state</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00256">unbound_resolver_callback()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00278">unbound_resolver_data_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da0/structunbound__config.html">unbound_config</a> *cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a> *data;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   data = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*data), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a9a2be4d93fe1736fa904daf00689b715">unbound_resolver_data_dtor</a>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate resolver data for resolution of &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;         <a class="code" href="../../d6/d51/dns__core_8h.html#a1230d007a5d4af720d011cbe7d72380e">ast_dns_query_get_name</a>(query));</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   data-&gt;<a class="code" href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(cfg-&gt;<a class="code" href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">global</a>-&gt;<a class="code" href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">state</a>-&gt;<a class="code" href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <a class="code" href="../../d9/da7/dns__resolver_8h.html#a017e82027ca36bc66b610de1bc75c926">ast_dns_resolver_set_data</a>(query, data);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   res = ub_resolve_async(data-&gt;<a class="code" href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">resolver</a>-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>, <a class="code" href="../../d6/d51/dns__core_8h.html#a1230d007a5d4af720d011cbe7d72380e">ast_dns_query_get_name</a>(query),</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="../../d6/d51/dns__core_8h.html#a049ce2f7e998d2635a005c51ab8c7fc7">ast_dns_query_get_rr_type</a>(query), <a class="code" href="../../d6/d51/dns__core_8h.html#a47fb9fe8957aff9566c0b2587483ed92">ast_dns_query_get_rr_class</a>(query),</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(query), <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a28b1c569bfee2e337983ac64d16a5685">unbound_resolver_callback</a>, &amp;data-&gt;<a class="code" href="../../d7/dd1/structunbound__resolver__data.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to perform async DNS resolution of &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <a class="code" href="../../d6/d51/dns__core_8h.html#a1230d007a5d4af720d011cbe7d72380e">ast_dns_query_get_name</a>(query));</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(query, -1);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="dns__core_8h_html_a1230d007a5d4af720d011cbe7d72380e"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a1230d007a5d4af720d011cbe7d72380e">ast_dns_query_get_name</a></div><div class="ttdeci">const char * ast_dns_query_get_name(const struct ast_dns_query *query)</div><div class="ttdoc">Get the name queried in a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00057">dns_core.c:57</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a9a2be4d93fe1736fa904daf00689b715"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a9a2be4d93fe1736fa904daf00689b715">unbound_resolver_data_dtor</a></div><div class="ttdeci">static void unbound_resolver_data_dtor(void *vdoomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00278">res_resolver_unbound.c:278</a></div></div>
<div class="ttc" id="dns__core_8h_html_a47fb9fe8957aff9566c0b2587483ed92"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a47fb9fe8957aff9566c0b2587483ed92">ast_dns_query_get_rr_class</a></div><div class="ttdeci">int ast_dns_query_get_rr_class(const struct ast_dns_query *query)</div><div class="ttdoc">Get the record resource class of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00067">dns_core.c:67</a></div></div>
<div class="ttc" id="structunbound__config_html"><div class="ttname"><a href="../../df/da0/structunbound__config.html">unbound_config</a></div><div class="ttdoc">A container for config related information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00118">res_resolver_unbound.c:118</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structunbound__config__state_html_a81cd821a7c226ad344df1ee8ec65e28b"><div class="ttname"><a href="../../d1/d62/structunbound__config__state.html#a81cd821a7c226ad344df1ee8ec65e28b">unbound_config_state::resolver</a></div><div class="ttdeci">struct unbound_resolver * resolver</div><div class="ttdoc">The configured resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00099">res_resolver_unbound.c:99</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="structunbound__global__config_html_a0f2219e7dd2389d9d488d9591415278e"><div class="ttname"><a href="../../d7/d98/structunbound__global__config.html#a0f2219e7dd2389d9d488d9591415278e">unbound_global_config::state</a></div><div class="ttdeci">struct unbound_config_state * state</div><div class="ttdoc">State information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00114">res_resolver_unbound.c:114</a></div></div>
<div class="ttc" id="structunbound__config_html_a8ddc60c985475e1efa4fd6b38a9b7570"><div class="ttname"><a href="../../df/da0/structunbound__config.html#a8ddc60c985475e1efa4fd6b38a9b7570">unbound_config::global</a></div><div class="ttdeci">struct unbound_global_config * global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00119">res_resolver_unbound.c:119</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html">unbound_resolver_data</a></div><div class="ttdoc">Structure for query resolver data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00089">res_resolver_unbound.c:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a28b1c569bfee2e337983ac64d16a5685"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a28b1c569bfee2e337983ac64d16a5685">unbound_resolver_callback</a></div><div class="ttdeci">static void unbound_resolver_callback(void *data, int err, struct ub_result *ub_result)</div><div class="ttdoc">Callback invoked when resolution completes on a query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00256">res_resolver_unbound.c:256</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="dns__resolver_8h_html_a017e82027ca36bc66b610de1bc75c926"><div class="ttname"><a href="../../d9/da7/dns__resolver_8h.html#a017e82027ca36bc66b610de1bc75c926">ast_dns_resolver_set_data</a></div><div class="ttdeci">int ast_dns_resolver_set_data(struct ast_dns_query *query, void *data)</div><div class="ttdoc">Set resolver specific data on a query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00440">dns_core.c:440</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a34572e8b0fc025064cb348f9edead16e"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">unbound_resolver::context</a></div><div class="ttdeci">struct ub_ctx * context</div><div class="ttdoc">Resolver context itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">res_resolver_unbound.c:83</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html#a7441ef0865bcb3db9b8064dd7375c1ea">unbound_resolver_data::id</a></div><div class="ttdeci">int id</div><div class="ttdoc">ID for the specific query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00091">res_resolver_unbound.c:91</a></div></div>
<div class="ttc" id="dns__core_8h_html_a049ce2f7e998d2635a005c51ab8c7fc7"><div class="ttname"><a href="../../d6/d51/dns__core_8h.html#a049ce2f7e998d2635a005c51ab8c7fc7">ast_dns_query_get_rr_type</a></div><div class="ttdeci">int ast_dns_query_get_rr_type(const struct ast_dns_query *query)</div><div class="ttdoc">Get the record resource type of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00062">dns_core.c:62</a></div></div>
<div class="ttc" id="structunbound__resolver__data_html_a81cd821a7c226ad344df1ee8ec65e28b"><div class="ttname"><a href="../../d7/dd1/structunbound__resolver__data.html#a81cd821a7c226ad344df1ee8ec65e28b">unbound_resolver_data::resolver</a></div><div class="ttdeci">struct unbound_resolver * resolver</div><div class="ttdoc">The resolver in use for the query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00093">res_resolver_unbound.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0921e9d15be367ca7d1ebdf03540c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0921e9d15be367ca7d1ebdf03540c61">&#9670;&nbsp;</a></span>unbound_resolver_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unbound_resolver_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *&#160;</td>
          <td class="paramname"><em>resolver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start function for the unbound resolver. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00217">217</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00559">ast_pthread_create</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">unbound_resolver::thread</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00195">unbound_resolver_thread()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00391">unbound_config_preapply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">if</span> (resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Starting thread for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   res = <a class="code" href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a>(&amp;resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#a06a298c3c715d19a49e82fa98a5f5442">unbound_resolver_thread</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(resolver));</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Could not start thread for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(resolver, -1);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">unbound_resolver::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdoc">Thread handling the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">res_resolver_unbound.c:85</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_a06a298c3c715d19a49e82fa98a5f5442"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#a06a298c3c715d19a49e82fa98a5f5442">unbound_resolver_thread</a></div><div class="ttdeci">static void * unbound_resolver_thread(void *data)</div><div class="ttdoc">Resolver thread which waits and handles results. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00195">res_resolver_unbound.c:195</a></div></div>
<div class="ttc" id="utils_8h_html_a4781fd54a4ca8c7f0f8a32a6cce503c0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a></div><div class="ttdeci">#define ast_pthread_create(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00559">utils.h:559</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4529b1a209a57f32f7c73061dcab308"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4529b1a209a57f32f7c73061dcab308">&#9670;&nbsp;</a></span>unbound_resolver_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unbound_resolver_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *&#160;</td>
          <td class="paramname"><em>resolver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop function for the unbound resolver. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00237">237</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00067">AST_PTHREADT_STOP</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">unbound_resolver::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00355">unbound_config_state_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   pthread_t <a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">if</span> (resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopping processing thread for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   thread = resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   pthread_kill(thread, SIGURG);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   pthread_join(thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopped processing thread for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">unbound_resolver::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdoc">Thread handling the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">res_resolver_unbound.c:85</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="lock_8h_html_a873a83eb8196323194aac2bea23d794e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a></div><div class="ttdeci">#define AST_PTHREADT_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00067">lock.h:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06a298c3c715d19a49e82fa98a5f5442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06a298c3c715d19a49e82fa98a5f5442">&#9670;&nbsp;</a></span>unbound_resolver_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* unbound_resolver_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resolver thread which waits and handles results. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00195">195</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00067">AST_PTHREADT_STOP</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01519">ast_wait_for_input()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">unbound_resolver::context</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">unbound_resolver::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00217">unbound_resolver_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a> *resolver = data;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Starting processing for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">while</span> (resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a>) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="comment">/* Wait for any results to come in */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a>(ub_fd(resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>), -1);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">/* Finally process any results */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      ub_process(resolver-&gt;<a class="code" href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">context</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Terminating processing for unbound resolver\n&quot;</span>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(resolver, -1);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a01f75a9ad916f63a94e06a27635ba278">unbound_resolver::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdoc">Thread handling the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00085">res_resolver_unbound.c:85</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structunbound__resolver_html_a34572e8b0fc025064cb348f9edead16e"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html#a34572e8b0fc025064cb348f9edead16e">unbound_resolver::context</a></div><div class="ttdeci">struct ub_ctx * context</div><div class="ttdoc">Resolver context itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00083">res_resolver_unbound.c:83</a></div></div>
<div class="ttc" id="lock_8h_html_a873a83eb8196323194aac2bea23d794e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a></div><div class="ttdeci">#define AST_PTHREADT_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00067">lock.h:67</a></div></div>
<div class="ttc" id="structunbound__resolver_html"><div class="ttname"><a href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></div><div class="ttdoc">Structure for an unbound resolver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00081">res_resolver_unbound.c:81</a></div></div>
<div class="ttc" id="utils_8h_html_a60404ef44696316455e79c3a002cc71e"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a></div><div class="ttdeci">int ast_wait_for_input(int fd, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01519">main/utils.c:1519</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01394">1394</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00910">aco_info_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, and <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01423">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_sync);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_async);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_sync_off_nominal);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_sync_off_nominal);</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_cancel_off_nominal);</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_naptr);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(resolve_srv);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div><div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="config__options_8h_html_a21b11339ca4d0b1167c956a9f816bd19"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a></div><div class="ttdeci">void aco_info_destroy(struct aco_info *info)</div><div class="ttdoc">Destroy an initialized aco_info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00910">config_options.c:910</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Unbound DNS Resolver Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .<a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="el" href="../../d6/d80/test__res__prometheus_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a87717b8c3b913bbbb55297fc169086e0">AST_MODPRI_CHANNEL_DEPEND</a> - 4, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01474">1474</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01474">1474</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="aeab1543f7ac14f52ba5148960429e849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeab1543f7ac14f52ba5148960429e849">&#9670;&nbsp;</a></span>global_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> global_option</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An <a class="el" href="../../de/d71/structaco__type.html" title="Type information about a category-level configurable object. ">aco_type</a> structure to link the "general" category to the <a class="el" href="../../d7/d98/structunbound__global__config.html" title="A structure to hold global configuration-related options. ">unbound_global_config</a> type. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00130">130</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="a05b71d76cff3ccd9fe2a0c4a16d21271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05b71d76cff3ccd9fe2a0c4a16d21271">&#9670;&nbsp;</a></span>global_options</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>* global_options[] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../dc/d6b/res__xmpp_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00138">138</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="a761dc9992fb74d8296d3a6de5a506415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761dc9992fb74d8296d3a6de5a506415">&#9670;&nbsp;</a></span>resolver_unbound_conf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a> resolver_unbound_conf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .filename = <span class="stringliteral">&quot;resolver_unbound.conf&quot;</span>,</div><div class="line">   .types = <a class="code" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="code" href="../../d0/d5c/res__resolver__unbound_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a>),</div><div class="line">}</div><div class="ttc" id="config__options_8h_html_af773eedd7f94d718752798605c687c4b"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a></div><div class="ttdeci">#define ACO_TYPES(...)</div><div class="ttdoc">A helper macro to ensure that aco_info types always have a sentinel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00181">config_options.h:181</a></div></div>
<div class="ttc" id="res__resolver__unbound_8c_html_aeab1543f7ac14f52ba5148960429e849"><div class="ttname"><a href="../../d0/d5c/res__resolver__unbound_8c.html#aeab1543f7ac14f52ba5148960429e849">global_option</a></div><div class="ttdeci">static struct aco_type global_option</div><div class="ttdoc">An aco_type structure to link the &quot;general&quot; category to the unbound_global_config type...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00130">res_resolver_unbound.c:130</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00140">140</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
<a id="a0398b6845a141afa6b1e0f35bd49c963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0398b6845a141afa6b1e0f35bd49c963">&#9670;&nbsp;</a></span>unbound_resolver</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> <a class="el" href="../../d2/de8/structunbound__resolver.html">unbound_resolver</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00332">332</a> of file <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html">res_resolver_unbound.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:36 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
