<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: func_presencestate.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_e878cef7102f6638a560ae32a811d88b.html">funcs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">func_presencestate.c File Reference<div class="ingroups"><a class="el" href="../../d5/db0/group__functions.html">Module: Dial plan functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Custom presence provider.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/dd7/presencestate_8h_source.html">asterisk/presencestate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d4a/astdb_8h_source.html">asterisk/astdb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d28/sem_8h_source.html">asterisk/sem.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for func_presencestate.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/df8/func__presencestate_8c__incl.png" border="0" usemap="#func__presencestate_8c" alt=""/></div>
<map name="func__presencestate_8c" id="func__presencestate_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="187,453,271,480"/>
<area shape="rect" id="node10" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2041,80,2177,107"/>
<area shape="rect" id="node11" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1976,379,2091,405"/>
<area shape="rect" id="node21" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1083,603,1234,629"/>
<area shape="rect" id="node22" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1289,155,1428,181"/>
<area shape="rect" id="node39" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1725,80,1835,107"/>
<area shape="rect" id="node41" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="2071,155,2251,181"/>
<area shape="rect" id="node44" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="2207,379,2308,405"/>
<area shape="rect" id="node45" href="../../de/d4a/astdb_8h.html" title="Persistant data storage (akin to *doze registry) " alt="" coords="2429,80,2553,107"/>
<area shape="rect" id="node46" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2475,229,2587,256"/>
<area shape="rect" id="node48" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="2325,304,2438,331"/>
<area shape="rect" id="node49" href="../../d2/d28/sem_8h.html" title="Asterisk semaphore API. " alt="" coords="2314,603,2430,629"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="805,827,960,853"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1970,603,2107,629"/>
<area shape="rect" id="node9" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="162,528,297,555"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="809,901,956,928"/>
<area shape="rect" id="node12" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1647,453,1785,480"/>
<area shape="rect" id="node13" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1719,752,1782,779"/>
<area shape="rect" id="node14" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1699,677,1813,704"/>
<area shape="rect" id="node15" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1847,752,1974,779"/>
<area shape="rect" id="node16" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1809,453,1956,480"/>
<area shape="rect" id="node17" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2439,453,2596,480"/>
<area shape="rect" id="node18" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="2284,453,2415,480"/>
<area shape="rect" id="node19" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="2305,528,2484,555"/>
<area shape="rect" id="node20" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1597,528,1731,555"/>
<area shape="rect" id="node23" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1449,304,1593,331"/>
<area shape="rect" id="node24" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="919,304,1078,331"/>
<area shape="rect" id="node26" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1197,229,1361,256"/>
<area shape="rect" id="node27" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="717,304,843,331"/>
<area shape="rect" id="node28" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1668,229,1815,256"/>
<area shape="rect" id="node29" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1669,304,1795,331"/>
<area shape="rect" id="node30" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1385,229,1492,256"/>
<area shape="rect" id="node31" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1083,528,1234,555"/>
<area shape="rect" id="node32" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="399,229,561,256"/>
<area shape="rect" id="node33" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="144,379,315,405"/>
<area shape="rect" id="node34" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="207,229,323,256"/>
<area shape="rect" id="node36" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="636,229,793,256"/>
<area shape="rect" id="node37" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1871,304,1996,331"/>
<area shape="rect" id="node38" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="970,229,1121,256"/>
<area shape="rect" id="node25" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="817,379,948,405"/>
<area shape="rect" id="node35" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="428,304,591,331"/>
<area shape="rect" id="node40" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1767,155,1894,181"/>
<area shape="rect" id="node42" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="1755,528,1895,555"/>
<area shape="rect" id="node43" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2535,379,2670,405"/>
<area shape="rect" id="node47" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="2615,304,2721,331"/>
</map>
</div>
</div>
<p><a href="../../d0/d81/func__presencestate_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/daf/structtest__cb__data.html">test_cb_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3a/structtest__string.html">test_string</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abf48a64c452a950a2108af95e0c9d0ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a>&#160;&#160;&#160;&quot;Quarterly financial meeting&quot;</td></tr>
<tr class="separator:abf48a64c452a950a2108af95e0c9d0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d8373db4a57d04f5acc3f7496e2b6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>&#160;&#160;&#160;&quot;away&quot;</td></tr>
<tr class="separator:af6d8373db4a57d04f5acc3f7496e2b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be1a185a12d8fc393ac44cf3a8a3b1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a>&#160;&#160;&#160;&quot;down the hall&quot;</td></tr>
<tr class="separator:a9be1a185a12d8fc393ac44cf3a8a3b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abea44cf8775c14feb05b0de4f5e9178e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#abea44cf8775c14feb05b0de4f5e9178e">AST_TEST_DEFINE</a> (test_valid_parse_data)</td></tr>
<tr class="separator:abea44cf8775c14feb05b0de4f5e9178e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa906b601728002c899a7eca4d01a7d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#aaa906b601728002c899a7eca4d01a7d2">AST_TEST_DEFINE</a> (test_invalid_parse_data)</td></tr>
<tr class="separator:aaa906b601728002c899a7eca4d01a7d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac26cbdc7353a884d38318b8d73c85fda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ac26cbdc7353a884d38318b8d73c85fda">AST_TEST_DEFINE</a> (test_presence_state_change)</td></tr>
<tr class="separator:ac26cbdc7353a884d38318b8d73c85fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434638d50da861cd469216790e285fda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a434638d50da861cd469216790e285fda">AST_TEST_DEFINE</a> (test_presence_state_base64_encode)</td></tr>
<tr class="separator:a434638d50da861cd469216790e285fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b8351f93f86a847fdb2578558b784f"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a50b8351f93f86a847fdb2578558b784f">custom_presence_callback</a> (const char *data, char **subtype, char **<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a50b8351f93f86a847fdb2578558b784f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a056644de75e9a9bcb590d66298b1b629"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a056644de75e9a9bcb590d66298b1b629">handle_cli_presencestate_change</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a056644de75e9a9bcb590d66298b1b629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff2c7beb8cfc8dc32c6647ca4e7f61c1"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#aff2c7beb8cfc8dc32c6647ca4e7f61c1">handle_cli_presencestate_list</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:aff2c7beb8cfc8dc32c6647ca4e7f61c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec619a9fce6d2586c25afe8714e87b47"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a> (char *data, enum <a class="el" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> *<a class="el" href="../../d4/d88/structstate.html">state</a>, char **subtype, char **<a class="el" href="../../d8/d9e/structmessage.html">message</a>, char **<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</td></tr>
<tr class="separator:aec619a9fce6d2586c25afe8714e87b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a984a9735b911f5ec53036ae4b8dca796"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a984a9735b911f5ec53036ae4b8dca796">presence_change_common</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, const char *<a class="el" href="../../d4/d88/structstate.html">state</a>, const char *subtype, const char *<a class="el" href="../../d8/d9e/structmessage.html">message</a>, const char *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, char *out_state, size_t out_state_size, char *out_subtype, size_t out_subtype_size, char *out_message, size_t out_message_size)</td></tr>
<tr class="separator:a984a9735b911f5ec53036ae4b8dca796"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1276a4a9a1685a80c8bc898f7f414f03"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a1276a4a9a1685a80c8bc898f7f414f03">presence_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a1276a4a9a1685a80c8bc898f7f414f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad63de0b1a1687558415d4ee0520c4807"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ad63de0b1a1687558415d4ee0520c4807">presence_write</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:ad63de0b1a1687558415d4ee0520c4807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2be401a440d9bce26686c792d039369"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#af2be401a440d9bce26686c792d039369">test_cb</a> (void *userdata, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg)</td></tr>
<tr class="separator:af2be401a440d9bce26686c792d039369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0a1227723af602d456344cf116317f9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/daf/structtest__cb__data.html">test_cb_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ab0a1227723af602d456344cf116317f9">test_cb_data_alloc</a> (void)</td></tr>
<tr class="separator:ab0a1227723af602d456344cf116317f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fee950247568eaee8e07cd10b3691a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ad9fee950247568eaee8e07cd10b3691a">test_cb_data_destroy</a> (struct <a class="el" href="../../de/daf/structtest__cb__data.html">test_cb_data</a> *cb_data)</td></tr>
<tr class="separator:ad9fee950247568eaee8e07cd10b3691a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Gets or sets <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> presence <a class="el" href="../../d4/d88/structstate.html">state</a> <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> the dialplan&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_DEVSTATE_PROVIDER, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3313e9ad0a692ca4debcb2f08565170"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a> [] = &quot;CustomPresence&quot;</td></tr>
<tr class="separator:ab3313e9ad0a692ca4debcb2f08565170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928e1e22d530e5097b0b506914240612"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a> []</td></tr>
<tr class="separator:a928e1e22d530e5097b0b506914240612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28cadbf693a41f7d78653a8b0338f67"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/func__presencestate_8c.html#ad28cadbf693a41f7d78653a8b0338f67">presence_function</a></td></tr>
<tr class="separator:ad28cadbf693a41f7d78653a8b0338f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Custom presence provider. </p>

<p class="definition">Definition in file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="abf48a64c452a950a2108af95e0c9d0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf48a64c452a950a2108af95e0c9d0ea">&#9670;&nbsp;</a></span>PRES_MESSAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRES_MESSAGE&#160;&#160;&#160;&quot;Quarterly financial meeting&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00662">662</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00742">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="af6d8373db4a57d04f5acc3f7496e2b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d8373db4a57d04f5acc3f7496e2b6c">&#9670;&nbsp;</a></span>PRES_STATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRES_STATE&#160;&#160;&#160;&quot;away&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00660">660</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00742">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a9be1a185a12d8fc393ac44cf3a8a3b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be1a185a12d8fc393ac44cf3a8a3b1b">&#9670;&nbsp;</a></span>PRES_SUBTYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PRES_SUBTYPE&#160;&#160;&#160;&quot;down the hall&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00661">661</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00742">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00884">884</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00884">884</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00884">884</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
<a id="abea44cf8775c14feb05b0de4f5e9178e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abea44cf8775c14feb05b0de4f5e9178e">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_valid_parse_data&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00460">460</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00029">AST_PRESENCE_AVAILABLE</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00030">AST_PRESENCE_AWAY</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00032">AST_PRESENCE_CHAT</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00033">AST_PRESENCE_DND</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00027">AST_PRESENCE_NOT_SET</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00028">AST_PRESENCE_UNAVAILABLE</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00031">AST_PRESENCE_XA</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00455">test_string::message</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00456">test_string::options</a>, <a class="el" href="../../dd/d3a/structtest__string.html#a190cbf9c60d3d148a463dbe2d4c1e73f">test_string::outputs</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">parse_data()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00451">test_string::parse_string</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00454">test_string::subtype</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordtype">char</span> *subtype;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d3a/structtest__string.html">test_string</a> <a class="code" href="../../de/da6/structtests.html">tests</a> [] = {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      { <span class="stringliteral">&quot;away&quot;</span>,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;         }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      },</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      { <span class="stringliteral">&quot;not_set&quot;</span>,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3">AST_PRESENCE_NOT_SET</a>,</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;         }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      },</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      { <span class="stringliteral">&quot;unavailable&quot;</span>,</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a1758148937334eb44b8da4d3aa4fc346">AST_PRESENCE_UNAVAILABLE</a>,</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;         }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      },</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      { <span class="stringliteral">&quot;available&quot;</span>,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a6e9c7d2922eab8ace12c01ea5e7a769b">AST_PRESENCE_AVAILABLE</a>,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;         }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      },</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      { <span class="stringliteral">&quot;xa&quot;</span>,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1afb9887c8b7e30179936a2eed59a4357c">AST_PRESENCE_XA</a>,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      },</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      { <span class="stringliteral">&quot;chat&quot;</span>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ad930100cbf507ae9b76b9bf334fd5bff">AST_PRESENCE_CHAT</a>,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;         }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      },</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      { <span class="stringliteral">&quot;dnd&quot;</span>,</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a6c901d0e025dd0eb85c497e505371f2a">AST_PRESENCE_DND</a>,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;         }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      },</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      { <span class="stringliteral">&quot;away,down the hall&quot;</span>,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="stringliteral">&quot;down the hall&quot;</span>,</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;         }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      },</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      { <span class="stringliteral">&quot;away,down the hall,Quarterly financial meeting&quot;</span>,</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="stringliteral">&quot;down the hall&quot;</span>,</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="stringliteral">&quot;Quarterly financial meeting&quot;</span>,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      },</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      { <span class="stringliteral">&quot;away,,Quarterly financial meeting&quot;</span>,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="stringliteral">&quot;Quarterly financial meeting&quot;</span>,</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;         }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      },</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      { <span class="stringliteral">&quot;away,,,e&quot;</span>,</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="stringliteral">&quot;e&quot;</span>,</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      },</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      { <span class="stringliteral">&quot;away,down the hall,,e&quot;</span>,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="stringliteral">&quot;down the hall&quot;</span>,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="stringliteral">&quot;e&quot;</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;         }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      },</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      { <span class="stringliteral">&quot;away,down the hall,Quarterly financial meeting,e&quot;</span>,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="stringliteral">&quot;down the hall&quot;</span>,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="stringliteral">&quot;Quarterly financial meeting&quot;</span>,</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="stringliteral">&quot;e&quot;</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;         }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      },</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      { <span class="stringliteral">&quot;away,,Quarterly financial meeting,e&quot;</span>,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;         { <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a>,</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="stringliteral">&quot;Quarterly financial meeting&quot;</span>,</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="stringliteral">&quot;e&quot;</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;         }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   };</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;parse_valid_presence_data&quot;</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/funcs/func_presence/&quot;</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;PRESENCESTATE parsing test&quot;</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;         <span class="stringliteral">&quot;Ensure that parsing function accepts proper values, and gives proper outputs&quot;</span>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(tests); ++i) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordtype">int</span> parse_result;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../dd/d3a/structtest__string.html#a9aa4273fa4ccaab0cd91de65029eff2a">parse_string</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tests[i].parse_string);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (!parse_string) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      parse_result = <a class="code" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a>(parse_string, &amp;state, &amp;subtype, &amp;message, &amp;options);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">if</span> (parse_result == -1) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(parse_string);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">if</span> (tests[i].<a class="code" href="../../dd/d3a/structtest__string.html#a190cbf9c60d3d148a463dbe2d4c1e73f">outputs</a>.value != state ||</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            strcmp(tests[i].<a class="code" href="../../dd/d3a/structtest__string.html#a190cbf9c60d3d148a463dbe2d4c1e73f">outputs</a>.subtype, subtype) ||</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            strcmp(tests[i].<a class="code" href="../../dd/d3a/structtest__string.html#a190cbf9c60d3d148a463dbe2d4c1e73f">outputs</a>.message, message) ||</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            strcmp(tests[i].<a class="code" href="../../dd/d3a/structtest__string.html#a190cbf9c60d3d148a463dbe2d4c1e73f">outputs</a>.options, options)) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(parse_string);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(parse_string);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structtest__string_html"><div class="ttname"><a href="../../dd/d3a/structtest__string.html">test_string</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00450">func_presencestate.c:450</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_aec619a9fce6d2586c25afe8714e87b47"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a></div><div class="ttdeci">static int parse_data(char *data, enum ast_presence_state *state, char **subtype, char **message, char **options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00162">func_presencestate.c:162</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="structtest__string_html_a9aa4273fa4ccaab0cd91de65029eff2a"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#a9aa4273fa4ccaab0cd91de65029eff2a">test_string::parse_string</a></div><div class="ttdeci">char * parse_string</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00451">func_presencestate.c:451</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3">AST_PRESENCE_NOT_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00027">presencestate.h:27</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1ad930100cbf507ae9b76b9bf334fd5bff"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ad930100cbf507ae9b76b9bf334fd5bff">AST_PRESENCE_CHAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00032">presencestate.h:32</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a6c901d0e025dd0eb85c497e505371f2a"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a6c901d0e025dd0eb85c497e505371f2a">AST_PRESENCE_DND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00033">presencestate.h:33</a></div></div>
<div class="ttc" id="structtest__string_html_a190cbf9c60d3d148a463dbe2d4c1e73f"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#a190cbf9c60d3d148a463dbe2d4c1e73f">test_string::outputs</a></div><div class="ttdeci">struct test_string::@215 outputs</div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structtests_html"><div class="ttname"><a href="../../de/da6/structtests.html">tests</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00104">test.c:104</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a6e9c7d2922eab8ace12c01ea5e7a769b"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a6e9c7d2922eab8ace12c01ea5e7a769b">AST_PRESENCE_AVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00029">presencestate.h:29</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1afb9887c8b7e30179936a2eed59a4357c"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1afb9887c8b7e30179936a2eed59a4357c">AST_PRESENCE_XA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00031">presencestate.h:31</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a1758148937334eb44b8da4d3aa4fc346"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a1758148937334eb44b8da4d3aa4fc346">AST_PRESENCE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00028">presencestate.h:28</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1ac41d71cb8232cc839e4e3148d6a833a5">AST_PRESENCE_AWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00030">presencestate.h:30</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa906b601728002c899a7eca4d01a7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa906b601728002c899a7eca4d01a7d2">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_invalid_parse_data&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00609">609</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00455">test_string::message</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00456">test_string::options</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">parse_data()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00451">test_string::parse_string</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00454">test_string::subtype</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;{</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d3a/structtest__string.html#a254bf0858da09c96a48daf64404eb4f8">message</a>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/da6/structtests.html">tests</a>[] = {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="stringliteral">&quot;bored&quot;</span>,</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="stringliteral">&quot;away,,,i&quot;</span>,</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="comment">/* XXX The following actually is parsed correctly. Should that</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">       * be changed?</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">       * &quot;away,,,,e&quot;,</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   };</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;parse_invalid_presence_data&quot;</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/funcs/func_presence/&quot;</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;PRESENCESTATE parsing test&quot;</span>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         <span class="stringliteral">&quot;Ensure that parsing function rejects improper values&quot;</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(tests); ++i) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordtype">int</span> parse_result;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../dd/d3a/structtest__string.html#a9aa4273fa4ccaab0cd91de65029eff2a">parse_string</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tests[i]);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">if</span> (!parse_string) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      parse_result = <a class="code" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a>(parse_string, &amp;state, &amp;subtype, &amp;message, &amp;options);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">if</span> (parse_result == 0) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid string parsing failed on %s\n&quot;</span>, tests[i]);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(parse_string);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(parse_string);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_aec619a9fce6d2586c25afe8714e87b47"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a></div><div class="ttdeci">static int parse_data(char *data, enum ast_presence_state *state, char **subtype, char **message, char **options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00162">func_presencestate.c:162</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structtest__string_html_a9aa4273fa4ccaab0cd91de65029eff2a"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#a9aa4273fa4ccaab0cd91de65029eff2a">test_string::parse_string</a></div><div class="ttdeci">char * parse_string</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00451">func_presencestate.c:451</a></div></div>
<div class="ttc" id="structtest__string_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">test_string::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00454">func_presencestate.c:454</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structtest__string_html_a254bf0858da09c96a48daf64404eb4f8"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#a254bf0858da09c96a48daf64404eb4f8">test_string::message</a></div><div class="ttdeci">const char * message</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00455">func_presencestate.c:455</a></div></div>
<div class="ttc" id="structtests_html"><div class="ttname"><a href="../../de/da6/structtests.html">tests</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00104">test.c:104</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac26cbdc7353a884d38318b8d73c85fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac26cbdc7353a884d38318b8d73c85fda">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_presence_state_change&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00742">742</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00662">PRES_MESSAGE</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00660">PRES_STATE</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00661">PRES_SUBTYPE</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;{</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keywordtype">char</span> out_state[32];</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordtype">char</span> out_subtype[32];</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keywordtype">char</span> out_message[32];</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;test_presence_state_change&quot;</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/funcs/func_presence/&quot;</span>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;presence state change subscription&quot;</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;         <span class="stringliteral">&quot;Ensure that presence state changes are communicated to subscribers&quot;</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#a984a9735b911f5ec53036ae4b8dca796">presence_change_common</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>, <a class="code" href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a>, <a class="code" href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            out_state, <span class="keyword">sizeof</span>(out_state),</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            out_subtype, <span class="keyword">sizeof</span>(out_subtype),</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            out_message, <span class="keyword">sizeof</span>(out_message)) == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keywordflow">if</span> (strcmp(out_state, <a class="code" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>) ||</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;         strcmp(out_subtype, <a class="code" href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a>) ||</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;         strcmp(out_message, <a class="code" href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a>)) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unexpected presence values, %s != %s, %s != %s, or %s != %s\n&quot;</span>,</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <a class="code" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>, out_state,</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <a class="code" href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a>, out_subtype,</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="code" href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a>, out_message);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div><div class="ttc" id="func__presencestate_8c_html_abf48a64c452a950a2108af95e0c9d0ea"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a></div><div class="ttdeci">#define PRES_MESSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00662">func_presencestate.c:662</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a984a9735b911f5ec53036ae4b8dca796"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a984a9735b911f5ec53036ae4b8dca796">presence_change_common</a></div><div class="ttdeci">static enum ast_test_result_state presence_change_common(struct ast_test *test, const char *state, const char *subtype, const char *message, const char *options, char *out_state, size_t out_state_size, char *out_subtype, size_t out_subtype_size, char *out_message, size_t out_message_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00705">func_presencestate.c:705</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_af6d8373db4a57d04f5acc3f7496e2b6c"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a></div><div class="ttdeci">#define PRES_STATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00660">func_presencestate.c:660</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a9be1a185a12d8fc393ac44cf3a8a3b1b"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a></div><div class="ttdeci">#define PRES_SUBTYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00661">func_presencestate.c:661</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a434638d50da861cd469216790e285fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434638d50da861cd469216790e285fda">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_presence_state_base64_encode&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00780">780</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00404">ast_base64encode()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00662">PRES_MESSAGE</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00660">PRES_STATE</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00661">PRES_SUBTYPE</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;{</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordtype">char</span> out_state[32];</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordtype">char</span> out_subtype[32];</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordtype">char</span> out_message[32];</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordtype">char</span> encoded_subtype[64];</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordtype">char</span> encoded_message[64];</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;test_presence_state_base64_encode&quot;</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/funcs/func_presence/&quot;</span>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;presence state base64 encoding&quot;</span>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;         <span class="stringliteral">&quot;Ensure that base64-encoded presence state is stored base64-encoded but\n&quot;</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         <span class="stringliteral">&quot;is presented to consumers decoded.&quot;</span>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a>(encoded_subtype, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a>, strlen(PRES_SUBTYPE), <span class="keyword">sizeof</span>(encoded_subtype) - 1);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a>(encoded_message, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a>, strlen(PRES_MESSAGE), <span class="keyword">sizeof</span>(encoded_message) - 1);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#a984a9735b911f5ec53036ae4b8dca796">presence_change_common</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>, encoded_subtype, encoded_message, <span class="stringliteral">&quot;e&quot;</span>,</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            out_state, <span class="keyword">sizeof</span>(out_state),</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            out_subtype, <span class="keyword">sizeof</span>(out_subtype),</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            out_message, <span class="keyword">sizeof</span>(out_message)) == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keywordflow">if</span> (strcmp(out_state, <a class="code" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>) ||</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;         strcmp(out_subtype, PRES_SUBTYPE) ||</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         strcmp(out_message, PRES_MESSAGE)) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Unexpected presence values, %s != %s, %s != %s, or %s != %s\n&quot;</span>,</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            <a class="code" href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a>, out_state,</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            PRES_SUBTYPE, out_subtype,</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            PRES_MESSAGE, out_message);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   }</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;}</div><div class="ttc" id="func__presencestate_8c_html_abf48a64c452a950a2108af95e0c9d0ea"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#abf48a64c452a950a2108af95e0c9d0ea">PRES_MESSAGE</a></div><div class="ttdeci">#define PRES_MESSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00662">func_presencestate.c:662</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a984a9735b911f5ec53036ae4b8dca796"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a984a9735b911f5ec53036ae4b8dca796">presence_change_common</a></div><div class="ttdeci">static enum ast_test_result_state presence_change_common(struct ast_test *test, const char *state, const char *subtype, const char *message, const char *options, char *out_state, size_t out_state_size, char *out_subtype, size_t out_subtype_size, char *out_message, size_t out_message_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00705">func_presencestate.c:705</a></div></div>
<div class="ttc" id="utils_8h_html_a555dad1bd5b23acf01cf08f1affab879"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a></div><div class="ttdeci">int ast_base64encode(char *dst, const unsigned char *src, int srclen, int max)</div><div class="ttdoc">Encode data in base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00404">main/utils.c:404</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_af6d8373db4a57d04f5acc3f7496e2b6c"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#af6d8373db4a57d04f5acc3f7496e2b6c">PRES_STATE</a></div><div class="ttdeci">#define PRES_STATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00660">func_presencestate.c:660</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a9be1a185a12d8fc393ac44cf3a8a3b1b"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a9be1a185a12d8fc393ac44cf3a8a3b1b">PRES_SUBTYPE</a></div><div class="ttdeci">#define PRES_SUBTYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00661">func_presencestate.c:661</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50b8351f93f86a847fdb2578558b784f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50b8351f93f86a847fdb2578558b784f">&#9670;&nbsp;</a></span>custom_presence_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> custom_presence_callback </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>subtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00248">248</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">ast_base64decode()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00412">ast_db_get()</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00039">AST_PRESENCE_INVALID</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00027">AST_PRESENCE_NOT_SET</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00100">astdb_family</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">parse_data()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00842">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[1301] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordtype">char</span> *_options;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordtype">char</span> *_message;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordtype">char</span> *_subtype;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a>, data, buf, <span class="keyword">sizeof</span>(buf))) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3">AST_PRESENCE_NOT_SET</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a>(buf, &amp;state, &amp;_subtype, &amp;_message, &amp;_options)) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">if</span> ((strchr(_options, <span class="charliteral">&#39;e&#39;</span>))) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[1301];</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(_subtype)) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         *<a class="code" href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         memset(tmp, 0, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) tmp, _subtype, <span class="keyword">sizeof</span>(tmp) - 1);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         *<a class="code" href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tmp);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(_message)) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;         *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         memset(tmp, 0, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) tmp, _message, <span class="keyword">sizeof</span>(tmp) - 1);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(tmp);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      *<a class="code" href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a> = <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(_subtype) ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(_subtype);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(_message) ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(_message);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ab3313e9ad0a692ca4debcb2f08565170"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a></div><div class="ttdeci">static const char astdb_family[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00100">func_presencestate.c:100</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_aec619a9fce6d2586c25afe8714e87b47"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a></div><div class="ttdeci">static int parse_data(char *data, enum ast_presence_state *state, char **subtype, char **message, char **options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00162">func_presencestate.c:162</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structtest__string_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">test_string::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00454">func_presencestate.c:454</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3">AST_PRESENCE_NOT_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00027">presencestate.h:27</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1e7e06bd20719ecfd58b67f230780ffa"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a></div><div class="ttdeci">int ast_base64decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">Decode data from base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00294">main/utils.c:294</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00039">presencestate.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a056644de75e9a9bcb590d66298b1b629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a056644de75e9a9bcb590d66298b1b629">&#9670;&nbsp;</a></span>handle_cli_presencestate_change()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_presencestate_change </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00366">366</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01811">ast_cli_complete()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00027">AST_PRESENCE_NOT_SET</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00336">ast_presence_state_changed_literal()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00100">astdb_family</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">parse_data()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dev, *<a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>, *full_dev;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> state_val;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d3a/structtest__string.html#a254bf0858da09c96a48daf64404eb4f8">message</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;presencestate change&quot;</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         <span class="stringliteral">&quot;Usage: presencestate change &lt;entity&gt; &lt;state&gt;[,&lt;subtype&gt;[,message[,options]]]\n&quot;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         <span class="stringliteral">&quot;       Change a custom presence to a new state.\n&quot;</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         <span class="stringliteral">&quot;       The possible values for the state are:\n&quot;</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;         <span class="stringliteral">&quot;NOT_SET | UNAVAILABLE | AVAILABLE | AWAY | XA | CHAT | DND\n&quot;</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         <span class="stringliteral">&quot;Optionally, a custom subtype and message may be provided, along with any options\n&quot;</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;         <span class="stringliteral">&quot;accepted by func_presencestate. If the subtype or message provided contain spaces,\n&quot;</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         <span class="stringliteral">&quot;be sure to enclose the data in quotation marks (\&quot;\&quot;)\n&quot;</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <span class="stringliteral">&quot;Examples:\n&quot;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="stringliteral">&quot;       presencestate change CustomPresence:mystate1 AWAY\n&quot;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         <span class="stringliteral">&quot;       presencestate change CustomPresence:mystate1 AVAILABLE\n&quot;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         <span class="stringliteral">&quot;       presencestate change CustomPresence:mystate1 \&quot;Away,upstairs,eating lunch\&quot;\n&quot;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         <span class="stringliteral">&quot;       \n&quot;</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> cmds[] = { <span class="stringliteral">&quot;NOT_SET&quot;</span>, <span class="stringliteral">&quot;UNAVAILABLE&quot;</span>, <span class="stringliteral">&quot;AVAILABLE&quot;</span>, <span class="stringliteral">&quot;AWAY&quot;</span>,</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                       <span class="stringliteral">&quot;XA&quot;</span>, <span class="stringliteral">&quot;CHAT&quot;</span>, <span class="stringliteral">&quot;DND&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> + 1) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, cmds, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> + 2) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   len = strlen(<span class="stringliteral">&quot;CustomPresence:&quot;</span>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   full_dev = dev = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>];</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   state = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> + 1];</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(dev, <span class="stringliteral">&quot;CustomPresence:&quot;</span>, len)) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;The presencestate command can only be used to set &#39;CustomPresence:&#39; presence state!\n&quot;</span>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   dev += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dev)) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(state);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a>(args, &amp;state_val, &amp;subtype, &amp;message, &amp;options)) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">if</span> (state_val == <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3">AST_PRESENCE_NOT_SET</a>) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Changing %s to %s\n&quot;</span>, dev, args);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a>, dev, state);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <a class="code" href="../../d6/dd7/presencestate_8h.html#a21c03b3b24e4e2d470cb15c0830d6b83">ast_presence_state_changed_literal</a>(state_val, subtype, message, full_dev);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ab3313e9ad0a692ca4debcb2f08565170"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a></div><div class="ttdeci">static const char astdb_family[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00100">func_presencestate.c:100</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_aec619a9fce6d2586c25afe8714e87b47"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a></div><div class="ttdeci">static int parse_data(char *data, enum ast_presence_state *state, char **subtype, char **message, char **options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00162">func_presencestate.c:162</a></div></div>
<div class="ttc" id="presencestate_8h_html_a21c03b3b24e4e2d470cb15c0830d6b83"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a21c03b3b24e4e2d470cb15c0830d6b83">ast_presence_state_changed_literal</a></div><div class="ttdeci">int ast_presence_state_changed_literal(enum ast_presence_state state, const char *subtype, const char *message, const char *presence_provider)</div><div class="ttdoc">Notify the world that a presence provider state changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00336">presencestate.c:336</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structtest__string_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#abb4ae60bbcbce3616fdd7d4238869c91">test_string::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00454">func_presencestate.c:454</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1acdf498c57345da5b4e0bb42ef32298c3">AST_PRESENCE_NOT_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00027">presencestate.h:27</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cli_8h_html_a2a43f82ed19e84f386787154f2f22fc9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a></div><div class="ttdeci">char * ast_cli_complete(const char *word, const char *const choices[], int pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01811">main/cli.c:1811</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structtest__string_html_a254bf0858da09c96a48daf64404eb4f8"><div class="ttname"><a href="../../dd/d3a/structtest__string.html#a254bf0858da09c96a48daf64404eb4f8">test_string::message</a></div><div class="ttdeci">const char * message</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00455">func_presencestate.c:455</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff2c7beb8cfc8dc32c6647ca4e7f61c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff2c7beb8cfc8dc32c6647ca4e7f61c1">&#9670;&nbsp;</a></span>handle_cli_presencestate_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_presencestate_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00295">295</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00071">AST_CLI_YESNO</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00103">ast_presence_state2str()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00100">astdb_family</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00034">ast_db_entry::data</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">parse_data()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *db_entry, *db_tree;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;presencestate list&quot;</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         <span class="stringliteral">&quot;Usage: presencestate list\n&quot;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         <span class="stringliteral">&quot;       List all custom presence states that have been set by using\n&quot;</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;         <span class="stringliteral">&quot;       the PRESENCE_STATE dialplan function.\n&quot;</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;           <span class="stringliteral">&quot;---------------------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;           <span class="stringliteral">&quot;--- Custom Presence States ------------------------------------------\n&quot;</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;           <span class="stringliteral">&quot;---------------------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;           <span class="stringliteral">&quot;---\n&quot;</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   db_entry = db_tree = <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">if</span> (!db_entry) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No custom presence states defined\n&quot;</span>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">for</span> (; db_entry; db_entry = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *object_name = strrchr(db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a>, <span class="charliteral">&#39;/&#39;</span>) + 1;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordtype">char</span> state_info[1301];</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordtype">char</span> *subtype;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(state_info, db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, <span class="keyword">sizeof</span>(state_info));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a>(state_info, &amp;state, &amp;subtype, &amp;message, &amp;options)) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid CustomPresence entry %s encountered\n&quot;</span>, db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> (object_name &lt;= (<span class="keyword">const</span> <span class="keywordtype">char</span> *) 1) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;--- Name: &#39;CustomPresence:%s&#39;\n&quot;</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                   <span class="stringliteral">&quot;    --- State: &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                  <span class="stringliteral">&quot;    --- Subtype: &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                  <span class="stringliteral">&quot;    --- Message: &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                  <span class="stringliteral">&quot;    --- Base64 Encoded: &#39;%s&#39;\n&quot;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                     <span class="stringliteral">&quot;---\n&quot;</span>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                  object_name,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                  <a class="code" href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a>(state),</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                  subtype,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                  message,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                  <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(strchr(options, <span class="charliteral">&#39;e&#39;</span>)));</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>(db_tree);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   db_tree = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;           <span class="stringliteral">&quot;---------------------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;           <span class="stringliteral">&quot;---------------------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;           <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ab3313e9ad0a692ca4debcb2f08565170"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a></div><div class="ttdeci">static const char astdb_family[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00100">func_presencestate.c:100</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_aec619a9fce6d2586c25afe8714e87b47"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a></div><div class="ttdeci">static int parse_data(char *data, enum ast_presence_state *state, char **subtype, char **message, char **options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00162">func_presencestate.c:162</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="cli_8h_html_a29e703082f8137e165097c41f249e6d1"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a></div><div class="ttdeci">#define AST_CLI_YESNO(x)</div><div class="ttdoc">Return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00071">cli.h:71</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="presencestate_8h_html_aec78c2b072d51416200d34bdd06827a7"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a></div><div class="ttdeci">const char * ast_presence_state2str(enum ast_presence_state state)</div><div class="ttdoc">Convert presence state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00103">presencestate.c:103</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00842">842</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00329">AST_MODPRI_DEVSTATE_PROVIDER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00350">ast_presence_state_changed()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00231">ast_presence_state_prov_add()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00100">astdb_family</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00248">custom_presence_callback()</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00455">test_string::message</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00454">test_string::subtype</a>, and <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00826">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;{</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *db_entry, *db_tree;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   <span class="comment">/* Populate the presence state cache on the system with all of the currently</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">    * known custom presence states. */</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   db_entry = db_tree = <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keywordflow">for</span> (; db_entry; db_entry = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *dev_name = strrchr(db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a>, <span class="charliteral">&#39;/&#39;</span>) + 1;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordtype">char</span> *subtype;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">if</span> (dev_name &lt;= (<span class="keyword">const</span> <span class="keywordtype">char</span> *) 1) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      state = <a class="code" href="../../d0/d81/func__presencestate_8c.html#a50b8351f93f86a847fdb2578558b784f">custom_presence_callback</a>(dev_name, &amp;subtype, &amp;message);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <a class="code" href="../../d6/dd7/presencestate_8h.html#ad8aa5916859638e7afee5927061471c3">ast_presence_state_changed</a>(state, subtype, message, <span class="stringliteral">&quot;CustomPresence:%s&quot;</span>, dev_name);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(subtype);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>(db_tree);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   db_tree = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d81/func__presencestate_8c.html#ad28cadbf693a41f7d78653a8b0338f67">presence_function</a>);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   res |= <a class="code" href="../../d6/dd7/presencestate_8h.html#a3d7bdc80a9d6b758706c08b8d4b6ced5">ast_presence_state_prov_add</a>(<span class="stringliteral">&quot;CustomPresence&quot;</span>, <a class="code" href="../../d0/d81/func__presencestate_8c.html#a50b8351f93f86a847fdb2578558b784f">custom_presence_callback</a>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   res |= <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a>));</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_valid_parse_data);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_invalid_parse_data);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_presence_state_change);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_presence_state_base64_encode);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div><div class="ttc" id="func__presencestate_8c_html_ad28cadbf693a41f7d78653a8b0338f67"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ad28cadbf693a41f7d78653a8b0338f67">presence_function</a></div><div class="ttdeci">static struct ast_custom_function presence_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00289">func_presencestate.c:289</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ab3313e9ad0a692ca4debcb2f08565170"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a></div><div class="ttdeci">static const char astdb_family[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00100">func_presencestate.c:100</a></div></div>
<div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a50b8351f93f86a847fdb2578558b784f"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a50b8351f93f86a847fdb2578558b784f">custom_presence_callback</a></div><div class="ttdeci">static enum ast_presence_state custom_presence_callback(const char *data, char **subtype, char **message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00248">func_presencestate.c:248</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="presencestate_8h_html_a3d7bdc80a9d6b758706c08b8d4b6ced5"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a3d7bdc80a9d6b758706c08b8d4b6ced5">ast_presence_state_prov_add</a></div><div class="ttdeci">int ast_presence_state_prov_add(const char *label, ast_presence_state_prov_cb_type callback)</div><div class="ttdoc">Add presence state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00231">presencestate.c:231</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="presencestate_8h_html_ad8aa5916859638e7afee5927061471c3"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ad8aa5916859638e7afee5927061471c3">ast_presence_state_changed</a></div><div class="ttdeci">int ast_presence_state_changed(enum ast_presence_state state, const char *subtype, const char *message, const char *fmt,...)</div><div class="ttdoc">Notify the world that a presence provider state changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00350">presencestate.c:350</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a928e1e22d530e5097b0b506914240612"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a></div><div class="ttdeci">static struct ast_cli_entry cli_funcpresencestate[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00443">func_presencestate.c:443</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec619a9fce6d2586c25afe8714e87b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec619a9fce6d2586c25afe8714e87b47">&#9670;&nbsp;</a></span>parse_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_data </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>subtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">162</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00039">AST_PRESENCE_INVALID</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00114">ast_presence_state_val()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00460">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00248">custom_presence_callback()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00366">handle_cli_presencestate_change()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00295">handle_cli_presencestate_list()</a>, and <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00207">presence_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="keywordtype">char</span> *state_str;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="comment">/* data syntax is state,subtype,message,options */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   *subtype = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   state_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, <span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(state_str)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> -1; <span class="comment">/* state is required */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   *<a class="code" href="../../d4/d88/structstate.html">state</a> = <a class="code" href="../../d6/dd7/presencestate_8h.html#a6afc26c5040198df2d32a0c9c704f02e">ast_presence_state_val</a>(state_str);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="comment">/* not a valid state */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keywordflow">if</span> (*<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a>) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown presence state value %s\n&quot;</span>, state_str);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordflow">if</span> (!(*subtype = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>,<span class="stringliteral">&quot;,&quot;</span>))) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      *subtype = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="keywordflow">if</span> (!(*<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, <span class="stringliteral">&quot;,&quot;</span>))) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">if</span> (!(*<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, <span class="stringliteral">&quot;,&quot;</span>))) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(*<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>) &amp;&amp; !(strchr(*<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, <span class="charliteral">&#39;e&#39;</span>))) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Invalid options  &#39;%s&#39;\n&quot;</span>, *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="presencestate_8h_html_a6afc26c5040198df2d32a0c9c704f02e"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a6afc26c5040198df2d32a0c9c704f02e">ast_presence_state_val</a></div><div class="ttdeci">enum ast_presence_state ast_presence_state_val(const char *val)</div><div class="ttdoc">Convert presence state from text to integer value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00114">presencestate.c:114</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00039">presencestate.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a984a9735b911f5ec53036ae4b8dca796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a984a9735b911f5ec53036ae4b8dca796">&#9670;&nbsp;</a></span>presence_change_common()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> presence_change_common </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_state_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out_subtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_subtype_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out_message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_message_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">705</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00429">ast_db_del()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00103">ast_presence_state2str()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00365">ast_presence_state_topic_all()</a>, <a class="el" href="../../d2/d28/sem_8h.html#af6905f792ba5f806f697ccca7e1f3b6e">ast_sem_wait()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00207">presence_write()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00652">stasis_subscribe</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00693">test_cb()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00670">test_cb_data_alloc()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00686">test_cb_data_destroy()</a>, and <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01790">test_sub()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00742">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;{</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../de/daf/structtest__cb__data.html">test_cb_data</a> *, cb_data, <a class="code" href="../../d0/d81/func__presencestate_8c.html#ab0a1227723af602d456344cf116317f9">test_cb_data_alloc</a>(), <a class="code" href="../../d0/d81/func__presencestate_8c.html#ad9fee950247568eaee8e07cd10b3691a">test_cb_data_destroy</a>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../db/dc4/test__cel_8c.html#a4914f4ce6cab1a4aff6f3d4c46aaa8c6">test_sub</a>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <span class="keywordtype">char</span> pres[1301];</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="keywordflow">if</span> (!(test_sub = <a class="code" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>(<a class="code" href="../../d6/dd7/presencestate_8h.html#a24297292fcef05a5a271e99e1a71f45a">ast_presence_state_topic_all</a>(), <a class="code" href="../../d0/d81/func__presencestate_8c.html#af2be401a440d9bce26686c792d039369">test_cb</a>, cb_data))) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      snprintf(pres, <span class="keyword">sizeof</span>(pres), <span class="stringliteral">&quot;%s,%s,%s&quot;</span>, <a class="code" href="../../d4/d88/structstate.html">state</a>, subtype, <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      snprintf(pres, <span class="keyword">sizeof</span>(pres), <span class="stringliteral">&quot;%s,%s,%s,%s&quot;</span>, <a class="code" href="../../d4/d88/structstate.html">state</a>, subtype, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#ad63de0b1a1687558415d4ee0520c4807">presence_write</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;PRESENCESTATE&quot;</span>, <span class="stringliteral">&quot;CustomPresence:TestPresenceStateChange&quot;</span>, pres)) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      test_sub = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(test_sub);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#af6905f792ba5f806f697ccca7e1f3b6e">ast_sem_wait</a>(&amp;cb_data-&gt;sem);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(out_state, <a class="code" href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a>(cb_data-&gt;presence_state-&gt;state), out_state_size);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(out_subtype, cb_data-&gt;presence_state-&gt;subtype, out_subtype_size);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(out_message, cb_data-&gt;presence_state-&gt;message, out_message_size);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   test_sub = <a class="code" href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a>(test_sub);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(<span class="stringliteral">&quot;CustomPresence&quot;</span>, <span class="stringliteral">&quot;TestPresenceStateChange&quot;</span>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div><div class="ttc" id="func__presencestate_8c_html_ab0a1227723af602d456344cf116317f9"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ab0a1227723af602d456344cf116317f9">test_cb_data_alloc</a></div><div class="ttdeci">static struct test_cb_data * test_cb_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00670">func_presencestate.c:670</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structtest__cb__data_html"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html">test_cb_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00664">func_presencestate.c:664</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test__cel_8c_html_a4914f4ce6cab1a4aff6f3d4c46aaa8c6"><div class="ttname"><a href="../../db/dc4/test__cel_8c.html#a4914f4ce6cab1a4aff6f3d4c46aaa8c6">test_sub</a></div><div class="ttdeci">static void test_sub(struct ast_event *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc4/test__cel_8c_source.html#l01790">test_cel.c:1790</a></div></div>
<div class="ttc" id="sem_8h_html_af6905f792ba5f806f697ccca7e1f3b6e"><div class="ttname"><a href="../../d2/d28/sem_8h.html#af6905f792ba5f806f697ccca7e1f3b6e">ast_sem_wait</a></div><div class="ttdeci">int ast_sem_wait(struct ast_sem *sem)</div><div class="ttdoc">Decrements the semaphore. </div></div>
<div class="ttc" id="stasis_8h_html_ae3fe7fe099389094244002113814ec23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a></div><div class="ttdeci">#define stasis_subscribe(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00652">stasis.h:652</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ad63de0b1a1687558415d4ee0520c4807"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ad63de0b1a1687558415d4ee0520c4807">presence_write</a></div><div class="ttdeci">static int presence_write(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00207">func_presencestate.c:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="stasis_8h_html_a221d05010106dcde0cc2e2b43c1a8b67"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe_and_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription, blocking until the last message is processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01136">stasis.c:1136</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="astdb_8h_html_a71e8d5ab1757b184683a99125d1c8160"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a></div><div class="ttdeci">int ast_db_del(const char *family, const char *key)</div><div class="ttdoc">Delete entry in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00429">main/db.c:429</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="presencestate_8h_html_a24297292fcef05a5a271e99e1a71f45a"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a24297292fcef05a5a271e99e1a71f45a">ast_presence_state_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_presence_state_topic_all(void)</div><div class="ttdoc">Get presence state topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00365">presencestate.c:365</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_af2be401a440d9bce26686c792d039369"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#af2be401a440d9bce26686c792d039369">test_cb</a></div><div class="ttdeci">static void test_cb(void *userdata, struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00693">func_presencestate.c:693</a></div></div>
<div class="ttc" id="presencestate_8h_html_aec78c2b072d51416200d34bdd06827a7"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a></div><div class="ttdeci">const char * ast_presence_state2str(enum ast_presence_state state)</div><div class="ttdoc">Convert presence state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00103">presencestate.c:103</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ad9fee950247568eaee8e07cd10b3691a"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ad9fee950247568eaee8e07cd10b3691a">test_cb_data_destroy</a></div><div class="ttdeci">static void test_cb_data_destroy(struct test_cb_data *cb_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00686">func_presencestate.c:686</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1276a4a9a1685a80c8bc898f7f414f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1276a4a9a1685a80c8bc898f7f414f03">&#9670;&nbsp;</a></span>presence_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int presence_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00102">102</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00404">ast_base64encode()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/dd7/presencestate_8h_source.html#l00039">AST_PRESENCE_INVALID</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00103">ast_presence_state2str()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00226">ast_presence_state_nocache()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d8/d3a/bridges_8c_source.html#l00178">provider</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keywordtype">char</span> *subtype = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keywordtype">int</span> base64encode = 0;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d8/d3a/bridges_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(field);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   );</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>)) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PRESENCE_STATE reading requires an argument \n&quot;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.provider) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field)) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PRESENCE_STATE reading requires both presence provider and presence field arguments. \n&quot;</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   state = <a class="code" href="../../d6/dd7/presencestate_8h.html#aa713e546441230472c468c3b27d79df9">ast_presence_state_nocache</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.provider, &amp;subtype, &amp;message);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keywordflow">if</span> (state == <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a>) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PRESENCE_STATE unknown \n&quot;</span>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options)) &amp;&amp; (strchr(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options, <span class="charliteral">&#39;e&#39;</span>))) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      base64encode = 1;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(subtype) &amp;&amp; !strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field, <span class="stringliteral">&quot;subtype&quot;</span>)) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">if</span> (base64encode) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) subtype, strlen(subtype), <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, subtype, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(message) &amp;&amp; !strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field, <span class="stringliteral">&quot;message&quot;</span>)) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">if</span> (base64encode) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) message, strlen(message), <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, message, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.field, <span class="stringliteral">&quot;value&quot;</span>)) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a>(state), <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(message);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(subtype);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="presencestate_8h_html_aa713e546441230472c468c3b27d79df9"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#aa713e546441230472c468c3b27d79df9">ast_presence_state_nocache</a></div><div class="ttdeci">enum ast_presence_state ast_presence_state_nocache(const char *presence_provider, char **subtype, char **message)</div><div class="ttdoc">Asks a presence state provider for the current presence state, bypassing the event cache...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00226">presencestate.c:226</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">stasis_subscription::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00691">stasis.c:691</a></div></div>
<div class="ttc" id="utils_8h_html_a555dad1bd5b23acf01cf08f1affab879"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a></div><div class="ttdeci">int ast_base64encode(char *dst, const unsigned char *src, int srclen, int max)</div><div class="ttdoc">Encode data in base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00404">main/utils.c:404</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="bridges_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../d8/d3a/bridges_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3a/bridges_8c_source.html#l00178">bridges.c:178</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1a5b541c7f37468daf2ee6cfe488949adb">AST_PRESENCE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00039">presencestate.h:39</a></div></div>
<div class="ttc" id="presencestate_8h_html_aec78c2b072d51416200d34bdd06827a7"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#aec78c2b072d51416200d34bdd06827a7">ast_presence_state2str</a></div><div class="ttdeci">const char * ast_presence_state2str(enum ast_presence_state state)</div><div class="ttdoc">Convert presence state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00103">presencestate.c:103</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad63de0b1a1687558415d4ee0520c4807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad63de0b1a1687558415d4ee0520c4807">&#9670;&nbsp;</a></span>presence_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int presence_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00207">207</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">ast_base64decode()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00336">ast_presence_state_changed_literal()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00100">astdb_family</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00162">parse_data()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(<span class="stringliteral">&quot;CustomPresence:&quot;</span>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, *<a class="code" href="../../d8/d9e/structmessage.html">message</a>, *subtype;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(<a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <span class="stringliteral">&quot;CustomPresence:&quot;</span>, len)) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The PRESENCE_STATE function can only set CustomPresence: presence providers.\n&quot;</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a> += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>)) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PRESENCE_STATE function called with no custom device name!\n&quot;</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a>(args, &amp;state, &amp;subtype, &amp;message, &amp;options)) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid arguments to PRESENCE_STATE\n&quot;</span>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a>, <a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keywordflow">if</span> (strchr(options, <span class="charliteral">&#39;e&#39;</span>)) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">/* Let&#39;s decode the values before sending them to stasis, yes? */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordtype">char</span> decoded_subtype[256] = { 0, };</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordtype">char</span> decoded_message[256] = { 0, };</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) decoded_subtype, subtype, <span class="keyword">sizeof</span>(decoded_subtype) -1);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) decoded_message, message, <span class="keyword">sizeof</span>(decoded_message) -1);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="../../d6/dd7/presencestate_8h.html#a21c03b3b24e4e2d470cb15c0830d6b83">ast_presence_state_changed_literal</a>(state, decoded_subtype, decoded_message, tmp);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="../../d6/dd7/presencestate_8h.html#a21c03b3b24e4e2d470cb15c0830d6b83">ast_presence_state_changed_literal</a>(state, subtype, message, tmp);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_ab3313e9ad0a692ca4debcb2f08565170"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ab3313e9ad0a692ca4debcb2f08565170">astdb_family</a></div><div class="ttdeci">static const char astdb_family[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00100">func_presencestate.c:100</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_aec619a9fce6d2586c25afe8714e87b47"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aec619a9fce6d2586c25afe8714e87b47">parse_data</a></div><div class="ttdeci">static int parse_data(char *data, enum ast_presence_state *state, char **subtype, char **message, char **options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00162">func_presencestate.c:162</a></div></div>
<div class="ttc" id="presencestate_8h_html_a21c03b3b24e4e2d470cb15c0830d6b83"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a21c03b3b24e4e2d470cb15c0830d6b83">ast_presence_state_changed_literal</a></div><div class="ttdeci">int ast_presence_state_changed_literal(enum ast_presence_state state, const char *subtype, const char *message, const char *presence_provider)</div><div class="ttdoc">Notify the world that a presence provider state changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00336">presencestate.c:336</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="utils_8h_html_a1e7e06bd20719ecfd58b67f230780ffa"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a></div><div class="ttdeci">int ast_base64decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">Decode data from base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00294">main/utils.c:294</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="presencestate_8h_html_ac3452f41c7982c84ca27ecf7b4cc7ce1"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ac3452f41c7982c84ca27ecf7b4cc7ce1">ast_presence_state</a></div><div class="ttdeci">ast_presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd7/presencestate_8h_source.html#l00026">presencestate.h:26</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">stasis_subscription::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00691">stasis.c:691</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2be401a440d9bce26686c792d039369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2be401a440d9bce26686c792d039369">&#9670;&nbsp;</a></span>test_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00693">693</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/dd7/presencestate_8h.html#a7552e0df81ae4e89431564844957de41">ast_presence_state_message_type()</a>, <a class="el" href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00665">test_cb_data::presence_state</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00667">test_cb_data::sem</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>.</p>
<div class="fragment"><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/daf/structtest__cb__data.html">test_cb_data</a> *cb_data = userdata;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(msg) != <a class="code" href="../../d6/dd7/presencestate_8h.html#a7552e0df81ae4e89431564844957de41">ast_presence_state_message_type</a>()) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   cb_data-&gt;<a class="code" href="../../de/daf/structtest__cb__data.html#a09d1f51d566742bcb9fc42bb4fbbc4a3">presence_state</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cb_data-&gt;<a class="code" href="../../de/daf/structtest__cb__data.html#a09d1f51d566742bcb9fc42bb4fbbc4a3">presence_state</a>, +1);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post</a>(&amp;cb_data-&gt;<a class="code" href="../../de/daf/structtest__cb__data.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="ttc" id="structtest__cb__data_html_a09d1f51d566742bcb9fc42bb4fbbc4a3"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html#a09d1f51d566742bcb9fc42bb4fbbc4a3">test_cb_data::presence_state</a></div><div class="ttdeci">struct ast_presence_state_message * presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00665">func_presencestate.c:665</a></div></div>
<div class="ttc" id="structtest__cb__data_html"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html">test_cb_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00664">func_presencestate.c:664</a></div></div>
<div class="ttc" id="sem_8h_html_af79fddfd5155ad5597f47d690b3d5219"><div class="ttname"><a href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post</a></div><div class="ttdeci">int ast_sem_post(struct ast_sem *sem)</div><div class="ttdoc">Increments the semaphore, unblocking a waiter if necessary. </div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="presencestate_8h_html_a7552e0df81ae4e89431564844957de41"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#a7552e0df81ae4e89431564844957de41">ast_presence_state_message_type</a></div><div class="ttdeci">struct stasis_message_type * ast_presence_state_message_type(void)</div><div class="ttdoc">Get presence state message type. </div></div>
<div class="ttc" id="structtest__cb__data_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html#a9684f7c550b6261d07efade48fcc3c8b">test_cb_data::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00667">func_presencestate.c:667</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0a1227723af602d456344cf116317f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0a1227723af602d456344cf116317f9">&#9670;&nbsp;</a></span>test_cb_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/daf/structtest__cb__data.html">test_cb_data</a>* test_cb_data_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00670">670</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00667">test_cb_data::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>.</p>
<div class="fragment"><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;{</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/daf/structtest__cb__data.html">test_cb_data</a> *cb_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cb_data));</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <span class="keywordflow">if</span> (!cb_data) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init</a>(&amp;cb_data-&gt;<a class="code" href="../../de/daf/structtest__cb__data.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>, 0, 0)) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cb_data);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keywordflow">return</span> cb_data;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div><div class="ttc" id="structtest__cb__data_html"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html">test_cb_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00664">func_presencestate.c:664</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="sem_8h_html_a1ab41f813806a164b518257c5b6b6e30"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init</a></div><div class="ttdeci">int ast_sem_init(struct ast_sem *sem, int pshared, unsigned int value)</div><div class="ttdoc">Initialize a semaphore. </div></div>
<div class="ttc" id="structtest__cb__data_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html#a9684f7c550b6261d07efade48fcc3c8b">test_cb_data::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00667">func_presencestate.c:667</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9fee950247568eaee8e07cd10b3691a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9fee950247568eaee8e07cd10b3691a">&#9670;&nbsp;</a></span>test_cb_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_cb_data_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/daf/structtest__cb__data.html">test_cb_data</a> *&#160;</td>
          <td class="paramname"><em>cb_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00686">686</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00665">test_cb_data::presence_state</a>, and <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00667">test_cb_data::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>.</p>
<div class="fragment"><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;{</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cb_data-&gt;<a class="code" href="../../de/daf/structtest__cb__data.html#a09d1f51d566742bcb9fc42bb4fbbc4a3">presence_state</a>);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy</a>(&amp;cb_data-&gt;<a class="code" href="../../de/daf/structtest__cb__data.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cb_data);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div><div class="ttc" id="sem_8h_html_a89f01b37ab088385ad31c5d7f67b0ac0"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy</a></div><div class="ttdeci">int ast_sem_destroy(struct ast_sem *sem)</div><div class="ttdoc">Destroy a semaphore. </div></div>
<div class="ttc" id="structtest__cb__data_html_a09d1f51d566742bcb9fc42bb4fbbc4a3"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html#a09d1f51d566742bcb9fc42bb4fbbc4a3">test_cb_data::presence_state</a></div><div class="ttdeci">struct ast_presence_state_message * presence_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00665">func_presencestate.c:665</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtest__cb__data_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../de/daf/structtest__cb__data.html#a9684f7c550b6261d07efade48fcc3c8b">test_cb_data::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00667">func_presencestate.c:667</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00826">826</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00248">ast_presence_state_prov_del()</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00842">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d81/func__presencestate_8c.html#ad28cadbf693a41f7d78653a8b0338f67">presence_function</a>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   res |= <a class="code" href="../../d6/dd7/presencestate_8h.html#ad022944456cdfae836c2fb4263d09ec2">ast_presence_state_prov_del</a>(<span class="stringliteral">&quot;CustomPresence&quot;</span>);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   res |= <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a>));</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_valid_parse_data);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_invalid_parse_data);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_presence_state_change);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_presence_state_base64_encode);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div><div class="ttc" id="func__presencestate_8c_html_ad28cadbf693a41f7d78653a8b0338f67"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ad28cadbf693a41f7d78653a8b0338f67">presence_function</a></div><div class="ttdeci">static struct ast_custom_function presence_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00289">func_presencestate.c:289</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="presencestate_8h_html_ad022944456cdfae836c2fb4263d09ec2"><div class="ttname"><a href="../../d6/dd7/presencestate_8h.html#ad022944456cdfae836c2fb4263d09ec2">ast_presence_state_prov_del</a></div><div class="ttdeci">int ast_presence_state_prov_del(const char *label)</div><div class="ttdoc">Remove presence state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00248">presencestate.c:248</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a928e1e22d530e5097b0b506914240612"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a928e1e22d530e5097b0b506914240612">cli_funcpresencestate</a></div><div class="ttdeci">static struct ast_cli_entry cli_funcpresencestate[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00443">func_presencestate.c:443</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Gets or sets <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> presence <a class="el" href="../../d4/d88/structstate.html">state</a> <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> the dialplan&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_DEVSTATE_PROVIDER, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00884">884</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00884">884</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
<a id="ab3313e9ad0a692ca4debcb2f08565170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3313e9ad0a692ca4debcb2f08565170">&#9670;&nbsp;</a></span>astdb_family</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char astdb_family[] = &quot;CustomPresence&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00100">100</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00248">custom_presence_callback()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00366">handle_cli_presencestate_change()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00295">handle_cli_presencestate_list()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00842">load_module()</a>, and <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00207">presence_write()</a>.</p>

</div>
</div>
<a id="a928e1e22d530e5097b0b506914240612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a928e1e22d530e5097b0b506914240612">&#9670;&nbsp;</a></span>cli_funcpresencestate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_funcpresencestate[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../d0/d81/func__presencestate_8c.html#aff2c7beb8cfc8dc32c6647ca4e7f61c1">handle_cli_presencestate_list</a> , .summary =  <span class="stringliteral">&quot;List currently know custom presence states&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../d0/d81/func__presencestate_8c.html#a056644de75e9a9bcb590d66298b1b629">handle_cli_presencestate_change</a> , .summary =  <span class="stringliteral">&quot;Change a custom presence state&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="func__presencestate_8c_html_aff2c7beb8cfc8dc32c6647ca4e7f61c1"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#aff2c7beb8cfc8dc32c6647ca4e7f61c1">handle_cli_presencestate_list</a></div><div class="ttdeci">static char * handle_cli_presencestate_list(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00295">func_presencestate.c:295</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a056644de75e9a9bcb590d66298b1b629"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a056644de75e9a9bcb590d66298b1b629">handle_cli_presencestate_change</a></div><div class="ttdeci">static char * handle_cli_presencestate_change(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00366">func_presencestate.c:366</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00443">443</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
<a id="ad28cadbf693a41f7d78653a8b0338f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28cadbf693a41f7d78653a8b0338f67">&#9670;&nbsp;</a></span>presence_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> presence_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PRESENCE_STATE&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../d0/d81/func__presencestate_8c.html#a1276a4a9a1685a80c8bc898f7f414f03">presence_read</a>,</div><div class="line">   .write = <a class="code" href="../../d0/d81/func__presencestate_8c.html#ad63de0b1a1687558415d4ee0520c4807">presence_write</a>,</div><div class="line">}</div><div class="ttc" id="func__presencestate_8c_html_ad63de0b1a1687558415d4ee0520c4807"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#ad63de0b1a1687558415d4ee0520c4807">presence_write</a></div><div class="ttdeci">static int presence_write(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00207">func_presencestate.c:207</a></div></div>
<div class="ttc" id="func__presencestate_8c_html_a1276a4a9a1685a80c8bc898f7f414f03"><div class="ttname"><a href="../../d0/d81/func__presencestate_8c.html#a1276a4a9a1685a80c8bc898f7f414f03">presence_read</a></div><div class="ttdeci">static int presence_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d81/func__presencestate_8c_source.html#l00102">func_presencestate.c:102</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00289">289</a> of file <a class="el" href="../../d0/d81/func__presencestate_8c_source.html">func_presencestate.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:57 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
