<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: chan_mgcp.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9662a6a166de1dda18179da17db0f05a.html">channels</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">chan_mgcp.c File Reference<div class="ingroups"><a class="el" href="../../d6/df4/group__channel__drivers.html">Module: Asterisk Channel Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of Media Gateway Control Protocol.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;net/if.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;netinet/in_systm.h&gt;</code><br />
<code>#include &lt;netinet/ip.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/dbc/pickup_8h_source.html">asterisk/pickup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dac/io_8h_source.html">asterisk/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/rtp__engine_8h_source.html">asterisk/rtp_engine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d59/acl_8h_source.html">asterisk/acl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dce/say_8h_source.html">asterisk/say.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d4a/astdb_8h_source.html">asterisk/astdb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/features_8h_source.html">asterisk/features.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d33/mwi_8h_source.html">asterisk/mwi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/musiconhold_8h_source.html">asterisk/musiconhold.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d08/dsp_8h_source.html">asterisk/dsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/da2/devicestate_8h_source.html">asterisk/devicestate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d14/abstract__jb_8h_source.html">asterisk/abstract_jb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/de7/chanvars_8h_source.html">asterisk/chanvars.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d79/pktccops_8h_source.html">asterisk/pktccops.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html">asterisk/features_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d33/parking_8h_source.html">asterisk/parking.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for chan_mgcp.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d17/chan__mgcp_8c__incl.png" border="0" usemap="#chan__mgcp_8c" alt=""/></div>
<map name="chan__mgcp_8c" id="chan__mgcp_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="285,80,369,107"/>
<area shape="rect" id="node17" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1263,453,1376,480"/>
<area shape="rect" id="node19" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1818,229,1957,256"/>
<area shape="rect" id="node20" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1807,304,1965,331"/>
<area shape="rect" id="node21" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2041,304,2187,331"/>
<area shape="rect" id="node22" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1452,304,1579,331"/>
<area shape="rect" id="node23" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1262,379,1377,405"/>
<area shape="rect" id="node24" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1807,453,1965,480"/>
<area shape="rect" id="node25" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="997,304,1122,331"/>
<area shape="rect" id="node26" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1066,229,1202,256"/>
<area shape="rect" id="node27" href="../../dd/dbc/pickup_8h.html" title="Call Pickup API. " alt="" coords="3533,80,3663,107"/>
<area shape="rect" id="node28" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1979,155,2089,181"/>
<area shape="rect" id="node29" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1379,229,1505,256"/>
<area shape="rect" id="node30" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1581,229,1743,256"/>
<area shape="rect" id="node31" href="../../dc/dac/io_8h.html" title="I/O Management (derived from Cheops&#45;NG) " alt="" coords="666,155,765,181"/>
<area shape="rect" id="node32" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="557,229,703,256"/>
<area shape="rect" id="node33" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="995,155,1151,181"/>
<area shape="rect" id="node34" href="../../d5/d59/acl_8h.html" title="Access Control of various sorts. " alt="" coords="607,80,714,107"/>
<area shape="rect" id="node35" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="3687,80,3821,107"/>
<area shape="rect" id="node36" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="3845,80,3946,107"/>
<area shape="rect" id="node37" href="../../db/dce/say_8h.html" title="Say numbers and dates (maybe words one day too) " alt="" coords="1744,155,1852,181"/>
<area shape="rect" id="node38" href="../../de/d4a/astdb_8h.html" title="Persistant data storage (akin to *doze registry) " alt="" coords="3971,80,4095,107"/>
<area shape="rect" id="node39" href="../../de/d47/features_8h.html" title="Call Parking and Pickup API Includes code and algorithms from the Zapata library. ..." alt="" coords="1987,80,2129,107"/>
<area shape="rect" id="node40" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="2363,155,2491,181"/>
<area shape="rect" id="node41" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2423,229,2533,256"/>
<area shape="rect" id="node42" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="829,229,941,256"/>
<area shape="rect" id="node43" href="../../dc/d33/mwi_8h.html" title="Asterisk MWI API. " alt="" coords="1263,304,1376,331"/>
<area shape="rect" id="node44" href="../../dc/d07/musiconhold_8h.html" title="Music on hold handling. " alt="" coords="4119,80,4288,107"/>
<area shape="rect" id="node45" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="4313,80,4446,107"/>
<area shape="rect" id="node46" href="../../dc/d79/pktccops_8h.html" title="PacketCable COPS. " alt="" coords="4471,80,4616,107"/>
<area shape="rect" id="node47" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="2102,379,2289,405"/>
<area shape="rect" id="node48" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="2305,80,2440,107"/>
<area shape="rect" id="node49" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1530,155,1719,181"/>
<area shape="rect" id="node50" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="4641,80,4817,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="165,155,319,181"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="344,155,481,181"/>
<area shape="rect" id="node5" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,155,140,181"/>
</map>
</div>
</div>
<p><a href="../../d0/dd6/chan__mgcp_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d0f/structmgcp__message.html">mgcp_message</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d7/d0f/structmgcp__message.html" title="mgcp_message: MGCP message for queuing up ">mgcp_message</a>: MGCP message for queuing up  <a href="../../d7/d0f/structmgcp__message.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d89/structmgcp__response.html">mgcp_response</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a438d71fb32f283ee86c371ecad489900"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a438d71fb32f283ee86c371ecad489900">DEFAULT_EXPIRY</a>&#160;&#160;&#160;120</td></tr>
<tr class="separator:a438d71fb32f283ee86c371ecad489900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c8790d2031538c7eefd0310e5418f1d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3c8790d2031538c7eefd0310e5418f1d">DEFAULT_MGCP_CA_PORT</a>&#160;&#160;&#160;2727</td></tr>
<tr class="separator:a3c8790d2031538c7eefd0310e5418f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefdc3bf5bfafd4d2cc5565058b56bec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afefdc3bf5bfafd4d2cc5565058b56bec">DEFAULT_MGCP_GW_PORT</a>&#160;&#160;&#160;2427</td></tr>
<tr class="separator:afefdc3bf5bfafd4d2cc5565058b56bec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ddc3c82f9dfef47f17b23ef3874d8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a67ddc3c82f9dfef47f17b23ef3874d8a">DEFAULT_RETRANS</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:a67ddc3c82f9dfef47f17b23ef3874d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4035ee22ac338e5157dd3cd946c3bfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa4035ee22ac338e5157dd3cd946c3bfb">DIRECTMEDIA</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aa4035ee22ac338e5157dd3cd946c3bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2472d6cf31b73eeb829110dd0fffea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3d2472d6cf31b73eeb829110dd0fffea">INADDR_NONE</a>&#160;&#160;&#160;(in_addr_t)(-1)</td></tr>
<tr class="separator:a3d2472d6cf31b73eeb829110dd0fffea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a045bcf6c026ff7ae2af603f67cd81c5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a045bcf6c026ff7ae2af603f67cd81c5b">MAX_EXPIRY</a>&#160;&#160;&#160;3600</td></tr>
<tr class="separator:a045bcf6c026ff7ae2af603f67cd81c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24011ca9a966394f014bea9662713532"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a24011ca9a966394f014bea9662713532">MAX_RETRANS</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:a24011ca9a966394f014bea9662713532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cecb71b936e9c443f548540fb7a54ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a4cecb71b936e9c443f548540fb7a54ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144946cf986fb7fcff705810fe14a312"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a144946cf986fb7fcff705810fe14a312">MGCP_CX_CONF</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a144946cf986fb7fcff705810fe14a312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f5e59d6a075eb206f5986b02f27d5f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a5f5e59d6a075eb206f5986b02f27d5f0">MGCP_CX_CONFERENCE</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a5f5e59d6a075eb206f5986b02f27d5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867a1a8b1db505bd0edac7dc85e2627b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a867a1a8b1db505bd0edac7dc85e2627b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ad84ee9923fcd4a1a250eb508e76bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a06ad84ee9923fcd4a1a250eb508e76bd">MGCP_CX_MUTE</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a06ad84ee9923fcd4a1a250eb508e76bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583a184d797fe6db5a861d72615c2996"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a583a184d797fe6db5a861d72615c2996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a405bd9ba85222251a3306c1b0098238e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a405bd9ba85222251a3306c1b0098238e">MGCP_CX_SENDONLY</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a405bd9ba85222251a3306c1b0098238e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab670737ce602b7e5f077d5f508479b71"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ab670737ce602b7e5f077d5f508479b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb13f1c0d55dd7d6558ac56af67efcd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="separator:aecb13f1c0d55dd7d6558ac56af67efcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65c772c8de471aac6656302f71f038f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:a65c772c8de471aac6656302f71f038f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa353952ead7c2baf3751641612e89c43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:aa353952ead7c2baf3751641612e89c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2151407de5510c52548ffceae5e5b885"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a2151407de5510c52548ffceae5e5b885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b78c58124ece4349c63170c1b44c01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad9b78c58124ece4349c63170c1b44c01">MGCP_MAX_LINES</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:ad9b78c58124ece4349c63170c1b44c01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9be76578b86cb8cb1a5ff77887339f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a1d9be76578b86cb8cb1a5ff77887339f">MGCP_MAX_PACKET</a>&#160;&#160;&#160;1500</td></tr>
<tr class="separator:a1d9be76578b86cb8cb1a5ff77887339f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae91ce3a94c402c66cccb1775413a18ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ae91ce3a94c402c66cccb1775413a18ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda5b152975da98037175ed9f8678581"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:adda5b152975da98037175ed9f8678581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa25a625ec9a058c8a80ca0c032eb79fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa25a625ec9a058c8a80ca0c032eb79fd">MGCP_SUBCHANNEL_MAGIC</a>&#160;&#160;&#160;&quot;!978!&quot;</td></tr>
<tr class="separator:aa25a625ec9a058c8a80ca0c032eb79fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7497944617cefd7efbdaed6ac783b96c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a7497944617cefd7efbdaed6ac783b96c">MGCPDUMPER</a></td></tr>
<tr class="separator:a7497944617cefd7efbdaed6ac783b96c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee65942ab29aecd1dabbef2bde8532fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aee65942ab29aecd1dabbef2bde8532fa">RESPONSE_TIMEOUT</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:aee65942ab29aecd1dabbef2bde8532fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f20d4423bd07d07309cc38550b1232"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a72f20d4423bd07d07309cc38550b1232">SUB_ALT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a72f20d4423bd07d07309cc38550b1232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9523eb1c7c6620e8a9fddde066c2ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3f9523eb1c7c6620e8a9fddde066c2ff">SUB_REAL</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a3f9523eb1c7c6620e8a9fddde066c2ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe6753ebe7fd05e1561f837b71f81372"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:abe6753ebe7fd05e1561f837b71f81372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a600839d2c66608902c3f56afe39aa93a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a600839d2c66608902c3f56afe39aa93a">TYPE_TRUNK</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a600839d2c66608902c3f56afe39aa93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8420dba71b9cc240cf981b0bef892004"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a1c21a7cc1c881acba9b4a9a0f417827d">MGCP_CMD_EPCF</a>, 
<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>, 
<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a>, 
<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a>, 
<br />
&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a>, 
<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a1c0d8746fa91f15d83a3e5be1e1bb066">MGCP_CMD_NTFY</a>, 
<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a>, 
<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a603523ab4d2f56f9e15ec40068112cd4">MGCP_CMD_AUCX</a>, 
<br />
&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a5e9fb418d1b85d5ac00c66a4bf88b4e1">MGCP_CMD_RSIP</a>
<br />
 }</td></tr>
<tr class="separator:a8420dba71b9cc240cf981b0bef892004"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8b0bccb9299ef502eaa06af14553cc26"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8b0bccb9299ef502eaa06af14553cc26">__get_header</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int *start, char *def)</td></tr>
<tr class="separator:a8b0bccb9299ef502eaa06af14553cc26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7344ce8a58aaa288034af6bdab3cce8a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a> (struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw, char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a7344ce8a58aaa288034af6bdab3cce8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2f15da97a2869766f6f68baa644705"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2c2f15da97a2869766f6f68baa644705">acf_channel_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *funcname, char *preparse, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t buflen)</td></tr>
<tr class="separator:a2c2f15da97a2869766f6f68baa644705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b22aa1decf97fb693d7faaf40d159d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, const char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:a03b22aa1decf97fb693d7faaf40d159d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0aec7af9d830c447114c12ba64ddb76"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *resp, char *tone)</td></tr>
<tr class="separator:ad0aec7af9d830c447114c12ba64ddb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55728da81beaf6cc269fb0687cf17c0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *line)</td></tr>
<tr class="separator:af55728da81beaf6cc269fb0687cf17c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b0182993ca9de9c68d1f7b8efe0fc93"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *resp, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</td></tr>
<tr class="separator:a6b0182993ca9de9c68d1f7b8efe0fc93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a562cfa085ff927134b5bf4a66d68252c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a562cfa085ff927134b5bf4a66d68252c">add_var</a> (const char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *list)</td></tr>
<tr class="separator:a562cfa085ff927134b5bf4a66d68252c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa24102d36449253d49eeba61829faba7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa24102d36449253d49eeba61829faba7">attempt_transfer</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:aa24102d36449253d49eeba61829faba7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete an attended transfer.  <a href="#aa24102d36449253d49eeba61829faba7">More...</a><br /></td></tr>
<tr class="separator:aa24102d36449253d49eeba61829faba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec29f9b87b0e9bc597b47a29e4088df"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a5ec29f9b87b0e9bc597b47a29e4088df">build_gateway</a> (char *cat, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *v)</td></tr>
<tr class="memdesc:a5ec29f9b87b0e9bc597b47a29e4088df"><td class="mdescLeft">&#160;</td><td class="mdescRight">build_gateway: parse mgcp.conf and create gateway/endpoint structures  <a href="#a5ec29f9b87b0e9bc597b47a29e4088df">More...</a><br /></td></tr>
<tr class="separator:a5ec29f9b87b0e9bc597b47a29e4088df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a240fa2ebaa98bd76495b1cefde05660a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a240fa2ebaa98bd76495b1cefde05660a">control2str</a> (int ind)</td></tr>
<tr class="separator:a240fa2ebaa98bd76495b1cefde05660a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76dcacc87597b6291806619028378248"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a76dcacc87597b6291806619028378248">copy_vars</a> (struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *src)</td></tr>
<tr class="memdesc:a76dcacc87597b6291806619028378248"><td class="mdescLeft">&#160;</td><td class="mdescRight">duplicate a list of channel variables,  <a href="#a76dcacc87597b6291806619028378248">More...</a><br /></td></tr>
<tr class="separator:a76dcacc87597b6291806619028378248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b38b2c3a495dd4b14daa3db17835f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a12b38b2c3a495dd4b14daa3db17835f5">destroy_endpoint</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e)</td></tr>
<tr class="separator:a12b38b2c3a495dd4b14daa3db17835f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9033eb10a3d9e9fb3430e97936513ca4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a9033eb10a3d9e9fb3430e97936513ca4">destroy_gateway</a> (struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g)</td></tr>
<tr class="separator:a9033eb10a3d9e9fb3430e97936513ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d8db6086b4a18353b82ebcad631ff6"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a02d8db6086b4a18353b82ebcad631ff6">do_monitor</a> (void *data)</td></tr>
<tr class="separator:a02d8db6086b4a18353b82ebcad631ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f01254d84fdd62f43b4b656cb032ec2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a3f01254d84fdd62f43b4b656cb032ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">dump_cmd_queues: (SC:) cleanup pending commands  <a href="#a3f01254d84fdd62f43b4b656cb032ec2">More...</a><br /></td></tr>
<tr class="separator:a3f01254d84fdd62f43b4b656cb032ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a38013370afd038779d9d04ccd036a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a> (struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw, struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p)</td></tr>
<tr class="separator:a0a38013370afd038779d9d04ccd036a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a05327a93c400ab2a5f298a7ae84319"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a0a05327a93c400ab2a5f298a7ae84319">find_and_retrans</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req)</td></tr>
<tr class="separator:a0a05327a93c400ab2a5f298a7ae84319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898eefd6c79f1d611e305e8d634cd63c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a898eefd6c79f1d611e305e8d634cd63c">find_command</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> **queue, <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> *l, int ident)</td></tr>
<tr class="memdesc:a898eefd6c79f1d611e305e8d634cd63c"><td class="mdescLeft">&#160;</td><td class="mdescRight">find_command: (SC:) remove command transaction from queue  <a href="#a898eefd6c79f1d611e305e8d634cd63c">More...</a><br /></td></tr>
<tr class="separator:a898eefd6c79f1d611e305e8d634cd63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71936a98d3f90723af0726fdf4227a14"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a71936a98d3f90723af0726fdf4227a14">find_realtime_gw</a> (char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, char *at, struct sockaddr_in *sin)</td></tr>
<tr class="separator:a71936a98d3f90723af0726fdf4227a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b3dee1d5d35309cd652eedc070fa06"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a66b3dee1d5d35309cd652eedc070fa06">find_subchannel_and_lock</a> (char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int msgid, struct sockaddr_in *sin)</td></tr>
<tr class="separator:a66b3dee1d5d35309cd652eedc070fa06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0dbe9016b6c5b0013c4458036490275"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ab0dbe9016b6c5b0013c4458036490275">get_csv</a> (char *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, int *<a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, char **next)</td></tr>
<tr class="memdesc:ab0dbe9016b6c5b0013c4458036490275"><td class="mdescLeft">&#160;</td><td class="mdescRight">get_csv: (SC:) get comma separated value  <a href="#ab0dbe9016b6c5b0013c4458036490275">More...</a><br /></td></tr>
<tr class="separator:ab0dbe9016b6c5b0013c4458036490275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46c0493834ccd88aba03927a4ea8de9"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:af46c0493834ccd88aba03927a4ea8de9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5823b2253fc8592029745b345da3a2b8"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a5823b2253fc8592029745b345da3a2b8">get_sdp</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a5823b2253fc8592029745b345da3a2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63006d0afc2a1f9b609d023155216a20"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a63006d0afc2a1f9b609d023155216a20">get_sdp_by_line</a> (char *line, char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int nameLen)</td></tr>
<tr class="separator:a63006d0afc2a1f9b609d023155216a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3720d39975643ccc57f801b3a81de15"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af3720d39975643ccc57f801b3a81de15">get_sdp_iterate</a> (int *iterator, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:af3720d39975643ccc57f801b3a81de15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00daac1b8e56ab6dbf0ed4a263b2bd9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a00daac1b8e56ab6dbf0ed4a263b2bd9e">handle_hd_hf</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *ev)</td></tr>
<tr class="separator:a00daac1b8e56ab6dbf0ed4a263b2bd9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231b521c8437945d7e4dbf7426bd858b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a231b521c8437945d7e4dbf7426bd858b">handle_mgcp_audit_endpoint</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a231b521c8437945d7e4dbf7426bd858b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe11883f18bc88d3848c5a4e54297c9"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4fe11883f18bc88d3848c5a4e54297c9">handle_mgcp_set_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a4fe11883f18bc88d3848c5a4e54297c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add55a6f955812437eadb9eaee3138c66"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#add55a6f955812437eadb9eaee3138c66">handle_mgcp_show_endpoints</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:add55a6f955812437eadb9eaee3138c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9a8318cac4c0ccb4a92fa6647987d18"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae9a8318cac4c0ccb4a92fa6647987d18">handle_request</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, struct sockaddr_in *sin)</td></tr>
<tr class="separator:ae9a8318cac4c0ccb4a92fa6647987d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40770b14c1a879ee5a9c97d295993f3f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a40770b14c1a879ee5a9c97d295993f3f">handle_response</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, int <a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, unsigned int ident, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *resp)</td></tr>
<tr class="separator:a40770b14c1a879ee5a9c97d295993f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addb3b44d41caa7edff0950888eb4f383"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p)</td></tr>
<tr class="separator:addb3b44d41caa7edff0950888eb4f383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b883bc27f1be3a07781311388e6fd9a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4b883bc27f1be3a07781311388e6fd9a">init_req</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *verb, unsigned int oseq)</td></tr>
<tr class="separator:a4b883bc27f1be3a07781311388e6fd9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3926d890595f96ea9611a71a7eaa848f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3926d890595f96ea9611a71a7eaa848f">init_resp</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *resp, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *orig, char *resprest)</td></tr>
<tr class="separator:a3926d890595f96ea9611a71a7eaa848f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="memdesc:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the module.  <a href="#ac3382bf6da54c56b37069bd76bbdf4f9">More...</a><br /></td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5c2da288e4f4ede7a4fd124d80418c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6a5c2da288e4f4ede7a4fd124d80418c">mgcp_alloc_pktcgate</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a6a5c2da288e4f4ede7a4fd124d80418c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70d80a91ee73bc3da30ffa7fc319d240"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a70d80a91ee73bc3da30ffa7fc319d240">mgcp_answer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:a70d80a91ee73bc3da30ffa7fc319d240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65efb43f278337f3340eb6e33b7f9f3f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a65efb43f278337f3340eb6e33b7f9f3f">mgcp_call</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const char *dest, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="separator:a65efb43f278337f3340eb6e33b7f9f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab55153adaa59725bf7e35849a9711203"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ab55153adaa59725bf7e35849a9711203">mgcp_devicestate</a> (const char *data)</td></tr>
<tr class="memdesc:ab55153adaa59725bf7e35849a9711203"><td class="mdescLeft">&#160;</td><td class="mdescRight">mgcp_devicestate: channel callback for device status monitoring  <a href="#ab55153adaa59725bf7e35849a9711203">More...</a><br /></td></tr>
<tr class="separator:ab55153adaa59725bf7e35849a9711203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab375681bc4e257fcaeba3d880143029"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aab375681bc4e257fcaeba3d880143029">mgcp_fixup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *oldchan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *newchan)</td></tr>
<tr class="separator:aab375681bc4e257fcaeba3d880143029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81dee707cf273647eda24960f6bb439"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae81dee707cf273647eda24960f6bb439">mgcp_get_codec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</td></tr>
<tr class="separator:ae81dee707cf273647eda24960f6bb439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31b359cc65d84831e2dfac689635217"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae31b359cc65d84831e2dfac689635217">mgcp_get_rtp_peer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **instance)</td></tr>
<tr class="separator:ae31b359cc65d84831e2dfac689635217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae8128b8f746eb5147d49c0b8b90d20"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#acae8128b8f746eb5147d49c0b8b90d20">mgcp_hangup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:acae8128b8f746eb5147d49c0b8b90d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2106376b4c2e20aae749c5dddb2e6340"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2106376b4c2e20aae749c5dddb2e6340">mgcp_indicate</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, int ind, const void *data, size_t datalen)</td></tr>
<tr class="separator:a2106376b4c2e20aae749c5dddb2e6340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd23440bf4f6550a2a21b7498c258f10"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#acd23440bf4f6550a2a21b7498c258f10">mgcp_new</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, int <a class="el" href="../../d4/d88/structstate.html">state</a>, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor)</td></tr>
<tr class="separator:acd23440bf4f6550a2a21b7498c258f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c5b4c772daf9564a5873da18e5e3d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ac9c5b4c772daf9564a5873da18e5e3d8">mgcp_pktcgate_open</a> (struct <a class="el" href="../../db/da2/structcops__gate.html">cops_gate</a> *gate)</td></tr>
<tr class="separator:ac9c5b4c772daf9564a5873da18e5e3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb11ee28d000779a5e9525784072e810"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#abb11ee28d000779a5e9525784072e810">mgcp_pktcgate_remove</a> (struct <a class="el" href="../../db/da2/structcops__gate.html">cops_gate</a> *gate)</td></tr>
<tr class="separator:abb11ee28d000779a5e9525784072e810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af072ea217a7fb31eb08de9edfdfbbebe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af072ea217a7fb31eb08de9edfdfbbebe">mgcp_postrequest</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned int seqno)</td></tr>
<tr class="separator:af072ea217a7fb31eb08de9edfdfbbebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d28a19344022f12bddcd7f3a01e59de"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a7d28a19344022f12bddcd7f3a01e59de">mgcp_prune_realtime_gateway</a> (struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g)</td></tr>
<tr class="separator:a7d28a19344022f12bddcd7f3a01e59de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06fc1b4a43dbe0326aca85f9242759c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a06fc1b4a43dbe0326aca85f9242759c1">mgcp_queue_control</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, int control)</td></tr>
<tr class="separator:a06fc1b4a43dbe0326aca85f9242759c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a1037f8c24ba97837b6f91d87aa88b7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3a1037f8c24ba97837b6f91d87aa88b7">mgcp_queue_frame</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="separator:a3a1037f8c24ba97837b6f91d87aa88b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f3b129ca45af64249c42597b5b414f8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a5f3b129ca45af64249c42597b5b414f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf002630286080c18671a086c9ddf295"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#abf002630286080c18671a086c9ddf295">mgcp_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:abf002630286080c18671a086c9ddf295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77cdf1904a692082f9ddf294576da000"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a77cdf1904a692082f9ddf294576da000">mgcp_reload</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a77cdf1904a692082f9ddf294576da000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0005d576f7ab2779a0e7c342574fe504"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a0005d576f7ab2779a0e7c342574fe504">mgcp_request</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, const char *dest, int *cause)</td></tr>
<tr class="separator:a0005d576f7ab2779a0e7c342574fe504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c0290e2918f7caff37d4349b7309cd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa9c0290e2918f7caff37d4349b7309cd">mgcp_rtp_read</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:aa9c0290e2918f7caff37d4349b7309cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d9cab0b2c487a9b622b3accac5b16e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80d9cab0b2c487a9b622b3accac5b16e">mgcp_senddigit_begin</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="separator:a80d9cab0b2c487a9b622b3accac5b16e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f5159e438f61d22c89a40523becc95"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae2f5159e438f61d22c89a40523becc95">mgcp_senddigit_end</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, unsigned int duration)</td></tr>
<tr class="separator:ae2f5159e438f61d22c89a40523becc95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e2e689ac1f43d50401a1a89adb8024c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a6e2e689ac1f43d50401a1a89adb8024c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1babad7069f432ba27ac4d9bf0c3ec2d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a1babad7069f432ba27ac4d9bf0c3ec2d">mgcp_set_rtp_peer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *vrtp, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *trtp, const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, int nat_active)</td></tr>
<tr class="separator:a1babad7069f432ba27ac4d9bf0c3ec2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a214f94866cb7db3e8fadf80f65fa3735"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a214f94866cb7db3e8fadf80f65fa3735">mgcp_ss</a> (void *data)</td></tr>
<tr class="separator:a214f94866cb7db3e8fadf80f65fa3735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d90ca1dfabffed58641a6bfd395aacc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a5d90ca1dfabffed58641a6bfd395aacc">mgcp_write</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:a5d90ca1dfabffed58641a6bfd395aacc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f5a30d4c4b7e2493e65dd465702233"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a79f5a30d4c4b7e2493e65dd465702233">mgcpsock_read</a> (int *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, int fd, short <a class="el" href="../../d2/d4d/astman_8c.html#a271a8325aeaad3b77ff2387c788af2b3">events</a>, void *ignore)</td></tr>
<tr class="separator:a79f5a30d4c4b7e2493e65dd465702233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e006acff60d9b3d65d7d60f975d6747"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req)</td></tr>
<tr class="separator:a2e006acff60d9b3d65d7d60f975d6747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd3cd797ea85acf54242aba8e966a37c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#acd3cd797ea85acf54242aba8e966a37c">process_sdp</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req)</td></tr>
<tr class="separator:acd3cd797ea85acf54242aba8e966a37c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97203c0950af78c3a4eecfae70ed9e6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa97203c0950af78c3a4eecfae70ed9e6">prune_gateways</a> (void)</td></tr>
<tr class="separator:aa97203c0950af78c3a4eecfae70ed9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1982509765f4870f1f63412a53ea668"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> (void)</td></tr>
<tr class="separator:ad1982509765f4870f1f63412a53ea668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b50e3739970f82175c130c5194c544f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a1b50e3739970f82175c130c5194c544f">reload_config</a> (int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</td></tr>
<tr class="separator:a1b50e3739970f82175c130c5194c544f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e1453e885395a3e5c5efe295bd3a0c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, char *verb)</td></tr>
<tr class="separator:af9e1453e885395a3e5c5efe295bd3a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c93589a31d76bb87e91227b12e8aa0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae4c93589a31d76bb87e91227b12e8aa0">resend_response</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d9/d89/structmgcp__response.html">mgcp_response</a> *resp)</td></tr>
<tr class="separator:ae4c93589a31d76bb87e91227b12e8aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a022a74386a7546989a66b6232c1610fe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a022a74386a7546989a66b6232c1610fe">respprep</a> (struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *resp, struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, char *msg, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *msgrest)</td></tr>
<tr class="separator:a022a74386a7546989a66b6232c1610fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83af94bb19a421cb25ca02d16fa5ba9c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a> (void)</td></tr>
<tr class="separator:a83af94bb19a421cb25ca02d16fa5ba9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44e12256095b8a352dbf49879ffa2aa9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a44e12256095b8a352dbf49879ffa2aa9">retrans_pkt</a> (const void *data)</td></tr>
<tr class="separator:a44e12256095b8a352dbf49879ffa2aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d036cbd077230f51bec5020ec1d2515"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a7d036cbd077230f51bec5020ec1d2515">sdpLineNum_iterator_init</a> (int *iterator)</td></tr>
<tr class="separator:a7d036cbd077230f51bec5020ec1d2515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a6a6850587a7e603325f2c966bb1c94"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, unsigned int seqno)</td></tr>
<tr class="separator:a2a6a6850587a7e603325f2c966bb1c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e0058277f64c9c49ef84001dc20125"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ac9e0058277f64c9c49ef84001dc20125">send_response</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req)</td></tr>
<tr class="separator:ac9e0058277f64c9c49ef84001dc20125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b9cd6deb29a58ba6c432767d314a35"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a36b9cd6deb29a58ba6c432767d314a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a378d1872f2d3bc625940d17905c23621"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p)</td></tr>
<tr class="separator:a378d1872f2d3bc625940d17905c23621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb710ae845ca80cab81479ca2ce8ee3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a9cb710ae845ca80cab81479ca2ce8ee3">transmit_connect</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a9cb710ae845ca80cab81479ca2ce8ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01667d3dd97c237d1aeeeb3e1a3ce1eb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a01667d3dd97c237d1aeeeb3e1a3ce1eb">transmit_connect_with_sdp</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</td></tr>
<tr class="separator:a01667d3dd97c237d1aeeeb3e1a3ce1eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac141c0eb38c44bc9d1d69633a8deed8a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:ac141c0eb38c44bc9d1d69633a8deed8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab497914e23cbc14cd4dcde87fe1e5fc7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ab497914e23cbc14cd4dcde87fe1e5fc7">transmit_connection_del_w_params</a> (struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p, char *callid, char *cxident)</td></tr>
<tr class="separator:ab497914e23cbc14cd4dcde87fe1e5fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065f650bbf31f5b322e9dc5008361ee4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a065f650bbf31f5b322e9dc5008361ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2843e30c260fbe5d077107ad06f0a99e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *<a class="el" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>)</td></tr>
<tr class="separator:a2843e30c260fbe5d077107ad06f0a99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3604c82917827339e10a2a1455f84e7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *tone)</td></tr>
<tr class="separator:a3604c82917827339e10a2a1455f84e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5d290a73d1b60bff6968dbab9280762"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af5d290a73d1b60bff6968dbab9280762">transmit_notify_request_with_callerid</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *tone, char *callernum, char *callername)</td></tr>
<tr class="separator:af5d290a73d1b60bff6968dbab9280762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ffeecdfdba40964baaa4f3fc81990a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, char *msg, struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req, char *msgrest)</td></tr>
<tr class="separator:a4ffeecdfdba40964baaa4f3fc81990a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3040087acee789a9300e4103c1c9170d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3040087acee789a9300e4103c1c9170d">unalloc_sub</a> (struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a3040087acee789a9300e4103c1c9170d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Media Gateway Control Protocol (MGCP)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .reload = reload, .load_pri = AST_MODPRI_CHANNEL_DRIVER, .optional_modules = &quot;res_pktccops&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d084b82cb21102ba46ea60d3cd9c085"><td class="memItemLeft" align="right" valign="top">static struct in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a></td></tr>
<tr class="separator:a1d084b82cb21102ba46ea60d3cd9c085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfee50d07a98645d4d20b896ce03785a"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a> [<a class="el" href="../../d5/d7b/channel_8h.html#aa5a0589e78ac9e010524872ca0a3cf49">AST_MAX_ACCOUNT_CODE</a>] = &quot;&quot;</td></tr>
<tr class="separator:adfee50d07a98645d4d20b896ce03785a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61fbadf21e15a109d0703a01e0302535"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a61fbadf21e15a109d0703a01e0302535">adsi</a> = 0</td></tr>
<tr class="separator:a61fbadf21e15a109d0703a01e0302535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2cfb0f821c065261382a9298bb5a16b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a> = 0</td></tr>
<tr class="separator:ad2cfb0f821c065261382a9298bb5a16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec29229510a2e3ea6ce34d520f06e90"><td class="memItemLeft" align="right" valign="top">static struct sockaddr_in&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a></td></tr>
<tr class="separator:a4ec29229510a2e3ea6ce34d520f06e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9a1904e14c83a51df312f22eb7edd24"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a> = 0</td></tr>
<tr class="separator:ae9a1904e14c83a51df312f22eb7edd24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ea1ecd6da04bb18650fe24943d23d1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = 0</td></tr>
<tr class="separator:a50ea1ecd6da04bb18650fe24943d23d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef81e9f93aaf81a1523a89dd1c54e41f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a> = 0</td></tr>
<tr class="separator:aef81e9f93aaf81a1523a89dd1c54e41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5a89f9bee15a492c760ec1765a292d"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a> [<a class="el" href="../../d4/dc5/extconf_8c.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = &quot;&quot;</td></tr>
<tr class="separator:ade5a89f9bee15a492c760ec1765a292d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e973bd94bfbaf59d939bd1bc988c32"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a> [<a class="el" href="../../d4/dc5/extconf_8c.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = &quot;&quot;</td></tr>
<tr class="separator:a29e973bd94bfbaf59d939bd1bc988c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27906b68ca8f19bcfd5b7aadb38088f1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a> []</td></tr>
<tr class="separator:a27906b68ca8f19bcfd5b7aadb38088f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee8d742a1fbcff45f97842b92952610"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a9ee8d742a1fbcff45f97842b92952610">config</a> [] = &quot;mgcp.conf&quot;</td></tr>
<tr class="separator:a9ee8d742a1fbcff45f97842b92952610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579ca8125bbf48d9ce8691d522f99933"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a> [<a class="el" href="../../d4/dc5/extconf_8c.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = &quot;default&quot;</td></tr>
<tr class="separator:a579ca8125bbf48d9ce8691d522f99933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd6d5e9dbc1847bd75eff9dd5575d81"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2dd6d5e9dbc1847bd75eff9dd5575d81">cur_callergroup</a> = 0</td></tr>
<tr class="separator:a2dd6d5e9dbc1847bd75eff9dd5575d81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a880aaf7c34c94d45e515f7b6dc3f70ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a880aaf7c34c94d45e515f7b6dc3f70ed">cur_pickupgroup</a> = 0</td></tr>
<tr class="separator:a880aaf7c34c94d45e515f7b6dc3f70ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8d5920e90ccbad7832926becdadb29"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/dba/structast__jb__conf.html">ast_jb_conf</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2d8d5920e90ccbad7832926becdadb29">default_jbconf</a></td></tr>
<tr class="separator:a2d8d5920e90ccbad7832926becdadb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dc9b8afbbd709a0af68f33b1db740d9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a> = <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa4035ee22ac338e5157dd3cd946c3bfb">DIRECTMEDIA</a></td></tr>
<tr class="separator:a5dc9b8afbbd709a0af68f33b1db740d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5a76746e3addb17a93a158017c2273"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = 0</td></tr>
<tr class="separator:a0e5a76746e3addb17a93a158017c2273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3be8e865f060b68db4d7c966489e0a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a> = 16000</td></tr>
<tr class="separator:afd3be8e865f060b68db4d7c966489e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af82a4123dab30be1c6d2faf55192fdd5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:af82a4123dab30be1c6d2faf55192fdd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">gatelock: mutex for gateway/endpoint lists  <a href="#af82a4123dab30be1c6d2faf55192fdd5">More...</a><br /></td></tr>
<tr class="separator:af82a4123dab30be1c6d2faf55192fdd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b5a6c19089cc4148215c9f3203f589"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a80b5a6c19089cc4148215c9f3203f589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa319ef1606201db158ce7195fb8eed45"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa319ef1606201db158ce7195fb8eed45">gendigittimeout</a> = 8000</td></tr>
<tr class="separator:aa319ef1606201db158ce7195fb8eed45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7c36bd66937d520024416d67defab0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></td></tr>
<tr class="separator:afc7c36bd66937d520024416d67defab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaabcb7f4349cc632dde3af5c6a5e1bd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/dba/structast__jb__conf.html">ast_jb_conf</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a></td></tr>
<tr class="separator:abaabcb7f4349cc632dde3af5c6a5e1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc859a22440f2b11c5f95d83d4f93362"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#adc859a22440f2b11c5f95d83d4f93362">hangupongateremove</a> = 0</td></tr>
<tr class="separator:adc859a22440f2b11c5f95d83d4f93362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad380fd38219b013f5a77dfd26147ddfa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a> = 0</td></tr>
<tr class="separator:ad380fd38219b013f5a77dfd26147ddfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda48311b6abe5a4dd8b6904ddde0a6d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d55/structio__context.html">io_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></td></tr>
<tr class="separator:abda48311b6abe5a4dd8b6904ddde0a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf416dc058363e2fd5750c77e2d78bee"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a> [<a class="el" href="../../d5/d7b/channel_8h.html#a9238c3318ae8d3bea2cbbe1d1e459eb7">MAX_LANGUAGE</a>] = &quot;&quot;</td></tr>
<tr class="separator:adf416dc058363e2fd5750c77e2d78bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b49cafa2a3d359a2e865992f551874a"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a> [<a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gad739ea26c060ff7a2195107b53f9715c">AST_MAX_MAILBOX_UNIQUEID</a>]</td></tr>
<tr class="separator:a6b49cafa2a3d359a2e865992f551874a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24514343553b05c66e5b7d16e2df45cc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a24514343553b05c66e5b7d16e2df45cc">matchdigittimeout</a> = 3000</td></tr>
<tr class="separator:a24514343553b05c66e5b7d16e2df45cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced6554217c497a494152c997866c6de"><td class="memItemLeft" align="right" valign="top">static const char *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a> []</td></tr>
<tr class="separator:aced6554217c497a494152c997866c6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a641fafb6e5bea7d8db5ed5641f47f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:aa4a641fafb6e5bea7d8db5ed5641f47f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2671cbe3684e201b2b8e7d777164008b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a> = 0</td></tr>
<tr class="separator:a2671cbe3684e201b2b8e7d777164008b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f7b42819bf8c9194e8a30107b3df42d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8f7b42819bf8c9194e8a30107b3df42d">mgcp_rtp_glue</a></td></tr>
<tr class="separator:a8f7b42819bf8c9194e8a30107b3df42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cdf7ea5a854eb95bea098cee0286af0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a></td></tr>
<tr class="separator:a4cdf7ea5a854eb95bea098cee0286af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f842af31e501d288c3ced6611e5baab"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8f842af31e501d288c3ced6611e5baab">mgcpdebug</a> = 0</td></tr>
<tr class="separator:a8f842af31e501d288c3ced6611e5baab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab46ad0a5ec68458d6b2054606757e202"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> = -1</td></tr>
<tr class="separator:ab46ad0a5ec68458d6b2054606757e202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9650dde3ce810fc64493b0b2b0e81209"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a9650dde3ce810fc64493b0b2b0e81209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd6fc6e0ab3c1a04a518f19c21d4503"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:afbd6fc6e0ab3c1a04a518f19c21d4503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4816e76bb1382481a5941ac7057bef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:aae4816e76bb1382481a5941ac7057bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc34958c9b03014779727e5ca61b93e5"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a> [<a class="el" href="../../d5/d7b/channel_8h.html#afb2ae2e53d6676f3ca44a98aa3f92a2c">MAX_MUSICCLASS</a>] = &quot;&quot;</td></tr>
<tr class="separator:abc34958c9b03014779727e5ca61b93e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada540a5f25f7302dc1a3d17ccfa59b10"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a> = 0</td></tr>
<tr class="separator:ada540a5f25f7302dc1a3d17ccfa59b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6dbd425fcb4ee2ef192af2e2d0c284"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> = 0</td></tr>
<tr class="separator:a1c6dbd425fcb4ee2ef192af2e2d0c284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd10144dcba02df71f1170c333685d87"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:afd10144dcba02df71f1170c333685d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e270ee42ff478a275294762aa0e195"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a08e270ee42ff478a275294762aa0e195">nonCodecCapability</a> = <a class="el" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></td></tr>
<tr class="separator:a08e270ee42ff478a275294762aa0e195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1e469899e7d30ca0210a1b3d195c8e"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#afe1e469899e7d30ca0210a1b3d195c8e">oseq_global</a> = 0</td></tr>
<tr class="separator:afe1e469899e7d30ca0210a1b3d195c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3902d7fb25307330eee84331320776cb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3902d7fb25307330eee84331320776cb">oseq_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:a3902d7fb25307330eee84331320776cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d857a26518d3787a893c9ab433ddb4d"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8d857a26518d3787a893c9ab433ddb4d">ourhost</a> [<a class="el" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>]</td></tr>
<tr class="separator:a8d857a26518d3787a893c9ab433ddb4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7821b54b29c7b74aba79884f13b3ec03"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a7821b54b29c7b74aba79884f13b3ec03">ourport</a></td></tr>
<tr class="separator:a7821b54b29c7b74aba79884f13b3ec03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b31bfcc769a5b5c31e13aa6d8a9a286"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a> [<a class="el" href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a>]</td></tr>
<tr class="separator:a6b31bfcc769a5b5c31e13aa6d8a9a286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a9f50ad99a5568e185a540270296d9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a> = 0</td></tr>
<tr class="separator:a47a9f50ad99a5568e185a540270296d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a585e8d22d599bb4f067e383f5c1f72"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:ae91dad65f553f7afebe4af507803bc7f"><td class="memItemLeft" >&#160;&#160;&#160;unsigned int&#160;&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a></td></tr>
<tr class="separator:ae91dad65f553f7afebe4af507803bc7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2114722f6cb731593296a831290a7d"><td class="memItemLeft" >&#160;&#160;&#160;unsigned int&#160;&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a3e2114722f6cb731593296a831290a7d">cos_audio</a></td></tr>
<tr class="separator:a3e2114722f6cb731593296a831290a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a9305efab3b493ca2519562fcec3d5"><td class="memItemLeft" >&#160;&#160;&#160;unsigned int&#160;&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a></td></tr>
<tr class="separator:a25a9305efab3b493ca2519562fcec3d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ecad4a80d0e6f5b8ec6ab4c44021d18"><td class="memItemLeft" >&#160;&#160;&#160;unsigned int&#160;&#160;&#160;<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a1ecad4a80d0e6f5b8ec6ab4c44021d18">tos_audio</a></td></tr>
<tr class="separator:a1ecad4a80d0e6f5b8ec6ab4c44021d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a585e8d22d599bb4f067e383f5c1f72"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a> = { 0, 0, 0, 0 }</td></tr>
<tr class="separator:a8a585e8d22d599bb4f067e383f5c1f72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b448e9abcfc301602a2573a662d3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a></td></tr>
<tr class="separator:a361b448e9abcfc301602a2573a662d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36fbfdd2c2eb8b68a37674faeeab0b9b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a> = 0</td></tr>
<tr class="separator:a36fbfdd2c2eb8b68a37674faeeab0b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bf83036d0252d0189adbf610a003f8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a> = 0</td></tr>
<tr class="separator:a00bf83036d0252d0189adbf610a003f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71535bf985a1a06d548fd73a0a0ec32c"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a71535bf985a1a06d548fd73a0a0ec32c">tdesc</a> [] = &quot;Media Gateway Control Protocol (MGCP)&quot;</td></tr>
<tr class="separator:a71535bf985a1a06d548fd73a0a0ec32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a246239c2435a2638427e404e8c0ba9c7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a> = 0</td></tr>
<tr class="separator:a246239c2435a2638427e404e8c0ba9c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9caa677def8fa97666646d9e2e607b7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a> = 0</td></tr>
<tr class="separator:a9caa677def8fa97666646d9e2e607b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of Media Gateway Control Protocol. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a438d71fb32f283ee86c371ecad489900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a438d71fb32f283ee86c371ecad489900">&#9670;&nbsp;</a></span>DEFAULT_EXPIRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_EXPIRY&#160;&#160;&#160;120</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00096">96</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a3c8790d2031538c7eefd0310e5418f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c8790d2031538c7eefd0310e5418f1d">&#9670;&nbsp;</a></span>DEFAULT_MGCP_CA_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MGCP_CA_PORT&#160;&#160;&#160;2727</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>From RFC 2705 </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00124">124</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="afefdc3bf5bfafd4d2cc5565058b56bec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afefdc3bf5bfafd4d2cc5565058b56bec">&#9670;&nbsp;</a></span>DEFAULT_MGCP_GW_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_MGCP_GW_PORT&#160;&#160;&#160;2427</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>From RFC 2705 </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00123">123</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a67ddc3c82f9dfef47f17b23ef3874d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ddc3c82f9dfef47f17b23ef3874d8a">&#9670;&nbsp;</a></span>DEFAULT_RETRANS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RETRANS&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>How frequently to retransmit </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00126">126</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04275">__sip_reliable_xmit()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">mgcp_postrequest()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04041">retrans_pkt()</a>.</p>

</div>
</div>
<a id="aa4035ee22ac338e5157dd3cd946c3bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4035ee22ac338e5157dd3cd946c3bfb">&#9670;&nbsp;</a></span>DIRECTMEDIA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIRECTMEDIA&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00098">98</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a3d2472d6cf31b73eeb829110dd0fffea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2472d6cf31b73eeb829110dd0fffea">&#9670;&nbsp;</a></span>INADDR_NONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INADDR_NONE&#160;&#160;&#160;(in_addr_t)(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00101">101</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a045bcf6c026ff7ae2af603f67cd81c5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a045bcf6c026ff7ae2af603f67cd81c5b">&#9670;&nbsp;</a></span>MAX_EXPIRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_EXPIRY&#160;&#160;&#160;3600</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00097">97</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a24011ca9a966394f014bea9662713532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24011ca9a966394f014bea9662713532">&#9670;&nbsp;</a></span>MAX_RETRANS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RETRANS&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try only 5 times for retransmissions </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00127">127</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00644">retrans_pkt()</a>.</p>

</div>
</div>
<a id="a4cecb71b936e9c443f548540fb7a54ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cecb71b936e9c443f548540fb7a54ff">&#9670;&nbsp;</a></span>MAX_SUBS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SUBS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">291</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03760">mgcp_prune_realtime_gateway()</a>.</p>

</div>
</div>
<a id="a144946cf986fb7fcff705810fe14a312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a144946cf986fb7fcff705810fe14a312">&#9670;&nbsp;</a></span>MGCP_CX_CONF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_CONF&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00133">133</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>.</p>

</div>
</div>
<a id="a5f5e59d6a075eb206f5986b02f27d5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f5e59d6a075eb206f5986b02f27d5f0">&#9670;&nbsp;</a></span>MGCP_CX_CONFERENCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_CONFERENCE&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00134">134</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a867a1a8b1db505bd0edac7dc85e2627b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a867a1a8b1db505bd0edac7dc85e2627b">&#9670;&nbsp;</a></span>MGCP_CX_INACTIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_INACTIVE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">136</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">unalloc_sub()</a>.</p>

</div>
</div>
<a id="a06ad84ee9923fcd4a1a250eb508e76bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ad84ee9923fcd4a1a250eb508e76bd">&#9670;&nbsp;</a></span>MGCP_CX_MUTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_MUTE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00135">135</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>.</p>

</div>
</div>
<a id="a583a184d797fe6db5a861d72615c2996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a583a184d797fe6db5a861d72615c2996">&#9670;&nbsp;</a></span>MGCP_CX_RECVONLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_RECVONLY&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">131</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>.</p>

</div>
</div>
<a id="a405bd9ba85222251a3306c1b0098238e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a405bd9ba85222251a3306c1b0098238e">&#9670;&nbsp;</a></span>MGCP_CX_SENDONLY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_SENDONLY&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MGCP rtp stream modes { </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00130">130</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="ab670737ce602b7e5f077d5f508479b71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab670737ce602b7e5f077d5f508479b71">&#9670;&nbsp;</a></span>MGCP_CX_SENDRECV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_CX_SENDRECV&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">132</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01156">mgcp_answer()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>.</p>

</div>
</div>
<a id="aecb13f1c0d55dd7d6558ac56af67efcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb13f1c0d55dd7d6558ac56af67efcd">&#9670;&nbsp;</a></span>MGCP_DTMF_HYBRID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_DTMF_HYBRID&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">121</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">add_header_offhook()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01298">mgcp_senddigit_begin()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01319">mgcp_senddigit_end()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>.</p>

</div>
</div>
<a id="a65c772c8de471aac6656302f71f038f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65c772c8de471aac6656302f71f038f4">&#9670;&nbsp;</a></span>MGCP_DTMF_INBAND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_DTMF_INBAND&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">120</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">add_header_offhook()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01181">mgcp_rtp_read()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01298">mgcp_senddigit_begin()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01319">mgcp_senddigit_end()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>.</p>

</div>
</div>
<a id="aa353952ead7c2baf3751641612e89c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa353952ead7c2baf3751641612e89c43">&#9670;&nbsp;</a></span>MGCP_DTMF_RFC2833</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_DTMF_RFC2833&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">119</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01181">mgcp_rtp_read()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01298">mgcp_senddigit_begin()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01319">mgcp_senddigit_end()</a>.</p>

</div>
</div>
<a id="a2151407de5510c52548ffceae5e5b885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2151407de5510c52548ffceae5e5b885">&#9670;&nbsp;</a></span>MGCP_MAX_HEADERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_MAX_HEADERS&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The private structures of the mgcp channels are linked for selecting outgoing channels </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">250</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02128">init_req()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02110">init_resp()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>.</p>

</div>
</div>
<a id="ad9b78c58124ece4349c63170c1b44c01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9b78c58124ece4349c63170c1b44c01">&#9670;&nbsp;</a></span>MGCP_MAX_LINES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_MAX_LINES&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00251">251</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02087">add_line()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>.</p>

</div>
</div>
<a id="a1d9be76578b86cb8cb1a5ff77887339f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d9be76578b86cb8cb1a5ff77887339f">&#9670;&nbsp;</a></span>MGCP_MAX_PACKET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_MAX_PACKET&#160;&#160;&#160;1500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Also from RFC 2543, should sub headers tho </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00125">125</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="ae91ce3a94c402c66cccb1775413a18ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae91ce3a94c402c66cccb1775413a18ab">&#9670;&nbsp;</a></span>MGCP_OFFHOOK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_OFFHOOK&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">327</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>

</div>
</div>
<a id="adda5b152975da98037175ed9f8678581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adda5b152975da98037175ed9f8678581">&#9670;&nbsp;</a></span>MGCP_ONHOOK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_ONHOOK&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">326</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>

</div>
</div>
<a id="aa25a625ec9a058c8a80ca0c032eb79fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa25a625ec9a058c8a80ca0c032eb79fd">&#9670;&nbsp;</a></span>MGCP_SUBCHANNEL_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCP_SUBCHANNEL_MAGIC&#160;&#160;&#160;&quot;!978!&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>subchannel magic string. Needed to prove that any subchannel pointer passed by asterisk really points to a valid subchannel memory area. Ugly.. But serves the purpose for the time being. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00302">302</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>.</p>

</div>
</div>
<a id="a7497944617cefd7efbdaed6ac783b96c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7497944617cefd7efbdaed6ac783b96c">&#9670;&nbsp;</a></span>MGCPDUMPER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MGCPDUMPER</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00095">95</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="aee65942ab29aecd1dabbef2bde8532fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee65942ab29aecd1dabbef2bde8532fa">&#9670;&nbsp;</a></span>RESPONSE_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RESPONSE_TIMEOUT&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>in seconds </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00281">281</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03639">find_and_retrans()</a>.</p>

</div>
</div>
<a id="a72f20d4423bd07d07309cc38550b1232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f20d4423bd07d07309cc38550b1232">&#9670;&nbsp;</a></span>SUB_ALT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUB_ALT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00294">294</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a3f9523eb1c7c6620e8a9fddde066c2ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f9523eb1c7c6620e8a9fddde066c2ff">&#9670;&nbsp;</a></span>SUB_REAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUB_REAL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00293">293</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="abe6753ebe7fd05e1561f837b71f81372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe6753ebe7fd05e1561f837b71f81372">&#9670;&nbsp;</a></span>TYPE_LINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TYPE_LINE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">330</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>.</p>

</div>
</div>
<a id="a600839d2c66608902c3f56afe39aa93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a600839d2c66608902c3f56afe39aa93a">&#9670;&nbsp;</a></span>TYPE_TRUNK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TYPE_TRUNK&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00329">329</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a8420dba71b9cc240cf981b0bef892004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8420dba71b9cc240cf981b0bef892004">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a1c21a7cc1c881acba9b4a9a0f417827d"></a>MGCP_CMD_EPCF&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b"></a>MGCP_CMD_CRCX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30"></a>MGCP_CMD_MDCX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76"></a>MGCP_CMD_DLCX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3"></a>MGCP_CMD_RQNT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a1c0d8746fa91f15d83a3e5be1e1bb066"></a>MGCP_CMD_NTFY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9"></a>MGCP_CMD_AUEP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a603523ab4d2f56f9e15ec40068112cd4"></a>MGCP_CMD_AUCX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8420dba71b9cc240cf981b0bef892004a5e9fb418d1b85d5ac00c66a4bf88b4e1"></a>MGCP_CMD_RSIP&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00147">147</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;     {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a1c21a7cc1c881acba9b4a9a0f417827d">MGCP_CMD_EPCF</a>,</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a>,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a>,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a>,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a1c0d8746fa91f15d83a3e5be1e1bb066">MGCP_CMD_NTFY</a>,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a>,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a603523ab4d2f56f9e15ec40068112cd4">MGCP_CMD_AUCX</a>,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a5e9fb418d1b85d5ac00c66a4bf88b4e1">MGCP_CMD_RSIP</a></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;};</div><div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a603523ab4d2f56f9e15ec40068112cd4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a603523ab4d2f56f9e15ec40068112cd4">MGCP_CMD_AUCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00155">chan_mgcp.c:155</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">chan_mgcp.c:149</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00154">chan_mgcp.c:154</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">chan_mgcp.c:150</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a1c0d8746fa91f15d83a3e5be1e1bb066"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a1c0d8746fa91f15d83a3e5be1e1bb066">MGCP_CMD_NTFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00153">chan_mgcp.c:153</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a5e9fb418d1b85d5ac00c66a4bf88b4e1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a5e9fb418d1b85d5ac00c66a4bf88b4e1">MGCP_CMD_RSIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00156">chan_mgcp.c:156</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a1c21a7cc1c881acba9b4a9a0f417827d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a1c21a7cc1c881acba9b4a9a0f417827d">MGCP_CMD_EPCF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00148">chan_mgcp.c:148</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">chan_mgcp.c:152</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">chan_mgcp.c:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8b0bccb9299ef502eaa06af14553cc26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b0bccb9299ef502eaa06af14553cc26">&#9670;&nbsp;</a></span>__get_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* __get_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01635">1635</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">mgcp_request::header</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">mgcp_request::headers</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01655">get_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;{</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keywordtype">char</span> *r;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   <span class="keywordflow">for</span> (x = *start; x &lt; req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>; x++) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[x], <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, len) &amp;&amp;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;          (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[x][len] == <span class="charliteral">&#39;:&#39;</span>)) {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         r = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[x] + len + 1;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;         <span class="keywordflow">while</span> (*r &amp;&amp; (*r &lt; 33)) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            r++;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;         }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;         *start = x + 1;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;         <span class="keywordflow">return</span> r;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      }</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   }</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   <span class="comment">/* Don&#39;t return NULL, so get_header is always a valid pointer */</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   <span class="keywordflow">return</span> def;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af749c9be3dde43ccee28a80733b83f84"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">mgcp_request::headers</a></div><div class="ttdeci">int headers</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">chan_mgcp.c:259</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmgcp__request_html_accbb40b47464d0f9427763db8f01673c"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">mgcp_request::header</a></div><div class="ttdeci">char * header[MGCP_MAX_HEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">chan_mgcp.c:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7344ce8a58aaa288034af6bdab3cce8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7344ce8a58aaa288034af6bdab3cce8a">&#9670;&nbsp;</a></span>__mgcp_xmit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __mgcp_xmit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td>
          <td class="paramname"><em>gw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">534</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">mgcp_gateway::defaddr</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">mgcpsock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">mgcp_postrequest()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00547">resend_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00644">retrans_pkt()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00558">send_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;{</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">if</span> (gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      res=sendto(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, <a class="code" href="../../d1/db5/structiax__frame.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, 0, (<span class="keyword">struct</span> sockaddr *)&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      res=sendto(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, <a class="code" href="../../d1/db5/structiax__frame.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, 0, (<span class="keyword">struct</span> sockaddr *)&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordflow">if</span> (res != <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;mgcp_xmit returned %d: %s\n&quot;</span>, res, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_ab46ad0a5ec68458d6b2054606757e202"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a></div><div class="ttdeci">static int mgcpsock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">chan_mgcp.c:432</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a467dd38f909f199e3d85b1805c163088"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">mgcp_gateway::defaddr</a></div><div class="ttdeci">struct sockaddr_in defaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">chan_mgcp.c:404</a></div></div>
<div class="ttc" id="structiax__frame_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d1/db5/structiax__frame.html#a735984d41155bc1032e09bece8f8d66d">iax_frame::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d36/parser_8h_source.html#l00103">parser.h:103</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l05025">5025</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l05025">5025</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a2c2f15da97a2869766f6f68baa644705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2f15da97a2869766f6f68baa644705">&#9670;&nbsp;</a></span>acf_channel_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int acf_channel_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>funcname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>preparse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04519">4519</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>
<div class="fragment"><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;{</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;   <span class="comment">/* Sanity check */</span></div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;   <span class="keywordflow">if</span> (!chan || <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan) != &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>) {</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;This function requires a valid MGCP channel\n&quot;</span>);</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;   }</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, <span class="stringliteral">&quot;ncs&quot;</span>)) {</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, buflen, <span class="stringliteral">&quot;%s&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ?  <span class="stringliteral">&quot;yes&quot;</span>:<span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;      res = -1;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;   }</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cdf7ea5a854eb95bea098cee0286af0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a></div><div class="ttdeci">static struct ast_channel_tech mgcp_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00472">chan_mgcp.c:472</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a03b22aa1decf97fb693d7faaf40d159d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03b22aa1decf97fb693d7faaf40d159d">&#9670;&nbsp;</a></span>add_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">2065</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">mgcp_request::header</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">mgcp_request::headers</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">mgcp_request::lines</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">MGCP_MAX_HEADERS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">add_header_offhook()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">transmit_connect()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">transmit_connect_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02713">transmit_connection_del_w_params()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;{</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;= <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - 4) {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of space, can&#39;t add anymore\n&quot;</span>);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>) {</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t add more headers when lines have been added\n&quot;</span>);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   }</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>] = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a> + req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   snprintf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>], <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="stringliteral">&quot;%s: %s\r\n&quot;</span>, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> += strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>]);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a> &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a>) {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>++;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of header space\n&quot;</span>);</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   }</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af749c9be3dde43ccee28a80733b83f84"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">mgcp_request::headers</a></div><div class="ttdeci">int headers</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">chan_mgcp.c:259</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="structmgcp__request_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">mgcp_request::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">chan_mgcp.c:254</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__request_html_a9921ae02cadccc99dd6c3a9b68be050a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">mgcp_request::lines</a></div><div class="ttdeci">int lines</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">chan_mgcp.c:261</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2151407de5510c52548ffceae5e5b885"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a></div><div class="ttdeci">#define MGCP_MAX_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">chan_mgcp.c:250</a></div></div>
<div class="ttc" id="structmgcp__request_html_accbb40b47464d0f9427763db8f01673c"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">mgcp_request::header</a></div><div class="ttdeci">char * header[MGCP_MAX_HEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">chan_mgcp.c:260</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0aec7af9d830c447114c12ba64ddb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0aec7af9d830c447114c12ba64ddb76">&#9670;&nbsp;</a></span>add_header_offhook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_header_offhook </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">2648</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;{</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <span class="keywordtype">char</span> tone_indicate_end = 0;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;   <span class="comment">/* We also should check the tone to indicate, because it have no sense</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="comment">      to request notify D/[0-9#*] (dtmf keys) if we are sending congestion</span></div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="comment">      tone for example G/cg */</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;   <span class="keywordflow">if</span> (p &amp;&amp; (!strcasecmp(tone, (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/ro&quot;</span> : <span class="stringliteral">&quot;G/cg&quot;</span>)))) {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      tone_indicate_end = 1;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;   <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> &amp;&amp; p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;         <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) &gt;= <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a> &amp;&amp;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;         (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a> | <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>))) {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;       <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(resp, <span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;L/hu(N),L/hf(N)&quot;</span>);</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!tone_indicate_end){</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;       <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(resp, <span class="stringliteral">&quot;R&quot;</span>, (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/hu(N),L/hf(N),L/[0-9#*](N)&quot;</span> : <span class="stringliteral">&quot;L/hu(N),L/hf(N),D/[0-9#*](N)&quot;</span>));</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;We don&#39;t want more digits if we will end the call\n&quot;</span>);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(resp, <span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;L/hu(N),L/hf(N)&quot;</span>);</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;   }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;}</div><div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af55728da81beaf6cc269fb0687cf17c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55728da81beaf6cc269fb0687cf17c0">&#9670;&nbsp;</a></span>add_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02087">2087</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">mgcp_request::line</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">mgcp_request::lines</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00251">MGCP_MAX_LINES</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">add_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;{</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> &gt;= <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - 4) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of space, can&#39;t add anymore\n&quot;</span>);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <span class="keywordflow">if</span> (!req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>) {</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="comment">/* Add extra empty return */</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a> + req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="stringliteral">&quot;\r\n&quot;</span>, <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> += strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a> + req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>] = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a> + req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   snprintf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>], <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="stringliteral">&quot;%s&quot;</span>, line);</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> += strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>]);</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a> &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad9b78c58124ece4349c63170c1b44c01">MGCP_MAX_LINES</a>) {</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>++;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of line space\n&quot;</span>);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__request_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">mgcp_request::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">chan_mgcp.c:254</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__request_html_a9921ae02cadccc99dd6c3a9b68be050a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">mgcp_request::lines</a></div><div class="ttdeci">int lines</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">chan_mgcp.c:261</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad9b78c58124ece4349c63170c1b44c01"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad9b78c58124ece4349c63170c1b44c01">MGCP_MAX_LINES</a></div><div class="ttdeci">#define MGCP_MAX_LINES</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00251">chan_mgcp.c:251</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structmgcp__request_html_a0c4778906efa97592db56f647bcd7bc8"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">mgcp_request::line</a></div><div class="ttdeci">char * line[MGCP_MAX_LINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">chan_mgcp.c:262</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b0182993ca9de9c68d1f7b8efe0fc93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b0182993ca9de9c68d1f7b8efe0fc93">&#9670;&nbsp;</a></span>add_sdp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_sdp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">2201</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02087">add_line()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01873">ast_rtp_codecs_payload_code()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00266">AST_RTP_DTMF</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00643">ast_rtp_instance_get_local_address()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01992">ast_rtp_lookup_mime_subtype2()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00272">AST_RTP_MAX</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00375">mgcp_endpoint::nonCodecCapability</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00405">mgcp_gateway::ourip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">mgcp_subchannel::tmpdest</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">transmit_connect_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;{</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   <span class="keywordtype">int</span> codec;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <span class="keywordtype">char</span> costr[80];</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   <span class="keyword">struct </span>sockaddr_in sin;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin_tmp;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <span class="keywordtype">char</span> v[256];</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   <span class="keywordtype">char</span> s[256];</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordtype">char</span> o[256];</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>[256];</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <span class="keywordtype">char</span> t[256];</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   <span class="keywordtype">char</span> m[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>[1024] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="keyword">struct </span>sockaddr_in dest = { 0, };</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> dest_tmp;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   <span class="comment">/* XXX We break with the &quot;recommendation&quot; and send our IP, in order that our</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment">          peer doesn&#39;t have to ast_gethostbyname() us XXX */</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   len = 0;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No way to add SDP without an RTP structure\n&quot;</span>);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;   }</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;sin_tmp);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;sin_tmp, &amp;sin);</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <span class="keywordflow">if</span> (rtp) {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;dest_tmp);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;dest_tmp, &amp;dest);</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>.sin_addr.s_addr) {</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;         dest.sin_addr = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>.sin_addr;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;         dest.sin_port = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>.sin_port;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;         <span class="comment">/* Reset temporary destination */</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;         memset(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>, 0, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>));</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;         dest.sin_addr = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;         dest.sin_port = sin.sin_port;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      }</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   }</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;We&#39;re at %s port %d\n&quot;</span>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>), ntohs(sin.sin_port));</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(v, <span class="stringliteral">&quot;v=0\r\n&quot;</span>, <span class="keyword">sizeof</span>(v));</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   snprintf(o, <span class="keyword">sizeof</span>(o), <span class="stringliteral">&quot;o=root %d %d IN IP4 %s\r\n&quot;</span>, (<span class="keywordtype">int</span>)getpid(), (<span class="keywordtype">int</span>)getpid(), <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(dest.sin_addr));</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(s, <span class="stringliteral">&quot;s=session\r\n&quot;</span>, <span class="keyword">sizeof</span>(s));</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   snprintf(c, <span class="keyword">sizeof</span>(c), <span class="stringliteral">&quot;c=IN IP4 %s\r\n&quot;</span>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(dest.sin_addr));</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(t, <span class="stringliteral">&quot;t=0 0\r\n&quot;</span>, <span class="keyword">sizeof</span>(t));</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;   snprintf(m, <span class="keyword">sizeof</span>(m), <span class="stringliteral">&quot;m=audio %d RTP/AVP&quot;</span>, ntohs(dest.sin_port));</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>); x++) {</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, x);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(format) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Answering with capability %s\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format));</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      codec = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), 1, format, 0);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;      <span class="keywordflow">if</span> (codec &gt; -1) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;         snprintf(costr, <span class="keyword">sizeof</span>(costr), <span class="stringliteral">&quot; %d&quot;</span>, codec);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;         strncat(m, costr, <span class="keyword">sizeof</span>(m) - strlen(m) - 1);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;         snprintf(costr, <span class="keyword">sizeof</span>(costr), <span class="stringliteral">&quot;a=rtpmap:%d %s/8000\r\n&quot;</span>, codec, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(1, format, 0, 0));</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;         strncat(a, costr, <span class="keyword">sizeof</span>(a) - strlen(a) - 1);</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      }</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   }</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   <span class="keywordflow">for</span> (x = 1LL; x &lt;= <a class="code" href="../../d5/dde/rtp__engine_8h.html#ae89f572a6b37614f05f4e210afcffa8c">AST_RTP_MAX</a>; x &lt;&lt;= 1) {</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a08e270ee42ff478a275294762aa0e195">nonCodecCapability</a> &amp; x) {</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Answering with non-codec capability %d\n&quot;</span>, (<span class="keywordtype">int</span>) x);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;         codec = <a class="code" href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, x);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;         <span class="keywordflow">if</span> (codec &gt; -1) {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            snprintf(costr, <span class="keyword">sizeof</span>(costr), <span class="stringliteral">&quot; %d&quot;</span>, codec);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            strncat(m, costr, <span class="keyword">sizeof</span>(m) - strlen(m) - 1);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            snprintf(costr, <span class="keyword">sizeof</span>(costr), <span class="stringliteral">&quot;a=rtpmap:%d %s/8000\r\n&quot;</span>, codec, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, x, 0));</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;            strncat(a, costr, <span class="keyword">sizeof</span>(a) - strlen(a) - 1);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            <span class="keywordflow">if</span> (x == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>) {</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;               <span class="comment">/* Indicate we support DTMF...  Not sure about 16,</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">                  but MSN supports it so dang it, we will too... */</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;               snprintf(costr, <span class="keyword">sizeof</span> costr, <span class="stringliteral">&quot;a=fmtp:%d 0-16\r\n&quot;</span>, codec);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;               strncat(a, costr, <span class="keyword">sizeof</span>(a) - strlen(a) - 1);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;         }</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   }</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   strncat(m, <span class="stringliteral">&quot;\r\n&quot;</span>, <span class="keyword">sizeof</span>(m) - strlen(m) - 1);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   len = strlen(v) + strlen(s) + strlen(o) + strlen(c) + strlen(t) + strlen(m) + strlen(a);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;   snprintf(costr, <span class="keyword">sizeof</span>(costr), <span class="stringliteral">&quot;%d&quot;</span>, len);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, v);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, o);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, s);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, c);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, t);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, m);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a>(resp, a);</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div><div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9fa52623037d0a63fc64fdc5617ca4d6"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">mgcp_subchannel::tmpdest</a></div><div class="ttdeci">struct sockaddr_in tmpdest</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">chan_mgcp.c:309</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ae89f572a6b37614f05f4e210afcffa8c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ae89f572a6b37614f05f4e210afcffa8c">AST_RTP_MAX</a></div><div class="ttdeci">#define AST_RTP_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00272">rtp_engine.h:272</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aff045cc68524670d4355f882c7ac6271"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">mgcp_gateway::ourip</a></div><div class="ttdeci">struct in_addr ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00405">chan_mgcp.c:405</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_af77702faece7e8cc93042e21eb2ed05c"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#af77702faece7e8cc93042e21eb2ed05c">ast_rtp_codecs_payload_code</a></div><div class="ttdeci">int ast_rtp_codecs_payload_code(struct ast_rtp_codecs *codecs, int asterisk_format, struct ast_format *format, int code)</div><div class="ttdoc">Retrieve a rx mapped payload type based on whether it is an Asterisk format and the code...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01873">rtp_engine.c:1873</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a08e270ee42ff478a275294762aa0e195"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a08e270ee42ff478a275294762aa0e195">mgcp_endpoint::nonCodecCapability</a></div><div class="ttdeci">int nonCodecCapability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00375">chan_mgcp.c:375</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a80baeff1bd121c3168ede2a955e9b3a2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a80baeff1bd121c3168ede2a955e9b3a2">ast_rtp_instance_get_local_address</a></div><div class="ttdeci">void ast_rtp_instance_get_local_address(struct ast_rtp_instance *instance, struct ast_sockaddr *address)</div><div class="ttdoc">Get the local address that we are expecting RTP on. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00643">rtp_engine.c:643</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af55728da81beaf6cc269fb0687cf17c0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af55728da81beaf6cc269fb0687cf17c0">add_line</a></div><div class="ttdeci">static int add_line(struct mgcp_request *req, char *line)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02087">chan_mgcp.c:2087</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3cc8001677e3b955b9b5ceb4267a76ec"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></div><div class="ttdeci">#define AST_RTP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00266">rtp_engine.h:266</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a562cfa085ff927134b5bf4a66d68252c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a562cfa085ff927134b5bf4a66d68252c">&#9670;&nbsp;</a></span>add_var()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> * add_var </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04651">4651</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>
<div class="fragment"><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;{</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *tmpvar = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;   <span class="keywordtype">char</span> *varname = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>), *varval = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;   <span class="keywordflow">if</span> ((varval = strchr(varname, <span class="charliteral">&#39;=&#39;</span>))) {</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;      *varval++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;      <span class="keywordflow">if</span> ((tmpvar = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(varname, varval, <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;         tmpvar-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = list;</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;         list = tmpvar;</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;      }</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;   }</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;   <span class="keywordflow">return</span> list;</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l05025">5025</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="aa24102d36449253d49eeba61829faba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa24102d36449253d49eeba61829faba7">&#9670;&nbsp;</a></span>attempt_transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int attempt_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Complete an attended transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>The endpoint performing the attended transfer </td></tr>
    <tr><td class="paramname">sub</td><td>The sub-channel completing the attended transfer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>p-&gt;sub is the currently active sub-channel (the channel the phone is using) </dd>
<dd>
p-&gt;sub-&gt;next is the sub-channel not in use, potentially on hold</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>when channel should be hung up </td></tr>
    <tr><td class="paramname">1</td><td>when channel should not be hung up </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03281">3281</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">mgcp_subchannel::alreadygone</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01117">AST_BRIDGE_TRANSFER_SUCCESS</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01005">ast_channel_softhangup_internal_flag_add()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01216">ast_queue_unhold()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01122">AST_SOFTHANGUP_DEV</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">mgcp_queue_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">unalloc_sub()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;{</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17">ast_transfer_result</a> res;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;   <span class="comment">/* Ensure that the other channel goes off hold and that it is indicating properly */</span></div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>) {</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;   }</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;   res = <a class="code" href="../../d4/d56/bridge_8h.html#aec45146e91e4d8bc2a7d2cf083c4dac0">ast_bridge_transfer_attended</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;   <span class="comment">/* Subs are only freed when the endpoint itself is destroyed, so they will continue to exist</span></div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="comment">    * after ast_bridge_transfer_attended returns making this safe without reference counting</span></div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;   <span class="keywordflow">if</span> (res != <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934">AST_BRIDGE_TRANSFER_SUCCESS</a>) {</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <span class="comment">/* If transferring fails hang up the other channel if present and us */</span></div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;      }</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">alreadygone</a> = 1;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;   }</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3040087acee789a9300e4103c1c9170d">unalloc_sub</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;   <span class="comment">/* If the active sub is NOT the one completing the transfer change it to be, and hang up the other sub */</span></div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> != sub) {</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;   }</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;}</div><div class="ttc" id="bridge_8h_html_aec45146e91e4d8bc2a7d2cf083c4dac0"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aec45146e91e4d8bc2a7d2cf083c4dac0">ast_bridge_transfer_attended</a></div><div class="ttdeci">enum ast_transfer_result ast_bridge_transfer_attended(struct ast_channel *to_transferee, struct ast_channel *to_transfer_target)</div><div class="ttdoc">Attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04729">bridge.c:4729</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3040087acee789a9300e4103c1c9170d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3040087acee789a9300e4103c1c9170d">unalloc_sub</a></div><div class="ttdeci">static int unalloc_sub(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">chan_mgcp.c:506</a></div></div>
<div class="ttc" id="channel_8h_html_aada21a9f55151c285a1537613ff9197a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a></div><div class="ttdeci">int ast_queue_unhold(struct ast_channel *chan)</div><div class="ttdoc">Queue an unhold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01216">channel.c:1216</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5f3b129ca45af64249c42597b5b414f8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a></div><div class="ttdeci">static void mgcp_queue_hangup(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">chan_mgcp.c:621</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934">AST_BRIDGE_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01117">bridge.h:1117</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17">ast_transfer_result</a></div><div class="ttdeci">ast_transfer_result</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01115">bridge.h:1115</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ac43993a73742eff145b861107a1afa0d"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">mgcp_subchannel::alreadygone</a></div><div class="ttdeci">int alreadygone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">chan_mgcp.c:320</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="channel_8h_html_ab683c21c4a34450c4bfb8b672a7b4045"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a></div><div class="ttdeci">void ast_channel_softhangup_internal_flag_add(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01005">channel_internal_api.c:1005</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ec29f9b87b0e9bc597b47a29e4088df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec29f9b87b0e9bc597b47a29e4088df">&#9670;&nbsp;</a></span>build_gateway()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> * build_gateway </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>build_gateway: parse mgcp.conf and create gateway/endpoint structures </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">4016</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">__ourip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00202">accountcode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00336">mgcp_endpoint::accountcode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04651">add_var()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00208">adsi</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00380">mgcp_endpoint::adsi</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00206">amaflags</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00364">mgcp_endpoint::amaflags</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00713">ast_append_ha()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01092">ast_callerid_split()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04405">ast_channel_string2amaflag()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07718">ast_get_group()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01000">ast_get_ip()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00230">ast_mwi_subscribe_pool()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01005">ast_ouraddrfor()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00350">mgcp_endpoint::callgroup</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00187">callreturn</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00359">mgcp_endpoint::callreturn</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00185">callwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">mgcp_endpoint::callwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00196">cancallforward</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00357">mgcp_endpoint::cancallforward</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">mgcp_endpoint::chanvars</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00341">mgcp_endpoint::cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">cid_num</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00340">mgcp_endpoint::cid_num</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">mgcp_endpoint::cmd_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00159">context</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00338">mgcp_endpoint::context</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04669">copy_vars()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00173">cur_callergroup</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00174">cur_pickupgroup</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">mgcp_subchannel::cx_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">mgcp_gateway::defaddr</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00123">DEFAULT_MGCP_GW_PORT</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">mgcp_endpoint::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">mgcp_gateway::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00098">DIRECTMEDIA</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00200">directmedia</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00358">mgcp_endpoint::directmedia</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00167">dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00406">mgcp_gateway::dynamic</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00407">mgcp_gateway::expire</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00409">mgcp_gateway::ha</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00171">hangupongateremove</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00367">mgcp_endpoint::hangupongateremove</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">mgcp_endpoint::hascallwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00183">immediate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00378">mgcp_endpoint::immediate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00101">INADDR_NONE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00402">mgcp_gateway::isnamedottedip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00161">language</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00339">mgcp_endpoint::language</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">ast_variable::lineno</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00333">mgcp_endpoint::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00303">mgcp_subchannel::magic</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">mailbox</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00347">mgcp_endpoint::mailbox</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">MAX_SUBS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">MGCP_CX_INACTIVE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">MGCP_DTMF_RFC2833</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00302">MGCP_SUBCHANNEL_MAGIC</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00377">mgcp_endpoint::msgstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00162">musicclass</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00345">mgcp_endpoint::musicclass</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00349">mgcp_endpoint::mwi_event_sub</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00168">nat</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00317">mgcp_subchannel::nat</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00169">ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00387">mgcp_endpoint::needaudit</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00376">mgcp_endpoint::onhooktime</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00405">mgcp_gateway::ourip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00163">parkinglot</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00348">mgcp_endpoint::parkinglot</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00351">mgcp_endpoint::pickupgroup</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00170">pktcgatealloc</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00366">mgcp_endpoint::pktcgatealloc</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">mgcp_gateway::realtime</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">mgcp_gateway::retransid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00381">mgcp_endpoint::rqnt_ident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">mgcp_endpoint::rqnt_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00198">singlepath</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00356">mgcp_endpoint::singlepath</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00189">slowsequence</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00369">mgcp_endpoint::slowsequence</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00811">stasis_subscription_cb_noop()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00191">threewaycalling</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00355">mgcp_endpoint::threewaycalling</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00194">transfer</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00354">mgcp_endpoint::transfer</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00368">mgcp_endpoint::type</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">TYPE_LINE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00329">TYPE_TRUNK</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00416">mgcp_gateway::wcardep</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01686">find_realtime_gw()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;{</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw;</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e;</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *chanvars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;   <span class="comment">/*char txident[80];*/</span></div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;   <span class="keywordtype">int</span> i=0, y=0;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;   <span class="keywordtype">int</span> gw_reload = 0;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;   <span class="keywordtype">int</span> ep_reload = 0;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4035ee22ac338e5157dd3cd946c3bfb">DIRECTMEDIA</a>;</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;   <span class="comment">/* locate existing gateway */</span></div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;   <span class="keywordflow">for</span> (gw = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; gw; gw = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cat, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>)) {</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;         <span class="comment">/* gateway already exists */</span></div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;         gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 0;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;         gw_reload = 1;</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;      }</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;   }</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;   <span class="keywordflow">if</span> (!gw &amp;&amp; !(gw = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*gw)))) {</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;   }</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;   <span class="keywordflow">if</span> (!gw_reload) {</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a2f16194304829daa3f050ba49f218b5f">expire</a> = -1;</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">realtime</a> = 0;</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">retransid</a> = -1;</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, cat, <span class="keyword">sizeof</span>(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>));</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;      <span class="comment">/* check if the name is numeric ip */</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;      <span class="keywordflow">if</span> ((strchr(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, <span class="charliteral">&#39;.&#39;</span>)) &amp;&amp; inet_addr(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>) != <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3d2472d6cf31b73eeb829110dd0fffea">INADDR_NONE</a>)</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;         gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ae64527e9efc769f5e4568902ef4481e4">isnamedottedip</a> = 1;</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;   }</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;   <span class="keywordflow">for</span> (; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;host&quot;</span>)) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;dynamic&quot;</span>)) {</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;            <span class="comment">/* They&#39;ll register with us */</span></div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">dynamic</a> = 1;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;            memset(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr, 0, 4);</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;            <span class="keywordflow">if</span> (gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port) {</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;               <span class="comment">/* If we&#39;ve already got a port, make it the default rather than absolute */</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;               gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_port = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port;</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;               gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port = 0;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;            }</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;            <span class="comment">/* Non-dynamic.  Make sure we become that way if we&#39;re not */</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;            <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a2f16194304829daa3f050ba49f218b5f">expire</a>);</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">dynamic</a> = 0;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;            {</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, &amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a79fc6597452f2ed6fb136cb2149a6e2c">ast_get_ip</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                  <span class="keywordflow">if</span> (!gw_reload) {</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                     <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                     <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gw);</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                  }</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;               }</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, &amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>);</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;            }</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;         }</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;defaultip&quot;</span>)) {</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, &amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a79fc6597452f2ed6fb136cb2149a6e2c">ast_get_ip</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;            <span class="keywordflow">if</span> (!gw_reload) {</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gw);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;            }</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;         }</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, &amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>);</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;permit&quot;</span>) ||</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;         !strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;deny&quot;</span>)) {</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;         <span class="keywordtype">int</span> acl_error = 0;</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;         gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">ha</a> = <a class="code" href="../../d5/d59/acl_8h.html#ae839a9c2465be4e9a560dda668a65b9b">ast_append_ha</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">ha</a>, &amp;acl_error);</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;         <span class="keywordflow">if</span> (acl_error) {</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid ACL &#39;%s&#39; specified for MGCP gateway &#39;%s&#39; on line %d. Not creating.\n&quot;</span>,</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;                  v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, cat, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;            <span class="keywordflow">if</span> (!gw_reload) {</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gw);</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;               gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 1;</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;            }</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;         }</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;port&quot;</span>)) {</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;         gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port = htons(atoi(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>));</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;context&quot;</span>)) {</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>));</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;dtmfmode&quot;</span>)) {</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;inband&quot;</span>))</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>;</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;rfc2833&quot;</span>))</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a>;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;hybrid&quot;</span>))</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;none&quot;</span>))</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = 0;</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid DTMF mode at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;nat&quot;</span>)) {</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ncs&quot;</span>)) {</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;hangupongateremove&quot;</span>)) {</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adc859a22440f2b11c5f95d83d4f93362">hangupongateremove</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;pktcgatealloc&quot;</span>)) {</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;callerid&quot;</span>)) {</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;asreceived&quot;</span>)) {</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;            <a class="code" href="../../de/d47/callerid_8h.html#af33ee38631fe79ab21d91bcd0634903a">ast_callerid_split</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>), <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>));</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;         }</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;language&quot;</span>)) {</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>));</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;accountcode&quot;</span>)) {</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>));</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;amaflags&quot;</span>)) {</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;         y = <a class="code" href="../../d5/d7b/channel_8h.html#acd7d6e4cf3615bf47af84d2e3e47c302">ast_channel_string2amaflag</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;         <span class="keywordflow">if</span> (y &lt; 0) {</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid AMA flags: %s at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a> = y;</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;         }</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;setvar&quot;</span>)) {</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;         chanvars = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a562cfa085ff927134b5bf4a66d68252c">add_var</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, chanvars);</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;clearvars&quot;</span>)) {</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;         <span class="keywordflow">if</span> (chanvars) {</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(chanvars);</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;            chanvars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;         }</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;musiconhold&quot;</span>)) {</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>));</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;parkinglot&quot;</span>)) {</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>));</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;callgroup&quot;</span>)) {</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2dd6d5e9dbc1847bd75eff9dd5575d81">cur_callergroup</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aee83e23058d0a4111fda1f506cbda107">ast_get_group</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;pickupgroup&quot;</span>)) {</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a880aaf7c34c94d45e515f7b6dc3f70ed">cur_pickupgroup</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aee83e23058d0a4111fda1f506cbda107">ast_get_group</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;immediate&quot;</span>)) {</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;cancallforward&quot;</span>)) {</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;singlepath&quot;</span>)) {</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;directmedia&quot;</span>) || !strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;canreinvite&quot;</span>)) {</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;mailbox&quot;</span>)) {</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>));</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;hasvoicemail&quot;</span>)) {</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>)) {</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;<span class="comment">             * hasvoicemail is a users.conf legacy voicemail enable method.</span></div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;<span class="comment">             * hasvoicemail is only going to work for app_voicemail mailboxes.</span></div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <span class="keywordflow">if</span> (strchr(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, <span class="charliteral">&#39;@&#39;</span>)) {</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>));</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;               snprintf(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>), <span class="stringliteral">&quot;%s@default&quot;</span>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;            }</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;         }</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;adsi&quot;</span>)) {</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a61fbadf21e15a109d0703a01e0302535">adsi</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;callreturn&quot;</span>)) {</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;callwaiting&quot;</span>)) {</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;slowsequence&quot;</span>)) {</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;transfer&quot;</span>)) {</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;threewaycalling&quot;</span>)) {</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;wcardep&quot;</span>)) {</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;         <span class="comment">/* locate existing endpoint */</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;         <span class="keywordflow">for</span> (e = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>)) {</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;               <span class="comment">/* endpoint already exists */</span></div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 0;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;               ep_reload = 1;</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;            }</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;         }</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;         <span class="keywordflow">if</span> (!e) {</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;            <span class="comment">/* Allocate wildcard endpoint */</span></div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;            e = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*e));</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;            ep_reload = 0;</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;         }</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;         <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;            <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;               memset(e, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a>));</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>));</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">needaudit</a> = 1;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;            }</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">wcardep</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">wcardep</a>));</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;            <span class="comment">/* XXX Should we really check for uniqueness?? XXX */</span></div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>));</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>));</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>));</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>));</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">language</a>));</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>));</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>));</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>));</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>)) {</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;               <span class="comment">/* This module does not handle MWI in an event-based manner.  However, it</span></div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;<span class="comment">                * subscribes to MWI for each mailbox that is configured so that the core</span></div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;<span class="comment">                * knows that we care about it.  Then, chan_mgcp will get the MWI from the</span></div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;<span class="comment">                * event cache instead of checking the mailbox directly. */</span></div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a2efc6bdb9c9890f335d6c66e1285cd5d">mwi_event_sub</a> = <a class="code" href="../../dc/d33/mwi_8h.html#ad83d6c9c09755c8b274a8f07fb2c64f7">ast_mwi_subscribe_pool</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a613709cd56550431a4ed3c45e59b72a3">stasis_subscription_cb_noop</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;            }</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;            snprintf(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">rqnt_ident</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">rqnt_ident</a>), <span class="stringliteral">&quot;%08lx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>());</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a734dc49c409d35148bff4b61e12ad58b">msgstate</a> = -1;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a> = gw;</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a>;</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a>;</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;            <span class="keywordflow">if</span> (!ep_reload &amp;&amp; e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> &amp;&amp; e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> |= <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;            }</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a61fbadf21e15a109d0703a01e0302535">adsi</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a61fbadf21e15a109d0703a01e0302535">adsi</a>;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac765329451135abec74c45e1897abf26">type</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a>;</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a>;</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af0f007b48a9c8cf0629428bd0483e0d1">callgroup</a>=<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2dd6d5e9dbc1847bd75eff9dd5575d81">cur_callergroup</a>;</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc0651bcec68410023c036b7d8ec4d11">pickupgroup</a>=<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a880aaf7c34c94d45e515f7b6dc3f70ed">cur_pickupgroup</a>;</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a>;</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a>;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a>;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a>;</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>;</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">hascallwaiting</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a>;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a>;</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a>;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a74643a768dac2465f8612f81ba4ff177">onhooktime</a> = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;            <span class="comment">/* ASSUME we&#39;re onhook */</span></div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>;</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a76dcacc87597b6291806619028378248">copy_vars</a>(chanvars);</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;            <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;               <span class="comment">/*snprintf(txident, sizeof(txident), &quot;%08lx&quot;, (unsigned long)ast_random());*/</span></div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;               <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>; i++) {</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;                  sub = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*sub));</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;                  <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Allocating subchannel &#39;%d&#39; on %s@%s\n&quot;</span>, i, e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;                     <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;                     <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a> = e;</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> = i;</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;                     snprintf(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>), <span class="stringliteral">&quot;%08lx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>());</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;                     <span class="comment">/*stnrcpy(sub-&gt;txident, txident, sizeof(sub-&gt;txident) - 1);*/</span></div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a>;</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a>;</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> = 0;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a> = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;                     e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;                     <span class="comment">/* XXX Should find a way to clean up our memory */</span></div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of memory allocating subchannel\n&quot;</span>);</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;                     <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;                  }</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;               }</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;               <span class="comment">/* Make out subs a circular linked list so we can always sping through the whole bunch */</span></div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;               <span class="comment">/* find the end of the list */</span></div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;               <span class="keywordflow">for</span> (sub = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>; sub &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>; sub = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;               <span class="comment">/* set the last sub-&gt;next to the first sub */</span></div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;               sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a> = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a> = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>;</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;               gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a> = e;</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;            }</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;         }</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;trunk&quot;</span>) ||</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;                 !strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;line&quot;</span>)) {</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;         <span class="comment">/* locate existing endpoint */</span></div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;         <span class="keywordflow">for</span> (e = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>)) {</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;               <span class="comment">/* endpoint already exists */</span></div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 0;</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;               ep_reload = 1;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;            }</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;         }</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;         <span class="keywordflow">if</span> (!e) {</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;            e = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*e));</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;            ep_reload = 0;</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;         }</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;         <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;            <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>));</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">needaudit</a> = 1;</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;            }</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;            <span class="comment">/* XXX Should we really check for uniqueness?? XXX */</span></div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>));</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>));</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>));</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>));</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">language</a>));</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>));</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>));</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>));</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>)) {</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting mailbox &#39;%s&#39; on %s@%s\n&quot;</span>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;            }</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;            <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;               <span class="comment">/* XXX potential issue due to reload */</span></div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a734dc49c409d35148bff4b61e12ad58b">msgstate</a> = -1;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a> = gw;</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;            }</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>;</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a>;</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a>;</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a>;</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adc859a22440f2b11c5f95d83d4f93362">hangupongateremove</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adc859a22440f2b11c5f95d83d4f93362">hangupongateremove</a>;</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a61fbadf21e15a109d0703a01e0302535">adsi</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a61fbadf21e15a109d0703a01e0302535">adsi</a>;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac765329451135abec74c45e1897abf26">type</a> = (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;trunk&quot;</span>)) ? <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a600839d2c66608902c3f56afe39aa93a">TYPE_TRUNK</a> : <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a>;</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a>;</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af0f007b48a9c8cf0629428bd0483e0d1">callgroup</a>=<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2dd6d5e9dbc1847bd75eff9dd5575d81">cur_callergroup</a>;</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc0651bcec68410023c036b7d8ec4d11">pickupgroup</a>=<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a880aaf7c34c94d45e515f7b6dc3f70ed">cur_pickupgroup</a>;</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a>;</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a>;</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a>;</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a>;</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>;</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">hascallwaiting</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>;</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a>;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a>;</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a>;</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;            <span class="comment">/* If we already have a valid chanvars, it&#39;s not a new endpoint (it&#39;s a reload),</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;<span class="comment">               so first, free previous mem</span></div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>) {</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;               <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>);</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;            }</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a76dcacc87597b6291806619028378248">copy_vars</a>(chanvars);</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;            <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a74643a768dac2465f8612f81ba4ff177">onhooktime</a> = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;               <span class="comment">/* ASSUME we&#39;re onhook */</span></div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;               snprintf(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">rqnt_ident</a>, <span class="keyword">sizeof</span>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">rqnt_ident</a>), <span class="stringliteral">&quot;%08lx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>());</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;            }</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;            <span class="keywordflow">for</span> (i = 0, sub = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; i &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>; i++) {</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;               <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;                  sub = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*sub));</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;                  <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;                     sub = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;                     sub = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;                  }</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;               }</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;               <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;                  <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Allocating subchannel &#39;%d&#39; on %s@%s\n&quot;</span>, i, e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;                     <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;                     <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">magic</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa25a625ec9a058c8a80ca0c032eb79fd">MGCP_SUBCHANNEL_MAGIC</a>, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">magic</a>));</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a> = e;</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> = i;</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;                     snprintf(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>), <span class="stringliteral">&quot;%08lx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>());</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a>;</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;                     sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a> = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;                     e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;                  }</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;                  sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a>;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;                  <span class="comment">/* XXX Should find a way to clean up our memory */</span></div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of memory allocating subchannel\n&quot;</span>);</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;               }</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;            }</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;            <span class="keywordflow">if</span> (!ep_reload) {</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;               <span class="comment">/* Make out subs a circular linked list so we can always sping through the whole bunch */</span></div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;               <span class="comment">/* find the end of the list */</span></div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;               <span class="keywordflow">for</span> (sub = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>; sub &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>; sub = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;               <span class="comment">/* set the last sub-&gt;next to the first sub */</span></div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;               sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a> = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;               e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a> = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>;</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;               gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a> = e;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;            }</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;         }</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;name&quot;</span>) || !strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;lines&quot;</span>)) {</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;         <span class="comment">/* just eliminate realtime warnings */</span></div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know keyword &#39;%s&#39; at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;      }</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;   }</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;   <span class="keywordflow">if</span> (!ntohl(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr) &amp;&amp; !gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">dynamic</a>) {</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Gateway &#39;%s&#39; lacks IP address and isn&#39;t dynamic\n&quot;</span>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;      <span class="keywordflow">if</span> (!gw_reload) {</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gw);</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;      }</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;      <span class="comment">/* Return NULL */</span></div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      gw_reload = 1;</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_family = AF_INET;</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_family = AF_INET;</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;      <span class="keywordflow">if</span> (gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_addr.s_addr &amp;&amp; !ntohs(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_port)) {</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;         gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_port = htons(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afefdc3bf5bfafd4d2cc5565058b56bec">DEFAULT_MGCP_GW_PORT</a>);</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;      }</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;      <span class="keywordflow">if</span> (gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr &amp;&amp; !ntohs(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port)) {</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;         gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port = htons(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afefdc3bf5bfafd4d2cc5565058b56bec">DEFAULT_MGCP_GW_PORT</a>);</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      }</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;      {</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> tmp1, tmp2;</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;         <span class="keyword">struct </span>sockaddr_in tmp3 = {0,};</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;         tmp3.sin_addr = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>;</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;tmp1, &amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>);</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;tmp2, &amp;tmp3);</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;         <span class="keywordflow">if</span> (gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr &amp;&amp; <a class="code" href="../../d5/d59/acl_8h.html#a652b53325b914138d49526f69f6dd546">ast_ouraddrfor</a>(&amp;tmp1, &amp;tmp2)) {</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;            memcpy(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a>, <span class="keyword">sizeof</span>(gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>));</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;tmp2, &amp;tmp3);</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a> = tmp3.sin_addr;</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;         }</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;      }</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   }</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;   <span class="keywordflow">if</span> (chanvars) {</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(chanvars);</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;      chanvars = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;   }</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;   <span class="keywordflow">return</span> (gw_reload ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : gw);</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_abc34958c9b03014779727e5ca61b93e5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a></div><div class="ttdeci">static char musicclass[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00162">chan_mgcp.c:162</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac765329451135abec74c45e1897abf26">mgcp_endpoint::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00368">chan_mgcp.c:368</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abe6753ebe7fd05e1561f837b71f81372"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a></div><div class="ttdeci">#define TYPE_LINE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">chan_mgcp.c:330</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a61fbadf21e15a109d0703a01e0302535"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a61fbadf21e15a109d0703a01e0302535">adsi</a></div><div class="ttdeci">static int adsi</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00208">chan_mgcp.c:208</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a00bf83036d0252d0189adbf610a003f8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a></div><div class="ttdeci">static int slowsequence</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00189">chan_mgcp.c:189</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a></div><div class="ttdeci">static int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00167">chan_mgcp.c:167</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a2efc6bdb9c9890f335d6c66e1285cd5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a2efc6bdb9c9890f335d6c66e1285cd5d">mgcp_endpoint::mwi_event_sub</a></div><div class="ttdeci">struct ast_mwi_subscriber * mwi_event_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00349">chan_mgcp.c:349</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">mgcp_gateway::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">chan_mgcp.c:419</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">mgcp_endpoint::cid_num</a></div><div class="ttdeci">char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00340">chan_mgcp.c:340</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a74643a768dac2465f8612f81ba4ff177"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a74643a768dac2465f8612f81ba4ff177">mgcp_endpoint::onhooktime</a></div><div class="ttdeci">int onhooktime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00376">chan_mgcp.c:376</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a880aaf7c34c94d45e515f7b6dc3f70ed"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a880aaf7c34c94d45e515f7b6dc3f70ed">cur_pickupgroup</a></div><div class="ttdeci">static ast_group_t cur_pickupgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00174">chan_mgcp.c:174</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b31bfcc769a5b5c31e13aa6d8a9a286"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a></div><div class="ttdeci">static char parkinglot[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00163">chan_mgcp.c:163</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">mgcp_endpoint::cid_name</a></div><div class="ttdeci">char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00341">chan_mgcp.c:341</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac20ae67eb69c3c2e13a4e8091ef1c726"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">mgcp_endpoint::hascallwaiting</a></div><div class="ttdeci">int hascallwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">chan_mgcp.c:353</a></div></div>
<div class="ttc" id="callerid_8h_html_af33ee38631fe79ab21d91bcd0634903a"><div class="ttname"><a href="../../de/d47/callerid_8h.html#af33ee38631fe79ab21d91bcd0634903a">ast_callerid_split</a></div><div class="ttdeci">int ast_callerid_split(const char *src, char *name, int namelen, char *num, int numlen)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01092">callerid.c:1092</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a600839d2c66608902c3f56afe39aa93a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a600839d2c66608902c3f56afe39aa93a">TYPE_TRUNK</a></div><div class="ttdeci">#define TYPE_TRUNK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00329">chan_mgcp.c:329</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a179943a90ba52fd7b5585e44b3b814fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">mgcp_endpoint::cmd_queue_lock</a></div><div class="ttdeci">ast_mutex_t cmd_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">chan_mgcp.c:385</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a00bf83036d0252d0189adbf610a003f8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">mgcp_endpoint::slowsequence</a></div><div class="ttdeci">int slowsequence</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00369">chan_mgcp.c:369</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5dc9b8afbbd709a0af68f33b1db740d9"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5dc9b8afbbd709a0af68f33b1db740d9">mgcp_endpoint::directmedia</a></div><div class="ttdeci">int directmedia</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00358">chan_mgcp.c:358</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cecb71b936e9c443f548540fb7a54ff"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a></div><div class="ttdeci">#define MAX_SUBS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">chan_mgcp.c:291</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afefdc3bf5bfafd4d2cc5565058b56bec"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afefdc3bf5bfafd4d2cc5565058b56bec">DEFAULT_MGCP_GW_PORT</a></div><div class="ttdeci">#define DEFAULT_MGCP_GW_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00123">chan_mgcp.c:123</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a></div><div class="ttdeci">static int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00185">chan_mgcp.c:185</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_abc34958c9b03014779727e5ca61b93e5"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#abc34958c9b03014779727e5ca61b93e5">mgcp_endpoint::musicclass</a></div><div class="ttdeci">char musicclass[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00345">chan_mgcp.c:345</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a36fbfdd2c2eb8b68a37674faeeab0b9b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">mgcp_endpoint::singlepath</a></div><div class="ttdeci">int singlepath</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00356">chan_mgcp.c:356</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af2bf3439df0a8fd009f2e4b7520051fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">mgcp_endpoint::needaudit</a></div><div class="ttdeci">int needaudit</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00387">chan_mgcp.c:387</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa353952ead7c2baf3751641612e89c43"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a></div><div class="ttdeci">#define MGCP_DTMF_RFC2833</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">chan_mgcp.c:119</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ada540a5f25f7302dc1a3d17ccfa59b10"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a></div><div class="ttdeci">static int nat</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00168">chan_mgcp.c:168</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a734dc49c409d35148bff4b61e12ad58b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a734dc49c409d35148bff4b61e12ad58b">mgcp_endpoint::msgstate</a></div><div class="ttdeci">int msgstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00377">chan_mgcp.c:377</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="structast__variable_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">ast_variable::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">include/asterisk/config.h:95</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ada540a5f25f7302dc1a3d17ccfa59b10"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ada540a5f25f7302dc1a3d17ccfa59b10">mgcp_subchannel::nat</a></div><div class="ttdeci">int nat</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00317">chan_mgcp.c:317</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aef81e9f93aaf81a1523a89dd1c54e41f"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aef81e9f93aaf81a1523a89dd1c54e41f">mgcp_endpoint::cancallforward</a></div><div class="ttdeci">int cancallforward</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00357">chan_mgcp.c:357</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae9a1904e14c83a51df312f22eb7edd24"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a></div><div class="ttdeci">static int callreturn</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00187">chan_mgcp.c:187</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_abc0651bcec68410023c036b7d8ec4d11"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#abc0651bcec68410023c036b7d8ec4d11">mgcp_endpoint::pickupgroup</a></div><div class="ttdeci">ast_group_t pickupgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00351">chan_mgcp.c:351</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0d50b8f54bc87fe58ad0dd5322c1f4c0"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">mgcp_endpoint::rqnt_ident</a></div><div class="ttdeci">char rqnt_ident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00381">chan_mgcp.c:381</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9caa677def8fa97666646d9e2e607b7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a></div><div class="ttdeci">static int transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00194">chan_mgcp.c:194</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a246239c2435a2638427e404e8c0ba9c7"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a></div><div class="ttdeci">static int threewaycalling</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00191">chan_mgcp.c:191</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a2f16194304829daa3f050ba49f218b5f"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a2f16194304829daa3f050ba49f218b5f">mgcp_gateway::expire</a></div><div class="ttdeci">int expire</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00407">chan_mgcp.c:407</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adc859a22440f2b11c5f95d83d4f93362"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adc859a22440f2b11c5f95d83d4f93362">mgcp_endpoint::hangupongateremove</a></div><div class="ttdeci">int hangupongateremove</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00367">chan_mgcp.c:367</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aef81e9f93aaf81a1523a89dd1c54e41f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a></div><div class="ttdeci">static int cancallforward</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00196">chan_mgcp.c:196</a></div></div>
<div class="ttc" id="channel_8h_html_acd7d6e4cf3615bf47af84d2e3e47c302"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acd7d6e4cf3615bf47af84d2e3e47c302">ast_channel_string2amaflag</a></div><div class="ttdeci">enum ama_flags ast_channel_string2amaflag(const char *flag)</div><div class="ttdoc">Convert a string to a detail record AMA flag. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04405">channel.c:4405</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">mgcp_endpoint::language</a></div><div class="ttdeci">char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00339">chan_mgcp.c:339</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aa8ef61a9603ce4d4d2168948db30f85b"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">mgcp_gateway::wcardep</a></div><div class="ttdeci">char wcardep[30]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00416">chan_mgcp.c:416</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6b31bfcc769a5b5c31e13aa6d8a9a286"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">mgcp_endpoint::parkinglot</a></div><div class="ttdeci">char parkinglot[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00348">chan_mgcp.c:348</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="acl_8h_html_a652b53325b914138d49526f69f6dd546"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a652b53325b914138d49526f69f6dd546">ast_ouraddrfor</a></div><div class="ttdeci">int ast_ouraddrfor(const struct ast_sockaddr *them, struct ast_sockaddr *us)</div><div class="ttdoc">Get our local IP address when contacting a remote host. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l01005">acl.c:1005</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad380fd38219b013f5a77dfd26147ddfa"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a></div><div class="ttdeci">static int immediate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00183">chan_mgcp.c:183</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aff045cc68524670d4355f882c7ac6271"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">mgcp_gateway::ourip</a></div><div class="ttdeci">struct in_addr ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00405">chan_mgcp.c:405</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a9caa677def8fa97666646d9e2e607b7c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a9caa677def8fa97666646d9e2e607b7c">mgcp_endpoint::transfer</a></div><div class="ttdeci">int transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00354">chan_mgcp.c:354</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a61fbadf21e15a109d0703a01e0302535"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a61fbadf21e15a109d0703a01e0302535">mgcp_endpoint::adsi</a></div><div class="ttdeci">int adsi</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00380">chan_mgcp.c:380</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a467dd38f909f199e3d85b1805c163088"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">mgcp_gateway::defaddr</a></div><div class="ttdeci">struct sockaddr_in defaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">chan_mgcp.c:404</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">mgcp_endpoint::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">chan_mgcp.c:394</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad2cfb0f821c065261382a9298bb5a16b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a></div><div class="ttdeci">static int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00206">chan_mgcp.c:206</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa4035ee22ac338e5157dd3cd946c3bfb"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa4035ee22ac338e5157dd3cd946c3bfb">DIRECTMEDIA</a></div><div class="ttdeci">#define DIRECTMEDIA</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00098">chan_mgcp.c:98</a></div></div>
<div class="ttc" id="channel_8h_html_aee83e23058d0a4111fda1f506cbda107"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aee83e23058d0a4111fda1f506cbda107">ast_get_group</a></div><div class="ttdeci">ast_group_t ast_get_group(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07718">channel.c:7718</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ae64527e9efc769f5e4568902ef4481e4"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ae64527e9efc769f5e4568902ef4481e4">mgcp_gateway::isnamedottedip</a></div><div class="ttdeci">int isnamedottedip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00402">chan_mgcp.c:402</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a579ca8125bbf48d9ce8691d522f99933"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">mgcp_endpoint::context</a></div><div class="ttdeci">char context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00338">chan_mgcp.c:338</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af0f007b48a9c8cf0629428bd0483e0d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af0f007b48a9c8cf0629428bd0483e0d1">mgcp_endpoint::callgroup</a></div><div class="ttdeci">ast_group_t callgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00350">chan_mgcp.c:350</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">mgcp_endpoint::accountcode</a></div><div class="ttdeci">char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00336">chan_mgcp.c:336</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a246239c2435a2638427e404e8c0ba9c7"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a246239c2435a2638427e404e8c0ba9c7">mgcp_endpoint::threewaycalling</a></div><div class="ttdeci">int threewaycalling</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00355">chan_mgcp.c:355</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a></div><div class="ttdeci">static char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00161">chan_mgcp.c:161</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad2cfb0f821c065261382a9298bb5a16b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">mgcp_endpoint::amaflags</a></div><div class="ttdeci">int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00364">chan_mgcp.c:364</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a562cfa085ff927134b5bf4a66d68252c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a562cfa085ff927134b5bf4a66d68252c">add_var</a></div><div class="ttdeci">static struct ast_variable * add_var(const char *buf, struct ast_variable *list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04651">chan_mgcp.c:4651</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44690a0a629211d7620ce0d55c412e9d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">mgcp_gateway::dynamic</a></div><div class="ttdeci">int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00406">chan_mgcp.c:406</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_af15f3d61ee3636e814aeedff3d001594"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">mgcp_subchannel::cx_queue_lock</a></div><div class="ttdeci">ast_mutex_t cx_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">chan_mgcp.c:316</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a47a9f50ad99a5568e185a540270296d9"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a47a9f50ad99a5568e185a540270296d9">mgcp_endpoint::pktcgatealloc</a></div><div class="ttdeci">int pktcgatealloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00366">chan_mgcp.c:366</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3d2472d6cf31b73eeb829110dd0fffea"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3d2472d6cf31b73eeb829110dd0fffea">INADDR_NONE</a></div><div class="ttdeci">#define INADDR_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00101">chan_mgcp.c:101</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_endpoint::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00333">chan_mgcp.c:333</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a36fbfdd2c2eb8b68a37674faeeab0b9b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a></div><div class="ttdeci">static int singlepath</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00198">chan_mgcp.c:198</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a></div><div class="ttdeci">static int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00169">chan_mgcp.c:169</a></div></div>
<div class="ttc" id="acl_8h_html_a79fc6597452f2ed6fb136cb2149a6e2c"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a79fc6597452f2ed6fb136cb2149a6e2c">ast_get_ip</a></div><div class="ttdeci">int ast_get_ip(struct ast_sockaddr *addr, const char *hostname)</div><div class="ttdoc">Get the IP address given a hostname. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l01000">acl.c:1000</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">mgcp_endpoint::callwaiting</a></div><div class="ttdeci">int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">chan_mgcp.c:352</a></div></div>
<div class="ttc" id="stasis_8h_html_a613709cd56550431a4ed3c45e59b72a3"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a613709cd56550431a4ed3c45e59b72a3">stasis_subscription_cb_noop</a></div><div class="ttdeci">void stasis_subscription_cb_noop(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Stasis subscription callback function that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00811">stasis.c:811</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5aa61adfb890b26d29a1a345329ff204"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">mgcp_endpoint::rqnt_queue_lock</a></div><div class="ttdeci">ast_mutex_t rqnt_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">chan_mgcp.c:383</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ae9a1904e14c83a51df312f22eb7edd24"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ae9a1904e14c83a51df312f22eb7edd24">mgcp_endpoint::callreturn</a></div><div class="ttdeci">int callreturn</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00359">chan_mgcp.c:359</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2dd6d5e9dbc1847bd75eff9dd5575d81"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2dd6d5e9dbc1847bd75eff9dd5575d81">cur_callergroup</a></div><div class="ttdeci">static ast_group_t cur_callergroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00173">chan_mgcp.c:173</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a6c6c2b6adbe74acc944bc0c55b16c8f4"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">mgcp_gateway::ha</a></div><div class="ttdeci">struct ast_ha * ha</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00409">chan_mgcp.c:409</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a47a9f50ad99a5568e185a540270296d9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a></div><div class="ttdeci">static int pktcgatealloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00170">chan_mgcp.c:170</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="structmgcp__subchannel_html_a1a36e432446bacea7f1f0b5ab0ac23a9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">mgcp_subchannel::magic</a></div><div class="ttdeci">char magic[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00303">chan_mgcp.c:303</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5dc9b8afbbd709a0af68f33b1db740d9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a></div><div class="ttdeci">static int directmedia</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00200">chan_mgcp.c:200</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a></div><div class="ttdeci">static char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00202">chan_mgcp.c:202</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a76dcacc87597b6291806619028378248"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a76dcacc87597b6291806619028378248">copy_vars</a></div><div class="ttdeci">static struct ast_variable * copy_vars(struct ast_variable *src)</div><div class="ttdoc">duplicate a list of channel variables, </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04669">chan_mgcp.c:4669</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adc859a22440f2b11c5f95d83d4f93362"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adc859a22440f2b11c5f95d83d4f93362">hangupongateremove</a></div><div class="ttdeci">static int hangupongateremove</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00171">chan_mgcp.c:171</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_endpoint::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">chan_mgcp.c:386</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a579ca8125bbf48d9ce8691d522f99933"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a></div><div class="ttdeci">static char context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00159">chan_mgcp.c:159</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad380fd38219b013f5a77dfd26147ddfa"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad380fd38219b013f5a77dfd26147ddfa">mgcp_endpoint::immediate</a></div><div class="ttdeci">int immediate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00378">chan_mgcp.c:378</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="acl_8h_html_ae839a9c2465be4e9a560dda668a65b9b"><div class="ttname"><a href="../../d5/d59/acl_8h.html#ae839a9c2465be4e9a560dda668a65b9b">ast_append_ha</a></div><div class="ttdeci">struct ast_ha * ast_append_ha(const char *sense, const char *stuff, struct ast_ha *path, int *error)</div><div class="ttdoc">Add a new rule to a list of HAs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00713">acl.c:713</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a867a1a8b1db505bd0edac7dc85e2627b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a></div><div class="ttdeci">#define MGCP_CX_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">chan_mgcp.c:136</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa25a625ec9a058c8a80ca0c032eb79fd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa25a625ec9a058c8a80ca0c032eb79fd">MGCP_SUBCHANNEL_MAGIC</a></div><div class="ttdeci">#define MGCP_SUBCHANNEL_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00302">chan_mgcp.c:302</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aac1ae37fa4007496a50df75cf1f698c1"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">mgcp_gateway::realtime</a></div><div class="ttdeci">int realtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">chan_mgcp.c:421</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a1d084b82cb21102ba46ea60d3cd9c085"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a></div><div class="ttdeci">static struct in_addr __ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">chan_mgcp.c:239</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac81f44f4f22dee90de5975cf8fa4641b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mgcp_endpoint::mailbox</a></div><div class="ttdeci">char mailbox[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00347">chan_mgcp.c:347</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="mwi_8h_html_ad83d6c9c09755c8b274a8f07fb2c64f7"><div class="ttname"><a href="../../dc/d33/mwi_8h.html#ad83d6c9c09755c8b274a8f07fb2c64f7">ast_mwi_subscribe_pool</a></div><div class="ttdeci">struct ast_mwi_subscriber * ast_mwi_subscribe_pool(const char *mailbox, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add an MWI state subscriber, and stasis subscription to the mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db4/mwi_8c_source.html#l00230">mwi.c:230</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_gateway::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">chan_mgcp.c:420</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a240fa2ebaa98bd76495b1cefde05660a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a240fa2ebaa98bd76495b1cefde05660a">&#9670;&nbsp;</a></span>control2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* control2str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ind</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01406">1406</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">AST_CONTROL_CONGESTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">AST_CONTROL_FLASH</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">AST_CONTROL_HANGUP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00284">AST_CONTROL_OFFHOOK</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00288">AST_CONTROL_OPTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00289">AST_CONTROL_RADIO_KEY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00290">AST_CONTROL_RADIO_UNKEY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00279">AST_CONTROL_RING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00283">AST_CONTROL_TAKEOFFHOOK</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00287">AST_CONTROL_WINK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01438">mgcp_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                                  {</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordflow">switch</span> (ind) {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Other end has hungup&quot;</span>;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a>:</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Local ring&quot;</span>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote end is ringing&quot;</span>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote end has answered&quot;</span>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote end is busy&quot;</span>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a>:</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Make it go off hook&quot;</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a>:</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Line is off hook&quot;</span>;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Congestion (circuits busy)&quot;</span>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>:</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Flash hook&quot;</span>;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a>:</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Wink&quot;</span>;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a>:</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Set a low-level option&quot;</span>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">AST_CONTROL_RADIO_KEY</a>:</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Key Radio&quot;</span>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">AST_CONTROL_RADIO_UNKEY</a>:</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Un-Key Radio&quot;</span>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">include/asterisk/frame.h:286</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">AST_CONTROL_RADIO_UNKEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00290">include/asterisk/frame.h:290</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00279">include/asterisk/frame.h:279</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00283">include/asterisk/frame.h:283</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00287">include/asterisk/frame.h:287</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00284">include/asterisk/frame.h:284</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00288">include/asterisk/frame.h:288</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">AST_CONTROL_RADIO_KEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00289">include/asterisk/frame.h:289</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76dcacc87597b6291806619028378248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76dcacc87597b6291806619028378248">&#9670;&nbsp;</a></span>copy_vars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> * copy_vars </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>duplicate a list of channel variables, </p>
<dl class="section return"><dt>Returns</dt><dd>the copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04669">4669</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>
<div class="fragment"><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;{</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, *v = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;   <span class="keywordflow">for</span> (v = src ; v ; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;      <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(v-&gt;name, v-&gt;value, v-&gt;file))) {</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;         tmp-&gt;next = res;</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;         res = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;      }</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;   }</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a12b38b2c3a495dd4b14daa3db17835f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b38b2c3a495dd4b14daa3db17835f5">&#9670;&nbsp;</a></span>destroy_endpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_endpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>e</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">4539</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00249">ast_mwi_unsubscribe()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00458">ast_rtp_instance_destroy()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">mgcp_endpoint::chanvars</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">mgcp_endpoint::cmd_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">mgcp_endpoint::dsp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">dump_cmd_queues()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">dump_queue()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00066">cops_gate::gate_open</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00065">cops_gate::gate_remove</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00064">cops_gate::got_dq_gi</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00333">mgcp_endpoint::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00303">mgcp_subchannel::magic</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">MAX_SUBS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">mgcp_queue_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00349">mgcp_endpoint::mwi_event_sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">mgcp_endpoint::rqnt_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00067">cops_gate::tech_pvt</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">prune_gateways()</a>.</p>
<div class="fragment"><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;{</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>, *s;</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>; i++) {</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>)) {</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a>(sub);</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;      }</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      }</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;      memset(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">magic</a>, 0, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">magic</a>));</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub);</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sub);</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;      <span class="keywordflow">if</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#ac802b82a3e7c2c8f49d35a5fd6b4004d">got_dq_gi</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a9f9987701f8246b3ec9adaeb03a58e7d">gate_remove</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#affccd41640f9bef6111c0e1f1754e6ed">gate_open</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;      }</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;      sub = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;   }</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;   <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;   }</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>, e);</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a>(e, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;   sub = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;   <span class="keywordflow">for</span> (i = 0; (i &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>) &amp;&amp; sub; i++) {</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;      s = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;      sub = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;s-&gt;lock);</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;s-&gt;cx_queue_lock);</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(s);</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;   }</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;   <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a2efc6bdb9c9890f335d6c66e1285cd5d">mwi_event_sub</a>) {</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;      e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a2efc6bdb9c9890f335d6c66e1285cd5d">mwi_event_sub</a> = <a class="code" href="../../dc/d33/mwi_8h.html#a82c6cbb5215eec5348715e4824f5f575">ast_mwi_unsubscribe</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a2efc6bdb9c9890f335d6c66e1285cd5d">mwi_event_sub</a>);</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;   }</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;   <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>) {</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>);</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;      e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;   }</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, -1);</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(e);</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a2efc6bdb9c9890f335d6c66e1285cd5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a2efc6bdb9c9890f335d6c66e1285cd5d">mgcp_endpoint::mwi_event_sub</a></div><div class="ttdeci">struct ast_mwi_subscriber * mwi_event_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00349">chan_mgcp.c:349</a></div></div>
<div class="ttc" id="mwi_8h_html_a82c6cbb5215eec5348715e4824f5f575"><div class="ttname"><a href="../../dc/d33/mwi_8h.html#a82c6cbb5215eec5348715e4824f5f575">ast_mwi_unsubscribe</a></div><div class="ttdeci">void * ast_mwi_unsubscribe(struct ast_mwi_subscriber *sub)</div><div class="ttdoc">Unsubscribe from the stasis topic and MWI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db4/mwi_8c_source.html#l00249">mwi.c:249</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a179943a90ba52fd7b5585e44b3b814fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">mgcp_endpoint::cmd_queue_lock</a></div><div class="ttdeci">ast_mutex_t cmd_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">chan_mgcp.c:385</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cecb71b936e9c443f548540fb7a54ff"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a></div><div class="ttdeci">#define MAX_SUBS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">chan_mgcp.c:291</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5f3b129ca45af64249c42597b5b414f8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a></div><div class="ttdeci">static void mgcp_queue_hangup(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">chan_mgcp.c:621</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcops__gate_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">cops_gate::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00067">pktccops.h:67</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">mgcp_endpoint::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">chan_mgcp.c:394</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac141c0eb38c44bc9d1d69633a8deed8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a></div><div class="ttdeci">static int transmit_connection_del(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">chan_mgcp.c:2690</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">mgcp_endpoint::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">chan_mgcp.c:388</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_endpoint::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00333">chan_mgcp.c:333</a></div></div>
<div class="ttc" id="structcops__gate_html_affccd41640f9bef6111c0e1f1754e6ed"><div class="ttname"><a href="../../db/da2/structcops__gate.html#affccd41640f9bef6111c0e1f1754e6ed">cops_gate::gate_open</a></div><div class="ttdeci">int(* gate_open)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00066">pktccops.h:66</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5aa61adfb890b26d29a1a345329ff204"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">mgcp_endpoint::rqnt_queue_lock</a></div><div class="ttdeci">ast_mutex_t rqnt_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">chan_mgcp.c:383</a></div></div>
<div class="ttc" id="structcops__gate_html_a9f9987701f8246b3ec9adaeb03a58e7d"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a9f9987701f8246b3ec9adaeb03a58e7d">cops_gate::gate_remove</a></div><div class="ttdeci">int(* gate_remove)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00065">pktccops.h:65</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a1a36e432446bacea7f1f0b5ab0ac23a9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">mgcp_subchannel::magic</a></div><div class="ttdeci">char magic[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00303">chan_mgcp.c:303</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3f01254d84fdd62f43b4b656cb032ec2"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a></div><div class="ttdeci">static void dump_cmd_queues(struct mgcp_endpoint *p, struct mgcp_subchannel *sub)</div><div class="ttdoc">dump_cmd_queues: (SC:) cleanup pending commands </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">chan_mgcp.c:2734</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0bfe6336fe7deb78148a84aef2732c7a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a></div><div class="ttdeci">int ast_rtp_instance_destroy(struct ast_rtp_instance *instance)</div><div class="ttdoc">Destroy an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00458">rtp_engine.c:458</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a0a38013370afd038779d9d04ccd036a9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a></div><div class="ttdeci">static void dump_queue(struct mgcp_gateway *gw, struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">chan_mgcp.c:570</a></div></div>
<div class="ttc" id="structcops__gate_html_ac802b82a3e7c2c8f49d35a5fd6b4004d"><div class="ttname"><a href="../../db/da2/structcops__gate.html#ac802b82a3e7c2c8f49d35a5fd6b4004d">cops_gate::got_dq_gi</a></div><div class="ttdeci">int(* got_dq_gi)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00064">pktccops.h:64</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9033eb10a3d9e9fb3430e97936513ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9033eb10a3d9e9fb3430e97936513ca4">&#9670;&nbsp;</a></span>destroy_gateway()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_gateway </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td>
          <td class="paramname"><em>g</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04598">4598</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00222">ast_free_ha()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">dump_queue()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00409">mgcp_gateway::ha</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">prune_gateways()</a>.</p>
<div class="fragment"><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;{</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;   <span class="keywordflow">if</span> (g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">ha</a>)</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      <a class="code" href="../../d5/d59/acl_8h.html#a45dc427430b544afc0ef8e898b2c57bf">ast_free_ha</a>(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">ha</a>);</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a>(g, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(g);</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a6c6c2b6adbe74acc944bc0c55b16c8f4"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">mgcp_gateway::ha</a></div><div class="ttdeci">struct ast_ha * ha</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00409">chan_mgcp.c:409</a></div></div>
<div class="ttc" id="acl_8h_html_a45dc427430b544afc0ef8e898b2c57bf"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a45dc427430b544afc0ef8e898b2c57bf">ast_free_ha</a></div><div class="ttdeci">void ast_free_ha(struct ast_ha *ha)</div><div class="ttdoc">Free a list of HAs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00222">acl.c:222</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a0a38013370afd038779d9d04ccd036a9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a></div><div class="ttdeci">static void dump_queue(struct mgcp_gateway *gw, struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">chan_mgcp.c:570</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02d8db6086b4a18353b82ebcad631ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02d8db6086b4a18353b82ebcad631ff6">&#9670;&nbsp;</a></span>do_monitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* do_monitor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">3818</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00162">ast_io_add()</a>, <a class="el" href="../../dc/dac/io_8h_source.html#l00034">AST_IO_IN</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00278">ast_io_wait()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">has_voicemail()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03760">mgcp_prune_realtime_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">mgcp_reload_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">mgcp_reloading</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">mgcpsock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03758">mgcpsock_read_id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">monlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00224">netlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">mgcp_gateway::realtime</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">TYPE_LINE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">restart_monitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;{</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   <span class="keywordtype">int</span> reloading;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g, *gprev;</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   <span class="comment">/*struct mgcp_gateway *g;*/</span></div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;   <span class="comment">/*struct mgcp_endpoint *e;*/</span></div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;   <span class="comment">/*time_t thispass = 0, lastpass = 0;*/</span></div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;   time_t lastrun = 0;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;   <span class="comment">/* Add an I/O event to our UDP socket */</span></div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> &gt; -1) {</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a> = <a class="code" href="../../dc/dac/io_8h.html#aa250c3f6541dc5734deb966d6821da7a">ast_io_add</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a79f5a30d4c4b7e2493e65dd465702233">mgcpsock_read</a>, <a class="code" href="../../dc/dac/io_8h.html#a0d9e01f215782a343a1b71b5be362080">AST_IO_IN</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;   }</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   <span class="comment">/* This thread monitors all the frame relay interfaces which are not yet in use</span></div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;<span class="comment">      (and thus do not have a separate thread) indefinitely */</span></div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;   <span class="comment">/* From here on out, we die whenever asked */</span></div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;      <span class="comment">/* Check for a reload request */</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a>);</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      reloading = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a>;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a> = 0;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a>);</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;      <span class="keywordflow">if</span> (reloading) {</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(1, <span class="stringliteral">&quot;Reloading MGCP\n&quot;</span>);</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1b50e3739970f82175c130c5194c544f">reload_config</a>(1);</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;         <span class="comment">/* Add an I/O event to our UDP socket */</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> &gt; -1 &amp;&amp; !<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a>) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a> = <a class="code" href="../../dc/dac/io_8h.html#aa250c3f6541dc5734deb966d6821da7a">ast_io_add</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a79f5a30d4c4b7e2493e65dd465702233">mgcpsock_read</a>, <a class="code" href="../../dc/dac/io_8h.html#a0d9e01f215782a343a1b71b5be362080">AST_IO_IN</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;         }</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      }</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <span class="comment">/* Check for interfaces needing to be killed */</span></div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      <span class="comment">/* Don&#39;t let anybody kill us right away.  Nobody should lock the interface list</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="comment">         and wait for the monitor list, but the other way around is okay. */</span></div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      <span class="comment">/* Lock the network interface */</span></div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a>);</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      <span class="comment">/* XXX THIS IS COMPLETELY HOSED */</span></div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      <span class="comment">/* The gateway goes into a state of panic */</span></div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      <span class="comment">/* If the vmwi indicator is sent while it is reseting interfaces */</span></div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      lastpass = thispass;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      thispass = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="keywordflow">while</span>(g) {</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;         <span class="keywordflow">if</span> (thispass != lastpass) {</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;            e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;            <span class="keywordflow">while</span>(e) {</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;               <span class="keywordflow">if</span> (e-&gt;type == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a>) {</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;                  res = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a>(e);</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;                  <span class="keywordflow">if</span> ((e-&gt;msgstate != res) &amp;&amp; (e-&gt;hookstate == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>) &amp;&amp; (!e-&gt;rtp)){</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;                     <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;                        <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(e, <span class="stringliteral">&quot;L/vmwi(+)&quot;</span>);</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;                     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;                        <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(e, <span class="stringliteral">&quot;L/vmwi(-)&quot;</span>);</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;                     }</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;                     e-&gt;msgstate = res;</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;                     e-&gt;onhooktime = thispass;</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;                  }</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;               }</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;               e = e-&gt;next;</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;            }</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;         }</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;         g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>;</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      }</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;      <span class="comment">/* pruning unused realtime gateways, running in every 60 seconds*/</span></div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      <span class="keywordflow">if</span>(time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; (lastrun + 60)) {</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;         g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;         gprev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;         <span class="keywordflow">while</span>(g) {</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;            <span class="keywordflow">if</span>(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">realtime</a>) {</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;               <span class="keywordflow">if</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7d28a19344022f12bddcd7f3a01e59de">mgcp_prune_realtime_gateway</a>(g)) {</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;                  <span class="keywordflow">if</span>(gprev) {</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;                     gprev-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a> = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;                     <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;                  }</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;                  <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;                  <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(g);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;                  <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;                  gprev = g;</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;               }</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;               gprev = g;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;            }</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;            g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>;</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;         }</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;         lastrun = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      }</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      <span class="comment">/* Okay, now that we know what to do, release the network lock */</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a>);</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <span class="comment">/* And from now on, we&#39;re okay to be killed, so release the monitor lock as well */</span></div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;      <span class="comment">/* Wait for sched or io */</span></div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;      res = <a class="code" href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      <span class="comment">/* copied from chan_sip.c */</span></div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;      <span class="keywordflow">if</span> ((res &lt; 0) || (res &gt; 1000)) {</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;         res = 1000;</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;      }</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      res = <a class="code" href="../../dc/dac/io_8h.html#a6f1abe730a5606b88c8f415f53b784bc">ast_io_wait</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, res);</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      <span class="keywordflow">if</span> (res &gt;= 0) {</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;         <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      }</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   }</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;   <span class="comment">/* Never reached */</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;}</div><div class="ttc" id="io_8h_html_a6f1abe730a5606b88c8f415f53b784bc"><div class="ttname"><a href="../../dc/dac/io_8h.html#a6f1abe730a5606b88c8f415f53b784bc">ast_io_wait</a></div><div class="ttdeci">int ast_io_wait(struct io_context *ioc, int howlong)</div><div class="ttdoc">Waits for IO. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00278">io.c:278</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abe6753ebe7fd05e1561f837b71f81372"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a></div><div class="ttdeci">#define TYPE_LINE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">chan_mgcp.c:330</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab46ad0a5ec68458d6b2054606757e202"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a></div><div class="ttdeci">static int mgcpsock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">chan_mgcp.c:432</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9650dde3ce810fc64493b0b2b0e81209"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a></div><div class="ttdeci">static int * mgcpsock_read_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03758">chan_mgcp.c:3758</a></div></div>
<div class="ttc" id="io_8h_html_a0d9e01f215782a343a1b71b5be362080"><div class="ttname"><a href="../../dc/dac/io_8h.html#a0d9e01f215782a343a1b71b5be362080">AST_IO_IN</a></div><div class="ttdeci">#define AST_IO_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/io_8h_source.html#l00034">io.h:34</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="io_8h_html_aa250c3f6541dc5734deb966d6821da7a"><div class="ttname"><a href="../../dc/dac/io_8h.html#aa250c3f6541dc5734deb966d6821da7a">ast_io_add</a></div><div class="ttdeci">int * ast_io_add(struct io_context *ioc, int fd, ast_io_cb callback, short events, void *data)</div><div class="ttdoc">Adds an IO context. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00162">io.c:162</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afd10144dcba02df71f1170c333685d87"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a></div><div class="ttdeci">static ast_mutex_t netlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00224">chan_mgcp.c:224</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a7d28a19344022f12bddcd7f3a01e59de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7d28a19344022f12bddcd7f3a01e59de">mgcp_prune_realtime_gateway</a></div><div class="ttdeci">static int mgcp_prune_realtime_gateway(struct mgcp_gateway *g)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03760">chan_mgcp.c:3760</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a1b50e3739970f82175c130c5194c544f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a1b50e3739970f82175c130c5194c544f">reload_config</a></div><div class="ttdeci">static int reload_config(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">chan_mgcp.c:4683</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abda48311b6abe5a4dd8b6904ddde0a6d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></div><div class="ttdeci">static struct io_context * io</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00245">chan_mgcp.c:245</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aae4816e76bb1382481a5941ac7057bef"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a></div><div class="ttdeci">static ast_mutex_t monlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">chan_mgcp.c:226</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2671cbe3684e201b2b8e7d777164008b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a></div><div class="ttdeci">static int mgcp_reloading</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">chan_mgcp.c:427</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_addb3b44d41caa7edff0950888eb4f383"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a></div><div class="ttdeci">static int has_voicemail(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">chan_mgcp.c:490</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa4a641fafb6e5bea7d8db5ed5641f47f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a></div><div class="ttdeci">static ast_mutex_t mgcp_reload_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">chan_mgcp.c:426</a></div></div>
<div class="ttc" id="sched_8h_html_af13fcd6652b8dcafae35c2fa35e80a8d"><div class="ttname"><a href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a></div><div class="ttdeci">int ast_sched_wait(struct ast_sched_context *con) attribute_warn_unused_result</div><div class="ttdoc">Determines number of seconds until the next outstanding event to take place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00431">sched.c:431</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aac1ae37fa4007496a50df75cf1f698c1"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">mgcp_gateway::realtime</a></div><div class="ttdeci">int realtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">chan_mgcp.c:421</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a79f5a30d4c4b7e2493e65dd465702233"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a79f5a30d4c4b7e2493e65dd465702233">mgcpsock_read</a></div><div class="ttdeci">static int mgcpsock_read(int *id, int fd, short events, void *ignore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">chan_mgcp.c:3669</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f01254d84fdd62f43b4b656cb032ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f01254d84fdd62f43b4b656cb032ec2">&#9670;&nbsp;</a></span>dump_cmd_queues()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dump_cmd_queues </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>dump_cmd_queues: (SC:) cleanup pending commands </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">2734</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">mgcp_endpoint::cmd_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">mgcp_endpoint::cmd_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">mgcp_subchannel::cx_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">mgcp_subchannel::cx_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00266">mgcp_request::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">mgcp_endpoint::rqnt_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">mgcp_endpoint::rqnt_queue_lock</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">unalloc_sub()</a>.</p>
<div class="fragment"><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;{</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *t, *q;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;      <span class="keywordflow">for</span> (q = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">rqnt_queue</a>; q; t = q-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q), q=t);</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">rqnt_queue</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      <span class="keywordflow">for</span> (q = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a>; q; t = q-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q), q=t);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      <span class="keywordflow">for</span> (q = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>; q; t = q-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q), q=t);</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <span class="keywordflow">for</span> (q = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>; q; t = q-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q), q=t);</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      <span class="keywordflow">for</span> (q = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>; q; t = q-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q), q=t);</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;   }</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a29dad1d4c5a8ec28256d8356c9d2f489"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">mgcp_subchannel::cx_queue</a></div><div class="ttdeci">struct mgcp_request * cx_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">chan_mgcp.c:315</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a179943a90ba52fd7b5585e44b3b814fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">mgcp_endpoint::cmd_queue_lock</a></div><div class="ttdeci">ast_mutex_t cmd_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">chan_mgcp.c:385</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="structmgcp__request_html_ad13322ff33d04a9999aef85a0599e898"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">mgcp_request::next</a></div><div class="ttdeci">struct mgcp_request * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00266">chan_mgcp.c:266</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad84a7f16dcc58220e722b87572c59984"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">mgcp_endpoint::rqnt_queue</a></div><div class="ttdeci">struct mgcp_request * rqnt_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">chan_mgcp.c:382</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_af15f3d61ee3636e814aeedff3d001594"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">mgcp_subchannel::cx_queue_lock</a></div><div class="ttdeci">ast_mutex_t cx_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">chan_mgcp.c:316</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5aa61adfb890b26d29a1a345329ff204"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">mgcp_endpoint::rqnt_queue_lock</a></div><div class="ttdeci">ast_mutex_t rqnt_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">chan_mgcp.c:383</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0cd9821136cf8ae2d1c640f8f8c87540"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">mgcp_endpoint::cmd_queue</a></div><div class="ttdeci">struct mgcp_request * cmd_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">chan_mgcp.c:384</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a38013370afd038779d9d04ccd036a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a38013370afd038779d9d04ccd036a9">&#9670;&nbsp;</a></span>dump_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dump_queue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td>
          <td class="paramname"><em>gw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">570</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">mgcp_gateway::msgs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">mgcp_message::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">mgcp_message::owner_ep</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">mgcp_message::seqno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04598">destroy_gateway()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;{</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d0f/structmgcp__message.html">mgcp_message</a> *cur, *q = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *w, *prev;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">for</span> (prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cur = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>; cur; prev = cur, cur = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">if</span> (!p || cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">owner_ep</a> == p) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;         <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            prev-&gt;next = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a> = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;         }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Removing message from %s transaction %u\n&quot;</span>,</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         w = cur;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         <span class="keywordflow">if</span> (q) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            w-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = q;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            w-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;         q = w;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keywordflow">while</span> (q) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      cur = q;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      q = q-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cur);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="ttc" id="structmgcp__message_html_a99d568ed8b8bd99f5659df1c422794d9"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">mgcp_message::owner_ep</a></div><div class="ttdeci">struct mgcp_endpoint * owner_ep</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">chan_mgcp.c:271</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="structmgcp__message_html"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html">mgcp_message</a></div><div class="ttdoc">mgcp_message: MGCP message for queuing up </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00270">chan_mgcp.c:270</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a985373ab089816b56bd33ecc0637212c"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">mgcp_gateway::msgs</a></div><div class="ttdeci">struct mgcp_message * msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">chan_mgcp.c:417</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__message_html_a3de267d5622f94a1dc06d1d2f2f34d95"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">mgcp_message::next</a></div><div class="ttdeci">struct mgcp_message * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">chan_mgcp.c:277</a></div></div>
<div class="ttc" id="structmgcp__message_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">mgcp_message::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">chan_mgcp.c:275</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a05327a93c400ab2a5f298a7ae84319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a05327a93c400ab2a5f298a7ae84319">&#9670;&nbsp;</a></span>find_and_retrans()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_and_retrans </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03639">3639</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00682">answer()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">mgcp_request::identifier</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00287">mgcp_response::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00547">resend_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00281">RESPONSE_TIMEOUT</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00422">mgcp_gateway::responses</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;{</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a>=0;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   time_t now;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d89/structmgcp__response.html">mgcp_response</a> *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *cur, *<a class="code" href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">next</a>, *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   time(&amp;now);</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;   <span class="keywordflow">if</span> (sscanf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">identifier</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;seqno) != 1) {</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      seqno = 0;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;   }</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   <span class="keywordflow">for</span> (cur = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ae55031042ccb0a92d504e6ee55392bb7">responses</a>, next = cur ? cur-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">next</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; cur; cur = next, next = cur ? cur-&gt;next : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <span class="keywordflow">if</span> (now - cur-&gt;whensent &gt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aee65942ab29aecd1dabbef2bde8532fa">RESPONSE_TIMEOUT</a>) {</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;         <span class="comment">/* Delete this entry */</span></div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;         <span class="keywordflow">if</span> (prev)</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            prev-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">next</a> = <a class="code" href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">next</a>;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;            sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ae55031042ccb0a92d504e6ee55392bb7">responses</a> = <a class="code" href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">next</a>;</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cur);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;         <span class="keywordflow">if</span> (seqno == cur-&gt;seqno)</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;            answer = cur;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;         prev = cur;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      }</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;   }</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;   <span class="keywordflow">if</span> (answer) {</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae4c93589a31d76bb87e91227b12e8aa0">resend_response</a>(sub, answer);</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;   }</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af5351a0143adaf16c64b881aee01d893"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">mgcp_request::identifier</a></div><div class="ttdeci">char * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">chan_mgcp.c:256</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ae55031042ccb0a92d504e6ee55392bb7"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ae55031042ccb0a92d504e6ee55392bb7">mgcp_gateway::responses</a></div><div class="ttdeci">struct mgcp_response * responses</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00422">chan_mgcp.c:422</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae4c93589a31d76bb87e91227b12e8aa0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae4c93589a31d76bb87e91227b12e8aa0">resend_response</a></div><div class="ttdeci">static int resend_response(struct mgcp_subchannel *sub, struct mgcp_response *resp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00547">chan_mgcp.c:547</a></div></div>
<div class="ttc" id="structmgcp__response_html_aea4cbc4278b5bc550d069de684a695f1"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">mgcp_response::next</a></div><div class="ttdeci">struct mgcp_response * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00287">chan_mgcp.c:287</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aee65942ab29aecd1dabbef2bde8532fa"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aee65942ab29aecd1dabbef2bde8532fa">RESPONSE_TIMEOUT</a></div><div class="ttdeci">#define RESPONSE_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00281">chan_mgcp.c:281</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__response_html"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html">mgcp_response</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00283">chan_mgcp.c:283</a></div></div>
<div class="ttc" id="structmgcp__message_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">mgcp_message::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">chan_mgcp.c:275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a898eefd6c79f1d611e305e8d634cd63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898eefd6c79f1d611e305e8d634cd63c">&#9670;&nbsp;</a></span>find_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a>* find_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> **&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ident</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>find_command: (SC:) remove command transaction from queue </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02768">2768</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">mgcp_postrequest()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00266">mgcp_request::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;{</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *prev, *req;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(l);</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;   <span class="keywordflow">for</span> (prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, req = *queue; req; prev = req, req = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>) {</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <span class="keywordflow">if</span> (req-&gt;trid == ident) {</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;         <span class="comment">/* remove from queue */</span></div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;         <span class="keywordflow">if</span> (!prev)</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            *queue = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>;</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;            prev-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a> = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>;</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;         <span class="comment">/* send next pending command */</span></div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;         <span class="keywordflow">if</span> (*queue) {</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Posting Queued Request:\n%s to %s:%d\n&quot;</span>, (*queue)-&gt;data,</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;               <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr), ntohs(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port));</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af072ea217a7fb31eb08de9edfdfbbebe">mgcp_postrequest</a>(p, sub, (*queue)-&gt;data, (*queue)-&gt;len, (*queue)-&gt;trid);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;         }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      }</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;   }</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(l);</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;   <span class="keywordflow">return</span> req;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_ad13322ff33d04a9999aef85a0599e898"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">mgcp_request::next</a></div><div class="ttdeci">struct mgcp_request * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00266">chan_mgcp.c:266</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af072ea217a7fb31eb08de9edfdfbbebe"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af072ea217a7fb31eb08de9edfdfbbebe">mgcp_postrequest</a></div><div class="ttdeci">static int mgcp_postrequest(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, char *data, int len, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">chan_mgcp.c:699</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71936a98d3f90723af0726fdf4227a14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71936a98d3f90723af0726fdf4227a14">&#9670;&nbsp;</a></span>find_realtime_gw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a>* find_realtime_gw </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>at</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in *&#160;</td>
          <td class="paramname"><em>sin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>This is a fairly odd way of instantiating lines. Instead of each line created by virtue of being in the database (and loaded via ast_load_realtime_multientry), this code forces a specific order with a "lines" entry in the "mgcpgw" record. This has benefits, because as with chan_dahdi, values are inherited across definitions. The downside is that it's not as clear what the values will be simply by looking at a single row in the database, and it's probable that the sanest configuration should have the first column in the "mgcpep" table be "clearvars", with a static value of "all", if any variables are set at all. It may be worth making this assumption explicit in the code in the future, and then just using ast_load_realtime_multientry for the "mgcpep" records.</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01686">1686</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03363">ast_check_realtime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03339">ast_load_realtime()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00387">mgcp_endpoint::needaudit</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">mgcp_gateway::realtime</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;{</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *mgcpgwconfig = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *gwv, *epname = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../df/d58/structlines.html">lines</a>[256];</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   <span class="keywordtype">int</span> i, j;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;*** find Realtime MGCPGW\n&quot;</span>);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">if</span> (!(i = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a910f835a41772603d33e200c956549ff">ast_check_realtime</a>(<span class="stringliteral">&quot;mgcpgw&quot;</span>)) || !(j = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a910f835a41772603d33e200c956549ff">ast_check_realtime</a>(<span class="stringliteral">&quot;mgcpep&quot;</span>))) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(at)) {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;null gw name\n&quot;</span>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <span class="keywordflow">if</span> (!(mgcpgwconfig = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;mgcpgw&quot;</span>, <span class="stringliteral">&quot;name&quot;</span>, at, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">    * \note This is a fairly odd way of instantiating lines.  Instead of each</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">    * line created by virtue of being in the database (and loaded via</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">    * ast_load_realtime_multientry), this code forces a specific order with a</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">    * &quot;lines&quot; entry in the &quot;mgcpgw&quot; record.  This has benefits, because as with</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">    * chan_dahdi, values are inherited across definitions.  The downside is</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">    * that it&#39;s not as clear what the values will be simply by looking at a</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">    * single row in the database, and it&#39;s probable that the sanest configuration</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">    * should have the first column in the &quot;mgcpep&quot; table be &quot;clearvars&quot;, with a</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="comment">    * static value of &quot;all&quot;, if any variables are set at all.  It may be worth</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">    * making this assumption explicit in the code in the future, and then just</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">    * using ast_load_realtime_multientry for the &quot;mgcpep&quot; records.</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   lines[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   <span class="keywordflow">for</span> (gwv = mgcpgwconfig; gwv; gwv = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;lines&quot;</span>)) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(lines, gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(lines));</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="comment">/* Position gwv at the end of the list */</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;   <span class="keywordflow">for</span> (gwv = gwv &amp;&amp; gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> ? gwv : mgcpgwconfig; gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>; gwv = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(lines)) {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;         <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(line)[100];</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      );</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, lines);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc; i++) {</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;         gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;mgcpep&quot;</span>, <span class="stringliteral">&quot;name&quot;</span>, at, <span class="stringliteral">&quot;line&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.line[i], <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;         <span class="comment">/* Remove &quot;line&quot; AND position gwv at the end of the list. */</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;         <span class="keywordflow">for</span> (epname = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>; gwv = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;line&quot;</span>)) {</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;               <span class="comment">/* Remove it from the list */</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;               epname = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;               gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;         }</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;         <span class="comment">/* Since &quot;line&quot; instantiates the configuration, we have to move it to the end. */</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;         <span class="keywordflow">if</span> (epname) {</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = epname;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            epname-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            gwv = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;         }</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      }</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   }</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   <span class="keywordflow">for</span> (gwv = mgcpgwconfig; gwv; gwv = gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;MGCP Realtime var: %s =&gt; %s\n&quot;</span>, gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, gwv-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <span class="keywordflow">if</span> (mgcpgwconfig) {</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5ec29f9b87b0e9bc597b47a29e4088df">build_gateway</a>(at, mgcpgwconfig);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(mgcpgwconfig);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   <span class="keywordflow">if</span> (g) {</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">realtime</a> = 1;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> = g;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordflow">for</span> (e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a>(e);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;         e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">needaudit</a> = 0;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <span class="keywordflow">return</span> g;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_a1a03993603e2bc2463153857836645bb"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a></div><div class="ttdeci">struct ast_variable * ast_load_realtime(const char *family,...) attribute_sentinel</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03339">main/config.c:3339</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5ec29f9b87b0e9bc597b47a29e4088df"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5ec29f9b87b0e9bc597b47a29e4088df">build_gateway</a></div><div class="ttdeci">static struct mgcp_gateway * build_gateway(char *cat, struct ast_variable *v)</div><div class="ttdoc">build_gateway: parse mgcp.conf and create gateway/endpoint structures </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">chan_mgcp.c:4016</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af2bf3439df0a8fd009f2e4b7520051fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">mgcp_endpoint::needaudit</a></div><div class="ttdeci">int needaudit</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00387">chan_mgcp.c:387</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a910f835a41772603d33e200c956549ff"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a910f835a41772603d33e200c956549ff">ast_check_realtime</a></div><div class="ttdeci">int ast_check_realtime(const char *family)</div><div class="ttdoc">Check if realtime engine is configured for family. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03363">main/config.c:3363</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a378d1872f2d3bc625940d17905c23621"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a></div><div class="ttdeci">static int transmit_audit_endpoint(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">chan_mgcp.c:2676</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structlines_html"><div class="ttname"><a href="../../df/d58/structlines.html">lines</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01499">chan_skinny.c:1499</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aac1ae37fa4007496a50df75cf1f698c1"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">mgcp_gateway::realtime</a></div><div class="ttdeci">int realtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">chan_mgcp.c:421</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66b3dee1d5d35309cd652eedc070fa06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66b3dee1d5d35309cd652eedc070fa06">&#9670;&nbsp;</a></span>find_subchannel_and_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a>* find_subchannel_and_lock </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msgid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in *&#160;</td>
          <td class="paramname"><em>sin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">1777</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">__ourip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01005">ast_ouraddrfor()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">mgcp_gateway::defaddr</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00406">mgcp_gateway::dynamic</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01686">find_realtime_gw()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00405">mgcp_gateway::ourip</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;{</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <span class="keywordtype">char</span> *at = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) {</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      at = strchr(tmp, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">if</span> (!at) {</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Endpoint &#39;%s&#39; has no at sign!\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      *at++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;   }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   <span class="keywordflow">if</span> (at &amp;&amp; (at[0] == <span class="charliteral">&#39;[&#39;</span>)) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      at++;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      c = strrchr(at, <span class="charliteral">&#39;]&#39;</span>);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;         *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      }</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   }</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   <span class="keywordflow">for</span> (g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> ? <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> : <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a71936a98d3f90723af0726fdf4227a14">find_realtime_gw</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, at, sin); g; g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a> ? g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a> : <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a71936a98d3f90723af0726fdf4227a14">find_realtime_gw</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, at, sin)) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="keywordflow">if</span> ((!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> || !strcasecmp(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, at)) &amp;&amp;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;          (sin || g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr || g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_addr.s_addr)) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;         <span class="comment">/* Found the gateway.  If it&#39;s dynamic, save it&#39;s address -- now for the endpoint */</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;         <span class="keywordflow">if</span> (sin &amp;&amp; g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">dynamic</a> &amp;&amp; <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <span class="keywordflow">if</span> ((g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr != sin-&gt;sin_addr.s_addr) ||</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;               (g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port != sin-&gt;sin_port)) {</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;               memcpy(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>, sin, <span class="keyword">sizeof</span>(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>));</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;               {</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                  <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> tmp1, tmp2;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                  <span class="keyword">struct </span>sockaddr_in tmp3 = {0,};</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                  tmp3.sin_addr = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                  <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;tmp1, &amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                  <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;tmp2, &amp;tmp3);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a652b53325b914138d49526f69f6dd546">ast_ouraddrfor</a>(&amp;tmp1, &amp;tmp2)) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                     memcpy(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a>, <span class="keyword">sizeof</span>(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a>));</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                  }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                  <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;tmp2, &amp;tmp3);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                  g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">ourip</a> = tmp3.sin_addr;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;               }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Registered MGCP gateway &#39;%s&#39; at %s port %d\n&quot;</span>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr), ntohs(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port));</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;         <span class="comment">/* not dynamic, check if the name matches */</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="keywordflow">if</span> (strcasecmp(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, at)) {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            }</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;         <span class="comment">/* not dynamic, no name, check if the addr matches */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> &amp;&amp; sin) {</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="keywordflow">if</span> ((g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr != sin-&gt;sin_addr.s_addr) ||</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                (g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port != sin-&gt;sin_port)) {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            }</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;         }</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;         <span class="keywordflow">for</span> (p = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; p; p = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Searching on %s@%s for subchannel\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="keywordflow">if</span> (msgid) {</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;               sub = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;               found = 1;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> &amp;&amp; !strcasecmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, tmp)) {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Coundn&#39;t determine subchannel, assuming current master %s@%s-%d\n&quot;</span>,</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                  p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;               sub = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;               found = 1;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            }</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;         }</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;         <span class="keywordflow">if</span> (sub &amp;&amp; found) {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;         }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;         <span class="keywordflow">if</span> (g) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Endpoint &#39;%s&#39; not found on gateway &#39;%s&#39;\n&quot;</span>, tmp, at);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Gateway &#39;%s&#39; (and thus its endpoint &#39;%s&#39;) does not exist\n&quot;</span>, at, tmp);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;         }</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      }</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="acl_8h_html_a652b53325b914138d49526f69f6dd546"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a652b53325b914138d49526f69f6dd546">ast_ouraddrfor</a></div><div class="ttdeci">int ast_ouraddrfor(const struct ast_sockaddr *them, struct ast_sockaddr *us)</div><div class="ttdoc">Get our local IP address when contacting a remote host. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l01005">acl.c:1005</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aff045cc68524670d4355f882c7ac6271"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aff045cc68524670d4355f882c7ac6271">mgcp_gateway::ourip</a></div><div class="ttdeci">struct in_addr ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00405">chan_mgcp.c:405</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a467dd38f909f199e3d85b1805c163088"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">mgcp_gateway::defaddr</a></div><div class="ttdeci">struct sockaddr_in defaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">chan_mgcp.c:404</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44690a0a629211d7620ce0d55c412e9d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">mgcp_gateway::dynamic</a></div><div class="ttdeci">int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00406">chan_mgcp.c:406</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a71936a98d3f90723af0726fdf4227a14"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a71936a98d3f90723af0726fdf4227a14">find_realtime_gw</a></div><div class="ttdeci">static struct mgcp_gateway * find_realtime_gw(char *name, char *at, struct sockaddr_in *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01686">chan_mgcp.c:1686</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a1d084b82cb21102ba46ea60d3cd9c085"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a></div><div class="ttdeci">static struct in_addr __ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">chan_mgcp.c:239</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0dbe9016b6c5b0013c4458036490275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0dbe9016b6c5b0013c4458036490275">&#9670;&nbsp;</a></span>get_csv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_csv </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>get_csv: (SC:) get comma separated value </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01662">1662</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;{</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   *next = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <span class="keywordflow">while</span> (*<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> &amp;&amp; (*<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> &lt; 33 || *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> == <span class="charliteral">&#39;,&#39;</span>)) {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>++;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   }</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   s = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   <span class="keywordflow">while</span> (*<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> &amp;&amp; (*<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> &gt;= 33 &amp;&amp; *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> != <span class="charliteral">&#39;,&#39;</span>)) {</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>++, (*len)++;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;   *next = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   <span class="keywordflow">if</span> (*len == 0) {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      s = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *next = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   }</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   <span class="keywordflow">return</span> s;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;}</div><div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af46c0493834ccd88aba03927a4ea8de9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af46c0493834ccd88aba03927a4ea8de9">&#9670;&nbsp;</a></span>get_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01655">1655</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01635">__get_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;{</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <span class="keywordtype">int</span> start = 0;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8b0bccb9299ef502eaa06af14553cc26">__get_header</a>(req, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, &amp;start, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8b0bccb9299ef502eaa06af14553cc26"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8b0bccb9299ef502eaa06af14553cc26">__get_header</a></div><div class="ttdeci">static char * __get_header(struct mgcp_request *req, char *name, int *start, char *def)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01635">chan_mgcp.c:1635</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5823b2253fc8592029745b345da3a2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5823b2253fc8592029745b345da3a2b8">&#9670;&nbsp;</a></span>get_sdp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_sdp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01606">1606</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01596">get_sdp_by_line()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">mgcp_request::line</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">mgcp_request::lines</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;{</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <span class="keywordtype">char</span> *r;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>; x++) {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      r = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a63006d0afc2a1f9b609d023155216a20">get_sdp_by_line</a>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[x], <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, len);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="keywordflow">if</span> (r[0] != <span class="charliteral">&#39;\0&#39;</span>) <span class="keywordflow">return</span> r;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_a9921ae02cadccc99dd6c3a9b68be050a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">mgcp_request::lines</a></div><div class="ttdeci">int lines</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">chan_mgcp.c:261</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a63006d0afc2a1f9b609d023155216a20"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a63006d0afc2a1f9b609d023155216a20">get_sdp_by_line</a></div><div class="ttdeci">static char * get_sdp_by_line(char *line, char *name, int nameLen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01596">chan_mgcp.c:1596</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmgcp__request_html_a0c4778906efa97592db56f647bcd7bc8"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">mgcp_request::line</a></div><div class="ttdeci">char * line[MGCP_MAX_LINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">chan_mgcp.c:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a63006d0afc2a1f9b609d023155216a20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63006d0afc2a1f9b609d023155216a20">&#9670;&nbsp;</a></span>get_sdp_by_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_sdp_by_line </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nameLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01596">1596</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01606">get_sdp()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01624">get_sdp_iterate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;{</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(line, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, nameLen) == 0 &amp;&amp; line[nameLen] == <span class="charliteral">&#39;=&#39;</span>) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keywordtype">char</span> *r = line + nameLen + 1;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keywordflow">while</span> (*r &amp;&amp; (*r &lt; 33)) ++r;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keywordflow">return</span> r;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af3720d39975643ccc57f801b3a81de15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3720d39975643ccc57f801b3a81de15">&#9670;&nbsp;</a></span>get_sdp_iterate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_sdp_iterate </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>iterator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01624">1624</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01596">get_sdp_by_line()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">mgcp_request::line</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;{</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordtype">char</span> *r;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <span class="keywordflow">while</span> (*iterator &lt; req-&gt;<a class="code" href="../../df/d58/structlines.html">lines</a>) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      r = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a63006d0afc2a1f9b609d023155216a20">get_sdp_by_line</a>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[(*iterator)++], <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, len);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">if</span> (r[0] != <span class="charliteral">&#39;\0&#39;</span>) <span class="keywordflow">return</span> r;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   }</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;}</div><div class="ttc" id="structlines_html"><div class="ttname"><a href="../../df/d58/structlines.html">lines</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01499">chan_skinny.c:1499</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a63006d0afc2a1f9b609d023155216a20"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a63006d0afc2a1f9b609d023155216a20">get_sdp_by_line</a></div><div class="ttdeci">static char * get_sdp_by_line(char *line, char *name, int nameLen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01596">chan_mgcp.c:1596</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmgcp__request_html_a0c4778906efa97592db56f647bcd7bc8"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">mgcp_request::line</a></div><div class="ttdeci">char * line[MGCP_MAX_LINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">chan_mgcp.c:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00daac1b8e56ab6dbf0ed4a263b2bd9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00daac1b8e56ab6dbf0ed4a263b2bd9e">&#9670;&nbsp;</a></span>handle_hd_hf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_hd_hf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">3322</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01216">ast_queue_unhold()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">has_voicemail()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00378">mgcp_endpoint::immediate</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">MGCP_CX_SENDRECV</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00638">mgcp_queue_control()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">mgcp_subchannel::outgoing</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;{</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   pthread_t t;</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;   <span class="comment">/* Off hook / answer */</span></div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a>) {</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      <span class="comment">/* Answered */</span></div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;         <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(sub);</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;         }</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;         <span class="comment">/*transmit_notify_request(sub, &quot;aw&quot;);*/</span></div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a06fc1b4a43dbe0326aca85f9242759c1">mgcp_queue_control</a>(sub, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>);</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      }</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;      <span class="comment">/* Start switch */</span></div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;      <span class="comment">/*sub-&gt;cxmode = MGCP_CX_SENDRECV;*/</span></div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;      <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;         <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(sub);</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;         }</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a>) {</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            <span class="comment">/* The channel is immediately up. Start right away */</span></div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;<span class="preprocessor">#ifdef DLINK_BUGGY_FIRMWARE</span></div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;rt&quot;</span>);</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/rt&quot;</span> : <span class="stringliteral">&quot;G/rt&quot;</span>);</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;            c = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#acd23440bf4f6550a2a21b7498c258f10">mgcp_new</a>(sub, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;            <span class="keywordflow">if</span> (!c) {</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to start PBX on channel %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/cg&quot;</span> : <span class="stringliteral">&quot;G/cg&quot;</span>);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(c);</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            }</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a>(p)) {</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/dl&quot;</span>);</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;            }</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            c = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#acd23440bf4f6550a2a21b7498c258f10">mgcp_new</a>(sub, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;            <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;t, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a214f94866cb7db3e8fadf80f65fa3735">mgcp_ss</a>, c)) {</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create switch thread: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(c);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;               }</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create channel for %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;            }</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;         }</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>) {</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Off hook, but already have owner on %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;On hook, but already have owner on %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;If we&#39;re onhook why are we here trying to handle a hd or hf?\n&quot;</span>);</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;         }</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;         <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(sub);</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;         }</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;         <span class="comment">/*transmit_notify_request(sub, &quot;aw&quot;);*/</span></div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;         <span class="comment">/*ast_queue_control(sub-&gt;owner, AST_CONTROL_ANSWER);*/</span></div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;      }</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;   }</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a36b9cd6deb29a58ba6c432767d314a35"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a></div><div class="ttdeci">static void start_rtp(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">chan_mgcp.c:2967</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_aada21a9f55151c285a1537613ff9197a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a></div><div class="ttdeci">int ast_queue_unhold(struct ast_channel *chan)</div><div class="ttdoc">Queue an unhold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01216">channel.c:1216</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_acd23440bf4f6550a2a21b7498c258f10"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#acd23440bf4f6550a2a21b7498c258f10">mgcp_new</a></div><div class="ttdeci">static struct ast_channel * mgcp_new(struct mgcp_subchannel *sub, int state, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">chan_mgcp.c:1494</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a214f94866cb7db3e8fadf80f65fa3735"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a214f94866cb7db3e8fadf80f65fa3735">mgcp_ss</a></div><div class="ttdeci">static void * mgcp_ss(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">chan_mgcp.c:3000</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab670737ce602b7e5f077d5f508479b71"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a></div><div class="ttdeci">#define MGCP_CX_SENDRECV</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">chan_mgcp.c:132</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a586fc7c710ade15aabab8f223e53fdd9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">mgcp_subchannel::outgoing</a></div><div class="ttdeci">int outgoing</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">chan_mgcp.c:319</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_addb3b44d41caa7edff0950888eb4f383"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a></div><div class="ttdeci">static int has_voicemail(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">chan_mgcp.c:490</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad380fd38219b013f5a77dfd26147ddfa"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad380fd38219b013f5a77dfd26147ddfa">mgcp_endpoint::immediate</a></div><div class="ttdeci">int immediate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00378">chan_mgcp.c:378</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a06fc1b4a43dbe0326aca85f9242759c1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a06fc1b4a43dbe0326aca85f9242759c1">mgcp_queue_control</a></div><div class="ttdeci">static void mgcp_queue_control(struct mgcp_subchannel *sub, int control)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00638">chan_mgcp.c:638</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a065f650bbf31f5b322e9dc5008361ee4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a></div><div class="ttdeci">static int transmit_modify_request(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">chan_mgcp.c:2572</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a231b521c8437945d7e4dbf7426bd858b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231b521c8437945d7e4dbf7426bd858b">&#9670;&nbsp;</a></span>handle_mgcp_audit_endpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_mgcp_audit_endpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01060">1060</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00242">mgcpdebug</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;{</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a>  *mg;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *me;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordtype">char</span> *ename,*gname, *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;mgcp audit endpoint&quot;</span>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;         <span class="stringliteral">&quot;Usage: mgcp audit endpoint &lt;endpointid&gt;\n&quot;</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;         <span class="stringliteral">&quot;       Lists the capabilities of an endpoint in the MGCP (Media Gateway Control Protocol) subsystem.\n&quot;</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         <span class="stringliteral">&quot;       mgcp debug MUST be on to see the results of this command.\n&quot;</span>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8f842af31e501d288c3ced6611e5baab">mgcpdebug</a>) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4)</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="comment">/* split the name into parts by null */</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   ename = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="keywordflow">for</span> (gname = ename; *gname; gname++) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="keywordflow">if</span> (*gname == <span class="charliteral">&#39;@&#39;</span>) {</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;         *gname = 0;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;         gname++;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="keywordflow">if</span> (gname[0] == <span class="charliteral">&#39;[&#39;</span>) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      gname++;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordflow">if</span> ((c = strrchr(gname, <span class="charliteral">&#39;]&#39;</span>))) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="keywordflow">for</span> (mg = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; mg; mg = mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, gname)) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;         <span class="keywordflow">for</span> (me = mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; me; me = me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, ename)) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;               found = 1;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a>(me);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;         }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;         <span class="keywordflow">if</span> (found) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;         }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;   &lt;&lt; Could not find endpoint &gt;&gt;     &quot;</span>);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8f842af31e501d288c3ced6611e5baab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8f842af31e501d288c3ced6611e5baab">mgcpdebug</a></div><div class="ttdeci">static int mgcpdebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00242">chan_mgcp.c:242</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a378d1872f2d3bc625940d17905c23621"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a></div><div class="ttdeci">static int transmit_audit_endpoint(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">chan_mgcp.c:2676</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fe11883f18bc88d3848c5a4e54297c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fe11883f18bc88d3848c5a4e54297c9">&#9670;&nbsp;</a></span>handle_mgcp_set_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_mgcp_set_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01121">1121</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00242">mgcpdebug</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;{</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;mgcp set debug {on|off}&quot;</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;         <span class="stringliteral">&quot;Usage: mgcp set debug {on|off}\n&quot;</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;         <span class="stringliteral">&quot;       Enables/Disables dumping of MGCP packets for debugging purposes\n&quot;</span>;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>)</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> - 1], <span class="stringliteral">&quot;on&quot;</span>, 2)) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8f842af31e501d288c3ced6611e5baab">mgcpdebug</a> = 1;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;MGCP Debugging Enabled\n&quot;</span>);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;off&quot;</span>, 3)) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8f842af31e501d288c3ced6611e5baab">mgcpdebug</a> = 0;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;MGCP Debugging Disabled\n&quot;</span>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8f842af31e501d288c3ced6611e5baab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8f842af31e501d288c3ced6611e5baab">mgcpdebug</a></div><div class="ttdeci">static int mgcpdebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00242">chan_mgcp.c:242</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add55a6f955812437eadb9eaee3138c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add55a6f955812437eadb9eaee3138c66">&#9670;&nbsp;</a></span>handle_mgcp_show_endpoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_mgcp_show_endpoints </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01018">1018</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">mgcp_endpoint::chanvars</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00338">mgcp_endpoint::context</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">mgcp_gateway::defaddr</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00406">mgcp_gateway::dynamic</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">mgcp_gateway::realtime</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;{</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a>  *mg;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *me;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordtype">int</span> hasendpoints = 0;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> * v = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;mgcp show endpoints&quot;</span>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;         <span class="stringliteral">&quot;Usage: mgcp show endpoints\n&quot;</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;         <span class="stringliteral">&quot;       Lists all endpoints known to the MGCP (Media Gateway Control Protocol) subsystem.\n&quot;</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   }</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <span class="keywordflow">for</span> (mg = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; mg; mg = mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Gateway &#39;%s&#39; at %s (%s%s)\n&quot;</span>, mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr ? <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr) : <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">defaddr</a>.sin_addr), mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">realtime</a> ? <span class="stringliteral">&quot;Realtime, &quot;</span> : <span class="stringliteral">&quot;&quot;</span>, mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">dynamic</a> ? <span class="stringliteral">&quot;Dynamic&quot;</span> : <span class="stringliteral">&quot;Static&quot;</span>);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">for</span> (me = mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; me; me = me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;   -- &#39;%s@%s in &#39;%s&#39; is %s\n&quot;</span>, me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, mg-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ? <span class="stringliteral">&quot;active&quot;</span> : <span class="stringliteral">&quot;idle&quot;</span>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;         <span class="keywordflow">if</span> (me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a>) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Variables:\n&quot;</span>);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">for</span> (v = me-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> ; v ; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;    %s = &#39;%s&#39;\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;         }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         hasendpoints = 1;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">if</span> (!hasendpoints) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;   &lt;&lt; No Endpoints Defined &gt;&gt;     &quot;</span>);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a467dd38f909f199e3d85b1805c163088"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a467dd38f909f199e3d85b1805c163088">mgcp_gateway::defaddr</a></div><div class="ttdeci">struct sockaddr_in defaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00404">chan_mgcp.c:404</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">mgcp_endpoint::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">chan_mgcp.c:394</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a579ca8125bbf48d9ce8691d522f99933"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">mgcp_endpoint::context</a></div><div class="ttdeci">char context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00338">chan_mgcp.c:338</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44690a0a629211d7620ce0d55c412e9d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44690a0a629211d7620ce0d55c412e9d">mgcp_gateway::dynamic</a></div><div class="ttdeci">int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00406">chan_mgcp.c:406</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aac1ae37fa4007496a50df75cf1f698c1"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">mgcp_gateway::realtime</a></div><div class="ttdeci">int realtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">chan_mgcp.c:421</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9a8318cac4c0ccb4a92fa6647987d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9a8318cac4c0ccb4a92fa6647987d18">&#9670;&nbsp;</a></span>handle_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in *&#160;</td>
          <td class="paramname"><em>sin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">3402</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">mgcp_subchannel::alreadygone</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01191">ast_queue_hold()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01216">ast_queue_unhold()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03281">attempt_transfer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">mgcp_endpoint::callwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00346">mgcp_endpoint::curtone</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00343">mgcp_endpoint::dtmf_buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">dump_cmd_queues()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">dump_queue()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01655">get_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">has_voicemail()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">mgcp_endpoint::hascallwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00362">mgcp_endpoint::hidecallerid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00133">MGCP_CX_CONF</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00135">MGCP_CX_MUTE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">MGCP_CX_RECVONLY</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">MGCP_CX_SENDRECV</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00604">mgcp_queue_frame()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">mgcp_queue_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">mgcp_subchannel::outgoing</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00355">mgcp_endpoint::threewaycalling</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00354">mgcp_endpoint::transfer</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">transmit_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00255">mgcp_request::verb</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00416">mgcp_gateway::wcardep</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;{</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;   <span class="keywordtype">char</span> *ev, *s;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { 0, };</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Handling request &#39;%s&#39; on %s@%s\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">verb</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;   <span class="comment">/* Clear out potential response */</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">verb</a>, <span class="stringliteral">&quot;RSIP&quot;</span>)) {</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;      <span class="comment">/* Test if this RSIP request is just a keepalive */</span></div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp( <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a>(req, <span class="stringliteral">&quot;RM&quot;</span>), <span class="stringliteral">&quot;X-keepalive&quot;</span>)) {</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Received keepalive request from %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a>(sub, <span class="stringliteral">&quot;200&quot;</span>, req, <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>, p);</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;         <span class="keywordflow">if</span> ((strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">wcardep</a>) != 0)) {</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Resetting interface %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;         }</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;         <span class="comment">/* For RSIP on wildcard we reset all endpoints */</span></div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;         <span class="keywordflow">if</span> (!strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">wcardep</a>)) {</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;            <span class="comment">/* Reset all endpoints */</span></div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *tmp_ep;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;            g = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>;</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;            <span class="keywordflow">for</span> (tmp_ep = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; tmp_ep; tmp_ep = tmp_ep-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;               <span class="comment">/*if ((strcmp(tmp_ep-&gt;name, &quot;*&quot;) != 0) &amp;&amp; (strcmp(tmp_ep-&gt;name, &quot;aaln/&quot; &quot;*&quot;) != 0)) {*/</span></div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;               <span class="keywordflow">if</span> (strcmp(tmp_ep-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">wcardep</a>) != 0) {</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;                  <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *tmp_sub, *first_sub;</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Resetting interface %s@%s\n&quot;</span>, tmp_ep-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;                  first_sub = tmp_ep-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;                  tmp_sub = tmp_ep-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;                  <span class="keywordflow">while</span> (tmp_sub) {</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                     <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(tmp_sub);</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;                     tmp_sub = tmp_sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;                     <span class="keywordflow">if</span> (tmp_sub == first_sub)</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;                  }</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;               }</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            }</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub);</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;         }</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a>(sub, <span class="stringliteral">&quot;200&quot;</span>, req, <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;         <span class="comment">/* We don&#39;t send NTFY or AUEP to wildcard ep */</span></div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;         <span class="keywordflow">if</span> (strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">wcardep</a>) != 0) {</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;            <span class="comment">/* Audit endpoint.</span></div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;<span class="comment">             Idea is to prevent lost lines due to race conditions</span></div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a>(p);</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;         }</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;      }</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">verb</a>, <span class="stringliteral">&quot;NTFY&quot;</span>)) {</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      <span class="comment">/* Acknowledge and be sure we keep looking for the same things */</span></div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a>(sub, <span class="stringliteral">&quot;200&quot;</span>, req, <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;      <span class="comment">/* Notified of an event */</span></div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;      ev = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a>(req, <span class="stringliteral">&quot;O&quot;</span>);</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;      s = strchr(ev, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      <span class="keywordflow">if</span> (s) ev = s + 1;</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Endpoint &#39;%s@%s-%d&#39; observed &#39;%s&#39;\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, ev);</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      <span class="comment">/* Keep looking for events unless this was a hangup */</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(ev, <span class="stringliteral">&quot;hu&quot;</span>) &amp;&amp; strcasecmp(ev, <span class="stringliteral">&quot;hd&quot;</span>) &amp;&amp; strcasecmp(ev, <span class="stringliteral">&quot;ping&quot;</span>)) {</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>);</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      }</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(ev, <span class="stringliteral">&quot;hd&quot;</span>)) {</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;         <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;           <span class="comment">/* When the endpoint have a Off hook transition we allways</span></div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;<span class="comment">              starts without any previous dtmfs */</span></div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;           memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;         }</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a00daac1b8e56ab6dbf0ed4a263b2bd9e">handle_hd_hf</a>(sub, ev);</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(ev, <span class="stringliteral">&quot;hf&quot;</span>)) {</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;         <span class="comment">/* We can assume we are offhook if we received a hookflash */</span></div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;         <span class="comment">/* First let&#39;s just do call wait and ignore threeway */</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;         <span class="comment">/* We&#39;re currently in charge */</span></div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> != <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>) {</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;            <span class="comment">/* Cisco c7940 sends hf even if the phone is onhook */</span></div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;            <span class="comment">/* Thanks to point on IRC for pointing this out */</span></div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;         }</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;         <span class="comment">/* do not let * conference two down channels */</span></div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a> &amp;&amp; !sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>)</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> || p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a> || p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a246239c2435a2638427e404e8c0ba9c7">threewaycalling</a>) {</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Swapping %d for %d on %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;            p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;            <span class="comment">/* transfer control to our next subchannel */</span></div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;            <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;               <span class="comment">/* plave the first call on hold and start up a new call */</span></div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;               sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a06ad84ee9923fcd4a1a250eb508e76bd">MGCP_CX_MUTE</a>;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP Muting %d on %s@%s\n&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;               <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;               }</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;               sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a>;</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a00daac1b8e56ab6dbf0ed4a263b2bd9e">handle_hd_hf</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>, ev);</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;               <span class="comment">/* We&#39;ve got two active calls lets decide whether or not to conference or just flip flop */</span></div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;               <span class="keywordflow">if</span> ((!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a>) &amp;&amp; (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a>)) {</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;                  <span class="comment">/* We made both calls lets conference */</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP Conferencing %d and %d on %s@%s\n&quot;</span>,</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                        sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                  sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a144946cf986fb7fcff705810fe14a312">MGCP_CX_CONF</a>;</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;                  sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a144946cf986fb7fcff705810fe14a312">MGCP_CX_CONF</a>;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                  <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                  <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                  <span class="comment">/* Let&#39;s flipflop between calls */</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;                  <span class="comment">/* XXX Need to check for state up ??? */</span></div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;                  <span class="comment">/* XXX Need a way to indicate the current call, or maybe the call that&#39;s waiting */</span></div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;We didn&#39;t make one of the calls FLIPFLOP %d and %d on %s@%s\n&quot;</span>,</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;                        sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;                  sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a06ad84ee9923fcd4a1a250eb508e76bd">MGCP_CX_MUTE</a>;</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP Muting %d on %s@%s\n&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                  <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;                  <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a00daac1b8e56ab6dbf0ed4a263b2bd9e">handle_hd_hf</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>, ev);</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;               }</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;               <span class="comment">/* We&#39;ve most likely lost one of our calls find an active call and bring it up */</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;               <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                  p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;                  p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                  <span class="comment">/* We seem to have lost both our calls */</span></div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;                  <span class="comment">/* XXX - What do we do now? */</span></div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;                  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;               }</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;               p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>);</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            }</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Callwaiting, call transfer or threeway calling not enabled on endpoint %s@%s\n&quot;</span>,</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;               p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;         }</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(ev, <span class="stringliteral">&quot;hu&quot;</span>)) {</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>;</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a>;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;MGCP %s@%s Went on hook\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;         <span class="comment">/* Do we need to send MDCX before a DLCX ?</span></div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;<span class="comment">         if (sub-&gt;rtp) {</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;<span class="comment">            transmit_modify_request(sub);</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;<span class="comment">         }</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a> &amp;&amp; (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) &amp;&amp; ((!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a>) || (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a>))) {</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;            <span class="comment">/* We&#39;re allowed to transfer, we have two avtive calls and */</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;            <span class="comment">/* we made at least one of the calls.  Let&#39;s try and transfer */</span></div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;            res = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa24102d36449253d49eeba61829faba7">attempt_transfer</a>(p, sub);</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Transfer attempt failed\n&quot;</span>);</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;            }</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;            <span class="comment">/* Hangup the current call */</span></div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            <span class="comment">/* If there is another active call, mgcp_hangup will ring the phone with the other call */</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;            <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;               sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">alreadygone</a> = 1;</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub);</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP handle_request(%s@%s-%d) ast_channel already destroyed, resending DLCX.\n&quot;</span>,</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;                     p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;               <span class="comment">/* Instruct the other side to remove the connection since it apparently *</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;<span class="comment">                * still thinks the channel is active. *</span></div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;<span class="comment">                * For Cisco IAD2421 /BAK/ */</span></div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a>(sub);</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;            }</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;         }</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;         <span class="keywordflow">if</span> ((p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>) &amp;&amp; (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) &amp;&amp; (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)) {</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;            p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> = 0;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">hascallwaiting</a> &amp;&amp; !p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>) {</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Enabling call waiting on MGCP/%s@%s-%d\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;               p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = -1;</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;            }</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a>(p)) {</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP handle_request(%s@%s) set vmwi(+)\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/vmwi(+)&quot;</span>);</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP handle_request(%s@%s) set vmwi(-)\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/vmwi(-)&quot;</span>);</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;            }</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;         }</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strlen(ev) == 1) &amp;&amp;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;            (((ev[0] &gt;= <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (ev[0] &lt;= <span class="charliteral">&#39;9&#39;</span>)) ||</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;             ((ev[0] &gt;= <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (ev[0] &lt;= <span class="charliteral">&#39;D&#39;</span>)) ||</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;              (ev[0] == <span class="charliteral">&#39;*&#39;</span>) || (ev[0] == <span class="charliteral">&#39;#&#39;</span>))) {</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;         <span class="keywordflow">if</span> (sub &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) &gt;=  <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>)) {</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            f.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>;</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = ev[0];</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            f.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;mgcp&quot;</span>;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;            <span class="comment">/* XXX MUST queue this frame to all subs in threeway call if threeway call is active */</span></div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3a1037f8c24ba97837b6f91d87aa88b7">mgcp_queue_frame</a>(sub, &amp;f);</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;            <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>)</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3a1037f8c24ba97837b6f91d87aa88b7">mgcp_queue_frame</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>, &amp;f);</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            <span class="keywordflow">if</span> (strstr(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>, (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;wt1&quot;</span> : <span class="stringliteral">&quot;wt&quot;</span>)) &amp;&amp; (ev[0] == <span class="charliteral">&#39;A&#39;</span>)) {</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;               memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>));</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;            }</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;            p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>[strlen(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>)] = ev[0];</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;            p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>[strlen(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>)] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;         }</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(ev, <span class="stringliteral">&quot;T&quot;</span>)) {</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;         <span class="comment">/* Digit timeout -- unimportant */</span></div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(ev, <span class="stringliteral">&quot;ping&quot;</span>)) {</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;         <span class="comment">/* ping -- unimportant */</span></div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Received unknown event &#39;%s&#39; from %s@%s\n&quot;</span>, ev, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      }</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown verb &#39;%s&#39; received from %s\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">verb</a>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(sin-&gt;sin_addr));</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a>(sub, <span class="stringliteral">&quot;510&quot;</span>, req, <span class="stringliteral">&quot;Unknown verb&quot;</span>);</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;   }</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3a1037f8c24ba97837b6f91d87aa88b7"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3a1037f8c24ba97837b6f91d87aa88b7">mgcp_queue_frame</a></div><div class="ttdeci">static void mgcp_queue_frame(struct mgcp_subchannel *sub, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00604">chan_mgcp.c:604</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac20ae67eb69c3c2e13a4e8091ef1c726"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">mgcp_endpoint::hascallwaiting</a></div><div class="ttdeci">int hascallwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">chan_mgcp.c:353</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a25c62717d772312686d67d797a562816"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">mgcp_endpoint::hidecallerid</a></div><div class="ttdeci">int hidecallerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00362">chan_mgcp.c:362</a></div></div>
<div class="ttc" id="channel_8h_html_aada21a9f55151c285a1537613ff9197a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a></div><div class="ttdeci">int ast_queue_unhold(struct ast_channel *chan)</div><div class="ttdoc">Queue an unhold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01216">channel.c:1216</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af46c0493834ccd88aba03927a4ea8de9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a></div><div class="ttdeci">static char * get_header(struct mgcp_request *req, char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01655">chan_mgcp.c:1655</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa24102d36449253d49eeba61829faba7"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa24102d36449253d49eeba61829faba7">attempt_transfer</a></div><div class="ttdeci">static int attempt_transfer(struct mgcp_endpoint *p, struct mgcp_subchannel *sub)</div><div class="ttdoc">Complete an attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03281">chan_mgcp.c:3281</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a9532a575bad605efa55a2b77df58d77b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">mgcp_endpoint::dtmf_buf</a></div><div class="ttdeci">char dtmf_buf[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00343">chan_mgcp.c:343</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5f3b129ca45af64249c42597b5b414f8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a></div><div class="ttdeci">static void mgcp_queue_hangup(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">chan_mgcp.c:621</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a06ad84ee9923fcd4a1a250eb508e76bd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a06ad84ee9923fcd4a1a250eb508e76bd">MGCP_CX_MUTE</a></div><div class="ttdeci">#define MGCP_CX_MUTE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00135">chan_mgcp.c:135</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a980b33312b4a6f0bbe8f0897ae20b55c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">mgcp_endpoint::curtone</a></div><div class="ttdeci">char curtone[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00346">chan_mgcp.c:346</a></div></div>
<div class="ttc" id="structmgcp__request_html_aa5b3bf02368026f7280827b3f8be716a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">mgcp_request::verb</a></div><div class="ttdeci">char * verb</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00255">chan_mgcp.c:255</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4ffeecdfdba40964baaa4f3fc81990a9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a></div><div class="ttdeci">static int transmit_response(struct mgcp_subchannel *sub, char *msg, struct mgcp_request *req, char *msgrest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">chan_mgcp.c:2174</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a378d1872f2d3bc625940d17905c23621"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a></div><div class="ttdeci">static int transmit_audit_endpoint(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">chan_mgcp.c:2676</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a00daac1b8e56ab6dbf0ed4a263b2bd9e"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a00daac1b8e56ab6dbf0ed4a263b2bd9e">handle_hd_hf</a></div><div class="ttdeci">static void handle_hd_hf(struct mgcp_subchannel *sub, char *ev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">chan_mgcp.c:3322</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aa8ef61a9603ce4d4d2168948db30f85b"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aa8ef61a9603ce4d4d2168948db30f85b">mgcp_gateway::wcardep</a></div><div class="ttdeci">char wcardep[30]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00416">chan_mgcp.c:416</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a9caa677def8fa97666646d9e2e607b7c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a9caa677def8fa97666646d9e2e607b7c">mgcp_endpoint::transfer</a></div><div class="ttdeci">int transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00354">chan_mgcp.c:354</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab670737ce602b7e5f077d5f508479b71"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a></div><div class="ttdeci">#define MGCP_CX_SENDRECV</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">chan_mgcp.c:132</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a586fc7c710ade15aabab8f223e53fdd9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">mgcp_subchannel::outgoing</a></div><div class="ttdeci">int outgoing</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">chan_mgcp.c:319</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac141c0eb38c44bc9d1d69633a8deed8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a></div><div class="ttdeci">static int transmit_connection_del(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">chan_mgcp.c:2690</a></div></div>
<div class="ttc" id="channel_8h_html_ab2e0a6897707b1102ad453ea0963999f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a></div><div class="ttdeci">int ast_queue_hold(struct ast_channel *chan, const char *musicclass)</div><div class="ttdoc">Queue a hold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01191">channel.c:1191</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a246239c2435a2638427e404e8c0ba9c7"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a246239c2435a2638427e404e8c0ba9c7">mgcp_endpoint::threewaycalling</a></div><div class="ttdeci">int threewaycalling</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00355">chan_mgcp.c:355</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ac43993a73742eff145b861107a1afa0d"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">mgcp_subchannel::alreadygone</a></div><div class="ttdeci">int alreadygone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">chan_mgcp.c:320</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">mgcp_endpoint::callwaiting</a></div><div class="ttdeci">int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">chan_mgcp.c:352</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3f01254d84fdd62f43b4b656cb032ec2"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a></div><div class="ttdeci">static void dump_cmd_queues(struct mgcp_endpoint *p, struct mgcp_subchannel *sub)</div><div class="ttdoc">dump_cmd_queues: (SC:) cleanup pending commands </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">chan_mgcp.c:2734</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_addb3b44d41caa7edff0950888eb4f383"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a></div><div class="ttdeci">static int has_voicemail(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">chan_mgcp.c:490</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a144946cf986fb7fcff705810fe14a312"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a144946cf986fb7fcff705810fe14a312">MGCP_CX_CONF</a></div><div class="ttdeci">#define MGCP_CX_CONF</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00133">chan_mgcp.c:133</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a065f650bbf31f5b322e9dc5008361ee4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a></div><div class="ttdeci">static int transmit_modify_request(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">chan_mgcp.c:2572</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a583a184d797fe6db5a861d72615c2996"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a></div><div class="ttdeci">#define MGCP_CX_RECVONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">chan_mgcp.c:131</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a0a38013370afd038779d9d04ccd036a9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a0a38013370afd038779d9d04ccd036a9">dump_queue</a></div><div class="ttdeci">static void dump_queue(struct mgcp_gateway *gw, struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00570">chan_mgcp.c:570</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a40770b14c1a879ee5a9c97d295993f3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40770b14c1a879ee5a9c97d295993f3f">&#9670;&nbsp;</a></span>handle_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ident</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>resp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">2797</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">mgcp_endpoint::cmd_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">mgcp_endpoint::cmd_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">mgcp_subchannel::cx_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">mgcp_subchannel::cx_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">dump_cmd_queues()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02768">find_command()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01662">get_csv()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01655">get_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">mgcp_request::lines</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00154">MGCP_CMD_AUEP</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">MGCP_CMD_CRCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">MGCP_CMD_MDCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">mgcp_queue_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">mgcp_endpoint::rqnt_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">mgcp_endpoint::rqnt_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00369">mgcp_endpoint::slowsequence</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">mgcp_subchannel::tmpdest</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02713">transmit_connection_del_w_params()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">transmit_response()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00644">retrans_pkt()</a>.</p>
<div class="fragment"><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;{</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *req;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> &lt; 200) {</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      <span class="comment">/* provisional response */</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a>)</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;      req = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a898eefd6c79f1d611e305e8d634cd63c">find_command</a>(p, sub, &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a>, &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>, ident);</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sub)</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;      req = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a898eefd6c79f1d611e305e8d634cd63c">find_command</a>(p, sub, &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>, &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>, ident);</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(req = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a898eefd6c79f1d611e305e8d634cd63c">find_command</a>(p, sub, &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">rqnt_queue</a>, &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>, ident)))</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      req = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a898eefd6c79f1d611e305e8d634cd63c">find_command</a>(p, sub, &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a>, &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>, ident);</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <span class="keywordflow">if</span> (!req) {</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;No command found on [%s] for transaction %u. Ignoring...\n&quot;</span>,</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, ident);</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;   }</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;   <span class="keywordflow">if</span> (p &amp;&amp; (<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> &gt;= 400) &amp;&amp; (<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> &lt;= 599)) {</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>) {</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      <span class="keywordflow">case</span> 401:</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <span class="keywordflow">case</span> 402:</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;      <span class="keywordflow">case</span> 406:</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Transaction %u timed out\n&quot;</span>, ident);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <span class="keywordflow">case</span> 407:</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Transaction %u aborted\n&quot;</span>, ident);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      }</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;         <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>[0] &amp;&amp; (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">cmd</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>)) {</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;DLCX for all connections on %s due to error %d\n&quot;</span>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;             <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a>(sub);</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;         }</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Terminating on result %d from %s@%s-%d\n&quot;</span>,</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;               <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub ? sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>:-1);</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub);</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;         }</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Terminating on result %d from %s@%s-%d\n&quot;</span>,</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;               <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub ? sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>:-1);</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>);</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;         }</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Terminating on result %d from %s@%s-%d\n&quot;</span>,</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;               <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub ? sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>:-1);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;         }</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;      }</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;   }</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;   <span class="keywordflow">if</span> (resp) {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      <span class="comment">/* responseAck: */</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> == 200 &amp;&amp; (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">cmd</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a> || req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">cmd</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a>)) {</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;            <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a>(sub, <span class="stringliteral">&quot;000&quot;</span>, resp, <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;               <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>) {</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;               }</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;            }</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      }</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">cmd</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>) {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a>(resp, <span class="stringliteral">&quot;I&quot;</span>))) {</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c) &amp;&amp; sub) {</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;               <span class="comment">/* if we are hanging up do not process this conn. */</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;               <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>)) {</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;                     <span class="keywordflow">if</span> (strcasecmp(c, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>)) {</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                        <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Subchannel already has a cxident. sub-&gt;cxident: %s requested %s\n&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>, c);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;                     }</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                  }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>, c, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>));</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                  <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>.sin_addr.s_addr) {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                     <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a>(sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                  }</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                  <span class="comment">/* XXX delete this one</span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment">                     callid and conn id may already be lost.</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment">                     so the following del conn may have a side effect of</span></div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">                     cleaning up the next subchannel */</span></div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;                  <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a>(sub);</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;               }</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;            }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;         }</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      }</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;      <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">cmd</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a>) {</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;         <span class="comment">/* check stale connection ids */</span></div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a>(resp, <span class="stringliteral">&quot;I&quot;</span>))) {</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordtype">char</span> *v, *n;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;            <span class="keywordflow">while</span> ((v = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab0dbe9016b6c5b0013c4458036490275">get_csv</a>(c, &amp;len, &amp;n))) {</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;               <span class="keywordflow">if</span> (len) {</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;                  <span class="keywordflow">if</span> (strncasecmp(v, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>, len) &amp;&amp;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;                      strncasecmp(v, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>, len)) {</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;                     <span class="comment">/* connection id not found. delete it */</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                     <span class="keywordtype">char</span> cxident[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                     <span class="keywordflow">if</span> (len &gt; (<span class="keyword">sizeof</span>(cxident) - 1))</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;                        len = <span class="keyword">sizeof</span>(cxident) - 1;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cxident, v, len);</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Non existing connection id %s on %s@%s \n&quot;</span>,</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;                               cxident, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;                     <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab497914e23cbc14cd4dcde87fe1e5fc7">transmit_connection_del_w_params</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cxident);</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;                  }</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;               }</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;               c = n;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;            }</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;         }</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;         <span class="comment">/* Try to determine the hookstate returned from an audit endpoint command */</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a>(resp, <span class="stringliteral">&quot;ES&quot;</span>))) {</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c)) {</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;               <span class="keywordflow">if</span> (strstr(c, <span class="stringliteral">&quot;hu&quot;</span>)) {</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;                  <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> != <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>) {</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;                     <span class="comment">/* XXX cleanup if we think we are offhook XXX */</span></div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;                     <span class="keywordflow">if</span> ((p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> || p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ) &amp;&amp;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;                         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>)</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;                        <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;                     p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;                     <span class="comment">/* update the requested events according to the new hookstate */</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;                     <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting hookstate of %s@%s to ONHOOK\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;                     }</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(c, <span class="stringliteral">&quot;hd&quot;</span>)) {</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                  <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> != <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>) {</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;                     p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;                     <span class="comment">/* update the requested events according to the new hookstate */</span></div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;                     <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting hookstate of %s@%s to OFFHOOK\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                     }</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;                  }</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;               }</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;            }</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;         }</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      <span class="keywordflow">if</span> (resp &amp;&amp; resp-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>) {</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;         <span class="comment">/* do not process sdp if we are hanging up. this may be a late response */</span></div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;         <span class="keywordflow">if</span> (sub &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(sub);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;            <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#acd3cd797ea85acf54242aba8e966a37c">process_sdp</a>(sub, resp);</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;         }</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      }</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;   }</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(req);</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a36b9cd6deb29a58ba6c432767d314a35"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a></div><div class="ttdeci">static void start_rtp(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">chan_mgcp.c:2967</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29dad1d4c5a8ec28256d8356c9d2f489"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">mgcp_subchannel::cx_queue</a></div><div class="ttdeci">struct mgcp_request * cx_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">chan_mgcp.c:315</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a179943a90ba52fd7b5585e44b3b814fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">mgcp_endpoint::cmd_queue_lock</a></div><div class="ttdeci">ast_mutex_t cmd_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">chan_mgcp.c:385</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a00bf83036d0252d0189adbf610a003f8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">mgcp_endpoint::slowsequence</a></div><div class="ttdeci">int slowsequence</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00369">chan_mgcp.c:369</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab0dbe9016b6c5b0013c4458036490275"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab0dbe9016b6c5b0013c4458036490275">get_csv</a></div><div class="ttdeci">static char * get_csv(char *c, int *len, char **next)</div><div class="ttdoc">get_csv: (SC:) get comma separated value </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01662">chan_mgcp.c:1662</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af46c0493834ccd88aba03927a4ea8de9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af46c0493834ccd88aba03927a4ea8de9">get_header</a></div><div class="ttdeci">static char * get_header(struct mgcp_request *req, char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01655">chan_mgcp.c:1655</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">chan_mgcp.c:149</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00154">chan_mgcp.c:154</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5f3b129ca45af64249c42597b5b414f8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a></div><div class="ttdeci">static void mgcp_queue_hangup(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">chan_mgcp.c:621</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9fa52623037d0a63fc64fdc5617ca4d6"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">mgcp_subchannel::tmpdest</a></div><div class="ttdeci">struct sockaddr_in tmpdest</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">chan_mgcp.c:309</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a898eefd6c79f1d611e305e8d634cd63c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a898eefd6c79f1d611e305e8d634cd63c">find_command</a></div><div class="ttdeci">static struct mgcp_request * find_command(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request **queue, ast_mutex_t *l, int ident)</div><div class="ttdoc">find_command: (SC:) remove command transaction from queue </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02768">chan_mgcp.c:2768</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4ffeecdfdba40964baaa4f3fc81990a9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4ffeecdfdba40964baaa4f3fc81990a9">transmit_response</a></div><div class="ttdeci">static int transmit_response(struct mgcp_subchannel *sub, char *msg, struct mgcp_request *req, char *msgrest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">chan_mgcp.c:2174</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">chan_mgcp.c:150</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab497914e23cbc14cd4dcde87fe1e5fc7"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab497914e23cbc14cd4dcde87fe1e5fc7">transmit_connection_del_w_params</a></div><div class="ttdeci">static int transmit_connection_del_w_params(struct mgcp_endpoint *p, char *callid, char *cxident)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02713">chan_mgcp.c:2713</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2843e30c260fbe5d077107ad06f0a99e"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a></div><div class="ttdeci">static int transmit_modify_with_sdp(struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp, const struct ast_format_cap *codecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">chan_mgcp.c:2301</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__request_html_a9921ae02cadccc99dd6c3a9b68be050a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">mgcp_request::lines</a></div><div class="ttdeci">int lines</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">chan_mgcp.c:261</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad84a7f16dcc58220e722b87572c59984"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">mgcp_endpoint::rqnt_queue</a></div><div class="ttdeci">struct mgcp_request * rqnt_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">chan_mgcp.c:382</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_acd3cd797ea85acf54242aba8e966a37c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#acd3cd797ea85acf54242aba8e966a37c">process_sdp</a></div><div class="ttdeci">static int process_sdp(struct mgcp_subchannel *sub, struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">chan_mgcp.c:1970</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac141c0eb38c44bc9d1d69633a8deed8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a></div><div class="ttdeci">static int transmit_connection_del(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">chan_mgcp.c:2690</a></div></div>
<div class="ttc" id="structmgcp__request_html_a85092d82ab6ea85dad51ba78cbda36a0"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">mgcp_request::cmd</a></div><div class="ttdeci">int cmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">chan_mgcp.c:264</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_af15f3d61ee3636e814aeedff3d001594"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">mgcp_subchannel::cx_queue_lock</a></div><div class="ttdeci">ast_mutex_t cx_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">chan_mgcp.c:316</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5aa61adfb890b26d29a1a345329ff204"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">mgcp_endpoint::rqnt_queue_lock</a></div><div class="ttdeci">ast_mutex_t rqnt_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">chan_mgcp.c:383</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0cd9821136cf8ae2d1c640f8f8c87540"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">mgcp_endpoint::cmd_queue</a></div><div class="ttdeci">struct mgcp_request * cmd_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">chan_mgcp.c:384</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3f01254d84fdd62f43b4b656cb032ec2"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a></div><div class="ttdeci">static void dump_cmd_queues(struct mgcp_endpoint *p, struct mgcp_subchannel *sub)</div><div class="ttdoc">dump_cmd_queues: (SC:) cleanup pending commands </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">chan_mgcp.c:2734</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addb3b44d41caa7edff0950888eb4f383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addb3b44d41caa7edff0950888eb4f383">&#9670;&nbsp;</a></span>has_voicemail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int has_voicemail </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">490</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00655">ast_app_has_voicemail()</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00090">ast_mwi_state_cache()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf226cf2d1a4dbbbf220521d58c05ac0f">ast_mwi_state_type()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00347">mgcp_endpoint::mailbox</a>, <a class="el" href="../../dc/d33/mwi_8h_source.html#l00461">ast_mwi_state::new_msgs</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00686">stasis_cache_get()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;{</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keywordtype">int</span> new_msgs;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga7fc6473ab80d2117f1bcb1359721fdce">ast_mwi_state_cache</a>(), <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf226cf2d1a4dbbbf220521d58c05ac0f">ast_mwi_state_type</a>(), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/d45/structast__mwi__state.html">ast_mwi_state</a> *mwi_state = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      new_msgs = mwi_state-&gt;<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga70de9f16a229e2c5bf1a973372949d3e">new_msgs</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      new_msgs = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a76b4d3927cacd1bcd5da9ca8fe375cb6">ast_app_has_voicemail</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mailbox</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga70de9f16a229e2c5bf1a973372949d3e">new_msgs</a>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_ga7fc6473ab80d2117f1bcb1359721fdce"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga7fc6473ab80d2117f1bcb1359721fdce">ast_mwi_state_cache</a></div><div class="ttdeci">struct stasis_cache * ast_mwi_state_cache(void)</div><div class="ttdoc">Backend cache for ast_mwi_topic_cached(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db4/mwi_8c_source.html#l00090">mwi.c:90</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf226cf2d1a4dbbbf220521d58c05ac0f"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf226cf2d1a4dbbbf220521d58c05ac0f">ast_mwi_state_type</a></div><div class="ttdeci">struct stasis_message_type * ast_mwi_state_type(void)</div><div class="ttdoc">Get the Stasis Message Bus API message type for MWI messages. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a76b4d3927cacd1bcd5da9ca8fe375cb6"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a76b4d3927cacd1bcd5da9ca8fe375cb6">ast_app_has_voicemail</a></div><div class="ttdeci">int ast_app_has_voicemail(const char *mailboxes, const char *folder)</div><div class="ttdoc">Determine if a given mailbox has any voicemail If folder is NULL, defaults to &quot;INBOX&quot;. If folder is &quot;INBOX&quot;, includes the number of messages in the &quot;Urgent&quot; folder. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00655">main/app.c:655</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga70de9f16a229e2c5bf1a973372949d3e"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga70de9f16a229e2c5bf1a973372949d3e">ast_mwi_state::new_msgs</a></div><div class="ttdeci">int new_msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d33/mwi_8h_source.html#l00461">mwi.h:461</a></div></div>
<div class="ttc" id="stasis_8h_html_ab3da17290725793258020b83f56e4df6"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab3da17290725793258020b83f56e4df6">stasis_cache_get</a></div><div class="ttdeci">struct stasis_message * stasis_cache_get(struct stasis_cache *cache, struct stasis_message_type *type, const char *id)</div><div class="ttdoc">Retrieve an item from the cache for the ast_eid_default entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00686">stasis_cache.c:686</a></div></div>
<div class="ttc" id="structast__mwi__state_html"><div class="ttname"><a href="../../d6/d45/structast__mwi__state.html">ast_mwi_state</a></div><div class="ttdoc">The structure that contains MWI state. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d33/mwi_8h_source.html#l00457">mwi.h:457</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac81f44f4f22dee90de5975cf8fa4641b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac81f44f4f22dee90de5975cf8fa4641b">mgcp_endpoint::mailbox</a></div><div class="ttdeci">char mailbox[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00347">chan_mgcp.c:347</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b883bc27f1be3a07781311388e6fd9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b883bc27f1be3a07781311388e6fd9a">&#9670;&nbsp;</a></span>init_req()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_req </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>verb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>oseq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02128">2128</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">mgcp_request::header</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">mgcp_request::headers</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00402">mgcp_gateway::isnamedottedip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">MGCP_MAX_HEADERS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>.</p>
<div class="fragment"><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;{</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   <span class="comment">/* Initialize a response */</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a> || req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Request already initialized?!?\n&quot;</span>);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>] = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a> + req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="comment">/* check if we need brackets around the gw name */</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ae64527e9efc769f5e4568902ef4481e4">isnamedottedip</a>) {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      snprintf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>], <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="stringliteral">&quot;%s %u %s@[%s] MGCP 1.0%s\r\n&quot;</span>, verb, oseq, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot; NCS 1.0&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;+     snprintf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>], <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="stringliteral">&quot;%s %u %s@%s MGCP 1.0%s\r\n&quot;</span>, verb, oseq, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot; NCS 1.0&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;   }</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> += strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>]);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a> &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a>) {</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>++;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of header space\n&quot;</span>);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af749c9be3dde43ccee28a80733b83f84"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">mgcp_request::headers</a></div><div class="ttdeci">int headers</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">chan_mgcp.c:259</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__request_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">mgcp_request::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">chan_mgcp.c:254</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ae64527e9efc769f5e4568902ef4481e4"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ae64527e9efc769f5e4568902ef4481e4">mgcp_gateway::isnamedottedip</a></div><div class="ttdeci">int isnamedottedip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00402">chan_mgcp.c:402</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2151407de5510c52548ffceae5e5b885"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a></div><div class="ttdeci">#define MGCP_MAX_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">chan_mgcp.c:250</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="structmgcp__request_html_accbb40b47464d0f9427763db8f01673c"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">mgcp_request::header</a></div><div class="ttdeci">char * header[MGCP_MAX_HEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">chan_mgcp.c:260</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3926d890595f96ea9611a71a7eaa848f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3926d890595f96ea9611a71a7eaa848f">&#9670;&nbsp;</a></span>init_resp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int init_resp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>resprest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02110">2110</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">mgcp_request::header</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">mgcp_request::headers</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">mgcp_request::identifier</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">MGCP_MAX_HEADERS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02152">respprep()</a>.</p>
<div class="fragment"><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;   <span class="comment">/* Initialize a response */</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a> || req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Request already initialized?!?\n&quot;</span>);</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   }</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>] = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a> + req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   snprintf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>], <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>) - req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, <span class="stringliteral">&quot;%s %s %s\r\n&quot;</span>, resp, orig-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">identifier</a>, resprest);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a> += strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>]);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a> &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a>) {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>++;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of header space\n&quot;</span>);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af749c9be3dde43ccee28a80733b83f84"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">mgcp_request::headers</a></div><div class="ttdeci">int headers</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">chan_mgcp.c:259</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__request_html_af5351a0143adaf16c64b881aee01d893"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">mgcp_request::identifier</a></div><div class="ttdeci">char * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">chan_mgcp.c:256</a></div></div>
<div class="ttc" id="structmgcp__request_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">mgcp_request::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">chan_mgcp.c:254</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2151407de5510c52548ffceae5e5b885"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a></div><div class="ttdeci">#define MGCP_MAX_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">chan_mgcp.c:250</a></div></div>
<div class="ttc" id="structmgcp__request_html_accbb40b47464d0f9427763db8f01673c"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">mgcp_request::header</a></div><div class="ttdeci">char * header[MGCP_MAX_HEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">chan_mgcp.c:260</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the module. </p>
<p>Module loading including tests for configuration or dependencies. This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE, or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails tests return AST_MODULE_LOAD_FAILURE. If the module can not load the configuration file or other non-critical problem return AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04856">4856</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00539">ast_channel_register()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00086">ast_format_ulaw</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00847">ast_rtp_glue_register</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00081">io_context_create()</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00107">io_context_destroy()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">restart_monitor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;{</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;   }</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, -1);</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;   }</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a>, 0);</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a>, 0);</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0);</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>())) {</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create schedule context\n&quot;</span>);</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, -1);</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, -1);</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   }</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a> = <a class="code" href="../../dc/dac/io_8h.html#a7d66d121ef63109c2f55188a38b8240f">io_context_create</a>())) {</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create I/O context\n&quot;</span>);</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, -1);</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, -1);</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;   }</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1b50e3739970f82175c130c5194c544f">reload_config</a>(0)) {</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, -1);</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, -1);</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;   }</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;   <span class="comment">/* Make sure we can register our mgcp channel type */</span></div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>)) {</div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register channel class &#39;MGCP&#39;\n&quot;</span>);</div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a5409251fbead35b5e59fe322e14446b9">io_context_destroy</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>);</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, -1);</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, -1);</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;   }</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#ac2fd3e9ee89436cbf6b2ac374bab711b">ast_rtp_glue_register</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8f7b42819bf8c9194e8a30107b3df42d">mgcp_rtp_glue</a>);</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>));</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;   <span class="comment">/* And start the monitor for the first time */</span></div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a>();</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a83af94bb19a421cb25ca02d16fa5ba9c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a></div><div class="ttdeci">static int restart_monitor(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">chan_mgcp.c:3936</a></div></div>
<div class="ttc" id="format__cache_8h_html_a568c3f5838b53c38f11996dbe5ff5785"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a568c3f5838b53c38f11996dbe5ff5785">ast_format_ulaw</a></div><div class="ttdeci">struct ast_format * ast_format_ulaw</div><div class="ttdoc">Built-in cached ulaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00086">format_cache.c:86</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ac2fd3e9ee89436cbf6b2ac374bab711b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ac2fd3e9ee89436cbf6b2ac374bab711b">ast_rtp_glue_register</a></div><div class="ttdeci">#define ast_rtp_glue_register(glue)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00847">rtp_engine.h:847</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="io_8h_html_a5409251fbead35b5e59fe322e14446b9"><div class="ttname"><a href="../../dc/dac/io_8h.html#a5409251fbead35b5e59fe322e14446b9">io_context_destroy</a></div><div class="ttdeci">void io_context_destroy(struct io_context *ioc)</div><div class="ttdoc">Destroys a context. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00107">io.c:107</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a1b50e3739970f82175c130c5194c544f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a1b50e3739970f82175c130c5194c544f">reload_config</a></div><div class="ttdeci">static int reload_config(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">chan_mgcp.c:4683</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abda48311b6abe5a4dd8b6904ddde0a6d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></div><div class="ttdeci">static struct io_context * io</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00245">chan_mgcp.c:245</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cdf7ea5a854eb95bea098cee0286af0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a></div><div class="ttdeci">static struct ast_channel_tech mgcp_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00472">chan_mgcp.c:472</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a27906b68ca8f19bcfd5b7aadb38088f1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a></div><div class="ttdeci">static struct ast_cli_entry cli_mgcp[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01149">chan_mgcp.c:1149</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8f7b42819bf8c9194e8a30107b3df42d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8f7b42819bf8c9194e8a30107b3df42d">mgcp_rtp_glue</a></div><div class="ttdeci">static struct ast_rtp_glue mgcp_rtp_glue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04511">chan_mgcp.c:4511</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="io_8h_html_a7d66d121ef63109c2f55188a38b8240f"><div class="ttname"><a href="../../dc/dac/io_8h.html#a7d66d121ef63109c2f55188a38b8240f">io_context_create</a></div><div class="ttdeci">struct io_context * io_context_create(void)</div><div class="ttdoc">Creates a context Create a context for I/O operations Basically mallocs an IO structure and sets up s...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00081">io.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a5c2da288e4f4ede7a4fd124d80418c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a5c2da288e4f4ede7a4fd124d80418c">&#9670;&nbsp;</a></span>mgcp_alloc_pktcgate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_alloc_pktcgate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02448">2448</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../dd/d95/res__pktccops_8c_source.html#l00468">ast_pktccops_gate_alloc()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00066">cops_gate::gate_open</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00036">GATE_SET</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02435">mgcp_pktcgate_open()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02412">mgcp_pktcgate_remove()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, and <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00067">cops_gate::tech_pvt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>.</p>
<div class="fragment"><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;{</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a> = <a class="code" href="../../dc/d79/pktccops_8h.html#a5699685f17e644436ff2229fa6ad6717">ast_pktccops_gate_alloc</a>(<a class="code" href="../../dc/d79/pktccops_8h.html#a7b1472d57861c1c16e0394cd0f614182ad14032ad3e8d031f11b7eb1d020ef85d">GATE_SET</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ntohl(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr.s_addr),</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;               8, 128000, 232, 0, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abb11ee28d000779a5e9525784072e810">mgcp_pktcgate_remove</a>);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   }</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#affccd41640f9bef6111c0e1f1754e6ed">gate_open</a> = &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac9c5b4c772daf9564a5873da18e5e3d8">mgcp_pktcgate_open</a>;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="pktccops_8h_html_a5699685f17e644436ff2229fa6ad6717"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#a5699685f17e644436ff2229fa6ad6717">ast_pktccops_gate_alloc</a></div><div class="ttdeci">struct cops_gate * ast_pktccops_gate_alloc(int cmd, struct cops_gate *gate, uint32_t mta, uint32_t actcount, float bitrate, uint32_t psize, uint32_t ssip, uint16_t ssport, int(*const got_dq_gi)(struct cops_gate *gate), int(*const gate_remove)(struct cops_gate *gate))</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/res__pktccops_8c_source.html#l00468">res_pktccops.c:468</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcops__gate_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">cops_gate::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00067">pktccops.h:67</a></div></div>
<div class="ttc" id="pktccops_8h_html_a7b1472d57861c1c16e0394cd0f614182ad14032ad3e8d031f11b7eb1d020ef85d"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#a7b1472d57861c1c16e0394cd0f614182ad14032ad3e8d031f11b7eb1d020ef85d">GATE_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00036">pktccops.h:36</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structcops__gate_html_affccd41640f9bef6111c0e1f1754e6ed"><div class="ttname"><a href="../../db/da2/structcops__gate.html#affccd41640f9bef6111c0e1f1754e6ed">cops_gate::gate_open</a></div><div class="ttdeci">int(* gate_open)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00066">pktccops.h:66</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac9c5b4c772daf9564a5873da18e5e3d8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac9c5b4c772daf9564a5873da18e5e3d8">mgcp_pktcgate_open</a></div><div class="ttdeci">static int mgcp_pktcgate_open(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02435">chan_mgcp.c:2435</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abb11ee28d000779a5e9525784072e810"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abb11ee28d000779a5e9525784072e810">mgcp_pktcgate_remove</a></div><div class="ttdeci">static int mgcp_pktcgate_remove(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02412">chan_mgcp.c:2412</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70d80a91ee73bc3da30ffa7fc319d240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70d80a91ee73bc3da30ffa7fc319d240">&#9670;&nbsp;</a></span>mgcp_answer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_answer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01156">1156</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">MGCP_CX_SENDRECV</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;{</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(sub);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP mgcp_answer(%s) on %s@%s-%d\n&quot;</span>,</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;mgcp_answer(%s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a36b9cd6deb29a58ba6c432767d314a35"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a></div><div class="ttdeci">static void start_rtp(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">chan_mgcp.c:2967</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab670737ce602b7e5f077d5f508479b71"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a></div><div class="ttdeci">#define MGCP_CX_SENDRECV</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">chan_mgcp.c:132</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a065f650bbf31f5b322e9dc5008361ee4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a></div><div class="ttdeci">static int transmit_modify_request(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">chan_mgcp.c:2572</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65efb43f278337f3340eb6e33b7f9f3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65efb43f278337f3340eb6e33b7f9f3f">&#9670;&nbsp;</a></span>mgcp_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">826</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00892">ast_channel_connected()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">MGCP_CX_RECVONLY</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">MGCP_CX_SENDRECV</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">mgcp_subchannel::outgoing</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00368">mgcp_endpoint::type</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">TYPE_LINE</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <span class="keywordtype">char</span> tone[50] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *distinctive_ring = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(ast, <span class="stringliteral">&quot;ALERT_INFO&quot;</span>);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP mgcp_call(%s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   sub = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a>) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>:</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(distinctive_ring)) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;         snprintf(tone, <span class="keyword">sizeof</span>(tone), <span class="stringliteral">&quot;L/wt%s&quot;</span>, distinctive_ring);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP distinctive callwait %s\n&quot;</span>, tone);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tone, (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/wt1&quot;</span> : <span class="stringliteral">&quot;L/wt&quot;</span>), <span class="keyword">sizeof</span>(tone));</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP normal callwait %s\n&quot;</span>, tone);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>:</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(distinctive_ring)) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         snprintf(tone, <span class="keyword">sizeof</span>(tone), <span class="stringliteral">&quot;L/r%s&quot;</span>, distinctive_ring);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP distinctive ring %s\n&quot;</span>, tone);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tone, <span class="stringliteral">&quot;L/rg&quot;</span>, <span class="keyword">sizeof</span>(tone));</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP default ring\n&quot;</span>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>) &amp;&amp; (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>)) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;mgcp_call called on %s, neither down nor reserved\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   res = 0;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a> = 1;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac765329451135abec74c45e1897abf26">type</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a>) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(sub);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>)) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         <span class="comment">/* try to prevent a callwait from disturbing the other connection */</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af5d290a73d1b60bff6968dbab9280762">transmit_notify_request_with_callerid</a>(sub, tone,</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>)) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;         <span class="comment">/* Put the connection back in sendrecv */</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Don&#39;t know how to dial on trunks yet\n&quot;</span>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      res = -1;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div><div class="ttc" id="structmgcp__endpoint_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac765329451135abec74c45e1897abf26">mgcp_endpoint::type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00368">chan_mgcp.c:368</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abe6753ebe7fd05e1561f837b71f81372"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abe6753ebe7fd05e1561f837b71f81372">TYPE_LINE</a></div><div class="ttdeci">#define TYPE_LINE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00330">chan_mgcp.c:330</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a36b9cd6deb29a58ba6c432767d314a35"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a></div><div class="ttdeci">static void start_rtp(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">chan_mgcp.c:2967</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af5d290a73d1b60bff6968dbab9280762"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af5d290a73d1b60bff6968dbab9280762">transmit_notify_request_with_callerid</a></div><div class="ttdeci">static int transmit_notify_request_with_callerid(struct mgcp_subchannel *sub, char *tone, char *callernum, char *callername)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">chan_mgcp.c:2527</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab670737ce602b7e5f077d5f508479b71"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab670737ce602b7e5f077d5f508479b71">MGCP_CX_SENDRECV</a></div><div class="ttdeci">#define MGCP_CX_SENDRECV</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00132">chan_mgcp.c:132</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a586fc7c710ade15aabab8f223e53fdd9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">mgcp_subchannel::outgoing</a></div><div class="ttdeci">int outgoing</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">chan_mgcp.c:319</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a065f650bbf31f5b322e9dc5008361ee4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a></div><div class="ttdeci">static int transmit_modify_request(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">chan_mgcp.c:2572</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a583a184d797fe6db5a861d72615c2996"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a></div><div class="ttdeci">#define MGCP_CX_RECVONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">chan_mgcp.c:131</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab55153adaa59725bf7e35849a9711203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab55153adaa59725bf7e35849a9711203">&#9670;&nbsp;</a></span>mgcp_devicestate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_devicestate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>mgcp_devicestate: channel callback for device status monitoring </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>tech/resource name of MGCP device to query</td></tr>
  </table>
  </dd>
</dl>
<p>Callback for device state management in channel subsystem to obtain device status (up/down) of a specific MGCP endpoint</p>
<dl class="section return"><dt>Returns</dt><dd>device status result (from <a class="el" href="../../da/da2/devicestate_8h.html" title="Device state management. ">devicestate.h</a>) AST_DEVICE_INVALID (not available) or AST_DEVICE_UNKNOWN (available but unknown state) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01360">1360</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;{</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a>  *g;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, *endpt, *gw;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keywordtype">int</span> ret = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   endpt = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="keywordflow">if</span> ((tmp = strchr(endpt, <span class="charliteral">&#39;@&#39;</span>))) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      *tmp++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      gw = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordflow">for</span> (g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; g; g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, gw) == 0) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;         e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   <span class="keywordflow">for</span> (; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, endpt) == 0) {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordflow">if</span> (!e)</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">    * As long as the gateway/endpoint is valid, we&#39;ll</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">    * assume that the device is available and its state</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">    * can be tracked.</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   ret = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>:</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab375681bc4e257fcaeba3d880143029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab375681bc4e257fcaeba3d880143029">&#9670;&nbsp;</a></span>mgcp_fixup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_fixup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>oldchan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>newchan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01282">1282</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">mgcp_set_owner()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>
<div class="fragment"><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;{</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(newchan);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;mgcp_fixup(%s, %s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(oldchan), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(newchan));</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> != oldchan) {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;old channel wasn&#39;t %p but was %p\n&quot;</span>, oldchan, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a>(sub, newchan);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6e2e689ac1f43d50401a1a89adb8024c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a></div><div class="ttdeci">static void mgcp_set_owner(struct mgcp_subchannel *sub, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">chan_mgcp.c:1222</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae81dee707cf273647eda24960f6bb439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81dee707cf273647eda24960f6bb439">&#9670;&nbsp;</a></span>mgcp_get_codec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mgcp_get_codec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04503">4503</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>
<div class="fragment"><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;{</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(result, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae31b359cc65d84831e2dfac689635217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31b359cc65d84831e2dfac689635217">&#9670;&nbsp;</a></span>mgcp_get_rtp_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> mgcp_get_rtp_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04475">4475</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00160">AST_RTP_GLUE_RESULT_FORBID</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00164">AST_RTP_GLUE_RESULT_LOCAL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00162">AST_RTP_GLUE_RESULT_REMOTE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00358">mgcp_endpoint::directmedia</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>
<div class="fragment"><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;{</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;   <span class="keywordflow">if</span> (!(sub = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan)) || !(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>))</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, +1);</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   *instance = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>;</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5dc9b8afbbd709a0af68f33b1db740d9">directmedia</a>)</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>;</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8">AST_RTP_GLUE_RESULT_LOCAL</a>;</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;}</div><div class="ttc" id="structmgcp__endpoint_html_a5dc9b8afbbd709a0af68f33b1db740d9"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5dc9b8afbbd709a0af68f33b1db740d9">mgcp_endpoint::directmedia</a></div><div class="ttdeci">int directmedia</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00358">chan_mgcp.c:358</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00162">rtp_engine.h:162</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00160">rtp_engine.h:160</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8">AST_RTP_GLUE_RESULT_LOCAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00164">rtp_engine.h:164</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acae8128b8f746eb5147d49c0b8b90d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae8128b8f746eb5147d49c0b8b90d20">&#9670;&nbsp;</a></span>mgcp_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">902</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">mgcp_subchannel::alreadygone</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10765">ast_channel_bridge_peer()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00569">ast_channel_tech_pvt_set()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dd/d95/res__pktccops_8c_source.html#l00468">ast_pktccops_gate_alloc()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00458">ast_rtp_instance_destroy()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">mgcp_endpoint::callwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00062">cops_gate::deltimer</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">mgcp_endpoint::dsp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00343">mgcp_endpoint::dtmf_buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00044">GATE_ALLOC_PROGRESS</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00045">GATE_ALLOCATED</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00039">GATE_DEL</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00066">cops_gate::gate_open</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00065">cops_gate::gate_remove</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00064">cops_gate::got_dq_gi</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">has_voicemail()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">mgcp_endpoint::hascallwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00362">mgcp_endpoint::hidecallerid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00303">mgcp_subchannel::magic</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">MGCP_CX_INACTIVE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">MGCP_CX_RECVONLY</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">mgcp_set_owner()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00302">MGCP_SUBCHANNEL_MAGIC</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">mgcp_subchannel::outgoing</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00366">mgcp_endpoint::pktcgatealloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00059">cops_gate::state</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00067">cops_gate::tech_pvt</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">mgcp_subchannel::tmpdest</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;{</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;mgcp_hangup(%s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast)) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Asked to hangup channel not connected\n&quot;</span>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordflow">if</span> (strcmp(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">magic</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa25a625ec9a058c8a80ca0c032eb79fd">MGCP_SUBCHANNEL_MAGIC</a>)) {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Invalid magic. MGCP subchannel freed up already.\n&quot;</span>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP mgcp_hangup(%s) on %s@%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   <span class="keywordflow">if</span> ((p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>) &amp;&amp; p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="comment">/* check whether other channel is active. */</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp;= ~<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;MGCP free dsp on %s@%s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;         <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   }</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a>(sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="comment">/* for deleting gate */</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a> &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#affccd41640f9bef6111c0e1f1754e6ed">gate_open</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a9f9987701f8246b3ec9adaeb03a58e7d">gate_remove</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#ac802b82a3e7c2c8f49d35a5fd6b4004d">got_dq_gi</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295aa4274953da0c77d43f4c3ad179af1978">GATE_ALLOC_PROGRESS</a> || sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a>) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;         <a class="code" href="../../dc/d79/pktccops_8h.html#a5699685f17e644436ff2229fa6ad6717">ast_pktccops_gate_alloc</a>(<a class="code" href="../../dc/d79/pktccops_8h.html#a7b1472d57861c1c16e0394cd0f614182a84b1b90b2af99c71fdc3647327b3251a">GATE_DEL</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>, 0, 0, 0, 0, 0, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a4f082e8e0dc78109d9a6e2a44b8973d2">deltimer</a> = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) + 5;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>)) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a>(sub);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   }</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">if</span> ((sub == p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>) &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, bridged, <a class="code" href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>), <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>) {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; bridged) {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <span class="comment">/* ncs fix! */</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af5d290a73d1b60bff6968dbab9280762">transmit_notify_request_with_callerid</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>, (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/wt1&quot;</span> : <span class="stringliteral">&quot;L/wt&quot;</span>),</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;         <span class="comment">/* set our other connection as the primary and swith over to it */</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; bridged) {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af5d290a73d1b60bff6968dbab9280762">transmit_notify_request_with_callerid</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>, <span class="stringliteral">&quot;L/rg&quot;</span>,</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridged)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;         }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((sub == p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>) &amp;&amp; p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;L/v&quot;</span>);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/ro&quot;</span>);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(ast, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">alreadygone</a> = 0;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a> = 0;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="comment">/* Reset temporary destination */</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   memset(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>, 0, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>));</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(<a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">if</span> ((p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>) &amp;&amp; (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>)) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> = 0;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">hascallwaiting</a> &amp;&amp; !p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Enabling call waiting on %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = -1;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a>(p)) {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP mgcp_hangup(%s) on %s@%s set vmwi(+)\n&quot;</span>,</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/vmwi(+)&quot;</span>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP mgcp_hangup(%s) on %s@%s set vmwi(-)\n&quot;</span>,</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/vmwi(-)&quot;</span>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00045">pktccops.h:45</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac20ae67eb69c3c2e13a4e8091ef1c726"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">mgcp_endpoint::hascallwaiting</a></div><div class="ttdeci">int hascallwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">chan_mgcp.c:353</a></div></div>
<div class="ttc" id="structcops__gate_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">cops_gate::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00059">pktccops.h:59</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="pktccops_8h_html_a5699685f17e644436ff2229fa6ad6717"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#a5699685f17e644436ff2229fa6ad6717">ast_pktccops_gate_alloc</a></div><div class="ttdeci">struct cops_gate * ast_pktccops_gate_alloc(int cmd, struct cops_gate *gate, uint32_t mta, uint32_t actcount, float bitrate, uint32_t psize, uint32_t ssip, uint16_t ssport, int(*const got_dq_gi)(struct cops_gate *gate), int(*const gate_remove)(struct cops_gate *gate))</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/res__pktccops_8c_source.html#l00468">res_pktccops.c:468</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6e2e689ac1f43d50401a1a89adb8024c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a></div><div class="ttdeci">static void mgcp_set_owner(struct mgcp_subchannel *sub, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">chan_mgcp.c:1222</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a25c62717d772312686d67d797a562816"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">mgcp_endpoint::hidecallerid</a></div><div class="ttdeci">int hidecallerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00362">chan_mgcp.c:362</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a9532a575bad605efa55a2b77df58d77b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">mgcp_endpoint::dtmf_buf</a></div><div class="ttdeci">char dtmf_buf[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00343">chan_mgcp.c:343</a></div></div>
<div class="ttc" id="structcops__gate_html_a4f082e8e0dc78109d9a6e2a44b8973d2"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a4f082e8e0dc78109d9a6e2a44b8973d2">cops_gate::deltimer</a></div><div class="ttdeci">time_t deltimer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00062">pktccops.h:62</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af5d290a73d1b60bff6968dbab9280762"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af5d290a73d1b60bff6968dbab9280762">transmit_notify_request_with_callerid</a></div><div class="ttdeci">static int transmit_notify_request_with_callerid(struct mgcp_subchannel *sub, char *tone, char *callernum, char *callername)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">chan_mgcp.c:2527</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9fa52623037d0a63fc64fdc5617ca4d6"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">mgcp_subchannel::tmpdest</a></div><div class="ttdeci">struct sockaddr_in tmpdest</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">chan_mgcp.c:309</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcops__gate_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">cops_gate::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00067">pktccops.h:67</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295aa4274953da0c77d43f4c3ad179af1978"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295aa4274953da0c77d43f4c3ad179af1978">GATE_ALLOC_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00044">pktccops.h:44</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a586fc7c710ade15aabab8f223e53fdd9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">mgcp_subchannel::outgoing</a></div><div class="ttdeci">int outgoing</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">chan_mgcp.c:319</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="pktccops_8h_html_a7b1472d57861c1c16e0394cd0f614182a84b1b90b2af99c71fdc3647327b3251a"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#a7b1472d57861c1c16e0394cd0f614182a84b1b90b2af99c71fdc3647327b3251a">GATE_DEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00039">pktccops.h:39</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac141c0eb38c44bc9d1d69633a8deed8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a></div><div class="ttdeci">static int transmit_connection_del(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">chan_mgcp.c:2690</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">mgcp_endpoint::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">chan_mgcp.c:388</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ac43993a73742eff145b861107a1afa0d"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">mgcp_subchannel::alreadygone</a></div><div class="ttdeci">int alreadygone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">chan_mgcp.c:320</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a47a9f50ad99a5568e185a540270296d9"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a47a9f50ad99a5568e185a540270296d9">mgcp_endpoint::pktcgatealloc</a></div><div class="ttdeci">int pktcgatealloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00366">chan_mgcp.c:366</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structcops__gate_html_affccd41640f9bef6111c0e1f1754e6ed"><div class="ttname"><a href="../../db/da2/structcops__gate.html#affccd41640f9bef6111c0e1f1754e6ed">cops_gate::gate_open</a></div><div class="ttdeci">int(* gate_open)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00066">pktccops.h:66</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">mgcp_endpoint::callwaiting</a></div><div class="ttdeci">int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">chan_mgcp.c:352</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structcops__gate_html_a9f9987701f8246b3ec9adaeb03a58e7d"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a9f9987701f8246b3ec9adaeb03a58e7d">cops_gate::gate_remove</a></div><div class="ttdeci">int(* gate_remove)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00065">pktccops.h:65</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a1a36e432446bacea7f1f0b5ab0ac23a9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a1a36e432446bacea7f1f0b5ab0ac23a9">mgcp_subchannel::magic</a></div><div class="ttdeci">char magic[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00303">chan_mgcp.c:303</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0bfe6336fe7deb78148a84aef2732c7a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a></div><div class="ttdeci">int ast_rtp_instance_destroy(struct ast_rtp_instance *instance)</div><div class="ttdoc">Destroy an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00458">rtp_engine.c:458</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_addb3b44d41caa7edff0950888eb4f383"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a></div><div class="ttdeci">static int has_voicemail(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">chan_mgcp.c:490</a></div></div>
<div class="ttc" id="channel_8h_html_af9e27ecd92ff5aa897c9e058dfbd6510"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_channel_bridge_peer(struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10765">channel.c:10765</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a867a1a8b1db505bd0edac7dc85e2627b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a></div><div class="ttdeci">#define MGCP_CX_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">chan_mgcp.c:136</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa25a625ec9a058c8a80ca0c032eb79fd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa25a625ec9a058c8a80ca0c032eb79fd">MGCP_SUBCHANNEL_MAGIC</a></div><div class="ttdeci">#define MGCP_SUBCHANNEL_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00302">chan_mgcp.c:302</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a065f650bbf31f5b322e9dc5008361ee4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a></div><div class="ttdeci">static int transmit_modify_request(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">chan_mgcp.c:2572</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a583a184d797fe6db5a861d72615c2996"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a583a184d797fe6db5a861d72615c2996">MGCP_CX_RECVONLY</a></div><div class="ttdeci">#define MGCP_CX_RECVONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00131">chan_mgcp.c:131</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="channel_8h_html_a929b8b2cb36308e5cf4e51ed880bfcba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a></div><div class="ttdeci">void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00569">channel_internal_api.c:569</a></div></div>
<div class="ttc" id="structcops__gate_html_ac802b82a3e7c2c8f49d35a5fd6b4004d"><div class="ttname"><a href="../../db/da2/structcops__gate.html#ac802b82a3e7c2c8f49d35a5fd6b4004d">cops_gate::got_dq_gi</a></div><div class="ttdeci">int(* got_dq_gi)(struct cops_gate *gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00064">pktccops.h:64</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2106376b4c2e20aae749c5dddb2e6340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2106376b4c2e20aae749c5dddb2e6340">&#9670;&nbsp;</a></span>mgcp_indicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_indicate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01438">1438</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">AST_CONTROL_CONGESTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">AST_CONTROL_INCOMPLETE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">AST_CONTROL_PROCEEDING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">AST_CONTROL_PROGRESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">AST_CONTROL_PVT_CAUSE_CODE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">AST_CONTROL_UNHOLD</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07876">ast_moh_stop()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02160">ast_rtp_instance_change_source()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02151">ast_rtp_instance_update_source()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01406">control2str()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;{</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP asked to indicate %d &#39;%s&#39; condition on channel %s\n&quot;</span>,</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      ind, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a240fa2ebaa98bd76495b1cefde05660a">control2str</a>(ind), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   <span class="keywordflow">switch</span>(ind) {</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="preprocessor">#ifdef DLINK_BUGGY_FIRMWARE</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;rt&quot;</span>);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a>) { <span class="comment">/* will hide the inband progress!!! */</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/rt&quot;</span> : <span class="stringliteral">&quot;G/rt&quot;</span>);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      }</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/bz&quot;</span>);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a>:</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="comment">/* We do not currently support resetting of the Interdigit Timer, so treat</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">       * Incomplete control frames as a congestion response</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/cg&quot;</span> : <span class="stringliteral">&quot;G/cg&quot;</span>);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(ast, data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(ast);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>:</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#aef4f32cf0fa56818892f9eca7a2a8896">ast_rtp_instance_update_source</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>:</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3">ast_rtp_instance_change_source</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a>(sub);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="keywordflow">case</span> -1:</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know how to indicate condition %d\n&quot;</span>, ind);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="comment">/* fallthrough */</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      res = -1;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   }</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_adcb4a92a7c8fd3bcde19ecc417a3e8a3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#adcb4a92a7c8fd3bcde19ecc417a3e8a3">ast_rtp_instance_change_source</a></div><div class="ttdeci">void ast_rtp_instance_change_source(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate a new source of audio has dropped in and the ssrc should change. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02160">rtp_engine.c:2160</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">include/asterisk/frame.h:310</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">include/asterisk/frame.h:292</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">include/asterisk/frame.h:307</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a240fa2ebaa98bd76495b1cefde05660a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a240fa2ebaa98bd76495b1cefde05660a">control2str</a></div><div class="ttdeci">static char * control2str(int ind)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01406">chan_mgcp.c:1406</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a065f650bbf31f5b322e9dc5008361ee4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a065f650bbf31f5b322e9dc5008361ee4">transmit_modify_request</a></div><div class="ttdeci">static int transmit_modify_request(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">chan_mgcp.c:2572</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aef4f32cf0fa56818892f9eca7a2a8896"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aef4f32cf0fa56818892f9eca7a2a8896">ast_rtp_instance_update_source</a></div><div class="ttdeci">void ast_rtp_instance_update_source(struct ast_rtp_instance *instance)</div><div class="ttdoc">Indicate that the RTP marker bit should be set on an RTP stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02151">rtp_engine.c:2151</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd23440bf4f6550a2a21b7498c258f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd23440bf4f6550a2a21b7498c258f10">&#9670;&nbsp;</a></span>mgcp_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* mgcp_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">1494</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00336">mgcp_endpoint::accountcode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00380">mgcp_endpoint::adsi</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00364">mgcp_endpoint::amaflags</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00428">ast_party_caller::ani</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00872">AST_ADSI_UNAVAILABLE</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00785">ast_channel_adsicpe_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01259">ast_channel_alloc</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00411">ast_channel_amaflags_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01078">ast_channel_callgroup_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00348">ast_channel_context_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01086">ast_channel_pickupgroup_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00448">ast_channel_priority_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00457">ast_channel_rings_set()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02431">ast_channel_set_fd()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00828">ast_channel_set_rawreadformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00832">ast_channel_set_rawwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00836">ast_channel_set_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00840">ast_channel_set_writeformat()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01038">ast_channel_stage_snapshot()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01043">ast_channel_stage_snapshot_done()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00569">ast_channel_tech_pvt_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00773">ast_channel_tech_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01745">ast_dsp_new()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01844">ast_dsp_set_digitmode()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01755">ast_dsp_set_features()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03002">ast_get_encoded_str()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d3/d1d/abstract__jb_8c_source.html#l00593">ast_jb_configure()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00443">ast_module_ref</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04712">ast_pbx_start()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02192">ast_rtp_instance_fd()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00642">ast_state2str()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00344">mgcp_endpoint::call_forward</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00350">mgcp_endpoint::callgroup</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">mgcp_endpoint::chanvars</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00341">mgcp_endpoint::cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00340">mgcp_endpoint::cid_num</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00338">mgcp_endpoint::context</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">mgcp_endpoint::dsp</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00034">DSP_DIGITMODE_NOQUELCH</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00028">DSP_FEATURE_DIGIT_DETECT</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00337">mgcp_endpoint::exten</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00114">global_jbconf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00339">mgcp_endpoint::language</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">mgcp_set_owner()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00351">mgcp_endpoint::pickupgroup</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *i = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *tmpfmt;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   <span class="keywordflow">if</span> (!caps) {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Format capabilities could not be created\n&quot;</span>);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   }</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   tmp = <a class="code" href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a>(1, <a class="code" href="../../d4/d88/structstate.html">state</a>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a78d4847658b695383d849efd12399b38">exten</a>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, assignedids, requestor, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>, <span class="stringliteral">&quot;MGCP/%s@%s-%d&quot;</span>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel could not be created\n&quot;</span>);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(tmp);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(tmp, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>)) {</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   }</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(tmp, caps);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(tmp, 0, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 0));</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   <span class="keywordflow">if</span> (i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a> | <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>)) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>();</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, <a class="code" href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a>);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="comment">/* this is to prevent clipping of dtmf tones during dsp processing */</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#aa28ffa065bd46d09b5b06de2f77183b0">ast_dsp_set_digitmode</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, <a class="code" href="../../d3/d08/dsp_8h.html#a3e5f9f8f26812f78103589047d426ea4">DSP_DIGITMODE_NOQUELCH</a>);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   }</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) {</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a>(tmp, 1);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   tmpfmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(tmp), 0);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmpfmt, -1);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(tmp, sub);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">language</a>))</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      ast_channel_language_set(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">language</a>);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>))</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      ast_channel_accountcode_set(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="keywordflow">if</span> (i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>)</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac264c5bfc7884724c7d289662dd6e8ad">ast_channel_amaflags_set</a>(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a>(sub, tmp);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a8dea6491bedba471fc44574d76438577">ast_module_ref</a>(<a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9824ec754695fd10c2ad3ca929afba34">ast_channel_callgroup_set</a>(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af0f007b48a9c8cf0629428bd0483e0d1">callgroup</a>);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae9542942f37422e284dd5c8a3fa7c7b6">ast_channel_pickupgroup_set</a>(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#abc0651bcec68410023c036b7d8ec4d11">pickupgroup</a>);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   ast_channel_call_forward_set(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">context</a>);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(tmp, i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a78d4847658b695383d849efd12399b38">exten</a>);</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   <span class="comment">/* Don&#39;t use ast_set_callerid() here because it will</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">    * generate a needless NewCallerID event */</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>)) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <span class="keywordflow">if</span> (!i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a61fbadf21e15a109d0703a01e0302535">adsi</a>) {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a>(tmp, <a class="code" href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bda5f0673b46cfdba3094393b3fbce084ff">AST_ADSI_UNAVAILABLE</a>);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(tmp, 1);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="comment">/* Set channel variables for this call from configuration */</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   <span class="keywordflow">for</span> (v = i-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">chanvars</a> ; v ; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      <span class="keywordtype">char</span> valuebuf[1024];</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(tmp, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf311701900d162bced0d30e923b92">ast_get_encoded_str</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, valuebuf, <span class="keyword">sizeof</span>(valuebuf)));</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   }</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="../../dc/d14/abstract__jb_8h.html#a0981c84ac90dd79bc2a0fdd90aa6efba">ast_jb_configure</a>(tmp, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a>);</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   }</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(tmp);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(tmp);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d88/structstate.html">state</a> != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>) {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a>(tmp)) {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to start PBX on %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp));</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(tmp);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;         tmp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP mgcp_new(%s) created in state: %s\n&quot;</span>,</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp), <a class="code" href="../../d5/d7b/channel_8h.html#ac97b5983ea4bf3cc217ea898ca002759">ast_state2str</a>(<a class="code" href="../../d4/d88/structstate.html">state</a>));</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="channel_8h_html_ae9542942f37422e284dd5c8a3fa7c7b6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae9542942f37422e284dd5c8a3fa7c7b6">ast_channel_pickupgroup_set</a></div><div class="ttdeci">void ast_channel_pickupgroup_set(struct ast_channel *chan, ast_group_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01086">channel_internal_api.c:1086</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">mgcp_endpoint::cid_num</a></div><div class="ttdeci">char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00340">chan_mgcp.c:340</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">mgcp_endpoint::cid_name</a></div><div class="ttdeci">char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00341">chan_mgcp.c:341</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a2fdf311701900d162bced0d30e923b92"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf311701900d162bced0d30e923b92">ast_get_encoded_str</a></div><div class="ttdeci">char * ast_get_encoded_str(const char *stream, char *result, size_t result_len)</div><div class="ttdoc">Decode a stream of encoded control or extended ASCII characters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03002">main/app.c:3002</a></div></div>
<div class="ttc" id="channel_8h_html_afac6d7d115c1edfe3ad8a8c7fa5d59d1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a></div><div class="ttdeci">void ast_channel_set_writeformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00840">channel_internal_api.c:840</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6e2e689ac1f43d50401a1a89adb8024c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a></div><div class="ttdeci">static void mgcp_set_owner(struct mgcp_subchannel *sub, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">chan_mgcp.c:1222</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="dsp_8h_html_a84818b360426bdd5f588cdca463e15be"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_DIGIT_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00028">dsp.h:28</a></div></div>
<div class="ttc" id="channel_8h_html_aa2df58e77751b741b6891afe210b5b8c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a></div><div class="ttdeci">void ast_channel_set_rawwriteformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00832">channel_internal_api.c:832</a></div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx_8h_html_a9a937fbb3b5f4e68880a9c5714a29ce5"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_start(struct ast_channel *c)</div><div class="ttdoc">Create a new thread and start the PBX. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04712">pbx.c:4712</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a82162415ab1c1e6d5ee85973d68b3655"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">mgcp_endpoint::call_forward</a></div><div class="ttdeci">char call_forward[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00344">chan_mgcp.c:344</a></div></div>
<div class="ttc" id="channel_8h_html_a9824ec754695fd10c2ad3ca929afba34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9824ec754695fd10c2ad3ca929afba34">ast_channel_callgroup_set</a></div><div class="ttdeci">void ast_channel_callgroup_set(struct ast_channel *chan, ast_group_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01078">channel_internal_api.c:1078</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_abc0651bcec68410023c036b7d8ec4d11"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#abc0651bcec68410023c036b7d8ec4d11">mgcp_endpoint::pickupgroup</a></div><div class="ttdeci">ast_group_t pickupgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00351">chan_mgcp.c:351</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="channel_8h_html_ac97b5983ea4bf3cc217ea898ca002759"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac97b5983ea4bf3cc217ea898ca002759">ast_state2str</a></div><div class="ttdeci">const char * ast_state2str(enum ast_channel_state)</div><div class="ttdoc">Gives the string form of a given channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00642">channel.c:642</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_af0566a4937a5bb1323825e4ef89c0e5a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a></div><div class="ttdeci">void ast_channel_tech_set(struct ast_channel *chan, const struct ast_channel_tech *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00773">channel_internal_api.c:773</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adf416dc058363e2fd5750c77e2d78bee">mgcp_endpoint::language</a></div><div class="ttdeci">char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00339">chan_mgcp.c:339</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a921a2d48faa9ed99a59d33e7aefa7888"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a></div><div class="ttdeci">void ast_channel_set_rawreadformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00828">channel_internal_api.c:828</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="structast__party__caller_html_aeeb8c05290fd113bd0d1a3129898fd49"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ast_party_caller::ani</a></div><div class="ttdeci">struct ast_party_id ani</div><div class="ttdoc">Automatic Number Identification (ANI) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00428">channel.h:428</a></div></div>
<div class="ttc" id="channel_8h_html_a0c25448e9c6e2630a8a9cc96b7482cfe"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a></div><div class="ttdeci">void ast_channel_rings_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00457">channel_internal_api.c:457</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a61fbadf21e15a109d0703a01e0302535"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a61fbadf21e15a109d0703a01e0302535">mgcp_endpoint::adsi</a></div><div class="ttdeci">int adsi</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00380">chan_mgcp.c:380</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga920b9d3e484257c7e593452a8e36d8d4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a></div><div class="ttdeci">void ast_channel_stage_snapshot_done(struct ast_channel *chan)</div><div class="ttdoc">Clear flag to indicate channel snapshot is being staged, and publish snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01043">stasis_channels.c:1043</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a06c0918fa1a1aac3d386fca59b12327c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a06c0918fa1a1aac3d386fca59b12327c">mgcp_endpoint::chanvars</a></div><div class="ttdeci">struct ast_variable * chanvars</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00394">chan_mgcp.c:394</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_ab3786cbbff7a03241fc75dafa0c8a1c1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a></div><div class="ttdeci">void ast_channel_set_readformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00836">channel_internal_api.c:836</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="channel_8h_html_ac264c5bfc7884724c7d289662dd6e8ad"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac264c5bfc7884724c7d289662dd6e8ad">ast_channel_amaflags_set</a></div><div class="ttdeci">void ast_channel_amaflags_set(struct ast_channel *chan, enum ama_flags value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00411">channel_internal_api.c:411</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cdf7ea5a854eb95bea098cee0286af0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a></div><div class="ttdeci">static struct ast_channel_tech mgcp_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00472">chan_mgcp.c:472</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a579ca8125bbf48d9ce8691d522f99933"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a579ca8125bbf48d9ce8691d522f99933">mgcp_endpoint::context</a></div><div class="ttdeci">char context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00338">chan_mgcp.c:338</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af0f007b48a9c8cf0629428bd0483e0d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af0f007b48a9c8cf0629428bd0483e0d1">mgcp_endpoint::callgroup</a></div><div class="ttdeci">ast_group_t callgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00350">chan_mgcp.c:350</a></div></div>
<div class="ttc" id="channel_8h_html_aed40a28831fcb5791cd63c1b8761d659"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a></div><div class="ttdeci">void ast_channel_adsicpe_set(struct ast_channel *chan, enum ast_channel_adsicpe value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00785">channel_internal_api.c:785</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adfee50d07a98645d4d20b896ce03785a">mgcp_endpoint::accountcode</a></div><div class="ttdeci">char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00336">chan_mgcp.c:336</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">mgcp_endpoint::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">chan_mgcp.c:388</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad2cfb0f821c065261382a9298bb5a16b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad2cfb0f821c065261382a9298bb5a16b">mgcp_endpoint::amaflags</a></div><div class="ttdeci">int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00364">chan_mgcp.c:364</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf195fcf1686408b5e52ad76996653cea"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a></div><div class="ttdeci">void ast_channel_stage_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Set flag to indicate channel snapshot is being staged. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01038">stasis_channels.c:1038</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a78d4847658b695383d849efd12399b38">mgcp_endpoint::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00337">chan_mgcp.c:337</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abaabcb7f4349cc632dde3af5c6a5e1bd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a></div><div class="ttdeci">static struct ast_jb_conf global_jbconf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00114">chan_mgcp.c:114</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aee3ef7f9e53a34e743c3a95c9ca95fb4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a></div><div class="ttdeci">int ast_rtp_instance_fd(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Get the file descriptor for an RTP session (or RTCP) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02192">rtp_engine.c:2192</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="channel_8h_html_aca37ca2f3d55a223d26617329ed48a3e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a></div><div class="ttdeci">void ast_channel_set_fd(struct ast_channel *chan, int which, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02431">channel.c:2431</a></div></div>
<div class="ttc" id="abstract__jb_8h_html_a0981c84ac90dd79bc2a0fdd90aa6efba"><div class="ttname"><a href="../../dc/d14/abstract__jb_8h.html#a0981c84ac90dd79bc2a0fdd90aa6efba">ast_jb_configure</a></div><div class="ttdeci">void ast_jb_configure(struct ast_channel *chan, const struct ast_jb_conf *conf)</div><div class="ttdoc">Configures a jitterbuffer on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/abstract__jb_8c_source.html#l00593">abstract_jb.c:593</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="channel_8h_html_aca211972dac7b8f3f08a283bfe0aa8bf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a></div><div class="ttdeci">void ast_channel_context_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00348">channel_internal_api.c:348</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a828f537544a2ad2352c56c078390a0bda5f0673b46cfdba3094393b3fbce084ff"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bda5f0673b46cfdba3094393b3fbce084ff">AST_ADSI_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00872">channel.h:872</a></div></div>
<div class="ttc" id="dsp_8h_html_a3e5f9f8f26812f78103589047d426ea4"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a3e5f9f8f26812f78103589047d426ea4">DSP_DIGITMODE_NOQUELCH</a></div><div class="ttdeci">#define DSP_DIGITMODE_NOQUELCH</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00034">dsp.h:34</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="channel_8h_html_ae56cab679c0cda6436b930bc74297895"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a></div><div class="ttdeci">void ast_channel_priority_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00448">channel_internal_api.c:448</a></div></div>
<div class="ttc" id="channel_8h_html_a2f18aafad0442206e71033ac6676dbb5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a></div><div class="ttdeci">#define ast_channel_alloc(needqueue, state, cid_num, cid_name, acctcode, exten, context, assignedids, requestor, amaflag,...)</div><div class="ttdoc">Create a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01259">channel.h:1259</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="channel_8h_html_a929b8b2cb36308e5cf4e51ed880bfcba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a></div><div class="ttdeci">void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00569">channel_internal_api.c:569</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="dsp_8h_html_aa28ffa065bd46d09b5b06de2f77183b0"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aa28ffa065bd46d09b5b06de2f77183b0">ast_dsp_set_digitmode</a></div><div class="ttdeci">int ast_dsp_set_digitmode(struct ast_dsp *dsp, int digitmode)</div><div class="ttdoc">Set digit mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01844">dsp.c:1844</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
<div class="ttc" id="module_8h_html_a8dea6491bedba471fc44574d76438577"><div class="ttname"><a href="../../d5/d16/module_8h.html#a8dea6491bedba471fc44574d76438577">ast_module_ref</a></div><div class="ttdeci">#define ast_module_ref(mod)</div><div class="ttdoc">Hold a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00443">module.h:443</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9c5b4c772daf9564a5873da18e5e3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c5b4c772daf9564a5873da18e5e3d8">&#9670;&nbsp;</a></span>mgcp_pktcgate_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_pktcgate_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/da2/structcops__gate.html">cops_gate</a> *&#160;</td>
          <td class="paramname"><em>gate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02435">2435</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00055">cops_gate::gateid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00067">cops_gate::tech_pvt</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02448">mgcp_alloc_pktcgate()</a>.</p>
<div class="fragment"><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;{</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = gate-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   }</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Pktc: gate 0x%x open\n&quot;</span>, gate-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">gateid</a>);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a>) <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a>(sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcops__gate_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">cops_gate::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00067">pktccops.h:67</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2843e30c260fbe5d077107ad06f0a99e"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a></div><div class="ttdeci">static int transmit_modify_with_sdp(struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp, const struct ast_format_cap *codecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">chan_mgcp.c:2301</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structcops__gate_html_a11c22f2d80c89994b4e0f259101a0d12"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">cops_gate::gateid</a></div><div class="ttdeci">uint32_t gateid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00055">pktccops.h:55</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb11ee28d000779a5e9525784072e810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb11ee28d000779a5e9525784072e810">&#9670;&nbsp;</a></span>mgcp_pktcgate_remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_pktcgate_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/da2/structcops__gate.html">cops_gate</a> *&#160;</td>
          <td class="paramname"><em>gate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02412">2412</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00124">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00046">GATE_CLOSED</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00055">cops_gate::gateid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00367">mgcp_endpoint::hangupongateremove</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00059">cops_gate::state</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, and <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00067">cops_gate::tech_pvt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02448">mgcp_alloc_pktcgate()</a>.</p>
<div class="fragment"><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;{</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = gate-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;   }</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Pktc: gate 0x%x deleted\n&quot;</span>, gate-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">gateid</a>);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> != <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295ab188058b09f5c3f3fa103bf458ec4cae">GATE_CLOSED</a> &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adc859a22440f2b11c5f95d83d4f93362">hangupongateremove</a>) {</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../d4/da3/causes_8h.html#a7f49d27e9e3876fb4ccf1d139d31db73">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a>);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   }</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structcops__gate_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">cops_gate::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00059">pktccops.h:59</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295ab188058b09f5c3f3fa103bf458ec4cae"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295ab188058b09f5c3f3fa103bf458ec4cae">GATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00046">pktccops.h:46</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcops__gate_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a19aa04db5508cf9496602e694dc69e2f">cops_gate::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00067">pktccops.h:67</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adc859a22440f2b11c5f95d83d4f93362"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adc859a22440f2b11c5f95d83d4f93362">mgcp_endpoint::hangupongateremove</a></div><div class="ttdeci">int hangupongateremove</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00367">chan_mgcp.c:367</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structcops__gate_html_a11c22f2d80c89994b4e0f259101a0d12"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">cops_gate::gateid</a></div><div class="ttdeci">uint32_t gateid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00055">pktccops.h:55</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="causes_8h_html_a7f49d27e9e3876fb4ccf1d139d31db73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a7f49d27e9e3876fb4ccf1d139d31db73">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_REQUESTED_CHAN_UNAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00124">causes.h:124</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af072ea217a7fb31eb08de9edfdfbbebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af072ea217a7fb31eb08de9edfdfbbebe">&#9670;&nbsp;</a></span>mgcp_postrequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_postrequest </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seqno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">699</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">__mgcp_xmit()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00278">mgcp_message::buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00126">DEFAULT_RETRANS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00274">mgcp_message::expire</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00276">mgcp_message::len</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">mgcp_gateway::msgs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">mgcp_message::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">mgcp_message::owner_ep</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00272">mgcp_message::owner_sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00273">mgcp_message::retrans</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00644">retrans_pkt()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">mgcp_gateway::retransid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">mgcp_message::seqno</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02768">find_command()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;{</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d0f/structmgcp__message.html">mgcp_message</a> *msg;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d0f/structmgcp__message.html">mgcp_message</a> *cur;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">if</span> (!(msg = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*msg) + <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>))) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (!(gw = ((p &amp;&amp; p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>) ? p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(msg);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a44baf7dcc86ae0f4abf4ca170c90efa1">owner_sub</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">owner_ep</a> = p;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a> = seqno;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a> = 0;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   memcpy(msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a103a957b017f6b717767bba130a02694">buf</a>, data, msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">for</span> (cur = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>; cur &amp;&amp; cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>; cur = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordflow">if</span> (cur) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = msg;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a> = msg;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a7bbf943f27bc537c822698af15bb9f13">expire</a> = now.tv_sec * 1000 + now.tv_usec / 1000 + <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a67ddc3c82f9dfef47f17b23ef3874d8a">DEFAULT_RETRANS</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">if</span> (gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">retransid</a> == -1)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">retransid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a67ddc3c82f9dfef47f17b23ef3874d8a">DEFAULT_RETRANS</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a44e12256095b8a352dbf49879ffa2aa9">retrans_pkt</a>, (<span class="keywordtype">void</span> *)gw);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a>(gw, msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a103a957b017f6b717767bba130a02694">buf</a>, msg-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="comment">/* XXX Should schedule retransmission XXX */</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a7344ce8a58aaa288034af6bdab3cce8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a></div><div class="ttdeci">static int __mgcp_xmit(struct mgcp_gateway *gw, char *data, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">chan_mgcp.c:534</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">mgcp_gateway::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">chan_mgcp.c:419</a></div></div>
<div class="ttc" id="structmgcp__message_html_a99d568ed8b8bd99f5659df1c422794d9"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">mgcp_message::owner_ep</a></div><div class="ttdeci">struct mgcp_endpoint * owner_ep</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">chan_mgcp.c:271</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="structmgcp__message_html"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html">mgcp_message</a></div><div class="ttdoc">mgcp_message: MGCP message for queuing up </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00270">chan_mgcp.c:270</a></div></div>
<div class="ttc" id="structmgcp__message_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a103a957b017f6b717767bba130a02694">mgcp_message::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00278">chan_mgcp.c:278</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a985373ab089816b56bd33ecc0637212c"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">mgcp_gateway::msgs</a></div><div class="ttdeci">struct mgcp_message * msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">chan_mgcp.c:417</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a67ddc3c82f9dfef47f17b23ef3874d8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a67ddc3c82f9dfef47f17b23ef3874d8a">DEFAULT_RETRANS</a></div><div class="ttdeci">#define DEFAULT_RETRANS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00126">chan_mgcp.c:126</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__message_html_a7bbf943f27bc537c822698af15bb9f13"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a7bbf943f27bc537c822698af15bb9f13">mgcp_message::expire</a></div><div class="ttdeci">unsigned long expire</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00274">chan_mgcp.c:274</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="structmgcp__message_html_a4ab21dd2375ec54e44ae4da973a3d4ca"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a4ab21dd2375ec54e44ae4da973a3d4ca">mgcp_message::retrans</a></div><div class="ttdeci">int retrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00273">chan_mgcp.c:273</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__message_html_a3de267d5622f94a1dc06d1d2f2f34d95"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">mgcp_message::next</a></div><div class="ttdeci">struct mgcp_message * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">chan_mgcp.c:277</a></div></div>
<div class="ttc" id="structmgcp__message_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#afed088663f8704004425cdae2120b9b3">mgcp_message::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00276">chan_mgcp.c:276</a></div></div>
<div class="ttc" id="structmgcp__message_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">mgcp_message::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">chan_mgcp.c:275</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a44e12256095b8a352dbf49879ffa2aa9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a44e12256095b8a352dbf49879ffa2aa9">retrans_pkt</a></div><div class="ttdeci">static int retrans_pkt(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00644">chan_mgcp.c:644</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structmgcp__message_html_a44baf7dcc86ae0f4abf4ca170c90efa1"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a44baf7dcc86ae0f4abf4ca170c90efa1">mgcp_message::owner_sub</a></div><div class="ttdeci">struct mgcp_subchannel * owner_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00272">chan_mgcp.c:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d28a19344022f12bddcd7f3a01e59de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d28a19344022f12bddcd7f3a01e59de">&#9670;&nbsp;</a></span>mgcp_prune_realtime_gateway()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_prune_realtime_gateway </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *&#160;</td>
          <td class="paramname"><em>g</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03760">3760</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00189">ast_mutex_trylock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">mgcp_endpoint::cmd_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">mgcp_endpoint::cmd_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">mgcp_subchannel::cx_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">mgcp_subchannel::cx_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">mgcp_endpoint::dsp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00409">mgcp_gateway::ha</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00333">mgcp_endpoint::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">MAX_SUBS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">mgcp_gateway::msgs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">mgcp_gateway::realtime</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">mgcp_endpoint::rqnt_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">mgcp_endpoint::rqnt_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;{</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *enext, *e;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *s, *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;   <span class="keywordtype">int</span> i, prune = 1;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;   <span class="keywordflow">if</span> (g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">ha</a> || !g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">realtime</a> || <a class="code" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a>(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>) || g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>) {</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;   }</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;   <span class="keywordflow">for</span> (e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;      <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> || <a class="code" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>) || <a class="code" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>)) {</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;         prune = 0;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">rqnt_queue</a> || e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a>) {</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;         prune = 0;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;      }</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;      s = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;      <span class="keywordflow">for</span> (i = 0; (i &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>) &amp;&amp; s; i++) {</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>) || s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> || <a class="code" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a>(&amp;s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>) || s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;            prune = 0;</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>) {</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;            prune = 0;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;         }</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;         s = s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      }</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;   }</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;   <span class="keywordflow">for</span> (e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>, sub = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>, enext = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>; e; e = enext, enext = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      <span class="keywordflow">for</span> (i = 0; (i &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a>) &amp;&amp; sub; i++) {</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;         s = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;         sub = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;         <span class="keywordflow">if</span> (prune) {</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;s-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>);</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(s);</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;         }</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      }</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      <span class="keywordflow">if</span> (prune) {</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>);</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>);</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(e);</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;      }</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;   }</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;   <span class="keywordflow">if</span> (prune) {</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;***** MGCP REALTIME PRUNE GW: %s\n&quot;</span>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;   }</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;   <span class="keywordflow">return</span> prune;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29dad1d4c5a8ec28256d8356c9d2f489"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">mgcp_subchannel::cx_queue</a></div><div class="ttdeci">struct mgcp_request * cx_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">chan_mgcp.c:315</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a179943a90ba52fd7b5585e44b3b814fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">mgcp_endpoint::cmd_queue_lock</a></div><div class="ttdeci">ast_mutex_t cmd_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">chan_mgcp.c:385</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cecb71b936e9c443f548540fb7a54ff"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cecb71b936e9c443f548540fb7a54ff">MAX_SUBS</a></div><div class="ttdeci">#define MAX_SUBS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00291">chan_mgcp.c:291</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="lock_8h_html_a987fc536e8b6a1044689eca873610792"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a></div><div class="ttdeci">#define ast_mutex_trylock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00189">lock.h:189</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad84a7f16dcc58220e722b87572c59984"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">mgcp_endpoint::rqnt_queue</a></div><div class="ttdeci">struct mgcp_request * rqnt_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">chan_mgcp.c:382</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a985373ab089816b56bd33ecc0637212c"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">mgcp_gateway::msgs</a></div><div class="ttdeci">struct mgcp_message * msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">chan_mgcp.c:417</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">mgcp_endpoint::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">chan_mgcp.c:388</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_af15f3d61ee3636e814aeedff3d001594"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">mgcp_subchannel::cx_queue_lock</a></div><div class="ttdeci">ast_mutex_t cx_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">chan_mgcp.c:316</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_endpoint::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00333">chan_mgcp.c:333</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5aa61adfb890b26d29a1a345329ff204"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">mgcp_endpoint::rqnt_queue_lock</a></div><div class="ttdeci">ast_mutex_t rqnt_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">chan_mgcp.c:383</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a6c6c2b6adbe74acc944bc0c55b16c8f4"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a6c6c2b6adbe74acc944bc0c55b16c8f4">mgcp_gateway::ha</a></div><div class="ttdeci">struct ast_ha * ha</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00409">chan_mgcp.c:409</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0cd9821136cf8ae2d1c640f8f8c87540"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">mgcp_endpoint::cmd_queue</a></div><div class="ttdeci">struct mgcp_request * cmd_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">chan_mgcp.c:384</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aac1ae37fa4007496a50df75cf1f698c1"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">mgcp_gateway::realtime</a></div><div class="ttdeci">int realtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">chan_mgcp.c:421</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06fc1b4a43dbe0326aca85f9242759c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06fc1b4a43dbe0326aca85f9242759c1">&#9670;&nbsp;</a></span>mgcp_queue_control()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mgcp_queue_control </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>control</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00638">638</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00604">mgcp_queue_frame()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;{</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, { control } };</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3a1037f8c24ba97837b6f91d87aa88b7">mgcp_queue_frame</a>(sub, &amp;f);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a3a1037f8c24ba97837b6f91d87aa88b7"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3a1037f8c24ba97837b6f91d87aa88b7">mgcp_queue_frame</a></div><div class="ttdeci">static void mgcp_queue_frame(struct mgcp_subchannel *sub, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00604">chan_mgcp.c:604</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a1037f8c24ba97837b6f91d87aa88b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a1037f8c24ba97837b6f91d87aa88b7">&#9670;&nbsp;</a></span>mgcp_queue_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mgcp_queue_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00604">604</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02947">ast_channel_trylock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00374">DEADLOCK_AVOIDANCE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00638">mgcp_queue_control()</a>.</p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>)) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, f);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;         }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div><div class="ttc" id="lock_8h_html_a851106e971b4611a38cb4be8b39d9fcf"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a></div><div class="ttdeci">#define DEADLOCK_AVOIDANCE(lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00374">lock.h:374</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a7dc0d696d897c864c6f41a3a1795c82e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a></div><div class="ttdeci">#define ast_channel_trylock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02947">channel.h:2947</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f3b129ca45af64249c42597b5b414f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f3b129ca45af64249c42597b5b414f8">&#9670;&nbsp;</a></span>mgcp_queue_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mgcp_queue_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">621</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02947">ast_channel_trylock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01150">ast_queue_hangup()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00374">DEADLOCK_AVOIDANCE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03281">attempt_transfer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;{</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>)) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div><div class="ttc" id="channel_8h_html_a30bcf0418189567bc84ff32034f79f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a></div><div class="ttdeci">int ast_queue_hangup(struct ast_channel *chan)</div><div class="ttdoc">Queue a hangup frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01150">channel.c:1150</a></div></div>
<div class="ttc" id="lock_8h_html_a851106e971b4611a38cb4be8b39d9fcf"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a></div><div class="ttdeci">#define DEADLOCK_AVOIDANCE(lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00374">lock.h:374</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a7dc0d696d897c864c6f41a3a1795c82e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a></div><div class="ttdeci">#define ast_channel_trylock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02947">channel.h:2947</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf002630286080c18671a086c9ddf295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf002630286080c18671a086c9ddf295">&#9670;&nbsp;</a></span>mgcp_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> * mgcp_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01230">1230</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01181">mgcp_rtp_read()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>
<div class="fragment"><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;{</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   f = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa9c0290e2918f7caff37d4349b7309cd">mgcp_rtp_read</a>(sub);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa9c0290e2918f7caff37d4349b7309cd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa9c0290e2918f7caff37d4349b7309cd">mgcp_rtp_read</a></div><div class="ttdeci">static struct ast_frame * mgcp_rtp_read(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01181">chan_mgcp.c:1181</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77cdf1904a692082f9ddf294576da000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77cdf1904a692082f9ddf294576da000">&#9670;&nbsp;</a></span>mgcp_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * mgcp_reload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">4908</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">mgcp_reload_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">mgcp_reloading</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">restart_monitor()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04941">reload()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;{</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> deprecated = 0;</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;   <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;      <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;         e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;mgcp reload&quot;</span>;</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;         e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;            <span class="stringliteral">&quot;Usage: mgcp reload\n&quot;</span></div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;            <span class="stringliteral">&quot;       &#39;mgcp reload&#39; is deprecated.  Please use &#39;reload chan_mgcp.so&#39; instead.\n&quot;</span>;</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;      }</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;   }</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;   <span class="keywordflow">if</span> (!deprecated &amp;&amp; a &amp;&amp; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 0) {</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;mgcp reload&#39; is deprecated.  Please use &#39;reload chan_mgcp.so&#39; instead.\n&quot;</span>);</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;      deprecated = 1;</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;   }</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a>);</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a>) {</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Previous mgcp reload not yet done\n&quot;</span>);</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a> = 1;</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;   }</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a>);</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a>();</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a83af94bb19a421cb25ca02d16fa5ba9c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a></div><div class="ttdeci">static int restart_monitor(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">chan_mgcp.c:3936</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2671cbe3684e201b2b8e7d777164008b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a></div><div class="ttdeci">static int mgcp_reloading</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">chan_mgcp.c:427</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa4a641fafb6e5bea7d8db5ed5641f47f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a></div><div class="ttdeci">static ast_mutex_t mgcp_reload_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">chan_mgcp.c:426</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0005d576f7ab2779a0e7c342574fe504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0005d576f7ab2779a0e7c342574fe504">&#9670;&nbsp;</a></span>mgcp_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> * <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">3965</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00148">AST_CAUSE_BUSY</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00153">AST_CAUSE_UNREGISTERED</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00655">ast_format_cap_iscompatible()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00344">mgcp_endpoint::call_forward</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">mgcp_endpoint::callwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00360">mgcp_endpoint::dnd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">has_voicemail()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">restart_monitor()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;{</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *tmpc = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a>(cap, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>))) {</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *cap_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Asked to get a channel of unsupported format &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(cap, &amp;cap_buf));</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;      <span class="comment">/*return NULL;*/</span></div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;   }</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, dest, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;MGCP Channels require an endpoint\n&quot;</span>);</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;   }</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;   <span class="keywordflow">if</span> (!(sub = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a66b3dee1d5d35309cd652eedc070fa06">find_subchannel_and_lock</a>(tmp, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to find MGCP endpoint &#39;%s&#39;\n&quot;</span>, tmp);</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      *cause = <a class="code" href="../../d4/da3/causes_8h.html#acfea62de81ffbf78fd4856ad9ded150b">AST_CAUSE_UNREGISTERED</a>;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;   }</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP mgcp_request(%s)\n&quot;</span>, tmp);</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP cw: %d, dnd: %d, so: %d, sno: %d\n&quot;</span>,</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad52206ee8911b66a991ba50741dad2a7">dnd</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ? 1 : 0, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ? 1: 0);</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;   <span class="comment">/* Must be busy */</span></div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;   <span class="keywordflow">if</span> (((sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>) &amp;&amp; ((sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) &amp;&amp; (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>))) ||</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;      ((!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a>) &amp;&amp; (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>)) ||</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;       (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad52206ee8911b66a991ba50741dad2a7">dnd</a> &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>)))) {</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a> == <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>) {</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>)) {</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub,<span class="stringliteral">&quot;L/vmwi(+)&quot;</span>);</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub,<span class="stringliteral">&quot;L/vmwi(-)&quot;</span>);</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;         }</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      }</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;      *cause = <a class="code" href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a>;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   }</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   tmpc = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#acd23440bf4f6550a2a21b7498c258f10">mgcp_new</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ? sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a> : sub, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>, assignedids, requestor);</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;   <span class="keywordflow">if</span> (!tmpc)</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to make channel for &#39;%s&#39;\n&quot;</span>, tmp);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a>();</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;   <span class="keywordflow">return</span> tmpc;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a83af94bb19a421cb25ca02d16fa5ba9c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a83af94bb19a421cb25ca02d16fa5ba9c">restart_monitor</a></div><div class="ttdeci">static int restart_monitor(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">chan_mgcp.c:3936</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a82162415ab1c1e6d5ee85973d68b3655"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">mgcp_endpoint::call_forward</a></div><div class="ttdeci">char call_forward[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00344">chan_mgcp.c:344</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_acd23440bf4f6550a2a21b7498c258f10"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#acd23440bf4f6550a2a21b7498c258f10">mgcp_new</a></div><div class="ttdeci">static struct ast_channel * mgcp_new(struct mgcp_subchannel *sub, int state, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">chan_mgcp.c:1494</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">mgcp_endpoint::callwaiting</a></div><div class="ttdeci">int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">chan_mgcp.c:352</a></div></div>
<div class="ttc" id="causes_8h_html_acfea62de81ffbf78fd4856ad9ded150b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#acfea62de81ffbf78fd4856ad9ded150b">AST_CAUSE_UNREGISTERED</a></div><div class="ttdeci">#define AST_CAUSE_UNREGISTERED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00153">causes.h:153</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a66b3dee1d5d35309cd652eedc070fa06"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a66b3dee1d5d35309cd652eedc070fa06">find_subchannel_and_lock</a></div><div class="ttdeci">static struct mgcp_subchannel * find_subchannel_and_lock(char *name, int msgid, struct sockaddr_in *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">chan_mgcp.c:1777</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_addb3b44d41caa7edff0950888eb4f383"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#addb3b44d41caa7edff0950888eb4f383">has_voicemail</a></div><div class="ttdeci">static int has_voicemail(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00490">chan_mgcp.c:490</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad52206ee8911b66a991ba50741dad2a7"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad52206ee8911b66a991ba50741dad2a7">mgcp_endpoint::dnd</a></div><div class="ttdeci">int dnd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00360">chan_mgcp.c:360</a></div></div>
<div class="ttc" id="causes_8h_html_ae009c193522491f7de7ea28b23f20868"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00148">causes.h:148</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9c9b87b5062c057862aa7d4237db2780"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a></div><div class="ttdeci">int ast_format_cap_iscompatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2)</div><div class="ttdoc">Determine if any joint capabilities exist between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00655">format_cap.c:655</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9c0290e2918f7caff37d4349b7309cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c0290e2918f7caff37d4349b7309cd">&#9670;&nbsp;</a></span>mgcp_rtp_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* mgcp_rtp_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01181">1181</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01494">ast_dsp_process()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00578">ast_rtp_instance_read()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">mgcp_endpoint::dsp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">MGCP_DTMF_RFC2833</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01230">mgcp_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;{</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="comment">/* Retrieve audio/etc from channel.  Assumes sub-&gt;lock is already held. */</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   f = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 0);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   <span class="comment">/* Don&#39;t send RFC2833 if we&#39;re not supposed to */</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   <span class="keywordflow">if</span> (f &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) &amp;&amp; !(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a>))</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="comment">/* We already hold the channel lock */</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>), f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Oooh, format changed to %s\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="keywordflow">if</span> (caps) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;               <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(caps, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, 0);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, caps);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;               <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>));</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>));</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;         }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;         <span class="comment">/* Courtesy fearnor aka alex@pilosoft.com */</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;         <span class="keywordflow">if</span> ((sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>) &amp;&amp; (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>)) {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;MGCP ast_dsp_process\n&quot;</span>);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            f = <a class="code" href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, f);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;}</div><div class="ttc" id="dsp_8h_html_ab6387ee12a3544d3d2068db61d9576ad"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a></div><div class="ttdeci">struct ast_frame * ast_dsp_process(struct ast_channel *chan, struct ast_dsp *dsp, struct ast_frame *inf)</div><div class="ttdoc">Return AST_FRAME_NULL frames when there is silence, AST_FRAME_BUSY on busies, and call progress...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01494">dsp.c:1494</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa353952ead7c2baf3751641612e89c43"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a></div><div class="ttdeci">#define MGCP_DTMF_RFC2833</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">chan_mgcp.c:119</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ab9deccb020b39c3f7ac94b1af99cac5d">mgcp_endpoint::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00388">chan_mgcp.c:388</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a8e272a4ee35206ff8c4c0384b9e3f592"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a8e272a4ee35206ff8c4c0384b9e3f592">ast_rtp_instance_read</a></div><div class="ttdeci">struct ast_frame * ast_rtp_instance_read(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Receive a frame over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00578">rtp_engine.c:578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80d9cab0b2c487a9b622b3accac5b16e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d9cab0b2c487a9b622b3accac5b16e">&#9670;&nbsp;</a></span>mgcp_senddigit_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_senddigit_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01298">1298</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02081">ast_rtp_instance_dtmf_begin()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">MGCP_DTMF_RFC2833</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>.</p>
<div class="fragment"><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;{</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a> || p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending DTMF using inband/hybrid\n&quot;</span>);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      res = -1; <span class="comment">/* Let asterisk play inband indications */</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a>) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending DTMF using RFC2833\n&quot;</span>);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Don&#39;t know about DTMF_MODE %d\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa353952ead7c2baf3751641612e89c43"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a></div><div class="ttdeci">#define MGCP_DTMF_RFC2833</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">chan_mgcp.c:119</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a60d6422d11e8d18f20596a91988d9275"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_begin(struct ast_rtp_instance *instance, char digit)</div><div class="ttdoc">Begin sending a DTMF digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02081">rtp_engine.c:2081</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2f5159e438f61d22c89a40523becc95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f5159e438f61d22c89a40523becc95">&#9670;&nbsp;</a></span>mgcp_senddigit_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_senddigit_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01319">1319</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02095">ast_rtp_instance_dtmf_end()</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">MGCP_DTMF_RFC2833</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;{</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[4];</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a> || p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopping DTMF using inband/hybrid\n&quot;</span>);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      res = -1; <span class="comment">/* Tell Asterisk to stop inband indications */</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a>) {</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopping DTMF using RFC2833\n&quot;</span>);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a>) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;         tmp[0] = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;         tmp[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;         tmp[0] = <span class="charliteral">&#39;D&#39;</span>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;         tmp[1] = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         tmp[2] = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         tmp[3] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, tmp);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad01e15ecfeaebeaf55cf0c984ee9ff2f">ast_rtp_instance_dtmf_end</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Don&#39;t know about DTMF_MODE %d\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa353952ead7c2baf3751641612e89c43"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa353952ead7c2baf3751641612e89c43">MGCP_DTMF_RFC2833</a></div><div class="ttdeci">#define MGCP_DTMF_RFC2833</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00119">chan_mgcp.c:119</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad01e15ecfeaebeaf55cf0c984ee9ff2f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad01e15ecfeaebeaf55cf0c984ee9ff2f">ast_rtp_instance_dtmf_end</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_end(struct ast_rtp_instance *instance, char digit)</div><div class="ttdoc">Stop sending a DTMF digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02095">rtp_engine.c:2095</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e2e689ac1f43d50401a1a89adb8024c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e2e689ac1f43d50401a1a89adb8024c">&#9670;&nbsp;</a></span>mgcp_set_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mgcp_set_owner </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">1222</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00553">ast_rtp_instance_set_channel_id()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01282">mgcp_fixup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">unalloc_sub()</a>.</p>
<div class="fragment"><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;{</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> = chan;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ? <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   }</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_ab88c871dd5c164b7a0a6af5e7e12d16f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a></div><div class="ttdeci">void ast_rtp_instance_set_channel_id(struct ast_rtp_instance *instance, const char *uniqueid)</div><div class="ttdoc">Set the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00553">rtp_engine.c:553</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1babad7069f432ba27ac4d9bf0c3ec2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1babad7069f432ba27ac4d9bf0c3ec2d">&#9670;&nbsp;</a></span>mgcp_set_rtp_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_set_rtp_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>vrtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>trtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nat_active</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04491">4491</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">mgcp_subchannel::alreadygone</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;{</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;   <span class="comment">/* XXX Is there such thing as video support with MGCP? XXX */</span></div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;   sub = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;   <span class="keywordflow">if</span> (sub &amp;&amp; !sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">alreadygone</a>) {</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a>(sub, rtp, cap);</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;   }</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2843e30c260fbe5d077107ad06f0a99e"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a></div><div class="ttdeci">static int transmit_modify_with_sdp(struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp, const struct ast_format_cap *codecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">chan_mgcp.c:2301</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ac43993a73742eff145b861107a1afa0d"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">mgcp_subchannel::alreadygone</a></div><div class="ttdeci">int alreadygone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">chan_mgcp.c:320</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a214f94866cb7db3e8fadf80f65fa3735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a214f94866cb7db3e8fadf80f65fa3735">&#9670;&nbsp;</a></span>mgcp_ss()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* mgcp_ss </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">3000</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04194">ast_canmatch_extension()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00904">ast_channel_dialed()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10783">ast_channel_get_bridge_channel()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01193">ast_get_chan_features_pickup_config()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06921">ast_ignore_pattern()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04199">ast_matchmore_extension()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00135">AST_MAX_EXTENSION</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00143">ast_parking_blind_transfer_park()</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00179">ast_parking_is_exten_park()</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00241">ast_parking_provider_registered()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04759">ast_pbx_run()</a>, <a class="el" href="../../d9/dbf/pickup_8c_source.html#l00200">ast_pickup_call()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01574">ast_safe_sleep()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08355">ast_say_digit_str()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07434">ast_set_callerid()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03184">ast_waitfordigit()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00344">mgcp_endpoint::call_forward</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00359">mgcp_endpoint::callreturn</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">mgcp_endpoint::callwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00357">mgcp_endpoint::cancallforward</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00341">mgcp_endpoint::cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00340">mgcp_endpoint::cid_num</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00083">ast_channel::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00360">mgcp_endpoint::dnd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00343">mgcp_endpoint::dtmf_buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">mgcp_endpoint::dtmfmode</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00214">firstdigittimeout</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00217">gendigittimeout</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">mgcp_endpoint::hascallwaiting</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00362">mgcp_endpoint::hidecallerid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00342">mgcp_endpoint::lastcallerid</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00220">matchdigittimeout</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">MGCP_DTMF_HYBRID</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">MGCP_DTMF_INBAND</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00113">ast_channel::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">mgcp_subchannel::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">ast_party_dialed::number</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00387">ast_party_dialed::str</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>.</p>
<div class="fragment"><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;{</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   <span class="comment">/* char exten[AST_MAX_EXTENSION] = &quot;&quot;; */</span></div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a>;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   <span class="keywordtype">int</span> res= 0;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;   <span class="keywordtype">int</span> getforward = 0;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   <span class="keywordtype">int</span> loop_pause = 100;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a> *, pickup_cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *pickupexten;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;   len = strlen(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>);</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   pickup_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a>(chan);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   <span class="keywordflow">if</span> (!pickup_cfg) {</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve pickup configuration options. Unable to detect call pickup extension\n&quot;</span>);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      pickupexten = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;      pickupexten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(pickup_cfg-&gt;pickupexten);</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;   }</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;   <span class="keywordflow">while</span> (len &lt; <a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a> - 1) {</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Dtmf buffer &#39;%s&#39; for &#39;%s@%s&#39;\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      res = 1;  <span class="comment">/* Assume that we will get a digit */</span></div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <span class="keywordflow">while</span> (strlen(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>) == len) {</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(chan, loop_pause);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;         timeout -= loop_pause;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;         <span class="keywordflow">if</span> (timeout &lt;= 0){</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;            res = 0;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;         }</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;         res = 1;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      }</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      timeout = 0;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;      len = strlen(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>);</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>)) {</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, -1);*/</span></div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;         <span class="comment">/* XXX Redundant?  We should already be playing dialtone */</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;         <span class="comment">/*tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALTONE);*/</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/dl&quot;</span>);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      }</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 1, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>)) {</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;         <span class="keywordflow">if</span> (!res || !<a class="code" href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 1, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>)) {</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;            <span class="keywordflow">if</span> (getforward) {</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;               <span class="comment">/* Record this as the forwarding extension */</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>));</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting call forward to &#39;%s&#39; on channel %s\n&quot;</span>,</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;                     p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;               <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;               <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;               usleep(500000);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;               <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, -1);*/</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;               sleep(1);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;               memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;               <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALTONE);*/</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;               <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/dl&quot;</span>);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;               len = 0;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;               getforward = 0;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;               <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, -1);*/</span></div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(chan, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>);</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan)-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>);</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;               memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan,</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;                  p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> ? <span class="stringliteral">&quot;&quot;</span> : p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>,</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                  p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> ? <span class="stringliteral">&quot;&quot;</span> : p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>,</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;ani.number.valid ? <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>);</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;               <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(chan, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>);</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;               <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> &amp; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a>) {</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;                  p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> |= <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a>;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;               }</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;               res = <a class="code" href="../../db/de0/pbx_8h.html#a44b6406c9220f7f2b610ac712369f405">ast_pbx_run</a>(chan);</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;               <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;PBX exited non-zero\n&quot;</span>);</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;                  <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_CONGESTION);*/</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;                  <span class="comment">/*transmit_notify_request(p, &quot;nbz&quot;, 1);*/</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;                  <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/cg&quot;</span> : <span class="stringliteral">&quot;G/cg&quot;</span>);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;               }</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;            }</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;            <span class="comment">/* It&#39;s a match, but they just typed a digit, and there is an ambiguous match,</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment">               so just set the timeout to matchdigittimeout and wait some more */</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;            timeout = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a24514343553b05c66e5b7d16e2df45cc">matchdigittimeout</a>;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;         }</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;not enough digits (and no ambiguous match)...\n&quot;</span>);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_CONGESTION);*/</span></div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/cg&quot;</span> : <span class="stringliteral">&quot;G/cg&quot;</span>);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;         <span class="comment">/*dahdi_wait_event(p-&gt;subs[index].zfd);*/</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">hascallwaiting</a> &amp;&amp; p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*70&quot;</span>)) {</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Disabling call waiting on %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;         <span class="comment">/* Disable call waiting if enabled */</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">callwaiting</a> = 0;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;         len = 0;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;         timeout = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a>;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, pickupexten)) {</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;         <span class="comment">/* Scan all channels and see if any there</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;<span class="comment">          * ringing channqels with that have call groups</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="comment">          * that equal this channels pickup group</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a>(chan)) {</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No call pickup possible...\n&quot;</span>);</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;            <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_CONGESTION);*/</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> ? <span class="stringliteral">&quot;L/cg&quot;</span> : <span class="stringliteral">&quot;G/cg&quot;</span>);</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;         }</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*67&quot;</span>)) {</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Disabling Caller*ID on %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;         <span class="comment">/* Disable Caller*ID if enabled */</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> = 1;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;         len = 0;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         timeout = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a>;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ae9a1904e14c83a51df312f22eb7edd24">callreturn</a> &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*69&quot;</span>)) {</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;         res = 0;</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>)) {</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            res = <a class="code" href="../../db/dce/say_8h.html#ac8bd6c34b6aa664adb9ebfab68a500ce">ast_say_digit_str</a>(chan, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;         }</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*78&quot;</span>)) {</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;         <span class="comment">/* Do not disturb */</span></div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Enabled DND on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad52206ee8911b66a991ba50741dad2a7">dnd</a> = 1;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;         getforward = 0;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;         len = 0;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*79&quot;</span>)) {</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;         <span class="comment">/* Do not disturb */</span></div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Disabled DND on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad52206ee8911b66a991ba50741dad2a7">dnd</a> = 0;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;         getforward = 0;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;         len = 0;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a> &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*72&quot;</span>)) {</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;         getforward = 1;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;         len = 0;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aef81e9f93aaf81a1523a89dd1c54e41f">cancallforward</a> &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*73&quot;</span>)) {</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Cancelling call forwarding on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">call_forward</a>));</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;         getforward = 0;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;         len = 0;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d33/parking_8h.html#ae6064ecb9b802ce85e93ddfa7719c433">ast_parking_provider_registered</a>() &amp;&amp; <a class="code" href="../../d2/d33/parking_8h.html#a2ce15efe7765108411829ef993681e01">ast_parking_is_exten_park</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>) &amp;&amp;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">next</a>-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *, bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;         <span class="comment">/* This is a three way call, the main call being a real channel,</span></div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">            and we&#39;re parking the first call. */</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;         bridge_channel = <a class="code" href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(chan);</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;         <span class="keywordflow">if</span> (bridge_channel &amp;&amp; !<a class="code" href="../../d2/d33/parking_8h.html#a0ede734145efa668143b11b31b49c6b0">ast_parking_blind_transfer_park</a>(bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Parking call to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;         }</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>) &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*60&quot;</span>)) {</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Blacklisting number %s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>);</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;         res = <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;blacklist&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;         <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;            <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;            memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;            len = 0;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;         }</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> &amp;&amp; !strcmp(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, <span class="stringliteral">&quot;*82&quot;</span>)) {</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Enabling Caller*ID on %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;         <span class="comment">/* Enable Caller*ID if enabled */</span></div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;         p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">hidecallerid</a> = 0;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;         <span class="comment">/*res = tone_zone_play_tone(p-&gt;subs[index].zfd, DAHDI_TONE_DIALRECALL);*/</span></div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a>(sub, <span class="stringliteral">&quot;L/sl&quot;</span>);</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;         len = 0;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;         timeout = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a>;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 1,</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;         &amp;&amp; ((p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>[0] != <span class="charliteral">&#39;*&#39;</span>) || (strlen(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>) &gt; 2))) {</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Can&#39;t match %s from &#39;%s&#39; in context %s\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>,</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&lt;Unknown Caller&gt;&quot;</span>),</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan));</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;      }</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;      <span class="keywordflow">if</span> (!timeout)</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;         timeout = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa319ef1606201db158ce7195fb8eed45">gendigittimeout</a>;</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      <span class="keywordflow">if</span> (len &amp;&amp; !<a class="code" href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>))</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;         <span class="comment">/*tone_zone_play_tone(p-&gt;subs[index].zfd, -1);*/</span></div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;   }</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, to);</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Timeout...\n&quot;</span>);</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;      }</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Got hangup...\n&quot;</span>);</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      }</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[pos++] = res;</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a>(chan-&gt;context, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a>(chan, chan-&gt;context, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, 1, chan-&gt;callerid)) {</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(chan, chan-&gt;context, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, 1, chan-&gt;callerid))</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            to = 3000;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;            to = 8000;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;   }</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(chan, chan-&gt;context, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, 1, chan-&gt;callerid)) {</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(chan-&gt;exten, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">sizeof</span>(chan-&gt;exten)1);</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      <span class="keywordflow">if</span> (!p-&gt;rtp) {</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a>(p);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;      }</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(chan, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>);</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;      chan-&gt;rings = 1;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a44b6406c9220f7f2b610ac712369f405">ast_pbx_run</a>(chan)) {</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to launch PBX on %s\n&quot;</span>, chan-&gt;<a class="code" href="../../df/d3c/structast__channel.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;         memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      }</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;   }</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;   memset(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>, 0, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">dtmf_buf</a>));</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_af10e3bd01602095e1908d3926afc3b76"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a></div><div class="ttdeci">int ast_safe_sleep(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01574">channel.c:1574</a></div></div>
<div class="ttc" id="channel_8h_html_a88d833a56ea7de33e230281c5c12b75d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a></div><div class="ttdeci">void ast_set_callerid(struct ast_channel *chan, const char *cid_num, const char *cid_name, const char *cid_ani)</div><div class="ttdoc">Set caller ID number, name and ANI and generate AMI event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07434">channel.c:7434</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a36b9cd6deb29a58ba6c432767d314a35"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a36b9cd6deb29a58ba6c432767d314a35">start_rtp</a></div><div class="ttdeci">static void start_rtp(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">chan_mgcp.c:2967</a></div></div>
<div class="ttc" id="pbx_8h_html_ac359af75b9494f50904583d2168a7577"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a></div><div class="ttdeci">int ast_matchmore_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks to see if adding anything to this extension might match something. (exists ^ canmatch) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04199">pbx.c:4199</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__party__dialed_html_a436a3700bd4ae24751d7fad4538466aa"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">ast_party_dialed::number</a></div><div class="ttdeci">struct ast_party_dialed::@246 number</div><div class="ttdoc">Dialed/Called number. </div></div>
<div class="ttc" id="structmgcp__endpoint_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a29e973bd94bfbaf59d939bd1bc988c32">mgcp_endpoint::cid_num</a></div><div class="ttdeci">char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00340">chan_mgcp.c:340</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afd3be8e865f060b68db4d7c966489e0a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a></div><div class="ttdeci">static int firstdigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00214">chan_mgcp.c:214</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_ad9d12b10a3d0c3bca1d0b033bc139dab"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a></div><div class="ttdeci">struct ast_features_pickup_config * ast_get_chan_features_pickup_config(struct ast_channel *chan)</div><div class="ttdoc">Get the pickup configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01193">features_config.c:1193</a></div></div>
<div class="ttc" id="structast__party__dialed_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_dialed::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00387">channel.h:387</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af311aecfc6a3ee5035d14b33e77ef7ab"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">mgcp_endpoint::lastcallerid</a></div><div class="ttdeci">char lastcallerid[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00342">chan_mgcp.c:342</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ade5a89f9bee15a492c760ec1765a292d">mgcp_endpoint::cid_name</a></div><div class="ttdeci">char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00341">chan_mgcp.c:341</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ac20ae67eb69c3c2e13a4e8091ef1c726"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ac20ae67eb69c3c2e13a4e8091ef1c726">mgcp_endpoint::hascallwaiting</a></div><div class="ttdeci">int hascallwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00353">chan_mgcp.c:353</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a25c62717d772312686d67d797a562816"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a25c62717d772312686d67d797a562816">mgcp_endpoint::hidecallerid</a></div><div class="ttdeci">int hidecallerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00362">chan_mgcp.c:362</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a9532a575bad605efa55a2b77df58d77b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a9532a575bad605efa55a2b77df58d77b">mgcp_endpoint::dtmf_buf</a></div><div class="ttdeci">char dtmf_buf[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00343">chan_mgcp.c:343</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aef81e9f93aaf81a1523a89dd1c54e41f"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aef81e9f93aaf81a1523a89dd1c54e41f">mgcp_endpoint::cancallforward</a></div><div class="ttdeci">int cancallforward</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00357">chan_mgcp.c:357</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a65c772c8de471aac6656302f71f038f4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a65c772c8de471aac6656302f71f038f4">MGCP_DTMF_INBAND</a></div><div class="ttdeci">#define MGCP_DTMF_INBAND</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00120">chan_mgcp.c:120</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a82162415ab1c1e6d5ee85973d68b3655"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a82162415ab1c1e6d5ee85973d68b3655">mgcp_endpoint::call_forward</a></div><div class="ttdeci">char call_forward[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00344">chan_mgcp.c:344</a></div></div>
<div class="ttc" id="say_8h_html_ac8bd6c34b6aa664adb9ebfab68a500ce"><div class="ttname"><a href="../../db/dce/say_8h.html#ac8bd6c34b6aa664adb9ebfab68a500ce">ast_say_digit_str</a></div><div class="ttdeci">int ast_say_digit_str(struct ast_channel *chan, const char *num, const char *ints, const char *lang)</div><div class="ttdoc">says digits of a string </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08355">channel.c:8355</a></div></div>
<div class="ttc" id="pbx_8h_html_aa73d176ed4f1ce51e5db6beafba45fe3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a></div><div class="ttdeci">int ast_ignore_pattern(const char *context, const char *pattern)</div><div class="ttdoc">Checks to see if a number should be ignored. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06921">pbx.c:6921</a></div></div>
<div class="ttc" id="parking_8h_html_a0ede734145efa668143b11b31b49c6b0"><div class="ttname"><a href="../../d2/d33/parking_8h.html#a0ede734145efa668143b11b31b49c6b0">ast_parking_blind_transfer_park</a></div><div class="ttdeci">int ast_parking_blind_transfer_park(struct ast_bridge_channel *parker, const char *context, const char *exten, transfer_channel_cb parked_channel_cb, struct transfer_channel_data *parked_channel_data)</div><div class="ttdoc">Perform a blind transfer to a parking extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00143">parking.c:143</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a11cf01b312fa37ec4f35526cb750ea71"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a11cf01b312fa37ec4f35526cb750ea71">mgcp_subchannel::next</a></div><div class="ttdeci">struct mgcp_subchannel * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00323">chan_mgcp.c:323</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a93f9868530c1e8a9d9d367d1ead8782e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a></div><div class="ttdeci">int ast_canmatch_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks for a valid matching extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04194">pbx.c:4194</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aecb13f1c0d55dd7d6558ac56af67efcd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aecb13f1c0d55dd7d6558ac56af67efcd">MGCP_DTMF_HYBRID</a></div><div class="ttdeci">#define MGCP_DTMF_HYBRID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00121">chan_mgcp.c:121</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa319ef1606201db158ce7195fb8eed45"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa319ef1606201db158ce7195fb8eed45">gendigittimeout</a></div><div class="ttdeci">static int gendigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00217">chan_mgcp.c:217</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="pickup_8h_html_a4890be42c2add5f52028705d6bc02201"><div class="ttname"><a href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a></div><div class="ttdeci">int ast_pickup_call(struct ast_channel *chan)</div><div class="ttdoc">Pickup a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/pickup_8c_source.html#l00200">pickup.c:200</a></div></div>
<div class="ttc" id="parking_8h_html_a2ce15efe7765108411829ef993681e01"><div class="ttname"><a href="../../d2/d33/parking_8h.html#a2ce15efe7765108411829ef993681e01">ast_parking_is_exten_park</a></div><div class="ttdeci">int ast_parking_is_exten_park(const char *context, const char *exten)</div><div class="ttdoc">Determine if the context/exten is a &quot;parking&quot; extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00179">parking.c:179</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structast__channel_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../df/d3c/structast__channel.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00113">channel_internal_api.c:113</a></div></div>
<div class="ttc" id="channel_8h_html_a63732831df3e7a0999b0900ec85c626a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a></div><div class="ttdeci">struct ast_party_dialed * ast_channel_dialed(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00904">channel_internal_api.c:904</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a50ea1ecd6da04bb18650fe24943d23d1"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a50ea1ecd6da04bb18650fe24943d23d1">mgcp_endpoint::callwaiting</a></div><div class="ttdeci">int callwaiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00352">chan_mgcp.c:352</a></div></div>
<div class="ttc" id="parking_8h_html_ae6064ecb9b802ce85e93ddfa7719c433"><div class="ttname"><a href="../../d2/d33/parking_8h.html#ae6064ecb9b802ce85e93ddfa7719c433">ast_parking_provider_registered</a></div><div class="ttdeci">int ast_parking_provider_registered(void)</div><div class="ttdoc">Check whether a parking provider is registered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00241">parking.c:241</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ae9a1904e14c83a51df312f22eb7edd24"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ae9a1904e14c83a51df312f22eb7edd24">mgcp_endpoint::callreturn</a></div><div class="ttdeci">int callreturn</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00359">chan_mgcp.c:359</a></div></div>
<div class="ttc" id="channel_8h_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="channel_8h_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3604c82917827339e10a2a1455f84e7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3604c82917827339e10a2a1455f84e7c">transmit_notify_request</a></div><div class="ttdeci">static int transmit_notify_request(struct mgcp_subchannel *sub, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">chan_mgcp.c:2499</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad52206ee8911b66a991ba50741dad2a7"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad52206ee8911b66a991ba50741dad2a7">mgcp_endpoint::dnd</a></div><div class="ttdeci">int dnd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00360">chan_mgcp.c:360</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="pbx_8h_html_a44b6406c9220f7f2b610ac712369f405"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a44b6406c9220f7f2b610ac712369f405">ast_pbx_run</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_run(struct ast_channel *c)</div><div class="ttdoc">Execute the PBX in the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04759">pbx.c:4759</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0e5a76746e3addb17a93a158017c2273">mgcp_endpoint::dtmfmode</a></div><div class="ttdeci">int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00363">chan_mgcp.c:363</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a24514343553b05c66e5b7d16e2df45cc"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a24514343553b05c66e5b7d16e2df45cc">matchdigittimeout</a></div><div class="ttdeci">static int matchdigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00220">chan_mgcp.c:220</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="structast__features__pickup__config_html"><div class="ttname"><a href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a></div><div class="ttdoc">Configuration relating to call pickup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00137">include/asterisk/features_config.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d90ca1dfabffed58641a6bfd395aacc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d90ca1dfabffed58641a6bfd395aacc">&#9670;&nbsp;</a></span>mgcp_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcp_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01240">1240</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">AST_FRAME_IMAGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00568">ast_rtp_instance_write()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00045">GATE_ALLOCATED</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00356">mgcp_endpoint::singlepath</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00059">cops_gate::state</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;{</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a>)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t send %u type frames with MGCP write\n&quot;</span>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *cap_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Asked to transmit frame type %s, while native formats is %s (read/write = %s/%s)\n&quot;</span>,</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), &amp;cap_buf),</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(ast)),</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(ast)));</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <span class="comment">/* return -1; */</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a>) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;GATE ALLOCATED, sending sdp\n&quot;</span>);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a>(sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;         }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      }</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">if</span> ((sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> == sub) || !sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">singlepath</a>) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            res =  <a class="code" href="../../d5/dde/rtp__engine_8h.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, frame);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;         }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;}</div><div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00045">pktccops.h:45</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structcops__gate_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">cops_gate::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00059">pktccops.h:59</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a36fbfdd2c2eb8b68a37674faeeab0b9b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a36fbfdd2c2eb8b68a37674faeeab0b9b">mgcp_endpoint::singlepath</a></div><div class="ttdeci">int singlepath</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00356">chan_mgcp.c:356</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a87cb097a21ab7712c27aa9e3b3a1ef69"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a></div><div class="ttdeci">int ast_rtp_instance_write(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdoc">Send a frame out over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00568">rtp_engine.c:568</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2843e30c260fbe5d077107ad06f0a99e"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2843e30c260fbe5d077107ad06f0a99e">transmit_modify_with_sdp</a></div><div class="ttdeci">static int transmit_modify_with_sdp(struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp, const struct ast_format_cap *codecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">chan_mgcp.c:2301</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">include/asterisk/frame.h:116</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a79f5a30d4c4b7e2493e65dd465702233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79f5a30d4c4b7e2493e65dd465702233">&#9670;&nbsp;</a></span>mgcpsock_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mgcpsock_read </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ignore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">3669</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00257">mgcp_request::endpoint</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03639">find_and_retrans()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">mgcp_request::headers</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">mgcp_request::identifier</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">mgcpsock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">mgcp_gateway::msgs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">mgcp_message::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">mgcp_message::owner_ep</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00272">mgcp_message::owner_sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">mgcp_gateway::retransid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">mgcp_message::seqno</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00255">mgcp_request::verb</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00258">mgcp_request::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;{</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> req;</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;   <span class="keyword">struct </span>sockaddr_in sin;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;   socklen_t <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;   <span class="keywordtype">int</span> ident;</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;   len = <span class="keyword">sizeof</span>(sin);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;   memset(&amp;req, 0, <span class="keyword">sizeof</span>(req));</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;   res = recvfrom(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, req.data, <span class="keyword">sizeof</span>(req.data) - 1, 0, (<span class="keyword">struct</span> sockaddr *)&amp;sin, &amp;len);</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != ECONNREFUSED)</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Recv error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;   }</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;   req.data[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;   req.len = res;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;MGCP read: \n%s\nfrom %s:%d\n&quot;</span>, req.data, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(sin.sin_addr), ntohs(sin.sin_port));</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>(&amp;req);</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;   <span class="keywordflow">if</span> (req.headers &lt; 1) {</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      <span class="comment">/* Must have at least one header */</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;   }</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req.identifier)) {</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Message from %s missing identifier\n&quot;</span>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(sin.sin_addr));</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;   }</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;   <span class="keywordflow">if</span> (sscanf(req.verb, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;result) &amp;&amp; sscanf(req.identifier, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;ident)) {</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      <span class="keywordflow">if</span> (result &lt; 200) {</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ignoring provisional response on transaction %d\n&quot;</span>, ident);</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;      }</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      <span class="comment">/* Try to find who this message is for, if it&#39;s important */</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;      sub = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a66b3dee1d5d35309cd652eedc070fa06">find_subchannel_and_lock</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ident, &amp;sin);</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>;</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d7/d0f/structmgcp__message.html">mgcp_message</a> *cur, *prev;</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;         <span class="keywordflow">for</span> (prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cur = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>; cur; prev = cur, cur = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>) {</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;            <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a> == ident) {</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Got response back on transaction %d\n&quot;</span>, ident);</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;               <span class="keywordflow">if</span> (prev)</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;                  prev-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;               <span class="keywordflow">else</span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;                  gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a> = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;            }</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;         }</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;         <span class="comment">/* stop retrans timer if the queue is empty */</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;         <span class="keywordflow">if</span> (!gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>) {</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;            <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">retransid</a>);</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;         }</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;         <span class="keywordflow">if</span> (cur) {</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a40770b14c1a879ee5a9c97d295993f3f">handle_response</a>(cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">owner_ep</a>, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a44baf7dcc86ae0f4abf4ca170c90efa1">owner_sub</a>, result, ident, &amp;req);</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cur);</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;         }</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Got response back on [%s] for transaction %d we aren&#39;t sending?\n&quot;</span>,</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, ident);</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;      }</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req.endpoint) ||</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req.version) ||</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req.verb)) {</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Message must have a verb, an idenitifier, version, and endpoint\n&quot;</span>);</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      }</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      <span class="comment">/* Process request, with iflock held */</span></div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;      sub = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a66b3dee1d5d35309cd652eedc070fa06">find_subchannel_and_lock</a>(req.endpoint, 0, &amp;sin);</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;      <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;         <span class="comment">/* look first to find a matching response in the queue */</span></div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0a05327a93c400ab2a5f298a7ae84319">find_and_retrans</a>(sub, &amp;req))</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;            <span class="comment">/* pass the request off to the currently mastering subchannel */</span></div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae9a8318cac4c0ccb4a92fa6647987d18">handle_request</a>(sub, &amp;req, &amp;sin);</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      }</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;   }</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab46ad0a5ec68458d6b2054606757e202"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a></div><div class="ttdeci">static int mgcpsock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">chan_mgcp.c:432</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a40770b14c1a879ee5a9c97d295993f3f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a40770b14c1a879ee5a9c97d295993f3f">handle_response</a></div><div class="ttdeci">static void handle_response(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, int result, unsigned int ident, struct mgcp_request *resp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">chan_mgcp.c:2797</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">mgcp_gateway::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">chan_mgcp.c:419</a></div></div>
<div class="ttc" id="structmgcp__message_html_a99d568ed8b8bd99f5659df1c422794d9"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">mgcp_message::owner_ep</a></div><div class="ttdeci">struct mgcp_endpoint * owner_ep</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">chan_mgcp.c:271</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmgcp__message_html"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html">mgcp_message</a></div><div class="ttdoc">mgcp_message: MGCP message for queuing up </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00270">chan_mgcp.c:270</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a985373ab089816b56bd33ecc0637212c"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">mgcp_gateway::msgs</a></div><div class="ttdeci">struct mgcp_message * msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">chan_mgcp.c:417</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a66b3dee1d5d35309cd652eedc070fa06"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a66b3dee1d5d35309cd652eedc070fa06">find_subchannel_and_lock</a></div><div class="ttdeci">static struct mgcp_subchannel * find_subchannel_and_lock(char *name, int msgid, struct sockaddr_in *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">chan_mgcp.c:1777</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a0a05327a93c400ab2a5f298a7ae84319"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a0a05327a93c400ab2a5f298a7ae84319">find_and_retrans</a></div><div class="ttdeci">static int find_and_retrans(struct mgcp_subchannel *sub, struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03639">chan_mgcp.c:3639</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structmgcp__message_html_a3de267d5622f94a1dc06d1d2f2f34d95"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">mgcp_message::next</a></div><div class="ttdeci">struct mgcp_message * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">chan_mgcp.c:277</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae9a8318cac4c0ccb4a92fa6647987d18"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae9a8318cac4c0ccb4a92fa6647987d18">handle_request</a></div><div class="ttdeci">static int handle_request(struct mgcp_subchannel *sub, struct mgcp_request *req, struct sockaddr_in *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">chan_mgcp.c:3402</a></div></div>
<div class="ttc" id="structmgcp__message_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">mgcp_message::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">chan_mgcp.c:275</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00296">chan_mgcp.c:296</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structmgcp__message_html_a44baf7dcc86ae0f4abf4ca170c90efa1"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a44baf7dcc86ae0f4abf4ca170c90efa1">mgcp_message::owner_sub</a></div><div class="ttdeci">struct mgcp_subchannel * owner_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00272">chan_mgcp.c:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e006acff60d9b3d65d7d60f975d6747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e006acff60d9b3d65d7d60f975d6747">&#9670;&nbsp;</a></span>parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void parse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">1872</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00257">mgcp_request::endpoint</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">mgcp_request::header</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">mgcp_request::headers</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">mgcp_request::identifier</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">mgcp_request::line</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">mgcp_request::lines</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">MGCP_MAX_HEADERS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00251">MGCP_MAX_LINES</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00255">mgcp_request::verb</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00258">mgcp_request::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01936">acf_jabberreceive_read()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07941">acf_meetme_info()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l12679">acf_vm_info()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l00552">add_hintdevice()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02184">agent_function_read()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00525">aMYSQL_clear()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00321">aMYSQL_connect()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00543">aMYSQL_disconnect()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00473">aMYSQL_fetch()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00432">aMYSQL_nextresult()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00390">aMYSQL_query()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00295">aMYSQL_set()</a>, <a class="el" href="../../d9/d1a/app__skel_8c_source.html#l00379">app_exec()</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01382">applicationmap_handler()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08025">aqm_exec()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00320">ast_format_cap_update_by_allow_disallow()</a>, <a class="el" href="../../d8/dc7/test__app_8c_source.html#l00042">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/df4/app__attended__transfer_8c_source.html#l00077">attended_transfer_exec()</a>, <a class="el" href="../../d9/daa/app__audiosocket_8c_source.html#l00074">audiosocket_exec()</a>, <a class="el" href="../../dd/d8a/chan__audiosocket_8c_source.html#l00139">audiosocket_request()</a>, <a class="el" href="../../d7/d7c/app__blind__transfer_8c_source.html#l00081">blind_transfer_exec()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00416">bridgewait_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00604">cdr_prop_write()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00400">cdr_prop_write_callback()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00448">cdr_read()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00506">cdr_write()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00357">cdr_write_callback()</a>, <a class="el" href="../../d6/df5/app__celgenuserevent_8c_source.html#l00059">celgenuserevent_exec()</a>, <a class="el" href="../../dc/dec/res_2ari_2config_8c_source.html#l00323">channelvars_handler()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l01203">chanspy_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>, <a class="el" href="../../d4/d3c/func__config_8c_source.html#l00073">config_function_read()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04256">confkick_exec()</a>, <a class="el" href="../../da/db0/func__cut_8c_source.html#l00153">cut_internal()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l05667">destroy_all_channels()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00399">detect_write()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00847">directory_exec()</a>, <a class="el" href="../../dc/dc1/app__dtmfstore_8c_source.html#l00188">dtmfstore_exec()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">dundi_query_read()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04279">dundi_result_read()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04137">dundifunc_read()</a>, <a class="el" href="../../d9/d5e/func__enum_8c_source.html#l00252">enum_query_read()</a>, <a class="el" href="../../d9/d5e/func__enum_8c_source.html#l00317">enum_result_read()</a>, <a class="el" href="../../de/dbf/func__evalexten_8c_source.html#l00110">eval_exten_read()</a>, <a class="el" href="../../d9/d7c/app__exec_8c_source.html#l00202">execif_exec()</a>, <a class="el" href="../../d1/d71/app__stack_8c_source.html#l00450">expand_gosub_args()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l01322">extenspy_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04688">find_conf()</a>, <a class="el" href="../../d2/db9/app__forkcdr_8c_source.html#l00134">forkcdr_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05770">free_zone()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01115">func_confbridge_helper()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l04196">func_confbridge_info()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l01438">get_comma()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l01052">get_in_brackets_const()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l01105">get_in_brackets_full()</a>, <a class="el" href="../../d1/d71/app__stack_8c_source.html#l00516">gosub_exec()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00336">goto_parser()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00321">hook_on()</a>, <a class="el" href="../../d3/d31/func__iconv_8c_source.html#l00076">iconv_read()</a>, <a class="el" href="../../d2/d48/app__amd_8c_source.html#l00162">isAnsweringMachine()</a>, <a class="el" href="../../dc/d3c/func__dialplan_8c_source.html#l00073">isexten_function_read()</a>, <a class="el" href="../../d8/d0e/func__jitterbuffer_8c_source.html#l00115">jb_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08916">load_channelvars()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00866">local_alloc()</a>, <a class="el" href="../../d3/dc8/app__verbose_8c_source.html#l00111">log_exec()</a>, <a class="el" href="../../d6/d63/post__process__documentation_8py_source.html#l00078">post_process_documentation::main()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02862">man_do_variable_value()</a>, <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l00763">mbl_sendsms_exec()</a>, <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l00715">mbl_status_exec()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12291">misdn_check_l2l1()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12168">misdn_facility_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">misdn_set_opt_exec()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01115">mixmonitor_exec()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01226">msg_send_exec()</a>, <a class="el" href="../../d0/d2b/chan__rtp_8c_source.html#l00139">multicast_rtp_request()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00407">mwi_has_voicemail()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00467">mwi_inboxcount()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d3/dac/chan__oss_8c_source.html#l00603">oss_call()</a>, <a class="el" href="../../d3/dac/chan__oss_8c_source.html#l00849">oss_request()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00892">park_and_announce_app_exec()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00278">park_app_parse_data()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00603">parked_call_app_exec()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01498">parse_cookies()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l00775">pbx_builtin_answer()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01380">pbx_builtin_saycharacters_case()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01027">pbx_builtin_waitdigit()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01068">pbx_builtin_waitexten()</a>, <a class="el" href="../../d9/db1/app__directed__pickup_8c_source.html#l00326">pickup_exec()</a>, <a class="el" href="../../d9/db1/app__directed__pickup_8c_source.html#l00420">pickupchan_exec()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00916">pjsip_acf_channel_read()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00868">play_moh_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l07882">pqm_exec()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00102">presence_read()</a>, <a class="el" href="../../d7/d17/app__privacy_8c_source.html#l00087">privacy_exec()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17728">process_echocancel()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08106">ql_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08183">queue_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08847">queue_function_queuegetchannel()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11157">qupd_exec()</a>, <a class="el" href="../../df/dde/app__fax_8c_source.html#l00906">rcvfax_exec()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02082">receivefax_exec()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09244">reload_single_member()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l03434">retrydial_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l07954">rqm_exec()</a>, <a class="el" href="../../db/dcc/app__saycounted_8c_source.html#l00152">saycountedadj_exec()</a>, <a class="el" href="../../db/dcc/app__saycounted_8c_source.html#l00122">saycountednoun_exec()</a>, <a class="el" href="../../da/df8/app__sayunixtime_8c_source.html#l00118">sayunixtime_exec()</a>, <a class="el" href="../../d2/d94/func__scramble_8c_source.html#l00160">scramble_write()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02590">sendfax_exec()</a>, <a class="el" href="../../d8/d06/sip_2dialplan__functions_8c_source.html#l00127">sip_acf_channel_read()</a>, <a class="el" href="../../d8/d9c/config__parser_8c_source.html#l00794">sip_parse_nat_option()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07228">sla_trunk_exec()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l01298">smdi_msg_read()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l01202">smdi_msg_retrieve_read()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01881">sms_exec()</a>, <a class="el" href="../../df/dde/app__fax_8c_source.html#l00837">sndfax_exec()</a>, <a class="el" href="../../dc/d05/app__softhangup_8c_source.html#l00074">softhangup_exec()</a>, <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00700">speech_background()</a>, <a class="el" href="../../d9/d95/func__srv_8c_source.html#l00168">srv_result_read()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00908">start_moh_exec()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>, <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l01145">stir_shaken_read()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01257">stop_mixmonitor_full()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00284">stream_echo_exec()</a>, <a class="el" href="../../d4/df5/func__talkdetect_8c_source.html#l00310">talk_detect_fn_write()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01161">tls_method_to_str()</a>, <a class="el" href="../../d6/d7b/app__transfer_8c_source.html#l00087">transfer_exec()</a>, <a class="el" href="../../d0/d2b/chan__rtp_8c_source.html#l00269">unicast_rtp_request()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l07918">upqm_exec()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">user_event_hook_cb()</a>, <a class="el" href="../../d4/da5/app__userevent_8c_source.html#l00072">userevent_exec()</a>, <a class="el" href="../../d3/dc8/app__verbose_8c_source.html#l00079">verbose_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11503">vm_execmain()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11464">vm_playmsgexec()</a>, <a class="el" href="../../d5/d4c/app__waitforsilence_8c_source.html#l00228">waitfor_exec()</a>, and <a class="el" href="../../d0/d72/app__zapateller_8c_source.html#l00079">zapateller_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;{</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="comment">/* Divide fields by NULL&#39;s */</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   <span class="keywordtype">int</span> f = 0;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   c = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   <span class="comment">/* First header starts immediately */</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[f] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   <span class="keywordflow">for</span> (; *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>; c++) {</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;         <span class="comment">/* We&#39;ve got a new header */</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;         *c = 0;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Header: %s (%d)\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[f], (<span class="keywordtype">int</span>) strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[f]));</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[f])) {</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            <span class="comment">/* Line by itself means we&#39;re now in content */</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            c++;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         }</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;         <span class="keywordflow">if</span> (f &gt;= <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a> - 1) {</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Too many MGCP headers...\n&quot;</span>);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            f++;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;         }</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;         req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[f] = c + 1;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;\r&#39;</span>) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;         <span class="comment">/* Ignore but eliminate \r&#39;s */</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;         *c = 0;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      }</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   }</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <span class="comment">/* Check for last header */</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[f])) {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      f++;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a> = f;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <span class="comment">/* Now we process any mime content */</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;   f = 0;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[f] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <span class="keywordflow">for</span> (; *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>; c++) {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;         <span class="comment">/* We&#39;ve got a new line */</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;         *c = 0;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Line: %s (%d)\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[f], (<span class="keywordtype">int</span>) strlen(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[f]));</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;         <span class="keywordflow">if</span> (f &gt;= <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad9b78c58124ece4349c63170c1b44c01">MGCP_MAX_LINES</a> - 1) {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Too many SDP lines...\n&quot;</span>);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            f++;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;         }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;         req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[f] = c + 1;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;\r&#39;</span>) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;         <span class="comment">/* Ignore and eliminate \r&#39;s */</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;         *c = 0;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      }</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <span class="comment">/* Check for last line */</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">line</a>[f])) {</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      f++;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   }</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a> = f;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   <span class="comment">/* Parse up the initial header */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   c = req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">header</a>[0];</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <span class="keywordflow">while</span> (*c &amp;&amp; *c &lt; 33) c++;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <span class="comment">/* First the verb */</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;   req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">verb</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <span class="keywordflow">while</span> (*c &amp;&amp; (*c &gt; 32)) c++;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   <span class="keywordflow">if</span> (*c) {</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      c++;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <span class="keywordflow">while</span> (*c &amp;&amp; (*c &lt; 33)) c++;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">identifier</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <span class="keywordflow">while</span> (*c &amp;&amp; (*c &gt; 32)) c++;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">if</span> (*c) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;         *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;         c++;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;         <span class="keywordflow">while</span> (*c &amp;&amp; (*c &lt; 33)) c++;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;         req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a6d2d1c31529bee906473fcabaffff34f">endpoint</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;         <span class="keywordflow">while</span> (*c &amp;&amp; (*c &gt; 32)) c++;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;         <span class="keywordflow">if</span> (*c) {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            c++;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            <span class="keywordflow">while</span> (*c &amp;&amp; (*c &lt; 33)) c++;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            <span class="keywordflow">while</span> (*c &amp;&amp; (*c &gt; 32)) c++;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="keywordflow">while</span> (*c &amp;&amp; (*c &lt; 33)) c++;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            <span class="keywordflow">while</span> (*c &amp;&amp; (*c &gt; 32)) c++;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;         }</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      }</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;   }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Verb: &#39;%s&#39;, Identifier: &#39;%s&#39;, Endpoint: &#39;%s&#39;, Version: &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;         req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">verb</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">identifier</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a6d2d1c31529bee906473fcabaffff34f">endpoint</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a56abfaab87c46691c1ef3ad0df23e864">version</a>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;%d headers, %d lines\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">headers</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">lines</a>);</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="keywordflow">if</span> (*c) {</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Odd content, extra stuff left over (&#39;%s&#39;)\n&quot;</span>, c);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   }</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af749c9be3dde43ccee28a80733b83f84"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af749c9be3dde43ccee28a80733b83f84">mgcp_request::headers</a></div><div class="ttdeci">int headers</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00259">chan_mgcp.c:259</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__request_html_af5351a0143adaf16c64b881aee01d893"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">mgcp_request::identifier</a></div><div class="ttdeci">char * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">chan_mgcp.c:256</a></div></div>
<div class="ttc" id="structmgcp__request_html_aa5b3bf02368026f7280827b3f8be716a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#aa5b3bf02368026f7280827b3f8be716a">mgcp_request::verb</a></div><div class="ttdeci">char * verb</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00255">chan_mgcp.c:255</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structmgcp__request_html_a6d2d1c31529bee906473fcabaffff34f"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a6d2d1c31529bee906473fcabaffff34f">mgcp_request::endpoint</a></div><div class="ttdeci">char * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00257">chan_mgcp.c:257</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__request_html_a9921ae02cadccc99dd6c3a9b68be050a"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a9921ae02cadccc99dd6c3a9b68be050a">mgcp_request::lines</a></div><div class="ttdeci">int lines</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00261">chan_mgcp.c:261</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad9b78c58124ece4349c63170c1b44c01"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad9b78c58124ece4349c63170c1b44c01">MGCP_MAX_LINES</a></div><div class="ttdeci">#define MGCP_MAX_LINES</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00251">chan_mgcp.c:251</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2151407de5510c52548ffceae5e5b885"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2151407de5510c52548ffceae5e5b885">MGCP_MAX_HEADERS</a></div><div class="ttdeci">#define MGCP_MAX_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00250">chan_mgcp.c:250</a></div></div>
<div class="ttc" id="structmgcp__request_html_a0c4778906efa97592db56f647bcd7bc8"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a0c4778906efa97592db56f647bcd7bc8">mgcp_request::line</a></div><div class="ttdeci">char * line[MGCP_MAX_LINES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00262">chan_mgcp.c:262</a></div></div>
<div class="ttc" id="structmgcp__request_html_accbb40b47464d0f9427763db8f01673c"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#accbb40b47464d0f9427763db8f01673c">mgcp_request::header</a></div><div class="ttdeci">char * header[MGCP_MAX_HEADERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00260">chan_mgcp.c:260</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
<div class="ttc" id="structmgcp__request_html_a56abfaab87c46691c1ef3ad0df23e864"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a56abfaab87c46691c1ef3ad0df23e864">mgcp_request::version</a></div><div class="ttdeci">char * version</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00258">chan_mgcp.c:258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd3cd797ea85acf54242aba8e966a37c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd3cd797ea85acf54242aba8e966a37c">&#9670;&nbsp;</a></span>process_sdp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int process_sdp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">1970</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00630">ast_format_cap_get_compatible()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00197">ast_gethostbyname()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01580">ast_rtp_codecs_payload_formats()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01301">ast_rtp_codecs_payloads_set_m_type()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01428">ast_rtp_codecs_payloads_set_rtpmap_type()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00727">ast_rtp_instance_get_codecs()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01080">ast_rtp_instance_set_remote_address</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00048">codecs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01606">get_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01624">get_sdp_iterate()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l01236">hp</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00236">nonCodecCapability</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00375">mgcp_endpoint::nonCodecCapability</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01619">sdpLineNum_iterator_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;{</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   <span class="keywordtype">char</span> *m;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>[258];</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <span class="keywordtype">int</span> portno;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *peercap;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   <span class="keywordtype">int</span> peerNonCodecCapability;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <span class="keyword">struct </span>sockaddr_in sin;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin_tmp;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d2b/structast__hostent.html">ast_hostent</a> <a class="code" href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>; <span class="keyword">struct </span>hostent *<a class="code" href="../../d0/d80/chan__skinny_8c.html#aa0f575fa3882aa394cc287edba645a35">hp</a>;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;   <span class="keywordtype">int</span> codec, codec_count=0;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   <span class="keywordtype">int</span> iterator;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *global_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *peer_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *pvt_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   <span class="comment">/* Get codec and RTP info from SDP */</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   m = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5823b2253fc8592029745b345da3a2b8">get_sdp</a>(req, <span class="stringliteral">&quot;m&quot;</span>);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   c = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5823b2253fc8592029745b345da3a2b8">get_sdp</a>(req, <span class="stringliteral">&quot;c&quot;</span>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(m) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c)) {</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Insufficient information for SDP (m = &#39;%s&#39;, c = &#39;%s&#39;)\n&quot;</span>, m, c);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;   }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;   <span class="keywordflow">if</span> (sscanf(c, <span class="stringliteral">&quot;IN IP4 %256s&quot;</span>, host) != 1) {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid host in c= line, &#39;%s&#39;\n&quot;</span>, c);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   }</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="comment">/* XXX This could block for a long time, and block the main thread! XXX */</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;   hp = <a class="code" href="../../d5/d60/utils_8h.html#ad3b63ee1041593219ef0765b28d70442">ast_gethostbyname</a>(host, &amp;<a class="code" href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   <span class="keywordflow">if</span> (!hp) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to lookup host in c= line, &#39;%s&#39;\n&quot;</span>, c);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <span class="keywordflow">if</span> (sscanf(m, <span class="stringliteral">&quot;audio %30d RTP/AVP %n&quot;</span>, &amp;portno, &amp;len) != 1 || !len) {</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Malformed media stream descriptor: %s\n&quot;</span>, m);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   }</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   sin.sin_family = AF_INET;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;   memcpy(&amp;sin.sin_addr, hp-&gt;h_addr, <span class="keyword">sizeof</span>(sin.sin_addr));</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   sin.sin_port = htons(portno);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;sin_tmp, &amp;sin);</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;sin_tmp);</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Peer RTP is at port %s:%d\n&quot;</span>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(sin.sin_addr), ntohs(sin.sin_port));</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <span class="comment">/* Scan through the RTP payload types specified in a &quot;m=&quot; line: */</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;   codecs = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(m + len);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(codecs)) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      <span class="keywordflow">if</span> (sscanf(codecs, <span class="stringliteral">&quot;%30d%n&quot;</span>, &amp;codec, &amp;len) != 1) {</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;         <span class="keywordflow">if</span> (codec_count) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;         }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error in codec string &#39;%s&#39; at &#39;%s&#39;\n&quot;</span>, m, codecs);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a729a53f6bd23a458daf9e8f13e69e6a0">ast_rtp_codecs_payloads_set_m_type</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, codec);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      codec_count++;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      codecs += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   }</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   <span class="comment">/* Next, scan through each &quot;a=rtpmap:&quot; line, noting each */</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <span class="comment">/* specified RTP payload type (with corresponding MIME subtype): */</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7d036cbd077230f51bec5020ec1d2515">sdpLineNum_iterator_init</a>(&amp;iterator);</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   <span class="keywordflow">while</span> ((a = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af3720d39975643ccc57f801b3a81de15">get_sdp_iterate</a>(&amp;iterator, req, <span class="stringliteral">&quot;a&quot;</span>))[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      <span class="keywordtype">char</span>* mimeSubtype = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a); <span class="comment">/* ensures we have enough space */</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <span class="keywordflow">if</span> (sscanf(a, <span class="stringliteral">&quot;rtpmap: %30d %127[^/]/&quot;</span>, &amp;codec, mimeSubtype) != 2)</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <span class="comment">/* Note: should really look at the &#39;freq&#39; and &#39;#chans&#39; params too */</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab5350656de626a43127eb607e58bdfa3">ast_rtp_codecs_payloads_set_rtpmap_type</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, codec, <span class="stringliteral">&quot;audio&quot;</span>, mimeSubtype, 0);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   }</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="comment">/* Now gather all of the codecs that were asked for: */</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <span class="keywordflow">if</span> (!(peercap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   }</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a>(<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>), peercap, &amp;peerNonCodecCapability);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, peercap, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Capabilities: us - %s, them - %s, combined - %s\n&quot;</span>,</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, &amp;global_buf),</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(peercap, &amp;peer_buf),</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, &amp;pvt_buf));</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(peercap, -1);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Non-codec capabilities: us - %d, them - %d, combined - %d\n&quot;</span>,</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a08e270ee42ff478a275294762aa0e195">nonCodecCapability</a>, peerNonCodecCapability, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a08e270ee42ff478a275294762aa0e195">nonCodecCapability</a>);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>)) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No compatible codecs!\n&quot;</span>);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;   }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_a5f8da197d19dc5ecd5457eed351f3311"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5f8da197d19dc5ecd5457eed351f3311">ast_rtp_codecs_payload_formats</a></div><div class="ttdeci">void ast_rtp_codecs_payload_formats(struct ast_rtp_codecs *codecs, struct ast_format_cap *astformats, int *nonastformats)</div><div class="ttdoc">Retrieve all formats that were found. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01580">rtp_engine.c:1580</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0376aa2503a185437fab8cb0b7d674fb"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0376aa2503a185437fab8cb0b7d674fb">ast_rtp_instance_get_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * ast_rtp_instance_get_codecs(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the codecs structure of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00727">rtp_engine.c:727</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a7d036cbd077230f51bec5020ec1d2515"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7d036cbd077230f51bec5020ec1d2515">sdpLineNum_iterator_init</a></div><div class="ttdeci">static void sdpLineNum_iterator_init(int *iterator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01619">chan_mgcp.c:1619</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="codec_8c_html_a26d06e92c695d54e16beb8070dc5461d"><div class="ttname"><a href="../../d5/def/codec_8c.html#a26d06e92c695d54e16beb8070dc5461d">codecs</a></div><div class="ttdeci">static struct ao2_container * codecs</div><div class="ttdoc">Registered codecs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00048">codec.c:48</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a08e270ee42ff478a275294762aa0e195"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a08e270ee42ff478a275294762aa0e195">mgcp_endpoint::nonCodecCapability</a></div><div class="ttdeci">int nonCodecCapability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00375">chan_mgcp.c:375</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ab5350656de626a43127eb607e58bdfa3"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab5350656de626a43127eb607e58bdfa3">ast_rtp_codecs_payloads_set_rtpmap_type</a></div><div class="ttdeci">int ast_rtp_codecs_payloads_set_rtpmap_type(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int payload, char *mimetype, char *mimesubtype, enum ast_rtp_options options)</div><div class="ttdoc">Record tx payload type information that was seen in an a=rtpmap: SDP line. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01428">rtp_engine.c:1428</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_a9e435aef83f14da6d3d5ec44f821558e"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a></div><div class="ttdeci">static struct ast_hostent ahp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01235">chan_skinny.c:1235</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a08e270ee42ff478a275294762aa0e195"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a08e270ee42ff478a275294762aa0e195">nonCodecCapability</a></div><div class="ttdeci">static int nonCodecCapability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00236">chan_mgcp.c:236</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a90c48c7f24206e8822bf520dae0a2478"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a90c48c7f24206e8822bf520dae0a2478">ast_rtp_instance_set_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_set_remote_address(instance, address)</div><div class="ttdoc">Set the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01080">rtp_engine.h:1080</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structast__hostent_html"><div class="ttname"><a href="../../db/d2b/structast__hostent.html">ast_hostent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00208">utils.h:208</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="utils_8h_html_ad3b63ee1041593219ef0765b28d70442"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad3b63ee1041593219ef0765b28d70442">ast_gethostbyname</a></div><div class="ttdeci">struct hostent * ast_gethostbyname(const char *host, struct ast_hostent *hp)</div><div class="ttdoc">Thread-safe gethostbyname function to use in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00197">main/utils.c:197</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af3720d39975643ccc57f801b3a81de15"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af3720d39975643ccc57f801b3a81de15">get_sdp_iterate</a></div><div class="ttdeci">static char * get_sdp_iterate(int *iterator, struct mgcp_request *req, char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01624">chan_mgcp.c:1624</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5823b2253fc8592029745b345da3a2b8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5823b2253fc8592029745b345da3a2b8">get_sdp</a></div><div class="ttdeci">static char * get_sdp(struct mgcp_request *req, char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01606">chan_mgcp.c:1606</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_aa0f575fa3882aa394cc287edba645a35"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#aa0f575fa3882aa394cc287edba645a35">hp</a></div><div class="ttdeci">static struct hostent * hp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01236">chan_skinny.c:1236</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="format__cap_8h_html_a43950f716385bc78a73de04acd6a7eb4"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a></div><div class="ttdeci">int ast_format_cap_get_compatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2, struct ast_format_cap *result)</div><div class="ttdoc">Find the compatible formats between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00630">format_cap.c:630</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a729a53f6bd23a458daf9e8f13e69e6a0"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a729a53f6bd23a458daf9e8f13e69e6a0">ast_rtp_codecs_payloads_set_m_type</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_set_m_type(struct ast_rtp_codecs *codecs, struct ast_rtp_instance *instance, int payload)</div><div class="ttdoc">Record tx payload type information that was seen in an m= SDP line. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01301">rtp_engine.c:1301</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa97203c0950af78c3a4eecfae70ed9e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa97203c0950af78c3a4eecfae70ed9e6">&#9670;&nbsp;</a></span>prune_gateways()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prune_gateways </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">4608</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">mgcp_endpoint::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">mgcp_gateway::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04598">destroy_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">mgcp_gateway::realtime</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;{</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g, *z, *r;</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e, *p, *t;</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;   <span class="comment">/* prune gateways */</span></div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;   <span class="keywordflow">for</span> (z = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; g;) {</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;      <span class="comment">/* prune endpoints */</span></div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;      <span class="keywordflow">for</span> (p = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; ) {</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;         <span class="keywordflow">if</span> (!g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">realtime</a> &amp;&amp; (e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> || g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a>)) {</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;            t = e;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;            e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>;</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;            <span class="keywordflow">if</span> (!p)</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;               g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a> = e;</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;               p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a> = e;</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a12b38b2c3a495dd4b14daa3db17835f5">destroy_endpoint</a>(t);</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;            p = e;</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;            e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>;</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;         }</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;      }</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;      <span class="keywordflow">if</span> (g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a>) {</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;         r = g;</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;         g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>;</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;         <span class="keywordflow">if</span> (!z)</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> = g;</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;            z-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a> = g;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9033eb10a3d9e9fb3430e97936513ca4">destroy_gateway</a>(r);</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;         z = g;</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;         g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>;</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;      }</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;   }</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9033eb10a3d9e9fb3430e97936513ca4"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9033eb10a3d9e9fb3430e97936513ca4">destroy_gateway</a></div><div class="ttdeci">static void destroy_gateway(struct mgcp_gateway *g)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04598">chan_mgcp.c:4598</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a12b38b2c3a495dd4b14daa3db17835f5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a12b38b2c3a495dd4b14daa3db17835f5">destroy_endpoint</a></div><div class="ttdeci">static void destroy_endpoint(struct mgcp_endpoint *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">chan_mgcp.c:4539</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_endpoint::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">chan_mgcp.c:386</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aac1ae37fa4007496a50df75cf1f698c1"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aac1ae37fa4007496a50df75cf1f698c1">mgcp_gateway::realtime</a></div><div class="ttdeci">int realtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00421">chan_mgcp.c:421</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_gateway::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">chan_mgcp.c:420</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1982509765f4870f1f63412a53ea668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1982509765f4870f1f63412a53ea668">&#9670;&nbsp;</a></span>reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04941">4941</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">mgcp_reload()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;{</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a77cdf1904a692082f9ddf294576da000">mgcp_reload</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a77cdf1904a692082f9ddf294576da000"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a77cdf1904a692082f9ddf294576da000">mgcp_reload</a></div><div class="ttdeci">static char * mgcp_reload(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">chan_mgcp.c:4908</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b50e3739970f82175c130c5194c544f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b50e3739970f82175c130c5194c544f">&#9670;&nbsp;</a></span>reload_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_config </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">4683</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">__ourip</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03328">ast_category_browse()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00320">ast_format_cap_update_by_allow_disallow()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00197">ast_gethostbyname()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00245">ast_io_remove()</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00278">ast_io_wait()</a>, <a class="el" href="../../d3/d1d/abstract__jb_8c_source.html#l00545">ast_jb_read_conf()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">ast_set_qos()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00953">ast_str2cos()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00967">ast_str2tos()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00434">bindaddr</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00117">config</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00124">DEFAULT_MGCP_CA_PORT</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">mgcp_endpoint::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">mgcp_gateway::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00167">dtmfmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00214">firstdigittimeout</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00217">gendigittimeout</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00114">global_jbconf</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l01236">hp</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">ast_variable::lineno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00220">matchdigittimeout</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">mgcpsock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03758">mgcpsock_read_id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">monitor_thread</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00387">mgcp_endpoint::needaudit</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00224">netlock</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00238">ourhost</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00240">ourport</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">prune_gateways()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04856">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;{</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g;</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e;</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;   <span class="keywordtype">char</span> *cat;</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d2b/structast__hostent.html">ast_hostent</a> <a class="code" href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>;</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;   <span class="keyword">struct </span>hostent *<a class="code" href="../../d0/d80/chan__skinny_8c.html#aa0f575fa3882aa394cc287edba645a35">hp</a>;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> : 0 };</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;   <span class="keywordflow">if</span> (gethostname(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8d857a26518d3787a893c9ab433ddb4d">ourhost</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8d857a26518d3787a893c9ab433ddb4d">ourhost</a>)-1)) {</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to get hostname, MGCP disabled\n&quot;</span>);</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;   }</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9ee8d742a1fbcff45f97842b92952610">config</a>, config_flags);</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;   <span class="comment">/* We *must* have a config file otherwise stop immediately */</span></div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to load config %s, MGCP disabled\n&quot;</span>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9ee8d742a1fbcff45f97842b92952610">config</a>);</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>) {</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Config file %s is in an invalid format.  Aborting.\n&quot;</span>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9ee8d742a1fbcff45f97842b92952610">config</a>);</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;   }</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;   memset(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>));</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a> = 0;</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;   <span class="comment">/* Copy the default jb config over global_jbconf */</span></div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;   memcpy(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2d8d5920e90ccbad7832926becdadb29">default_jbconf</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d7/dba/structast__jb__conf.html">ast_jb_conf</a>));</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;   <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>); v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;      <span class="comment">/* handle jb conf */</span></div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d14/abstract__jb_8h.html#ae50ad081bd2ae6b58bcfc4687916c586">ast_jb_read_conf</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;      }</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      <span class="comment">/* Create the interface list */</span></div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bindaddr&quot;</span>)) {</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;         <span class="keywordflow">if</span> (!(hp = <a class="code" href="../../d5/d60/utils_8h.html#ad3b63ee1041593219ef0765b28d70442">ast_gethostbyname</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, &amp;<a class="code" href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>))) {</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid address: %s\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;            memcpy(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_addr, hp-&gt;h_addr, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_addr));</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;         }</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;allow&quot;</span>)) {</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a26c6676e9f2dd9535ea0d5bbd45f98b6">ast_format_cap_update_by_allow_disallow</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 1);</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;disallow&quot;</span>)) {</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a26c6676e9f2dd9535ea0d5bbd45f98b6">ast_format_cap_update_by_allow_disallow</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 0);</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tos&quot;</span>)) {</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a49d1eefe77636e2a63ad013afa0fc3b5">ast_str2tos</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.tos)) {</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid tos value at line %d, refer to QoS documentation\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;         }</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tos_audio&quot;</span>)) {</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a49d1eefe77636e2a63ad013afa0fc3b5">ast_str2tos</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.tos_audio))</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid tos_audio value at line %d, refer to QoS documentation\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;cos&quot;</span>)) {</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#ad364a9241e15fc0dbec0ffcb88f64671">ast_str2cos</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.cos))</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid cos value at line %d, refer to QoS documentation\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;cos_audio&quot;</span>)) {</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#ad364a9241e15fc0dbec0ffcb88f64671">ast_str2cos</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.cos_audio))</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid cos_audio value at line %d, refer to QoS documentation\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;port&quot;</span>)) {</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;         <span class="keywordflow">if</span> (sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%5d&quot;</span>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7821b54b29c7b74aba79884f13b3ec03">ourport</a>) == 1) {</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_port = htons(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7821b54b29c7b74aba79884f13b3ec03">ourport</a>);</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid port number &#39;%s&#39; at line %d of %s\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9ee8d742a1fbcff45f97842b92952610">config</a>);</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;         }</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;firstdigittimeout&quot;</span>)) {</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a> = atoi(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;gendigittimeout&quot;</span>)) {</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa319ef1606201db158ce7195fb8eed45">gendigittimeout</a> = atoi(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;matchdigittimeout&quot;</span>)) {</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a24514343553b05c66e5b7d16e2df45cc">matchdigittimeout</a> = atoi(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;      }</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;   }</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;   <span class="comment">/* mark existing entries for deletion */</span></div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;   <span class="keywordflow">for</span> (g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; g; g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;      g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 1;</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;      <span class="keywordflow">for</span> (e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;         e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 1;</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      }</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;   }</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;   <span class="keywordflow">for</span> (cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); cat; cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, cat)) {</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(cat, <span class="stringliteral">&quot;general&quot;</span>)) {</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;         <span class="keywordflow">if</span> ((g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5ec29f9b87b0e9bc597b47a29e4088df">build_gateway</a>(cat, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, cat)))) {</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Added gateway &#39;%s&#39;\n&quot;</span>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;            g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>;</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;            <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a> = g;</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;         }</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;         <span class="comment">/* FS: process queue and IO */</span></div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> == pthread_self()) {</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/da0/structsched.html">sched</a>) <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>) <a class="code" href="../../dc/dac/io_8h.html#a6f1abe730a5606b88c8f415f53b784bc">ast_io_wait</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, 10);</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;         }</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;      }</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;   }</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;   <span class="comment">/* prune deleted entries etc. */</span></div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa97203c0950af78c3a4eecfae70ed9e6">prune_gateways</a>();</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;   <span class="keywordflow">if</span> (ntohl(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_addr.s_addr)) {</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;      memcpy(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a>, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_addr, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a>));</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;      hp = <a class="code" href="../../d5/d60/utils_8h.html#ad3b63ee1041593219ef0765b28d70442">ast_gethostbyname</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8d857a26518d3787a893c9ab433ddb4d">ourhost</a>, &amp;<a class="code" href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a>);</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;      <span class="keywordflow">if</span> (!hp) {</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to get our IP address, MGCP disabled\n&quot;</span>);</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;      }</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;      memcpy(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a>, hp-&gt;h_addr, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a>));</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;   }</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;   <span class="keywordflow">if</span> (!ntohs(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_port))</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_port = htons(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3c8790d2031538c7eefd0310e5418f1d">DEFAULT_MGCP_CA_PORT</a>);</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>.sin_family = AF_INET;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a>);</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> &gt; -1)</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;      close(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>);</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#afbf1092b96128d07d0dd08dfa898f4d5">ast_io_remove</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a>);</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> = socket(AF_INET, SOCK_DGRAM, 0);</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> &lt; 0) {</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create MGCP socket: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;      <span class="keywordflow">if</span> (bind(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, (<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>, <span class="keyword">sizeof</span>(bindaddr)) &lt; 0) {</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to bind to %s:%d: %s\n&quot;</span>,</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;            <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(bindaddr.sin_addr), ntohs(bindaddr.sin_port),</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;               strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;         close(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>);</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> = -1;</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;MGCP Listening on %s:%d\n&quot;</span>,</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;               <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(bindaddr.sin_addr), ntohs(bindaddr.sin_port));</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.tos, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.cos, <span class="stringliteral">&quot;MGCP&quot;</span>);</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;      }</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;   }</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a>);</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;   <span class="comment">/* send audit only to the new endpoints */</span></div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;   <span class="keywordflow">for</span> (g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; g; g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;      <span class="keywordflow">for</span> (e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e &amp;&amp; e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">needaudit</a>; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;         e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">needaudit</a> = 0;</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a>(e);</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MGCP Auditing endpoint %s@%s for hookstate\n&quot;</span>, e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;      }</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;   }</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;}</div><div class="ttc" id="io_8h_html_a6f1abe730a5606b88c8f415f53b784bc"><div class="ttname"><a href="../../dc/dac/io_8h.html#a6f1abe730a5606b88c8f415f53b784bc">ast_io_wait</a></div><div class="ttdeci">int ast_io_wait(struct io_context *ioc, int howlong)</div><div class="ttdoc">Waits for IO. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00278">io.c:278</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab46ad0a5ec68458d6b2054606757e202"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a></div><div class="ttdeci">static int mgcpsock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">chan_mgcp.c:432</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a0e5a76746e3addb17a93a158017c2273"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a0e5a76746e3addb17a93a158017c2273">dtmfmode</a></div><div class="ttdeci">static int dtmfmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00167">chan_mgcp.c:167</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afd3be8e865f060b68db4d7c966489e0a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afd3be8e865f060b68db4d7c966489e0a">firstdigittimeout</a></div><div class="ttdeci">static int firstdigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00214">chan_mgcp.c:214</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5ec29f9b87b0e9bc597b47a29e4088df"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5ec29f9b87b0e9bc597b47a29e4088df">build_gateway</a></div><div class="ttdeci">static struct mgcp_gateway * build_gateway(char *cat, struct ast_variable *v)</div><div class="ttdoc">build_gateway: parse mgcp.conf and create gateway/endpoint structures </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">chan_mgcp.c:4016</a></div></div>
<div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9650dde3ce810fc64493b0b2b0e81209"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9650dde3ce810fc64493b0b2b0e81209">mgcpsock_read_id</a></div><div class="ttdeci">static int * mgcpsock_read_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03758">chan_mgcp.c:3758</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af2bf3439df0a8fd009f2e4b7520051fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af2bf3439df0a8fd009f2e4b7520051fd">mgcp_endpoint::needaudit</a></div><div class="ttdeci">int needaudit</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00387">chan_mgcp.c:387</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="abstract__jb_8h_html_ae50ad081bd2ae6b58bcfc4687916c586"><div class="ttname"><a href="../../dc/d14/abstract__jb_8h.html#ae50ad081bd2ae6b58bcfc4687916c586">ast_jb_read_conf</a></div><div class="ttdeci">int ast_jb_read_conf(struct ast_jb_conf *conf, const char *varname, const char *value)</div><div class="ttdoc">Sets jitterbuffer configuration property. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/abstract__jb_8c_source.html#l00545">abstract_jb.c:545</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="structast__variable_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">ast_variable::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">include/asterisk/config.h:95</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9ee8d742a1fbcff45f97842b92952610"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9ee8d742a1fbcff45f97842b92952610">config</a></div><div class="ttdeci">static const char config[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00117">chan_mgcp.c:117</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8d857a26518d3787a893c9ab433ddb4d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8d857a26518d3787a893c9ab433ddb4d">ourhost</a></div><div class="ttdeci">static char ourhost[MAXHOSTNAMELEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00238">chan_mgcp.c:238</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8a585e8d22d599bb4f067e383f5c1f72"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a></div><div class="ttdeci">static struct @126 qos</div></div>
<div class="ttc" id="acl_8h_html_a49d1eefe77636e2a63ad013afa0fc3b5"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a49d1eefe77636e2a63ad013afa0fc3b5">ast_str2tos</a></div><div class="ttdeci">int ast_str2tos(const char *value, unsigned int *tos)</div><div class="ttdoc">Convert a string to the appropriate TOS value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00967">acl.c:967</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1e5e3d08eff5e2357e75c01e127e7922"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a></div><div class="ttdeci">char * ast_category_browse(struct ast_config *config, const char *prev_name)</div><div class="ttdoc">Browse categories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03328">extconf.c:3328</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a378d1872f2d3bc625940d17905c23621"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a378d1872f2d3bc625940d17905c23621">transmit_audit_endpoint</a></div><div class="ttdeci">static int transmit_audit_endpoint(struct mgcp_endpoint *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">chan_mgcp.c:2676</a></div></div>
<div class="ttc" id="format__cap_8h_html_a26c6676e9f2dd9535ea0d5bbd45f98b6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a26c6676e9f2dd9535ea0d5bbd45f98b6">ast_format_cap_update_by_allow_disallow</a></div><div class="ttdeci">int ast_format_cap_update_by_allow_disallow(struct ast_format_cap *cap, const char *list, int allowing)</div><div class="ttdoc">Parse an &quot;allow&quot; or &quot;deny&quot; list and modify a format capabilities structure accordingly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00320">format_cap.c:320</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa97203c0950af78c3a4eecfae70ed9e6"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa97203c0950af78c3a4eecfae70ed9e6">prune_gateways</a></div><div class="ttdeci">static void prune_gateways(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">chan_mgcp.c:4608</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3c8790d2031538c7eefd0310e5418f1d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3c8790d2031538c7eefd0310e5418f1d">DEFAULT_MGCP_CA_PORT</a></div><div class="ttdeci">#define DEFAULT_MGCP_CA_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00124">chan_mgcp.c:124</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afd10144dcba02df71f1170c333685d87"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afd10144dcba02df71f1170c333685d87">netlock</a></div><div class="ttdeci">static ast_mutex_t netlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00224">chan_mgcp.c:224</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4ec29229510a2e3ea6ce34d520f06e90"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a></div><div class="ttdeci">static struct sockaddr_in bindaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00434">chan_mgcp.c:434</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abda48311b6abe5a4dd8b6904ddde0a6d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></div><div class="ttdeci">static struct io_context * io</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00245">chan_mgcp.c:245</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04941">chan_mgcp.c:4941</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_a9e435aef83f14da6d3d5ec44f821558e"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#a9e435aef83f14da6d3d5ec44f821558e">ahp</a></div><div class="ttdeci">static struct ast_hostent ahp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01235">chan_skinny.c:1235</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa319ef1606201db158ce7195fb8eed45"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa319ef1606201db158ce7195fb8eed45">gendigittimeout</a></div><div class="ttdeci">static int gendigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00217">chan_mgcp.c:217</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afbd6fc6e0ab3c1a04a518f19c21d4503"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a></div><div class="ttdeci">static pthread_t monitor_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">chan_mgcp.c:231</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="netsock2_8h_html_a9e06776a6cd2ae9f2780a445053a6864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a></div><div class="ttdeci">int ast_set_qos(int sockfd, int tos, int cos, const char *desc)</div><div class="ttdoc">Set type of service. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00621">netsock2.c:621</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abaabcb7f4349cc632dde3af5c6a5e1bd"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abaabcb7f4349cc632dde3af5c6a5e1bd">global_jbconf</a></div><div class="ttdeci">static struct ast_jb_conf global_jbconf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00114">chan_mgcp.c:114</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="acl_8h_html_ad364a9241e15fc0dbec0ffcb88f64671"><div class="ttname"><a href="../../d5/d59/acl_8h.html#ad364a9241e15fc0dbec0ffcb88f64671">ast_str2cos</a></div><div class="ttdeci">int ast_str2cos(const char *value, unsigned int *cos)</div><div class="ttdoc">Convert a string to the appropriate COS value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00953">acl.c:953</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="io_8h_html_afbf1092b96128d07d0dd08dfa898f4d5"><div class="ttname"><a href="../../dc/dac/io_8h.html#afbf1092b96128d07d0dd08dfa898f4d5">ast_io_remove</a></div><div class="ttdeci">int ast_io_remove(struct io_context *ioc, int *id)</div><div class="ttdoc">Removes an IO context. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00245">io.c:245</a></div></div>
<div class="ttc" id="structast__hostent_html"><div class="ttname"><a href="../../db/d2b/structast__hostent.html">ast_hostent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00208">utils.h:208</a></div></div>
<div class="ttc" id="utils_8h_html_ad3b63ee1041593219ef0765b28d70442"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad3b63ee1041593219ef0765b28d70442">ast_gethostbyname</a></div><div class="ttdeci">struct hostent * ast_gethostbyname(const char *host, struct ast_hostent *hp)</div><div class="ttdoc">Thread-safe gethostbyname function to use in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00197">main/utils.c:197</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_endpoint::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">chan_mgcp.c:386</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a24514343553b05c66e5b7d16e2df45cc"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a24514343553b05c66e5b7d16e2df45cc">matchdigittimeout</a></div><div class="ttdeci">static int matchdigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00220">chan_mgcp.c:220</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a1d084b82cb21102ba46ea60d3cd9c085"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a1d084b82cb21102ba46ea60d3cd9c085">__ourip</a></div><div class="ttdeci">static struct in_addr __ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">chan_mgcp.c:239</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2d8d5920e90ccbad7832926becdadb29"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2d8d5920e90ccbad7832926becdadb29">default_jbconf</a></div><div class="ttdeci">static struct ast_jb_conf default_jbconf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00106">chan_mgcp.c:106</a></div></div>
<div class="ttc" id="chan__skinny_8c_html_aa0f575fa3882aa394cc287edba645a35"><div class="ttname"><a href="../../d0/d80/chan__skinny_8c.html#aa0f575fa3882aa394cc287edba645a35">hp</a></div><div class="ttdeci">static struct hostent * hp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/chan__skinny_8c_source.html#l01236">chan_skinny.c:1236</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a7821b54b29c7b74aba79884f13b3ec03"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7821b54b29c7b74aba79884f13b3ec03">ourport</a></div><div class="ttdeci">static int ourport</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00240">chan_mgcp.c:240</a></div></div>
<div class="ttc" id="structast__jb__conf_html"><div class="ttname"><a href="../../d7/dba/structast__jb__conf.html">ast_jb_conf</a></div><div class="ttdoc">General jitterbuffer configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d14/abstract__jb_8h_source.html#l00069">abstract_jb.h:69</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_gateway::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">chan_mgcp.c:420</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9e1453e885395a3e5c5efe295bd3a0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9e1453e885395a3e5c5efe295bd3a0c">&#9670;&nbsp;</a></span>reqprep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reqprep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>verb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">2159</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02128">init_req()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00210">oseq_global</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00211">oseq_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">transmit_connect()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">transmit_connect_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02713">transmit_connection_del_w_params()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;{</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   memset(req, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a>));</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3902d7fb25307330eee84331320776cb">oseq_lock</a>);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afe1e469899e7d30ca0210a1b3d195c8e">oseq_global</a>++;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afe1e469899e7d30ca0210a1b3d195c8e">oseq_global</a> &gt; 999999999) {</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afe1e469899e7d30ca0210a1b3d195c8e">oseq_global</a> = 1;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   }</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afe1e469899e7d30ca0210a1b3d195c8e">oseq_global</a>;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3902d7fb25307330eee84331320776cb">oseq_lock</a>);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4b883bc27f1be3a07781311388e6fd9a">init_req</a>(p, req, verb, oseq);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   <span class="keywordflow">return</span> oseq;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_afe1e469899e7d30ca0210a1b3d195c8e"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afe1e469899e7d30ca0210a1b3d195c8e">oseq_global</a></div><div class="ttdeci">static unsigned int oseq_global</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00210">chan_mgcp.c:210</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4b883bc27f1be3a07781311388e6fd9a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4b883bc27f1be3a07781311388e6fd9a">init_req</a></div><div class="ttdeci">static int init_req(struct mgcp_endpoint *p, struct mgcp_request *req, char *verb, unsigned int oseq)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02128">chan_mgcp.c:2128</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3902d7fb25307330eee84331320776cb"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3902d7fb25307330eee84331320776cb">oseq_lock</a></div><div class="ttdeci">static ast_mutex_t oseq_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00211">chan_mgcp.c:211</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4c93589a31d76bb87e91227b12e8aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4c93589a31d76bb87e91227b12e8aa0">&#9670;&nbsp;</a></span>resend_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int resend_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d89/structmgcp__response.html">mgcp_response</a> *&#160;</td>
          <td class="paramname"><em>resp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00547">547</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">__mgcp_xmit()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00288">mgcp_response::buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00285">mgcp_response::len</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03639">find_and_retrans()</a>.</p>
<div class="fragment"><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;{</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Retransmitting:\n%s\n to %s:%d\n&quot;</span>, resp-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#a103a957b017f6b717767bba130a02694">buf</a>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr), ntohs(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port));</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   res = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>, resp-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#a103a957b017f6b717767bba130a02694">buf</a>, resp-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      res = 0;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a7344ce8a58aaa288034af6bdab3cce8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a></div><div class="ttdeci">static int __mgcp_xmit(struct mgcp_gateway *gw, char *data, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">chan_mgcp.c:534</a></div></div>
<div class="ttc" id="structmgcp__response_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#afed088663f8704004425cdae2120b9b3">mgcp_response::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00285">chan_mgcp.c:285</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="structmgcp__response_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#a103a957b017f6b717767bba130a02694">mgcp_response::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00288">chan_mgcp.c:288</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a022a74386a7546989a66b6232c1610fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a022a74386a7546989a66b6232c1610fe">&#9670;&nbsp;</a></span>respprep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int respprep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msgrest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02152">2152</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02110">init_resp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">transmit_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;{</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   memset(resp, 0, <span class="keyword">sizeof</span>(*resp));</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3926d890595f96ea9611a71a7eaa848f">init_resp</a>(resp, msg, req, msgrest);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a3926d890595f96ea9611a71a7eaa848f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3926d890595f96ea9611a71a7eaa848f">init_resp</a></div><div class="ttdeci">static int init_resp(struct mgcp_request *req, char *resp, struct mgcp_request *orig, char *resprest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02110">chan_mgcp.c:2110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83af94bb19a421cb25ca02d16fa5ba9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83af94bb19a421cb25ca02d16fa5ba9c">&#9670;&nbsp;</a></span>restart_monitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int restart_monitor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">3936</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00567">ast_pthread_create_background</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00067">AST_PTHREADT_STOP</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">monitor_thread</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">monlock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04856">load_module()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">mgcp_reload()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;{</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;   <span class="comment">/* If we&#39;re supposed to be stopped -- stay stopped */</span></div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a>)</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>)) {</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to lock monitor\n&quot;</span>);</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;   }</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> == pthread_self()) {</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot kill myself\n&quot;</span>);</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   }</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      <span class="comment">/* Wake up the thread */</span></div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      pthread_kill(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a>, SIGURG);</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      <span class="comment">/* Start a new monitor */</span></div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a02d8db6086b4a18353b82ebcad631ff6">do_monitor</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &lt; 0) {</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to start monitor thread.\n&quot;</span>);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      }</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;   }</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a02d8db6086b4a18353b82ebcad631ff6"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a02d8db6086b4a18353b82ebcad631ff6">do_monitor</a></div><div class="ttdeci">static void * do_monitor(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">chan_mgcp.c:3818</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afbd6fc6e0ab3c1a04a518f19c21d4503"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a></div><div class="ttdeci">static pthread_t monitor_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">chan_mgcp.c:231</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aae4816e76bb1382481a5941ac7057bef"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a></div><div class="ttdeci">static ast_mutex_t monlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">chan_mgcp.c:226</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="lock_8h_html_a873a83eb8196323194aac2bea23d794e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a></div><div class="ttdeci">#define AST_PTHREADT_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00067">lock.h:67</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44e12256095b8a352dbf49879ffa2aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44e12256095b8a352dbf49879ffa2aa9">&#9670;&nbsp;</a></span>retrans_pkt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int retrans_pkt </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00644">644</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">__mgcp_xmit()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00278">mgcp_message::buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00276">mgcp_message::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00127">MAX_RETRANS</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">mgcp_gateway::msgs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">mgcp_gateway::msgs_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">mgcp_message::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">mgcp_message::owner_ep</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00272">mgcp_message::owner_sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00273">mgcp_message::retrans</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">mgcp_gateway::retransid</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">mgcp_message::seqno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">mgcp_postrequest()</a>.</p>
<div class="fragment"><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *gw = (<span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *)data;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d0f/structmgcp__message.html">mgcp_message</a> *cur, *exq = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *w, *prev;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="comment">/* find out expired msgs */</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">for</span> (prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cur = gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>; cur; prev = cur, cur = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a> &lt; <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a24011ca9a966394f014bea9662713532">MAX_RETRANS</a>) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a>++;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Retransmitting #%d transaction %u on [%s]\n&quot;</span>,</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a>, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a>(gw, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a103a957b017f6b717767bba130a02694">buf</a>, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;         <span class="keywordflow">if</span> (prev)</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            prev-&gt;next = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a> = cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Maximum retries exceeded for transaction %u on [%s]\n&quot;</span>,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a>, gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         w = cur;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         <span class="keywordflow">if</span> (exq) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            w-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = exq;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            w-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;         }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         exq = w;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordflow">if</span> (!gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">msgs</a>) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">retransid</a> = -1;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      res = 0;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      res = 1;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;gw-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">msgs_lock</a>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keywordflow">while</span> (exq) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      cur = exq;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">/* time-out transaction */</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a40770b14c1a879ee5a9c97d295993f3f">handle_response</a>(cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">owner_ep</a>, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a44baf7dcc86ae0f4abf4ca170c90efa1">owner_sub</a>, 406, cur-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">seqno</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      exq = exq-&gt;<a class="code" href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">next</a>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cur);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a7344ce8a58aaa288034af6bdab3cce8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a></div><div class="ttdeci">static int __mgcp_xmit(struct mgcp_gateway *gw, char *data, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">chan_mgcp.c:534</a></div></div>
<div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a40770b14c1a879ee5a9c97d295993f3f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a40770b14c1a879ee5a9c97d295993f3f">handle_response</a></div><div class="ttdeci">static void handle_response(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, int result, unsigned int ident, struct mgcp_request *resp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">chan_mgcp.c:2797</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a46343af77fad6544521746d18f85e84d">mgcp_gateway::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00419">chan_mgcp.c:419</a></div></div>
<div class="ttc" id="structmgcp__message_html_a99d568ed8b8bd99f5659df1c422794d9"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a99d568ed8b8bd99f5659df1c422794d9">mgcp_message::owner_ep</a></div><div class="ttdeci">struct mgcp_endpoint * owner_ep</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00271">chan_mgcp.c:271</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a44559e1fe7aed6dbdd0b55dc76525dfc"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a44559e1fe7aed6dbdd0b55dc76525dfc">mgcp_gateway::msgs_lock</a></div><div class="ttdeci">ast_mutex_t msgs_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00418">chan_mgcp.c:418</a></div></div>
<div class="ttc" id="structmgcp__message_html"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html">mgcp_message</a></div><div class="ttdoc">mgcp_message: MGCP message for queuing up </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00270">chan_mgcp.c:270</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__message_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a103a957b017f6b717767bba130a02694">mgcp_message::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00278">chan_mgcp.c:278</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a985373ab089816b56bd33ecc0637212c"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a985373ab089816b56bd33ecc0637212c">mgcp_gateway::msgs</a></div><div class="ttdeci">struct mgcp_message * msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00417">chan_mgcp.c:417</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__message_html_a4ab21dd2375ec54e44ae4da973a3d4ca"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a4ab21dd2375ec54e44ae4da973a3d4ca">mgcp_message::retrans</a></div><div class="ttdeci">int retrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00273">chan_mgcp.c:273</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a24011ca9a966394f014bea9662713532"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a24011ca9a966394f014bea9662713532">MAX_RETRANS</a></div><div class="ttdeci">#define MAX_RETRANS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00127">chan_mgcp.c:127</a></div></div>
<div class="ttc" id="structmgcp__message_html_a3de267d5622f94a1dc06d1d2f2f34d95"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a3de267d5622f94a1dc06d1d2f2f34d95">mgcp_message::next</a></div><div class="ttdeci">struct mgcp_message * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00277">chan_mgcp.c:277</a></div></div>
<div class="ttc" id="structmgcp__message_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#afed088663f8704004425cdae2120b9b3">mgcp_message::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00276">chan_mgcp.c:276</a></div></div>
<div class="ttc" id="structmgcp__message_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#aac99560397aa1e3e12367419ed305d11">mgcp_message::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00275">chan_mgcp.c:275</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structmgcp__message_html_a44baf7dcc86ae0f4abf4ca170c90efa1"><div class="ttname"><a href="../../d7/d0f/structmgcp__message.html#a44baf7dcc86ae0f4abf4ca170c90efa1">mgcp_message::owner_sub</a></div><div class="ttdeci">struct mgcp_subchannel * owner_sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00272">chan_mgcp.c:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d036cbd077230f51bec5020ec1d2515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d036cbd077230f51bec5020ec1d2515">&#9670;&nbsp;</a></span>sdpLineNum_iterator_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sdpLineNum_iterator_init </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>iterator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01619">1619</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;{</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;   *iterator = 0;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a2a6a6850587a7e603325f2c966bb1c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a6a6850587a7e603325f2c966bb1c94">&#9670;&nbsp;</a></span>send_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seqno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">743</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">mgcp_endpoint::cmd_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">mgcp_endpoint::cmd_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">mgcp_subchannel::cx_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">mgcp_subchannel::cx_queue_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">MGCP_CMD_CRCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">MGCP_CMD_DLCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">MGCP_CMD_MDCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">MGCP_CMD_RQNT</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">mgcp_postrequest()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00266">mgcp_request::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">mgcp_endpoint::rqnt_queue</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">mgcp_endpoint::rqnt_queue_lock</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00369">mgcp_endpoint::slowsequence</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">transmit_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">transmit_connect()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">transmit_connect_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02713">transmit_connection_del_w_params()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>
<div class="fragment"><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> **queue, *q, *r, *t;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> *l;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Slow sequence is %d\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a>);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">slowsequence</a>) {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      queue = &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      l = &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(l);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">switch</span> (req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">cmd</a>) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a>:</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;         queue = &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;         l = &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(l);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;         q = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;         <span class="comment">/* delete pending cx cmds */</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;         <span class="comment">/* buggy sb5120 */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a>) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">while</span> (q) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;               r = q-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(q);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;               q = r;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            *queue = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;         }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>:</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a>:</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;         queue = &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">cx_queue</a>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;         l = &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">cx_queue_lock</a>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(l);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a>:</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;         queue = &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">rqnt_queue</a>;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;         l = &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">rqnt_queue_lock</a>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(l);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;         queue = &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">cmd_queue</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;         l = &amp;p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">cmd_queue_lock</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(l);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <span class="keywordflow">if</span> (!(r = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*r)))) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot post MGCP request: insufficient memory\n&quot;</span>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(l);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   memcpy(r, req, <span class="keyword">sizeof</span>(*r));</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordflow">if</span> (!(*queue)) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Posting Request:\n%s to %s:%d\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>,</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr), ntohs(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port));</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      res = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af072ea217a7fb31eb08de9edfdfbbebe">mgcp_postrequest</a>(p, sub, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>, seqno);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Queueing Request:\n%s to %s:%d\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>,</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;         <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr), ntohs(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port));</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="comment">/* XXX find tail. We could also keep tail in the data struct for faster access */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keywordflow">for</span> (t = *queue; t &amp;&amp; t-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>; t = t-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   r-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keywordflow">if</span> (t)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      t-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">next</a> = r;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      *queue = r;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(l);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a29dad1d4c5a8ec28256d8356c9d2f489"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29dad1d4c5a8ec28256d8356c9d2f489">mgcp_subchannel::cx_queue</a></div><div class="ttdeci">struct mgcp_request * cx_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00315">chan_mgcp.c:315</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a179943a90ba52fd7b5585e44b3b814fd"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a179943a90ba52fd7b5585e44b3b814fd">mgcp_endpoint::cmd_queue_lock</a></div><div class="ttdeci">ast_mutex_t cmd_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00385">chan_mgcp.c:385</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a00bf83036d0252d0189adbf610a003f8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a00bf83036d0252d0189adbf610a003f8">mgcp_endpoint::slowsequence</a></div><div class="ttdeci">int slowsequence</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00369">chan_mgcp.c:369</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__request_html_ad13322ff33d04a9999aef85a0599e898"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ad13322ff33d04a9999aef85a0599e898">mgcp_request::next</a></div><div class="ttdeci">struct mgcp_request * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00266">chan_mgcp.c:266</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">chan_mgcp.c:149</a></div></div>
<div class="ttc" id="structmgcp__request_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">mgcp_request::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">chan_mgcp.c:254</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">chan_mgcp.c:150</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_ad84a7f16dcc58220e722b87572c59984"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#ad84a7f16dcc58220e722b87572c59984">mgcp_endpoint::rqnt_queue</a></div><div class="ttdeci">struct mgcp_request * rqnt_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00382">chan_mgcp.c:382</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af072ea217a7fb31eb08de9edfdfbbebe"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af072ea217a7fb31eb08de9edfdfbbebe">mgcp_postrequest</a></div><div class="ttdeci">static int mgcp_postrequest(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, char *data, int len, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">chan_mgcp.c:699</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">chan_mgcp.c:152</a></div></div>
<div class="ttc" id="structmgcp__request_html_a85092d82ab6ea85dad51ba78cbda36a0"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#a85092d82ab6ea85dad51ba78cbda36a0">mgcp_request::cmd</a></div><div class="ttdeci">int cmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">chan_mgcp.c:264</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_af15f3d61ee3636e814aeedff3d001594"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#af15f3d61ee3636e814aeedff3d001594">mgcp_subchannel::cx_queue_lock</a></div><div class="ttdeci">ast_mutex_t cx_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00316">chan_mgcp.c:316</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a5aa61adfb890b26d29a1a345329ff204"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a5aa61adfb890b26d29a1a345329ff204">mgcp_endpoint::rqnt_queue_lock</a></div><div class="ttdeci">ast_mutex_t rqnt_queue_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00383">chan_mgcp.c:383</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0cd9821136cf8ae2d1c640f8f8c87540"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0cd9821136cf8ae2d1c640f8f8c87540">mgcp_endpoint::cmd_queue</a></div><div class="ttdeci">struct mgcp_request * cmd_queue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00384">chan_mgcp.c:384</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">chan_mgcp.c:151</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
<div class="ttc" id="structast__mutex__info_html"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html">ast_mutex_info</a></div><div class="ttdoc">Structure for mutex and tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00135">lock.h:135</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9e0058277f64c9c49ef84001dc20125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9e0058277f64c9c49ef84001dc20125">&#9670;&nbsp;</a></span>send_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00558">558</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">__mgcp_xmit()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">mgcp_gateway::addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">transmit_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Transmitting:\n%s\n to %s:%d\n&quot;</span>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>, <a class="code" href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_addr), ntohs(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">addr</a>.sin_port));</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   res = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">data</a>, req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">len</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      res = 0;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a7344ce8a58aaa288034af6bdab3cce8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a7344ce8a58aaa288034af6bdab3cce8a">__mgcp_xmit</a></div><div class="ttdeci">static int __mgcp_xmit(struct mgcp_gateway *gw, char *data, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">chan_mgcp.c:534</a></div></div>
<div class="ttc" id="structmgcp__request_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#afed088663f8704004425cdae2120b9b3">mgcp_request::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">chan_mgcp.c:254</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_afdf3b1ca80400cc6bd5bfe2bb1cb7e65"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#afdf3b1ca80400cc6bd5bfe2bb1cb7e65">mgcp_gateway::addr</a></div><div class="ttdeci">struct sockaddr_in addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00403">chan_mgcp.c:403</a></div></div>
<div class="ttc" id="network_8h_html_a5a735cb59e8a8ddd78078d396db7e106"><div class="ttname"><a href="../../d9/d94/network_8h.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a></div><div class="ttdeci">const char * ast_inet_ntoa(struct in_addr ia)</div><div class="ttdoc">thread-safe replacement for inet_ntoa(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00782">main/utils.c:782</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="structmgcp__request_html_ab934ed29f860d2b79cbaa069284ab0ea"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#ab934ed29f860d2b79cbaa069284ab0ea">mgcp_request::data</a></div><div class="ttdeci">char data[MGCP_MAX_PACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">chan_mgcp.c:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36b9cd6deb29a58ba6c432767d314a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36b9cd6deb29a58ba6c432767d314a35">&#9670;&nbsp;</a></span>start_rtp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_rtp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">2967</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02431">ast_channel_set_fd()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00458">ast_rtp_instance_destroy()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02192">ast_rtp_instance_fd()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00465">ast_rtp_instance_new()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00705">ast_rtp_instance_set_prop()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02169">ast_rtp_instance_set_qos()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00115">AST_RTP_PROPERTY_NAT</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00434">bindaddr</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">mgcp_subchannel::lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02448">mgcp_alloc_pktcgate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">mgcp_queue_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00317">mgcp_subchannel::nat</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">mgcp_subchannel::owner</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00366">mgcp_endpoint::pktcgatealloc</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">transmit_connect()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">transmit_connect_with_sdp()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01156">mgcp_answer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>.</p>
<div class="fragment"><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;{</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> bindaddr_tmp;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;   <span class="comment">/* check again to be on the safe side */</span></div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;   }</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;   <span class="comment">/* Allocate the RTP now */</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(&amp;bindaddr_tmp, &amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a>);</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a012b2ab9fad02a5fbf9e457a69020ade">ast_rtp_instance_new</a>(<span class="stringliteral">&quot;asterisk&quot;</span>, <a class="code" href="../../d0/da0/structsched.html">sched</a>, &amp;bindaddr_tmp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> &amp;&amp; sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>)</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>, 0, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 0));</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.tos_audio, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a>.cos_audio, <span class="stringliteral">&quot;MGCP RTP&quot;</span>);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ada540a5f25f7302dc1a3d17ccfa59b10">nat</a>);</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   }</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;   <span class="comment">/* Make a call*ID */</span></div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;   snprintf(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>), <span class="stringliteral">&quot;%08lx%s&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>(), sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>);</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;   <span class="comment">/* Transmit the connection create */</span></div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;   <span class="keywordflow">if</span>(!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a47a9f50ad99a5568e185a540270296d9">pktcgatealloc</a>) {</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a01667d3dd97c237d1aeeeb3e1a3ce1eb">transmit_connect_with_sdp</a>(sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9cb710ae845ca80cab81479ca2ce8ee3">transmit_connect</a>(sub);</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6a5c2da288e4f4ede7a4fd124d80418c">mgcp_alloc_pktcgate</a>(sub))</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;         <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a>(sub);</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;   }</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a01667d3dd97c237d1aeeeb3e1a3ce1eb"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a01667d3dd97c237d1aeeeb3e1a3ce1eb">transmit_connect_with_sdp</a></div><div class="ttdeci">static int transmit_connect_with_sdp(struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">chan_mgcp.c:2363</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ada540a5f25f7302dc1a3d17ccfa59b10"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ada540a5f25f7302dc1a3d17ccfa59b10">mgcp_subchannel::nat</a></div><div class="ttdeci">int nat</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00317">chan_mgcp.c:317</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ab71294e675bc01eb29e9fd13b3839759"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab71294e675bc01eb29e9fd13b3839759">ast_rtp_instance_set_qos</a></div><div class="ttdeci">int ast_rtp_instance_set_qos(struct ast_rtp_instance *instance, int tos, int cos, const char *desc)</div><div class="ttdoc">Set QoS parameters on an RTP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02169">rtp_engine.c:2169</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a5f3b129ca45af64249c42597b5b414f8"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a5f3b129ca45af64249c42597b5b414f8">mgcp_queue_hangup</a></div><div class="ttdeci">static void mgcp_queue_hangup(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00621">chan_mgcp.c:621</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#adf04f66344e3fb0a6f6a69bf39d19902">mgcp_subchannel::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00304">chan_mgcp.c:304</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8a585e8d22d599bb4f067e383f5c1f72"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8a585e8d22d599bb4f067e383f5c1f72">qos</a></div><div class="ttdeci">static struct @126 qos</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca0f994311315c8d856b8298bc22f7e007">AST_RTP_PROPERTY_NAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00115">rtp_engine.h:115</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4ec29229510a2e3ea6ce34d520f06e90"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4ec29229510a2e3ea6ce34d520f06e90">bindaddr</a></div><div class="ttdeci">static struct sockaddr_in bindaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00434">chan_mgcp.c:434</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6a5c2da288e4f4ede7a4fd124d80418c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6a5c2da288e4f4ede7a4fd124d80418c">mgcp_alloc_pktcgate</a></div><div class="ttdeci">static int mgcp_alloc_pktcgate(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02448">chan_mgcp.c:2448</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9cb710ae845ca80cab81479ca2ce8ee3"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9cb710ae845ca80cab81479ca2ce8ee3">transmit_connect</a></div><div class="ttdeci">static int transmit_connect(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">chan_mgcp.c:2462</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9241175b397dfd032c4cadbc8c9c2d05">mgcp_subchannel::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00306">chan_mgcp.c:306</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a47a9f50ad99a5568e185a540270296d9"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a47a9f50ad99a5568e185a540270296d9">mgcp_endpoint::pktcgatealloc</a></div><div class="ttdeci">int pktcgatealloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00366">chan_mgcp.c:366</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aee3ef7f9e53a34e743c3a95c9ca95fb4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a></div><div class="ttdeci">int ast_rtp_instance_fd(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Get the file descriptor for an RTP session (or RTCP) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02192">rtp_engine.c:2192</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0bfe6336fe7deb78148a84aef2732c7a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a></div><div class="ttdeci">int ast_rtp_instance_destroy(struct ast_rtp_instance *instance)</div><div class="ttdoc">Destroy an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00458">rtp_engine.c:458</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="channel_8h_html_aca37ca2f3d55a223d26617329ed48a3e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a></div><div class="ttdeci">void ast_channel_set_fd(struct ast_channel *chan, int which, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02431">channel.c:2431</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a012b2ab9fad02a5fbf9e457a69020ade"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a012b2ab9fad02a5fbf9e457a69020ade">ast_rtp_instance_new</a></div><div class="ttdeci">struct ast_rtp_instance * ast_rtp_instance_new(const char *engine_name, struct ast_sched_context *sched, const struct ast_sockaddr *sa, void *data)</div><div class="ttdoc">Create a new RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00465">rtp_engine.c:465</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a378d1872f2d3bc625940d17905c23621"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a378d1872f2d3bc625940d17905c23621">&#9670;&nbsp;</a></span>transmit_audit_endpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_audit_endpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02676">2676</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00154">MGCP_CMD_AUEP</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01686">find_realtime_gw()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01060">handle_mgcp_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;{</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;AUEP&quot;</span>);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;   <span class="comment">/* removed unknown param VS */</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   <span class="comment">/*add_header(&amp;resp, &quot;F&quot;, &quot;A,R,D,S,X,N,I,T,O,ES,E,MD,M&quot;);*/</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a>;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;resp, oseq);</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a24e7f29a7f2d55253c604d343f45caf9">MGCP_CMD_AUEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00154">chan_mgcp.c:154</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9cb710ae845ca80cab81479ca2ce8ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cb710ae845ca80cab81479ca2ce8ee3">&#9670;&nbsp;</a></span>transmit_connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">2462</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01992">ast_rtp_lookup_mime_subtype2()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">MGCP_CMD_CRCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>.</p>
<div class="fragment"><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;{</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordtype">char</span> local[256];</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[80];</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *tmpfmt;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(local, <span class="stringliteral">&quot;p:20, s:off, e:on&quot;</span>, <span class="keyword">sizeof</span>(local));</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>); x++) {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      tmpfmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, x);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, a:%s&quot;</span>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(1, tmpfmt, 0, 0));</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmpfmt, -1);</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Creating connection for %s@%s-%d in cxmode: %s callid: %s\n&quot;</span>,</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;          p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>], sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> = 0;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;CRCX&quot;</span>);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;C&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;L&quot;</span>, local);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;M&quot;</span>, <span class="stringliteral">&quot;inactive&quot;</span>);</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <span class="comment">/* X header should not be sent. kept for compatibility */</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <span class="comment">/*add_header(&amp;resp, &quot;S&quot;, &quot;&quot;);*/</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, sub, &amp;resp, oseq);</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">chan_mgcp.c:149</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01667d3dd97c237d1aeeeb3e1a3ce1eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01667d3dd97c237d1aeeeb3e1a3ce1eb">&#9670;&nbsp;</a></span>transmit_connect_with_sdp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_connect_with_sdp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">2363</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">add_sdp()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01992">ast_rtp_lookup_mime_subtype2()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00045">GATE_ALLOCATED</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00055">cops_gate::gateid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">MGCP_CMD_CRCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00059">cops_gate::state</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>.</p>
<div class="fragment"><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;{</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;   <span class="keywordtype">char</span> local[256];</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[80];</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Creating connection for %s@%s-%d in cxmode: %s callid: %s\n&quot;</span>,</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;       p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>], sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(local, <span class="stringliteral">&quot;e:on, s:off, p:20&quot;</span>, <span class="keyword">sizeof</span>(local));</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>); i++) {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, i);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(format) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      }</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, a:%s&quot;</span>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(1, format, 0, 0));</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;   }</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="keywordflow">if</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a>) {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;         snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, dq-gi:%x&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">gateid</a>);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;         strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      }</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   }</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> = 1;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;CRCX&quot;</span>);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;C&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;L&quot;</span>, local);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;M&quot;</span>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>]);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;   <span class="comment">/* X header should not be sent. kept for compatibility */</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   <span class="comment">/*add_header(&amp;resp, &quot;S&quot;, &quot;&quot;);*/</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a>(&amp;resp, sub, rtp);</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a>;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, sub, &amp;resp, oseq);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00045">pktccops.h:45</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b0182993ca9de9c68d1f7b8efe0fc93"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a></div><div class="ttdeci">static int add_sdp(struct mgcp_request *resp, struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">chan_mgcp.c:2201</a></div></div>
<div class="ttc" id="structcops__gate_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">cops_gate::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00059">pktccops.h:59</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3d5f3b6c01c90860992816c88536303b">MGCP_CMD_CRCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00149">chan_mgcp.c:149</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structcops__gate_html_a11c22f2d80c89994b4e0f259101a0d12"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">cops_gate::gateid</a></div><div class="ttdeci">uint32_t gateid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00055">pktccops.h:55</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac141c0eb38c44bc9d1d69633a8deed8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac141c0eb38c44bc9d1d69633a8deed8a">&#9670;&nbsp;</a></span>transmit_connection_del()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_connection_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">2690</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">MGCP_CMD_DLCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">unalloc_sub()</a>.</p>
<div class="fragment"><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;{</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Delete connection %s %s@%s-%d with new mode: %s on callid: %s\n&quot;</span>,</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>], sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;DLCX&quot;</span>);</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;   <span class="comment">/* check if call id is avail */</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>[0])</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;C&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   <span class="comment">/* X header should not be sent. kept for compatibility */</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>);</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;   <span class="comment">/* check if cxident is avail */</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>[0])</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;I&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>);</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a>;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, sub, &amp;resp, oseq);</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">chan_mgcp.c:151</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab497914e23cbc14cd4dcde87fe1e5fc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab497914e23cbc14cd4dcde87fe1e5fc7">&#9670;&nbsp;</a></span>transmit_connection_del_w_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_connection_del_w_params </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>callid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cxident</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02713">2713</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">MGCP_CMD_DLCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;{</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Delete connection %s %s@%s on callid: %s\n&quot;</span>,</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      cxident ? cxident : <span class="stringliteral">&quot;&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, callid ? callid : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;DLCX&quot;</span>);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;   <span class="comment">/* check if call id is avail */</span></div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;   <span class="keywordflow">if</span> (callid &amp;&amp; *callid)</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;C&quot;</span>, callid);</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   <span class="comment">/* check if cxident is avail */</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;   <span class="keywordflow">if</span> (cxident &amp;&amp; *cxident)</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;I&quot;</span>, cxident);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a>;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a>, &amp;resp, oseq);</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;}</div><div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a3ba34f5bc07f71656895a644931ced76">MGCP_CMD_DLCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00151">chan_mgcp.c:151</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a065f650bbf31f5b322e9dc5008361ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a065f650bbf31f5b322e9dc5008361ee4">&#9670;&nbsp;</a></span>transmit_modify_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_modify_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">2572</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">add_header_offhook()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">add_sdp()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00525">ast_format_cap_remove_by_type()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01992">ast_rtp_lookup_mime_subtype2()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00045">GATE_ALLOCATED</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00048">GATE_OPEN</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00055">cops_gate::gateid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">MGCP_CMD_MDCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">mgcp_endpoint::ncs</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00059">cops_gate::state</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01156">mgcp_answer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01438">mgcp_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;{</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   <span class="keywordtype">int</span> fc = 1;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <span class="keywordtype">char</span> local[256];</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[80];</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>)) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="comment">/* We don&#39;t have a CXident yet, store the destination and</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="comment">         wait a bit */</span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   }</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Modified %s@%s-%d with new mode: %s on callid: %s\n&quot;</span>,</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;      p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>], sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(local, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">sizeof</span>(local));</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>); i++) {</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, i);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">ncs</a> &amp;&amp; !fc) {</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, format, 0); <span class="comment">/* sb5120e bug */</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;         fc = 0;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;         snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, a:%s&quot;</span>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(1, format, 0, 0));</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      }</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   }</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a>) {</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;         <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a> || sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a7c1d8f3079bdc2046f165d505674ce72">GATE_OPEN</a>) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, dq-gi:%x&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">gateid</a>);</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;               <span class="comment">/* we still don&#39;t have gateid wait */</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;         }</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   }</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;MDCX&quot;</span>);</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;C&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a>) {</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;L&quot;</span>, local);</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   }</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;M&quot;</span>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>]);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="comment">/* X header should not be sent. kept for compatibility */</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>);</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;I&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>);</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;   <span class="keywordflow">switch</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a>) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>:</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;L/hd(N)&quot;</span>);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>:</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a>(sub, &amp;resp, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a>) {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a>(&amp;resp, sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> = 1;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;   }</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a>;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, sub, &amp;resp, oseq);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00045">pktccops.h:45</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b0182993ca9de9c68d1f7b8efe0fc93"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a></div><div class="ttdeci">static int add_sdp(struct mgcp_request *resp, struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">chan_mgcp.c:2201</a></div></div>
<div class="ttc" id="structcops__gate_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">cops_gate::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00059">pktccops.h:59</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">chan_mgcp.c:150</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="structcops__gate_html_a11c22f2d80c89994b4e0f259101a0d12"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">cops_gate::gateid</a></div><div class="ttdeci">uint32_t gateid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00055">pktccops.h:55</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad0aec7af9d830c447114c12ba64ddb76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a></div><div class="ttdeci">static void add_header_offhook(struct mgcp_subchannel *sub, struct mgcp_request *resp, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">chan_mgcp.c:2648</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a1c6dbd425fcb4ee2ef192af2e2d0c284"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a1c6dbd425fcb4ee2ef192af2e2d0c284">mgcp_endpoint::ncs</a></div><div class="ttdeci">int ncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00365">chan_mgcp.c:365</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a7c1d8f3079bdc2046f165d505674ce72"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a7c1d8f3079bdc2046f165d505674ce72">GATE_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00048">pktccops.h:48</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2843e30c260fbe5d077107ad06f0a99e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2843e30c260fbe5d077107ad06f0a99e">&#9670;&nbsp;</a></span>transmit_modify_with_sdp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_modify_with_sdp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>codecs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">2301</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">add_sdp()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01192">ast_rtp_instance_get_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l01992">ast_rtp_lookup_mime_subtype2()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00769">ast_sockaddr_to_sin</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">mgcp_endpoint::cap</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">mgcp_subchannel::gate</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00045">GATE_ALLOCATED</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00048">GATE_OPEN</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00055">cops_gate::gateid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">MGCP_CMD_MDCX</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">mgcp_subchannel::sdpsent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../dc/d79/pktccops_8h_source.html#l00059">cops_gate::state</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">mgcp_subchannel::tmpdest</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">mgcp_subchannel::txident</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02435">mgcp_pktcgate_open()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04491">mgcp_set_rtp_peer()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01240">mgcp_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;{</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;   <span class="keywordtype">char</span> local[256];</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[80];</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sub_tmpdest_tmp;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>) &amp;&amp; rtp) {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <span class="comment">/* We don&#39;t have a CXident yet, store the destination and</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">         wait a bit */</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a>(rtp, &amp;sub_tmpdest_tmp);</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a>(&amp;sub_tmpdest_tmp, &amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;   }</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(local, <span class="stringliteral">&quot;e:on, s:off, p:20&quot;</span>, <span class="keyword">sizeof</span>(local));</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>); i++) {</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, i);</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(format) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      }</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, a:%s&quot;</span>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a>(1, format, 0, 0));</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   }</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>) {</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a> || sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">state</a> == <a class="code" href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a7c1d8f3079bdc2046f165d505674ce72">GATE_OPEN</a>) {</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;         snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;, dq-gi:%x&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">gate</a>-&gt;<a class="code" href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">gateid</a>);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;         strncat(local, tmp, <span class="keyword">sizeof</span>(local) - strlen(local) - 1);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> = 1;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;         <span class="comment">/* oops wait */</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Waiting for opened gate...\n&quot;</span>);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;         sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">sdpsent</a> = 0;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   }</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;MDCX&quot;</span>);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;C&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>);</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;L&quot;</span>, local);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;M&quot;</span>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>]);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <span class="comment">/* X header should not be sent. kept for compatibility */</span></div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">txident</a>);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;I&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>);</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="comment">/*add_header(&amp;resp, &quot;S&quot;, &quot;&quot;);*/</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a>(&amp;resp, sub, rtp);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a>;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, sub, &amp;resp, oseq);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a5f0af02aff312a49e05fd440316ef57e">GATE_ALLOCATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00045">pktccops.h:45</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a2357ad6e3a54d0e145bf1163e3c7f166"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a2357ad6e3a54d0e145bf1163e3c7f166">mgcp_subchannel::gate</a></div><div class="ttdeci">struct cops_gate * gate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00322">chan_mgcp.c:322</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b0182993ca9de9c68d1f7b8efe0fc93"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b0182993ca9de9c68d1f7b8efe0fc93">add_sdp</a></div><div class="ttdeci">static int add_sdp(struct mgcp_request *resp, struct mgcp_subchannel *sub, struct ast_rtp_instance *rtp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">chan_mgcp.c:2201</a></div></div>
<div class="ttc" id="structcops__gate_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a89f234133d3efe315836311cbf21c64b">cops_gate::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00059">pktccops.h:59</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9fa52623037d0a63fc64fdc5617ca4d6"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">mgcp_subchannel::tmpdest</a></div><div class="ttdeci">struct sockaddr_in tmpdest</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">chan_mgcp.c:309</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a8fa4d84a47ef7d219d1eb922dcbe8d30">MGCP_CMD_MDCX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00150">chan_mgcp.c:150</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a970f3be80cbd08a1591eb8588f3cd54b">mgcp_endpoint::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00374">chan_mgcp.c:374</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ad47d1bd43ea874c9dc5564d85588a99a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ad47d1bd43ea874c9dc5564d85588a99a">ast_rtp_lookup_mime_subtype2</a></div><div class="ttdeci">const char * ast_rtp_lookup_mime_subtype2(const int asterisk_format, const struct ast_format *format, int code, enum ast_rtp_options options)</div><div class="ttdoc">Retrieve mime subtype information on a payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l01992">rtp_engine.c:1992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structcops__gate_html_a11c22f2d80c89994b4e0f259101a0d12"><div class="ttname"><a href="../../db/da2/structcops__gate.html#a11c22f2d80c89994b4e0f259101a0d12">cops_gate::gateid</a></div><div class="ttdeci">uint32_t gateid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00055">pktccops.h:55</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a6e3288c4b977cafb8e11737c0eb4a79f"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a6e3288c4b977cafb8e11737c0eb4a79f">mgcp_subchannel::txident</a></div><div class="ttdeci">char txident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00310">chan_mgcp.c:310</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa60da39edcabcec05ca9219c7b290395"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa60da39edcabcec05ca9219c7b290395">ast_sockaddr_to_sin</a></div><div class="ttdeci">#define ast_sockaddr_to_sin(addr, sin)</div><div class="ttdoc">Converts a struct ast_sockaddr to a struct sockaddr_in. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00769">netsock2.h:769</a></div></div>
<div class="ttc" id="pktccops_8h_html_ae91638596a8955da23581d7ad008e295a7c1d8f3079bdc2046f165d505674ce72"><div class="ttname"><a href="../../dc/d79/pktccops_8h.html#ae91638596a8955da23581d7ad008e295a7c1d8f3079bdc2046f165d505674ce72">GATE_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d79/pktccops_8h_source.html#l00048">pktccops.h:48</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a93641d10c20e61b3ea111f0e9d33d081"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a93641d10c20e61b3ea111f0e9d33d081">mgcp_subchannel::sdpsent</a></div><div class="ttdeci">int sdpsent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00321">chan_mgcp.c:321</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a5665ad0c5abe3c26005c39d6a3680fa1"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a5665ad0c5abe3c26005c39d6a3680fa1">ast_rtp_instance_get_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01192">rtp_engine.h:1192</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3604c82917827339e10a2a1455f84e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3604c82917827339e10a2a1455f84e7c">&#9670;&nbsp;</a></span>transmit_notify_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_notify_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">2499</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">add_header_offhook()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00346">mgcp_endpoint::curtone</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">MGCP_CMD_RQNT</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00381">mgcp_endpoint::rqnt_ident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03322">handle_hd_hf()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01156">mgcp_answer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01438">mgcp_indicate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01319">mgcp_senddigit_end()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>.</p>
<div class="fragment"><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;{</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP Asked to indicate tone: %s on  %s@%s-%d in cxmode: %s\n&quot;</span>,</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      tone, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>]);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>, tone, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>));</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;RQNT&quot;</span>);</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">rqnt_ident</a>);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a>) {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>:</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;L/hd(N)&quot;</span>);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>:</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a>(sub, &amp;resp, tone);</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   }</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tone)) {</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;S&quot;</span>, tone);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   }</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a>;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;resp, oseq);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a980b33312b4a6f0bbe8f0897ae20b55c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">mgcp_endpoint::curtone</a></div><div class="ttdeci">char curtone[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00346">chan_mgcp.c:346</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0d50b8f54bc87fe58ad0dd5322c1f4c0"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">mgcp_endpoint::rqnt_ident</a></div><div class="ttdeci">char rqnt_ident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00381">chan_mgcp.c:381</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">chan_mgcp.c:152</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad0aec7af9d830c447114c12ba64ddb76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a></div><div class="ttdeci">static void add_header_offhook(struct mgcp_subchannel *sub, struct mgcp_request *resp, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">chan_mgcp.c:2648</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5d290a73d1b60bff6968dbab9280762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5d290a73d1b60bff6968dbab9280762">&#9670;&nbsp;</a></span>transmit_notify_request_with_callerid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_notify_request_with_callerid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>callernum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>callername</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">2527</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">add_header()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">add_header_offhook()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/df8/localtime_8c_source.html#l01739">ast_localtime()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00264">mgcp_request::cmd</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00346">mgcp_endpoint::curtone</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">mgcp_endpoint::hookstate</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00342">mgcp_endpoint::lastcallerid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">MGCP_CMD_RQNT</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">mgcp_cxmodes</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">MGCP_OFFHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">MGCP_ONHOOK</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00381">mgcp_endpoint::rqnt_ident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00038">ast_tm::tm_hour</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00039">ast_tm::tm_mday</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00037">ast_tm::tm_min</a>, <a class="el" href="../../d5/deb/localtime_8h_source.html#l00040">ast_tm::tm_mon</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00265">mgcp_request::trid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;{</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   <span class="keywordtype">char</span> tone2[256];</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   <span class="keywordtype">char</span> *l, *n;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keyword">struct </span>timeval t = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oseq;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;t, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   n = callername;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   l = callernum;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;   <span class="keywordflow">if</span> (!n)</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      n = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   <span class="keywordflow">if</span> (!l)</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      l = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;   <span class="comment">/* Keep track of last callerid for blacklist and callreturn */</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>, l, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">lastcallerid</a>));</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;   snprintf(tone2, <span class="keyword">sizeof</span>(tone2), <span class="stringliteral">&quot;%s,L/ci(%02d/%02d/%02d/%02d,%s,%s)&quot;</span>, tone,</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      tm.tm_mon + 1, tm.tm_mday, tm.tm_hour, tm.tm_min, l, n);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>, tone, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">curtone</a>));</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   oseq = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a>(&amp;resp, p, <span class="stringliteral">&quot;RQNT&quot;</span>);</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;X&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">rqnt_ident</a>);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">hookstate</a>) {</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a>:</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;R&quot;</span>, <span class="stringliteral">&quot;L/hd(N)&quot;</span>);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a>:</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a>(sub, &amp;resp, tone);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   }</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tone2)) {</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a>(&amp;resp, <span class="stringliteral">&quot;S&quot;</span>, tone2);</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   }</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;MGCP Asked to indicate tone: %s on  %s@%s-%d in cxmode: %s\n&quot;</span>,</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      tone2, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a>[sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a>]);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <span class="comment">/* fill in new fields */</span></div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   resp.cmd = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a>;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;   resp.trid = oseq;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;resp, oseq);</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_aced6554217c497a494152c997866c6de"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aced6554217c497a494152c997866c6de">mgcp_cxmodes</a></div><div class="ttdeci">static const char *const mgcp_cxmodes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">chan_mgcp.c:139</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_af311aecfc6a3ee5035d14b33e77ef7ab"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#af311aecfc6a3ee5035d14b33e77ef7ab">mgcp_endpoint::lastcallerid</a></div><div class="ttdeci">char lastcallerid[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00342">chan_mgcp.c:342</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af9e1453e885395a3e5c5efe295bd3a0c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af9e1453e885395a3e5c5efe295bd3a0c">reqprep</a></div><div class="ttdeci">static int reqprep(struct mgcp_request *req, struct mgcp_endpoint *p, char *verb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">chan_mgcp.c:2159</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a980b33312b4a6f0bbe8f0897ae20b55c"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a980b33312b4a6f0bbe8f0897ae20b55c">mgcp_endpoint::curtone</a></div><div class="ttdeci">char curtone[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00346">chan_mgcp.c:346</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a0d50b8f54bc87fe58ad0dd5322c1f4c0"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a0d50b8f54bc87fe58ad0dd5322c1f4c0">mgcp_endpoint::rqnt_ident</a></div><div class="ttdeci">char rqnt_ident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00381">chan_mgcp.c:381</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_adda5b152975da98037175ed9f8678581"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#adda5b152975da98037175ed9f8678581">MGCP_ONHOOK</a></div><div class="ttdeci">#define MGCP_ONHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00326">chan_mgcp.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ae91ce3a94c402c66cccb1775413a18ab"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ae91ce3a94c402c66cccb1775413a18ab">MGCP_OFFHOOK</a></div><div class="ttdeci">#define MGCP_OFFHOOK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00327">chan_mgcp.c:327</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8420dba71b9cc240cf981b0bef892004a4580bfff0d1a0f0c0e73c07c1eabf6f3">MGCP_CMD_RQNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00152">chan_mgcp.c:152</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a6ec03f2e1f4b9ef754003a0019a410a2"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a6ec03f2e1f4b9ef754003a0019a410a2">mgcp_endpoint::hookstate</a></div><div class="ttdeci">int hookstate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00379">chan_mgcp.c:379</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ad0aec7af9d830c447114c12ba64ddb76"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ad0aec7af9d830c447114c12ba64ddb76">add_header_offhook</a></div><div class="ttdeci">static void add_header_offhook(struct mgcp_subchannel *sub, struct mgcp_request *resp, char *tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02648">chan_mgcp.c:2648</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2a6a6850587a7e603325f2c966bb1c94"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2a6a6850587a7e603325f2c966bb1c94">send_request</a></div><div class="ttdeci">static int send_request(struct mgcp_endpoint *p, struct mgcp_subchannel *sub, struct mgcp_request *req, unsigned int seqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">chan_mgcp.c:743</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a03b22aa1decf97fb693d7faaf40d159d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a03b22aa1decf97fb693d7faaf40d159d">add_header</a></div><div class="ttdeci">static int add_header(struct mgcp_request *req, const char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02065">chan_mgcp.c:2065</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ffeecdfdba40964baaa4f3fc81990a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ffeecdfdba40964baaa4f3fc81990a9">&#9670;&nbsp;</a></span>transmit_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msgrest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02174">2174</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00288">mgcp_response::buf</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00263">mgcp_request::data</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">mgcp_request::identifier</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00254">mgcp_request::len</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00285">mgcp_response::len</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00287">mgcp_response::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00422">mgcp_gateway::responses</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02152">respprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00558">send_response()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00286">mgcp_response::seqno</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00284">mgcp_response::whensent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02797">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;{</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da2/structmgcp__request.html">mgcp_request</a> resp;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d89/structmgcp__response.html">mgcp_response</a> *mgr;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   }</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a022a74386a7546989a66b6232c1610fe">respprep</a>(&amp;resp, p, msg, req, msgrest);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   <span class="keywordflow">if</span> (!(mgr = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*mgr) + resp.len + 1))) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac9e0058277f64c9c49ef84001dc20125">send_response</a>(sub, &amp;resp);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;   }</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   <span class="comment">/* Store MGCP response in case we have to retransmit */</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   sscanf(req-&gt;<a class="code" href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">identifier</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;mgr-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#ab793262012344621455faf9266acbac2">seqno</a>);</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   time(&amp;mgr-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#a7911e4da1a655a046ed00d6760598f34">whensent</a>);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   mgr-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#afed088663f8704004425cdae2120b9b3">len</a> = resp.len;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;   memcpy(mgr-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#a103a957b017f6b717767bba130a02694">buf</a>, resp.data, resp.len);</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;   mgr-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#a103a957b017f6b717767bba130a02694">buf</a>[resp.len] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   mgr-&gt;<a class="code" href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">next</a> = p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ae55031042ccb0a92d504e6ee55392bb7">responses</a>;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;   p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ae55031042ccb0a92d504e6ee55392bb7">responses</a> = mgr;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac9e0058277f64c9c49ef84001dc20125">send_response</a>(sub, &amp;resp);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;}</div><div class="ttc" id="structmgcp__request_html_af5351a0143adaf16c64b881aee01d893"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html#af5351a0143adaf16c64b881aee01d893">mgcp_request::identifier</a></div><div class="ttdeci">char * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00256">chan_mgcp.c:256</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac9e0058277f64c9c49ef84001dc20125"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac9e0058277f64c9c49ef84001dc20125">send_response</a></div><div class="ttdeci">static int send_response(struct mgcp_subchannel *sub, struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00558">chan_mgcp.c:558</a></div></div>
<div class="ttc" id="structmgcp__response_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#afed088663f8704004425cdae2120b9b3">mgcp_response::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00285">chan_mgcp.c:285</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ae55031042ccb0a92d504e6ee55392bb7"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ae55031042ccb0a92d504e6ee55392bb7">mgcp_gateway::responses</a></div><div class="ttdeci">struct mgcp_response * responses</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00422">chan_mgcp.c:422</a></div></div>
<div class="ttc" id="structmgcp__request_html"><div class="ttname"><a href="../../d1/da2/structmgcp__request.html">mgcp_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00253">chan_mgcp.c:253</a></div></div>
<div class="ttc" id="structmgcp__response_html_aea4cbc4278b5bc550d069de684a695f1"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#aea4cbc4278b5bc550d069de684a695f1">mgcp_response::next</a></div><div class="ttdeci">struct mgcp_response * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00287">chan_mgcp.c:287</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__response_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#a103a957b017f6b717767bba130a02694">mgcp_response::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00288">chan_mgcp.c:288</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__response_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#ab793262012344621455faf9266acbac2">mgcp_response::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00286">chan_mgcp.c:286</a></div></div>
<div class="ttc" id="structmgcp__response_html"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html">mgcp_response</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00283">chan_mgcp.c:283</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a022a74386a7546989a66b6232c1610fe"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a022a74386a7546989a66b6232c1610fe">respprep</a></div><div class="ttdeci">static int respprep(struct mgcp_request *resp, struct mgcp_endpoint *p, char *msg, struct mgcp_request *req, char *msgrest)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02152">chan_mgcp.c:2152</a></div></div>
<div class="ttc" id="structmgcp__response_html_a7911e4da1a655a046ed00d6760598f34"><div class="ttname"><a href="../../d9/d89/structmgcp__response.html#a7911e4da1a655a046ed00d6760598f34">mgcp_response::whensent</a></div><div class="ttdeci">time_t whensent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00284">chan_mgcp.c:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3040087acee789a9300e4103c1c9170d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3040087acee789a9300e4103c1c9170d">&#9670;&nbsp;</a></span>unalloc_sub()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unalloc_sub </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dfc/structmgcp__subchannel.html">mgcp_subchannel</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00506">506</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">mgcp_subchannel::alreadygone</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00458">ast_rtp_instance_destroy()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">mgcp_subchannel::callid</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">mgcp_subchannel::cxident</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">mgcp_subchannel::cxmode</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">dump_cmd_queues()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">mgcp_subchannel::id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">MGCP_CX_INACTIVE</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">mgcp_set_owner()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">mgcp_endpoint::name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">mgcp_gateway::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">mgcp_subchannel::outgoing</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">mgcp_subchannel::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">mgcp_endpoint::parent</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">mgcp_subchannel::rtp</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">mgcp_endpoint::sub</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">mgcp_subchannel::tmpdest</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03281">attempt_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;{</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *p = sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">parent</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">sub</a> == sub) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Trying to unalloc the real channel %s@%s?!?\n&quot;</span>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Released sub %d of channel %s@%s\n&quot;</span>, sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">name</a>, p-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">parent</a>-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a>(sub, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>)) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a>(sub);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">cxident</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">callid</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">cxmode</a> = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">outgoing</a> = 0;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">alreadygone</a> = 0;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   memset(&amp;sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>, 0, <span class="keyword">sizeof</span>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">tmpdest</a>));</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a>(sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      sub-&gt;<a class="code" href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sub);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div><div class="ttc" id="structmgcp__subchannel_html_a222fb29fd2a6fe84ba8a0a8a0d7a1278"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a222fb29fd2a6fe84ba8a0a8a0d7a1278">mgcp_subchannel::callid</a></div><div class="ttdeci">char callid[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00313">chan_mgcp.c:313</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_acb24bec71c1fa7a03e77fe9fbef17745"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#acb24bec71c1fa7a03e77fe9fbef17745">mgcp_endpoint::sub</a></div><div class="ttdeci">struct mgcp_subchannel * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00335">chan_mgcp.c:335</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6e2e689ac1f43d50401a1a89adb8024c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6e2e689ac1f43d50401a1a89adb8024c">mgcp_set_owner</a></div><div class="ttdeci">static void mgcp_set_owner(struct mgcp_subchannel *sub, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01222">chan_mgcp.c:1222</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a9fa52623037d0a63fc64fdc5617ca4d6"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a9fa52623037d0a63fc64fdc5617ca4d6">mgcp_subchannel::tmpdest</a></div><div class="ttdeci">struct sockaddr_in tmpdest</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00309">chan_mgcp.c:309</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a3777dbae63a15da001b2baa317a25149">mgcp_endpoint::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00334">chan_mgcp.c:334</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a7441ef0865bcb3db9b8064dd7375c1ea">mgcp_subchannel::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00305">chan_mgcp.c:305</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a586fc7c710ade15aabab8f223e53fdd9"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a586fc7c710ade15aabab8f223e53fdd9">mgcp_subchannel::outgoing</a></div><div class="ttdeci">int outgoing</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00319">chan_mgcp.c:319</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a3777dbae63a15da001b2baa317a25149">mgcp_gateway::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00401">chan_mgcp.c:401</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ac141c0eb38c44bc9d1d69633a8deed8a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ac141c0eb38c44bc9d1d69633a8deed8a">transmit_connection_del</a></div><div class="ttdeci">static int transmit_connection_del(struct mgcp_subchannel *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">chan_mgcp.c:2690</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ac43993a73742eff145b861107a1afa0d"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ac43993a73742eff145b861107a1afa0d">mgcp_subchannel::alreadygone</a></div><div class="ttdeci">int alreadygone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00320">chan_mgcp.c:320</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_a92044a79380f6949738a80e44e97d269"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#a92044a79380f6949738a80e44e97d269">mgcp_endpoint::parent</a></div><div class="ttdeci">struct mgcp_gateway * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00396">chan_mgcp.c:396</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_ae91f641aeb94772dd01d16f7db39f7e8"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#ae91f641aeb94772dd01d16f7db39f7e8">mgcp_subchannel::cxident</a></div><div class="ttdeci">char cxident[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00312">chan_mgcp.c:312</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a3f01254d84fdd62f43b4b656cb032ec2"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a3f01254d84fdd62f43b4b656cb032ec2">dump_cmd_queues</a></div><div class="ttdeci">static void dump_cmd_queues(struct mgcp_endpoint *p, struct mgcp_subchannel *sub)</div><div class="ttdoc">dump_cmd_queues: (SC:) cleanup pending commands </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l02734">chan_mgcp.c:2734</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0bfe6336fe7deb78148a84aef2732c7a"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0bfe6336fe7deb78148a84aef2732c7a">ast_rtp_instance_destroy</a></div><div class="ttdeci">int ast_rtp_instance_destroy(struct ast_rtp_instance *instance)</div><div class="ttdoc">Destroy an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00458">rtp_engine.c:458</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a8adb8595b8127cbea2118fada1ef8782">mgcp_subchannel::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00308">chan_mgcp.c:308</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a29d9ee9dbdaf130bf25e35f34f0241e5"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a29d9ee9dbdaf130bf25e35f34f0241e5">mgcp_subchannel::parent</a></div><div class="ttdeci">struct mgcp_endpoint * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00307">chan_mgcp.c:307</a></div></div>
<div class="ttc" id="structmgcp__subchannel_html_a4650e5e1429f8982af64b9c42c8c53d3"><div class="ttname"><a href="../../d5/dfc/structmgcp__subchannel.html#a4650e5e1429f8982af64b9c42c8c53d3">mgcp_subchannel::cxmode</a></div><div class="ttdeci">int cxmode</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00314">chan_mgcp.c:314</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a867a1a8b1db505bd0edac7dc85e2627b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a867a1a8b1db505bd0edac7dc85e2627b">MGCP_CX_INACTIVE</a></div><div class="ttdeci">#define MGCP_CX_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00136">chan_mgcp.c:136</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">4947</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00539">ast_channel_register()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00570">ast_channel_unregister()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00327">AST_MODPRI_CHANNEL_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00122">AST_MODULE_SUPPORT_EXTENDED</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00189">ast_mutex_trylock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00067">AST_PTHREADT_STOP</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00408">ast_rtp_glue_unregister()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">mgcp_endpoint::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">mgcp_gateway::delme</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">mgcp_gateway::endpoints</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">gatelock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04856">load_module()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">mgcp_reload()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">mgcp_reload_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">mgcp_reloading</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">mgcpsock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">monitor_thread</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">monlock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">mgcp_endpoint::next</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">mgcp_gateway::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">prune_gateways()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04941">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;{</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a> *e;</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> *g;</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;   <span class="comment">/* Check to see if we&#39;re reloading */</span></div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a>)) {</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MGCP is currently reloading.  Unable to remove module.\n&quot;</span>);</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a> = 1;</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a>);</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;   }</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;   <span class="comment">/* First, take us out of the channel loop */</span></div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>);</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;   <span class="comment">/* Shut down the monitoring thread */</span></div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>)) {</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> &amp;&amp; (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a>)) {</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;         pthread_cancel(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a>);</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;         pthread_kill(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a>, SIGURG);</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;         pthread_join(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;      }</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a>;</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a>);</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to lock the monitor\n&quot;</span>);</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;      <span class="comment">/* We always want to leave this in a consistent state */</span></div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>);</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a> = 0;</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a77cdf1904a692082f9ddf294576da000">mgcp_reload</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;   }</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>)) {</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;      <span class="keywordflow">for</span> (g = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a>; g; g = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">next</a>) {</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;         g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 1;</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;         <span class="keywordflow">for</span> (e = g-&gt;<a class="code" href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">endpoints</a>; e; e = e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">next</a>) {</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;            e-&gt;<a class="code" href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">delme</a> = 1;</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;         }</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;      }</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#aa97203c0950af78c3a4eecfae70ed9e6">prune_gateways</a>();</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a>);</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to lock the gateways list.\n&quot;</span>);</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      <span class="comment">/* We always want to leave this in a consistent state */</span></div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>);</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;      <span class="comment">/* Allow the monitor to restart */</span></div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a> = 0;</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;      <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a77cdf1904a692082f9ddf294576da000">mgcp_reload</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;   }</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a> &gt; -1) {</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;      close(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a>);</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;   }</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a>(&amp;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a8f7b42819bf8c9194e8a30107b3df42d">mgcp_rtp_glue</a>);</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>));</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a>, -1);</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, -1);</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;   <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;}</div><div class="ttc" id="structmgcp__gateway_html"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00399">chan_mgcp.c:399</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ab46ad0a5ec68458d6b2054606757e202"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ab46ad0a5ec68458d6b2054606757e202">mgcpsock</a></div><div class="ttdeci">static int mgcpsock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">chan_mgcp.c:432</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_af82a4123dab30be1c6d2faf55192fdd5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#af82a4123dab30be1c6d2faf55192fdd5">gatelock</a></div><div class="ttdeci">static ast_mutex_t gatelock</div><div class="ttdoc">gatelock: mutex for gateway/endpoint lists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">chan_mgcp.c:430</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a77cdf1904a692082f9ddf294576da000"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a77cdf1904a692082f9ddf294576da000">mgcp_reload</a></div><div class="ttdeci">static char * mgcp_reload(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">chan_mgcp.c:4908</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afc7c36bd66937d520024416d67defab0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afc7c36bd66937d520024416d67defab0">global_capability</a></div><div class="ttdeci">static struct ast_format_cap * global_capability</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">chan_mgcp.c:235</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa97203c0950af78c3a4eecfae70ed9e6"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa97203c0950af78c3a4eecfae70ed9e6">prune_gateways</a></div><div class="ttdeci">static void prune_gateways(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">chan_mgcp.c:4608</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a987fc536e8b6a1044689eca873610792"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a></div><div class="ttdeci">#define ast_mutex_trylock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00189">lock.h:189</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_a0d2080cb7cf56bd4f37e318cdabf9084"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#a0d2080cb7cf56bd4f37e318cdabf9084">mgcp_gateway::next</a></div><div class="ttdeci">struct mgcp_gateway * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00423">chan_mgcp.c:423</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a4cdf7ea5a854eb95bea098cee0286af0"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a4cdf7ea5a854eb95bea098cee0286af0">mgcp_tech</a></div><div class="ttdeci">static struct ast_channel_tech mgcp_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00472">chan_mgcp.c:472</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_afbd6fc6e0ab3c1a04a518f19c21d4503"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#afbd6fc6e0ab3c1a04a518f19c21d4503">monitor_thread</a></div><div class="ttdeci">static pthread_t monitor_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">chan_mgcp.c:231</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aae4816e76bb1382481a5941ac7057bef"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aae4816e76bb1382481a5941ac7057bef">monlock</a></div><div class="ttdeci">static ast_mutex_t monlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">chan_mgcp.c:226</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2671cbe3684e201b2b8e7d777164008b"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2671cbe3684e201b2b8e7d777164008b">mgcp_reloading</a></div><div class="ttdeci">static int mgcp_reloading</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">chan_mgcp.c:427</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a80b5a6c19089cc4148215c9f3203f589"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a80b5a6c19089cc4148215c9f3203f589">gateways</a></div><div class="ttdeci">static struct mgcp_gateway * gateways</div></div>
<div class="ttc" id="chan__mgcp_8c_html_a27906b68ca8f19bcfd5b7aadb38088f1"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a27906b68ca8f19bcfd5b7aadb38088f1">cli_mgcp</a></div><div class="ttdeci">static struct ast_cli_entry cli_mgcp[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01149">chan_mgcp.c:1149</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_aa4a641fafb6e5bea7d8db5ed5641f47f"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#aa4a641fafb6e5bea7d8db5ed5641f47f">mgcp_reload_lock</a></div><div class="ttdeci">static ast_mutex_t mgcp_reload_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">chan_mgcp.c:426</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a8f7b42819bf8c9194e8a30107b3df42d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a8f7b42819bf8c9194e8a30107b3df42d">mgcp_rtp_glue</a></div><div class="ttdeci">static struct ast_rtp_glue mgcp_rtp_glue</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l04511">chan_mgcp.c:4511</a></div></div>
<div class="ttc" id="lock_8h_html_a873a83eb8196323194aac2bea23d794e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873a83eb8196323194aac2bea23d794e">AST_PTHREADT_STOP</a></div><div class="ttdeci">#define AST_PTHREADT_STOP</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00067">lock.h:67</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afe951ef8ac0fe6aae0db42ce12bb3791"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a></div><div class="ttdeci">int ast_rtp_glue_unregister(struct ast_rtp_glue *glue)</div><div class="ttdoc">Unregister RTP glue. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00408">rtp_engine.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_endpoint::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00386">chan_mgcp.c:386</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_ac3c4fea2fe858e364b67aa8f3f58baec"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#ac3c4fea2fe858e364b67aa8f3f58baec">mgcp_gateway::endpoints</a></div><div class="ttdeci">struct mgcp_endpoint * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00408">chan_mgcp.c:408</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html_aa928fc79f7e1547a04f464984cc7d3e8"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html#aa928fc79f7e1547a04f464984cc7d3e8">mgcp_endpoint::next</a></div><div class="ttdeci">struct mgcp_endpoint * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00395">chan_mgcp.c:395</a></div></div>
<div class="ttc" id="structmgcp__endpoint_html"><div class="ttname"><a href="../../da/dea/structmgcp__endpoint.html">mgcp_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00332">chan_mgcp.c:332</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="structmgcp__gateway_html_aa53dad096a6e07c1fc9800d31a3742bf"><div class="ttname"><a href="../../d8/d1b/structmgcp__gateway.html#aa53dad096a6e07c1fc9800d31a3742bf">mgcp_gateway::delme</a></div><div class="ttdeci">int delme</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00420">chan_mgcp.c:420</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Media Gateway Control Protocol (MGCP)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .reload = reload, .load_pri = AST_MODPRI_CHANNEL_DRIVER, .optional_modules = &quot;res_pktccops&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l05025">5025</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a1d084b82cb21102ba46ea60d3cd9c085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d084b82cb21102ba46ea60d3cd9c085">&#9670;&nbsp;</a></span>__ourip</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr __ourip</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00239">239</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="adfee50d07a98645d4d20b896ce03785a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfee50d07a98645d4d20b896ce03785a">&#9670;&nbsp;</a></span>accountcode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char accountcode[<a class="el" href="../../d5/d7b/channel_8h.html#aa5a0589e78ac9e010524872ca0a3cf49">AST_MAX_ACCOUNT_CODE</a>] = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00202">202</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a61fbadf21e15a109d0703a01e0302535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61fbadf21e15a109d0703a01e0302535">&#9670;&nbsp;</a></span>adsi</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int adsi = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00208">208</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="ad2cfb0f821c065261382a9298bb5a16b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2cfb0f821c065261382a9298bb5a16b">&#9670;&nbsp;</a></span>amaflags</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int amaflags = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00206">206</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l05025">5025</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a4ec29229510a2e3ea6ce34d520f06e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec29229510a2e3ea6ce34d520f06e90">&#9670;&nbsp;</a></span>bindaddr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct sockaddr_in bindaddr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00434">434</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>.</p>

</div>
</div>
<a id="ae9a1904e14c83a51df312f22eb7edd24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9a1904e14c83a51df312f22eb7edd24">&#9670;&nbsp;</a></span>callreturn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int callreturn = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00187">187</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a50ea1ecd6da04bb18650fe24943d23d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ea1ecd6da04bb18650fe24943d23d1">&#9670;&nbsp;</a></span>callwaiting</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int callwaiting = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00185">185</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="aef81e9f93aaf81a1523a89dd1c54e41f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef81e9f93aaf81a1523a89dd1c54e41f">&#9670;&nbsp;</a></span>cancallforward</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cancallforward = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00196">196</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="ade5a89f9bee15a492c760ec1765a292d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5a89f9bee15a492c760ec1765a292d">&#9670;&nbsp;</a></span>cid_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char cid_name[<a class="el" href="../../d4/dc5/extconf_8c.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">165</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l02685">__analog_handle_event()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00739">__ast_channel_alloc_ap()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02029">add_rlmi_resource()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13119">build_user()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00592">caller_id_handler()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07787">check_access()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19237">check_peer_ok()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19486">check_user_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06136">create_addr_from_peer()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l07386">dahdi_handle_event()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02107">generate_content_id_hdr()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18190">get_pai()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18266">get_rpid()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">set_id_from_hdr()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31482">set_peer_defaults()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06445">sip_call()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l10083">socket_process_helper()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>.</p>

</div>
</div>
<a id="a29e973bd94bfbaf59d939bd1bc988c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e973bd94bfbaf59d939bd1bc988c32">&#9670;&nbsp;</a></span>cid_num</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char cid_num[<a class="el" href="../../d4/dc5/extconf_8c.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">164</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l02685">__analog_handle_event()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00739">__ast_channel_alloc_ap()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l01063">ari_channels_handle_originate_with_id()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13119">build_user()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00592">caller_id_handler()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07787">check_access()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19237">check_peer_ok()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19486">check_user_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06136">create_addr_from_peer()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l07386">dahdi_handle_event()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18190">get_pai()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18266">get_rpid()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">set_id_from_hdr()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31482">set_peer_defaults()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l10083">socket_process_helper()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15193">state_notify_build_xml()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>.</p>

</div>
</div>
<a id="a27906b68ca8f19bcfd5b7aadb38088f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27906b68ca8f19bcfd5b7aadb38088f1">&#9670;&nbsp;</a></span>cli_mgcp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_mgcp[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01149">1149</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a9ee8d742a1fbcff45f97842b92952610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee8d742a1fbcff45f97842b92952610">&#9670;&nbsp;</a></span>config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char config[] = &quot;mgcp.conf&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00117">117</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="a579ca8125bbf48d9ce8691d522f99933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a579ca8125bbf48d9ce8691d522f99933">&#9670;&nbsp;</a></span>context</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char context[<a class="el" href="../../d4/dc5/extconf_8c.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = &quot;default&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00159">159</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="ae91dad65f553f7afebe4af507803bc7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae91dad65f553f7afebe4af507803bc7f">&#9670;&nbsp;</a></span>cos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int cos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00179">179</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a3e2114722f6cb731593296a831290a7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2114722f6cb731593296a831290a7d">&#9670;&nbsp;</a></span>cos_audio</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int cos_audio</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00180">180</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a2dd6d5e9dbc1847bd75eff9dd5575d81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd6d5e9dbc1847bd75eff9dd5575d81">&#9670;&nbsp;</a></span>cur_callergroup</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> cur_callergroup = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00173">173</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a880aaf7c34c94d45e515f7b6dc3f70ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a880aaf7c34c94d45e515f7b6dc3f70ed">&#9670;&nbsp;</a></span>cur_pickupgroup</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> cur_pickupgroup = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00174">174</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a2d8d5920e90ccbad7832926becdadb29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d8d5920e90ccbad7832926becdadb29">&#9670;&nbsp;</a></span>default_jbconf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/dba/structast__jb__conf.html">ast_jb_conf</a> default_jbconf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Global jitterbuffer configuration - by default, jb is disabled </p><dl class="section note"><dt>Note</dt><dd>Values shown here match the defaults shown in mgcp.conf.sample </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00106">106</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a5dc9b8afbbd709a0af68f33b1db740d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dc9b8afbbd709a0af68f33b1db740d9">&#9670;&nbsp;</a></span>directmedia</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int directmedia = <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#aa4035ee22ac338e5157dd3cd946c3bfb">DIRECTMEDIA</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00200">200</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a0e5a76746e3addb17a93a158017c2273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5a76746e3addb17a93a158017c2273">&#9670;&nbsp;</a></span>dtmfmode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dtmfmode = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00167">167</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="afd3be8e865f060b68db4d7c966489e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3be8e865f060b68db4d7c966489e0a">&#9670;&nbsp;</a></span>firstdigittimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int firstdigittimeout = 16000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wait up to 16 seconds for first digit (FXO logic) </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00214">214</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d7e/app__disa_8c_source.html#l00146">disa_exec()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="af82a4123dab30be1c6d2faf55192fdd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af82a4123dab30be1c6d2faf55192fdd5">&#9670;&nbsp;</a></span>gatelock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> gatelock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>gatelock: mutex for gateway/endpoint lists </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00430">430</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01060">handle_mgcp_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01018">handle_mgcp_show_endpoints()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01360">mgcp_devicestate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">prune_gateways()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="a80b5a6c19089cc4148215c9f3203f589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80b5a6c19089cc4148215c9f3203f589">&#9670;&nbsp;</a></span>gateways</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d1b/structmgcp__gateway.html">mgcp_gateway</a> * gateways = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01686">find_realtime_gw()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01060">handle_mgcp_audit_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01018">handle_mgcp_show_endpoints()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01360">mgcp_devicestate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04608">prune_gateways()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="aa319ef1606201db158ce7195fb8eed45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa319ef1606201db158ce7195fb8eed45">&#9670;&nbsp;</a></span>gendigittimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int gendigittimeout = 8000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>How long to wait for following digits (FXO logic) </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00217">217</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="afc7c36bd66937d520024416d67defab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc7c36bd66937d520024416d67defab0">&#9670;&nbsp;</a></span>global_capability</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a>* global_capability</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00235">235</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="abaabcb7f4349cc632dde3af5c6a5e1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaabcb7f4349cc632dde3af5c6a5e1bd">&#9670;&nbsp;</a></span>global_jbconf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/dba/structast__jb__conf.html">ast_jb_conf</a> global_jbconf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00114">114</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="adc859a22440f2b11c5f95d83d4f93362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc859a22440f2b11c5f95d83d4f93362">&#9670;&nbsp;</a></span>hangupongateremove</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int hangupongateremove = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00171">171</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="ad380fd38219b013f5a77dfd26147ddfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad380fd38219b013f5a77dfd26147ddfa">&#9670;&nbsp;</a></span>immediate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int immediate = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00183">183</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="abda48311b6abe5a4dd8b6904ddde0a6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abda48311b6abe5a4dd8b6904ddde0a6d">&#9670;&nbsp;</a></span>io</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d55/structio__context.html">io_context</a>* io</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00245">245</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="adf416dc058363e2fd5750c77e2d78bee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf416dc058363e2fd5750c77e2d78bee">&#9670;&nbsp;</a></span>language</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char language[<a class="el" href="../../d5/d7b/channel_8h.html#a9238c3318ae8d3bea2cbbe1d1e459eb7">MAX_LANGUAGE</a>] = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00161">161</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a6b49cafa2a3d359a2e865992f551874a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b49cafa2a3d359a2e865992f551874a">&#9670;&nbsp;</a></span>mailbox</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char mailbox[<a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gad739ea26c060ff7a2195107b53f9715c">AST_MAX_MAILBOX_UNIQUEID</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a155">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">204</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l12679">acf_vm_info()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">action_mailboxcount()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">action_mailboxstatus()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31589">add_peer_mailboxes()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28499">add_peer_mwi_subs()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l00805">append_mailbox_mapping()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13227">append_vmu_info_astman()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00310">ast_mwi_mailbox_delete()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l00309">ast_smdi_mwi_set()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l00314">ast_smdi_mwi_unset()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00524">asterisk_publication_mailboxstate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31631">build_peer()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l01203">chanspy_exec()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05293">clear_peer_mailboxes()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d4/d7e/app__disa_8c_source.html#l00146">disa_exec()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l01322">extenspy_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05770">free_zone()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29726">get_cached_mwi()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25732">handle_request_notify()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l01133">inprocess_count()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13074">mb_poll_thread()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06048">messagecount()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02099">minivm_mwi_exec()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00407">mwi_has_voicemail()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00467">mwi_inboxcount()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00888">mwi_initial_events()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00274">mwi_mailbox_delete_all()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00290">mwi_mailbox_update()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00365">mwi_messagecount()</a>, <a class="el" href="../../d2/d94/res__mwi__external_8c_source.html#l00110">mwi_observe_delete()</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00038">mwi_to_event()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21157">peer_mailboxes_to_str()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00394">publish_mwi_to_stasis()</a>, <a class="el" href="../../dd/de5/test__mwi_8c_source.html#l00213">publishers_create()</a>, <a class="el" href="../../dd/de5/test__mwi_8c_source.html#l00188">publishers_destroy()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03614">pubsub_on_rx_mwi_notify_request()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02084">queue_mwi_event()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00461">realtime_directory()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09720">sip_subscribe_mwi()</a>, <a class="el" href="../../d5/daa/res__stasis__mailbox_8c_source.html#l00122">stasis_app_mailbox_delete()</a>, <a class="el" href="../../d5/daa/res__stasis__mailbox_8c_source.html#l00046">stasis_app_mailbox_to_json()</a>, <a class="el" href="../../d5/daa/res__stasis__mailbox_8c_source.html#l00101">stasis_app_mailbox_update()</a>, <a class="el" href="../../d5/daa/res__stasis__mailbox_8c_source.html#l00068">stasis_app_mailboxes_to_json()</a>, <a class="el" href="../../dd/de5/test__mwi_8c_source.html#l00143">subscriptions_create()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14384">vm_sayname()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14446">vmsayname_exec()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01461">xmpp_pubsub_handle_event()</a>.</p>

</div>
</div>
<a id="a24514343553b05c66e5b7d16e2df45cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24514343553b05c66e5b7d16e2df45cc">&#9670;&nbsp;</a></span>matchdigittimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int matchdigittimeout = 3000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>How long to wait for an extra digit, if there is an ambiguous match </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00220">220</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="aced6554217c497a494152c997866c6de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced6554217c497a494152c997866c6de">&#9670;&nbsp;</a></span>mgcp_cxmodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* const mgcp_cxmodes[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>} </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00139">139</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02462">transmit_connect()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02363">transmit_connect_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02690">transmit_connection_del()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02572">transmit_modify_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02301">transmit_modify_with_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02499">transmit_notify_request()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02527">transmit_notify_request_with_callerid()</a>.</p>

</div>
</div>
<a id="aa4a641fafb6e5bea7d8db5ed5641f47f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4a641fafb6e5bea7d8db5ed5641f47f">&#9670;&nbsp;</a></span>mgcp_reload_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> mgcp_reload_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00426">426</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">mgcp_reload()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="a2671cbe3684e201b2b8e7d777164008b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2671cbe3684e201b2b8e7d777164008b">&#9670;&nbsp;</a></span>mgcp_reloading</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mgcp_reloading = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00427">427</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04908">mgcp_reload()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="a8f7b42819bf8c9194e8a30107b3df42d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f7b42819bf8c9194e8a30107b3df42d">&#9670;&nbsp;</a></span>mgcp_rtp_glue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> mgcp_rtp_glue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04511">4511</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a4cdf7ea5a854eb95bea098cee0286af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cdf7ea5a854eb95bea098cee0286af0">&#9670;&nbsp;</a></span>mgcp_tech</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> mgcp_tech</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00472">472</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a8f842af31e501d288c3ced6611e5baab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f842af31e501d288c3ced6611e5baab">&#9670;&nbsp;</a></span>mgcpdebug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mgcpdebug = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00242">242</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01060">handle_mgcp_audit_endpoint()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01121">handle_mgcp_set_debug()</a>.</p>

</div>
</div>
<a id="ab46ad0a5ec68458d6b2054606757e202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab46ad0a5ec68458d6b2054606757e202">&#9670;&nbsp;</a></span>mgcpsock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mgcpsock = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00432">432</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00534">__mgcp_xmit()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="a9650dde3ce810fc64493b0b2b0e81209"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9650dde3ce810fc64493b0b2b0e81209">&#9670;&nbsp;</a></span>mgcpsock_read_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* mgcpsock_read_id = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03758">3758</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="afbd6fc6e0ab3c1a04a518f19c21d4503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbd6fc6e0ab3c1a04a518f19c21d4503">&#9670;&nbsp;</a></span>monitor_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t monitor_thread = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is the thread for the monitor which checks for input on the channels which are not currently in use. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00231">231</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">restart_monitor()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="aae4816e76bb1382481a5941ac7057bef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4816e76bb1382481a5941ac7057bef">&#9670;&nbsp;</a></span>monlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> monlock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00226">226</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03936">restart_monitor()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04947">unload_module()</a>.</p>

</div>
</div>
<a id="abc34958c9b03014779727e5ca61b93e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc34958c9b03014779727e5ca61b93e5">&#9670;&nbsp;</a></span>musicclass</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char musicclass[<a class="el" href="../../d5/d7b/channel_8h.html#afb2ae2e53d6676f3ca44a98aa3f92a2c">MAX_MUSICCLASS</a>] = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00162">162</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l01247">channel_hold_cb()</a>, <a class="el" href="../../d9/d3d/func__channel_8c_source.html#l00470">func_channel_write_real()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01535">hold_to_json()</a>, and <a class="el" href="../../de/da4/chan__motif_8c_source.html#l02727">load_module()</a>.</p>

</div>
</div>
<a id="ada540a5f25f7302dc1a3d17ccfa59b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada540a5f25f7302dc1a3d17ccfa59b10">&#9670;&nbsp;</a></span>nat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nat = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00168">168</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01973">ast_res_pjsip_initialize_configuration()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l00745">ast_udptl_setnat()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a1c6dbd425fcb4ee2ef192af2e2d0c284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6dbd425fcb4ee2ef192af2e2d0c284">&#9670;&nbsp;</a></span>ncs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ncs = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00169">169</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="afd10144dcba02df71f1170c333685d87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd10144dcba02df71f1170c333685d87">&#9670;&nbsp;</a></span>netlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> netlock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Protect the monitoring thread, so only one process can kill or start it, and not when it's doing something critical. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00224">224</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03818">do_monitor()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="a08e270ee42ff478a275294762aa0e195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e270ee42ff478a275294762aa0e195">&#9670;&nbsp;</a></span>nonCodecCapability</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nonCodecCapability = <a class="el" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00236">236</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>.</p>

</div>
</div>
<a id="afe1e469899e7d30ca0210a1b3d195c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe1e469899e7d30ca0210a1b3d195c8e">&#9670;&nbsp;</a></span>oseq_global</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int oseq_global = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00210">210</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>.</p>

</div>
</div>
<a id="a3902d7fb25307330eee84331320776cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3902d7fb25307330eee84331320776cb">&#9670;&nbsp;</a></span>oseq_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> oseq_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00211">211</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02159">reqprep()</a>.</p>

</div>
</div>
<a id="a8d857a26518d3787a893c9ab433ddb4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d857a26518d3787a893c9ab433ddb4d">&#9670;&nbsp;</a></span>ourhost</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char ourhost[<a class="el" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00238">238</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db8/acl_8c_source.html#l01052">ast_find_ourip()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>

</div>
</div>
<a id="a7821b54b29c7b74aba79884f13b3ec03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7821b54b29c7b74aba79884f13b3ec03">&#9670;&nbsp;</a></span>ourport</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ourport</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00240">240</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14410">initreqprep()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15584">transmit_notify_with_mwi()</a>.</p>

</div>
</div>
<a id="a6b31bfcc769a5b5c31e13aa6d8a9a286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b31bfcc769a5b5c31e13aa6d8a9a286">&#9670;&nbsp;</a></span>parkinglot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char parkinglot[<a class="el" href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00163">163</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l03108">__find_callno()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08942">__sip_alloc()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31631">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13119">build_user()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l07787">check_access()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19237">check_peer_ok()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06136">create_addr_from_peer()</a>, <a class="el" href="../../d9/d3d/func__channel_8c_source.html#l00470">func_channel_write_real()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l02727">load_module()</a>, and <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00519">manager_park()</a>.</p>

</div>
</div>
<a id="a47a9f50ad99a5568e185a540270296d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a9f50ad99a5568e185a540270296d9">&#9670;&nbsp;</a></span>pktcgatealloc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int pktcgatealloc = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00170">170</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a8a585e8d22d599bb4f067e383f5c1f72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a585e8d22d599bb4f067e383f5c1f72">&#9670;&nbsp;</a></span>qos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   qos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>.</p>

</div>
</div>
<a id="a361b448e9abcfc301602a2573a662d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361b448e9abcfc301602a2573a662d3c">&#9670;&nbsp;</a></span>sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a>* <a class="el" href="../../d0/da0/structsched.html">sched</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00244">244</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a36fbfdd2c2eb8b68a37674faeeab0b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36fbfdd2c2eb8b68a37674faeeab0b9b">&#9670;&nbsp;</a></span>singlepath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int singlepath = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00198">198</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a00bf83036d0252d0189adbf610a003f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00bf83036d0252d0189adbf610a003f8">&#9670;&nbsp;</a></span>slowsequence</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int slowsequence = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00189">189</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a71535bf985a1a06d548fd73a0a0ec32c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71535bf985a1a06d548fd73a0a0ec32c">&#9670;&nbsp;</a></span>tdesc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char tdesc[] = &quot;Media Gateway Control Protocol (MGCP)&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00116">116</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a246239c2435a2638427e404e8c0ba9c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a246239c2435a2638427e404e8c0ba9c7">&#9670;&nbsp;</a></span>threewaycalling</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int threewaycalling = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00191">191</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>.</p>

</div>
</div>
<a id="a25a9305efab3b493ca2519562fcec3d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25a9305efab3b493ca2519562fcec3d5">&#9670;&nbsp;</a></span>tos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int tos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00177">177</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a1ecad4a80d0e6f5b8ec6ab4c44021d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ecad4a80d0e6f5b8ec6ab4c44021d18">&#9670;&nbsp;</a></span>tos_audio</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int tos_audio</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00178">178</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

</div>
</div>
<a id="a9caa677def8fa97666646d9e2e607b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9caa677def8fa97666646d9e2e607b7c">&#9670;&nbsp;</a></span>transfer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int transfer = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is for flashhook transfers </p>

<p class="definition">Definition at line <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00194">194</a> of file <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html">chan_mgcp.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06595">ast_transfer_protocol()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l06543">iax2_send()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01232">jb_debug_output()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06601">leave_voicemail()</a>, and <a class="el" href="../../d6/d7b/app__transfer_8c_source.html#l00087">transfer_exec()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:08 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
