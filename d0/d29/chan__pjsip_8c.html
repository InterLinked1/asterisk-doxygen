<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: chan_pjsip.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9662a6a166de1dda18179da17db0f05a.html">channels</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">chan_pjsip.c File Reference<div class="ingroups"><a class="el" href="../../d6/df4/group__channel__drivers.html">Module: Asterisk Channel Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>PSJIP SIP Channel Driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pjsip.h&gt;</code><br />
<code>#include &lt;pjsip_ua.h&gt;</code><br />
<code>#include &lt;pjlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/rtp__engine_8h_source.html">asterisk/rtp_engine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d59/acl_8h_source.html">asterisk/acl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/musiconhold_8h_source.html">asterisk/musiconhold.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d08/dsp_8h_source.html">asterisk/dsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d44/stasis__endpoints_8h_source.html">asterisk/stasis_endpoints.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0f/indications_8h_source.html">asterisk/indications.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d39/translate_8h_source.html">asterisk/translate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d7d/threadstorage_8h_source.html">asterisk/threadstorage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html">asterisk/features_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/dbc/pickup_8h_source.html">asterisk/pickup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0d/message_8h_source.html">asterisk/message.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d8c/res__pjsip_8h_source.html">asterisk/res_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html">asterisk/res_pjsip_session.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d95/stream_8h_source.html">asterisk/stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d81/chan__pjsip_8h_source.html">pjsip/include/chan_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d02/pjsip_2include_2dialplan__functions_8h_source.html">pjsip/include/dialplan_functions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/df5/cli__functions_8h_source.html">pjsip/include/cli_functions.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for chan_pjsip.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d19/chan__pjsip_8c__incl.png" border="0" usemap="#chan__pjsip_8c" alt=""/></div>
<map name="chan__pjsip_8c" id="chan__pjsip_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="325,319,409,345"/>
<area shape="rect" id="node11" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="946,393,1060,420"/>
<area shape="rect" id="node19" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="484,244,623,271"/>
<area shape="rect" id="node23" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1679,87,1815,114"/>
<area shape="rect" id="node24" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="29,169,140,196"/>
<area shape="rect" id="node25" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="1189,169,1345,196"/>
<area shape="rect" id="node26" href="../../d5/d59/acl_8h.html" title="Access Control of various sorts. " alt="" coords="1839,87,1946,114"/>
<area shape="rect" id="node27" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="1970,87,2103,114"/>
<area shape="rect" id="node28" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="1674,169,1780,196"/>
<area shape="rect" id="node29" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="2138,169,2239,196"/>
<area shape="rect" id="node30" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="1492,87,1604,114"/>
<area shape="rect" id="node31" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1471,169,1650,196"/>
<area shape="rect" id="node32" href="../../dc/d07/musiconhold_8h.html" title="Music on hold handling. " alt="" coords="2316,87,2485,114"/>
<area shape="rect" id="node33" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="2510,87,2643,114"/>
<area shape="rect" id="node34" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="2668,87,2845,114"/>
<area shape="rect" id="node35" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2869,87,2980,114"/>
<area shape="rect" id="node36" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="811,169,1006,196"/>
<area shape="rect" id="node37" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="459,169,648,196"/>
<area shape="rect" id="node38" href="../../d2/d0f/indications_8h.html" title="Tone Indication Support. " alt="" coords="1202,244,1358,271"/>
<area shape="rect" id="node39" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="2984,169,3160,196"/>
<area shape="rect" id="node40" href="../../db/d39/translate_8h.html" title="Support for translation of data formats. translate.c. " alt="" coords="3056,87,3201,114"/>
<area shape="rect" id="node41" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="3226,87,3412,114"/>
<area shape="rect" id="node42" href="../../dd/dbc/pickup_8h.html" title="Call Pickup API. " alt="" coords="3437,87,3566,114"/>
<area shape="rect" id="node43" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="2178,87,2292,114"/>
<area shape="rect" id="node44" href="../../d2/d0d/message_8h.html" title="Out&#45;of&#45;call text message support. " alt="" coords="3591,87,3738,114"/>
<area shape="rect" id="node45" href="../../d8/d8c/res__pjsip_8h.html" title="asterisk/res_pjsip.h" alt="" coords="790,87,934,114"/>
<area shape="rect" id="node46" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="1030,169,1165,196"/>
<area shape="rect" id="node47" href="../../d9/de7/res__pjsip__session_8h.html" title="asterisk/res_pjsip\l_session.h" alt="" coords="222,80,354,121"/>
<area shape="rect" id="node48" href="../../d1/d81/chan__pjsip_8h.html" title="PJSIP Channel Driver shared data structures. " alt="" coords="3762,80,3897,121"/>
<area shape="rect" id="node49" href="../../dd/d02/pjsip_2include_2dialplan__functions_8h.html" title="PJSIP dialplan functions header file. " alt="" coords="3921,80,4074,121"/>
<area shape="rect" id="node50" href="../../d0/df5/cli__functions_8h.html" title="PJSIP CLI functions header file. " alt="" coords="4099,87,4294,114"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="563,543,718,569"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="524,393,661,420"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="365,393,500,420"/>
<area shape="rect" id="node5" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="521,468,664,495"/>
<area shape="rect" id="node13" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="922,468,985,495"/>
<area shape="rect" id="node14" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1411,543,1558,569"/>
<area shape="rect" id="node17" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1120,468,1270,495"/>
<area shape="rect" id="node18" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1294,468,1421,495"/>
<area shape="rect" id="node20" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="636,319,780,345"/>
<area shape="rect" id="node21" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="453,319,612,345"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1004,319,1138,345"/>
</map>
</div>
</div>
<p><a href="../../d0/d29/chan__pjsip_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db2/structanswer__data.html">answer_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/ddb/structhangup__data.html">hangup_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d92/structindicate__data.html">indicate_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d24/structrequest__data.html">request_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/structtransfer__data.html">transfer_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac97d1b33e74afa365e4bbc1de5effbc4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ac97d1b33e74afa365e4bbc1de5effbc4">UNIQUEID_BUFSIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:ac97d1b33e74afa365e4bbc1de5effbc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a07bf5ef75f46849351b11f967a1385e5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a07bf5ef75f46849351b11f967a1385e5">__init_uniqueid_threadbuf</a> (void)</td></tr>
<tr class="separator:a07bf5ef75f46849351b11f967a1385e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8dde573cc3974acd626c5626fae14b4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> (void *data)</td></tr>
<tr class="separator:ab8dde573cc3974acd626c5626fae14b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc941e909d1ca6a0997028d9562d78da"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a> (void *data)</td></tr>
<tr class="separator:acc941e909d1ca6a0997028d9562d78da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa575d2376b18837a5125b106d8cb2b6d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aa575d2376b18837a5125b106d8cb2b6d">call_pickup_incoming_request</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:aa575d2376b18837a5125b106d8cb2b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae691fb7e6f52a68b5d7c4ca38e3067df"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ae691fb7e6f52a68b5d7c4ca38e3067df">chan_pjsip_add_hold</a> (const char *chan_uid)</td></tr>
<tr class="memdesc:ae691fb7e6f52a68b5d7c4ca38e3067df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a channel ID to the list of PJSIP channels on hold.  <a href="#ae691fb7e6f52a68b5d7c4ca38e3067df">More...</a><br /></td></tr>
<tr class="separator:ae691fb7e6f52a68b5d7c4ca38e3067df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae289d98847cbdeedc2e943c10bfe578f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ae289d98847cbdeedc2e943c10bfe578f">chan_pjsip_answer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="memdesc:ae289d98847cbdeedc2e943c10bfe578f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core when we should answer a PJSIP session.  <a href="#ae289d98847cbdeedc2e943c10bfe578f">More...</a><br /></td></tr>
<tr class="separator:ae289d98847cbdeedc2e943c10bfe578f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4728a7faa5b2a46e7adca3224b9bba00"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4728a7faa5b2a46e7adca3224b9bba00">chan_pjsip_call</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const char *dest, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="memdesc:a4728a7faa5b2a46e7adca3224b9bba00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to actually start calling a remote party.  <a href="#a4728a7faa5b2a46e7adca3224b9bba00">More...</a><br /></td></tr>
<tr class="separator:a4728a7faa5b2a46e7adca3224b9bba00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b967c3f4b00ee67368c1e621632691"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab7b967c3f4b00ee67368c1e621632691">chan_pjsip_cng_tone_detected</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:ab7b967c3f4b00ee67368c1e621632691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helper function called when CNG tone is detected.  <a href="#ab7b967c3f4b00ee67368c1e621632691">More...</a><br /></td></tr>
<tr class="separator:ab7b967c3f4b00ee67368c1e621632691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dfff6a3d96254100e7fbc050fb9cc3c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a1dfff6a3d96254100e7fbc050fb9cc3c">chan_pjsip_devicestate</a> (const char *data)</td></tr>
<tr class="memdesc:a1dfff6a3d96254100e7fbc050fb9cc3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to get the device state of an endpoint.  <a href="#a1dfff6a3d96254100e7fbc050fb9cc3c">More...</a><br /></td></tr>
<tr class="separator:a1dfff6a3d96254100e7fbc050fb9cc3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a826ce6596ff4cdb76d1339beb54f53b6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a826ce6596ff4cdb76d1339beb54f53b6">chan_pjsip_digit_begin</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="memdesc:a826ce6596ff4cdb76d1339beb54f53b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to start a DTMF digit.  <a href="#a826ce6596ff4cdb76d1339beb54f53b6">More...</a><br /></td></tr>
<tr class="separator:a826ce6596ff4cdb76d1339beb54f53b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec30dd0009af850b0ee91e879d690576"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aec30dd0009af850b0ee91e879d690576">chan_pjsip_digit_end</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, unsigned int duration)</td></tr>
<tr class="memdesc:aec30dd0009af850b0ee91e879d690576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to stop a DTMF digit.  <a href="#aec30dd0009af850b0ee91e879d690576">More...</a><br /></td></tr>
<tr class="separator:aec30dd0009af850b0ee91e879d690576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d300a78737db2b81232c2f5a065391"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#af2d300a78737db2b81232c2f5a065391">chan_pjsip_fixup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *oldchan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *newchan)</td></tr>
<tr class="memdesc:af2d300a78737db2b81232c2f5a065391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to change the underlying owner channel.  <a href="#af2d300a78737db2b81232c2f5a065391">More...</a><br /></td></tr>
<tr class="separator:af2d300a78737db2b81232c2f5a065391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1076eb4d606facf4eed3a5b4f4d254e9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a1076eb4d606facf4eed3a5b4f4d254e9">chan_pjsip_get_codec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</td></tr>
<tr class="memdesc:a1076eb4d606facf4eed3a5b4f4d254e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by RTP engine to get peer capabilities.  <a href="#a1076eb4d606facf4eed3a5b4f4d254e9">More...</a><br /></td></tr>
<tr class="separator:a1076eb4d606facf4eed3a5b4f4d254e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53d9cae0b1765204cfffb397954775b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ac53d9cae0b1765204cfffb397954775b">chan_pjsip_get_hold</a> (const char *chan_uid)</td></tr>
<tr class="memdesc:ac53d9cae0b1765204cfffb397954775b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether a channel ID is in the list of PJSIP channels on hold.  <a href="#ac53d9cae0b1765204cfffb397954775b">More...</a><br /></td></tr>
<tr class="separator:ac53d9cae0b1765204cfffb397954775b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589e3c9b959ee5e4024ae3a66a4a623b"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a589e3c9b959ee5e4024ae3a66a4a623b">chan_pjsip_get_rtp_peer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **instance)</td></tr>
<tr class="memdesc:a589e3c9b959ee5e4024ae3a66a4a623b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by RTP engine to get local audio RTP peer.  <a href="#a589e3c9b959ee5e4024ae3a66a4a623b">More...</a><br /></td></tr>
<tr class="separator:a589e3c9b959ee5e4024ae3a66a4a623b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf07b154e3a00f125658f0ce0995c540"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#adf07b154e3a00f125658f0ce0995c540">chan_pjsip_get_uniqueid</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:adf07b154e3a00f125658f0ce0995c540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa61a4a471cbeada2cc3f741da4d1a36e"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aa61a4a471cbeada2cc3f741da4d1a36e">chan_pjsip_get_vrtp_peer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **instance)</td></tr>
<tr class="memdesc:aa61a4a471cbeada2cc3f741da4d1a36e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by RTP engine to get local video RTP peer.  <a href="#aa61a4a471cbeada2cc3f741da4d1a36e">More...</a><br /></td></tr>
<tr class="separator:aa61a4a471cbeada2cc3f741da4d1a36e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518526bd2926d1516d1ee6dbb0b8b37d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a518526bd2926d1516d1ee6dbb0b8b37d">chan_pjsip_hangup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="memdesc:a518526bd2926d1516d1ee6dbb0b8b37d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to hang up a PJSIP session.  <a href="#a518526bd2926d1516d1ee6dbb0b8b37d">More...</a><br /></td></tr>
<tr class="separator:a518526bd2926d1516d1ee6dbb0b8b37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a063c3c49b5a808d76b74850a0c355d36"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a063c3c49b5a808d76b74850a0c355d36">chan_pjsip_incoming_ack</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct pjsip_rx_data *rdata)</td></tr>
<tr class="separator:a063c3c49b5a808d76b74850a0c355d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73521fa058d52158d69b81c7c1479d21"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a73521fa058d52158d69b81c7c1479d21">chan_pjsip_incoming_request</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:a73521fa058d52158d69b81c7c1479d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when a request is received on the session.  <a href="#a73521fa058d52158d69b81c7c1479d21">More...</a><br /></td></tr>
<tr class="separator:a73521fa058d52158d69b81c7c1479d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb80ce2ac4b98bbc6f6a00b587bd8f44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#afb80ce2ac4b98bbc6f6a00b587bd8f44">chan_pjsip_incoming_response</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:afb80ce2ac4b98bbc6f6a00b587bd8f44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when a response is received on the session.  <a href="#afb80ce2ac4b98bbc6f6a00b587bd8f44">More...</a><br /></td></tr>
<tr class="separator:afb80ce2ac4b98bbc6f6a00b587bd8f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6035cf33e963eec5c8bab098c09167c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab6035cf33e963eec5c8bab098c09167c">chan_pjsip_incoming_response_update_cause</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:ab6035cf33e963eec5c8bab098c09167c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when a response is received on the session.  <a href="#ab6035cf33e963eec5c8bab098c09167c">More...</a><br /></td></tr>
<tr class="separator:ab6035cf33e963eec5c8bab098c09167c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a839c044342df85af7494c553e36bf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a50a839c044342df85af7494c553e36bf">chan_pjsip_indicate</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, int condition, const void *data, size_t datalen)</td></tr>
<tr class="memdesc:a50a839c044342df85af7494c553e36bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to ask the channel to indicate some sort of condition.  <a href="#a50a839c044342df85af7494c553e36bf">More...</a><br /></td></tr>
<tr class="separator:a50a839c044342df85af7494c553e36bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0ae3dfd1f4dc4b4c6f277dd96c53ce"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">chan_pjsip_new</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, int <a class="el" href="../../d4/d88/structstate.html">state</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *title, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>)</td></tr>
<tr class="memdesc:a1a0ae3dfd1f4dc4b4c6f277dd96c53ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to create a new PJSIP Asterisk channel.  <a href="#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">More...</a><br /></td></tr>
<tr class="separator:a1a0ae3dfd1f4dc4b4c6f277dd96c53ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51acce1c5b7f16c738b02b70bc931348"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a51acce1c5b7f16c738b02b70bc931348">chan_pjsip_pvt_dtor</a> (void *obj)</td></tr>
<tr class="separator:a51acce1c5b7f16c738b02b70bc931348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3ad158a05985a0a69e6d739b3f3bcf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a6c3ad158a05985a0a69e6d739b3f3bcf">chan_pjsip_queryoption</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, int option, void *data, int *datalen)</td></tr>
<tr class="memdesc:a6c3ad158a05985a0a69e6d739b3f3bcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to query options on a channel.  <a href="#a6c3ad158a05985a0a69e6d739b3f3bcf">More...</a><br /></td></tr>
<tr class="separator:a6c3ad158a05985a0a69e6d739b3f3bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0aa891c232e15e6fc1f8f25c6405f67"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#af0aa891c232e15e6fc1f8f25c6405f67">chan_pjsip_read_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="memdesc:af0aa891c232e15e6fc1f8f25c6405f67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to read any waiting frames.  <a href="#af0aa891c232e15e6fc1f8f25c6405f67">More...</a><br /></td></tr>
<tr class="separator:af0aa891c232e15e6fc1f8f25c6405f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab317669d5ea73707fe5724a2ba52c2e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aab317669d5ea73707fe5724a2ba52c2e">chan_pjsip_remove_hold</a> (const char *chan_uid)</td></tr>
<tr class="memdesc:aab317669d5ea73707fe5724a2ba52c2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a channel ID from the list of PJSIP channels on hold.  <a href="#aab317669d5ea73707fe5724a2ba52c2e">More...</a><br /></td></tr>
<tr class="separator:aab317669d5ea73707fe5724a2ba52c2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6148801958125c74ead3a0a3b4839ca6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a6148801958125c74ead3a0a3b4839ca6">chan_pjsip_request</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, const char *data, int *cause)</td></tr>
<tr class="separator:a6148801958125c74ead3a0a3b4839ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca7a276023c244f0c8b8b349beba5cf"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a7ca7a276023c244f0c8b8b349beba5cf">chan_pjsip_request_with_stream_topology</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, const char *data, int *cause)</td></tr>
<tr class="memdesc:a7ca7a276023c244f0c8b8b349beba5cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to create a new outgoing PJSIP session.  <a href="#a7ca7a276023c244f0c8b8b349beba5cf">More...</a><br /></td></tr>
<tr class="separator:a7ca7a276023c244f0c8b8b349beba5cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd953d09ed2f8d1d7a2c11b6e40bae79"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#acd953d09ed2f8d1d7a2c11b6e40bae79">chan_pjsip_sendtext</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="separator:acd953d09ed2f8d1d7a2c11b6e40bae79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c646cf3a54b4960d061921d4d4dbab5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a9c646cf3a54b4960d061921d4d4dbab5">chan_pjsip_sendtext_data</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg)</td></tr>
<tr class="memdesc:a9c646cf3a54b4960d061921d4d4dbab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core to send text on PJSIP session.  <a href="#a9c646cf3a54b4960d061921d4d4dbab5">More...</a><br /></td></tr>
<tr class="separator:a9c646cf3a54b4960d061921d4d4dbab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893b24a1c24b17c0350079164ed10ea8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a893b24a1c24b17c0350079164ed10ea8">chan_pjsip_session_begin</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="memdesc:a893b24a1c24b17c0350079164ed10ea8"><td class="mdescLeft">&#160;</td><td class="mdescRight">SIP session interaction functions.  <a href="#a893b24a1c24b17c0350079164ed10ea8">More...</a><br /></td></tr>
<tr class="separator:a893b24a1c24b17c0350079164ed10ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28fbc92e88b6741ea632ef3979e97ccb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a28fbc92e88b6741ea632ef3979e97ccb">chan_pjsip_session_end</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="memdesc:a28fbc92e88b6741ea632ef3979e97ccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when the session ends.  <a href="#a28fbc92e88b6741ea632ef3979e97ccb">More...</a><br /></td></tr>
<tr class="separator:a28fbc92e88b6741ea632ef3979e97ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c8b846325f7156e1d24171178235328"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4c8b846325f7156e1d24171178235328">chan_pjsip_set_rtp_peer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *vrtp, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *tpeer, const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, int nat_active)</td></tr>
<tr class="memdesc:a4c8b846325f7156e1d24171178235328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by RTP engine to change where the remote party should send media.  <a href="#a4c8b846325f7156e1d24171178235328">More...</a><br /></td></tr>
<tr class="separator:a4c8b846325f7156e1d24171178235328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21db1e2f0c3a4ac28bdc30ff17dc5f3d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a21db1e2f0c3a4ac28bdc30ff17dc5f3d">chan_pjsip_transfer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *target)</td></tr>
<tr class="memdesc:a21db1e2f0c3a4ac28bdc30ff17dc5f3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called by core for Asterisk initiated transfer.  <a href="#a21db1e2f0c3a4ac28bdc30ff17dc5f3d">More...</a><br /></td></tr>
<tr class="separator:a21db1e2f0c3a4ac28bdc30ff17dc5f3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8ea439d812684a1e864e636df5bba6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#abc8ea439d812684a1e864e636df5bba6">chan_pjsip_write</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="separator:abc8ea439d812684a1e864e636df5bba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8a08f021a16a64fdb2e854e6d72cdc6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8a08f021a16a64fdb2e854e6d72cdc6">chan_pjsip_write_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, int stream_num, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="separator:ab8a08f021a16a64fdb2e854e6d72cdc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d7faa442d10ce3c3d4895054452956"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a16d7faa442d10ce3c3d4895054452956">check_for_rtp_changes</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media, struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:a16d7faa442d10ce3c3d4895054452956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2634467e221b7d62bf172d824fcb43a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a2634467e221b7d62bf172d824fcb43a4">clear_session_and_channel</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="memdesc:a2634467e221b7d62bf172d824fcb43a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a channel from a session along with its PVT.  <a href="#a2634467e221b7d62bf172d824fcb43a4">More...</a><br /></td></tr>
<tr class="separator:a2634467e221b7d62bf172d824fcb43a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe69405e6a4d0c81eacf9af760eef029"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#abe69405e6a4d0c81eacf9af760eef029">compatible_formats_exist</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *top, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap)</td></tr>
<tr class="memdesc:abe69405e6a4d0c81eacf9af760eef029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a topology is compatible with format capabilities.  <a href="#abe69405e6a4d0c81eacf9af760eef029">More...</a><br /></td></tr>
<tr class="separator:abe69405e6a4d0c81eacf9af760eef029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ba53077ace5491807c7e453c4beaa7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a48ba53077ace5491807c7e453c4beaa7">direct_media_mitigate_glare</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:a48ba53077ace5491807c7e453c4beaa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5267e04f3e504a11bfaf6abf8ce855cb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a5267e04f3e504a11bfaf6abf8ce855cb">handle_topology_request_change</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *proposed)</td></tr>
<tr class="separator:a5267e04f3e504a11bfaf6abf8ce855cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae28b3b590d6f2c84e472625c81ae2bb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a> (void *data)</td></tr>
<tr class="separator:aae28b3b590d6f2c84e472625c81ae2bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1292b93a988ad0404f70650091708ad4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a1292b93a988ad0404f70650091708ad4">hangup_cause2sip</a> (int cause)</td></tr>
<tr class="memdesc:a1292b93a988ad0404f70650091708ad4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function which translates from Asterisk cause codes to SIP response codes.  <a href="#a1292b93a988ad0404f70650091708ad4">More...</a><br /></td></tr>
<tr class="separator:a1292b93a988ad0404f70650091708ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c23fd76c1946c0423cd731b8657fe3a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a9c23fd76c1946c0423cd731b8657fe3a">hangup_data_alloc</a> (int cause, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a9c23fd76c1946c0423cd731b8657fe3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfdb86d23028685b2e40034325c07fe7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#abfdb86d23028685b2e40034325c07fe7">hangup_data_destroy</a> (void *obj)</td></tr>
<tr class="separator:abfdb86d23028685b2e40034325c07fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933506a953d4f1e0121c580c7d38007d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a933506a953d4f1e0121c580c7d38007d">hangup_sip2cause</a> (int cause)</td></tr>
<tr class="memdesc:a933506a953d4f1e0121c580c7d38007d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert SIP hangup causes to Asterisk hangup causes.  <a href="#a933506a953d4f1e0121c580c7d38007d">More...</a><br /></td></tr>
<tr class="separator:a933506a953d4f1e0121c580c7d38007d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6613d45a04e74534bf7e318b2c71e077"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a> (void *data)</td></tr>
<tr class="separator:a6613d45a04e74534bf7e318b2c71e077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac714053cdb838e3a0c6ef730eb243b6a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d92/structindicate__data.html">indicate_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ac714053cdb838e3a0c6ef730eb243b6a">indicate_data_alloc</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, int condition, int response_code, const void *frame_data, size_t datalen)</td></tr>
<tr class="separator:ac714053cdb838e3a0c6ef730eb243b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addaafd6178fd565072bc43df7570a2fd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#addaafd6178fd565072bc43df7570a2fd">indicate_data_destroy</a> (void *obj)</td></tr>
<tr class="separator:addaafd6178fd565072bc43df7570a2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd7da40b4cb4876eb0098dfff983d661"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#abd7da40b4cb4876eb0098dfff983d661">info_dtmf_data_alloc</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, unsigned int duration)</td></tr>
<tr class="separator:abd7da40b4cb4876eb0098dfff983d661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae64662336deeefbd86eec60ea7a4a2c2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ae64662336deeefbd86eec60ea7a4a2c2">info_dtmf_data_destroy</a> (void *obj)</td></tr>
<tr class="separator:ae64662336deeefbd86eec60ea7a4a2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebb2528f712aada7a199bb35c42279eb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aebb2528f712aada7a199bb35c42279eb">is_colp_update_allowed</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:aebb2528f712aada7a199bb35c42279eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c0c3d3ac88d921e3ecbd8a7f8faae1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ad6c0c3d3ac88d921e3ecbd8a7f8faae1">is_compatible_format</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:ad6c0c3d3ac88d921e3ecbd8a7f8faae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the given frame is in a format we've negotiated.  <a href="#ad6c0c3d3ac88d921e3ecbd8a7f8faae1">More...</a><br /></td></tr>
<tr class="separator:ad6c0c3d3ac88d921e3ecbd8a7f8faae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="memdesc:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the module.  <a href="#ac3382bf6da54c56b37069bd76bbdf4f9">More...</a><br /></td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd4c44d11461ae7e365de58ec8bf4ba"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#afbd4c44d11461ae7e365de58ec8bf4ba">local_hold_set_state</a> (struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media, unsigned int held)</td></tr>
<tr class="memdesc:afbd4c44d11461ae7e365de58ec8bf4ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback which changes the value of locally held on the media stream.  <a href="#afbd4c44d11461ae7e365de58ec8bf4ba">More...</a><br /></td></tr>
<tr class="separator:afbd4c44d11461ae7e365de58ec8bf4ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6971e8e7e159455261d562e9f92b7b26"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a6971e8e7e159455261d562e9f92b7b26">on_topology_change_response</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:a6971e8e7e159455261d562e9f92b7b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad56235030707963962d208ed278ab639"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ad56235030707963962d208ed278ab639">pbx_start_incoming_request</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:ad56235030707963962d208ed278ab639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a696b86dd279517cbb99973a3470cc0c9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a696b86dd279517cbb99973a3470cc0c9">remote_send_hold</a> (void *data)</td></tr>
<tr class="memdesc:a696b86dd279517cbb99973a3470cc0c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update local hold state to be held.  <a href="#a696b86dd279517cbb99973a3470cc0c9">More...</a><br /></td></tr>
<tr class="separator:a696b86dd279517cbb99973a3470cc0c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155e79f12a8259d7757b0fb20c701a6e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a155e79f12a8259d7757b0fb20c701a6e">remote_send_hold_refresh</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, unsigned int held)</td></tr>
<tr class="memdesc:a155e79f12a8259d7757b0fb20c701a6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update local hold state and send a re-INVITE with the new SDP.  <a href="#a155e79f12a8259d7757b0fb20c701a6e">More...</a><br /></td></tr>
<tr class="separator:a155e79f12a8259d7757b0fb20c701a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a442f66f50441c8f6696d5fb1548ce055"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a442f66f50441c8f6696d5fb1548ce055">remote_send_unhold</a> (void *data)</td></tr>
<tr class="memdesc:a442f66f50441c8f6696d5fb1548ce055"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update local hold state to be unheld.  <a href="#a442f66f50441c8f6696d5fb1548ce055">More...</a><br /></td></tr>
<tr class="separator:a442f66f50441c8f6696d5fb1548ce055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2e6fb7d874f0d2deddd2ecfc8afb32"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a> (void *obj)</td></tr>
<tr class="separator:a4e2e6fb7d874f0d2deddd2ecfc8afb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7b53c1482ffe11a7d86af080e35558"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ade7b53c1482ffe11a7d86af080e35558">rtp_direct_media_data_create</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *vrtp, const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:ade7b53c1482ffe11a7d86af080e35558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4721791e01289d04566e0612a657a359"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4721791e01289d04566e0612a657a359">rtp_direct_media_data_destroy</a> (void *data)</td></tr>
<tr class="separator:a4721791e01289d04566e0612a657a359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8f089a1e6c8ec194dc302ab684317f2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aa8f089a1e6c8ec194dc302ab684317f2">rtp_find_rtcp_fd_position</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *rtp)</td></tr>
<tr class="memdesc:aa8f089a1e6c8ec194dc302ab684317f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to find the position for RTCP.  <a href="#aa8f089a1e6c8ec194dc302ab684317f2">More...</a><br /></td></tr>
<tr class="separator:aa8f089a1e6c8ec194dc302ab684317f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bb831542952f8322bcf155023251a15"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a9bb831542952f8322bcf155023251a15">send_direct_media_request</a> (void *data)</td></tr>
<tr class="separator:a9bb831542952f8322bcf155023251a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64237b7cef80387e6270c3464ac84539"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a64237b7cef80387e6270c3464ac84539">send_topology_change_refresh</a> (void *data)</td></tr>
<tr class="separator:a64237b7cef80387e6270c3464ac84539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e3b3eb8bb47c7f02b5c80d748bda521"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a2e3b3eb8bb47c7f02b5c80d748bda521">sendtext</a> (void *obj)</td></tr>
<tr class="separator:a2e3b3eb8bb47c7f02b5c80d748bda521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45c9506569917e6d8159e3416594b387"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a45c9506569917e6d8159e3416594b387">sendtext_data_create</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg)</td></tr>
<tr class="separator:a45c9506569917e6d8159e3416594b387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49a76ee0e8f21d19271d82beed13ebe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab49a76ee0e8f21d19271d82beed13ebe">sendtext_data_destroy</a> (void *obj)</td></tr>
<tr class="separator:ab49a76ee0e8f21d19271d82beed13ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e2ade62c8bb21a578778fe8f416d88"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a> (const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const char *channel_id)</td></tr>
<tr class="separator:a78e2ade62c8bb21a578778fe8f416d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11d3109da5cfcdcc3f5aa9df1bd8f3a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#af11d3109da5cfcdcc3f5aa9df1bd8f3a">set_sipdomain_variable</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:af11d3109da5cfcdcc3f5aa9df1bd8f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37ea972388db3c3094a132ee472cae72"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a37ea972388db3c3094a132ee472cae72">topology_change_refresh_data_alloc</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</td></tr>
<tr class="separator:a37ea972388db3c3094a132ee472cae72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad04a358d51294f6d05a862d0841eb8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a> (struct <a class="el" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a> *<a class="el" href="../../d7/ded/structrefresh__data.html">refresh_data</a>)</td></tr>
<tr class="separator:a8ad04a358d51294f6d05a862d0841eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae704756dfd363718a01f2b0ed6acdf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aaae704756dfd363718a01f2b0ed6acdf">transfer</a> (void *data)</td></tr>
<tr class="separator:aaae704756dfd363718a01f2b0ed6acdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82de71388fa4f49e43fe0eef0a03bfec"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d7c/structtransfer__data.html">transfer_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a82de71388fa4f49e43fe0eef0a03bfec">transfer_data_alloc</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const char *target)</td></tr>
<tr class="separator:a82de71388fa4f49e43fe0eef0a03bfec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02499f71751fd22c978ce88b7bbb1868"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a02499f71751fd22c978ce88b7bbb1868">transfer_data_destroy</a> (void *obj)</td></tr>
<tr class="separator:a02499f71751fd22c978ce88b7bbb1868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255794a206a6baa469864a21e4547fbe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a255794a206a6baa469864a21e4547fbe">transfer_redirect</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const char *target)</td></tr>
<tr class="separator:a255794a206a6baa469864a21e4547fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5164553d797b66e36f41ee195856ab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ace5164553d797b66e36f41ee195856ab">transfer_refer</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, const char *target)</td></tr>
<tr class="separator:ace5164553d797b66e36f41ee195856ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9359cca96e970cfc8a30a625885115b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab9359cca96e970cfc8a30a625885115b">transmit_info_dtmf</a> (void *data)</td></tr>
<tr class="separator:ab9359cca96e970cfc8a30a625885115b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab34c7950a3f2ea45cda536ae6582a567"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab34c7950a3f2ea45cda536ae6582a567">transmit_info_with_vidupdate</a> (void *data)</td></tr>
<tr class="memdesc:ab34c7950a3f2ea45cda536ae6582a567"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send SIP INFO with video update request.  <a href="#ab34c7950a3f2ea45cda536ae6582a567">More...</a><br /></td></tr>
<tr class="separator:ab34c7950a3f2ea45cda536ae6582a567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b3c2bb01bda9a7d660caee513f238d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a9b3c2bb01bda9a7d660caee513f238d3">transport_info_destroy</a> (void *obj)</td></tr>
<tr class="memdesc:a9b3c2bb01bda9a7d660caee513f238d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor function for <a class="el" href="../../df/d57/structtransport__info__data.html">transport_info_data</a>.  <a href="#a9b3c2bb01bda9a7d660caee513f238d3">More...</a><br /></td></tr>
<tr class="separator:a9b3c2bb01bda9a7d660caee513f238d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb19b644b4895d36ab32aa1c03c3dc5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a7cb19b644b4895d36ab32aa1c03c3dc5">uid_hold_hash_fn</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:a7cb19b644b4895d36ab32aa1c03c3dc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1edc44a2b615105076474b9b063e793c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a1edc44a2b615105076474b9b063e793c">uid_hold_sort_fn</a> (const void *obj_left, const void *obj_right, const int flags)</td></tr>
<tr class="separator:a1edc44a2b615105076474b9b063e793c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="memdesc:ad09fa931f468002152a3cc2d5ce25eae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unload the PJSIP channel from Asterisk.  <a href="#ad09fa931f468002152a3cc2d5ce25eae">More...</a><br /></td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22eb012ae61e28bc411003144c9adfd2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a22eb012ae61e28bc411003144c9adfd2">update_connected_line_information</a> (void *data)</td></tr>
<tr class="memdesc:a22eb012ae61e28bc411003144c9adfd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update connected line information.  <a href="#a22eb012ae61e28bc411003144c9adfd2">More...</a><br /></td></tr>
<tr class="separator:a22eb012ae61e28bc411003144c9adfd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3920b7e841a904750cb53f9d56755f40"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a3920b7e841a904750cb53f9d56755f40">update_devstate</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a3920b7e841a904750cb53f9d56755f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c764a014ab25b08fd2984a271cadb7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a35c764a014ab25b08fd2984a271cadb7">update_initial_connected_line</a> (struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="el" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>)</td></tr>
<tr class="separator:a35c764a014ab25b08fd2984a271cadb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124979e0fe3b11be892d3f40aa47134c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a124979e0fe3b11be892d3f40aa47134c">xfer_client_on_evsub_state</a> (pjsip_evsub *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, pjsip_event *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="memdesc:a124979e0fe3b11be892d3f40aa47134c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to report status of implicit REFER-NOTIFY subscription.  <a href="#a124979e0fe3b11be892d3f40aa47134c">More...</a><br /></td></tr>
<tr class="separator:a124979e0fe3b11be892d3f40aa47134c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP Channel Driver&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DRIVER, .requires = &quot;res_pjsip,res_pjsip_session,res_pjsip_pubsub&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f919fd0f5ea30c5cfd7ae0a3a3b47d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">call_pickup_supplement</a></td></tr>
<tr class="separator:af8f919fd0f5ea30c5cfd7ae0a3a3b47d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7b8d8b99d184d28a5f0e9fe66a47261"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ad7b8d8b99d184d28a5f0e9fe66a47261">chan_idx</a></td></tr>
<tr class="separator:ad7b8d8b99d184d28a5f0e9fe66a47261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48366228fe4cc370e050c2364be43ab"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ac48366228fe4cc370e050c2364be43ab">chan_pjsip_ack_supplement</a></td></tr>
<tr class="separator:ac48366228fe4cc370e050c2364be43ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637fba0a1b7a8d6059fdc2c9e598e8bc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a637fba0a1b7a8d6059fdc2c9e598e8bc">chan_pjsip_dial_contacts_function</a></td></tr>
<tr class="separator:a637fba0a1b7a8d6059fdc2c9e598e8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda6def7b4067227ca75d803f66ac0db"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#acda6def7b4067227ca75d803f66ac0db">chan_pjsip_parse_uri_function</a></td></tr>
<tr class="separator:acda6def7b4067227ca75d803f66ac0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d86812ca5c40c8e82be3e77ce5156c8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a9d86812ca5c40c8e82be3e77ce5156c8">chan_pjsip_rtp_glue</a></td></tr>
<tr class="memdesc:a9d86812ca5c40c8e82be3e77ce5156c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local glue for interacting with the RTP engine core.  <a href="#a9d86812ca5c40c8e82be3e77ce5156c8">More...</a><br /></td></tr>
<tr class="separator:a9d86812ca5c40c8e82be3e77ce5156c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fb40d1def7c4a16194fc411b28e9086"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a3fb40d1def7c4a16194fc411b28e9086">chan_pjsip_supplement</a></td></tr>
<tr class="memdesc:a3fb40d1def7c4a16194fc411b28e9086"><td class="mdescLeft">&#160;</td><td class="mdescRight">SIP session supplement structure.  <a href="#a3fb40d1def7c4a16194fc411b28e9086">More...</a><br /></td></tr>
<tr class="separator:a3fb40d1def7c4a16194fc411b28e9086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeccb50f70da772a3bef4ee65f8101f6b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aeccb50f70da772a3bef4ee65f8101f6b">chan_pjsip_supplement_response</a></td></tr>
<tr class="memdesc:aeccb50f70da772a3bef4ee65f8101f6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SIP session supplement structure just for responses.  <a href="#aeccb50f70da772a3bef4ee65f8101f6b">More...</a><br /></td></tr>
<tr class="separator:aeccb50f70da772a3bef4ee65f8101f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74cd5fcb1313f0fb5f2f876bf484b3b7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a></td></tr>
<tr class="memdesc:a74cd5fcb1313f0fb5f2f876bf484b3b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">PBX interface structure for channel registration.  <a href="#a74cd5fcb1313f0fb5f2f876bf484b3b7">More...</a><br /></td></tr>
<tr class="separator:a74cd5fcb1313f0fb5f2f876bf484b3b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab0df6f9b19263e2a45ed03a8bef4a0d"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aab0df6f9b19263e2a45ed03a8bef4a0d">channel_type</a> [] = &quot;PJSIP&quot;</td></tr>
<tr class="separator:aab0df6f9b19263e2a45ed03a8bef4a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b37fd87b4ebd1a80bff709a7f8c882"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a09b37fd87b4ebd1a80bff709a7f8c882">direct_media_mitigation_info</a> = { }</td></tr>
<tr class="separator:a09b37fd87b4ebd1a80bff709a7f8c882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea6ae18672039da64b60ec44988f100"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#afea6ae18672039da64b60ec44988f100">dtmf_mode_function</a></td></tr>
<tr class="separator:afea6ae18672039da64b60ec44988f100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7e6da76cbe793e06eb03e0a01c5275"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#aba7e6da76cbe793e06eb03e0a01c5275">media_offer_function</a></td></tr>
<tr class="separator:aba7e6da76cbe793e06eb03e0a01c5275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5176ef2df39ebfba32475964a912822"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab5176ef2df39ebfba32475964a912822">moh_passthrough_function</a></td></tr>
<tr class="separator:ab5176ef2df39ebfba32475964a912822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d1e0cd20b19a8071f0695cc3008b8d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a80d1e0cd20b19a8071f0695cc3008b8d">pbx_start_supplement</a></td></tr>
<tr class="separator:a80d1e0cd20b19a8071f0695cc3008b8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab56a6616234005e8d75b380aceddf0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a></td></tr>
<tr class="separator:a6ab56a6616234005e8d75b380aceddf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e829b838998b3165e1ea7811886332c"><td class="memItemLeft" align="right" valign="top">static pjsip_module&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a></td></tr>
<tr class="memdesc:a9e829b838998b3165e1ea7811886332c"><td class="mdescLeft">&#160;</td><td class="mdescRight">REFER Callback module, used to attach session data structure to subscription.  <a href="#a9e829b838998b3165e1ea7811886332c">More...</a><br /></td></tr>
<tr class="separator:a9e829b838998b3165e1ea7811886332c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade433b4f10a05327a621e8b05244cb32"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#ade433b4f10a05327a621e8b05244cb32">session_refresh_function</a></td></tr>
<tr class="separator:ade433b4f10a05327a621e8b05244cb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1110e321d34ddd45dd93c2217aa8cca7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#a1110e321d34ddd45dd93c2217aa8cca7">transport_info</a></td></tr>
<tr class="memdesc:a1110e321d34ddd45dd93c2217aa8cca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datastore used to store local/remote addresses for the INVITE request that created the PJSIP channel.  <a href="#a1110e321d34ddd45dd93c2217aa8cca7">More...</a><br /></td></tr>
<tr class="separator:a1110e321d34ddd45dd93c2217aa8cca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf8c7e538ca5104ac27f05759c116281"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/chan__pjsip_8c.html#acf8c7e538ca5104ac27f05759c116281">uniqueid_threadbuf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d0/d29/chan__pjsip_8c.html#a07bf5ef75f46849351b11f967a1385e5">__init_uniqueid_threadbuf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:acf8c7e538ca5104ac27f05759c116281"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PSJIP SIP Channel Driver. </p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac97d1b33e74afa365e4bbc1de5effbc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97d1b33e74afa365e4bbc1de5effbc4">&#9670;&nbsp;</a></span>UNIQUEID_BUFSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNIQUEID_BUFSIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00076">76</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01278">chan_pjsip_get_uniqueid()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a07bf5ef75f46849351b11f967a1385e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07bf5ef75f46849351b11f967a1385e5">&#9670;&nbsp;</a></span>__init_uniqueid_threadbuf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_uniqueid_threadbuf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00075">75</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03438">3438</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03438">3438</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="ab8dde573cc3974acd626c5626fae14b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8dde573cc3974acd626c5626fae14b4">&#9670;&nbsp;</a></span>answer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int answer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00682">682</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">ast_sip_session_send_response()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00679">answer_data::indent</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00788">SCOPE_ENTER_TASK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00678">answer_data::session</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02648">ast_raw_answer_with_stream_topology()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00726">chan_pjsip_answer()</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00330">dns_parse_answer()</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00409">dns_parse_answer_ex()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00284">dump_answer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03639">find_and_retrans()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l00806">pbx_builtin_incomplete()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05236">session_inv_on_rx_offer()</a>, <a class="el" href="../../db/dd3/res__stun__monitor_8c_source.html#l00085">stun_monitor_request()</a>, <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00109">tds_log()</a>, <a class="el" href="../../d7/d8e/test__cdr_8c_source.html#l00310">verify_mock_cdr_record()</a>, and <a class="el" href="../../d0/d72/app__zapateller_8c_source.html#l00079">zapateller_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;{</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structanswer__data.html">answer_data</a> *ans_data = data;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = PJ_SUCCESS;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   pjsip_tx_data *packet = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = ans_data-&gt;<a class="code" href="../../d7/db2/structanswer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a8af79ba760b1a2d5c7eaad8f8ee3efa0">SCOPE_ENTER_TASK</a>(1, ans_data-&gt;<a class="code" href="../../d7/db2/structanswer__data.html#ac0908cd5e64c91ddda68c49decca5935">indent</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_DISCONNECTED) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Session already DISCONNECTED [reason=%d (%s)]\n&quot;</span>,</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause,</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;         pjsip_get_status_text(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause)-&gt;ptr);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Disconnected\n&quot;</span>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   pjsip_dlg_inc_lock(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;invite_tsx) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      status = pjsip_inv_answer(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>, 200, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;packet);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,<span class="stringliteral">&quot;Cannot answer &#39;%s&#39; because there is no associated SIP transaction\n&quot;</span>,</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   pjsip_dlg_dec_lock(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="keywordflow">if</span> (status == PJ_SUCCESS &amp;&amp; packet) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a>(session, packet);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordtype">char</span> err[PJ_ERR_MSG_SIZE];</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      pj_strerror(status, err, <span class="keyword">sizeof</span>(err));</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,<span class="stringliteral">&quot;Cannot answer &#39;%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>), err);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">       * Return this value so we can distinguish between this</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">       * failure and the threadpool synchronous push failing.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-2, <span class="stringliteral">&quot;pjproject failure\n&quot;</span>);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div><div class="ttc" id="structanswer__data_html"><div class="ttname"><a href="../../d7/db2/structanswer__data.html">answer_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00677">chan_pjsip.c:677</a></div></div>
<div class="ttc" id="logger_8h_html_a8af79ba760b1a2d5c7eaad8f8ee3efa0"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a8af79ba760b1a2d5c7eaad8f8ee3efa0">SCOPE_ENTER_TASK</a></div><div class="ttdeci">#define SCOPE_ENTER_TASK(level, indent,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00788">logger.h:788</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structanswer__data_html_ac0908cd5e64c91ddda68c49decca5935"><div class="ttname"><a href="../../d7/db2/structanswer__data.html#ac0908cd5e64c91ddda68c49decca5935">answer_data::indent</a></div><div class="ttdeci">unsigned long indent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00679">chan_pjsip.c:679</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aed4c9a6bf6967790981c02027f5f02e8"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a></div><div class="ttdeci">void ast_sip_session_send_response(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">res_pjsip_session.c:2576</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structanswer__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d7/db2/structanswer__data.html#a47bd1bb949183a58a194970acaccffbd">answer_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00678">chan_pjsip.c:678</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03438">3438</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="acc941e909d1ca6a0997028d9562d78da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc941e909d1ca6a0997028d9562d78da">&#9670;&nbsp;</a></span>call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int call </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02358">2358</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01150">ast_queue_hangup()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02504">ast_set_hangupsource()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02847">ast_sip_session_create_invite()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02842">ast_sip_session_send_request()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00494">set_channel_on_rtp_instance()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02333">update_initial_connected_line()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06553">ast_call()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02385">chan_pjsip_call()</a>, and <a class="el" href="../../d9/da5/bridge__native__dahdi_8c_source.html#l00213">native_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;{</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = data;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s Topology: %s\n&quot;</span>,</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>, &amp;STR_TMP))</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      );</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   res = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa73c173cbf6b282f81a445ed05050cb9">ast_sip_session_create_invite</a>(session, &amp;tdata);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>), 0);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a>(session, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a35c764a014ab25b08fd2984a271cadb7">update_initial_connected_line</a>(session);</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a35a7aa9427f3aea9384c1a481ce6a5f3">ast_sip_session_send_request</a>(session, tdata);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   }</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel, -1);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(res, <span class="stringliteral">&quot;RC: %d\n&quot;</span>, res);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;}</div><div class="ttc" id="channel_8h_html_a30bcf0418189567bc84ff32034f79f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a></div><div class="ttdeci">int ast_queue_hangup(struct ast_channel *chan)</div><div class="ttdoc">Queue a hangup frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01150">channel.c:1150</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a35a7aa9427f3aea9384c1a481ce6a5f3"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a35a7aa9427f3aea9384c1a481ce6a5f3">ast_sip_session_send_request</a></div><div class="ttdeci">void ast_sip_session_send_request(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02842">res_pjsip_session.c:2842</a></div></div>
<div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa73c173cbf6b282f81a445ed05050cb9"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa73c173cbf6b282f81a445ed05050cb9">ast_sip_session_create_invite</a></div><div class="ttdeci">int ast_sip_session_create_invite(struct ast_sip_session *session, pjsip_tx_data **tdata)</div><div class="ttdoc">Creates an INVITE request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02847">res_pjsip_session.c:2847</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a78e2ade62c8bb21a578778fe8f416d88"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a></div><div class="ttdeci">static void set_channel_on_rtp_instance(const struct ast_sip_session *session, const char *channel_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00494">chan_pjsip.c:494</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="channel_8h_html_aa9a1d01546e0fc0047e56ba589790b6f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a></div><div class="ttdeci">void ast_set_hangupsource(struct ast_channel *chan, const char *source, int force)</div><div class="ttdoc">Set the source of the hangup in this channel and it&amp;#39;s bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02504">channel.c:2504</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__pjsip_8c_html_a35c764a014ab25b08fd2984a271cadb7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a35c764a014ab25b08fd2984a271cadb7">update_initial_connected_line</a></div><div class="ttdeci">static void update_initial_connected_line(struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02333">chan_pjsip.c:2333</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa575d2376b18837a5125b106d8cb2b6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa575d2376b18837a5125b106d8cb2b6d">&#9670;&nbsp;</a></span>call_pickup_incoming_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int call_pickup_incoming_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03065">3065</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00110">AST_CAUSE_CALL_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01193">ast_get_chan_features_pickup_config()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/dbf/pickup_8c_source.html#l00200">ast_pickup_call()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00181">ast_sip_session::exten</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00145">ast_features_pickup_config::pickupexten</a>.</p>
<div class="fragment"><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;{</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a> *pickup_cfg;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;   <span class="comment">/* Check for a to-tag to determine if this is a reinvite */</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;msg_info.to-&gt;tag.slen) {</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      <span class="comment">/* We don&#39;t care about reinvites */</span></div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;   }</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   pickup_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   <span class="keywordflow">if</span> (!pickup_cfg) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve pickup configuration options. Unable to detect call pickup extension.\n&quot;</span>);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   }</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <span class="keywordflow">if</span> (strcmp(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a78d4847658b695383d849efd12399b38">exten</a>, pickup_cfg-&gt;<a class="code" href="../../d2/d6f/structast__features__pickup__config.html#aec0574bce765da109ed40b4366079727">pickupexten</a>)) {</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(pickup_cfg, -1);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;   }</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(pickup_cfg, -1);</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;   <span class="comment">/* We can&#39;t directly use session-&gt;channel because the pickup operation will cause a masquerade to occur,</span></div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="comment">    * changing the channel pointer in session to a different channel. To ensure we work on the right channel</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="comment">    * we store a pointer locally before we begin and keep a reference so it remains valid no matter what.</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a>(chan)) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;   }</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;   <span class="comment">/* A hangup always occurs because the pickup operation will have either failed resulting in the call</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="comment">    * needing to be hung up OR the pickup operation was a success and the channel we now have is actually</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;<span class="comment">    * the channel that was replaced, which should be hung up since it is literally in limbo not connected</span></div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;<span class="comment">    * to anything at all.</span></div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_ad9d12b10a3d0c3bca1d0b033bc139dab"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a></div><div class="ttdeci">struct ast_features_pickup_config * ast_get_chan_features_pickup_config(struct ast_channel *chan)</div><div class="ttdoc">Get the pickup configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01193">features_config.c:1193</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="structast__sip__session_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a78d4847658b695383d849efd12399b38">ast_sip_session::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00181">res_pjsip_session.h:181</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="pickup_8h_html_a4890be42c2add5f52028705d6bc02201"><div class="ttname"><a href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a></div><div class="ttdeci">int ast_pickup_call(struct ast_channel *chan)</div><div class="ttdoc">Pickup a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/pickup_8c_source.html#l00200">pickup.c:200</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="causes_8h_html_a9900b24b261c275bb54631f16d4d38cc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00110">causes.h:110</a></div></div>
<div class="ttc" id="structast__features__pickup__config_html_aec0574bce765da109ed40b4366079727"><div class="ttname"><a href="../../d2/d6f/structast__features__pickup__config.html#aec0574bce765da109ed40b4366079727">ast_features_pickup_config::pickupexten</a></div><div class="ttdeci">const ast_string_field pickupexten</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00145">include/asterisk/features_config.h:145</a></div></div>
<div class="ttc" id="structast__features__pickup__config_html"><div class="ttname"><a href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a></div><div class="ttdoc">Configuration relating to call pickup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00137">include/asterisk/features_config.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae691fb7e6f52a68b5d7c4ca38e3067df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae691fb7e6f52a68b5d7c4ca38e3067df">&#9670;&nbsp;</a></span>chan_pjsip_add_hold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_add_hold </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>chan_uid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a channel ID to the list of PJSIP channels on hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan_uid</td><td>- Unique ID of the channel being put into the hold list</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Channel has been added to or was already in the hold list </td></tr>
    <tr><td class="paramname">-1</td><td>Failed to add channel to the hold list </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01117">1117</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;{</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, hold_uid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   hold_uid = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a>, chan_uid, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">if</span> (hold_uid) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="comment">/* Device is already on hold. Nothing to do. */</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <span class="comment">/* Device wasn&#39;t in hold list already. Create a new one. */</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   hold_uid = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(strlen(chan_uid) + 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keywordflow">if</span> (!hold_uid) {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(hold_uid, chan_uid, strlen(chan_uid) + 1);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a>, hold_uid) == 0) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   }</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6ab56a6616234005e8d75b380aceddf0"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a></div><div class="ttdeci">static struct ao2_container * pjsip_uids_onhold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01107">chan_pjsip.c:1107</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae289d98847cbdeedc2e943c10bfe578f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae289d98847cbdeedc2e943c10bfe578f">&#9670;&nbsp;</a></span>chan_pjsip_answer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_answer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core when we should answer a PJSIP session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00726">726</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00682">answer()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05218">ast_sip_push_task_wait_serializer()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00704">ast_trace_get_indent</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00679">answer_data::indent</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00678">answer_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structanswer__data.html">answer_data</a> ans_data = { 0, };</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Already up\n&quot;</span>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   session = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="comment">/* the answer task needs to be pushed synchronously otherwise a race condition</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">      can occur between this thread and bridging (specifically when native bridging</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">      attempts to do direct media) */</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   ans_data.<a class="code" href="../../d7/db2/structanswer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   ans_data.<a class="code" href="../../d7/db2/structanswer__data.html#ac0908cd5e64c91ddda68c49decca5935">indent</a> = <a class="code" href="../../d1/d8c/logger_8h.html#aecfc31a3a0ee75acf496c09d5ac56c91">ast_trace_get_indent</a>();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   res = <a class="code" href="../../d7/dfa/group__pjsip__threading.html#gac231880459dcf8feacf1bb272b60472a">ast_sip_push_task_wait_serializer</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, &amp;ans_data);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,<span class="stringliteral">&quot;Cannot answer &#39;%s&#39;: Unable to push answer task to the threadpool.\n&quot;</span>,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, -1);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t push task\n&quot;</span>);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, -1);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div><div class="ttc" id="structanswer__data_html"><div class="ttname"><a href="../../d7/db2/structanswer__data.html">answer_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00677">chan_pjsip.c:677</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="logger_8h_html_aecfc31a3a0ee75acf496c09d5ac56c91"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aecfc31a3a0ee75acf496c09d5ac56c91">ast_trace_get_indent</a></div><div class="ttdeci">#define ast_trace_get_indent()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00704">logger.h:704</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structanswer__data_html_ac0908cd5e64c91ddda68c49decca5935"><div class="ttname"><a href="../../d7/db2/structanswer__data.html#ac0908cd5e64c91ddda68c49decca5935">answer_data::indent</a></div><div class="ttdeci">unsigned long indent</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00679">chan_pjsip.c:679</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="group__pjsip__threading_html_gac231880459dcf8feacf1bb272b60472a"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gac231880459dcf8feacf1bb272b60472a">ast_sip_push_task_wait_serializer</a></div><div class="ttdeci">int ast_sip_push_task_wait_serializer(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to the serializer and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05218">res_pjsip.c:5218</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="structanswer__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d7/db2/structanswer__data.html#a47bd1bb949183a58a194970acaccffbd">answer_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00678">chan_pjsip.c:678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4728a7faa5b2a46e7adca3224b9bba00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4728a7faa5b2a46e7adca3224b9bba00">&#9670;&nbsp;</a></span>chan_pjsip_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to actually start calling a remote party. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02385">2385</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02358">call()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;{</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s Topology: %s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>),</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>, &amp;STR_TMP)));</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel, +1);</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a>, channel)) {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error attempting to place outbound call to &#39;%s&#39;\n&quot;</span>, dest);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(channel);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t push task\n&quot;</span>);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   }</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;&#39;call&#39; task pushed\n&quot;</span>);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_acc941e909d1ca6a0997028d9562d78da"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a></div><div class="ttdeci">static int call(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02358">chan_pjsip.c:2358</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7b967c3f4b00ee67368c1e621632691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b967c3f4b00ee67368c1e621632691">&#9670;&nbsp;</a></span>chan_pjsip_cng_tone_detected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* chan_pjsip_cng_tone_detected </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal helper function called when CNG tone is detected. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00765">765</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l07011">ast_async_goto()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00362">ast_channel_macrocontext()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01764">ast_dsp_get_features()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01755">ast_dsp_set_features()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00213">ast_sip_session::dsp</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00029">DSP_FEATURE_FAX_DETECT</a>, <a class="el" href="../../da/dd2/func__logic_8c_source.html#l00124">exists()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00838">chan_pjsip_read_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;{</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *target_context;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../da/dd2/func__logic_8c.html#ad6f8d00a94914824d3b6048722c42332">exists</a>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordtype">int</span> dsp_features;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   dsp_features = <a class="code" href="../../d3/d08/dsp_8h.html#a92238c472ae51a2926b51599108ab071">ast_dsp_get_features</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   dsp_features &amp;= ~<a class="code" href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordflow">if</span> (dsp_features) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, dsp_features);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="comment">/* If already executing in the fax extension don&#39;t do anything */</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast), <span class="stringliteral">&quot;fax&quot;</span>)) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   target_context = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a>(ast), <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast));</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">    * We need to unlock the channel here because ast_exists_extension has the</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">    * potential to start and stop an autoservice on the channel. Such action</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">    * is prone to deadlock if the channel is locked.</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">    * ast_async_goto() has its own restriction on not holding the channel lock.</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   exists = <a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ast, target_context, <span class="stringliteral">&quot;fax&quot;</span>, 1,</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid,</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordflow">if</span> (exists) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Redirecting &#39;%s&#39; to fax extension due to CNG detection\n&quot;</span>,</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ast, <span class="stringliteral">&quot;FAXEXTEN&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast));</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(ast, target_context, <span class="stringliteral">&quot;fax&quot;</span>, 1)) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to async goto &#39;%s&#39; into fax extension in &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), target_context);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;FAX CNG detected on &#39;%s&#39; but no fax extension in &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), target_context);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="comment">/* It&#39;s possible for a masquerade to have occurred when doing the ast_async_goto resulting in</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">    * the channel on the session having changed. Since we need to return with the original channel</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">    * locked we lock the channel that was passed in and not session-&gt;channel.</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="func__logic_8c_html_ad6f8d00a94914824d3b6048722c42332"><div class="ttname"><a href="../../da/dd2/func__logic_8c.html#ad6f8d00a94914824d3b6048722c42332">exists</a></div><div class="ttdeci">static int exists(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd2/func__logic_8c_source.html#l00124">func_logic.c:124</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">ast_sip_session::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00213">res_pjsip_session.h:213</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dsp_8h_html_a92238c472ae51a2926b51599108ab071"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92238c472ae51a2926b51599108ab071">ast_dsp_get_features</a></div><div class="ttdeci">int ast_dsp_get_features(struct ast_dsp *dsp)</div><div class="ttdoc">Get features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01764">dsp.c:1764</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="dsp_8h_html_a92045e8a8ad56b9b31d24db325fa95ab"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_FAX_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00029">dsp.h:29</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="pbx_8h_html_ae0ba2eb966a9e3376de61d30513f7302"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a></div><div class="ttdeci">int ast_async_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdoc">Set the channel to next execute the specified dialplan location. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07011">pbx.c:7011</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="channel_8h_html_adf593d68a333075c1fcae8a73b68c069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a></div><div class="ttdeci">const char * ast_channel_macrocontext(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00362">channel_internal_api.c:362</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1dfff6a3d96254100e7fbc050fb9cc3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dfff6a3d96254100e7fbc050fb9cc3c">&#9670;&nbsp;</a></span>chan_pjsip_devicestate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_devicestate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called to get the device state of an endpoint. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">1174</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00903">ast_channel_snapshot_get_latest()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00056">AST_DEVICE_BUSY</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00058">AST_DEVICE_UNAVAILABLE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00636">ast_devstate_aggregate_add()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00630">ast_devstate_aggregate_init()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00663">ast_devstate_aggregate_result()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00383">ast_endpoint_get_resource()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00375">ast_endpoint_get_tech()</a>, <a class="el" href="../../d3/daf/stasis__endpoints_8c_source.html#l00341">ast_endpoint_latest_snapshot()</a>, <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00055">AST_ENDPOINT_OFFLINE</a>, <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00057">AST_ENDPOINT_ONLINE</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01853">ast_sorcery_retrieve_by_id()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00043">AST_STATE_BUSY</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00242">ast_state_chan2dev()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01161">chan_pjsip_get_hold()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00232">ast_devstate_aggregate::inuse</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00153">ast_channel_snapshot::state</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, and <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;{</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *, endpoint, <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;endpoint&quot;</span>, data), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a> *, endpoint_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a> aggregate;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <span class="keywordtype">int</span> num, <a class="code" href="../../d6/d7f/structast__devstate__aggregate.html#a26d429b73a1efc8baa56293012f63bda">inuse</a> = 0;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   endpoint_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga83c4127a98da15ab67e85d7aeabdbfdf">ast_endpoint_latest_snapshot</a>(<a class="code" href="../../d4/d61/endpoints_8h.html#a1cf5032869657f115c3cf1303ef0fd0b">ast_endpoint_get_tech</a>(endpoint-&gt;persistent),</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="../../d4/d61/endpoints_8h.html#afa1641cd83857e47418009992cb2de6f">ast_endpoint_get_resource</a>(endpoint-&gt;persistent));</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <span class="keywordflow">if</span> (!endpoint_snapshot) {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keywordflow">if</span> (endpoint_snapshot-&gt;state == <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea0c201502490a90f732b9946dc7545114">AST_ENDPOINT_OFFLINE</a>) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      state = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (endpoint_snapshot-&gt;state == <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea18800ee482eac39e9d235ddd357b9de3">AST_ENDPOINT_ONLINE</a>) {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      state = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   }</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <span class="keywordflow">if</span> (!endpoint_snapshot-&gt;num_channels) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a65ebe8f28497b09769ab9edeb4eb9b86">ast_devstate_aggregate_init</a>(&amp;aggregate);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="keywordflow">for</span> (num = 0; num &lt; endpoint_snapshot-&gt;num_channels; num++) {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *snapshot;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(endpoint_snapshot-&gt;channel_ids[num]);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      }</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac53d9cae0b1765204cfffb397954775b">chan_pjsip_get_hold</a>(snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a>(&amp;aggregate, <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a>(&amp;aggregate, <a class="code" href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a>(snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a>));</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="keywordflow">if</span> ((snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) || (snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) ||</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;         (snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a>)) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;         inuse++;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot, -1);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keywordflow">if</span> (endpoint-&gt;devicestate_busy_at &amp;&amp; (inuse == endpoint-&gt;devicestate_busy_at)) {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      state = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/da2/devicestate_8h.html#a852d7e936d4385c3bb903812de5d6403">ast_devstate_aggregate_result</a>(&amp;aggregate) != <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>) {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      state = <a class="code" href="../../da/da2/devicestate_8h.html#a852d7e936d4385c3bb903812de5d6403">ast_devstate_aggregate_result</a>(&amp;aggregate);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="endpoints_8h_html_a1cf5032869657f115c3cf1303ef0fd0b"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a1cf5032869657f115c3cf1303ef0fd0b">ast_endpoint_get_tech</a></div><div class="ttdeci">const char * ast_endpoint_get_tech(const struct ast_endpoint *endpoint)</div><div class="ttdoc">Gets the technology of the given endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00375">main/endpoints.c:375</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga83c4127a98da15ab67e85d7aeabdbfdf"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga83c4127a98da15ab67e85d7aeabdbfdf">ast_endpoint_latest_snapshot</a></div><div class="ttdeci">struct ast_endpoint_snapshot * ast_endpoint_latest_snapshot(const char *tech, const char *resource)</div><div class="ttdoc">Retrieve the most recent snapshot for the endpoint with the given name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/daf/stasis__endpoints_8c_source.html#l00341">stasis_endpoints.c:341</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="endpoints_8h_html_afa1641cd83857e47418009992cb2de6f"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#afa1641cd83857e47418009992cb2de6f">ast_endpoint_get_resource</a></div><div class="ttdeci">const char * ast_endpoint_get_resource(const struct ast_endpoint *endpoint)</div><div class="ttdoc">Gets the resource name of the given endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00383">main/endpoints.c:383</a></div></div>
<div class="ttc" id="devicestate_8h_html_a852d7e936d4385c3bb903812de5d6403"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a852d7e936d4385c3bb903812de5d6403">ast_devstate_aggregate_result</a></div><div class="ttdeci">enum ast_device_state ast_devstate_aggregate_result(struct ast_devstate_aggregate *agg)</div><div class="ttdoc">Get the aggregate device state result. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00663">devicestate.c:663</a></div></div>
<div class="ttc" id="sorcery_8h_html_a100106a82d72aa59a66513ef3ad161c8"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a></div><div class="ttdeci">void * ast_sorcery_retrieve_by_id(const struct ast_sorcery *sorcery, const char *type, const char *id)</div><div class="ttdoc">Retrieve an object using its unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01853">sorcery.c:1853</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="devicestate_8h_html_a8e0c5acc035f43741343b8ed2fcb14ea"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a8e0c5acc035f43741343b8ed2fcb14ea">ast_state_chan2dev</a></div><div class="ttdeci">enum ast_device_state ast_state_chan2dev(enum ast_channel_state chanstate)</div><div class="ttdoc">Convert channel state to devicestate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00242">devicestate.c:242</a></div></div>
<div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea18800ee482eac39e9d235ddd357b9de3"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea18800ee482eac39e9d235ddd357b9de3">AST_ENDPOINT_ONLINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00057">endpoints.h:57</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="structast__endpoint__snapshot_html"><div class="ttname"><a href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a></div><div class="ttdoc">A snapshot of an endpoint&amp;#39;s state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d44/stasis__endpoints_8h_source.html#l00048">stasis_endpoints.h:48</a></div></div>
<div class="ttc" id="devicestate_8h_html_a45534707838d05125f409430b371854a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a45534707838d05125f409430b371854a">ast_devstate_aggregate_add</a></div><div class="ttdeci">void ast_devstate_aggregate_add(struct ast_devstate_aggregate *agg, enum ast_device_state state)</div><div class="ttdoc">Add a device state to the aggregate device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00636">devicestate.c:636</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeab43afabf5bcd4ad1f531ad78c48ccb6f">AST_DEVICE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00056">devicestate.h:56</a></div></div>
<div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea0c201502490a90f732b9946dc7545114"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea0c201502490a90f732b9946dc7545114">AST_ENDPOINT_OFFLINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00055">endpoints.h:55</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ac53d9cae0b1765204cfffb397954775b"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ac53d9cae0b1765204cfffb397954775b">chan_pjsip_get_hold</a></div><div class="ttdeci">static int chan_pjsip_get_hold(const char *chan_uid)</div><div class="ttdoc">Determine whether a channel ID is in the list of PJSIP channels on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01161">chan_pjsip.c:1161</a></div></div>
<div class="ttc" id="devicestate_8h_html_a65ebe8f28497b09769ab9edeb4eb9b86"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a65ebe8f28497b09769ab9edeb4eb9b86">ast_devstate_aggregate_init</a></div><div class="ttdeci">void ast_devstate_aggregate_init(struct ast_devstate_aggregate *agg)</div><div class="ttdoc">Initialize aggregate device state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00630">devicestate.c:630</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab772a54f7effa7ab06616e36ae30988a"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab772a54f7effa7ab06616e36ae30988a">ast_channel_snapshot::state</a></div><div class="ttdeci">enum ast_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00153">stasis_channels.h:153</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00043">channelstate.h:43</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__devstate__aggregate_html"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html">ast_devstate_aggregate</a></div><div class="ttdoc">You shouldn&amp;#39;t care about the contents of this struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00230">devicestate.h:230</a></div></div>
<div class="ttc" id="structast__devstate__aggregate_html_a26d429b73a1efc8baa56293012f63bda"><div class="ttname"><a href="../../d6/d7f/structast__devstate__aggregate.html#a26d429b73a1efc8baa56293012f63bda">ast_devstate_aggregate::inuse</a></div><div class="ttdeci">unsigned int inuse</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00232">devicestate.h:232</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a826ce6596ff4cdb76d1339beb54f53b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a826ce6596ff4cdb76d1339beb54f53b6">&#9670;&nbsp;</a></span>chan_pjsip_digit_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_digit_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to start a DTMF digit. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02150">2150</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00154">AST_RTP_DTMF_MODE_INBAND</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00150">AST_RTP_DTMF_MODE_NONE</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02081">ast_rtp_instance_dtmf_begin()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02137">ast_rtp_instance_dtmf_mode_get()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00415">AST_SIP_DTMF_INBAND</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00410">AST_SIP_DTMF_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00413">AST_SIP_DTMF_RFC_4733</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">ast_sip_session::dtmf</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;{</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   media = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>];</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <span class="keywordflow">switch</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a>) {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a>:</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a>:</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a>) {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      }</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>:</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> || (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14">AST_RTP_DTMF_MODE_NONE</a>)) {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      }</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a>:</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a>:</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00415">res_pjsip.h:415</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00154">rtp_engine.h:154</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__sip__session_html_abb7c899dc9afe319240163be2b213813"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">ast_sip_session::dtmf</a></div><div class="ttdeci">enum ast_sip_dtmf_mode dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">res_pjsip_session.h:233</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a60d6422d11e8d18f20596a91988d9275"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a60d6422d11e8d18f20596a91988d9275">ast_rtp_instance_dtmf_begin</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_begin(struct ast_rtp_instance *instance, char digit)</div><div class="ttdoc">Begin sending a DTMF digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02081">rtp_engine.c:2081</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14">AST_RTP_DTMF_MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00150">rtp_engine.h:150</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00413">res_pjsip.h:413</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0cff5eb6a29ecb54fe5589a48556bfac"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a></div><div class="ttdeci">enum ast_rtp_dtmf_mode ast_rtp_instance_dtmf_mode_get(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the DTMF mode of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02137">rtp_engine.c:2137</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00410">res_pjsip.h:410</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec30dd0009af850b0ee91e879d690576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec30dd0009af850b0ee91e879d690576">&#9670;&nbsp;</a></span>chan_pjsip_digit_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_digit_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to stop a DTMF digit. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02262">2262</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00154">AST_RTP_DTMF_MODE_INBAND</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00150">AST_RTP_DTMF_MODE_NONE</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02109">ast_rtp_instance_dtmf_end_with_duration()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02137">ast_rtp_instance_dtmf_mode_get()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00415">AST_SIP_DTMF_INBAND</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00417">AST_SIP_DTMF_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00410">AST_SIP_DTMF_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00413">AST_SIP_DTMF_RFC_4733</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">ast_sip_session::dtmf</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02205">info_dtmf_data_alloc()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02218">transmit_info_dtmf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;{</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   <span class="keywordflow">if</span> (!channel || !channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <span class="comment">/* This happens when the channel is hungup while a DTMF digit is playing. See ASTERISK-28086 */</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel %s disappeared while calling digit_end\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;   media = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>];</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   <span class="keywordflow">switch</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">dtmf</a>) {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>:</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   {</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      }</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14">AST_RTP_DTMF_MODE_NONE</a>) {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Told to send end of digit on Auto-Info channel %s RFC4733 negotiated so using it.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80e371ebfcc32d8af17f6312ebe72567">ast_rtp_instance_dtmf_end_with_duration</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, duration);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="comment">/* If RFC_4733 was not negotiated, fail through to the DTMF_INFO processing */</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Told to send end of digit on Auto-Info channel %s RFC4733 NOT negotiated using INFO instead.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   }</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d">AST_SIP_DTMF_INFO</a>:</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   {</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a> *dtmf_data = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#abd7da40b4cb4876eb0098dfff983d661">info_dtmf_data_alloc</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a>);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <span class="keywordflow">if</span> (!dtmf_data) {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      }</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab9359cca96e970cfc8a30a625885115b">transmit_info_dtmf</a>, dtmf_data)) {</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error sending DTMF via INFO.\n&quot;</span>);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(dtmf_data);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      }</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a>:</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      }</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80e371ebfcc32d8af17f6312ebe72567">ast_rtp_instance_dtmf_end_with_duration</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a>);</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a>:</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      }</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) == <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a>) {</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;          <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a80e371ebfcc32d8af17f6312ebe72567">ast_rtp_instance_dtmf_end_with_duration</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a>);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a>:</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a>:</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d">AST_SIP_DTMF_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00417">res_pjsip.h:417</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html_a095ceb846c8c874cd3fcc5cdaf6ade81"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">info_dtmf_data::duration</a></div><div class="ttdeci">unsigned int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02196">chan_pjsip.c:2196</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00415">res_pjsip.h:415</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eea6fdbcc4d7df24cf9108a3f06bc771e83">AST_RTP_DTMF_MODE_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00154">rtp_engine.h:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02193">chan_pjsip.c:2193</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab9359cca96e970cfc8a30a625885115b"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab9359cca96e970cfc8a30a625885115b">transmit_info_dtmf</a></div><div class="ttdeci">static int transmit_info_dtmf(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02218">chan_pjsip.c:2218</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__sip__session_html_abb7c899dc9afe319240163be2b213813"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#abb7c899dc9afe319240163be2b213813">ast_sip_session::dtmf</a></div><div class="ttdeci">enum ast_sip_dtmf_mode dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00233">res_pjsip_session.h:233</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_abd7da40b4cb4876eb0098dfff983d661"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#abd7da40b4cb4876eb0098dfff983d661">info_dtmf_data_alloc</a></div><div class="ttdeci">static struct info_dtmf_data * info_dtmf_data_alloc(struct ast_sip_session *session, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02205">chan_pjsip.c:2205</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3054d1eb4ca6e3e9bfd97bc54ff6e6eeac94ec266b1a57ac6e4001a3e79e02f14">AST_RTP_DTMF_MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00150">rtp_engine.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00413">res_pjsip.h:413</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0cff5eb6a29ecb54fe5589a48556bfac"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0cff5eb6a29ecb54fe5589a48556bfac">ast_rtp_instance_dtmf_mode_get</a></div><div class="ttdeci">enum ast_rtp_dtmf_mode ast_rtp_instance_dtmf_mode_get(struct ast_rtp_instance *instance)</div><div class="ttdoc">Get the DTMF mode of an RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02137">rtp_engine.c:2137</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00410">res_pjsip.h:410</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a80e371ebfcc32d8af17f6312ebe72567"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a80e371ebfcc32d8af17f6312ebe72567">ast_rtp_instance_dtmf_end_with_duration</a></div><div class="ttdeci">int ast_rtp_instance_dtmf_end_with_duration(struct ast_rtp_instance *instance, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02109">rtp_engine.c:2109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2d300a78737db2b81232c2f5a065391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d300a78737db2b81232c2f5a065391">&#9670;&nbsp;</a></span>chan_pjsip_fixup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_fixup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>oldchan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>newchan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to change the underlying owner channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01045">1045</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00494">set_channel_on_rtp_instance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;{</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(newchan);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   <span class="keywordflow">if</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a> != oldchan) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">    * The masquerade has suspended the channel&#39;s session</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">    * serializer so we can safely change it outside of</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">    * the serializer thread.</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a> = newchan;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(newchan));</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a78e2ade62c8bb21a578778fe8f416d88"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a></div><div class="ttdeci">static void set_channel_on_rtp_instance(const struct ast_sip_session *session, const char *channel_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00494">chan_pjsip.c:494</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1076eb4d606facf4eed3a5b4f4d254e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1076eb4d606facf4eed3a5b4f4d254e9">&#9670;&nbsp;</a></span>chan_pjsip_get_codec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_get_codec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by RTP engine to get peer capabilities. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00244">244</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00854">SCOPE_EXIT_RTN</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s Native formats %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan), &amp;STR_TMP)));</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(result, <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan), <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div><div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="logger_8h_html_a519e9e626663d0bf89c04738e0353a9d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN(...)</div><div class="ttdoc">Scope Exit with return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00854">logger.h:854</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac53d9cae0b1765204cfffb397954775b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac53d9cae0b1765204cfffb397954775b">&#9670;&nbsp;</a></span>chan_pjsip_get_hold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_get_hold </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>chan_uid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether a channel ID is in the list of PJSIP channels on hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan_uid</td><td>- Channel being checked</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The channel is not in the hold list </td></tr>
    <tr><td class="paramname">1</td><td>The channel is in the hold list </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01161">1161</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;{</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, hold_uid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   hold_uid = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a>, chan_uid, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keywordflow">if</span> (!hold_uid) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6ab56a6616234005e8d75b380aceddf0"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a></div><div class="ttdeci">static struct ao2_container * pjsip_uids_onhold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01107">chan_pjsip.c:1107</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a589e3c9b959ee5e4024ae3a66a4a623b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a589e3c9b959ee5e4024ae3a66a4a623b">&#9670;&nbsp;</a></span>chan_pjsip_get_rtp_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> chan_pjsip_get_rtp_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by RTP engine to get local audio RTP peer. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00171">171</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00160">AST_RTP_GLUE_RESULT_FORBID</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00164">AST_RTP_GLUE_RESULT_LOCAL</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00162">AST_RTP_GLUE_RESULT_REMOTE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01285">ast_sip_session_get_datastore()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00766">ast_sip_endpoint_media_configuration::direct_media</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00731">ast_sip_direct_media_configuration::enabled</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00711">ast_sip_media_rtp_configuration::encryption</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;{</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keywordflow">if</span> (!channel || !channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="comment">/* XXX Getting the first RTP instance for direct media related stuff seems just</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">    * absolutely wrong. But the native RTP bridge knows no other method than single-stream</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    * for direct media. So this is the best we can do.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   media = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>];</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   datastore = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a0b6e787aa2429e93f12e7be624ec3970">ast_sip_session_get_datastore</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, <span class="stringliteral">&quot;t38&quot;</span>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">if</span> (datastore) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(datastore, -1);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   endpoint = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   *instance = media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(*instance, +1);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">if</span> (endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a> != <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8">AST_RTP_GLUE_RESULT_LOCAL</a>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca08fec5e751b8194dd415a96306f16ff2">AST_RTP_GLUE_RESULT_REMOTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00162">rtp_engine.h:162</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a9eb74cd83f19dba0d41c5fbfc6e30f39"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">ast_sip_endpoint_media_configuration::direct_media</a></div><div class="ttdeci">struct ast_sip_direct_media_configuration direct_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00766">res_pjsip.h:766</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a0b6e787aa2429e93f12e7be624ec3970"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a0b6e787aa2429e93f12e7be624ec3970">ast_sip_session_get_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_session_get_datastore(struct ast_sip_session *session, const char *name)</div><div class="ttdoc">Retrieve a session datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01285">res_pjsip_session.c:1285</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_media_rtp_configuration::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00711">res_pjsip.h:711</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00160">rtp_engine.h:160</a></div></div>
<div class="ttc" id="structast__sip__direct__media__configuration_html_a63be54a0beac1f5717217e1d9e629c71"><div class="ttname"><a href="../../d0/d9d/structast__sip__direct__media__configuration.html#a63be54a0beac1f5717217e1d9e629c71">ast_sip_direct_media_configuration::enabled</a></div><div class="ttdeci">unsigned int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00731">res_pjsip.h:731</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8">AST_RTP_GLUE_RESULT_LOCAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00164">rtp_engine.h:164</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf07b154e3a00f125658f0ce0995c540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf07b154e3a00f125658f0ce0995c540">&#9670;&nbsp;</a></span>chan_pjsip_get_uniqueid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * chan_pjsip_get_uniqueid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01278">1278</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00076">UNIQUEID_BUFSIZE</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00075">uniqueid_threadbuf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="keywordtype">char</span> *uniqueid = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#acf8c7e538ca5104ac27f05759c116281">uniqueid_threadbuf</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac97d1b33e74afa365e4bbc1de5effbc4">UNIQUEID_BUFSIZE</a>);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="keywordflow">if</span> (!uniqueid) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(uniqueid, &amp;channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg-&gt;call_id-&gt;id, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac97d1b33e74afa365e4bbc1de5effbc4">UNIQUEID_BUFSIZE</a>);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordflow">return</span> uniqueid;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ac97d1b33e74afa365e4bbc1de5effbc4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ac97d1b33e74afa365e4bbc1de5effbc4">UNIQUEID_BUFSIZE</a></div><div class="ttdeci">#define UNIQUEID_BUFSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00076">chan_pjsip.c:76</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_acf8c7e538ca5104ac27f05759c116281"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#acf8c7e538ca5104ac27f05759c116281">uniqueid_threadbuf</a></div><div class="ttdeci">static struct ast_threadstorage uniqueid_threadbuf</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00075">chan_pjsip.c:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa61a4a471cbeada2cc3f741da4d1a36e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa61a4a471cbeada2cc3f741da4d1a36e">&#9670;&nbsp;</a></span>chan_pjsip_get_vrtp_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054c">ast_rtp_glue_result</a> chan_pjsip_get_vrtp_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> **&#160;</td>
          <td class="paramname"><em>instance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by RTP engine to get local video RTP peer. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00215">215</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00160">AST_RTP_GLUE_RESULT_FORBID</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00164">AST_RTP_GLUE_RESULT_LOCAL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00508">AST_SIP_MEDIA_ENCRYPT_NONE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00711">ast_sip_media_rtp_configuration::encryption</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00764">ast_sip_endpoint_media_configuration::rtp</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">if</span> (!channel || !channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   media = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>];</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">if</span> (!media || !media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   endpoint = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   *instance = media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(*instance, +1);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">if</span> (endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">rtp</a>.<a class="code" href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">encryption</a> != <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a>) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8">AST_RTP_GLUE_RESULT_LOCAL</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a0728d28b6a031937ed2546296d430561"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a0728d28b6a031937ed2546296d430561">ast_sip_endpoint_media_configuration::rtp</a></div><div class="ttdeci">struct ast_sip_media_rtp_configuration rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00764">res_pjsip.h:764</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="structast__sip__media__rtp__configuration_html_a947ba038dc2e3de1a3d4ce24e88da1d4"><div class="ttname"><a href="../../dd/d14/structast__sip__media__rtp__configuration.html#a947ba038dc2e3de1a3d4ce24e88da1d4">ast_sip_media_rtp_configuration::encryption</a></div><div class="ttdeci">enum ast_sip_session_media_encryption encryption</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00711">res_pjsip.h:711</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca6b70d26095905cd6bd5ddffc01d81843">AST_RTP_GLUE_RESULT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00160">rtp_engine.h:160</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a4f2fb6c08b3697d011cf613c8b68054ca06df52d7b998aec9a879a1a53624c5e8">AST_RTP_GLUE_RESULT_LOCAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00164">rtp_engine.h:164</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a51357a376c62c160570d55f2aeb4a340ab12297b14ec910b415ada33cc9320f6f">AST_SIP_MEDIA_ENCRYPT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00508">res_pjsip.h:508</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a518526bd2926d1516d1ee6dbb0b8b37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a518526bd2926d1516d1ee6dbb0b8b37d">&#9670;&nbsp;</a></span>chan_pjsip_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to hang up a PJSIP session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02516">2516</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00427">ast_channel_hangupcause()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02476">clear_session_and_channel()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02483">hangup()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02402">hangup_cause2sip()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02461">hangup_data_alloc()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;{</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   <span class="keywordtype">int</span> cause;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *h_data;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;   <span class="keywordflow">if</span> (!channel || !channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>) {</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;No channel or session\n&quot;</span>);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   }</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   cause = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a1292b93a988ad0404f70650091708ad4">hangup_cause2sip</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;   h_data = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9c23fd76c1946c0423cd731b8657fe3a">hangup_data_alloc</a>(cause, ast);</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   <span class="keywordflow">if</span> (!h_data) {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="keywordflow">goto</span> failure;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   }</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a>, h_data)) {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to push hangup task to the threadpool. Expect bad things\n&quot;</span>);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      <span class="keywordflow">goto</span> failure;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;   }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Cause: %d\n&quot;</span>, cause);</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;failure:</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   <span class="comment">/* Go ahead and do our cleanup of the session and channel even if we&#39;re not going</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="comment">    * to be able to send our SIP request/response</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a2634467e221b7d62bf172d824fcb43a4">clear_session_and_channel</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, ast);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(channel);</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(h_data);</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Cause: %d\n&quot;</span>, cause);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a1292b93a988ad0404f70650091708ad4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a1292b93a988ad0404f70650091708ad4">hangup_cause2sip</a></div><div class="ttdeci">static int hangup_cause2sip(int cause)</div><div class="ttdoc">Internal function which translates from Asterisk cause codes to SIP response codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02402">chan_pjsip.c:2402</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aae28b3b590d6f2c84e472625c81ae2bb"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a></div><div class="ttdeci">static int hangup(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02483">chan_pjsip.c:2483</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="structhangup__data_html"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html">hangup_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01113">app_confbridge.c:1113</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9c23fd76c1946c0423cd731b8657fe3a"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9c23fd76c1946c0423cd731b8657fe3a">hangup_data_alloc</a></div><div class="ttdeci">static struct hangup_data * hangup_data_alloc(int cause, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02461">chan_pjsip.c:2461</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_aa04afa262d7e1b211ee32d17c949a275"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a></div><div class="ttdeci">int ast_channel_hangupcause(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00427">channel_internal_api.c:427</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__pjsip_8c_html_a2634467e221b7d62bf172d824fcb43a4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a2634467e221b7d62bf172d824fcb43a4">clear_session_and_channel</a></div><div class="ttdeci">static void clear_session_and_channel(struct ast_sip_session *session, struct ast_channel *ast)</div><div class="ttdoc">Clear a channel from a session along with its PVT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02476">chan_pjsip.c:2476</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a063c3c49b5a808d76b74850a0c355d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063c3c49b5a808d76b74850a0c355d36">&#9670;&nbsp;</a></span>chan_pjsip_incoming_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_incoming_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03241">3241</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00692">ast_trace</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00766">ast_sip_endpoint_media_configuration::direct_media</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00731">ast_sip_direct_media_configuration::enabled</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>.</p>
<div class="fragment"><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;{</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;msg_info.msg-&gt;line.req.method.id == PJSIP_ACK_METHOD) {</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a> &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Queueing SRCCHANGE\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>);</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      }</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;   }</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="logger_8h_html_ac300475e729a060042d5fae346e6d966"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a></div><div class="ttdeci">#define ast_trace(level,...)</div><div class="ttdoc">Print a basic trace message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00692">logger.h:692</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a9eb74cd83f19dba0d41c5fbfc6e30f39"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">ast_sip_endpoint_media_configuration::direct_media</a></div><div class="ttdeci">struct ast_sip_direct_media_configuration direct_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00766">res_pjsip.h:766</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structast__sip__direct__media__configuration_html_a63be54a0beac1f5717217e1d9e629c71"><div class="ttname"><a href="../../d0/d9d/structast__sip__direct__media__configuration.html#a63be54a0beac1f5717217e1d9e629c71">ast_sip_direct_media_configuration::enabled</a></div><div class="ttdeci">unsigned int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00731">res_pjsip.h:731</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73521fa058d52158d69b81c7c1479d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73521fa058d52158d69b81c7c1479d21">&#9670;&nbsp;</a></span>chan_pjsip_incoming_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_incoming_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called when a request is received on the session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03007">3007</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01273">ast_sip_session_add_datastore()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01243">ast_sip_session_alloc_datastore()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">ast_sip_session_send_response()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03451">ast_sip_session_terminate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00215">ast_sip_session::defer_terminate</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00181">ast_sip_session::exten</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d81/chan__pjsip_8h_source.html#l00034">transport_info_data::local_addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d1/d81/chan__pjsip_8h_source.html#l00032">transport_info_data::remote_addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00940">SCOPE_EXIT_LOG_RTN_VALUE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02994">set_sipdomain_variable()</a>.</p>
<div class="fragment"><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;{</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *, datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d57/structtransport__info__data.html">transport_info_data</a> *transport_data;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   pjsip_tx_data *packet = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s: No channel\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   }</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   <span class="comment">/* Check for a to-tag to determine if this is a reinvite */</span></div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;msg_info.to-&gt;tag.slen) {</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      <span class="comment">/* Weird case. We&#39;ve received a reinvite but we don&#39;t have a channel. The most</span></div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="comment">       * typical case for this happening is that a blind transfer fails, and so the</span></div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="comment">       * transferer attempts to reinvite himself back into the call. We already got</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="comment">       * rid of that channel, and the other side of the call is unrecoverable.</span></div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;<span class="comment">       * We treat this as a failure, so our best bet is to just hang this call</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="comment">       * up and not create a new channel. Clearing defer_terminate here ensures that</span></div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;<span class="comment">       * calling ast_sip_session_terminate() can result in a BYE being sent ASAP.</span></div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a52a2a3cbcab65965d83205363c8f09d1">defer_terminate</a> = 0;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ac548e363175ba43f7ad75438729deac3">ast_sip_session_terminate</a>(session, 400);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;%s: We have a To tag but no channel.  Terminating session\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;   }</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;   datastore = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a28af3f44693710b56fb141c509a5eb9d">ast_sip_session_alloc_datastore</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a1110e321d34ddd45dd93c2217aa8cca7">transport_info</a>, <span class="stringliteral">&quot;transport_info&quot;</span>);</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a5eff4ad268db72883e5e152070c3583f">SCOPE_EXIT_LOG_RTN_VALUE</a>(-1, <a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s: Couldn&#39;t alloc transport_info datastore\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;   }</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   transport_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*transport_data));</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;   <span class="keywordflow">if</span> (!transport_data) {</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a5eff4ad268db72883e5e152070c3583f">SCOPE_EXIT_LOG_RTN_VALUE</a>(-1, <a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s: Couldn&#39;t alloc transport_info\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;   }</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;   pj_sockaddr_cp(&amp;transport_data-&gt;<a class="code" href="../../df/d57/structtransport__info__data.html#a06bfd34fc10a74244c0baac122d9593d">local_addr</a>, &amp;rdata-&gt;tp_info.transport-&gt;local_addr);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;   pj_sockaddr_cp(&amp;transport_data-&gt;<a class="code" href="../../df/d57/structtransport__info__data.html#ae517d1b7f4c2ccab24ce34ad3f6359e6">remote_addr</a>, &amp;rdata-&gt;pkt_info.src_addr);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   datastore-&gt;data = transport_data;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a6d3bc4b6c4bdd1a98347a2b33a35b517">ast_sip_session_add_datastore</a>(session, datastore);</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;   <span class="keywordflow">if</span> (!(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a> = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">chan_pjsip_new</a>(session, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      <span class="keywordflow">if</span> (pjsip_inv_end_session(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>, 503, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;packet) == PJ_SUCCESS</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;         &amp;&amp; packet) {</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;         <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a>(session, packet);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      }</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a5eff4ad268db72883e5e152070c3583f">SCOPE_EXIT_LOG_RTN_VALUE</a>(-1, <a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s: Failed to allocate new PJSIP channel on incoming SIP INVITE\n&quot;</span>,</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;          <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   }</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#af11d3109da5cfcdcc3f5aa9df1bd8f3a">set_sipdomain_variable</a>(session);</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   <span class="comment">/* channel gets created on incoming request, but we wait to call start</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment">           so other supplements have a chance to run */</span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;}</div><div class="ttc" id="logger_8h_html_a5eff4ad268db72883e5e152070c3583f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a5eff4ad268db72883e5e152070c3583f">SCOPE_EXIT_LOG_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_LOG_RTN_VALUE(__value, __log_level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00940">logger.h:940</a></div></div>
<div class="ttc" id="structtransport__info__data_html_a06bfd34fc10a74244c0baac122d9593d"><div class="ttname"><a href="../../df/d57/structtransport__info__data.html#a06bfd34fc10a74244c0baac122d9593d">transport_info_data::local_addr</a></div><div class="ttdeci">pj_sockaddr local_addr</div><div class="ttdoc">Our address that received the request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d81/chan__pjsip_8h_source.html#l00034">chan_pjsip.h:34</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ac548e363175ba43f7ad75438729deac3"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ac548e363175ba43f7ad75438729deac3">ast_sip_session_terminate</a></div><div class="ttdeci">void ast_sip_session_terminate(struct ast_sip_session *session, int response)</div><div class="ttdoc">Terminate a session and, if possible, send the provided response code. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l03451">res_pjsip_session.c:3451</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="structast__sip__session_html_a52a2a3cbcab65965d83205363c8f09d1"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a52a2a3cbcab65965d83205363c8f09d1">ast_sip_session::defer_terminate</a></div><div class="ttdeci">unsigned int defer_terminate</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00215">res_pjsip_session.h:215</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a1a0ae3dfd1f4dc4b4c6f277dd96c53ce"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">chan_pjsip_new</a></div><div class="ttdeci">static struct ast_channel * chan_pjsip_new(struct ast_sip_session *session, int state, const char *exten, const char *title, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *cid_name)</div><div class="ttdoc">Function called to create a new PJSIP Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip.c:547</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a1110e321d34ddd45dd93c2217aa8cca7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a1110e321d34ddd45dd93c2217aa8cca7">transport_info</a></div><div class="ttdeci">static struct ast_datastore_info transport_info</div><div class="ttdoc">Datastore used to store local/remote addresses for the INVITE request that created the PJSIP channel...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00261">chan_pjsip.c:261</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="structast__sip__session_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a78d4847658b695383d849efd12399b38">ast_sip_session::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00181">res_pjsip_session.h:181</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structtransport__info__data_html"><div class="ttname"><a href="../../df/d57/structtransport__info__data.html">transport_info_data</a></div><div class="ttdoc">Transport information stored in transport_info datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d81/chan__pjsip_8h_source.html#l00030">chan_pjsip.h:30</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a28af3f44693710b56fb141c509a5eb9d"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a28af3f44693710b56fb141c509a5eb9d">ast_sip_session_alloc_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_session_alloc_datastore(const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Alternative for ast_datastore_alloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01243">res_pjsip_session.c:1243</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aed4c9a6bf6967790981c02027f5f02e8"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a></div><div class="ttdeci">void ast_sip_session_send_response(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">res_pjsip_session.c:2576</a></div></div>
<div class="ttc" id="structtransport__info__data_html_ae517d1b7f4c2ccab24ce34ad3f6359e6"><div class="ttname"><a href="../../df/d57/structtransport__info__data.html#ae517d1b7f4c2ccab24ce34ad3f6359e6">transport_info_data::remote_addr</a></div><div class="ttdeci">pj_sockaddr remote_addr</div><div class="ttdoc">The address that sent the request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d81/chan__pjsip_8h_source.html#l00032">chan_pjsip.h:32</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_af11d3109da5cfcdcc3f5aa9df1bd8f3a"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#af11d3109da5cfcdcc3f5aa9df1bd8f3a">set_sipdomain_variable</a></div><div class="ttdeci">static void set_sipdomain_variable(struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02994">chan_pjsip.c:2994</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a6d3bc4b6c4bdd1a98347a2b33a35b517"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a6d3bc4b6c4bdd1a98347a2b33a35b517">ast_sip_session_add_datastore</a></div><div class="ttdeci">int ast_sip_session_add_datastore(struct ast_sip_session *session, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01273">res_pjsip_session.c:1273</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb80ce2ac4b98bbc6f6a00b587bd8f44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb80ce2ac4b98bbc6f6a00b587bd8f44">&#9670;&nbsp;</a></span>chan_pjsip_incoming_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_incoming_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called when a response is received on the session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03186">3186</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">AST_CONTROL_PROGRESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00692">ast_trace</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00901">ast_sip_endpoint::ignore_183_without_sdp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00854">SCOPE_EXIT_RTN</a>.</p>
<div class="fragment"><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;{</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;   <span class="keyword">struct </span>pjsip_status_line <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = rdata-&gt;msg_info.msg-&gt;line.status;</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s: Status: %d\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session), status.code);</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;%s: No channel\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   }</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;   <span class="keywordflow">switch</span> (status.code) {</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;   <span class="keywordflow">case</span> 180: {</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      pjsip_rdata_sdp_info *sdp = pjsip_rdata_get_sdp_info(rdata);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;      <span class="keywordflow">if</span> (sdp &amp;&amp; sdp-&gt;body.ptr) {</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Queueing PROGRESS\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Queueing RINGING\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;      }</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;         <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>);</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;      }</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;   }</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;   <span class="keywordflow">case</span> 183:</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aa7c8ac46035421bd05d6da1de39bc1bd">ignore_183_without_sdp</a>) {</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;         pjsip_rdata_sdp_info *sdp = pjsip_rdata_get_sdp_info(rdata);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;         <span class="keywordflow">if</span> (sdp &amp;&amp; sdp-&gt;body.ptr) {</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Queueing PROGRESS\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(1, <span class="stringliteral">&quot;%s Method: %.*s Status: %d  Queueing PROGRESS with SDP\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;               (<span class="keywordtype">int</span>)rdata-&gt;msg_info.cseq-&gt;method.name.slen, rdata-&gt;msg_info.cseq-&gt;method.name.ptr, status.code);</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>);</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;         }</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Queueing PROGRESS\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(1, <span class="stringliteral">&quot;%s Method: %.*s Status: %d  Queueing PROGRESS without SDP\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            (<span class="keywordtype">int</span>)rdata-&gt;msg_info.cseq-&gt;method.name.slen, rdata-&gt;msg_info.cseq-&gt;method.name.ptr, status.code);</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>);</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;      }</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;   <span class="keywordflow">case</span> 200:</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Queueing ANSWER\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>);</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: Not queueing anything\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;   }</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aa7c8ac46035421bd05d6da1de39bc1bd"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aa7c8ac46035421bd05d6da1de39bc1bd">ast_sip_endpoint::ignore_183_without_sdp</a></div><div class="ttdeci">unsigned int ignore_183_without_sdp</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00901">res_pjsip.h:901</a></div></div>
<div class="ttc" id="logger_8h_html_ac300475e729a060042d5fae346e6d966"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a></div><div class="ttdeci">#define ast_trace(level,...)</div><div class="ttdoc">Print a basic trace message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00692">logger.h:692</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a519e9e626663d0bf89c04738e0353a9d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN(...)</div><div class="ttdoc">Scope Exit with return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00854">logger.h:854</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6035cf33e963eec5c8bab098c09167c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6035cf33e963eec5c8bab098c09167c">&#9670;&nbsp;</a></span>chan_pjsip_incoming_response_update_cause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_incoming_response_update_cause </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called when a response is received on the session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03156">3156</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00416">ast_control_pvt_cause_code::ast_cause</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04391">ast_channel_hangupcause_hash_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00172">AST_CHANNEL_NAME</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">AST_CONTROL_PVT_CAUSE_CODE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01238">ast_queue_control_data()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00414">ast_control_pvt_cause_code::chan_name</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00417">ast_control_pvt_cause_code::code</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02860">hangup_sip2cause()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00854">SCOPE_EXIT_RTN</a>.</p>
<div class="fragment"><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;{</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;   <span class="keyword">struct </span>pjsip_status_line <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = rdata-&gt;msg_info.msg-&gt;line.status;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html">ast_control_pvt_cause_code</a> *cause_code;</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;   <span class="keywordtype">int</span> data_size = <span class="keyword">sizeof</span>(*cause_code);</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s: Status: %d\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session), status.code);</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;%s: No channel\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;   }</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   <span class="comment">/* Build and send the tech-specific cause information */</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;   <span class="comment">/* size of the string making up the cause code is &quot;SIP &quot; number + &quot; &quot; + reason length */</span></div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;   data_size += 4 + 4 + pj_strlen(&amp;status.reason);</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;   cause_code = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(data_size);</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   memset(cause_code, 0, data_size);</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a933d9bf113023b81a5bc4820f617c068">chan_name</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>), <a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>);</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   snprintf(cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a9f49ca84424b69a07af7d0d8c84e612f">code</a>, data_size - <span class="keyword">sizeof</span>(*cause_code) + 1, <span class="stringliteral">&quot;SIP %d %.*s&quot;</span>, status.code,</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   (<span class="keywordtype">int</span>) pj_strlen(&amp;status.reason), pj_strbuf(&amp;status.reason));</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a24429ec0f2cac0778a905f215a5e1d4e">ast_cause</a> = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a933506a953d4f1e0121c580c7d38007d">hangup_sip2cause</a>(status.code);</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>, cause_code, data_size);</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aace0c1f41b57a6599775d0f704234eaf">ast_channel_hangupcause_hash_set</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, cause_code, data_size);</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;}</div><div class="ttc" id="structast__control__pvt__cause__code_html_a933d9bf113023b81a5bc4820f617c068"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html#a933d9bf113023b81a5bc4820f617c068">ast_control_pvt_cause_code::chan_name</a></div><div class="ttdeci">char chan_name[AST_CHANNEL_NAME]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00414">include/asterisk/frame.h:414</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html_a24429ec0f2cac0778a905f215a5e1d4e"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html#a24429ec0f2cac0778a905f215a5e1d4e">ast_control_pvt_cause_code::ast_cause</a></div><div class="ttdeci">int ast_cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00416">include/asterisk/frame.h:416</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">include/asterisk/frame.h:310</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a933506a953d4f1e0121c580c7d38007d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a933506a953d4f1e0121c580c7d38007d">hangup_sip2cause</a></div><div class="ttdeci">static int hangup_sip2cause(int cause)</div><div class="ttdoc">Convert SIP hangup causes to Asterisk hangup causes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02860">chan_pjsip.c:2860</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html_a9f49ca84424b69a07af7d0d8c84e612f"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html#a9f49ca84424b69a07af7d0d8c84e612f">ast_control_pvt_cause_code::code</a></div><div class="ttdeci">char code[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00417">include/asterisk/frame.h:417</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a519e9e626663d0bf89c04738e0353a9d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN(...)</div><div class="ttdoc">Scope Exit with return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00854">logger.h:854</a></div></div>
<div class="ttc" id="channel_8h_html_ab57c278099ea5f8d7cedbb41eba58b56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a></div><div class="ttdeci">#define AST_CHANNEL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00172">channel.h:172</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html">ast_control_pvt_cause_code</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00413">include/asterisk/frame.h:413</a></div></div>
<div class="ttc" id="channel_8h_html_aace0c1f41b57a6599775d0f704234eaf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aace0c1f41b57a6599775d0f704234eaf">ast_channel_hangupcause_hash_set</a></div><div class="ttdeci">void ast_channel_hangupcause_hash_set(struct ast_channel *chan, const struct ast_control_pvt_cause_code *cause_code, int datalen)</div><div class="ttdoc">Sets the HANGUPCAUSE hash and optionally the SIP_CAUSE hash on the given channel. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04391">channel.c:4391</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50a839c044342df85af7494c553e36bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50a839c044342df85af7494c553e36bf">&#9670;&nbsp;</a></span>chan_pjsip_indicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_indicate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to ask the channel to indicate some sort of condition. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">1612</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10697">ast_channel_get_device_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">AST_CONTROL_CONGESTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">AST_CONTROL_CONNECTED_LINE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">AST_CONTROL_INCOMPLETE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">AST_CONTROL_MASQUERADE_NOTIFY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">AST_CONTROL_PROCEEDING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">AST_CONTROL_PROGRESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">AST_CONTROL_PVT_CAUSE_CODE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">AST_CONTROL_REDIRECTING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00312">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00314">AST_CONTROL_STREAM_TOPOLOGY_SOURCE_CHANGED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">AST_CONTROL_T38_PARAMETERS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">AST_CONTROL_UNHOLD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00309">AST_CONTROL_UPDATE_RTP_PEER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00061">AST_DEVICE_ONHOLD</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00471">ast_devstate_changed_literal()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00181">ast_format_h264</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00186">ast_format_h265</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00196">ast_format_vp8</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00201">ast_format_vp9</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00406">ast_frame_subclass2str()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07876">ast_moh_stop()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00568">ast_rtp_instance_write()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03155">ast_sip_session_suspend()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03200">ast_sip_session_unsuspend()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00376">AST_T38_REQUEST_PARMS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00692">ast_trace</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01117">chan_pjsip_add_hold()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01148">chan_pjsip_remove_hold()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01592">handle_topology_request_change()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00863">ast_sip_endpoint::inband_progress</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01333">indicate()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01308">indicate_data_alloc()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00231">ast_sip_session::moh_passthrough</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01500">remote_send_hold()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01506">remote_send_unhold()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">ast_control_t38_parameters::request_response</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00940">SCOPE_EXIT_LOG_RTN_VALUE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00668">T38_PEER_REINVITE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00221">ast_sip_session::t38state</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01351">transmit_info_with_vidupdate()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01429">update_connected_line_information()</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00794">ast_sip_endpoint_media_configuration::webrtc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;{</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="keywordtype">int</span> response_code = 0;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   <span class="keywordtype">char</span> *device_buf;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordtype">size_t</span> device_buf_size;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = {</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      .subclass = {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;         .integer = condition</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      },</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *)<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   };</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="keywordtype">char</span> condition_name[256];</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s: Indicated %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast),</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aebc6828be3067baa4073a9eeae6ff46c">ast_frame_subclass2str</a>(&amp;f, condition_name, <span class="keyword">sizeof</span>(condition_name), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0));</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   <span class="keywordflow">switch</span> (condition) {</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;         <span class="keywordflow">if</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aca51ad6cc12ba74967faa31fdc18cb53">inband_progress</a> ||</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a> &amp;&amp; channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg &amp;&amp;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            pjmedia_sdp_neg_get_state(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;neg) == PJMEDIA_SDP_NEG_STATE_DONE)) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            response_code = 183;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            res = -1;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            response_code = 180;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;         }</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;         res = -1;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      }</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;PJSIP/%s&quot;</span>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>));</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;         response_code = 486;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;         res = -1;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;         response_code = 503;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;         res = -1;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      }</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a>:</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;         response_code = 484;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;         res = -1;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      }</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;         response_code = 100;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;         res = -1;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;         response_code = 183;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;         res = -1;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      }</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;PJSIP/%s&quot;</span>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>));</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>:</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions); ++i) {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;         media = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions, i);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;         <span class="keywordflow">if</span> (!media || media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;         }</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;         <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            <span class="comment">/* FIXME: Only use this for VP8. Additional work would have to be done to</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment">             * fully support other video codecs */</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), <a class="code" href="../../db/d1c/format__cache_8h.html#af16d45fe2f99759edff3984706214752">ast_format_vp8</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a> ||</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;               <a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), <a class="code" href="../../db/d1c/format__cache_8h.html#ab67520222c2e1418df2d806e2184be22">ast_format_vp9</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a> ||</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;               <a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), <a class="code" href="../../db/d1c/format__cache_8h.html#a3b2199894b5adbf010e1b6a38dff5ba7">ast_format_h265</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a> ||</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;               (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">webrtc</a> &amp;&amp;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                <a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), <a class="code" href="../../db/d1c/format__cache_8h.html#a06f47624d806b644d86c3b2828eafdc1">ast_format_h264</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>)) {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;               <span class="comment">/* FIXME Fake RTP write, this will be sent as an RTCP packet. Ideally the</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">                * RTP engine would provide a way to externally write/schedule RTCP</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">                * packets */</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fr;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;               fr.subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;               res = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, &amp;fr);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, +1);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab34c7950a3f2ea45cda536ae6582a567">transmit_info_with_vidupdate</a>, channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>)) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                  <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;               }</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;AST_CONTROL_VIDUPDATE&quot;</span>, <span class="stringliteral">&quot;Result: Success&quot;</span>);</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;AST_CONTROL_VIDUPDATE&quot;</span>, <span class="stringliteral">&quot;Result: Failure&quot;</span>);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            res = -1;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;         }</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      }</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <span class="comment">/* XXX If there were no video streams, then this should set</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">       * res to -1</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, +1);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a22eb012ae61e28bc411003144c9adfd2">update_connected_line_information</a>, channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>)) {</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a>:</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      res = -1;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>:</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> == <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <span class="keywordflow">if</span> (*(<span class="keywordtype">int</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>) {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">          * Masquerade is beginning:</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">          * Wait for session serializer to get suspended.</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;         <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#af07a4b2b3de4cbbd66b09acb55ca3c5e">ast_sip_session_suspend</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">          * Masquerade is complete:</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">          * Unsuspend the session serializer.</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;         <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ac37f93342a3e8ca33fb4ca84d4ac3e58">ast_sip_session_unsuspend</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ae691fb7e6f52a68b5d7c4ca38e3067df">chan_pjsip_add_hold</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(ast));</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      device_buf_size = strlen(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast)) + 1;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      device_buf = alloca(device_buf_size);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1677fd1f6e2cab646aeb76db8a044c2e">ast_channel_get_device_name</a>(ast, device_buf, device_buf_size);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>, 1, device_buf);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <span class="keywordflow">if</span> (!channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a56458fcd1003f7554cee73c7f0346cbb">moh_passthrough</a>) {</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;         <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(ast, data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a696b86dd279517cbb99973a3470cc0c9">remote_send_hold</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>))) {</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not queue task to remotely put session &#39;%s&#39; on hold with endpoint &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;               <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>), <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>));</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, -1);</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;         }</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      }</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aab317669d5ea73707fe5724a2ba52c2e">chan_pjsip_remove_hold</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(ast));</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      device_buf_size = strlen(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast)) + 1;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      device_buf = alloca(device_buf_size);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1677fd1f6e2cab646aeb76db8a044c2e">ast_channel_get_device_name</a>(ast, device_buf, device_buf_size);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, 1, device_buf);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">if</span> (!channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a56458fcd1003f7554cee73c7f0346cbb">moh_passthrough</a>) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;         <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(ast);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a442f66f50441c8f6696d5fb1548ce055">remote_send_unhold</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>))) {</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not queue task to remotely take session &#39;%s&#39; off hold with endpoint &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;               <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>), <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>));</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, -1);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;         }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      }</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>:</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>:</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;         response_code = 181;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;         res = -1;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      }</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>:</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      res = 0;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <span class="keywordflow">if</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a455fb7bc2cb9f69b659e3ba4c4595c87">t38state</a> == <a class="code" href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1ca306c88a911bc77eaac89b4299d9da840">T38_PEER_REINVITE</a>) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;         <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a> *parameters = data;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;         <span class="keywordflow">if</span> (parameters-&gt;<a class="code" href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">request_response</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba6763b3f21dd07811168f6959ee2d2082">AST_T38_REQUEST_PARMS</a>) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            res = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba6763b3f21dd07811168f6959ee2d2082">AST_T38_REQUEST_PARMS</a>;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;         }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      }</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>:</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      topology = data;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(-1, <span class="stringliteral">&quot;%s: New topology: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast),</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(topology, &amp;STR_TMP)));</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      res = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a5267e04f3e504a11bfaf6abf8ce855cb">handle_topology_request_change</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, topology);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>:</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a">AST_CONTROL_STREAM_TOPOLOGY_SOURCE_CHANGED</a>:</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <span class="keywordflow">case</span> -1:</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      res = -1;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know how to indicate condition %d\n&quot;</span>, condition);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      res = -1;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   }</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <span class="keywordflow">if</span> (response_code) {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d92/structindicate__data.html">indicate_data</a> *ind_data = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac714053cdb838e3a0c6ef730eb243b6a">indicate_data_alloc</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, <a class="code" href="../../d2/d92/structindicate__data.html#a6dc6d201aaa7df9ea3e8b5247a639f16">condition</a>, response_code, data, <a class="code" href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">datalen</a>);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="keywordflow">if</span> (!ind_data) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a5eff4ad268db72883e5e152070c3583f">SCOPE_EXIT_LOG_RTN_VALUE</a>(-1, <a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s: Couldn&#39;t alloc indicate data\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a>, ind_data)) {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s: Cannot send response code %d to endpoint %s. Could not queue task properly\n&quot;</span>,</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), response_code, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>));</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ind_data);</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;         res = -1;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      }</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   }</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(res, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_a696b86dd279517cbb99973a3470cc0c9"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a696b86dd279517cbb99973a3470cc0c9">remote_send_hold</a></div><div class="ttdeci">static int remote_send_hold(void *data)</div><div class="ttdoc">Update local hold state to be held. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01500">chan_pjsip.c:1500</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_aa64681ccac6f69e15c21471249e68121"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#aa64681ccac6f69e15c21471249e68121">ast_sip_endpoint_media_configuration::webrtc</a></div><div class="ttdeci">unsigned int webrtc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00794">res_pjsip.h:794</a></div></div>
<div class="ttc" id="format__cache_8h_html_af16d45fe2f99759edff3984706214752"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#af16d45fe2f99759edff3984706214752">ast_format_vp8</a></div><div class="ttdeci">struct ast_format * ast_format_vp8</div><div class="ttdoc">Built-in cached vp8 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00196">format_cache.c:196</a></div></div>
<div class="ttc" id="logger_8h_html_a5eff4ad268db72883e5e152070c3583f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a5eff4ad268db72883e5e152070c3583f">SCOPE_EXIT_LOG_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_LOG_RTN_VALUE(__value, __log_level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00940">logger.h:940</a></div></div>
<div class="ttc" id="structast__sip__session_html_a455fb7bc2cb9f69b659e3ba4c4595c87"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a455fb7bc2cb9f69b659e3ba4c4595c87">ast_sip_session::t38state</a></div><div class="ttdeci">enum ast_sip_session_t38state t38state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00221">res_pjsip_session.h:221</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6613d45a04e74534bf7e318b2c71e077"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a></div><div class="ttdeci">static int indicate(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01333">chan_pjsip.c:1333</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structindicate__data_html"><div class="ttname"><a href="../../d2/d92/structindicate__data.html">indicate_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01292">chan_pjsip.c:1292</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab34c7950a3f2ea45cda536ae6582a567"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab34c7950a3f2ea45cda536ae6582a567">transmit_info_with_vidupdate</a></div><div class="ttdeci">static int transmit_info_with_vidupdate(void *data)</div><div class="ttdoc">Send SIP INFO with video update request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01351">chan_pjsip.c:1351</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ac37f93342a3e8ca33fb4ca84d4ac3e58"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ac37f93342a3e8ca33fb4ca84d4ac3e58">ast_sip_session_unsuspend</a></div><div class="ttdeci">void ast_sip_session_unsuspend(struct ast_sip_session *session)</div><div class="ttdoc">Request the session serializer be unsuspended. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l03200">res_pjsip_session.c:3200</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a442f66f50441c8f6696d5fb1548ce055"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a442f66f50441c8f6696d5fb1548ce055">remote_send_unhold</a></div><div class="ttdeci">static int remote_send_unhold(void *data)</div><div class="ttdoc">Update local hold state to be unheld. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01506">chan_pjsip.c:1506</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">include/asterisk/frame.h:311</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00397">include/asterisk/frame.h:397</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_af07a4b2b3de4cbbd66b09acb55ca3c5e"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#af07a4b2b3de4cbbd66b09acb55ca3c5e">ast_sip_session_suspend</a></div><div class="ttdeci">void ast_sip_session_suspend(struct ast_sip_session *session)</div><div class="ttdoc">Request and wait for the session serializer to be suspended. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l03155">res_pjsip_session.c:3155</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="sip_8h_html_ada584ef2e7f77c8dfe0315d05fa49e1ca306c88a911bc77eaac89b4299d9da840"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1ca306c88a911bc77eaac89b4299d9da840">T38_PEER_REINVITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00668">sip.h:668</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ae691fb7e6f52a68b5d7c4ca38e3067df"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ae691fb7e6f52a68b5d7c4ca38e3067df">chan_pjsip_add_hold</a></div><div class="ttdeci">static int chan_pjsip_add_hold(const char *chan_uid)</div><div class="ttdoc">Add a channel ID to the list of PJSIP channels on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01117">chan_pjsip.c:1117</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a87cb097a21ab7712c27aa9e3b3a1ef69"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a87cb097a21ab7712c27aa9e3b3a1ef69">ast_rtp_instance_write</a></div><div class="ttdeci">int ast_rtp_instance_write(struct ast_rtp_instance *instance, struct ast_frame *frame)</div><div class="ttdoc">Send a frame out over RTP. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00568">rtp_engine.c:568</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ac714053cdb838e3a0c6ef730eb243b6a"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ac714053cdb838e3a0c6ef730eb243b6a">indicate_data_alloc</a></div><div class="ttdeci">static struct indicate_data * indicate_data_alloc(struct ast_sip_session *session, int condition, int response_code, const void *frame_data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01308">chan_pjsip.c:1308</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html_adb36822366e10ce64ca8337c512732a6"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">ast_control_t38_parameters::request_response</a></div><div class="ttdeci">enum ast_control_t38 request_response</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">include/asterisk/frame.h:398</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4ba6763b3f21dd07811168f6959ee2d2082"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba6763b3f21dd07811168f6959ee2d2082">AST_T38_REQUEST_PARMS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00376">include/asterisk/frame.h:376</a></div></div>
<div class="ttc" id="logger_8h_html_ac300475e729a060042d5fae346e6d966"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a></div><div class="ttdeci">#define ast_trace(level,...)</div><div class="ttdoc">Print a basic trace message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00692">logger.h:692</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">include/asterisk/frame.h:300</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">include/asterisk/frame.h:310</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aca51ad6cc12ba74967faa31fdc18cb53"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aca51ad6cc12ba74967faa31fdc18cb53">ast_sip_endpoint::inband_progress</a></div><div class="ttdeci">unsigned int inband_progress</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00863">res_pjsip.h:863</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aab317669d5ea73707fe5724a2ba52c2e"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aab317669d5ea73707fe5724a2ba52c2e">chan_pjsip_remove_hold</a></div><div class="ttdeci">static void chan_pjsip_remove_hold(const char *chan_uid)</div><div class="ttdoc">Remove a channel ID from the list of PJSIP channels on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01148">chan_pjsip.c:1148</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">include/asterisk/frame.h:292</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a22eb012ae61e28bc411003144c9adfd2"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a22eb012ae61e28bc411003144c9adfd2">update_connected_line_information</a></div><div class="ttdeci">static int update_connected_line_information(void *data)</div><div class="ttdoc">Update connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01429">chan_pjsip.c:1429</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">include/asterisk/frame.h:301</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structindicate__data_html_a3d12e161726566d24a1d0cf6c6b416bb"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">indicate_data::datalen</a></div><div class="ttdeci">size_t datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01297">chan_pjsip.c:1297</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aebc6828be3067baa4073a9eeae6ff46c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aebc6828be3067baa4073a9eeae6ff46c">ast_frame_subclass2str</a></div><div class="ttdeci">char * ast_frame_subclass2str(struct ast_frame *f, char *subclass, size_t slen, char *moreinfo, size_t mlen)</div><div class="ttdoc">Copy the discription of a frame&amp;#39;s subclass into the provided string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00406">main/frame.c:406</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a">AST_CONTROL_STREAM_TOPOLOGY_SOURCE_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00314">include/asterisk/frame.h:314</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">include/asterisk/frame.h:299</a></div></div>
<div class="ttc" id="format__cache_8h_html_ab67520222c2e1418df2d806e2184be22"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ab67520222c2e1418df2d806e2184be22">ast_format_vp9</a></div><div class="ttdeci">struct ast_format * ast_format_vp9</div><div class="ttdoc">Built-in cached vp9 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00201">format_cache.c:201</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="format__cache_8h_html_a06f47624d806b644d86c3b2828eafdc1"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a06f47624d806b644d86c3b2828eafdc1">ast_format_h264</a></div><div class="ttdeci">struct ast_format * ast_format_h264</div><div class="ttdoc">Built-in cached h264 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00181">format_cache.c:181</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00309">include/asterisk/frame.h:309</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="format__cache_8h_html_a3b2199894b5adbf010e1b6a38dff5ba7"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a3b2199894b5adbf010e1b6a38dff5ba7">ast_format_h265</a></div><div class="ttdeci">struct ast_format * ast_format_h265</div><div class="ttdoc">Built-in cached h265 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00186">format_cache.c:186</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">include/asterisk/frame.h:307</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structindicate__data_html_a6dc6d201aaa7df9ea3e8b5247a639f16"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a6dc6d201aaa7df9ea3e8b5247a639f16">indicate_data::condition</a></div><div class="ttdeci">int condition</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01294">chan_pjsip.c:1294</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a5267e04f3e504a11bfaf6abf8ce855cb"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a5267e04f3e504a11bfaf6abf8ce855cb">handle_topology_request_change</a></div><div class="ttdeci">static int handle_topology_request_change(struct ast_sip_session *session, const struct ast_stream_topology *proposed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01592">chan_pjsip.c:1592</a></div></div>
<div class="ttc" id="channel_8h_html_a1677fd1f6e2cab646aeb76db8a044c2e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1677fd1f6e2cab646aeb76db8a044c2e">ast_channel_get_device_name</a></div><div class="ttdeci">int ast_channel_get_device_name(struct ast_channel *chan, char *device_name, size_t name_buffer_length)</div><div class="ttdoc">Get a device name given its channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10697">channel.c:10697</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">include/asterisk/frame.h:313</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="devicestate_8h_html_acb74555f2a796e00cd26bd866c52e7b6"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a></div><div class="ttdeci">int ast_devstate_changed_literal(enum ast_device_state state, enum ast_devstate_cache cachable, const char *device)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00471">devicestate.c:471</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="structast__sip__session_html_a56458fcd1003f7554cee73c7f0346cbb"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a56458fcd1003f7554cee73c7f0346cbb">ast_sip_session::moh_passthrough</a></div><div class="ttdeci">unsigned int moh_passthrough</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00231">res_pjsip_session.h:231</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00312">include/asterisk/frame.h:312</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a0ae3dfd1f4dc4b4c6f277dd96c53ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">&#9670;&nbsp;</a></span>chan_pjsip_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* chan_pjsip_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>title</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cid_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called to create a new PJSIP Asterisk channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">547</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00835">ast_sip_endpoint::accountcode</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00872">AST_ADSI_UNAVAILABLE</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00785">ast_channel_adsicpe_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01263">ast_channel_alloc_with_endpoint</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01078">ast_channel_callgroup_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00904">ast_channel_dialed()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01094">ast_channel_named_callgroups_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01103">ast_channel_named_pickupgroups_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01086">ast_channel_pickupgroup_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00448">ast_channel_priority_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00457">ast_channel_rings_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00828">ast_channel_set_rawreadformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00832">ast_channel_set_rawwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00836">ast_channel_set_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01591">ast_channel_set_stream_topology()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00840">ast_channel_set_writeformat()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01038">ast_channel_stage_snapshot()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01043">ast_channel_stage_snapshot_done()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00569">ast_channel_tech_pvt_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00773">ast_channel_tech_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00749">ast_channel_zone_set()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00746">ast_format_cap_empty()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00417">ast_format_cap_get_best_by_type()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03002">ast_get_encoded_str()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00433">ast_get_indication_zone()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01765">ast_party_id_copy()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02974">ast_sip_channel_pvt_alloc()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00743">ast_stream_topology_free()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00765">ast_stream_topology_get_count()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00930">ast_stream_topology_get_formats()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00657">ast_sip_endpoint_pickup_configuration::callgroup</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00080">chan_idx</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00875">ast_sip_endpoint::channel_vars</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00770">ast_sip_endpoint_media_configuration::codecs</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00526">compatible_formats_exist()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00815">ast_sip_endpoint::context</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">ast_sip_session::id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00827">ast_sip_endpoint::language</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00661">ast_sip_endpoint_pickup_configuration::named_callgroups</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00663">ast_sip_endpoint_pickup_configuration::named_pickupgroups</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">ast_party_dialed::number</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00865">ast_sip_endpoint::persistent</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00851">ast_sip_endpoint::pickup</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00659">ast_sip_endpoint_pickup_configuration::pickupgroup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00494">set_channel_on_rtp_instance()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00387">ast_party_dialed::str</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00772">ast_sip_endpoint_media_configuration::topology</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00825">ast_sip_endpoint::zone</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03007">chan_pjsip_incoming_request()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02667">chan_pjsip_request_with_stream_topology()</a>.</p>
<div class="fragment"><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;{</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../de/daf/structchan__pjsip__pvt.html">chan_pjsip_pvt</a> *, pvt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">if</span> (!(pvt = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*pvt), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a51acce1c5b7f16c738b02b70bc931348">chan_pjsip_pvt_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>))) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t create pvt\n&quot;</span>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#a197c5e601f1a2d2d69263666fabfe3ea">ast_channel_alloc_with_endpoint</a>(1, <a class="code" href="../../d4/d88/structstate.html">state</a>,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a51b1019903e9032d46119168a3938a16">accountcode</a>,</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a7faec841658b88ad0cfbc684853acad3">context</a>,</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      assignedids, requestor, 0,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a3efaf0d0f0d2a9592843f3c2e1a30cb6">persistent</a>, <span class="stringliteral">&quot;PJSIP/%s-%08x&quot;</span>,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>),</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      (<span class="keywordtype">unsigned</span>) <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ad7b8d8b99d184d28a5f0e9fe66a47261">chan_idx</a>, +1));</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t create channel\n&quot;</span>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(chan, &amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">if</span> (!(channel = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95cafef155609ea0d35d60b178902941">ast_sip_channel_pvt_alloc</a>(pvt, session))) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t create pvt channel\n&quot;</span>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(chan, channel);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d95/stream_8h.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>) ||</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      !<a class="code" href="../../d0/d29/chan__pjsip_8c.html#abe69405e6a4d0c81eacf9af760eef029">compatible_formats_exist</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">codecs</a>)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">if</span> (!caps) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t create caps\n&quot;</span>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">codecs</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      topology = <a class="code" href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      caps = <a class="code" href="../../d8/d95/stream_8h.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      topology = <a class="code" href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <span class="keywordflow">if</span> (!topology || !caps) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(caps);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t get caps or clone topology\n&quot;</span>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(chan);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(chan, caps);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a094d04f1aadb8da25b74880a8cf0645d">ast_channel_set_stream_topology</a>(chan, topology);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(caps)) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *fmt;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      fmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#aa9da4b15be2b49c8f511a579c4c44b63">ast_format_cap_get_best_by_type</a>(caps, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">if</span> (!fmt) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;         <span class="comment">/* Since our capabilities aren&#39;t empty, this will succeed */</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;         fmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(caps, 0);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(chan, fmt);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(chan, fmt);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(chan, fmt);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(chan, fmt);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(fmt, -1);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a>(chan, 1);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bda5f0673b46cfdba3094393b3fbce084ff">AST_ADSI_UNAVAILABLE</a>);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;ani, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="comment">/* Set provided DNID on the new channel. */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan)-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(chan, 1);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9824ec754695fd10c2ad3ca929afba34">ast_channel_callgroup_set</a>(chan, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a59dd5e014aa8897030f392a610c041d1">pickup</a>.<a class="code" href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#af0f007b48a9c8cf0629428bd0483e0d1">callgroup</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae9542942f37422e284dd5c8a3fa7c7b6">ast_channel_pickupgroup_set</a>(chan, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a59dd5e014aa8897030f392a610c041d1">pickup</a>.<a class="code" href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#abc0651bcec68410023c036b7d8ec4d11">pickupgroup</a>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aac93557ad0a1e7bcf861c208e1d8fdc4">ast_channel_named_callgroups_set</a>(chan, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a59dd5e014aa8897030f392a610c041d1">pickup</a>.<a class="code" href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#a9628126373957378c96e9fb2069c994b">named_callgroups</a>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a0d78cf79bf535beab2c8928f68632c2e">ast_channel_named_pickupgroups_set</a>(chan, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a59dd5e014aa8897030f392a610c041d1">pickup</a>.<a class="code" href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#a90ae59b9ae44d3199c09f402a4c91856">named_pickupgroups</a>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a1a1355c36205d33d69c9acd0f4c9606c">language</a>)) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      ast_channel_language_set(chan, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a1a1355c36205d33d69c9acd0f4c9606c">language</a>);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a1cb1a5bf155b3e0c22c3730bee7ac14b">zone</a>)) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d77/structast__tone__zone.html">ast_tone_zone</a> *zone = <a class="code" href="../../d2/d0f/indications_8h.html#a52513ad3507d90dc2baf7cfec7b201a7">ast_get_indication_zone</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a1cb1a5bf155b3e0c22c3730bee7ac14b">zone</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (!zone) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown country code &#39;%s&#39; for tonezone. Check indications.conf for available country codes.\n&quot;</span>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a1cb1a5bf155b3e0c22c3730bee7ac14b">zone</a>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ad9a1e9a11b74fd9adb280df1a6bc251f">ast_channel_zone_set</a>(chan, zone);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="keywordflow">for</span> (var = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#afac263ae3b93d81babf8e390741df78b">channel_vars</a>; var; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[512];</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf311701900d162bced0d30e923b92">ast_get_encoded_str</a>(</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, buf, <span class="keyword">sizeof</span>(buf)));</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(chan);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a>(session, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(chan);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a59dd5e014aa8897030f392a610c041d1"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a59dd5e014aa8897030f392a610c041d1">ast_sip_endpoint::pickup</a></div><div class="ttdeci">struct ast_sip_endpoint_pickup_configuration pickup</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00851">res_pjsip.h:851</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ad7b8d8b99d184d28a5f0e9fe66a47261"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ad7b8d8b99d184d28a5f0e9fe66a47261">chan_idx</a></div><div class="ttdeci">static unsigned int chan_idx</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00080">chan_pjsip.c:80</a></div></div>
<div class="ttc" id="channel_8h_html_ae9542942f37422e284dd5c8a3fa7c7b6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae9542942f37422e284dd5c8a3fa7c7b6">ast_channel_pickupgroup_set</a></div><div class="ttdeci">void ast_channel_pickupgroup_set(struct ast_channel *chan, ast_group_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01086">channel_internal_api.c:1086</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__party__dialed_html_a436a3700bd4ae24751d7fad4538466aa"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">ast_party_dialed::number</a></div><div class="ttdeci">struct ast_party_dialed::@246 number</div><div class="ttdoc">Dialed/Called number. </div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structast__party__dialed_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_dialed::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00387">channel.h:387</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a51acce1c5b7f16c738b02b70bc931348"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a51acce1c5b7f16c738b02b70bc931348">chan_pjsip_pvt_dtor</a></div><div class="ttdeci">static void chan_pjsip_pvt_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip.c:82</a></div></div>
<div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="channel_8h_html_a197c5e601f1a2d2d69263666fabfe3ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a197c5e601f1a2d2d69263666fabfe3ea">ast_channel_alloc_with_endpoint</a></div><div class="ttdeci">#define ast_channel_alloc_with_endpoint(needqueue, state, cid_num, cid_name, acctcode, exten, context, assignedids, requestor, amaflag, endpoint,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01263">channel.h:1263</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a2fdf311701900d162bced0d30e923b92"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf311701900d162bced0d30e923b92">ast_get_encoded_str</a></div><div class="ttdeci">char * ast_get_encoded_str(const char *stream, char *result, size_t result_len)</div><div class="ttdoc">Decode a stream of encoded control or extended ASCII characters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03002">main/app.c:3002</a></div></div>
<div class="ttc" id="channel_8h_html_afac6d7d115c1edfe3ad8a8c7fa5d59d1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a></div><div class="ttdeci">void ast_channel_set_writeformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00840">channel_internal_api.c:840</a></div></div>
<div class="ttc" id="stream_8h_html_ac027a9684ada5477ddc7f64142b5338d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a></div><div class="ttdeci">struct ast_format_cap * ast_stream_topology_get_formats(struct ast_stream_topology *topology)</div><div class="ttdoc">Create a format capabilities structure representing the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00930">stream.c:930</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="channel_8h_html_aa2df58e77751b741b6891afe210b5b8c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a></div><div class="ttdeci">void ast_channel_set_rawwriteformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00832">channel_internal_api.c:832</a></div></div>
<div class="ttc" id="channel_8h_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a250b131731bf019fe96a44c9473437f0"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a250b131731bf019fe96a44c9473437f0">ast_sip_endpoint_media_configuration::codecs</a></div><div class="ttdeci">struct ast_format_cap * codecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00770">res_pjsip.h:770</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a7faec841658b88ad0cfbc684853acad3"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a7faec841658b88ad0cfbc684853acad3">ast_sip_endpoint::context</a></div><div class="ttdeci">const ast_string_field context</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00815">res_pjsip.h:815</a></div></div>
<div class="ttc" id="channel_8h_html_a9824ec754695fd10c2ad3ca929afba34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9824ec754695fd10c2ad3ca929afba34">ast_channel_callgroup_set</a></div><div class="ttdeci">void ast_channel_callgroup_set(struct ast_channel *chan, ast_group_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01078">channel_internal_api.c:1078</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="channel_8h_html_a0d78cf79bf535beab2c8928f68632c2e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0d78cf79bf535beab2c8928f68632c2e">ast_channel_named_pickupgroups_set</a></div><div class="ttdeci">void ast_channel_named_pickupgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01103">channel_internal_api.c:1103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aa9da4b15be2b49c8f511a579c4c44b63"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aa9da4b15be2b49c8f511a579c4c44b63">ast_format_cap_get_best_by_type</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_best_by_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Get the most preferred format for a particular media type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00417">format_cap.c:417</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_ad9a1e9a11b74fd9adb280df1a6bc251f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad9a1e9a11b74fd9adb280df1a6bc251f">ast_channel_zone_set</a></div><div class="ttdeci">void ast_channel_zone_set(struct ast_channel *chan, struct ast_tone_zone *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00749">channel_internal_api.c:749</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_af0566a4937a5bb1323825e4ef89c0e5a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a></div><div class="ttdeci">void ast_channel_tech_set(struct ast_channel *chan, const struct ast_channel_tech *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00773">channel_internal_api.c:773</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a921a2d48faa9ed99a59d33e7aefa7888"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a></div><div class="ttdeci">void ast_channel_set_rawreadformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00828">channel_internal_api.c:828</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a78e2ade62c8bb21a578778fe8f416d88"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a></div><div class="ttdeci">static void set_channel_on_rtp_instance(const struct ast_sip_session *session, const char *channel_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00494">chan_pjsip.c:494</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__sip__endpoint__pickup__configuration_html_a90ae59b9ae44d3199c09f402a4c91856"><div class="ttname"><a href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#a90ae59b9ae44d3199c09f402a4c91856">ast_sip_endpoint_pickup_configuration::named_pickupgroups</a></div><div class="ttdeci">struct ast_namedgroups * named_pickupgroups</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00663">res_pjsip.h:663</a></div></div>
<div class="ttc" id="channel_8h_html_a0c25448e9c6e2630a8a9cc96b7482cfe"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a></div><div class="ttdeci">void ast_channel_rings_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00457">channel_internal_api.c:457</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_abe69405e6a4d0c81eacf9af760eef029"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#abe69405e6a4d0c81eacf9af760eef029">compatible_formats_exist</a></div><div class="ttdeci">static int compatible_formats_exist(struct ast_stream_topology *top, struct ast_format_cap *cap)</div><div class="ttdoc">Determine if a topology is compatible with format capabilities. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00526">chan_pjsip.c:526</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__tone__zone_html"><div class="ttname"><a href="../../dd/d77/structast__tone__zone.html">ast_tone_zone</a></div><div class="ttdoc">A set of tones for a given locale. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00074">indications.h:74</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga920b9d3e484257c7e593452a8e36d8d4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a></div><div class="ttdeci">void ast_channel_stage_snapshot_done(struct ast_channel *chan)</div><div class="ttdoc">Clear flag to indicate channel snapshot is being staged, and publish snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01043">stasis_channels.c:1043</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a1a1355c36205d33d69c9acd0f4c9606c"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a1a1355c36205d33d69c9acd0f4c9606c">ast_sip_endpoint::language</a></div><div class="ttdeci">const ast_string_field language</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00827">res_pjsip.h:827</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95cafef155609ea0d35d60b178902941"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95cafef155609ea0d35d60b178902941">ast_sip_channel_pvt_alloc</a></div><div class="ttdeci">struct ast_sip_channel_pvt * ast_sip_channel_pvt_alloc(void *pvt, struct ast_sip_session *session)</div><div class="ttdoc">Allocate a new SIP channel pvt structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02974">res_pjsip_session.c:2974</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_ab3786cbbff7a03241fc75dafa0c8a1c1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a></div><div class="ttdeci">void ast_channel_set_readformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00836">channel_internal_api.c:836</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a51b1019903e9032d46119168a3938a16"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a51b1019903e9032d46119168a3938a16">ast_sip_endpoint::accountcode</a></div><div class="ttdeci">const ast_string_field accountcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00835">res_pjsip.h:835</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="structast__sip__endpoint__pickup__configuration_html_a9628126373957378c96e9fb2069c994b"><div class="ttname"><a href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#a9628126373957378c96e9fb2069c994b">ast_sip_endpoint_pickup_configuration::named_callgroups</a></div><div class="ttdeci">struct ast_namedgroups * named_callgroups</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00661">res_pjsip.h:661</a></div></div>
<div class="ttc" id="structast__sip__endpoint__pickup__configuration_html_abc0651bcec68410023c036b7d8ec4d11"><div class="ttname"><a href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#abc0651bcec68410023c036b7d8ec4d11">ast_sip_endpoint_pickup_configuration::pickupgroup</a></div><div class="ttdeci">ast_group_t pickupgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00659">res_pjsip.h:659</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_aed40a28831fcb5791cd63c1b8761d659"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a></div><div class="ttdeci">void ast_channel_adsicpe_set(struct ast_channel *chan, enum ast_channel_adsicpe value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00785">channel_internal_api.c:785</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a1cb1a5bf155b3e0c22c3730bee7ac14b"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a1cb1a5bf155b3e0c22c3730bee7ac14b">ast_sip_endpoint::zone</a></div><div class="ttdeci">const ast_string_field zone</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00825">res_pjsip.h:825</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf195fcf1686408b5e52ad76996653cea"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a></div><div class="ttdeci">void ast_channel_stage_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Set flag to indicate channel snapshot is being staged. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01038">stasis_channels.c:1038</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_a094d04f1aadb8da25b74880a8cf0645d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a094d04f1aadb8da25b74880a8cf0645d">ast_channel_set_stream_topology</a></div><div class="ttdeci">struct ast_stream_topology * ast_channel_set_stream_topology(struct ast_channel *chan, struct ast_stream_topology *topology)</div><div class="ttdoc">Set the topology of streams on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01591">channel_internal_api.c:1591</a></div></div>
<div class="ttc" id="structast__sip__endpoint__pickup__configuration_html_af0f007b48a9c8cf0629428bd0483e0d1"><div class="ttname"><a href="../../d8/dc8/structast__sip__endpoint__pickup__configuration.html#af0f007b48a9c8cf0629428bd0483e0d1">ast_sip_endpoint_pickup_configuration::callgroup</a></div><div class="ttdeci">ast_group_t callgroup</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00657">res_pjsip.h:657</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="channel_8h_html_aac93557ad0a1e7bcf861c208e1d8fdc4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aac93557ad0a1e7bcf861c208e1d8fdc4">ast_channel_named_callgroups_set</a></div><div class="ttdeci">void ast_channel_named_callgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01094">channel_internal_api.c:1094</a></div></div>
<div class="ttc" id="indications_8h_html_a52513ad3507d90dc2baf7cfec7b201a7"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a52513ad3507d90dc2baf7cfec7b201a7">ast_get_indication_zone</a></div><div class="ttdeci">struct ast_tone_zone * ast_get_indication_zone(const char *country)</div><div class="ttdoc">locate ast_tone_zone </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00433">indications.c:433</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structchan__pjsip__pvt_html"><div class="ttname"><a href="../../de/daf/structchan__pjsip__pvt.html">chan_pjsip_pvt</a></div><div class="ttdoc">The PJSIP channel driver pvt, stored in the ast_sip_channel_pvt data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d81/chan__pjsip_8h_source.html#l00042">chan_pjsip.h:42</a></div></div>
<div class="ttc" id="channel_8h_html_a63732831df3e7a0999b0900ec85c626a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a></div><div class="ttdeci">struct ast_party_dialed * ast_channel_dialed(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00904">channel_internal_api.c:904</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="stream_8h_html_a5eb43440630db819220df97b01f48922"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a></div><div class="ttdeci">int ast_stream_topology_get_count(const struct ast_stream_topology *topology)</div><div class="ttdoc">Get the number of streams in a topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00765">stream.c:765</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="stream_8h_html_a00b605b453fe5ff538e361126d600303"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_clone(const struct ast_stream_topology *topology)</div><div class="ttdoc">Create a deep clone of an existing stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00667">stream.c:667</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a3efaf0d0f0d2a9592843f3c2e1a30cb6"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a3efaf0d0f0d2a9592843f3c2e1a30cb6">ast_sip_endpoint::persistent</a></div><div class="ttdeci">struct ast_endpoint * persistent</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00865">res_pjsip.h:865</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_endpoint_media_configuration::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00772">res_pjsip.h:772</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
<div class="ttc" id="channel_8h_html_a828f537544a2ad2352c56c078390a0bda5f0673b46cfdba3094393b3fbce084ff"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bda5f0673b46cfdba3094393b3fbce084ff">AST_ADSI_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00872">channel.h:872</a></div></div>
<div class="ttc" id="format__cap_8h_html_a09809d02373dbc26b136f52cc98f7513"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a></div><div class="ttdeci">int ast_format_cap_empty(const struct ast_format_cap *cap)</div><div class="ttdoc">Determine if a format cap has no formats in it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00746">format_cap.c:746</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_afac263ae3b93d81babf8e390741df78b"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#afac263ae3b93d81babf8e390741df78b">ast_sip_endpoint::channel_vars</a></div><div class="ttdeci">struct ast_variable * channel_vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00875">res_pjsip.h:875</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="stream_8h_html_a88eca139ded2d5bbc6cdcf793febc265"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a></div><div class="ttdeci">void ast_stream_topology_free(struct ast_stream_topology *topology)</div><div class="ttdoc">Unreference and destroy a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00743">stream.c:743</a></div></div>
<div class="ttc" id="channel_8h_html_ae56cab679c0cda6436b930bc74297895"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a></div><div class="ttdeci">void ast_channel_priority_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00448">channel_internal_api.c:448</a></div></div>
<div class="ttc" id="channel_8h_html_a929b8b2cb36308e5cf4e51ed880bfcba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a></div><div class="ttdeci">void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00569">channel_internal_api.c:569</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_sip_session::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">res_pjsip_session.h:207</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a74cd5fcb1313f0fb5f2f876bf484b3b7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a></div><div class="ttdeci">struct ast_channel_tech chan_pjsip_tech</div><div class="ttdoc">PBX interface structure for channel registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00109">chan_pjsip.c:109</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51acce1c5b7f16c738b02b70bc931348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51acce1c5b7f16c738b02b70bc931348">&#9670;&nbsp;</a></span>chan_pjsip_pvt_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_pvt_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">82</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00726">chan_pjsip_answer()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02385">chan_pjsip_call()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02150">chan_pjsip_digit_begin()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02262">chan_pjsip_digit_end()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01045">chan_pjsip_fixup()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01278">chan_pjsip_get_uniqueid()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02516">chan_pjsip_hangup()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01237">chan_pjsip_queryoption()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00838">chan_pjsip_read_stream()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02694">chan_pjsip_request()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02667">chan_pjsip_request_with_stream_topology()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02837">chan_pjsip_sendtext()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02815">chan_pjsip_sendtext_data()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02131">chan_pjsip_transfer()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01039">chan_pjsip_write()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00949">chan_pjsip_write_stream()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00083">ast_channel::data</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01508">text</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a6c3ad158a05985a0a69e6d739b3f3bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c3ad158a05985a0a69e6d739b3f3bcf">&#9670;&nbsp;</a></span>chan_pjsip_queryoption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_queryoption </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called to query options on a channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01237">1237</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00480">AST_OPTION_T38_STATE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00742">ast_sip_t38_configuration::enabled</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00768">ast_sip_endpoint_media_configuration::t38</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00102">T38_ENABLED</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00667">T38_LOCAL_REINVITE</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00668">T38_PEER_REINVITE</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00670">T38_REJECTED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00884">T38_STATE_NEGOTIATED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00882">T38_STATE_NEGOTIATING</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00883">T38_STATE_REJECTED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00880">T38_STATE_UNAVAILABLE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00881">T38_STATE_UNKNOWN</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00221">ast_sip_session::t38state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;{</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1">ast_t38_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1a8bd9e539fb6a17b095fb24a75e0b4d21">T38_STATE_UNAVAILABLE</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordflow">if</span> (!channel) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <span class="keywordflow">switch</span> (option) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aa3dbd0541decd817d6eeba18acaa34aa">AST_OPTION_T38_STATE</a>:</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <span class="keywordflow">if</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#acc4771d2f993c42ebe4923bd523592d2">t38</a>.<a class="code" href="../../d3/dae/structast__sip__t38__configuration.html#a63be54a0beac1f5717217e1d9e629c71">enabled</a>) {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;         <span class="keywordflow">switch</span> (channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a455fb7bc2cb9f69b659e3ba4c4595c87">t38state</a>) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1ca31b6eff4254a18d6357535c2b3110385">T38_LOCAL_REINVITE</a>:</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1ca306c88a911bc77eaac89b4299d9da840">T38_PEER_REINVITE</a>:</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            state = <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1afa1eab36050476591f803c3e234c2ed1">T38_STATE_NEGOTIATING</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a6d9b175ed35f8ef7b2d8cc2dc435fde8">T38_ENABLED</a>:</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            state = <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1caa9118ef3a002948047052c45eb39fe12">T38_REJECTED</a>:</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            state = <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1ad3745918c0830d3816e5ce5561814e7e">T38_STATE_REJECTED</a>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            state = <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1ab6834ded836bd85b489322f04984d274">T38_STATE_UNKNOWN</a>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;         }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      *((<span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1">ast_t38_state</a> *) data) = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      res = 0;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1ab6834ded836bd85b489322f04984d274"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1ab6834ded836bd85b489322f04984d274">T38_STATE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00881">channel.h:881</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structast__sip__session_html_a455fb7bc2cb9f69b659e3ba4c4595c87"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a455fb7bc2cb9f69b659e3ba4c4595c87">ast_sip_session::t38state</a></div><div class="ttdeci">enum ast_sip_session_t38state t38state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00221">res_pjsip_session.h:221</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a6d9b175ed35f8ef7b2d8cc2dc435fde8"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a6d9b175ed35f8ef7b2d8cc2dc435fde8">T38_ENABLED</a></div><div class="ttdeci">#define T38_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00102">chan_ooh323.c:102</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="sip_8h_html_ada584ef2e7f77c8dfe0315d05fa49e1caa9118ef3a002948047052c45eb39fe12"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1caa9118ef3a002948047052c45eb39fe12">T38_REJECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00670">sip.h:670</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="sip_8h_html_ada584ef2e7f77c8dfe0315d05fa49e1ca306c88a911bc77eaac89b4299d9da840"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1ca306c88a911bc77eaac89b4299d9da840">T38_PEER_REINVITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00668">sip.h:668</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1">ast_t38_state</a></div><div class="ttdeci">ast_t38_state</div><div class="ttdoc">Possible T38 states on channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00879">channel.h:879</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1ad3745918c0830d3816e5ce5561814e7e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1ad3745918c0830d3816e5ce5561814e7e">T38_STATE_REJECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00883">channel.h:883</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1a8bd9e539fb6a17b095fb24a75e0b4d21"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1a8bd9e539fb6a17b095fb24a75e0b4d21">T38_STATE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00880">channel.h:880</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1afa1eab36050476591f803c3e234c2ed1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1afa1eab36050476591f803c3e234c2ed1">T38_STATE_NEGOTIATING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00882">channel.h:882</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_acc4771d2f993c42ebe4923bd523592d2"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#acc4771d2f993c42ebe4923bd523592d2">ast_sip_endpoint_media_configuration::t38</a></div><div class="ttdeci">struct ast_sip_t38_configuration t38</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00768">res_pjsip.h:768</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="channel_8h_html_a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4cd990f4c1cd0c2af6e4c63f6d15b4e1af142c79721a025bd65edad812f0725e0">T38_STATE_NEGOTIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00884">channel.h:884</a></div></div>
<div class="ttc" id="structast__sip__t38__configuration_html_a63be54a0beac1f5717217e1d9e629c71"><div class="ttname"><a href="../../d3/dae/structast__sip__t38__configuration.html#a63be54a0beac1f5717217e1d9e629c71">ast_sip_t38_configuration::enabled</a></div><div class="ttdeci">unsigned int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00742">res_pjsip.h:742</a></div></div>
<div class="ttc" id="sip_8h_html_ada584ef2e7f77c8dfe0315d05fa49e1ca31b6eff4254a18d6357535c2b3110385"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ada584ef2e7f77c8dfe0315d05fa49e1ca31b6eff4254a18d6357535c2b3110385">T38_LOCAL_REINVITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00667">sip.h:667</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aa3dbd0541decd817d6eeba18acaa34aa"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aa3dbd0541decd817d6eeba18acaa34aa">AST_OPTION_T38_STATE</a></div><div class="ttdeci">#define AST_OPTION_T38_STATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00480">include/asterisk/frame.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af0aa891c232e15e6fc1f8f25c6405f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0aa891c232e15e6fc1f8f25c6405f67">&#9670;&nbsp;</a></span>chan_pjsip_read_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> * chan_pjsip_read_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to read any waiting frames. </p>
<dl class="section note"><dt>Note</dt><dd>The channel is already locked. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00838">838</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00419">ast_channel_fdno()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02854">ast_channel_get_up_time()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00852">ast_channel_rawwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01028">ast_channel_set_unbridged_nolock()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01764">ast_dsp_get_features()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01494">ast_dsp_process()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01755">ast_dsp_set_features()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00196">AST_EXTENDED_FDS</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00525">ast_format_cap_remove_by_type()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05575">ast_set_read_format_path()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05611">ast_set_write_format_path()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00891">ast_sip_endpoint::asymmetric_rtp_codec</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00765">chan_pjsip_cng_tone_detected()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00213">ast_sip_session::dsp</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00029">DSP_FEATURE_FAX_DETECT</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00885">ast_sip_endpoint::faxdetect_timeout</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00824">is_compatible_format()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00137">ast_sip_session_media_read_callback_state::read_callback</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00139">ast_sip_session_media_read_callback_state::session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html">ast_sip_session_media_read_callback_state</a> *callback_state;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="keywordtype">int</span> fdno = <a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(ast) - <a class="code" href="../../d5/d7b/channel_8h.html#a12abef15e0e4a3f50b74b7c609e546f8">AST_EXTENDED_FDS</a>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   <span class="keywordflow">if</span> (fdno &gt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;read_callbacks)) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   callback_state = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;read_callbacks, fdno);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   f = callback_state-&gt;<a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#a0d1e34d634c305bcb322d830f71da0af">read_callback</a>(session, callback_state-&gt;<a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#ab87c7ab8d4cdeb35cc9a7b69bd2ee44a">session</a>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">for</span> (cur = f; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <span class="keywordflow">if</span> (!cur || callback_state-&gt;<a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#ab87c7ab8d4cdeb35cc9a7b69bd2ee44a">session</a> != session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[callback_state-&gt;<a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#ab87c7ab8d4cdeb35cc9a7b69bd2ee44a">session</a>-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>]) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   session = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">    * Asymmetric RTP only has one native format set at a time.</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">    * Therefore we need to update the native format to the current</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">    * raw read format BEFORE the native format check</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aeffc49850ee77c5042f350c013b6190a">asymmetric_rtp_codec</a> &amp;&amp;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(ast), cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a> &amp;&amp;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ad6c0c3d3ac88d921e3ecbd8a7f8faae1">is_compatible_format</a>(session, cur)) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="comment">/* For maximum compatibility we ensure that the formats match that of the received media */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Oooh, got a frame with format of %s on channel &#39;%s&#39; when we&#39;re sending &#39;%s&#39;, switching to match\n&quot;</span>,</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast),</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(ast)));</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">if</span> (caps) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(caps, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(caps, cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, 0);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(ast, caps);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ad50d5b0a589b3fb8464c97d40548c102">ast_set_write_format_path</a>(ast, <a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(ast), cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a2161934659b4d81f8e225d107d5e91e8">ast_set_read_format_path</a>(ast, <a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(ast), cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(ast)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a>(ast, 1);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;         == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Oooh, got a frame with format of %s on channel &#39;%s&#39; when it has not been negotiated\n&quot;</span>,</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordtype">int</span> dsp_features;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      dsp_features = <a class="code" href="../../d3/d08/dsp_8h.html#a92238c472ae51a2926b51599108ab071">ast_dsp_get_features</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">if</span> ((dsp_features &amp; <a class="code" href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a>)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a437fcc160f73235c9607e119877ff02a">faxdetect_timeout</a></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;         &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a437fcc160f73235c9607e119877ff02a">faxdetect_timeout</a> &lt;= <a class="code" href="../../d5/d7b/channel_8h.html#abf858a4aac3ad8e1f87236611fce8db6">ast_channel_get_up_time</a>(ast)) {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;         dsp_features &amp;= ~DSP_FEATURE_FAX_DETECT;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;         <span class="keywordflow">if</span> (dsp_features) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, dsp_features);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;         }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel driver fax CNG detection timeout on %s\n&quot;</span>,</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      f = <a class="code" href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a>(ast, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, f);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">if</span> (f &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>)) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <span class="charliteral">&#39;f&#39;</span>) {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel driver fax CNG detected on %s\n&quot;</span>,</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            f = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab7b967c3f4b00ee67368c1e621632691">chan_pjsip_cng_tone_detected</a>(ast, session, f);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="comment">/* When chan_pjsip_cng_tone_detected returns it is possible for the</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">             * channel pointed to by ast and by session-&gt;channel to differ due to a</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">             * masquerade. It&#39;s best not to touch things after this.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;* Detected inband DTMF &#39;%c&#39; on &#39;%s&#39;\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>,</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;         }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;}</div><div class="ttc" id="dsp_8h_html_ab6387ee12a3544d3d2068db61d9576ad"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a></div><div class="ttdeci">struct ast_frame * ast_dsp_process(struct ast_channel *chan, struct ast_dsp *dsp, struct ast_frame *inf)</div><div class="ttdoc">Return AST_FRAME_NULL frames when there is silence, AST_FRAME_BUSY on busies, and call progress...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01494">dsp.c:1494</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ad6c0c3d3ac88d921e3ecbd8a7f8faae1"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ad6c0c3d3ac88d921e3ecbd8a7f8faae1">is_compatible_format</a></div><div class="ttdeci">static int is_compatible_format(struct ast_sip_session *session, struct ast_frame *f)</div><div class="ttdoc">Determine if the given frame is in a format we&amp;#39;ve negotiated. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00824">chan_pjsip.c:824</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aeffc49850ee77c5042f350c013b6190a"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aeffc49850ee77c5042f350c013b6190a">ast_sip_endpoint::asymmetric_rtp_codec</a></div><div class="ttdeci">unsigned int asymmetric_rtp_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00891">res_pjsip.h:891</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="channel_8h_html_abf858a4aac3ad8e1f87236611fce8db6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf858a4aac3ad8e1f87236611fce8db6">ast_channel_get_up_time</a></div><div class="ttdeci">int ast_channel_get_up_time(struct ast_channel *chan)</div><div class="ttdoc">Obtain how long it has been since the channel was answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02854">channel.c:2854</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab7b967c3f4b00ee67368c1e621632691"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab7b967c3f4b00ee67368c1e621632691">chan_pjsip_cng_tone_detected</a></div><div class="ttdeci">static struct ast_frame * chan_pjsip_cng_tone_detected(struct ast_channel *ast, struct ast_sip_session *session, struct ast_frame *f)</div><div class="ttdoc">Internal helper function called when CNG tone is detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00765">chan_pjsip.c:765</a></div></div>
<div class="ttc" id="channel_8h_html_a2161934659b4d81f8e225d107d5e91e8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2161934659b4d81f8e225d107d5e91e8">ast_set_read_format_path</a></div><div class="ttdeci">int ast_set_read_format_path(struct ast_channel *chan, struct ast_format *raw_format, struct ast_format *core_format)</div><div class="ttdoc">Set specific read path on channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05575">channel.c:5575</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9deccb020b39c3f7ac94b1af99cac5d">ast_sip_session::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00213">res_pjsip_session.h:213</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dsp_8h_html_a92238c472ae51a2926b51599108ab071"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92238c472ae51a2926b51599108ab071">ast_dsp_get_features</a></div><div class="ttdeci">int ast_dsp_get_features(struct ast_dsp *dsp)</div><div class="ttdoc">Get features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01764">dsp.c:1764</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="dsp_8h_html_a92045e8a8ad56b9b31d24db325fa95ab"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_FAX_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00029">dsp.h:29</a></div></div>
<div class="ttc" id="structast__sip__session__media__read__callback__state_html_a0d1e34d634c305bcb322d830f71da0af"><div class="ttname"><a href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#a0d1e34d634c305bcb322d830f71da0af">ast_sip_session_media_read_callback_state::read_callback</a></div><div class="ttdeci">ast_sip_session_media_read_cb read_callback</div><div class="ttdoc">The callback to invoke. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00137">res_pjsip_session.h:137</a></div></div>
<div class="ttc" id="structast__sip__session__media__read__callback__state_html_ab87c7ab8d4cdeb35cc9a7b69bd2ee44a"><div class="ttname"><a href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#ab87c7ab8d4cdeb35cc9a7b69bd2ee44a">ast_sip_session_media_read_callback_state::session</a></div><div class="ttdeci">struct ast_sip_session_media * session</div><div class="ttdoc">The media session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00139">res_pjsip_session.h:139</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="channel_8h_html_a175086606377b46d09f3f26a083416c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a175086606377b46d09f3f26a083416c5">ast_channel_set_unbridged_nolock</a></div><div class="ttdeci">void ast_channel_set_unbridged_nolock(struct ast_channel *chan, int value)</div><div class="ttdoc">Variant of ast_channel_set_unbridged. Use this if the channel is already locked prior to calling...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01028">channel_internal_api.c:1028</a></div></div>
<div class="ttc" id="structast__sip__session__media__read__callback__state_html"><div class="ttname"><a href="../../d2/d7e/structast__sip__session__media__read__callback__state.html">ast_sip_session_media_read_callback_state</a></div><div class="ttdoc">Structure which contains read callback information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00133">res_pjsip_session.h:133</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="channel_8h_html_a3e3e7e66e65ad9cdba2299e36b13e173"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a></div><div class="ttdeci">int ast_channel_fdno(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00419">channel_internal_api.c:419</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="channel_8h_html_a12abef15e0e4a3f50b74b7c609e546f8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a12abef15e0e4a3f50b74b7c609e546f8">AST_EXTENDED_FDS</a></div><div class="ttdeci">#define AST_EXTENDED_FDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00196">channel.h:196</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a437fcc160f73235c9607e119877ff02a"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a437fcc160f73235c9607e119877ff02a">ast_sip_endpoint::faxdetect_timeout</a></div><div class="ttdeci">unsigned int faxdetect_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00885">res_pjsip.h:885</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="channel_8h_html_ad50d5b0a589b3fb8464c97d40548c102"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad50d5b0a589b3fb8464c97d40548c102">ast_set_write_format_path</a></div><div class="ttdeci">int ast_set_write_format_path(struct ast_channel *chan, struct ast_format *core_format, struct ast_format *raw_format)</div><div class="ttdoc">Set specific write path on channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05611">channel.c:5611</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="channel_8h_html_ad27c52cda6e6435a121900661ad5bdce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a></div><div class="ttdeci">struct ast_format * ast_channel_rawwriteformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00852">channel_internal_api.c:852</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab317669d5ea73707fe5724a2ba52c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab317669d5ea73707fe5724a2ba52c2e">&#9670;&nbsp;</a></span>chan_pjsip_remove_hold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_remove_hold </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>chan_uid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a channel ID from the list of PJSIP channels on hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan_uid</td><td>- Unique ID of the channel being taken out of the hold list </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01148">1148</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02972">chan_pjsip_session_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;{</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a>, chan_uid, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6ab56a6616234005e8d75b380aceddf0"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a></div><div class="ttdeci">static struct ao2_container * pjsip_uids_onhold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01107">chan_pjsip.c:1107</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6148801958125c74ead3a0a3b4839ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6148801958125c74ead3a0a3b4839ca6">&#9670;&nbsp;</a></span>chan_pjsip_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> * chan_pjsip_request </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02694">2694</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00743">ast_stream_topology_free()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02667">chan_pjsip_request_with_stream_topology()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;{</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;   topology = <a class="code" href="../../d8/d95/stream_8h.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a>(cap);</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;   <span class="keywordflow">if</span> (!topology) {</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   }</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;   chan = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a7ca7a276023c244f0c8b8b349beba5cf">chan_pjsip_request_with_stream_topology</a>(<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, topology, assignedids, requestor, <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, cause);</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   <a class="code" href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="stream_8h_html_ab57b837e53f8ea2335ec9dc00cdc0c0c"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_create_from_format_cap(struct ast_format_cap *cap)</div><div class="ttdoc">A helper function that, given a format capabilities structure, creates a topology and separates the m...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00848">stream.c:848</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a7ca7a276023c244f0c8b8b349beba5cf"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a7ca7a276023c244f0c8b8b349beba5cf">chan_pjsip_request_with_stream_topology</a></div><div class="ttdeci">static struct ast_channel * chan_pjsip_request_with_stream_topology(const char *type, struct ast_stream_topology *topology, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *data, int *cause)</div><div class="ttdoc">Function called by core to create a new outgoing PJSIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02667">chan_pjsip.c:2667</a></div></div>
<div class="ttc" id="stream_8h_html_a88eca139ded2d5bbc6cdcf793febc265"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a></div><div class="ttdeci">void ast_stream_topology_free(struct ast_stream_topology *topology)</div><div class="ttdoc">Unreference and destroy a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00743">stream.c:743</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ca7a276023c244f0c8b8b349beba5cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca7a276023c244f0c8b8b349beba5cf">&#9670;&nbsp;</a></span>chan_pjsip_request_with_stream_topology()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> * chan_pjsip_request_with_stream_topology </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to create a new outgoing PJSIP session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02667">2667</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00149">AST_CAUSE_FAILURE</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02556">request_data::cause</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02555">request_data::dest</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02553">request_data::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02554">request_data::topology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02694">chan_pjsip_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;{</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d24/structrequest__data.html">request_data</a> req_data;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *, <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s Topology: %s\n&quot;</span>, data,</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(topology, &amp;STR_TMP)));</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;   req_data.topology = <a class="code" href="../../de/d24/structrequest__data.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;   req_data.dest = data;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   <span class="comment">/* Default failure value in case ast_sip_push_task_wait_servant() itself fails. */</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   req_data.cause = <a class="code" href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a>;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>, &amp;req_data)) {</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      *<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = req_data.cause;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t push task\n&quot;</span>);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   }</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = req_data.session;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;channel = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">chan_pjsip_new</a>(<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, assignedids, requestor, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <span class="comment">/* Session needs to be terminated prematurely */</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Couldn&#39;t create channel\n&quot;</span>);</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;   }</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;channel, <span class="stringliteral">&quot;Channel: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;channel));</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;}</div><div class="ttc" id="structrequest__data_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">request_data::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02556">chan_pjsip.c:2556</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a1a0ae3dfd1f4dc4b4c6f277dd96c53ce"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a1a0ae3dfd1f4dc4b4c6f277dd96c53ce">chan_pjsip_new</a></div><div class="ttdeci">static struct ast_channel * chan_pjsip_new(struct ast_sip_session *session, int state, const char *exten, const char *title, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *cid_name)</div><div class="ttdoc">Function called to create a new PJSIP Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip.c:547</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structrequest__data_html"><div class="ttname"><a href="../../de/d24/structrequest__data.html">request_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02552">chan_pjsip.c:2552</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="causes_8h_html_a45c0c189b93333bad969b8f371d8442d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00149">causes.h:149</a></div></div>
<div class="ttc" id="structrequest__data_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/d24/structrequest__data.html#a15d14a20c2f5eb81b8b933304dce2ea3">request_data::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02554">chan_pjsip.c:2554</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd953d09ed2f8d1d7a2c11b6e40bae79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd953d09ed2f8d1d7a2c11b6e40bae79">&#9670;&nbsp;</a></span>chan_pjsip_sendtext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_sendtext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02837">2837</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01418">ast_msg_data_alloc()</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00458">AST_MSG_DATA_ATTR_BODY</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00447">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02815">chan_pjsip_sendtext_data()</a>, and <a class="el" href="../../d2/d0d/message_8h_source.html#l00463">ast_msg_data_attribute::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;{</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;   <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a> attrs[] =</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   {</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      {</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;         .<a class="code" href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">type</a> = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>,</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;         .value = (<span class="keywordtype">char</span> *)<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>,</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      }</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;   };</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   msg = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a>(<a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a>, attrs, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(attrs));</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;   }</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;   rc = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9c646cf3a54b4960d061921d4d4dbab5">chan_pjsip_sendtext_data</a>(ast, msg);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(msg);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;}</div><div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__msg__data__attribute_html_a7274332d005eb44504af2efd26ed54dc"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">ast_msg_data_attribute::type</a></div><div class="ttdeci">enum ast_msg_data_attribute_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00463">message.h:463</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00447">message.h:447</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga0f7d3a1a337b48830c3531ed90594b3a"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_alloc(enum ast_msg_data_source_type source, struct ast_msg_data_attribute attributes[], size_t count)</div><div class="ttdoc">Allocates an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01418">message.c:1418</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9c646cf3a54b4960d061921d4d4dbab5"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9c646cf3a54b4960d061921d4d4dbab5">chan_pjsip_sendtext_data</a></div><div class="ttdeci">static int chan_pjsip_sendtext_data(struct ast_channel *ast, struct ast_msg_data *msg)</div><div class="ttdoc">Function called by core to send text on PJSIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02815">chan_pjsip.c:2815</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__msg__data__attribute_html"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00462">message.h:462</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c646cf3a54b4960d061921d4d4dbab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c646cf3a54b4960d061921d4d4dbab5">&#9670;&nbsp;</a></span>chan_pjsip_sendtext_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_sendtext_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core to send text on PJSIP session. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02815">2815</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00458">AST_MSG_DATA_ATTR_BODY</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00456">AST_MSG_DATA_ATTR_FROM</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00455">AST_MSG_DATA_ATTR_TO</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01533">ast_msg_data_get_attribute()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02744">sendtext()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02723">sendtext_data_create()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02837">chan_pjsip_sendtext()</a>.</p>
<div class="fragment"><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;{</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a> *data = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a45c9506569917e6d8159e3416594b387">sendtext_data_create</a>(ast, msg);</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending MESSAGE from &#39;%s&#39; to &#39;%s:%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>),</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>),</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast),</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>));</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   }</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a2e3b3eb8bb47c7f02b5c80d748bda521">sendtext</a>, data)) {</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;   }</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_a45c9506569917e6d8159e3416594b387"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a45c9506569917e6d8159e3416594b387">sendtext_data_create</a></div><div class="ttdeci">static struct sendtext_data * sendtext_data_create(struct ast_channel *chan, struct ast_msg_data *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02723">chan_pjsip.c:2723</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structsendtext__data_html"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html">sendtext_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02711">chan_pjsip.c:2711</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__pjsip_8c_html_a2e3b3eb8bb47c7f02b5c80d748bda521"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a2e3b3eb8bb47c7f02b5c80d748bda521">sendtext</a></div><div class="ttdeci">static int sendtext(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02744">chan_pjsip.c:2744</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a893b24a1c24b17c0350079164ed10ea8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893b24a1c24b17c0350079164ed10ea8">&#9670;&nbsp;</a></span>chan_pjsip_session_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_session_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SIP session interaction functions. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02950">2950</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00493">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_NONE</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01273">ast_sip_session_add_datastore()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01243">ast_sip_session_alloc_datastore()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00766">ast_sip_endpoint_media_configuration::direct_media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00735">ast_sip_direct_media_configuration::glare_mitigation</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00854">SCOPE_EXIT_RTN</a>.</p>
<div class="fragment"><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;{</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *, datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a0089e4883f3e1989250dd9ea16bed256">glare_mitigation</a> ==</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65a1b974f79e278c86dc78e77564e7e931c">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_NONE</a>) {</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;Direct media no glare mitigation\n&quot;</span>);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;   }</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;   datastore = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a28af3f44693710b56fb141c509a5eb9d">ast_sip_session_alloc_datastore</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a09b37fd87b4ebd1a80bff709a7f8c882">direct_media_mitigation_info</a>,</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;         <span class="stringliteral">&quot;direct_media_glare_mitigation&quot;</span>);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;Couldn&#39;t create datastore\n&quot;</span>);</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   }</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a6d3bc4b6c4bdd1a98347a2b33a35b517">ast_sip_session_add_datastore</a>(session, datastore);</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>();</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a09b37fd87b4ebd1a80bff709a7f8c882"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a09b37fd87b4ebd1a80bff709a7f8c882">direct_media_mitigation_info</a></div><div class="ttdeci">static struct ast_datastore_info direct_media_mitigation_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00266">chan_pjsip.c:266</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a9eb74cd83f19dba0d41c5fbfc6e30f39"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">ast_sip_endpoint_media_configuration::direct_media</a></div><div class="ttdeci">struct ast_sip_direct_media_configuration direct_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00766">res_pjsip.h:766</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_af0d80814b235fcc050fda52376de2b65a1b974f79e278c86dc78e77564e7e931c"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65a1b974f79e278c86dc78e77564e7e931c">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00493">res_pjsip.h:493</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a28af3f44693710b56fb141c509a5eb9d"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a28af3f44693710b56fb141c509a5eb9d">ast_sip_session_alloc_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_session_alloc_datastore(const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Alternative for ast_datastore_alloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01243">res_pjsip_session.c:1243</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a519e9e626663d0bf89c04738e0353a9d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN(...)</div><div class="ttdoc">Scope Exit with return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00854">logger.h:854</a></div></div>
<div class="ttc" id="structast__sip__direct__media__configuration_html_a0089e4883f3e1989250dd9ea16bed256"><div class="ttname"><a href="../../d0/d9d/structast__sip__direct__media__configuration.html#a0089e4883f3e1989250dd9ea16bed256">ast_sip_direct_media_configuration::glare_mitigation</a></div><div class="ttdeci">enum ast_sip_direct_media_glare_mitigation glare_mitigation</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00735">res_pjsip.h:735</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a6d3bc4b6c4bdd1a98347a2b33a35b517"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a6d3bc4b6c4bdd1a98347a2b33a35b517">ast_sip_session_add_datastore</a></div><div class="ttdeci">int ast_sip_session_add_datastore(struct ast_sip_session *session, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01273">res_pjsip_session.c:1273</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a28fbc92e88b6741ea632ef3979e97ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28fbc92e88b6741ea632ef3979e97ccb">&#9670;&nbsp;</a></span>chan_pjsip_session_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_pjsip_session_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called when the session ends. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02972">2972</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00427">ast_channel_hangupcause()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01150">ast_queue_hangup()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01166">ast_queue_hangup_with_cause()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02504">ast_set_hangupsource()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01148">chan_pjsip_remove_hold()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02860">hangup_sip2cause()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00854">SCOPE_EXIT_RTN</a>.</p>
<div class="fragment"><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;{</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>(<span class="stringliteral">&quot;No channel\n&quot;</span>);</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;   }</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aab317669d5ea73707fe5724a2ba52c2e">chan_pjsip_remove_hold</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>), 0);</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>) {</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <span class="keywordtype">int</span> cause = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a933506a953d4f1e0121c580c7d38007d">hangup_sip2cause</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause);</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, cause);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;   }</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a>();</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;}</div><div class="ttc" id="channel_8h_html_a30bcf0418189567bc84ff32034f79f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a></div><div class="ttdeci">int ast_queue_hangup(struct ast_channel *chan)</div><div class="ttdoc">Queue a hangup frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01150">channel.c:1150</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aab317669d5ea73707fe5724a2ba52c2e"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aab317669d5ea73707fe5724a2ba52c2e">chan_pjsip_remove_hold</a></div><div class="ttdeci">static void chan_pjsip_remove_hold(const char *chan_uid)</div><div class="ttdoc">Remove a channel ID from the list of PJSIP channels on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01148">chan_pjsip.c:1148</a></div></div>
<div class="ttc" id="channel_8h_html_a91e78b15da3244307ffd749fa85f4db7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a></div><div class="ttdeci">int ast_queue_hangup_with_cause(struct ast_channel *chan, int cause)</div><div class="ttdoc">Queue a hangup frame with hangupcause set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01166">channel.c:1166</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a933506a953d4f1e0121c580c7d38007d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a933506a953d4f1e0121c580c7d38007d">hangup_sip2cause</a></div><div class="ttdeci">static int hangup_sip2cause(int cause)</div><div class="ttdoc">Convert SIP hangup causes to Asterisk hangup causes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02860">chan_pjsip.c:2860</a></div></div>
<div class="ttc" id="channel_8h_html_aa9a1d01546e0fc0047e56ba589790b6f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a></div><div class="ttdeci">void ast_set_hangupsource(struct ast_channel *chan, const char *source, int force)</div><div class="ttdoc">Set the source of the hangup in this channel and it&amp;#39;s bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02504">channel.c:2504</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a519e9e626663d0bf89c04738e0353a9d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a519e9e626663d0bf89c04738e0353a9d">SCOPE_EXIT_RTN</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN(...)</div><div class="ttdoc">Scope Exit with return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00854">logger.h:854</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="channel_8h_html_aa04afa262d7e1b211ee32d17c949a275"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a></div><div class="ttdeci">int ast_channel_hangupcause(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00427">channel_internal_api.c:427</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c8b846325f7156e1d24171178235328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c8b846325f7156e1d24171178235328">&#9670;&nbsp;</a></span>chan_pjsip_set_rtp_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_set_rtp_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>vrtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>tpeer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nat_active</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by RTP engine to change where the remote party should send media. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00448">448</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">cdata()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00766">ast_sip_endpoint_media_configuration::direct_media</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00737">ast_sip_direct_media_configuration::disable_on_nat</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00377">rtp_direct_media_data_create()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00396">send_direct_media_request()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a> *<a class="code" href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(cap, &amp;STR_TMP)));</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="comment">/* Don&#39;t try to do any direct media shenanigans on early bridges */</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">if</span> ((rtp || vrtp || tpeer) &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(chan)) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Disregarding setting RTP on %s: channel is not bridged\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Channel not bridged\n&quot;</span>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span> (nat_active &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#ab9cc084b11d47a7fc3e1642b67289e96">disable_on_nat</a>) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Disregarding setting RTP on %s: NAT is active\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;NAT is active\n&quot;</span>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   cdata = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ade7b53c1482ffe11a7d86af080e35558">rtp_direct_media_data_create</a>(chan, rtp, vrtp, cap, session);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">if</span> (!cdata) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9bb831542952f8322bcf155023251a15">send_direct_media_request</a>, cdata)) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to send direct media request for channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdata, -1);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00358">chan_pjsip.c:358</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a9eb74cd83f19dba0d41c5fbfc6e30f39"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">ast_sip_endpoint_media_configuration::direct_media</a></div><div class="ttdeci">struct ast_sip_direct_media_configuration direct_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00766">res_pjsip.h:766</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="structast__sip__direct__media__configuration_html_ab9cc084b11d47a7fc3e1642b67289e96"><div class="ttname"><a href="../../d0/d9d/structast__sip__direct__media__configuration.html#ab9cc084b11d47a7fc3e1642b67289e96">ast_sip_direct_media_configuration::disable_on_nat</a></div><div class="ttdeci">unsigned int disable_on_nat</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00737">res_pjsip.h:737</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9bb831542952f8322bcf155023251a15"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9bb831542952f8322bcf155023251a15">send_direct_media_request</a></div><div class="ttdeci">static int send_direct_media_request(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00396">chan_pjsip.c:396</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="res__calendar__ews_8c_html_a2411700da33d0d5308742613523df089"><div class="ttname"><a href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a></div><div class="ttdeci">static int cdata(void *userdata, int state, const char *cdata, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">res_calendar_ews.c:327</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ade7b53c1482ffe11a7d86af080e35558"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ade7b53c1482ffe11a7d86af080e35558">rtp_direct_media_data_create</a></div><div class="ttdeci">static struct rtp_direct_media_data * rtp_direct_media_data_create(struct ast_channel *chan, struct ast_rtp_instance *rtp, struct ast_rtp_instance *vrtp, const struct ast_format_cap *cap, struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00377">chan_pjsip.c:377</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21db1e2f0c3a4ac28bdc30ff17dc5f3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21db1e2f0c3a4ac28bdc30ff17dc5f3d">&#9670;&nbsp;</a></span>chan_pjsip_transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called by core for Asterisk initiated transfer. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02131">2131</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02096">transfer()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01858">transfer_data_alloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;{</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d7c/structtransfer__data.html">transfer_data</a> *trnf_data = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a82de71388fa4f49e43fe0eef0a03bfec">transfer_data_alloc</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>, <a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="keywordflow">if</span> (!trnf_data) {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aaae704756dfd363718a01f2b0ed6acdf">transfer</a>, trnf_data)) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error requesting transfer\n&quot;</span>);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(trnf_data);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;   }</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_aaae704756dfd363718a01f2b0ed6acdf"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aaae704756dfd363718a01f2b0ed6acdf">transfer</a></div><div class="ttdeci">static int transfer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02096">chan_pjsip.c:2096</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a82de71388fa4f49e43fe0eef0a03bfec"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a82de71388fa4f49e43fe0eef0a03bfec">transfer_data_alloc</a></div><div class="ttdeci">static struct transfer_data * transfer_data_alloc(struct ast_sip_session *session, const char *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01858">chan_pjsip.c:1858</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="structtransfer__data_html"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html">transfer_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01845">chan_pjsip.c:1845</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtransfer__data_html_a23b26cdb3a71f525caf03b57f68d47fa"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">transfer_data::target</a></div><div class="ttdeci">char * target</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01847">chan_pjsip.c:1847</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc8ea439d812684a1e864e636df5bba6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8ea439d812684a1e864e636df5bba6">&#9670;&nbsp;</a></span>chan_pjsip_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01039">1039</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00949">chan_pjsip_write_stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;{</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8a08f021a16a64fdb2e854e6d72cdc6">chan_pjsip_write_stream</a>(ast, -1, frame);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_ab8a08f021a16a64fdb2e854e6d72cdc6"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8a08f021a16a64fdb2e854e6d72cdc6">chan_pjsip_write_stream</a></div><div class="ttdeci">static int chan_pjsip_write_stream(struct ast_channel *ast, int stream_num, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00949">chan_pjsip.c:949</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8a08f021a16a64fdb2e854e6d72cdc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8a08f021a16a64fdb2e854e6d72cdc6">&#9670;&nbsp;</a></span>chan_pjsip_write_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int chan_pjsip_write_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00949">949</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00848">ast_channel_rawreadformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00852">ast_channel_rawwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00753">ast_channel_readtrans()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00761">ast_channel_writetrans()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">AST_FRAME_CNG</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">AST_FRAME_MODEM</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00034">AST_MEDIA_TYPE_IMAGE</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00299">AST_RTP_RTCP_PSFB</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00928">ast_translate_path_to_str()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">ast_sip_session_media::type</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00107">ast_sip_session_media::write_callback</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00082">chan_pjsip_pvt_dtor()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01039">chan_pjsip_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;{</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *media = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   <span class="comment">/* The core provides a guarantee that the stream will exist when we are called if stream_num is provided */</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &gt;= 0) {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="comment">/* What is not guaranteed is that a media session will exist */</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions)) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         media = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions, <a class="code" href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <span class="keywordflow">switch</span> (frame-&gt;frametype) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">if</span> (!media) {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel %s stream %d is of type &#39;%s&#39;, not audio!\n&quot;</span>,</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), <a class="code" href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media == channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>] &amp;&amp;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), frame-&gt;subclass.format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *cap_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *write_transpath = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(256);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *read_transpath = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(256);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <span class="stringliteral">&quot;Channel %s asked to send %s frame when native formats are %s (rd:%s-&gt;%s;%s wr:%s-&gt;%s;%s)\n&quot;</span>,</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast),</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(frame-&gt;subclass.format),</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(ast), &amp;cap_buf),</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>(ast)),</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(ast)),</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <a class="code" href="../../db/d39/translate_8h.html#a33934307055c00738d6166ad82550711">ast_translate_path_to_str</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(ast), &amp;read_transpath),</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(ast)),</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(ast)),</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <a class="code" href="../../db/d39/translate_8h.html#a33934307055c00738d6166ad82550711">ast_translate_path_to_str</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(ast), &amp;write_transpath));</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         res = media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>(session, media, frame);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>:</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">if</span> (!media) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel %s stream %d is of type &#39;%s&#39;, not video!\n&quot;</span>,</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), stream_num, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>) {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;         res = media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>(session, media, frame);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>:</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">if</span> (!media) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a>) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel %s stream %d is of type &#39;%s&#39;, not image!\n&quot;</span>,</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), stream_num, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;         res = media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>(session, media, frame);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>:</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>:</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="comment">/* We only support writing out feedback */</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">if</span> (frame-&gt;subclass.integer != <a class="code" href="../../d5/dde/rtp__engine_8h.html#a02281c7f49b834e978a6fa7d7dd19de2">AST_RTP_RTCP_PSFB</a> || !media) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Channel %s stream %d is of type &#39;%s&#39;, not video! Unable to write RTCP feedback.\n&quot;</span>,</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), stream_num, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;         res = media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">write_callback</a>(session, media, frame);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t send %u type frames with PJSIP\n&quot;</span>, frame-&gt;frametype);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;}</div><div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a25e03a749a471c5fbd87eab596cce9a7"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a25e03a749a471c5fbd87eab596cce9a7">ast_sip_session_media::write_callback</a></div><div class="ttdeci">ast_sip_session_media_write_cb write_callback</div><div class="ttdoc">The write callback when writing frames. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00107">res_pjsip_session.h:107</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="channel_8h_html_a6b4548259e61f691c654aed0025e5502"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a></div><div class="ttdeci">struct ast_trans_pvt * ast_channel_readtrans(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00753">channel_internal_api.c:753</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00034">codec.h:34</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_ab5c41a2130385cadf78c64cacea7e3f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a></div><div class="ttdeci">struct ast_trans_pvt * ast_channel_writetrans(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00761">channel_internal_api.c:761</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8383e75e786449dd2f4258b0819dd8f1">ast_sip_session_media::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdoc">The stream number to place into any resulting frames. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00109">res_pjsip_session.h:109</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">include/asterisk/frame.h:123</a></div></div>
<div class="ttc" id="channel_8h_html_aa6ceb6b9067d793c4d00c566ae585f0b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a></div><div class="ttdeci">struct ast_format * ast_channel_rawreadformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00848">channel_internal_api.c:848</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">include/asterisk/frame.h:121</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_sip_session_media::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Media type of this session media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00105">res_pjsip_session.h:105</a></div></div>
<div class="ttc" id="translate_8h_html_a33934307055c00738d6166ad82550711"><div class="ttname"><a href="../../db/d39/translate_8h.html#a33934307055c00738d6166ad82550711">ast_translate_path_to_str</a></div><div class="ttdeci">const char * ast_translate_path_to_str(struct ast_trans_pvt *t, struct ast_str **str)</div><div class="ttdoc">Puts a string representation of the translation path into outbuf. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00928">translate.c:928</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="rtp__engine_8h_html_a02281c7f49b834e978a6fa7d7dd19de2"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a02281c7f49b834e978a6fa7d7dd19de2">AST_RTP_RTCP_PSFB</a></div><div class="ttdeci">#define AST_RTP_RTCP_PSFB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00299">rtp_engine.h:299</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="channel_8h_html_ad27c52cda6e6435a121900661ad5bdce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a></div><div class="ttdeci">struct ast_format * ast_channel_rawwriteformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00852">channel_internal_api.c:852</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16d7faa442d10ce3c3d4895054452956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d7faa442d10ce3c3d4895054452956">&#9670;&nbsp;</a></span>check_for_rtp_changes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_for_rtp_changes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>chan is locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00319">319</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02431">ast_channel_set_fd()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00196">AST_EXTENDED_FDS</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02192">ast_rtp_instance_fd()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l01228">ast_rtp_instance_get_and_cmp_remote_address</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03773">ast_rtp_instance_set_last_rx()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00705">ast_rtp_instance_set_prop()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00123">AST_RTP_PROPERTY_RTCP</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">ast_sip_session_media::direct_media_addr</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00298">rtp_find_rtcp_fd_position()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00396">send_direct_media_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordtype">int</span> changed = 0, position = -1;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      position = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aa8f089a1e6c8ec194dc302ab684317f2">rtp_find_rtcp_fd_position</a>(session, media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keywordflow">if</span> (rtp) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      changed = <a class="code" href="../../d5/dde/rtp__engine_8h.html#a50731b32fb370b5dde0071c58d8367a6">ast_rtp_instance_get_and_cmp_remote_address</a>(rtp, &amp;media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <span class="keywordflow">if</span> (position != -1) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(chan, position + <a class="code" href="../../d5/d7b/channel_8h.html#a12abef15e0e4a3f50b74b7c609e546f8">AST_EXTENDED_FDS</a>, -1);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a>, 0);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>)){</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">direct_media_addr</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      changed = 1;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">if</span> (media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         <span class="comment">/* Direct media has ended - reset time of last received RTP packet</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">          * to avoid premature RTP timeout. Synchronisation between the</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">          * modification of direct_mdedia_addr+last_rx here and reading the</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">          * values in res_pjsip_sdp_rtp.c:rtp_check_timeout() is provided</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">          * by the channel&#39;s lock (which is held while this function is</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">          * executed).</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <a class="code" href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a>, 1);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <span class="keywordflow">if</span> (position != -1) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(chan, position + <a class="code" href="../../d5/d7b/channel_8h.html#a12abef15e0e4a3f50b74b7c609e546f8">AST_EXTENDED_FDS</a>, <a class="code" href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, 1));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;         }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">return</span> changed;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="ttc" id="structast__sip__session__media_html_ab54fb097c283df49c3803d7bf416e51e"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#ab54fb097c283df49c3803d7bf416e51e">ast_sip_session_media::direct_media_addr</a></div><div class="ttdeci">struct ast_sockaddr direct_media_addr</div><div class="ttdoc">Direct media address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00081">res_pjsip_session.h:81</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a9ff41b61938f3d4dc4c82db103e7914ca9f63c95936712cfd6ec65555f1a27053">AST_RTP_PROPERTY_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00123">rtp_engine.h:123</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="channel_8h_html_a12abef15e0e4a3f50b74b7c609e546f8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a12abef15e0e4a3f50b74b7c609e546f8">AST_EXTENDED_FDS</a></div><div class="ttdeci">#define AST_EXTENDED_FDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00196">channel.h:196</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aee3ef7f9e53a34e743c3a95c9ca95fb4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a></div><div class="ttdeci">int ast_rtp_instance_fd(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Get the file descriptor for an RTP session (or RTCP) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02192">rtp_engine.c:2192</a></div></div>
<div class="ttc" id="channel_8h_html_aca37ca2f3d55a223d26617329ed48a3e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a></div><div class="ttdeci">void ast_channel_set_fd(struct ast_channel *chan, int which, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02431">channel.c:2431</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a77f59605d15d7dfc53e0df12352b8235"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a77f59605d15d7dfc53e0df12352b8235">ast_rtp_instance_set_prop</a></div><div class="ttdeci">void ast_rtp_instance_set_prop(struct ast_rtp_instance *instance, enum ast_rtp_property property, int value)</div><div class="ttdoc">Set the value of an RTP instance property. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00705">rtp_engine.c:705</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aa8f089a1e6c8ec194dc302ab684317f2"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aa8f089a1e6c8ec194dc302ab684317f2">rtp_find_rtcp_fd_position</a></div><div class="ttdeci">static int rtp_find_rtcp_fd_position(struct ast_sip_session *session, struct ast_rtp_instance *rtp)</div><div class="ttdoc">Helper function to find the position for RTCP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00298">chan_pjsip.c:298</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a50731b32fb370b5dde0071c58d8367a6"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a50731b32fb370b5dde0071c58d8367a6">ast_rtp_instance_get_and_cmp_remote_address</a></div><div class="ttdeci">#define ast_rtp_instance_get_and_cmp_remote_address(instance, address)</div><div class="ttdoc">Get the address of the remote endpoint that we are sending RTP to, comparing its address to another...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l01228">rtp_engine.h:1228</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a27714e89a2a2d136150789bc6d41e060"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a27714e89a2a2d136150789bc6d41e060">ast_rtp_instance_set_last_rx</a></div><div class="ttdeci">void ast_rtp_instance_set_last_rx(struct ast_rtp_instance *rtp, time_t time)</div><div class="ttdoc">Set the last RTP reception time. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l03773">rtp_engine.c:3773</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2634467e221b7d62bf172d824fcb43a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2634467e221b7d62bf172d824fcb43a4">&#9670;&nbsp;</a></span>clear_session_and_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void clear_session_and_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear a channel from a session along with its PVT. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02476">2476</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00569">ast_channel_tech_pvt_set()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00494">set_channel_on_rtp_instance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02516">chan_pjsip_hangup()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02483">hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;{</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a>(session, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(ast, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a78e2ade62c8bb21a578778fe8f416d88"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a78e2ade62c8bb21a578778fe8f416d88">set_channel_on_rtp_instance</a></div><div class="ttdeci">static void set_channel_on_rtp_instance(const struct ast_sip_session *session, const char *channel_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00494">chan_pjsip.c:494</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="channel_8h_html_a929b8b2cb36308e5cf4e51ed880bfcba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a></div><div class="ttdeci">void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00569">channel_internal_api.c:569</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe69405e6a4d0c81eacf9af760eef029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe69405e6a4d0c81eacf9af760eef029">&#9670;&nbsp;</a></span>compatible_formats_exist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int compatible_formats_exist </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if a topology is compatible with format capabilities. </p>
<p>This will return true if ANY formats in the topology are compatible with the format capabilities.</p>
<p>XXX When supporting true multistream, we will need to be sure to mark which streams from top1 are compatible with which streams from top2. Then the ones that are not compatible will need to be marked as "removed" so that they are negotiated as expected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">top</td><td>Topology </td></tr>
    <tr><td class="paramname">cap</td><td>Format capabilities </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>The topology has at least one compatible format </td></tr>
    <tr><td class="paramname">0</td><td>The topology has no compatible formats or an error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00526">526</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00655">ast_format_cap_iscompatible()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00930">ast_stream_topology_get_formats()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_from_top;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;Topology: %s Formats: %s\n&quot;</span>,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(top, &amp;STR_TMP)),</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(cap, &amp;STR_TMP)));</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   cap_from_top = <a class="code" href="../../d8/d95/stream_8h.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a>(top);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordflow">if</span> (!cap_from_top) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Topology had no formats\n&quot;</span>);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   res = <a class="code" href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a>(cap_from_top, cap);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cap_from_top, -1);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(res, <span class="stringliteral">&quot;Compatible? %s\n&quot;</span>, res ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="ttc" id="stream_8h_html_ac027a9684ada5477ddc7f64142b5338d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a></div><div class="ttdeci">struct ast_format_cap * ast_stream_topology_get_formats(struct ast_stream_topology *topology)</div><div class="ttdoc">Create a format capabilities structure representing the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00930">stream.c:930</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9c9b87b5062c057862aa7d4237db2780"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a></div><div class="ttdeci">int ast_format_cap_iscompatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2)</div><div class="ttdoc">Determine if any joint capabilities exist between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00655">format_cap.c:655</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48ba53077ace5491807c7e453c4beaa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48ba53077ace5491807c7e453c4beaa7">&#9670;&nbsp;</a></span>direct_media_mitigate_glare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int direct_media_mitigate_glare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00268">268</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00501">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_INCOMING</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00493">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00497">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_OUTGOING</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01285">ast_sip_session_get_datastore()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01290">ast_sip_session_remove_datastore()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00766">ast_sip_endpoint_media_configuration::direct_media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00735">ast_sip_direct_media_configuration::glare_mitigation</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00396">send_direct_media_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *, datastore, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a0089e4883f3e1989250dd9ea16bed256">glare_mitigation</a> ==</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65a1b974f79e278c86dc78e77564e7e931c">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_NONE</a>) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   datastore = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a0b6e787aa2429e93f12e7be624ec3970">ast_sip_session_get_datastore</a>(session, <span class="stringliteral">&quot;direct_media_glare_mitigation&quot;</span>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="comment">/* Removing the datastore ensures we won&#39;t try to mitigate glare on subsequent reinvites */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a80752332a327901006cee3a209c03968">ast_sip_session_remove_datastore</a>(session, <span class="stringliteral">&quot;direct_media_glare_mitigation&quot;</span>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">if</span> ((session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a0089e4883f3e1989250dd9ea16bed256">glare_mitigation</a> ==</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65ab67a92608203bb8760e72bd685553e0a">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_OUTGOING</a> &amp;&amp;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;role == PJSIP_ROLE_UAC) ||</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;         (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a0089e4883f3e1989250dd9ea16bed256">glare_mitigation</a> ==</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;         <a class="code" href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65a644fdf45e1546b8fe00d5b083e618a43">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_INCOMING</a> &amp;&amp;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;role == PJSIP_ROLE_UAS)) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a9eb74cd83f19dba0d41c5fbfc6e30f39"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">ast_sip_endpoint_media_configuration::direct_media</a></div><div class="ttdeci">struct ast_sip_direct_media_configuration direct_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00766">res_pjsip.h:766</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_af0d80814b235fcc050fda52376de2b65a1b974f79e278c86dc78e77564e7e931c"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65a1b974f79e278c86dc78e77564e7e931c">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00493">res_pjsip.h:493</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a80752332a327901006cee3a209c03968"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a80752332a327901006cee3a209c03968">ast_sip_session_remove_datastore</a></div><div class="ttdeci">void ast_sip_session_remove_datastore(struct ast_sip_session *session, const char *name)</div><div class="ttdoc">Remove a session datastore from the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01290">res_pjsip_session.c:1290</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a0b6e787aa2429e93f12e7be624ec3970"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a0b6e787aa2429e93f12e7be624ec3970">ast_sip_session_get_datastore</a></div><div class="ttdeci">struct ast_datastore * ast_sip_session_get_datastore(struct ast_sip_session *session, const char *name)</div><div class="ttdoc">Retrieve a session datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l01285">res_pjsip_session.c:1285</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_af0d80814b235fcc050fda52376de2b65ab67a92608203bb8760e72bd685553e0a"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65ab67a92608203bb8760e72bd685553e0a">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_OUTGOING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00497">res_pjsip.h:497</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_af0d80814b235fcc050fda52376de2b65a644fdf45e1546b8fe00d5b083e618a43"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#af0d80814b235fcc050fda52376de2b65a644fdf45e1546b8fe00d5b083e618a43">AST_SIP_DIRECT_MEDIA_GLARE_MITIGATION_INCOMING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00501">res_pjsip.h:501</a></div></div>
<div class="ttc" id="structast__sip__direct__media__configuration_html_a0089e4883f3e1989250dd9ea16bed256"><div class="ttname"><a href="../../d0/d9d/structast__sip__direct__media__configuration.html#a0089e4883f3e1989250dd9ea16bed256">ast_sip_direct_media_configuration::glare_mitigation</a></div><div class="ttdeci">enum ast_sip_direct_media_glare_mitigation glare_mitigation</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00735">res_pjsip.h:735</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5267e04f3e504a11bfaf6abf8ce855cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5267e04f3e504a11bfaf6abf8ce855cb">&#9670;&nbsp;</a></span>handle_topology_request_change()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_topology_request_change </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>proposed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01592">1592</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01575">send_topology_change_refresh()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">ast_sip_session::serializer</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01524">topology_change_refresh_data_alloc()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01516">topology_change_refresh_data_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;{</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a> *<a class="code" href="../../d7/ded/structrefresh__data.html">refresh_data</a>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   refresh_data = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a37ea972388db3c3094a132ee472cae72">topology_change_refresh_data_alloc</a>(session, proposed);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   <span class="keywordflow">if</span> (!refresh_data) {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create refresh_data\n&quot;</span>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   res = <a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">serializer</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a64237b7cef80387e6270c3464ac84539">send_topology_change_refresh</a>, refresh_data);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a>(refresh_data);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   }</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(res, <span class="stringliteral">&quot;RC: %d\n&quot;</span>, res);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_a37ea972388db3c3094a132ee472cae72"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a37ea972388db3c3094a132ee472cae72">topology_change_refresh_data_alloc</a></div><div class="ttdeci">static struct topology_change_refresh_data * topology_change_refresh_data_alloc(struct ast_sip_session *session, const struct ast_stream_topology *topology)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01524">chan_pjsip.c:1524</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a64237b7cef80387e6270c3464ac84539"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a64237b7cef80387e6270c3464ac84539">send_topology_change_refresh</a></div><div class="ttdeci">static int send_topology_change_refresh(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01575">chan_pjsip.c:1575</a></div></div>
<div class="ttc" id="structast__sip__session_html_ac23e23ba60f358de78a893d537c0afa4"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ac23e23ba60f358de78a893d537c0afa4">ast_sip_session::serializer</a></div><div class="ttdeci">struct ast_taskprocessor * serializer</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00195">res_pjsip_session.h:195</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01511">chan_pjsip.c:1511</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a8ad04a358d51294f6d05a862d0841eb8"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a></div><div class="ttdeci">static void topology_change_refresh_data_free(struct topology_change_refresh_data *refresh_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01516">chan_pjsip.c:1516</a></div></div>
<div class="ttc" id="structrefresh__data_html"><div class="ttname"><a href="../../d7/ded/structrefresh__data.html">refresh_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01485">pjsip/dialplan_functions.c:1485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae28b3b590d6f2c84e472625c81ae2bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae28b3b590d6f2c84e472625c81ae2bb">&#9670;&nbsp;</a></span>hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int hangup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02483">2483</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03451">ast_sip_session_terminate()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02450">hangup_data::cause</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02451">hangup_data::chan</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02476">clear_session_and_channel()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02516">chan_pjsip_hangup()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01134">hangup_playback()</a>, and <a class="el" href="../../d2/d4d/astman_8c_source.html#l00561">manage_calls()</a>.</p>
<div class="fragment"><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;{</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *h_data = data;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = h_data-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="comment">    * Before cleaning we have to ensure that channel or its session is not NULL</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="comment">    * we have seen rare case when taskprocessor calls hangup but channel is NULL</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">    * due to SIP session timeout and answer happening at the same time</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="keywordflow">if</span> (channel) {</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <span class="keywordflow">if</span> (session) {</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;         <span class="keywordtype">int</span> cause = h_data-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="comment">         * It&#39;s possible that session_terminate might cause the session to be destroyed</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="comment">         * immediately so we need to keep a reference to it so we can NULL session-&gt;channel</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="comment">         * afterwards.</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;         <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ac548e363175ba43f7ad75438729deac3">ast_sip_session_terminate</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(session), cause);</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;         <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a2634467e221b7d62bf172d824fcb43a4">clear_session_and_channel</a>(session, ast);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(session);</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      }</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(channel);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   }</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(h_data);</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ac548e363175ba43f7ad75438729deac3"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ac548e363175ba43f7ad75438729deac3">ast_sip_session_terminate</a></div><div class="ttdeci">void ast_sip_session_terminate(struct ast_sip_session *session, int response)</div><div class="ttdoc">Terminate a session and, if possible, send the provided response code. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l03451">res_pjsip_session.c:3451</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="structhangup__data_html"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html">hangup_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01113">app_confbridge.c:1113</a></div></div>
<div class="ttc" id="structhangup__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">hangup_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02451">chan_pjsip.c:2451</a></div></div>
<div class="ttc" id="structhangup__data_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">hangup_data::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02450">chan_pjsip.c:2450</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__pjsip_8c_html_a2634467e221b7d62bf172d824fcb43a4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a2634467e221b7d62bf172d824fcb43a4">clear_session_and_channel</a></div><div class="ttdeci">static void clear_session_and_channel(struct ast_sip_session *session, struct ast_channel *ast)</div><div class="ttdoc">Clear a channel from a session along with its PVT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02476">chan_pjsip.c:2476</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1292b93a988ad0404f70650091708ad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1292b93a988ad0404f70650091708ad4">&#9670;&nbsp;</a></span>hangup_cause2sip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int hangup_cause2sip </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function which translates from Asterisk cause codes to SIP response codes. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02402">2402</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00129">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00110">AST_CAUSE_CALL_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00131">AST_CAUSE_CHAN_NOT_IMPLEMENTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00152">AST_CAUSE_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00114">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00116">AST_CAUSE_FACILITY_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00149">AST_CAUSE_FAILURE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00145">AST_CAUSE_INTERWORKING</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00115">AST_CAUSE_INVALID_NUMBER_FORMAT</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00108">AST_CAUSE_NO_ANSWER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00099">AST_CAUSE_NO_ROUTE_DESTINATION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00098">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00107">AST_CAUSE_NO_USER_RESPONSE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00118">AST_CAUSE_NORMAL_UNSPECIFIED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00154">AST_CAUSE_NOTDEFINED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00111">AST_CAUSE_NUMBER_CHANGED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00122">AST_CAUSE_SWITCH_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00153">AST_CAUSE_UNREGISTERED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00106">AST_CAUSE_USER_BUSY</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02516">chan_pjsip_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;{</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   <span class="keywordflow">switch</span> (cause) {</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>:             <span class="comment">/* 1 */</span></div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>:    <span class="comment">/* 3 IAX2: Can&#39;t find extension in context */</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#ac4b4141fb57b00f56083307b3e5fe9f8">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a>:    <span class="comment">/* 2 */</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <span class="keywordflow">return</span> 404;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a>:              <span class="comment">/* 34 */</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a>:       <span class="comment">/* 42 */</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="keywordflow">return</span> 503;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a>:        <span class="comment">/* 18 */</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <span class="keywordflow">return</span> 408;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a>:               <span class="comment">/* 19 */</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#acfea62de81ffbf78fd4856ad9ded150b">AST_CAUSE_UNREGISTERED</a>:        <span class="comment">/* 20 */</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      <span class="keywordflow">return</span> 480;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>:           <span class="comment">/* 21 */</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      <span class="keywordflow">return</span> 403;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a>:          <span class="comment">/* 22 */</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">return</span> 410;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#aadcc0ede679137ef3a3ed4472b974ee8">AST_CAUSE_NORMAL_UNSPECIFIED</a>:      <span class="comment">/* 31 */</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      <span class="keywordflow">return</span> 480;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a>:</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">return</span> 484;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a>:</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <span class="keywordflow">return</span> 486;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a>:</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      <span class="keywordflow">return</span> 500;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#aa49742b6e084d7a25a0994beba1fa9ea">AST_CAUSE_FACILITY_REJECTED</a>:       <span class="comment">/* 29 */</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordflow">return</span> 501;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a33da602c4e2bb5f5060453878dbeb1f6">AST_CAUSE_CHAN_NOT_IMPLEMENTED</a>:</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="keywordflow">return</span> 503;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>:</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <span class="keywordflow">return</span> 502;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>:       <span class="comment">/* Can&#39;t find codec to connect to host */</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">return</span> 488;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>:    <span class="comment">/* Unspecified Interworking issues */</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">return</span> 500;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a9462c5c03560a909199202e6e2dbad3f">AST_CAUSE_NOTDEFINED</a>:</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;AST hangup cause %d (no match found in PJSIP)\n&quot;</span>, cause);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   }</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   <span class="comment">/* Never reached */</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;}</div><div class="ttc" id="causes_8h_html_a02b3785262e0be6843e8e9d235d8d78d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_SWITCH_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00122">causes.h:122</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="causes_8h_html_aa49742b6e084d7a25a0994beba1fa9ea"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aa49742b6e084d7a25a0994beba1fa9ea">AST_CAUSE_FACILITY_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_FACILITY_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00116">causes.h:116</a></div></div>
<div class="ttc" id="causes_8h_html_a5310fd2a65b78fb6840b0e3e883a2470"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a></div><div class="ttdeci">#define AST_CAUSE_NO_USER_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00107">causes.h:107</a></div></div>
<div class="ttc" id="causes_8h_html_a29549b982646ee60f116fc4f55c711e5"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_NUMBER_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00115">causes.h:115</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="causes_8h_html_ac4b4141fb57b00f56083307b3e5fe9f8"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ac4b4141fb57b00f56083307b3e5fe9f8">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_TRANSIT_NET</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00098">causes.h:98</a></div></div>
<div class="ttc" id="causes_8h_html_a33da602c4e2bb5f5060453878dbeb1f6"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a33da602c4e2bb5f5060453878dbeb1f6">AST_CAUSE_CHAN_NOT_IMPLEMENTED</a></div><div class="ttdeci">#define AST_CAUSE_CHAN_NOT_IMPLEMENTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00131">causes.h:131</a></div></div>
<div class="ttc" id="causes_8h_html_af03fc9fe2f0ecc69330e014aff8d0f73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a></div><div class="ttdeci">#define AST_CAUSE_NO_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00108">causes.h:108</a></div></div>
<div class="ttc" id="causes_8h_html_a9462c5c03560a909199202e6e2dbad3f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9462c5c03560a909199202e6e2dbad3f">AST_CAUSE_NOTDEFINED</a></div><div class="ttdeci">#define AST_CAUSE_NOTDEFINED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00154">causes.h:154</a></div></div>
<div class="ttc" id="causes_8h_html_a51ccdf5c6aa26375323fd14cfef02618"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_DESTINATION_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00114">causes.h:114</a></div></div>
<div class="ttc" id="causes_8h_html_a45c0c189b93333bad969b8f371d8442d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00149">causes.h:149</a></div></div>
<div class="ttc" id="causes_8h_html_aadcc0ede679137ef3a3ed4472b974ee8"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aadcc0ede679137ef3a3ed4472b974ee8">AST_CAUSE_NORMAL_UNSPECIFIED</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00118">causes.h:118</a></div></div>
<div class="ttc" id="causes_8h_html_acfea62de81ffbf78fd4856ad9ded150b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#acfea62de81ffbf78fd4856ad9ded150b">AST_CAUSE_UNREGISTERED</a></div><div class="ttdeci">#define AST_CAUSE_UNREGISTERED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00153">causes.h:153</a></div></div>
<div class="ttc" id="causes_8h_html_a19c43722b8b1260faa56227e481479c6"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a></div><div class="ttdeci">#define AST_CAUSE_NUMBER_CHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00111">causes.h:111</a></div></div>
<div class="ttc" id="causes_8h_html_a13666e22c99b4ccda92e6e1431368474"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a></div><div class="ttdeci">#define AST_CAUSE_INTERWORKING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00145">causes.h:145</a></div></div>
<div class="ttc" id="causes_8h_html_ace4ceec464072bb9e269b6a52e7a6631"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00099">causes.h:99</a></div></div>
<div class="ttc" id="causes_8h_html_aff0e956cb3ef657557fa468a17416c0b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_USER_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00106">causes.h:106</a></div></div>
<div class="ttc" id="causes_8h_html_a9900b24b261c275bb54631f16d4d38cc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00110">causes.h:110</a></div></div>
<div class="ttc" id="causes_8h_html_a208e4fc34932b91fc9e90d9008329e87"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00129">causes.h:129</a></div></div>
<div class="ttc" id="causes_8h_html_a0a35518d7b448a53da368cf57f354fba"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00152">causes.h:152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c23fd76c1946c0423cd731b8657fe3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c23fd76c1946c0423cd731b8657fe3a">&#9670;&nbsp;</a></span>hangup_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/ddb/structhangup__data.html">hangup_data</a>* hangup_data_alloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02461">2461</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02450">hangup_data::cause</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02451">hangup_data::chan</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02454">hangup_data_destroy()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02516">chan_pjsip_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;{</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *h_data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*h_data), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#abfdb86d23028685b2e40034325c07fe7">hangup_data_destroy</a>);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keywordflow">if</span> (!h_data) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   }</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;   h_data-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   h_data-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">return</span> h_data;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_abfdb86d23028685b2e40034325c07fe7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#abfdb86d23028685b2e40034325c07fe7">hangup_data_destroy</a></div><div class="ttdeci">static void hangup_data_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02454">chan_pjsip.c:2454</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structhangup__data_html"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html">hangup_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01113">app_confbridge.c:1113</a></div></div>
<div class="ttc" id="structhangup__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">hangup_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02451">chan_pjsip.c:2451</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structhangup__data_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">hangup_data::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02450">chan_pjsip.c:2450</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abfdb86d23028685b2e40034325c07fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfdb86d23028685b2e40034325c07fe7">&#9670;&nbsp;</a></span>hangup_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void hangup_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02454">2454</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02451">hangup_data::chan</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02461">hangup_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;{</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/ddb/structhangup__data.html">hangup_data</a> *h_data = obj;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   h_data-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(h_data-&gt;<a class="code" href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div><div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structhangup__data_html"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html">hangup_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcf/app__confbridge_8c_source.html#l01113">app_confbridge.c:1113</a></div></div>
<div class="ttc" id="structhangup__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#a84d1435c5b8d387806714ea7079304b7">hangup_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02451">chan_pjsip.c:2451</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a933506a953d4f1e0121c580c7d38007d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a933506a953d4f1e0121c580c7d38007d">&#9670;&nbsp;</a></span>hangup_sip2cause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int hangup_sip2cause </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert SIP hangup causes to Asterisk hangup causes. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02860">2860</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00129">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00148">AST_CAUSE_BUSY</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00110">AST_CAUSE_CALL_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00152">AST_CAUSE_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00114">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00116">AST_CAUSE_FACILITY_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00149">AST_CAUSE_FAILURE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00145">AST_CAUSE_INTERWORKING</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00115">AST_CAUSE_INVALID_NUMBER_FORMAT</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00108">AST_CAUSE_NO_ANSWER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00099">AST_CAUSE_NO_ROUTE_DESTINATION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00107">AST_CAUSE_NO_USER_RESPONSE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00150">AST_CAUSE_NORMAL</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00121">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00111">AST_CAUSE_NUMBER_CHANGED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00142">AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>, and <a class="el" href="../../d4/da3/causes_8h_source.html#l00106">AST_CAUSE_USER_BUSY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03156">chan_pjsip_incoming_response_update_cause()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02972">chan_pjsip_session_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;{</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;   <span class="comment">/* Possible values taken from causes.h */</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;   <span class="keywordflow">switch</span>(<a class="code" href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>) {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;   <span class="keywordflow">case</span> 401:       <span class="comment">/* Unauthorized */</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>;</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;   <span class="keywordflow">case</span> 403:       <span class="comment">/* Not found */</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   <span class="keywordflow">case</span> 404:       <span class="comment">/* Not found */</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;   <span class="keywordflow">case</span> 405:       <span class="comment">/* Method not allowed */</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;   <span class="keywordflow">case</span> 407:       <span class="comment">/* Proxy authentication required */</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;   <span class="keywordflow">case</span> 408:       <span class="comment">/* No reaction */</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a>;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;   <span class="keywordflow">case</span> 409:       <span class="comment">/* Conflict */</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;   <span class="keywordflow">case</span> 410:       <span class="comment">/* Gone */</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a>;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   <span class="keywordflow">case</span> 411:       <span class="comment">/* Length required */</span></div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;   <span class="keywordflow">case</span> 413:       <span class="comment">/* Request entity too large */</span></div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;   <span class="keywordflow">case</span> 414:       <span class="comment">/* Request URI too large */</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   <span class="keywordflow">case</span> 415:       <span class="comment">/* Unsupported media type */</span></div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <span class="keywordflow">case</span> 420:       <span class="comment">/* Bad extension */</span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;   <span class="keywordflow">case</span> 480:       <span class="comment">/* No answer */</span></div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a>;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;   <span class="keywordflow">case</span> 481:       <span class="comment">/* No answer */</span></div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;   <span class="keywordflow">case</span> 482:       <span class="comment">/* Loop detected */</span></div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <span class="keywordflow">case</span> 483:       <span class="comment">/* Too many hops */</span></div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a>;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   <span class="keywordflow">case</span> 484:       <span class="comment">/* Address incomplete */</span></div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a>;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   <span class="keywordflow">case</span> 485:       <span class="comment">/* Ambiguous */</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="keywordflow">case</span> 486:       <span class="comment">/* Busy everywhere */</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a>;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   <span class="keywordflow">case</span> 487:       <span class="comment">/* Request terminated */</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;   <span class="keywordflow">case</span> 488:       <span class="comment">/* No codecs approved */</span></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>;</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;   <span class="keywordflow">case</span> 491:       <span class="comment">/* Request pending */</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;   <span class="keywordflow">case</span> 493:       <span class="comment">/* Undecipherable */</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   <span class="keywordflow">case</span> 500:       <span class="comment">/* Server internal failure */</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a>;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;   <span class="keywordflow">case</span> 501:       <span class="comment">/* Call rejected */</span></div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#aa49742b6e084d7a25a0994beba1fa9ea">AST_CAUSE_FACILITY_REJECTED</a>;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;   <span class="keywordflow">case</span> 502:</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;   <span class="keywordflow">case</span> 503:       <span class="comment">/* Service unavailable */</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a>;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   <span class="keywordflow">case</span> 504:       <span class="comment">/* Gateway timeout */</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#abe4368acff74514c171c3bd705340529">AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</a>;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   <span class="keywordflow">case</span> 505:       <span class="comment">/* SIP version not supported */</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">case</span> 600:       <span class="comment">/* Busy everywhere */</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   <span class="keywordflow">case</span> 603:       <span class="comment">/* Decline */</span></div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;   <span class="keywordflow">case</span> 604:       <span class="comment">/* Does not exist anywhere */</span></div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   <span class="keywordflow">case</span> 606:       <span class="comment">/* Not acceptable */</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordflow">if</span> (cause &lt; 500 &amp;&amp; cause &gt;= 400) {</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;         <span class="comment">/* 4xx class error that is unknown - someting wrong with our request */</span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cause &lt; 600 &amp;&amp; cause &gt;= 500) {</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;         <span class="comment">/* 5xx class error - problem in the remote end */</span></div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a>;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cause &lt; 700 &amp;&amp; cause &gt;= 600) {</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;         <span class="comment">/* 6xx - global errors in the 4xx class */</span></div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      }</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/da3/causes_8h.html#a7858ab2ba4858d98e29f0ea54980313c">AST_CAUSE_NORMAL</a>;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;   }</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;   <span class="comment">/* Never reached */</span></div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;}</div><div class="ttc" id="causes_8h_html_a554ad1e279785609a381c194f770f554"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_TEMPORARY_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00121">causes.h:121</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="causes_8h_html_aa49742b6e084d7a25a0994beba1fa9ea"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aa49742b6e084d7a25a0994beba1fa9ea">AST_CAUSE_FACILITY_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_FACILITY_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00116">causes.h:116</a></div></div>
<div class="ttc" id="causes_8h_html_abe4368acff74514c171c3bd705340529"><div class="ttname"><a href="../../d4/da3/causes_8h.html#abe4368acff74514c171c3bd705340529">AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</a></div><div class="ttdeci">#define AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00142">causes.h:142</a></div></div>
<div class="ttc" id="causes_8h_html_a5310fd2a65b78fb6840b0e3e883a2470"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a></div><div class="ttdeci">#define AST_CAUSE_NO_USER_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00107">causes.h:107</a></div></div>
<div class="ttc" id="causes_8h_html_a29549b982646ee60f116fc4f55c711e5"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_NUMBER_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00115">causes.h:115</a></div></div>
<div class="ttc" id="causes_8h_html_af03fc9fe2f0ecc69330e014aff8d0f73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a></div><div class="ttdeci">#define AST_CAUSE_NO_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00108">causes.h:108</a></div></div>
<div class="ttc" id="causes_8h_html_a51ccdf5c6aa26375323fd14cfef02618"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_DESTINATION_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00114">causes.h:114</a></div></div>
<div class="ttc" id="causes_8h_html_a7858ab2ba4858d98e29f0ea54980313c"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a7858ab2ba4858d98e29f0ea54980313c">AST_CAUSE_NORMAL</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00150">causes.h:150</a></div></div>
<div class="ttc" id="causes_8h_html_a45c0c189b93333bad969b8f371d8442d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a45c0c189b93333bad969b8f371d8442d">AST_CAUSE_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00149">causes.h:149</a></div></div>
<div class="ttc" id="structhangup__data_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d5/ddb/structhangup__data.html#aa4d0ccb9d0904892652f2f258c5ad225">hangup_data::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02450">chan_pjsip.c:2450</a></div></div>
<div class="ttc" id="causes_8h_html_a19c43722b8b1260faa56227e481479c6"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a></div><div class="ttdeci">#define AST_CAUSE_NUMBER_CHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00111">causes.h:111</a></div></div>
<div class="ttc" id="causes_8h_html_a13666e22c99b4ccda92e6e1431368474"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a></div><div class="ttdeci">#define AST_CAUSE_INTERWORKING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00145">causes.h:145</a></div></div>
<div class="ttc" id="causes_8h_html_ace4ceec464072bb9e269b6a52e7a6631"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00099">causes.h:99</a></div></div>
<div class="ttc" id="causes_8h_html_aff0e956cb3ef657557fa468a17416c0b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_USER_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00106">causes.h:106</a></div></div>
<div class="ttc" id="causes_8h_html_ae009c193522491f7de7ea28b23f20868"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00148">causes.h:148</a></div></div>
<div class="ttc" id="causes_8h_html_a9900b24b261c275bb54631f16d4d38cc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00110">causes.h:110</a></div></div>
<div class="ttc" id="causes_8h_html_a208e4fc34932b91fc9e90d9008329e87"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00129">causes.h:129</a></div></div>
<div class="ttc" id="causes_8h_html_a0a35518d7b448a53da368cf57f354fba"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00152">causes.h:152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6613d45a04e74534bf7e318b2c71e077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6613d45a04e74534bf7e318b2c71e077">&#9670;&nbsp;</a></span>indicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int indicate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01333">1333</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">ast_sip_session_send_response()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01295">indicate_data::response_code</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01293">indicate_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l11167">ast_channel_request_stream_topology_change()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11197">ast_channel_stream_topology_changed()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l04515">indicate_data_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;{</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   pjsip_tx_data *packet = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d92/structindicate__data.html">indicate_data</a> *ind_data = data;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <span class="keywordtype">int</span> response_code = ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#ab87e6ba68d41639a13e89b5a2cf400e7">response_code</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <span class="keywordflow">if</span> ((session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state != PJSIP_INV_STATE_DISCONNECTED) &amp;&amp;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      (pjsip_inv_answer(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>, response_code, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;packet) == PJ_SUCCESS)) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a>(session, packet);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ind_data, -1);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div><div class="ttc" id="structindicate__data_html"><div class="ttname"><a href="../../d2/d92/structindicate__data.html">indicate_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01292">chan_pjsip.c:1292</a></div></div>
<div class="ttc" id="structindicate__data_html_ab87e6ba68d41639a13e89b5a2cf400e7"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#ab87e6ba68d41639a13e89b5a2cf400e7">indicate_data::response_code</a></div><div class="ttdeci">int response_code</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01295">chan_pjsip.c:1295</a></div></div>
<div class="ttc" id="structindicate__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a47bd1bb949183a58a194970acaccffbd">indicate_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01293">chan_pjsip.c:1293</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aed4c9a6bf6967790981c02027f5f02e8"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a></div><div class="ttdeci">void ast_sip_session_send_response(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">res_pjsip_session.c:2576</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac714053cdb838e3a0c6ef730eb243b6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac714053cdb838e3a0c6ef730eb243b6a">&#9670;&nbsp;</a></span>indicate_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/d92/structindicate__data.html">indicate_data</a>* indicate_data_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>response_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>frame_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01308">1308</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01294">indicate_data::condition</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01297">indicate_data::datalen</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01296">indicate_data::frame_data</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01300">indicate_data_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01295">indicate_data::response_code</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01293">indicate_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;{</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d92/structindicate__data.html">indicate_data</a> *ind_data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*ind_data), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#addaafd6178fd565072bc43df7570a2fd">indicate_data_destroy</a>);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keywordflow">if</span> (!ind_data) {</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">frame_data</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<a class="code" href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">datalen</a>);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordflow">if</span> (!ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">frame_data</a>) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ind_data, -1);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   memcpy(ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">frame_data</a>, <a class="code" href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">frame_data</a>, <a class="code" href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">datalen</a>);</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">datalen</a> = <a class="code" href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">datalen</a>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a6dc6d201aaa7df9ea3e8b5247a639f16">condition</a> = <a class="code" href="../../d2/d92/structindicate__data.html#a6dc6d201aaa7df9ea3e8b5247a639f16">condition</a>;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#ab87e6ba68d41639a13e89b5a2cf400e7">response_code</a> = <a class="code" href="../../d2/d92/structindicate__data.html#ab87e6ba68d41639a13e89b5a2cf400e7">response_code</a>;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, +1);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   <span class="keywordflow">return</span> ind_data;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;}</div><div class="ttc" id="structindicate__data_html"><div class="ttname"><a href="../../d2/d92/structindicate__data.html">indicate_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01292">chan_pjsip.c:1292</a></div></div>
<div class="ttc" id="structindicate__data_html_ab87e6ba68d41639a13e89b5a2cf400e7"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#ab87e6ba68d41639a13e89b5a2cf400e7">indicate_data::response_code</a></div><div class="ttdeci">int response_code</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01295">chan_pjsip.c:1295</a></div></div>
<div class="ttc" id="structindicate__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a47bd1bb949183a58a194970acaccffbd">indicate_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01293">chan_pjsip.c:1293</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_addaafd6178fd565072bc43df7570a2fd"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#addaafd6178fd565072bc43df7570a2fd">indicate_data_destroy</a></div><div class="ttdeci">static void indicate_data_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01300">chan_pjsip.c:1300</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="structindicate__data_html_a1e2c1177cb03ac20e08a504794b07d3d"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">indicate_data::frame_data</a></div><div class="ttdeci">void * frame_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01296">chan_pjsip.c:1296</a></div></div>
<div class="ttc" id="structindicate__data_html_a3d12e161726566d24a1d0cf6c6b416bb"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a3d12e161726566d24a1d0cf6c6b416bb">indicate_data::datalen</a></div><div class="ttdeci">size_t datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01297">chan_pjsip.c:1297</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structindicate__data_html_a6dc6d201aaa7df9ea3e8b5247a639f16"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a6dc6d201aaa7df9ea3e8b5247a639f16">indicate_data::condition</a></div><div class="ttdeci">int condition</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01294">chan_pjsip.c:1294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addaafd6178fd565072bc43df7570a2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addaafd6178fd565072bc43df7570a2fd">&#9670;&nbsp;</a></span>indicate_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void indicate_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01300">1300</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01296">indicate_data::frame_data</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01293">indicate_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01308">indicate_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;{</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d92/structindicate__data.html">indicate_data</a> *ind_data = obj;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">frame_data</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ind_data-&gt;<a class="code" href="../../d2/d92/structindicate__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>, -1);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div><div class="ttc" id="structindicate__data_html"><div class="ttname"><a href="../../d2/d92/structindicate__data.html">indicate_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01292">chan_pjsip.c:1292</a></div></div>
<div class="ttc" id="structindicate__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a47bd1bb949183a58a194970acaccffbd">indicate_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01293">chan_pjsip.c:1293</a></div></div>
<div class="ttc" id="structindicate__data_html_a1e2c1177cb03ac20e08a504794b07d3d"><div class="ttname"><a href="../../d2/d92/structindicate__data.html#a1e2c1177cb03ac20e08a504794b07d3d">indicate_data::frame_data</a></div><div class="ttdeci">void * frame_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01296">chan_pjsip.c:1296</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd7da40b4cb4876eb0098dfff983d661"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7da40b4cb4876eb0098dfff983d661">&#9670;&nbsp;</a></span>info_dtmf_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a>* info_dtmf_data_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02205">2205</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02195">info_dtmf_data::digit</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02196">info_dtmf_data::duration</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02199">info_dtmf_data_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02194">info_dtmf_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02262">chan_pjsip_digit_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;{</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a> *dtmf_data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*dtmf_data), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ae64662336deeefbd86eec60ea7a4a2c2">info_dtmf_data_destroy</a>);</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <span class="keywordflow">if</span> (!dtmf_data) {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   }</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, +1);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   dtmf_data-&gt;<a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   dtmf_data-&gt;<a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   dtmf_data-&gt;<a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a> = <a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">duration</a>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   <span class="keywordflow">return</span> dtmf_data;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html_a095ceb846c8c874cd3fcc5cdaf6ade81"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html#a095ceb846c8c874cd3fcc5cdaf6ade81">info_dtmf_data::duration</a></div><div class="ttdeci">unsigned int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02196">chan_pjsip.c:2196</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html#ac2c887b7f7b359bfdda8a128980f5081">info_dtmf_data::digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02195">chan_pjsip.c:2195</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02193">chan_pjsip.c:2193</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ae64662336deeefbd86eec60ea7a4a2c2"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ae64662336deeefbd86eec60ea7a4a2c2">info_dtmf_data_destroy</a></div><div class="ttdeci">static void info_dtmf_data_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02199">chan_pjsip.c:2199</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html#a47bd1bb949183a58a194970acaccffbd">info_dtmf_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02194">chan_pjsip.c:2194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae64662336deeefbd86eec60ea7a4a2c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae64662336deeefbd86eec60ea7a4a2c2">&#9670;&nbsp;</a></span>info_dtmf_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void info_dtmf_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02199">2199</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02194">info_dtmf_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02205">info_dtmf_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;{</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a> *dtmf_data = obj;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dtmf_data-&gt;<a class="code" href="../../dc/dfd/structinfo__dtmf__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>, -1);</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;}</div><div class="ttc" id="structinfo__dtmf__data_html"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02193">chan_pjsip.c:2193</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html#a47bd1bb949183a58a194970acaccffbd">info_dtmf_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02194">chan_pjsip.c:2194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aebb2528f712aada7a199bb35c42279eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebb2528f712aada7a199bb35c42279eb">&#9670;&nbsp;</a></span>is_colp_update_allowed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_colp_update_allowed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01402">1402</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00900">ast_channel_connected_effective_id()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01821">ast_party_id_presentation()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00323">AST_PRES_RESTRICTION</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00645">ast_sip_endpoint_id_configuration::send_connected_line</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00635">ast_sip_endpoint_id_configuration::send_pai</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00637">ast_sip_endpoint_id_configuration::send_rpid</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00633">ast_sip_endpoint_id_configuration::trust_outbound</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01429">update_connected_line_information()</a>.</p>
<div class="fragment"><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;{</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> connected_id;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <span class="keywordtype">int</span> update_allowed = 0;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a858d40415a9622fddfefb0f0e8499d06">send_connected_line</a></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      || (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aabb2d775f0834beed9dc43acbdbd5a79">send_pai</a> &amp;&amp; !session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aefefb4f20a7e8f4b9be27b5bdc622cfd">send_rpid</a>)) {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">    * Check if privacy allows the update.  Check while the channel</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">    * is locked so we can work with the shallow connected_id copy.</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   connected_id = <a class="code" href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">if</span> (connected_id.number.valid</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      &amp;&amp; (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a54f1b35ed47fddbc454a90daa3b879c7">trust_outbound</a></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;         || (<a class="code" href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(&amp;connected_id) &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>) == <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>)) {</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      update_allowed = 1;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   }</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keywordflow">return</span> update_allowed;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div><div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_aefefb4f20a7e8f4b9be27b5bdc622cfd"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aefefb4f20a7e8f4b9be27b5bdc622cfd">ast_sip_endpoint_id_configuration::send_rpid</a></div><div class="ttdeci">unsigned int send_rpid</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00637">res_pjsip.h:637</a></div></div>
<div class="ttc" id="channel_8h_html_a39aac47fef1240391fd97e055522fd83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a></div><div class="ttdeci">int ast_party_id_presentation(const struct ast_party_id *id)</div><div class="ttdoc">Determine the overall presentation value for the given party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01821">channel.c:1821</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a54f1b35ed47fddbc454a90daa3b879c7"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a54f1b35ed47fddbc454a90daa3b879c7">ast_sip_endpoint_id_configuration::trust_outbound</a></div><div class="ttdeci">unsigned int trust_outbound</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00633">res_pjsip.h:633</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a858d40415a9622fddfefb0f0e8499d06"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a858d40415a9622fddfefb0f0e8499d06">ast_sip_endpoint_id_configuration::send_connected_line</a></div><div class="ttdeci">unsigned int send_connected_line</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00645">res_pjsip.h:645</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="channel_8h_html_abd6165fa9617e1bb5efee3befa3e963d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a></div><div class="ttdeci">struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00900">channel_internal_api.c:900</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="callerid_8h_html_aec2d69e281c81503bc532e107ca26f66"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a></div><div class="ttdeci">#define AST_PRES_RESTRICTION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00323">callerid.h:323</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_aabb2d775f0834beed9dc43acbdbd5a79"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#aabb2d775f0834beed9dc43acbdbd5a79">ast_sip_endpoint_id_configuration::send_pai</a></div><div class="ttdeci">unsigned int send_pai</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00635">res_pjsip.h:635</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6c0c3d3ac88d921e3ecbd8a7f8faae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6c0c3d3ac88d921e3ecbd8a7f8faae1">&#9670;&nbsp;</a></span>is_compatible_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_compatible_format </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if the given frame is in a format we've negotiated. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00824">824</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00330">ast_stream_get_formats()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00788">ast_stream_topology_get_stream()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00838">chan_pjsip_read_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream = <a class="code" href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a>(topology, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap = <a class="code" href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(stream);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(cap, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;}</div><div class="ttc" id="stream_8h_html_aa4a9c0de95417c5db8eda8544cd1631d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a></div><div class="ttdeci">struct ast_stream * ast_stream_topology_get_stream(const struct ast_stream_topology *topology, unsigned int position)</div><div class="ttdoc">Get a specific stream from the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00788">stream.c:788</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="stream_8h_html_ae8e2f46d218285e0f0ec97ba8ab77ffb"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a></div><div class="ttdeci">const struct ast_format_cap * ast_stream_get_formats(const struct ast_stream *stream)</div><div class="ttdoc">Get the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00330">stream.c:330</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the module. </p>
<p>Module loading including tests for configuration or dependencies. This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE, or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails tests return AST_MODULE_LOAD_FAILURE. If the module can not load the configuration file or other non-critical problem return AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">3304</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00367">AO2_ALLOC_OPT_LOCK_RWLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01192">AO2_CONTAINER_ALLOC_OPT_DUPS_REJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00539">ast_channel_register()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00570">ast_channel_unregister()</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00216">ast_format_cap_append_by_type()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00847">ast_rtp_glue_register</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00408">ast_rtp_glue_unregister()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02344">ast_sip_get_endpoints()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03315">ast_sip_register_service()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00616">ast_sip_session_register_supplement</a>, <a class="el" href="../../d2/dc0/pjsip__session_8c_source.html#l00063">ast_sip_session_unregister_supplement()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03331">ast_sip_unregister_service()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00078">channel_type</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">endpoints</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d9/d6d/cli__commands_8c_source.html#l00448">pjsip_channel_cli_register()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01915">refer_callback_module</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01066">uid_hold_hash_fn()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01084">uid_hold_sort_fn()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03254">update_devstate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03403">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;{</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a>;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;   }</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#ac2fd3e9ee89436cbf6b2ac374bab711b">ast_rtp_glue_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9d86812ca5c40c8e82be3e77ce5156c8">chan_pjsip_rtp_glue</a>);</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>)) {</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register channel class %s\n&quot;</span>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aab0df6f9b19263e2a45ed03a8bef4a0d">channel_type</a>);</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;   }</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a637fba0a1b7a8d6059fdc2c9e598e8bc">chan_pjsip_dial_contacts_function</a>)) {</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register PJSIP_DIAL_CONTACTS dialplan function\n&quot;</span>);</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;   }</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#acda6def7b4067227ca75d803f66ac0db">chan_pjsip_parse_uri_function</a>)) {</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register PJSIP_PARSE_URI dialplan function\n&quot;</span>);</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   }</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aba7e6da76cbe793e06eb03e0a01c5275">media_offer_function</a>)) {</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to register PJSIP_MEDIA_OFFER dialplan function\n&quot;</span>);</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   }</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#afea6ae18672039da64b60ec44988f100">dtmf_mode_function</a>)) {</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to register PJSIP_DTMF_MODE dialplan function\n&quot;</span>);</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;   }</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab5176ef2df39ebfba32475964a912822">moh_passthrough_function</a>)) {</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to register PJSIP_MOH_PASSTHROUGH dialplan function\n&quot;</span>);</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;   }</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ade433b4f10a05327a621e8b05244cb32">session_refresh_function</a>)) {</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to register PJSIP_SEND_SESSION_REFRESH dialplan function\n&quot;</span>);</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   }</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>);</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a3fb40d1def7c4a16194fc411b28e9086">chan_pjsip_supplement</a>);</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aeccb50f70da772a3bef4ee65f8101f6b">chan_pjsip_supplement_response</a>);</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a7016a58d1b7524c186ccc72ec48ef488">AO2_ALLOC_OPT_LOCK_RWLOCK</a>,</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#afe7a6b368052cb171d371d873b7520acadaba53a115685d6a8944dd2c6a8d7bfb">AO2_CONTAINER_ALLOC_OPT_DUPS_REJECT</a>, 37, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a7cb19b644b4895d36ab32aa1c03c3dc5">uid_hold_hash_fn</a>,</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;         <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a1edc44a2b615105076474b9b063e793c">uid_hold_sort_fn</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create held channels container\n&quot;</span>);</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;   }</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">call_pickup_supplement</a>);</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a80d1e0cd20b19a8071f0695cc3008b8d">pbx_start_supplement</a>);</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac48366228fe4cc370e050c2364be43ab">chan_pjsip_ack_supplement</a>);</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6d/cli__commands_8c.html#a7c517a45d30edaebaa92ab0ff7fc9c4e">pjsip_channel_cli_register</a>()) {</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register PJSIP Channel CLI\n&quot;</span>);</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;   }</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   <span class="comment">/* since endpoints are loaded before the channel driver their device</span></div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;<span class="comment">      states get set to &#39;invalid&#39;, so they need to be updated */</span></div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;   <span class="keywordflow">if</span> ((endpoints = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a26352a4b800eeb07efd4cb7b0a531af5">ast_sip_get_endpoints</a>())) {</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(endpoints, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a3920b7e841a904750cb53f9d56755f40">update_devstate</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(endpoints, -1);</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;   }</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a>);</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac48366228fe4cc370e050c2364be43ab">chan_pjsip_ack_supplement</a>);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a80d1e0cd20b19a8071f0695cc3008b8d">pbx_start_supplement</a>);</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aeccb50f70da772a3bef4ee65f8101f6b">chan_pjsip_supplement_response</a>);</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a3fb40d1def7c4a16194fc411b28e9086">chan_pjsip_supplement</a>);</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">call_pickup_supplement</a>);</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>);</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#afea6ae18672039da64b60ec44988f100">dtmf_mode_function</a>);</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab5176ef2df39ebfba32475964a912822">moh_passthrough_function</a>);</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aba7e6da76cbe793e06eb03e0a01c5275">media_offer_function</a>);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a637fba0a1b7a8d6059fdc2c9e598e8bc">chan_pjsip_dial_contacts_function</a>);</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#acda6def7b4067227ca75d803f66ac0db">chan_pjsip_parse_uri_function</a>);</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ade433b4f10a05327a621e8b05244cb32">session_refresh_function</a>);</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>);</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9d86812ca5c40c8e82be3e77ce5156c8">chan_pjsip_rtp_glue</a>);</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_ade433b4f10a05327a621e8b05244cb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ade433b4f10a05327a621e8b05244cb32">session_refresh_function</a></div><div class="ttdeci">static struct ast_custom_function session_refresh_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03289">chan_pjsip.c:3289</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aba7e6da76cbe793e06eb03e0a01c5275"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aba7e6da76cbe793e06eb03e0a01c5275">media_offer_function</a></div><div class="ttdeci">static struct ast_custom_function media_offer_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03271">chan_pjsip.c:3271</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_afea6ae18672039da64b60ec44988f100"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#afea6ae18672039da64b60ec44988f100">dtmf_mode_function</a></div><div class="ttdeci">static struct ast_custom_function dtmf_mode_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03277">chan_pjsip.c:3277</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aeccb50f70da772a3bef4ee65f8101f6b"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aeccb50f70da772a3bef4ee65f8101f6b">chan_pjsip_supplement_response</a></div><div class="ttdeci">static struct ast_sip_session_supplement chan_pjsip_supplement_response</div><div class="ttdoc">SIP session supplement structure just for responses. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00155">chan_pjsip.c:155</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_ac2fd3e9ee89436cbf6b2ac374bab711b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ac2fd3e9ee89436cbf6b2ac374bab711b">ast_rtp_glue_register</a></div><div class="ttdeci">#define ast_rtp_glue_register(glue)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00847">rtp_engine.h:847</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9e829b838998b3165e1ea7811886332c"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a></div><div class="ttdeci">static pjsip_module refer_callback_module</div><div class="ttdoc">REFER Callback module, used to attach session data structure to subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01915">chan_pjsip.c:1915</a></div></div>
<div class="ttc" id="format__cap_8h_html_a0c30a7fc5698f5e075cfe620cddfc7f1"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a></div><div class="ttdeci">int ast_format_cap_append_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Add all codecs Asterisk knows about for a specific type to the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00216">format_cap.c:216</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aae89632996ffdcf888ab251c14dc6cdb"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a></div><div class="ttdeci">void ast_sip_session_unregister_supplement(struct ast_sip_session_supplement *supplement)</div><div class="ttdoc">Unregister a an supplement to SIP session processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc0/pjsip__session_8c_source.html#l00063">pjsip_session.c:63</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a637fba0a1b7a8d6059fdc2c9e598e8bc"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a637fba0a1b7a8d6059fdc2c9e598e8bc">chan_pjsip_dial_contacts_function</a></div><div class="ttdeci">static struct ast_custom_function chan_pjsip_dial_contacts_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03261">chan_pjsip.c:3261</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a7cb19b644b4895d36ab32aa1c03c3dc5"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a7cb19b644b4895d36ab32aa1c03c3dc5">uid_hold_hash_fn</a></div><div class="ttdeci">static int uid_hold_hash_fn(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01066">chan_pjsip.c:1066</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ac48366228fe4cc370e050c2364be43ab"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ac48366228fe4cc370e050c2364be43ab">chan_pjsip_ack_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement chan_pjsip_ack_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00164">chan_pjsip.c:164</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a3920b7e841a904750cb53f9d56755f40"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a3920b7e841a904750cb53f9d56755f40">update_devstate</a></div><div class="ttdeci">static int update_devstate(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03254">chan_pjsip.c:3254</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a0b6312c44448ff7ed80ac99b3077e438"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></div><div class="ttdeci">static struct ao2_container * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">main/endpoints.c:50</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab5176ef2df39ebfba32475964a912822"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab5176ef2df39ebfba32475964a912822">moh_passthrough_function</a></div><div class="ttdeci">static struct ast_custom_function moh_passthrough_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03283">chan_pjsip.c:3283</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a2d923ef44f62dffc05178f762b88f084"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a></div><div class="ttdeci">int ast_sip_register_service(pjsip_module *module)</div><div class="ttdoc">Register a SIP service in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03315">res_pjsip.c:3315</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a3fb40d1def7c4a16194fc411b28e9086"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a3fb40d1def7c4a16194fc411b28e9086">chan_pjsip_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement chan_pjsip_supplement</div><div class="ttdoc">SIP session supplement structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00143">chan_pjsip.c:143</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aab0df6f9b19263e2a45ed03a8bef4a0d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aab0df6f9b19263e2a45ed03a8bef4a0d">channel_type</a></div><div class="ttdeci">static const char channel_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00078">chan_pjsip.c:78</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a7016a58d1b7524c186ccc72ec48ef488"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a7016a58d1b7524c186ccc72ec48ef488">AO2_ALLOC_OPT_LOCK_RWLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00367">astobj2.h:367</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6ab56a6616234005e8d75b380aceddf0"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a></div><div class="ttdeci">static struct ao2_container * pjsip_uids_onhold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01107">chan_pjsip.c:1107</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="cli__commands_8c_html_a7c517a45d30edaebaa92ab0ff7fc9c4e"><div class="ttname"><a href="../../d9/d6d/cli__commands_8c.html#a7c517a45d30edaebaa92ab0ff7fc9c4e">pjsip_channel_cli_register</a></div><div class="ttdeci">int pjsip_channel_cli_register(void)</div><div class="ttdoc">Registers the channel cli commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6d/cli__commands_8c_source.html#l00448">cli_commands.c:448</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_acda6def7b4067227ca75d803f66ac0db"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#acda6def7b4067227ca75d803f66ac0db">chan_pjsip_parse_uri_function</a></div><div class="ttdeci">static struct ast_custom_function chan_pjsip_parse_uri_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03266">chan_pjsip.c:3266</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_af8f919fd0f5ea30c5cfd7ae0a3a3b47d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">call_pickup_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement call_pickup_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03109">chan_pjsip.c:3109</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a15aa09d9084763cdd20b7467a4cd381a"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a></div><div class="ttdeci">void ast_sip_unregister_service(pjsip_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03331">res_pjsip.c:3331</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afe951ef8ac0fe6aae0db42ce12bb3791"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a></div><div class="ttdeci">int ast_rtp_glue_unregister(struct ast_rtp_glue *glue)</div><div class="ttdoc">Unregister RTP glue. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00408">rtp_engine.c:408</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a26352a4b800eeb07efd4cb7b0a531af5"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a26352a4b800eeb07efd4cb7b0a531af5">ast_sip_get_endpoints</a></div><div class="ttdeci">struct ao2_container * ast_sip_get_endpoints(void)</div><div class="ttdoc">Retrieve any endpoints available to sorcery. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02344">pjsip_configuration.c:2344</a></div></div>
<div class="ttc" id="astobj2_8h_html_afe7a6b368052cb171d371d873b7520acadaba53a115685d6a8944dd2c6a8d7bfb"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#afe7a6b368052cb171d371d873b7520acadaba53a115685d6a8944dd2c6a8d7bfb">AO2_CONTAINER_ALLOC_OPT_DUPS_REJECT</a></div><div class="ttdoc">Reject objects with duplicate keys in container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01192">astobj2.h:1192</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a80d1e0cd20b19a8071f0695cc3008b8d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a80d1e0cd20b19a8071f0695cc3008b8d">pbx_start_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement pbx_start_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03149">chan_pjsip.c:3149</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a1edc44a2b615105076474b9b063e793c"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a1edc44a2b615105076474b9b063e793c">uid_hold_sort_fn</a></div><div class="ttdeci">static int uid_hold_sort_fn(const void *obj_left, const void *obj_right, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01084">chan_pjsip.c:1084</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a74cd5fcb1313f0fb5f2f876bf484b3b7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a></div><div class="ttdeci">struct ast_channel_tech chan_pjsip_tech</div><div class="ttdoc">PBX interface structure for channel registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00109">chan_pjsip.c:109</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aa21df5d2fdfb2d6e2734a3056ec3db7c"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aa21df5d2fdfb2d6e2734a3056ec3db7c">ast_sip_session_register_supplement</a></div><div class="ttdeci">#define ast_sip_session_register_supplement(supplement)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00616">res_pjsip_session.h:616</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9d86812ca5c40c8e82be3e77ce5156c8"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9d86812ca5c40c8e82be3e77ce5156c8">chan_pjsip_rtp_glue</a></div><div class="ttdeci">static struct ast_rtp_glue chan_pjsip_rtp_glue</div><div class="ttdoc">Local glue for interacting with the RTP engine core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00486">chan_pjsip.c:486</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbd4c44d11461ae7e365de58ec8bf4ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbd4c44d11461ae7e365de58ec8bf4ba">&#9670;&nbsp;</a></span>local_hold_set_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void local_hold_set_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *&#160;</td>
          <td class="paramname"><em>session_media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>held</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback which changes the value of locally held on the media stream. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01482">1482</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00099">ast_sip_session_media::locally_held</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01490">remote_send_hold_refresh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;{</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <span class="keywordflow">if</span> (session_media) {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a614b910c903ad23072690351e463a94f">locally_held</a> = held;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div><div class="ttc" id="structast__sip__session__media_html_a614b910c903ad23072690351e463a94f"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a614b910c903ad23072690351e463a94f">ast_sip_session_media::locally_held</a></div><div class="ttdeci">unsigned int locally_held</div><div class="ttdoc">Stream is on hold by local side. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00099">res_pjsip_session.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6971e8e7e159455261d562e9f92b7b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6971e8e7e159455261d562e9f92b7b26">&#9670;&nbsp;</a></span>on_topology_change_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int on_topology_change_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01549">1549</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00278">ast_sip_session_media_state_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">ast_sip_session::pending_media_state</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01575">send_topology_change_refresh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;{</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s: Received response code %d.  PT: %s  AT: %s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      rdata-&gt;msg_info.msg-&gt;line.status.code,</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>, &amp;STR_TMP)),</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>, &amp;STR_TMP)));</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">if</span> (PJSIP_IS_STATUS_IN_CLASS(rdata-&gt;msg_info.msg-&gt;line.status.code, 200)) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="comment">/* The topology was changed to something new so give notice to what requested</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">       * it so it queries the channel and updates accordingly.</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s: Queued topology change frame\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s: No channel?  Can&#39;t queue topology change frame\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (300 &lt;= rdata-&gt;msg_info.msg-&gt;line.status.code) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="comment">/* The topology change failed, so drop the current pending media state */</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae02f331ac12ec53a9f072a9862405055">ast_sip_session_media_state_reset</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">pending_media_state</a>);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s: response code &gt; 300.  Resetting pending media state\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   }</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;%s: Nothing to do\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;}</div><div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="structast__sip__session_html_aac4ee0b861f67a3db82eb3600c0f1624"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aac4ee0b861f67a3db82eb3600c0f1624">ast_sip_session::pending_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * pending_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00211">res_pjsip_session.h:211</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">include/asterisk/frame.h:313</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae02f331ac12ec53a9f072a9862405055"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae02f331ac12ec53a9f072a9862405055">ast_sip_session_media_state_reset</a></div><div class="ttdeci">void ast_sip_session_media_state_reset(struct ast_sip_session_media_state *media_state)</div><div class="ttdoc">Reset a media state to a clean state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00278">res_pjsip_session.c:278</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad56235030707963962d208ed278ab639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad56235030707963962d208ed278ab639">&#9670;&nbsp;</a></span>pbx_start_incoming_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pbx_start_incoming_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03115">3115</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00122">AST_CAUSE_SWITCH_CONGESTION</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00357">AST_PBX_CALL_LIMIT</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00356">AST_PBX_FAILED</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04712">ast_pbx_start()</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00355">AST_PBX_SUCCESS</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>.</p>
<div class="fragment"><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;{</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;   <span class="comment">/* Check for a to-tag to determine if this is a reinvite */</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;msg_info.to-&gt;tag.slen) {</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <span class="comment">/* We don&#39;t care about reinvites */</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0, <span class="stringliteral">&quot;Reinvite\n&quot;</span>);</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   }</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   res = <a class="code" href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;   <span class="keywordflow">switch</span> (res) {</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735a4a46cde728f5cd375af4f2d5b1542490">AST_PBX_FAILED</a>:</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to start PBX ;(\n&quot;</span>);</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a>);</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735ab69a419c47206542956e9d933b6605f5">AST_PBX_CALL_LIMIT</a>:</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to start PBX (call limit reached) \n&quot;</span>);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a>);</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735ae1482e87c137b03ef9f9c17cf4fb5ec4">AST_PBX_SUCCESS</a>:</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;   }</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Started PBX on new PJSIP channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>((res == <a class="code" href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735ae1482e87c137b03ef9f9c17cf4fb5ec4">AST_PBX_SUCCESS</a>) ? 0 : -1, <span class="stringliteral">&quot;RC: %d\n&quot;</span>, res);</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;}</div><div class="ttc" id="pbx_8h_html_a0e4eb357d2ef42629fbcf191a473f735ae1482e87c137b03ef9f9c17cf4fb5ec4"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735ae1482e87c137b03ef9f9c17cf4fb5ec4">AST_PBX_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00355">pbx.h:355</a></div></div>
<div class="ttc" id="causes_8h_html_a02b3785262e0be6843e8e9d235d8d78d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_SWITCH_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00122">causes.h:122</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx_8h_html_a9a937fbb3b5f4e68880a9c5714a29ce5"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_start(struct ast_channel *c)</div><div class="ttdoc">Create a new thread and start the PBX. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04712">pbx.c:4712</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="pbx_8h_html_a0e4eb357d2ef42629fbcf191a473f735ab69a419c47206542956e9d933b6605f5"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735ab69a419c47206542956e9d933b6605f5">AST_PBX_CALL_LIMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00357">pbx.h:357</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="pbx_8h_html_a0e4eb357d2ef42629fbcf191a473f735a4a46cde728f5cd375af4f2d5b1542490"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a0e4eb357d2ef42629fbcf191a473f735a4a46cde728f5cd375af4f2d5b1542490">AST_PBX_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00356">pbx.h:356</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a696b86dd279517cbb99973a3470cc0c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a696b86dd279517cbb99973a3470cc0c9">&#9670;&nbsp;</a></span>remote_send_hold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int remote_send_hold </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update local hold state to be held. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01500">1500</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01490">remote_send_hold_refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;{</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a155e79f12a8259d7757b0fb20c701a6e">remote_send_hold_refresh</a>(data, 1);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_a155e79f12a8259d7757b0fb20c701a6e"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a155e79f12a8259d7757b0fb20c701a6e">remote_send_hold_refresh</a></div><div class="ttdeci">static int remote_send_hold_refresh(struct ast_sip_session *session, unsigned int held)</div><div class="ttdoc">Update local hold state and send a re-INVITE with the new SDP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01490">chan_pjsip.c:1490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a155e79f12a8259d7757b0fb20c701a6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a155e79f12a8259d7757b0fb20c701a6e">&#9670;&nbsp;</a></span>remote_send_hold_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int remote_send_hold_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>held</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update local hold state and send a re-INVITE with the new SDP. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01490">1490</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">ast_sip_session_refresh()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00486">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00865">AST_VECTOR_CALLBACK_VOID</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01482">local_hold_set_state()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01500">remote_send_hold()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01506">remote_send_unhold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;{</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#afbd4c44d11461ae7e365de58ec8bf4ba">local_hold_set_state</a>, held);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a>(session, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, -1);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00486">res_pjsip.h:486</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_afbd4c44d11461ae7e365de58ec8bf4ba"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#afbd4c44d11461ae7e365de58ec8bf4ba">local_hold_set_state</a></div><div class="ttdeci">static void local_hold_set_state(struct ast_sip_session_media *session_media, unsigned int held)</div><div class="ttdoc">Callback which changes the value of locally held on the media stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01482">chan_pjsip.c:1482</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae45a3852c5bef6bf3719080907f02a42"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a></div><div class="ttdeci">int ast_sip_session_refresh(struct ast_sip_session *session, ast_sip_session_request_creation_cb on_request_creation, ast_sip_session_sdp_creation_cb on_sdp_creation, ast_sip_session_response_cb on_response, enum ast_sip_session_refresh_method method, int generate_new_sdp, struct ast_sip_session_media_state *media_state)</div><div class="ttdoc">Send a reinvite or UPDATE on a session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">res_pjsip_session.c:2524</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a442f66f50441c8f6696d5fb1548ce055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a442f66f50441c8f6696d5fb1548ce055">&#9670;&nbsp;</a></span>remote_send_unhold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int remote_send_unhold </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update local hold state to be unheld. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01506">1506</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01490">remote_send_hold_refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;{</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a155e79f12a8259d7757b0fb20c701a6e">remote_send_hold_refresh</a>(data, 0);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_a155e79f12a8259d7757b0fb20c701a6e"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a155e79f12a8259d7757b0fb20c701a6e">remote_send_hold_refresh</a></div><div class="ttdeci">static int remote_send_hold_refresh(struct ast_sip_session *session, unsigned int held)</div><div class="ttdoc">Update local hold state and send a re-INVITE with the new SDP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01490">chan_pjsip.c:1490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e2e6fb7d874f0d2deddd2ecfc8afb32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e2e6fb7d874f0d2deddd2ecfc8afb32">&#9670;&nbsp;</a></span>request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int request </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">2559</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00101">AST_CAUSE_CHANNEL_UNACCEPTABLE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00099">AST_CAUSE_NO_ROUTE_DESTINATION</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">AST_NONSTANDARD_APP_ARGS</a>, <a class="el" href="../../dd/dfd/config__global_8c_source.html#l00324">ast_sip_get_disable_multi_domain()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01853">ast_sorcery_retrieve_by_id()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02556">request_data::cause</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02555">request_data::dest</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02553">request_data::session</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02554">request_data::topology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01709">action_add_agi_cmd()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01120">ast_http_body_discard()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00899">ast_http_body_read_status()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01181">ast_http_get_contents()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00836">ast_http_request_close_on_completion()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00456">ast_http_send()</a>, <a class="el" href="../../d9/d1f/test__aoc_8c_source.html#l00309">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04977">bridge_manager_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00188">bridge_manager_service_req()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04942">bridge_manager_thread()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03052">bridge_merge_inhibit_nolock()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02667">chan_pjsip_request_with_stream_topology()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00562">ewscal_write_event()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00650">get_ewscal_ids_for()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00871">http_request_tracking_setup()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00714">parse_ewscal_id()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03977">xmpp_pubsub_build_node_request()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01071">xmpp_pubsub_build_publish_skeleton()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01219">xmpp_pubsub_delete_node()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01507">xmpp_pubsub_handle_error()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01039">xmpp_pubsub_iq_create()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01300">xmpp_pubsub_publish_device_state()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01269">xmpp_pubsub_publish_mwi()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l04121">xmpp_pubsub_purge_nodes()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l04029">xmpp_pubsub_request_nodes()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01414">xmpp_pubsub_subscribe()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01388">xmpp_pubsub_unsubscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;{</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d24/structrequest__data.html">request_data</a> *req_data = obj;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#ad447182ef5af9e4ff1446dbe2507f630">dest</a>), *endpoint_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *request_user = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(endpoint);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(aor);</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   );</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>,tmp);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel with empty destination\n&quot;</span>);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a>;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Empty destination\n&quot;</span>);</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, tmp, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa242d37481e95a685ae02e3559fc5dc7">ast_sip_get_disable_multi_domain</a>()) {</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <span class="comment">/* If a request user has been specified extract it from the endpoint name portion */</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <span class="keywordflow">if</span> ((endpoint_name = strchr(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint, <span class="charliteral">&#39;@&#39;</span>))) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;         request_user = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;         *endpoint_name++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;         endpoint_name = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      }</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint_name)) {</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;         <span class="keywordflow">if</span> (request_user) {</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel with empty endpoint name: %s@&lt;endpoint-name&gt;\n&quot;</span>,</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;               request_user);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel with empty endpoint name\n&quot;</span>);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;         }</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;         req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a>;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Empty endpoint name\n&quot;</span>);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      }</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      endpoint = <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;endpoint&quot;</span>,</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;         endpoint_name);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel - endpoint &#39;%s&#39; was not found\n&quot;</span>, endpoint_name);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;         req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Endpoint not found\n&quot;</span>);</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      }</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      <span class="comment">/* First try to find an exact endpoint match, for single (user) or multi-domain (user@domain) */</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      endpoint_name = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint_name)) {</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel with empty endpoint name\n&quot;</span>);</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;         req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a>;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Empty endpoint name\n&quot;</span>);</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      }</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      endpoint = <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;endpoint&quot;</span>,</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;         endpoint_name);</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;         <span class="comment">/* It seems it&#39;s not a multi-domain endpoint or single endpoint exact match,</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">          * it&#39;s possible that it&#39;s a SIP trunk with a specified user (user@trunkname),</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">          * so extract the user before @ sign.</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;         endpoint_name = strchr(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;         <span class="keywordflow">if</span> (!endpoint_name) {</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">             * Couldn&#39;t find an &#39;@&#39; so it had to be an endpoint</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="comment">             * name that doesn&#39;t exist.</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel - endpoint &#39;%s&#39; was not found\n&quot;</span>,</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;               <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint);</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;            req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Endpoint not found\n&quot;</span>);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;         }</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;         request_user = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.endpoint;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;         *endpoint_name++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint_name)) {</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel with empty endpoint name: %s@&lt;endpoint-name&gt;\n&quot;</span>,</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;               request_user);</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;            req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a>;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Empty endpoint name\n&quot;</span>);</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;         }</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;         endpoint = <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;endpoint&quot;</span>,</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            endpoint_name);</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;         <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJSIP channel - endpoint &#39;%s&#39; was not found\n&quot;</span>, endpoint_name);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Endpoint not found\n&quot;</span>);</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;         }</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      }</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   }</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;   session = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae415668ea4e21bd1a053dece640e2f46">ast_sip_session_create_outgoing</a>(endpoint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.aor, request_user,</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(endpoint, -1);</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;   <span class="keywordflow">if</span> (!session) {</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create outgoing session to endpoint &#39;%s&#39;\n&quot;</span>, endpoint_name);</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(-1, <span class="stringliteral">&quot;Couldn&#39;t create session\n&quot;</span>);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;   }</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   req_data-&gt;<a class="code" href="../../de/d24/structrequest__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(0);</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;}</div><div class="ttc" id="structrequest__data_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../de/d24/structrequest__data.html#aa4d0ccb9d0904892652f2f258c5ad225">request_data::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02556">chan_pjsip.c:2556</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae415668ea4e21bd1a053dece640e2f46"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae415668ea4e21bd1a053dece640e2f46">ast_sip_session_create_outgoing</a></div><div class="ttdeci">struct ast_sip_session * ast_sip_session_create_outgoing(struct ast_sip_endpoint *endpoint, struct ast_sip_contact *contact, const char *location, const char *request_user, struct ast_stream_topology *req_topology)</div><div class="ttdoc">Create a new outgoing SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">res_pjsip_session.c:3317</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structrequest__data_html"><div class="ttname"><a href="../../de/d24/structrequest__data.html">request_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02552">chan_pjsip.c:2552</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="sorcery_8h_html_a100106a82d72aa59a66513ef3ad161c8"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a></div><div class="ttdeci">void * ast_sorcery_retrieve_by_id(const struct ast_sorcery *sorcery, const char *type, const char *id)</div><div class="ttdoc">Retrieve an object using its unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01853">sorcery.c:1853</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="structrequest__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../de/d24/structrequest__data.html#a47bd1bb949183a58a194970acaccffbd">request_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02553">chan_pjsip.c:2553</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa242d37481e95a685ae02e3559fc5dc7"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa242d37481e95a685ae02e3559fc5dc7">ast_sip_get_disable_multi_domain</a></div><div class="ttdeci">unsigned int ast_sip_get_disable_multi_domain(void)</div><div class="ttdoc">Retrieve the system setting &amp;#39;disable multi domain&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfd/config__global_8c_source.html#l00324">config_global.c:324</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="causes_8h_html_a8cfd0925ffb2f0902bc177d799e2622d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a></div><div class="ttdeci">#define AST_CAUSE_CHANNEL_UNACCEPTABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00101">causes.h:101</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_accfcb380df76a64251d88ef49c2dd4e3"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_NONSTANDARD_APP_ARGS(args, parse, sep)</div><div class="ttdoc">Performs the &amp;#39;nonstandard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">include/asterisk/app.h:1300</a></div></div>
<div class="ttc" id="structrequest__data_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/d24/structrequest__data.html#a15d14a20c2f5eb81b8b933304dce2ea3">request_data::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02554">chan_pjsip.c:2554</a></div></div>
<div class="ttc" id="structrequest__data_html_ad447182ef5af9e4ff1446dbe2507f630"><div class="ttname"><a href="../../de/d24/structrequest__data.html#ad447182ef5af9e4ff1446dbe2507f630">request_data::dest</a></div><div class="ttdeci">const char * dest</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02555">chan_pjsip.c:2555</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="causes_8h_html_ace4ceec464072bb9e269b6a52e7a6631"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00099">causes.h:99</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade7b53c1482ffe11a7d86af080e35558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade7b53c1482ffe11a7d86af080e35558">&#9670;&nbsp;</a></span>rtp_direct_media_data_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a>* rtp_direct_media_data_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>vrtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00377">377</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00362">rtp_direct_media_data::cap</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">cdata()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00360">rtp_direct_media_data::rtp</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00366">rtp_direct_media_data_destroy()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00361">rtp_direct_media_data::vrtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00448">chan_pjsip_set_rtp_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a> *<a class="code" href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cdata), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4721791e01289d04566e0612a657a359">rtp_direct_media_data_destroy</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (!cdata) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(chan);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(rtp);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a6c3bc21b5c24c99cd06f88105366407f">vrtp</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(vrtp);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>((<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *)cap);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(session);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="ttc" id="structrtp__direct__media__data_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a8adb8595b8127cbea2118fada1ef8782">rtp_direct_media_data::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00360">chan_pjsip.c:360</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00358">chan_pjsip.c:358</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">rtp_direct_media_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00359">chan_pjsip.c:359</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">rtp_direct_media_data::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00362">chan_pjsip.c:362</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">rtp_direct_media_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00363">chan_pjsip.c:363</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4721791e01289d04566e0612a657a359"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4721791e01289d04566e0612a657a359">rtp_direct_media_data_destroy</a></div><div class="ttdeci">static void rtp_direct_media_data_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00366">chan_pjsip.c:366</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="res__calendar__ews_8c_html_a2411700da33d0d5308742613523df089"><div class="ttname"><a href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a></div><div class="ttdeci">static int cdata(void *userdata, int state, const char *cdata, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">res_calendar_ews.c:327</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a6c3bc21b5c24c99cd06f88105366407f"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a6c3bc21b5c24c99cd06f88105366407f">rtp_direct_media_data::vrtp</a></div><div class="ttdeci">struct ast_rtp_instance * vrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00361">chan_pjsip.c:361</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4721791e01289d04566e0612a657a359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4721791e01289d04566e0612a657a359">&#9670;&nbsp;</a></span>rtp_direct_media_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rtp_direct_media_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00366">366</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00362">rtp_direct_media_data::cap</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">cdata()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00360">rtp_direct_media_data::rtp</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00361">rtp_direct_media_data::vrtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00377">rtp_direct_media_data_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a> *<a class="code" href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a> = data;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a6c3bc21b5c24c99cd06f88105366407f">vrtp</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div><div class="ttc" id="structrtp__direct__media__data_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a8adb8595b8127cbea2118fada1ef8782">rtp_direct_media_data::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00360">chan_pjsip.c:360</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00358">chan_pjsip.c:358</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">rtp_direct_media_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00359">chan_pjsip.c:359</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">rtp_direct_media_data::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00362">chan_pjsip.c:362</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">rtp_direct_media_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00363">chan_pjsip.c:363</a></div></div>
<div class="ttc" id="res__calendar__ews_8c_html_a2411700da33d0d5308742613523df089"><div class="ttname"><a href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a></div><div class="ttdeci">static int cdata(void *userdata, int state, const char *cdata, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">res_calendar_ews.c:327</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a6c3bc21b5c24c99cd06f88105366407f"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a6c3bc21b5c24c99cd06f88105366407f">rtp_direct_media_data::vrtp</a></div><div class="ttdeci">struct ast_rtp_instance * vrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00361">chan_pjsip.c:361</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8f089a1e6c8ec194dc302ab684317f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8f089a1e6c8ec194dc302ab684317f2">&#9670;&nbsp;</a></span>rtp_find_rtcp_fd_position()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rtp_find_rtcp_fd_position </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d7a/structast__rtp__instance.html">ast_rtp_instance</a> *&#160;</td>
          <td class="paramname"><em>rtp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to find the position for RTCP. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00298">298</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02192">ast_rtp_instance_fd()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00135">ast_sip_session_media_read_callback_state::fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00319">check_for_rtp_changes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;read_callbacks); ++index) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html">ast_sip_session_media_read_callback_state</a> *callback_state =</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;read_callbacks, index);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (callback_state-&gt;<a class="code" href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a> != <a class="code" href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a>(rtp, 1)) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">return</span> index;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="structast__sip__session__media__read__callback__state_html"><div class="ttname"><a href="../../d2/d7e/structast__sip__session__media__read__callback__state.html">ast_sip_session_media_read_callback_state</a></div><div class="ttdoc">Structure which contains read callback information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00133">res_pjsip_session.h:133</a></div></div>
<div class="ttc" id="structast__sip__session__media__read__callback__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d2/d7e/structast__sip__session__media__read__callback__state.html#a6f8059414f0228f0256115e024eeed4b">ast_sip_session_media_read_callback_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">The file descriptor itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00135">res_pjsip_session.h:135</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_aee3ef7f9e53a34e743c3a95c9ca95fb4"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#aee3ef7f9e53a34e743c3a95c9ca95fb4">ast_rtp_instance_fd</a></div><div class="ttdeci">int ast_rtp_instance_fd(struct ast_rtp_instance *instance, int rtcp)</div><div class="ttdoc">Get the file descriptor for an RTP session (or RTCP) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l02192">rtp_engine.c:2192</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9bb831542952f8322bcf155023251a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bb831542952f8322bcf155023251a15">&#9670;&nbsp;</a></span>send_direct_media_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_direct_media_request </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00396">396</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00689">ast_format_cap_identical()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00525">ast_format_cap_remove_by_type()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">ast_sip_session_refresh()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00362">rtp_direct_media_data::cap</a>, <a class="el" href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">cdata()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00319">check_for_rtp_changes()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">ast_sip_session_media_state::default_session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00766">ast_sip_endpoint_media_configuration::direct_media</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00203">ast_sip_session::direct_media_cap</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00268">direct_media_mitigate_glare()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00841">ast_sip_endpoint::media</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00733">ast_sip_direct_media_configuration::method</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00360">rtp_direct_media_data::rtp</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00361">rtp_direct_media_data::vrtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00448">chan_pjsip_set_rtp_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a> *<a class="code" href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a> = data;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordtype">int</span> changed = 0;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="comment">/* XXX In an ideal world each media stream would be direct, but for now preserve behavior</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">    * and connect only the default media sessions for audio and video.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="comment">/* The channel needs to be locked when checking for RTP changes.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">    * Otherwise, we could end up destroying an underlying RTCP structure</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">    * at the same time that the channel thread is attempting to read RTCP</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   session = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>]) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      changed |= <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a16d7faa442d10ce3c3d4895054452956">check_for_rtp_changes</a>(</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;         cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>], session);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>]) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      changed |= <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a16d7faa442d10ce3c3d4895054452956">check_for_rtp_changes</a>(</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;         cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a6c3bc21b5c24c99cd06f88105366407f">vrtp</a>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">default_session</a>[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>], session);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a48ba53077ace5491807c7e453c4beaa7">direct_media_mitigate_glare</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>)) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Disregarding setting RTP on %s: mitigating re-INVITE glare\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdata, -1);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">if</span> (cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a> &amp;&amp; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>) &amp;&amp;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       !<a class="code" href="../../d0/d3c/format__cap_8h.html#a99125057461b0c99fb93f2ab5e4e99f2">ast_format_cap_identical</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>, cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>)) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">direct_media_cap</a>, cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">cap</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      changed = 1;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keywordflow">if</span> (changed) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;RTP changed on %s; initiating direct media update\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      res = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a>(cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;         cdata-&gt;<a class="code" href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">media</a>.<a class="code" href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">direct_media</a>.<a class="code" href="../../d0/d9d/structast__sip__direct__media__configuration.html#a711cafaf124bf68c50f8af637b5146ff">method</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cdata, -1);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_a48ba53077ace5491807c7e453c4beaa7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a48ba53077ace5491807c7e453c4beaa7">direct_media_mitigate_glare</a></div><div class="ttdeci">static int direct_media_mitigate_glare(struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00268">chan_pjsip.c:268</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a8adb8595b8127cbea2118fada1ef8782">rtp_direct_media_data::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00360">chan_pjsip.c:360</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html">rtp_direct_media_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00358">chan_pjsip.c:358</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a8ce77d5f41c03bf330b7699e41fac6c3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a8ce77d5f41c03bf330b7699e41fac6c3">ast_sip_session_media_state::default_session</a></div><div class="ttdeci">struct ast_sip_session_media * default_session[AST_MEDIA_TYPE_END]</div><div class="ttdoc">Default media sessions for each type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00151">res_pjsip_session.h:151</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__direct__media__configuration_html_a711cafaf124bf68c50f8af637b5146ff"><div class="ttname"><a href="../../d0/d9d/structast__sip__direct__media__configuration.html#a711cafaf124bf68c50f8af637b5146ff">ast_sip_direct_media_configuration::method</a></div><div class="ttdeci">enum ast_sip_session_refresh_method method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00733">res_pjsip.h:733</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a16d7faa442d10ce3c3d4895054452956"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a16d7faa442d10ce3c3d4895054452956">check_for_rtp_changes</a></div><div class="ttdeci">static int check_for_rtp_changes(struct ast_channel *chan, struct ast_rtp_instance *rtp, struct ast_sip_session_media *media, struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00319">chan_pjsip.c:319</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__endpoint__media__configuration_html_a9eb74cd83f19dba0d41c5fbfc6e30f39"><div class="ttname"><a href="../../d3/d35/structast__sip__endpoint__media__configuration.html#a9eb74cd83f19dba0d41c5fbfc6e30f39">ast_sip_endpoint_media_configuration::direct_media</a></div><div class="ttdeci">struct ast_sip_direct_media_configuration direct_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00766">res_pjsip.h:766</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="structast__sip__session_html_aea104bc5edcb830fe465bc8a7f6aed45"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#aea104bc5edcb830fe465bc8a7f6aed45">ast_sip_session::direct_media_cap</a></div><div class="ttdeci">struct ast_format_cap * direct_media_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00203">res_pjsip_session.h:203</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a853a124d9bfb1a64ae46e067f5103381"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a853a124d9bfb1a64ae46e067f5103381">ast_sip_endpoint::media</a></div><div class="ttdeci">struct ast_sip_endpoint_media_configuration media</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00841">res_pjsip.h:841</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a84d1435c5b8d387806714ea7079304b7">rtp_direct_media_data::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00359">chan_pjsip.c:359</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae45a3852c5bef6bf3719080907f02a42"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a></div><div class="ttdeci">int ast_sip_session_refresh(struct ast_sip_session *session, ast_sip_session_request_creation_cb on_request_creation, ast_sip_session_sdp_creation_cb on_sdp_creation, ast_sip_session_response_cb on_response, enum ast_sip_session_refresh_method method, int generate_new_sdp, struct ast_sip_session_media_state *media_state)</div><div class="ttdoc">Send a reinvite or UPDATE on a session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">res_pjsip_session.c:2524</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a970f3be80cbd08a1591eb8588f3cd54b"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a970f3be80cbd08a1591eb8588f3cd54b">rtp_direct_media_data::cap</a></div><div class="ttdeci">struct ast_format_cap * cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00362">chan_pjsip.c:362</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a47bd1bb949183a58a194970acaccffbd">rtp_direct_media_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00363">chan_pjsip.c:363</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="format__cap_8h_html_a99125057461b0c99fb93f2ab5e4e99f2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a99125057461b0c99fb93f2ab5e4e99f2">ast_format_cap_identical</a></div><div class="ttdeci">int ast_format_cap_identical(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2)</div><div class="ttdoc">Determine if two capabilities structures are identical. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00689">format_cap.c:689</a></div></div>
<div class="ttc" id="res__calendar__ews_8c_html_a2411700da33d0d5308742613523df089"><div class="ttname"><a href="../../d2/d4f/res__calendar__ews_8c.html#a2411700da33d0d5308742613523df089">cdata</a></div><div class="ttdeci">static int cdata(void *userdata, int state, const char *cdata, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4f/res__calendar__ews_8c_source.html#l00327">res_calendar_ews.c:327</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="structrtp__direct__media__data_html_a6c3bc21b5c24c99cd06f88105366407f"><div class="ttname"><a href="../../d8/d24/structrtp__direct__media__data.html#a6c3bc21b5c24c99cd06f88105366407f">rtp_direct_media_data::vrtp</a></div><div class="ttdeci">struct ast_rtp_instance * vrtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00361">chan_pjsip.c:361</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64237b7cef80387e6270c3464ac84539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64237b7cef80387e6270c3464ac84539">&#9670;&nbsp;</a></span>send_topology_change_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_topology_change_refresh </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01575">1575</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">ast_sip_session_get_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">ast_sip_session_refresh()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00486">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01513">topology_change_refresh_data::media_state</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01549">on_topology_change_response()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01512">topology_change_refresh_data::session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01516">topology_change_refresh_data_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01592">handle_topology_request_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;{</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a> *<a class="code" href="../../d7/ded/structrefresh__data.html">refresh_data</a> = data;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(3, <span class="stringliteral">&quot;%s: %s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session),</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>, &amp;STR_TMP)));</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   ret = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a>(session, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6971e8e7e159455261d562e9f92b7b26">on_topology_change_response</a>,</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a>, 1, refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a>);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a>(refresh_data);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(ret, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a>(session));</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00486">res_pjsip.h:486</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6971e8e7e159455261d562e9f92b7b26"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6971e8e7e159455261d562e9f92b7b26">on_topology_change_response</a></div><div class="ttdeci">static int on_topology_change_response(struct ast_sip_session *session, pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01549">chan_pjsip.c:1549</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae45a3852c5bef6bf3719080907f02a42"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a></div><div class="ttdeci">int ast_sip_session_refresh(struct ast_sip_session *session, ast_sip_session_request_creation_cb on_request_creation, ast_sip_session_sdp_creation_cb on_sdp_creation, ast_sip_session_response_cb on_response, enum ast_sip_session_refresh_method method, int generate_new_sdp, struct ast_sip_session_media_state *media_state)</div><div class="ttdoc">Send a reinvite or UPDATE on a session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">res_pjsip_session.c:2524</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_a95797137ac1484fe2214be36db22f6dd"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a95797137ac1484fe2214be36db22f6dd">ast_sip_session_get_name</a></div><div class="ttdeci">const char * ast_sip_session_get_name(const struct ast_sip_session *session)</div><div class="ttdoc">Get the channel or endpoint name associated with the session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00115">res_pjsip_session.c:115</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01511">chan_pjsip.c:1511</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html_a5c29156dc856038737e62e879e6043aa"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">topology_change_refresh_data::media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01513">chan_pjsip.c:1513</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a8ad04a358d51294f6d05a862d0841eb8"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a></div><div class="ttdeci">static void topology_change_refresh_data_free(struct topology_change_refresh_data *refresh_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01516">chan_pjsip.c:1516</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html#a47bd1bb949183a58a194970acaccffbd">topology_change_refresh_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01512">chan_pjsip.c:1512</a></div></div>
<div class="ttc" id="structrefresh__data_html"><div class="ttname"><a href="../../d7/ded/structrefresh__data.html">refresh_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01485">pjsip/dialplan_functions.c:1485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e3b3eb8bb47c7f02b5c80d748bda521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e3b3eb8bb47c7f02b5c80d748bda521">&#9670;&nbsp;</a></span>sendtext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sendtext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02744">2744</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00458">AST_MSG_DATA_ATTR_BODY</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00457">AST_MSG_DATA_ATTR_CONTENT_TYPE</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00456">AST_MSG_DATA_ATTR_FROM</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00455">AST_MSG_DATA_ATTR_TO</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01533">ast_msg_data_get_attribute()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05091">ast_sip_add_body()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05034">ast_sip_send_request()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02033">ast_sip_body::body_text</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02713">sendtext_data::msg</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02712">sendtext_data::session</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02031">ast_sip_body::subtype</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02029">ast_sip_body::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02815">chan_pjsip_sendtext_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;{</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a> *data = obj;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *body_text = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a>, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *content_type = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a>, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c">AST_MSG_DATA_ATTR_CONTENT_TYPE</a>);</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;   <span class="keywordtype">char</span> *sep;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> body = {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      .<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;text&quot;</span>,</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      .subtype = <span class="stringliteral">&quot;plain&quot;</span>,</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;      .body_text = <a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a>,</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   };</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(content_type)) {</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      sep = strchr(content_type, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;      <span class="keywordflow">if</span> (sep) {</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;         *sep = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;         body.<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = content_type;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;         body.<a class="code" href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a> = ++sep;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      }</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;   }</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;   <span class="keywordflow">if</span> (data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_DISCONNECTED) {</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Session already DISCONNECTED [reason=%d (%s)]\n&quot;</span>,</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;         data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause,</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;         pjsip_get_status_text(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause)-&gt;ptr);</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      pjsip_from_hdr *hdr;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      pjsip_name_addr *name_addr;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *from = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a>, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>);</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *to = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a>, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <span class="keywordtype">int</span> invalidate_tdata = 0;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a>(<span class="stringliteral">&quot;MESSAGE&quot;</span>, data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg, data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;tdata);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a>(tdata, &amp;body);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="comment">       * If we have a &#39;from&#39; in the msg, set the display name in the From</span></div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="comment">       * header to it.</span></div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(from)) {</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;         hdr = PJSIP_MSG_FROM_HDR(tdata-&gt;msg);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;         name_addr = (pjsip_name_addr *) hdr-&gt;uri;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;         pj_strdup2(tdata-&gt;pool, &amp;name_addr-&gt;display, from);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;         invalidate_tdata = 1;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      }</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="comment">       * If we have a &#39;to&#39; in the msg, set the display name in the To</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="comment">       * header to it.</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(to)) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;         hdr = PJSIP_MSG_TO_HDR(tdata-&gt;msg);</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;         name_addr = (pjsip_name_addr *) hdr-&gt;uri;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;         pj_strdup2(tdata-&gt;pool, &amp;name_addr-&gt;display, to);</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;         invalidate_tdata = 1;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      }</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      <span class="keywordflow">if</span> (invalidate_tdata) {</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         pjsip_tx_data_invalidate_msg(tdata);</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      }</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9302fd362f9d52147d928c5bc4740433">ast_sip_send_request</a>(tdata, data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg, data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(data);</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div><div class="ttc" id="structast__sip__body_html_a88687b0dd98d5307f1219432b73b8412"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">ast_sip_body::body_text</a></div><div class="ttdeci">const char * body_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02033">res_pjsip.h:2033</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c">AST_MSG_DATA_ATTR_CONTENT_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00457">message.h:457</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="structsendtext__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">sendtext_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02712">chan_pjsip.c:2712</a></div></div>
<div class="ttc" id="structsendtext__data_html"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html">sendtext_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02711">chan_pjsip.c:2711</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9302fd362f9d52147d928c5bc4740433"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9302fd362f9d52147d928c5bc4740433">ast_sip_send_request</a></div><div class="ttdeci">int ast_sip_send_request(pjsip_tx_data *tdata, struct pjsip_dialog *dlg, struct ast_sip_endpoint *endpoint, void *token, void(*callback)(void *token, pjsip_event *e))</div><div class="ttdoc">General purpose method for sending a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05034">res_pjsip.c:5034</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structsendtext__data_html_a21a470de3637d736bd1632038989a877"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">sendtext_data::msg</a></div><div class="ttdeci">struct ast_msg_data * msg</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02713">chan_pjsip.c:2713</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9a14851d1f88b087df7237ec180de52e"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a></div><div class="ttdeci">int ast_sip_add_body(pjsip_tx_data *tdata, const struct ast_sip_body *body)</div><div class="ttdoc">Add a body to an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05091">res_pjsip.c:5091</a></div></div>
<div class="ttc" id="structast__sip__body_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_body::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02029">res_pjsip.h:2029</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="structast__sip__body_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_body::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02031">res_pjsip.h:2031</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__body_html"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html">ast_sip_body</a></div><div class="ttdoc">SIP body description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02027">res_pjsip.h:2027</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ac981149e3fb0f7fc8b6e75607b1b2ad0"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a></div><div class="ttdeci">int ast_sip_create_request(const char *method, struct pjsip_dialog *dlg, struct ast_sip_endpoint *endpoint, const char *uri, struct ast_sip_contact *contact, pjsip_tx_data **tdata)</div><div class="ttdoc">General purpose method for creating a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04490">res_pjsip.c:4490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45c9506569917e6d8159e3416594b387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45c9506569917e6d8159e3416594b387">&#9670;&nbsp;</a></span>sendtext_data_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a>* sendtext_data_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02723">2723</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01495">ast_msg_data_dup()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02713">sendtext_data::msg</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02716">sendtext_data_destroy()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">ast_sip_channel_pvt::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02712">sendtext_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02815">chan_pjsip_sendtext_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;{</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a> *data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*data), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab49a76ee0e8f21d19271d82beed13ebe">sendtext_data_destroy</a>);</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;   <span class="keywordflow">if</span> (!data) {</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;   }</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a> = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga9c757943fd32c228f911b6f8e1e91046">ast_msg_data_dup</a>(msg);</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;   <span class="keywordflow">if</span> (!data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a>) {</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(data);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;   }</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = channel-&gt;<a class="code" href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">session</a>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>, +1);</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;   <span class="keywordflow">return</span> data;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;}</div><div class="ttc" id="group__ast__msg__data_html_ga9c757943fd32c228f911b6f8e1e91046"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga9c757943fd32c228f911b6f8e1e91046">ast_msg_data_dup</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_dup(struct ast_msg_data *msg)</div><div class="ttdoc">Clone an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01495">message.c:1495</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="structsendtext__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">sendtext_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02712">chan_pjsip.c:2712</a></div></div>
<div class="ttc" id="structsendtext__data_html"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html">sendtext_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02711">chan_pjsip.c:2711</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html">ast_sip_channel_pvt</a></div><div class="ttdoc">A structure which contains a channel implementation and session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00466">res_pjsip_session.h:466</a></div></div>
<div class="ttc" id="structast__sip__channel__pvt_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d4/d51/structast__sip__channel__pvt.html#a47bd1bb949183a58a194970acaccffbd">ast_sip_channel_pvt::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdoc">Pointer to session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00470">res_pjsip_session.h:470</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab49a76ee0e8f21d19271d82beed13ebe"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab49a76ee0e8f21d19271d82beed13ebe">sendtext_data_destroy</a></div><div class="ttdeci">static void sendtext_data_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02716">chan_pjsip.c:2716</a></div></div>
<div class="ttc" id="structsendtext__data_html_a21a470de3637d736bd1632038989a877"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">sendtext_data::msg</a></div><div class="ttdeci">struct ast_msg_data * msg</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02713">chan_pjsip.c:2713</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab49a76ee0e8f21d19271d82beed13ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49a76ee0e8f21d19271d82beed13ebe">&#9670;&nbsp;</a></span>sendtext_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sendtext_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02716">2716</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02713">sendtext_data::msg</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02712">sendtext_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02723">sendtext_data_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;{</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d7a/structsendtext__data.html">sendtext_data</a> *data = obj;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(data-&gt;<a class="code" href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">msg</a>);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;}</div><div class="ttc" id="structsendtext__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html#a47bd1bb949183a58a194970acaccffbd">sendtext_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02712">chan_pjsip.c:2712</a></div></div>
<div class="ttc" id="structsendtext__data_html"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html">sendtext_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02711">chan_pjsip.c:2711</a></div></div>
<div class="ttc" id="structsendtext__data_html_a21a470de3637d736bd1632038989a877"><div class="ttname"><a href="../../d1/d7a/structsendtext__data.html#a21a470de3637d736bd1632038989a877">sendtext_data::msg</a></div><div class="ttdeci">struct ast_msg_data * msg</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02713">chan_pjsip.c:2713</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78e2ade62c8bb21a578778fe8f416d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e2ade62c8bb21a578778fe8f416d88">&#9670;&nbsp;</a></span>set_channel_on_rtp_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_channel_on_rtp_instance </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00494">494</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">ast_sip_session::active_media_state</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00553">ast_rtp_instance_set_channel_id()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">ast_sip_session_media::rtp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02358">call()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01045">chan_pjsip_fixup()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02476">clear_session_and_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;{</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions); ++i) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a> *session_media;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      session_media = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">active_media_state</a>-&gt;sessions, i);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (!session_media || !session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a>(session_media-&gt;<a class="code" href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a>, channel_id);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div><div class="ttc" id="rtp__engine_8h_html_ab88c871dd5c164b7a0a6af5e7e12d16f"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#ab88c871dd5c164b7a0a6af5e7e12d16f">ast_rtp_instance_set_channel_id</a></div><div class="ttdeci">void ast_rtp_instance_set_channel_id(struct ast_rtp_instance *instance, const char *uniqueid)</div><div class="ttdoc">Set the channel that owns this RTP instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00553">rtp_engine.c:553</a></div></div>
<div class="ttc" id="structast__sip__session_html_a88e7edbcbdea0569dc8ff0b74129c5f7"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a88e7edbcbdea0569dc8ff0b74129c5f7">ast_sip_session::active_media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * active_media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00209">res_pjsip_session.h:209</a></div></div>
<div class="ttc" id="structast__sip__session__media_html"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html">ast_sip_session_media</a></div><div class="ttdoc">A structure containing SIP session media information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00075">res_pjsip_session.h:75</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__sip__session__media_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d0/d23/structast__sip__session__media.html#a8adb8595b8127cbea2118fada1ef8782">ast_sip_session_media::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdoc">RTP instance itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00077">res_pjsip_session.h:77</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af11d3109da5cfcdcc3f5aa9df1bd8f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11d3109da5cfcdcc3f5aa9df1bd8f3a">&#9670;&nbsp;</a></span>set_sipdomain_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_sipdomain_variable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02994">2994</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, and <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00235">ast_sip_session::request_uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03007">chan_pjsip_incoming_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;{</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;   pjsip_sip_uri *sip_ruri = pjsip_uri_get_uri(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a20e3f2a5414e423d1c7bd2e35656dd6f">request_uri</a>);</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;   <span class="keywordtype">size_t</span> size = pj_strlen(&amp;sip_ruri-&gt;host) + 1;</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/dac/structdomain.html">domain</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(size);</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(domain, &amp;sip_ruri-&gt;host, size);</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <span class="stringliteral">&quot;SIPDOMAIN&quot;</span>, domain);</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;}</div><div class="ttc" id="structast__sip__session_html_a20e3f2a5414e423d1c7bd2e35656dd6f"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a20e3f2a5414e423d1c7bd2e35656dd6f">ast_sip_session::request_uri</a></div><div class="ttdeci">pjsip_uri * request_uri</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00235">res_pjsip_session.h:235</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37ea972388db3c3094a132ee472cae72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37ea972388db3c3094a132ee472cae72">&#9670;&nbsp;</a></span>topology_change_refresh_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a>* topology_change_refresh_data_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01524">1524</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00238">ast_sip_session_media_state_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01513">topology_change_refresh_data::media_state</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01512">topology_change_refresh_data::session</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">ast_sip_session_media_state::topology</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01516">topology_change_refresh_data_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01592">handle_topology_request_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;{</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a> *<a class="code" href="../../d7/ded/structrefresh__data.html">refresh_data</a>;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   refresh_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*refresh_data));</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   <span class="keywordflow">if</span> (!refresh_data) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;   }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(session);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;   refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a> = <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a0a9996be2e7d0a6fe7df55098932f5f6">ast_sip_session_media_state_alloc</a>();</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">if</span> (!refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a>) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a>(refresh_data);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   }</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a> = <a class="code" href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a>(topology);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordflow">if</span> (!refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a>-&gt;<a class="code" href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">topology</a>) {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a>(refresh_data);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <span class="keywordflow">return</span> refresh_data;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div><div class="ttc" id="res__pjsip__session_8h_html_a0a9996be2e7d0a6fe7df55098932f5f6"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a0a9996be2e7d0a6fe7df55098932f5f6">ast_sip_session_media_state_alloc</a></div><div class="ttdeci">struct ast_sip_session_media_state * ast_sip_session_media_state_alloc(void)</div><div class="ttdoc">Allocate a session media state structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00238">res_pjsip_session.c:238</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01511">chan_pjsip.c:1511</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="stream_8h_html_a00b605b453fe5ff538e361126d600303"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_clone(const struct ast_stream_topology *topology)</div><div class="ttdoc">Create a deep clone of an existing stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00667">stream.c:667</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html_a5c29156dc856038737e62e879e6043aa"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">topology_change_refresh_data::media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01513">chan_pjsip.c:1513</a></div></div>
<div class="ttc" id="structast__sip__session__media__state_html_a15d14a20c2f5eb81b8b933304dce2ea3"><div class="ttname"><a href="../../de/dd5/structast__sip__session__media__state.html#a15d14a20c2f5eb81b8b933304dce2ea3">ast_sip_session_media_state::topology</a></div><div class="ttdeci">struct ast_stream_topology * topology</div><div class="ttdoc">The media stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00153">res_pjsip_session.h:153</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a8ad04a358d51294f6d05a862d0841eb8"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a8ad04a358d51294f6d05a862d0841eb8">topology_change_refresh_data_free</a></div><div class="ttdeci">static void topology_change_refresh_data_free(struct topology_change_refresh_data *refresh_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01516">chan_pjsip.c:1516</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html#a47bd1bb949183a58a194970acaccffbd">topology_change_refresh_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01512">chan_pjsip.c:1512</a></div></div>
<div class="ttc" id="structrefresh__data_html"><div class="ttname"><a href="../../d7/ded/structrefresh__data.html">refresh_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01485">pjsip/dialplan_functions.c:1485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ad04a358d51294f6d05a862d0841eb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad04a358d51294f6d05a862d0841eb8">&#9670;&nbsp;</a></span>topology_change_refresh_data_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void topology_change_refresh_data_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d18/structtopology__change__refresh__data.html">topology_change_refresh_data</a> *&#160;</td>
          <td class="paramname"><em>refresh_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01516">1516</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00344">ast_sip_session_media_state_free()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01513">topology_change_refresh_data::media_state</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01512">topology_change_refresh_data::session</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01592">handle_topology_request_change()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01575">send_topology_change_refresh()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01524">topology_change_refresh_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;{</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a8a52106819ac5621fe89579644d4afd3">ast_sip_session_media_state_free</a>(refresh_data-&gt;<a class="code" href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">media_state</a>);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(refresh_data);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;}</div><div class="ttc" id="res__pjsip__session_8h_html_a8a52106819ac5621fe89579644d4afd3"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a8a52106819ac5621fe89579644d4afd3">ast_sip_session_media_state_free</a></div><div class="ttdeci">void ast_sip_session_media_state_free(struct ast_sip_session_media_state *media_state)</div><div class="ttdoc">Free a session media state structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l00344">res_pjsip_session.c:344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html_a5c29156dc856038737e62e879e6043aa"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html#a5c29156dc856038737e62e879e6043aa">topology_change_refresh_data::media_state</a></div><div class="ttdeci">struct ast_sip_session_media_state * media_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01513">chan_pjsip.c:1513</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtopology__change__refresh__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../de/d18/structtopology__change__refresh__data.html#a47bd1bb949183a58a194970acaccffbd">topology_change_refresh_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01512">chan_pjsip.c:1512</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaae704756dfd363718a01f2b0ed6acdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaae704756dfd363718a01f2b0ed6acdf">&#9670;&nbsp;</a></span>transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transfer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02096">2096</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00821">ast_sip_endpoint::aors</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00304">ast_sip_location_retrieve_contact_from_aor_list()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01853">ast_sorcery_retrieve_by_id()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01846">transfer_data::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01847">transfer_data::target</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01877">transfer_redirect()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">transfer_refer()</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00303">ast_sip_contact::uri</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02131">chan_pjsip_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;{</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d7c/structtransfer__data.html">transfer_data</a> *trnf_data = data;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="code" href="../../d9/d03/structcontact.html">contact</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *target = trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a>;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;   <span class="keywordflow">if</span> (trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_DISCONNECTED) {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Session already DISCONNECTED [reason=%d (%s)]\n&quot;</span>,</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;         trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause,</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;         pjsip_get_status_text(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause)-&gt;ptr);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <span class="comment">/* See if we have an endpoint; if so, use its contact */</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      endpoint = <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;endpoint&quot;</span>, target);</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <span class="keywordflow">if</span> (endpoint) {</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;         contact = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a00fd98f03df089bd6aa358f941ae0dcd">ast_sip_location_retrieve_contact_from_aor_list</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50edbc089f02d537b9a487f1a62c889e">aors</a>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;         <span class="keywordflow">if</span> (contact &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(contact-&gt;<a class="code" href="../../d8/d8a/structast__sip__contact.html#a19ac71226fac09e87afe31acb4c99214">uri</a>)) {</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;            target = contact-&gt;<a class="code" href="../../d8/d8a/structast__sip__contact.html#a19ac71226fac09e87afe31acb4c99214">uri</a>;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;         }</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      }</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;         <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a255794a206a6baa469864a21e4547fbe">transfer_redirect</a>(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>, target);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;         <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ace5164553d797b66e36f41ee195856ab">transfer_refer</a>(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>, target);</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      }</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trnf_data, -1);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(endpoint);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(contact);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;}</div><div class="ttc" id="structtransfer__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">transfer_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01846">chan_pjsip.c:1846</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="sorcery_8h_html_a100106a82d72aa59a66513ef3ad161c8"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a></div><div class="ttdeci">void * ast_sorcery_retrieve_by_id(const struct ast_sorcery *sorcery, const char *type, const char *id)</div><div class="ttdoc">Retrieve an object using its unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01853">sorcery.c:1853</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ace5164553d797b66e36f41ee195856ab"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ace5164553d797b66e36f41ee195856ab">transfer_refer</a></div><div class="ttdeci">static void transfer_refer(struct ast_sip_session *session, const char *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02044">chan_pjsip.c:2044</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a00fd98f03df089bd6aa358f941ae0dcd"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a00fd98f03df089bd6aa358f941ae0dcd">ast_sip_location_retrieve_contact_from_aor_list</a></div><div class="ttdeci">struct ast_sip_contact * ast_sip_location_retrieve_contact_from_aor_list(const char *aor_list)</div><div class="ttdoc">Retrieve the first bound contact from a list of AORs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/location_8c_source.html#l00304">location.c:304</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__contact_html"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a></div><div class="ttdoc">Contact associated with an address of record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00281">res_pjsip.h:281</a></div></div>
<div class="ttc" id="structtransfer__data_html"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html">transfer_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01845">chan_pjsip.c:1845</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtransfer__data_html_a23b26cdb3a71f525caf03b57f68d47fa"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">transfer_data::target</a></div><div class="ttdeci">char * target</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01847">chan_pjsip.c:1847</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50edbc089f02d537b9a487f1a62c889e"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50edbc089f02d537b9a487f1a62c889e">ast_sip_endpoint::aors</a></div><div class="ttdeci">const ast_string_field aors</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00821">res_pjsip.h:821</a></div></div>
<div class="ttc" id="structast__sip__contact_html_a19ac71226fac09e87afe31acb4c99214"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html#a19ac71226fac09e87afe31acb4c99214">ast_sip_contact::uri</a></div><div class="ttdeci">const ast_string_field uri</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00303">res_pjsip.h:303</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a255794a206a6baa469864a21e4547fbe"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a255794a206a6baa469864a21e4547fbe">transfer_redirect</a></div><div class="ttdeci">static void transfer_redirect(struct ast_sip_session *session, const char *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01877">chan_pjsip.c:1877</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82de71388fa4f49e43fe0eef0a03bfec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82de71388fa4f49e43fe0eef0a03bfec">&#9670;&nbsp;</a></span>transfer_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/d7c/structtransfer__data.html">transfer_data</a>* transfer_data_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01858">1858</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00363">rtp_direct_media_data::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01846">transfer_data::session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01847">transfer_data::target</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01850">transfer_data_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02131">chan_pjsip_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;{</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d7c/structtransfer__data.html">transfer_data</a> *trnf_data = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*trnf_data), <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a02499f71751fd22c978ce88b7bbb1868">transfer_data_destroy</a>);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   <span class="keywordflow">if</span> (!trnf_data) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <span class="keywordflow">if</span> (!(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a>))) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trnf_data, -1);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, +1);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a> = <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   <span class="keywordflow">return</span> trnf_data;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;}</div><div class="ttc" id="structtransfer__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">transfer_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01846">chan_pjsip.c:1846</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a02499f71751fd22c978ce88b7bbb1868"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a02499f71751fd22c978ce88b7bbb1868">transfer_data_destroy</a></div><div class="ttdeci">static void transfer_data_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01850">chan_pjsip.c:1850</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structtransfer__data_html"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html">transfer_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01845">chan_pjsip.c:1845</a></div></div>
<div class="ttc" id="structtransfer__data_html_a23b26cdb3a71f525caf03b57f68d47fa"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">transfer_data::target</a></div><div class="ttdeci">char * target</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01847">chan_pjsip.c:1847</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02499f71751fd22c978ce88b7bbb1868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02499f71751fd22c978ce88b7bbb1868">&#9670;&nbsp;</a></span>transfer_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void transfer_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01850">1850</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01846">transfer_data::session</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01847">transfer_data::target</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01858">transfer_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;{</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d7c/structtransfer__data.html">transfer_data</a> *trnf_data = obj;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a>);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(trnf_data-&gt;<a class="code" href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">session</a>);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;}</div><div class="ttc" id="structtransfer__data_html_a47bd1bb949183a58a194970acaccffbd"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a47bd1bb949183a58a194970acaccffbd">transfer_data::session</a></div><div class="ttdeci">struct ast_sip_session * session</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01846">chan_pjsip.c:1846</a></div></div>
<div class="ttc" id="structtransfer__data_html"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html">transfer_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01845">chan_pjsip.c:1845</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtransfer__data_html_a23b26cdb3a71f525caf03b57f68d47fa"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">transfer_data::target</a></div><div class="ttdeci">char * target</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01847">chan_pjsip.c:1847</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a255794a206a6baa469864a21e4547fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255794a206a6baa469864a21e4547fbe">&#9670;&nbsp;</a></span>transfer_redirect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void transfer_redirect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01877">1877</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">AST_CONTROL_TRANSFER</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01238">ast_queue_control_data()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">ast_sip_session_send_response()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00410">AST_TRANSFER_FAILED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">AST_TRANSFER_SUCCESS</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02096">transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;{</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   pjsip_tx_data *packet;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a> <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a>;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   pjsip_contact_hdr *<a class="code" href="../../d9/d03/structcontact.html">contact</a>;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   <span class="keywordflow">if</span> (pjsip_inv_end_session(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>, 302, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;packet) != PJ_SUCCESS</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      || !packet) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to redirect PJSIP session for channel %s\n&quot;</span>,</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      message = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a>;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   }</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordflow">if</span> (!(contact = pjsip_msg_find_hdr(packet-&gt;msg, PJSIP_H_CONTACT, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      contact = pjsip_contact_hdr_create(packet-&gt;pool);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;   pj_strdup2_with_null(packet-&gt;pool, &amp;tmp, <a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a>);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <span class="keywordflow">if</span> (!(contact-&gt;uri = pjsip_parse_uri(packet-&gt;pool, tmp.ptr, tmp.slen, PJSIP_PARSE_URI_AS_NAMEADDR))) {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to parse destination URI &#39;%s&#39; for channel %s\n&quot;</span>,</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;         <a class="code" href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">target</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>));</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      message = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      pjsip_tx_data_dec_ref(packet);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;   pjsip_msg_add_hdr(packet-&gt;msg, (pjsip_hdr *) contact);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a>(session, packet);</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">include/asterisk/frame.h:409</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a></div><div class="ttdeci">ast_control_transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00408">include/asterisk/frame.h:408</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aed4c9a6bf6967790981c02027f5f02e8"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a></div><div class="ttdeci">void ast_sip_session_send_response(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">res_pjsip_session.c:2576</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00410">include/asterisk/frame.h:410</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">include/asterisk/frame.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structtransfer__data_html_a23b26cdb3a71f525caf03b57f68d47fa"><div class="ttname"><a href="../../d2/d7c/structtransfer__data.html#a23b26cdb3a71f525caf03b57f68d47fa">transfer_data::target</a></div><div class="ttdeci">char * target</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01847">chan_pjsip.c:1847</a></div></div>
<div class="ttc" id="channel_8h_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace5164553d797b66e36f41ee195856ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5164553d797b66e36f41ee195856ab">&#9670;&nbsp;</a></span>transfer_refer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void transfer_refer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">2044</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">AST_CONTROL_TRANSFER</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01238">ast_queue_control_data()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05063">ast_sip_add_header()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00410">AST_TRANSFER_FAILED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">AST_TRANSFER_SUCCESS</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01915">refer_callback_module</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01927">xfer_client_on_evsub_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02096">transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;{</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   pjsip_evsub *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a> <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a>;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   pjsip_tx_data *packet;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ref_by_val;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <span class="keywordtype">char</span> local_info[pj_strlen(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg-&gt;local.info_str) + 1];</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="keyword">struct </span>pjsip_evsub_user xfer_cb;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   pj_bzero(&amp;xfer_cb, <span class="keyword">sizeof</span>(xfer_cb));</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   xfer_cb.on_evsub_state = &amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a124979e0fe3b11be892d3f40aa47134c">xfer_client_on_evsub_state</a>;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <span class="keywordflow">if</span> (pjsip_xfer_create_uac(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg, &amp;xfer_cb, &amp;sub) != PJ_SUCCESS) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      message = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a>;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   }</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;   <span class="comment">/* refer_callback_module requires a reference to chan</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment">    * which will be released in xfer_client_on_evsub_state()</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment">    * when the implicit REFER subscription terminates */</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   pjsip_evsub_set_mod_data(sub, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>.id, chan);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan, +1);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   <span class="keywordflow">if</span> (pjsip_xfer_initiate(sub, pj_cstr(&amp;tmp, target), &amp;packet) != PJ_SUCCESS) {</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">goto</span> failure;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   }</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   ref_by_val = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;SIPREFERREDBYHDR&quot;</span>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(ref_by_val)) {</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#acef4d0aef5bdc92f0b6b188e48f2e90f">ast_sip_add_header</a>(packet, <span class="stringliteral">&quot;Referred-By&quot;</span>, ref_by_val);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(local_info, &amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg-&gt;local.info_str, <span class="keyword">sizeof</span>(local_info));</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#acef4d0aef5bdc92f0b6b188e48f2e90f">ast_sip_add_header</a>(packet, <span class="stringliteral">&quot;Referred-By&quot;</span>, local_info);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   }</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="keywordflow">if</span> (pjsip_xfer_send_request(sub, packet) == PJ_SUCCESS) {</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   }</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;failure:</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   message = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a>;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   pjsip_evsub_set_mod_data(sub, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>.id, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   pjsip_evsub_terminate(sub, PJ_FALSE);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan, -1);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">include/asterisk/frame.h:409</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a></div><div class="ttdeci">ast_control_transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00408">include/asterisk/frame.h:408</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9e829b838998b3165e1ea7811886332c"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a></div><div class="ttdeci">static pjsip_module refer_callback_module</div><div class="ttdoc">REFER Callback module, used to attach session data structure to subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01915">chan_pjsip.c:1915</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_acef4d0aef5bdc92f0b6b188e48f2e90f"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#acef4d0aef5bdc92f0b6b188e48f2e90f">ast_sip_add_header</a></div><div class="ttdeci">int ast_sip_add_header(pjsip_tx_data *tdata, const char *name, const char *value)</div><div class="ttdoc">Add a header to an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05063">res_pjsip.c:5063</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a124979e0fe3b11be892d3f40aa47134c"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a124979e0fe3b11be892d3f40aa47134c">xfer_client_on_evsub_state</a></div><div class="ttdeci">static void xfer_client_on_evsub_state(pjsip_evsub *sub, pjsip_event *event)</div><div class="ttdoc">Callback function to report status of implicit REFER-NOTIFY subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01927">chan_pjsip.c:1927</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00410">include/asterisk/frame.h:410</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">include/asterisk/frame.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9359cca96e970cfc8a30a625885115b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9359cca96e970cfc8a30a625885115b">&#9670;&nbsp;</a></span>transmit_info_dtmf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_info_dtmf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02218">2218</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01771">ast_free_ptr()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05091">ast_sip_add_body()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02842">ast_sip_session_send_request()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02033">ast_sip_body::body_text</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02029">ast_sip_body::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02262">chan_pjsip_digit_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;{</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a> *, dtmf_data, <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = dtmf_data-&gt;session;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;   <span class="keyword">struct </span>pjsip_tx_data *tdata;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, body_text, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> body = {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      .<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;application&quot;</span>,</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      .subtype = <span class="stringliteral">&quot;dtmf-relay&quot;</span>,</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;   };</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_DISCONNECTED) {</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Session already DISCONNECTED [reason=%d (%s)]\n&quot;</span>,</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause,</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;         pjsip_get_status_text(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause)-&gt;ptr);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   }</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(32))) {</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not allocate buffer for INFO DTMF.\n&quot;</span>);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;   }</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a>, 0, <span class="stringliteral">&quot;Signal=%c\r\nDuration=%u\r\n&quot;</span>, dtmf_data-&gt;digit, dtmf_data-&gt;duration);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   body.<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a> = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a>);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/res__pjsip_8h.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a>(<span class="stringliteral">&quot;INFO&quot;</span>, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;dlg, session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;tdata)) {</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create DTMF INFO request\n&quot;</span>);</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;   }</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a>(tdata, &amp;body)) {</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not add body to DTMF INFO request\n&quot;</span>);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      pjsip_tx_data_dec_ref(tdata);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   }</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a35a7aa9427f3aea9384c1a481ce6a5f3">ast_sip_session_send_request</a>(session, tdata);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;}</div><div class="ttc" id="res__pjsip__session_8h_html_a35a7aa9427f3aea9384c1a481ce6a5f3"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a35a7aa9427f3aea9384c1a481ce6a5f3">ast_sip_session_send_request</a></div><div class="ttdeci">void ast_sip_session_send_request(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02842">res_pjsip_session.c:2842</a></div></div>
<div class="ttc" id="structast__sip__body_html_a88687b0dd98d5307f1219432b73b8412"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">ast_sip_body::body_text</a></div><div class="ttdeci">const char * body_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02033">res_pjsip.h:2033</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structinfo__dtmf__data_html"><div class="ttname"><a href="../../dc/dfd/structinfo__dtmf__data.html">info_dtmf_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02193">chan_pjsip.c:2193</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9a14851d1f88b087df7237ec180de52e"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a></div><div class="ttdeci">int ast_sip_add_body(pjsip_tx_data *tdata, const struct ast_sip_body *body)</div><div class="ttdoc">Add a body to an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05091">res_pjsip.c:5091</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__body_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_body::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02029">res_pjsip.h:2029</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__body_html"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html">ast_sip_body</a></div><div class="ttdoc">SIP body description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02027">res_pjsip.h:2027</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ac981149e3fb0f7fc8b6e75607b1b2ad0"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a></div><div class="ttdeci">int ast_sip_create_request(const char *method, struct pjsip_dialog *dlg, struct ast_sip_endpoint *endpoint, const char *uri, struct ast_sip_contact *contact, pjsip_tx_data **tdata)</div><div class="ttdoc">General purpose method for creating a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04490">res_pjsip.c:4490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab34c7950a3f2ea45cda536ae6582a567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab34c7950a3f2ea45cda536ae6582a567">&#9670;&nbsp;</a></span>transmit_info_with_vidupdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int transmit_info_with_vidupdate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send SIP INFO with video update request. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01351">1351</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05091">ast_sip_add_body()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02842">ast_sip_session_send_request()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02029">ast_sip_body::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;{</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> * xml =</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot; ?&gt;\r\n&quot;</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="stringliteral">&quot; &lt;media_control&gt;\r\n&quot;</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="stringliteral">&quot;  &lt;vc_primitive&gt;\r\n&quot;</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="stringliteral">&quot;   &lt;to_encoder&gt;\r\n&quot;</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <span class="stringliteral">&quot;    &lt;picture_fast_update/&gt;\r\n&quot;</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="stringliteral">&quot;   &lt;/to_encoder&gt;\r\n&quot;</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="stringliteral">&quot;  &lt;/vc_primitive&gt;\r\n&quot;</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="stringliteral">&quot; &lt;/media_control&gt;\r\n&quot;</span>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> body = {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      .<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;application&quot;</span>,</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      .subtype = <span class="stringliteral">&quot;media_control+xml&quot;</span>,</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      .body_text = xml</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   };</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *, <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, data, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keyword">struct </span>pjsip_tx_data *tdata;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;inv_session-&gt;state == PJSIP_INV_STATE_DISCONNECTED) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Session already DISCONNECTED [reason=%d (%s)]\n&quot;</span>,</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;         <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;inv_session-&gt;cause,</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;         pjsip_get_status_text(<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;inv_session-&gt;cause)-&gt;ptr);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   }</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/res__pjsip_8h.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a>(<span class="stringliteral">&quot;INFO&quot;</span>, <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;inv_session-&gt;dlg, <a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>-&gt;endpoint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;tdata)) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create text video update INFO request\n&quot;</span>);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a>(tdata, &amp;body)) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not add body to text video update INFO request\n&quot;</span>);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#a35a7aa9427f3aea9384c1a481ce6a5f3">ast_sip_session_send_request</a>(<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a>, tdata);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;}</div><div class="ttc" id="res__pjsip__session_8h_html_a35a7aa9427f3aea9384c1a481ce6a5f3"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#a35a7aa9427f3aea9384c1a481ce6a5f3">ast_sip_session_send_request</a></div><div class="ttdeci">void ast_sip_session_send_request(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02842">res_pjsip_session.c:2842</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9a14851d1f88b087df7237ec180de52e"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a></div><div class="ttdeci">int ast_sip_add_body(pjsip_tx_data *tdata, const struct ast_sip_body *body)</div><div class="ttdoc">Add a body to an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05091">res_pjsip.c:5091</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__body_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_body::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02029">res_pjsip.h:2029</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__body_html"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html">ast_sip_body</a></div><div class="ttdoc">SIP body description. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02027">res_pjsip.h:2027</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ac981149e3fb0f7fc8b6e75607b1b2ad0"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a></div><div class="ttdeci">int ast_sip_create_request(const char *method, struct pjsip_dialog *dlg, struct ast_sip_endpoint *endpoint, const char *uri, struct ast_sip_contact *contact, pjsip_tx_data **tdata)</div><div class="ttdoc">General purpose method for creating a SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04490">res_pjsip.c:4490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b3c2bb01bda9a7d660caee513f238d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b3c2bb01bda9a7d660caee513f238d3">&#9670;&nbsp;</a></span>transport_info_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void transport_info_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor function for <a class="el" href="../../df/d57/structtransport__info__data.html">transport_info_data</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00253">253</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;{</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d57/structtransport__info__data.html">transport_info_data</a> *data = obj;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(data);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="ttc" id="structtransport__info__data_html"><div class="ttname"><a href="../../df/d57/structtransport__info__data.html">transport_info_data</a></div><div class="ttdoc">Transport information stored in transport_info datastore. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d81/chan__pjsip_8h_source.html#l00030">chan_pjsip.h:30</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cb19b644b4895d36ab32aa1c03c3dc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb19b644b4895d36ab32aa1c03c3dc5">&#9670;&nbsp;</a></span>uid_hold_hash_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int uid_hold_hash_fn </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AO2 hash function for on hold UIDs </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01066">1066</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01206">ast_str_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;{</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key = obj;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="comment">/* Hash can only work on something with a full key. */</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a>(key);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_a33ab7fa091d5513d8507d3bd33ef5b55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01206">strings.h:1206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1edc44a2b615105076474b9b063e793c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1edc44a2b615105076474b9b063e793c">&#9670;&nbsp;</a></span>uid_hold_sort_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int uid_hold_sort_fn </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AO2 sort function for on hold UIDs </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01084">1084</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;{</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *left = obj_left;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right = obj_right;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      cmp = strcmp(left, right);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      cmp = strncmp(left, right, strlen(right));</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="comment">/* Sort can only work on something with a full or partial key. */</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      cmp = 0;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unload the PJSIP channel from Asterisk. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03403">3403</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00570">ast_channel_unregister()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00327">AST_MODPRI_CHANNEL_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00408">ast_rtp_glue_unregister()</a>, <a class="el" href="../../d2/dc0/pjsip__session_8c_source.html#l00063">ast_sip_session_unregister_supplement()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03331">ast_sip_unregister_service()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d6d/cli__commands_8c_source.html#l00484">pjsip_channel_cli_unregister()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01915">refer_callback_module</a>.</p>
<div class="fragment"><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;{</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a>);</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <a class="code" href="../../d9/d6d/cli__commands_8c.html#acfb7abc644b9473bf2be860969d2e8f6">pjsip_channel_cli_unregister</a>();</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aeccb50f70da772a3bef4ee65f8101f6b">chan_pjsip_supplement_response</a>);</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a3fb40d1def7c4a16194fc411b28e9086">chan_pjsip_supplement</a>);</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a80d1e0cd20b19a8071f0695cc3008b8d">pbx_start_supplement</a>);</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ac48366228fe4cc370e050c2364be43ab">chan_pjsip_ack_supplement</a>);</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">call_pickup_supplement</a>);</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#afea6ae18672039da64b60ec44988f100">dtmf_mode_function</a>);</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab5176ef2df39ebfba32475964a912822">moh_passthrough_function</a>);</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aba7e6da76cbe793e06eb03e0a01c5275">media_offer_function</a>);</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a637fba0a1b7a8d6059fdc2c9e598e8bc">chan_pjsip_dial_contacts_function</a>);</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#acda6def7b4067227ca75d803f66ac0db">chan_pjsip_parse_uri_function</a>);</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ade433b4f10a05327a621e8b05244cb32">session_refresh_function</a>);</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>);</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, -1);</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <a class="code" href="../../d5/dde/rtp__engine_8h.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a>(&amp;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9d86812ca5c40c8e82be3e77ce5156c8">chan_pjsip_rtp_glue</a>);</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;}</div><div class="ttc" id="chan__pjsip_8c_html_ade433b4f10a05327a621e8b05244cb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ade433b4f10a05327a621e8b05244cb32">session_refresh_function</a></div><div class="ttdeci">static struct ast_custom_function session_refresh_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03289">chan_pjsip.c:3289</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aba7e6da76cbe793e06eb03e0a01c5275"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aba7e6da76cbe793e06eb03e0a01c5275">media_offer_function</a></div><div class="ttdeci">static struct ast_custom_function media_offer_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03271">chan_pjsip.c:3271</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_afea6ae18672039da64b60ec44988f100"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#afea6ae18672039da64b60ec44988f100">dtmf_mode_function</a></div><div class="ttdeci">static struct ast_custom_function dtmf_mode_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03277">chan_pjsip.c:3277</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aeccb50f70da772a3bef4ee65f8101f6b"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aeccb50f70da772a3bef4ee65f8101f6b">chan_pjsip_supplement_response</a></div><div class="ttdeci">static struct ast_sip_session_supplement chan_pjsip_supplement_response</div><div class="ttdoc">SIP session supplement structure just for responses. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00155">chan_pjsip.c:155</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9e829b838998b3165e1ea7811886332c"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a></div><div class="ttdeci">static pjsip_module refer_callback_module</div><div class="ttdoc">REFER Callback module, used to attach session data structure to subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01915">chan_pjsip.c:1915</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aae89632996ffdcf888ab251c14dc6cdb"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aae89632996ffdcf888ab251c14dc6cdb">ast_sip_session_unregister_supplement</a></div><div class="ttdeci">void ast_sip_session_unregister_supplement(struct ast_sip_session_supplement *supplement)</div><div class="ttdoc">Unregister a an supplement to SIP session processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc0/pjsip__session_8c_source.html#l00063">pjsip_session.c:63</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a637fba0a1b7a8d6059fdc2c9e598e8bc"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a637fba0a1b7a8d6059fdc2c9e598e8bc">chan_pjsip_dial_contacts_function</a></div><div class="ttdeci">static struct ast_custom_function chan_pjsip_dial_contacts_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03261">chan_pjsip.c:3261</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ac48366228fe4cc370e050c2364be43ab"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ac48366228fe4cc370e050c2364be43ab">chan_pjsip_ack_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement chan_pjsip_ack_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00164">chan_pjsip.c:164</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="cli__commands_8c_html_acfb7abc644b9473bf2be860969d2e8f6"><div class="ttname"><a href="../../d9/d6d/cli__commands_8c.html#acfb7abc644b9473bf2be860969d2e8f6">pjsip_channel_cli_unregister</a></div><div class="ttdeci">void pjsip_channel_cli_unregister(void)</div><div class="ttdoc">Unregisters the channel cli commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6d/cli__commands_8c_source.html#l00484">cli_commands.c:484</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab5176ef2df39ebfba32475964a912822"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab5176ef2df39ebfba32475964a912822">moh_passthrough_function</a></div><div class="ttdeci">static struct ast_custom_function moh_passthrough_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03283">chan_pjsip.c:3283</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a3fb40d1def7c4a16194fc411b28e9086"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a3fb40d1def7c4a16194fc411b28e9086">chan_pjsip_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement chan_pjsip_supplement</div><div class="ttdoc">SIP session supplement structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00143">chan_pjsip.c:143</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6ab56a6616234005e8d75b380aceddf0"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6ab56a6616234005e8d75b380aceddf0">pjsip_uids_onhold</a></div><div class="ttdeci">static struct ao2_container * pjsip_uids_onhold</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01107">chan_pjsip.c:1107</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_acda6def7b4067227ca75d803f66ac0db"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#acda6def7b4067227ca75d803f66ac0db">chan_pjsip_parse_uri_function</a></div><div class="ttdeci">static struct ast_custom_function chan_pjsip_parse_uri_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03266">chan_pjsip.c:3266</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_af8f919fd0f5ea30c5cfd7ae0a3a3b47d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">call_pickup_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement call_pickup_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03109">chan_pjsip.c:3109</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a15aa09d9084763cdd20b7467a4cd381a"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a></div><div class="ttdeci">void ast_sip_unregister_service(pjsip_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03331">res_pjsip.c:3331</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_afe951ef8ac0fe6aae0db42ce12bb3791"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#afe951ef8ac0fe6aae0db42ce12bb3791">ast_rtp_glue_unregister</a></div><div class="ttdeci">int ast_rtp_glue_unregister(struct ast_rtp_glue *glue)</div><div class="ttdoc">Unregister RTP glue. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00408">rtp_engine.c:408</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a80d1e0cd20b19a8071f0695cc3008b8d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a80d1e0cd20b19a8071f0695cc3008b8d">pbx_start_supplement</a></div><div class="ttdeci">static struct ast_sip_session_supplement pbx_start_supplement</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03149">chan_pjsip.c:3149</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a74cd5fcb1313f0fb5f2f876bf484b3b7"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a74cd5fcb1313f0fb5f2f876bf484b3b7">chan_pjsip_tech</a></div><div class="ttdeci">struct ast_channel_tech chan_pjsip_tech</div><div class="ttdoc">PBX interface structure for channel registration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00109">chan_pjsip.c:109</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9d86812ca5c40c8e82be3e77ce5156c8"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9d86812ca5c40c8e82be3e77ce5156c8">chan_pjsip_rtp_glue</a></div><div class="ttdeci">static struct ast_rtp_glue chan_pjsip_rtp_glue</div><div class="ttdoc">Local glue for interacting with the RTP engine core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00486">chan_pjsip.c:486</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22eb012ae61e28bc411003144c9adfd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22eb012ae61e28bc411003144c9adfd2">&#9670;&nbsp;</a></span>update_connected_line_information()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_connected_line_information </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update connected line information. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01429">1429</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">ast_sip_session_refresh()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00486">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00488">AST_SIP_SESSION_REFRESH_METHOD_UPDATE</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">ast_sip_session_send_response()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">ast_sip_session::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00847">ast_sip_endpoint::id</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00863">ast_sip_endpoint::inband_progress</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">ast_sip_session::inv_session</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01402">is_colp_update_allowed()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04335">method</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00647">ast_sip_endpoint_id_configuration::refresh_method</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00639">ast_sip_endpoint_id_configuration::rpid_immediate</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;{</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *<a class="code" href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a> = data;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state == PJSIP_INV_STATE_DISCONNECTED) {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Session already DISCONNECTED [reason=%d (%s)]\n&quot;</span>,</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;         session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause,</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;         pjsip_get_status_text(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;cause)-&gt;ptr);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, -1);</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      || session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;role == PJSIP_ROLE_UAC) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aebb2528f712aada7a199bb35c42279eb">is_colp_update_allowed</a>(session)) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;         <span class="keyword">enum</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0d">ast_sip_session_refresh_method</a> <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;         <span class="keywordtype">int</span> generate_new_sdp;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         method = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a541a199d1b38a3d5e868702a9c86d064">refresh_method</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;         <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;options &amp; PJSIP_INV_SUPPORT_UPDATE) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            method = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0da02ccc9b52f326c27f7fd3ee072f4f6f1">AST_SIP_SESSION_REFRESH_METHOD_UPDATE</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;         }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         <span class="comment">/* Only the INVITE method actually needs SDP, UPDATE can do without */</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;         generate_new_sdp = (method == <a class="code" href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a>);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a>(session, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, method, generate_new_sdp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">id</a>.<a class="code" href="../../d4/df6/structast__sip__endpoint__id__configuration.html#abbb9bef03dad4bc15558e1fb76a9ec49">rpid_immediate</a></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      &amp;&amp; session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>-&gt;state != PJSIP_INV_STATE_DISCONNECTED</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      &amp;&amp; <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aebb2528f712aada7a199bb35c42279eb">is_colp_update_allowed</a>(session)) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="keywordtype">int</span> response_code = 0;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) {</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;         response_code = !session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aca51ad6cc12ba74967faa31fdc18cb53">inband_progress</a> ? 180 : 183;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>) {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;         response_code = 183;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <span class="keywordflow">if</span> (response_code) {</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;         <span class="keyword">struct </span>pjsip_tx_data *packet = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         <span class="keywordflow">if</span> (pjsip_inv_answer(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">inv_session</a>, response_code, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;packet) == PJ_SUCCESS) {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <a class="code" href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a>(session, packet);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;         }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   }</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(session, -1);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0dae9c19ba5b085de7f7cf9a0e1f278f8cc">AST_SIP_SESSION_REFRESH_METHOD_INVITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00486">res_pjsip.h:486</a></div></div>
<div class="ttc" id="structast__sip__session_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a3960205b2a4e7e012dc9f0eae1855f01">ast_sip_session::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00183">res_pjsip_session.h:183</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aebb2528f712aada7a199bb35c42279eb"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aebb2528f712aada7a199bb35c42279eb">is_colp_update_allowed</a></div><div class="ttdeci">static int is_colp_update_allowed(struct ast_sip_session *session)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01402">chan_pjsip.c:1402</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_afb35a66aecb7cc6a143f8075c3992e0da02ccc9b52f326c27f7fd3ee072f4f6f1"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0da02ccc9b52f326c27f7fd3ee072f4f6f1">AST_SIP_SESSION_REFRESH_METHOD_UPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00488">res_pjsip.h:488</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sip__session_html_ab9fd713b198a122cb52c7f10bd66d1c6"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#ab9fd713b198a122cb52c7f10bd66d1c6">ast_sip_session::inv_session</a></div><div class="ttdeci">struct pjsip_inv_session * inv_session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00187">res_pjsip_session.h:187</a></div></div>
<div class="ttc" id="structast__sip__session_html"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html">ast_sip_session</a></div><div class="ttdoc">A structure describing a SIP session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00179">res_pjsip_session.h:179</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aca51ad6cc12ba74967faa31fdc18cb53"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aca51ad6cc12ba74967faa31fdc18cb53">ast_sip_endpoint::inband_progress</a></div><div class="ttdeci">unsigned int inband_progress</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00863">res_pjsip.h:863</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astman_8c_html_ac4a6ae0400e4457f0b35beddec80c93d"><div class="ttname"><a href="../../d2/d4d/astman_8c.html#ac4a6ae0400e4457f0b35beddec80c93d">session</a></div><div class="ttdeci">static struct ast_mansession session</div></div>
<div class="ttc" id="res__pjsip__session_8h_html_ae45a3852c5bef6bf3719080907f02a42"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#ae45a3852c5bef6bf3719080907f02a42">ast_sip_session_refresh</a></div><div class="ttdeci">int ast_sip_session_refresh(struct ast_sip_session *session, ast_sip_session_request_creation_cb on_request_creation, ast_sip_session_sdp_creation_cb on_sdp_creation, ast_sip_session_response_cb on_response, enum ast_sip_session_refresh_method method, int generate_new_sdp, struct ast_sip_session_media_state *media_state)</div><div class="ttdoc">Send a reinvite or UPDATE on a session. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02524">res_pjsip_session.c:2524</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_abbb9bef03dad4bc15558e1fb76a9ec49"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#abbb9bef03dad4bc15558e1fb76a9ec49">ast_sip_endpoint_id_configuration::rpid_immediate</a></div><div class="ttdeci">unsigned int rpid_immediate</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00639">res_pjsip.h:639</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="structast__sip__endpoint__id__configuration_html_a541a199d1b38a3d5e868702a9c86d064"><div class="ttname"><a href="../../d4/df6/structast__sip__endpoint__id__configuration.html#a541a199d1b38a3d5e868702a9c86d064">ast_sip_endpoint_id_configuration::refresh_method</a></div><div class="ttdeci">enum ast_sip_session_refresh_method refresh_method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00647">res_pjsip.h:647</a></div></div>
<div class="ttc" id="res__pjsip__session_8h_html_aed4c9a6bf6967790981c02027f5f02e8"><div class="ttname"><a href="../../d9/de7/res__pjsip__session_8h.html#aed4c9a6bf6967790981c02027f5f02e8">ast_sip_session_send_response</a></div><div class="ttdeci">void ast_sip_session_send_response(struct ast_sip_session *session, pjsip_tx_data *tdata)</div><div class="ttdoc">Send a SIP response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d92/res__pjsip__session_8c_source.html#l02576">res_pjsip_session.c:2576</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50783ac9bc6f4943369ed254972049ac"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50783ac9bc6f4943369ed254972049ac">ast_sip_endpoint::id</a></div><div class="ttdeci">struct ast_sip_endpoint_id_configuration id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00847">res_pjsip.h:847</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_afb35a66aecb7cc6a143f8075c3992e0d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#afb35a66aecb7cc6a143f8075c3992e0d">ast_sip_session_refresh_method</a></div><div class="ttdeci">ast_sip_session_refresh_method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00484">res_pjsip.h:484</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3920b7e841a904750cb53f9d56755f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3920b7e841a904750cb53f9d56755f40">&#9670;&nbsp;</a></span>update_devstate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_devstate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03254">3254</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>, and <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;{</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>,</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;              <span class="stringliteral">&quot;PJSIP/%s&quot;</span>, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(obj));</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35c764a014ab25b08fd2984a271cadb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c764a014ab25b08fd2984a271cadb7">&#9670;&nbsp;</a></span>update_initial_connected_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_initial_connected_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/dec/structast__sip__session.html">ast_sip_session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02333">2333</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l09202">ast_channel_queue_connected_line_update()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00446">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01765">ast_party_id_copy()</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">ast_sip_session::channel</a>, <a class="el" href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">ast_sip_session::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00459">ast_party_connected_line::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00483">ast_party_connected_line::source</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02358">call()</a>.</p>
<div class="fragment"><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;{</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment">    * Use the channel CALLERID() as the initial connected line data.</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="comment">    * The core or a predial handler may have supplied missing values</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="comment">    * from the session-&gt;endpoint-&gt;id.self about who we are calling.</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   <span class="comment">/* Supply initial connected line information if available. */</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   <span class="keywordflow">if</span> (!session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> &amp;&amp; !session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id = session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.source = <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a>;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a>(session-&gt;<a class="code" href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">channel</a>, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="channel_8h_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00446">callerid.h:446</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="channel_8h_html_ade57349a78b2f32d3a7d1bc01fb3bf96"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a></div><div class="ttdeci">void ast_channel_queue_connected_line_update(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Queue a connected line update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09202">channel.c:9202</a></div></div>
<div class="ttc" id="structast__sip__session_html_a48371aaa1ad1144e564ebcd179a2db2e"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a48371aaa1ad1144e564ebcd179a2db2e">ast_sip_session::channel</a></div><div class="ttdeci">struct ast_channel * channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00189">res_pjsip_session.h:189</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a414b69d7583bb4cfc6daf5276aac6d14"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a></div><div class="ttdeci">char connected</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">eagi_proxy.c:82</a></div></div>
<div class="ttc" id="structast__sip__session_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d2/dec/structast__sip__session.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_sip_session::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/res__pjsip__session_8h_source.html#l00207">res_pjsip_session.h:207</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a124979e0fe3b11be892d3f40aa47134c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124979e0fe3b11be892d3f40aa47134c">&#9670;&nbsp;</a></span>xfer_client_on_evsub_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void xfer_client_on_evsub_state </td>
          <td>(</td>
          <td class="paramtype">pjsip_evsub *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_event *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function to report status of implicit REFER-NOTIFY subscription. </p>
<p>This function will be called on any state change in the REFER-NOTIFY subscription. Its primary purpose is to report SUCCESS/FAILURE of a transfer initiated via <a class="el" href="../../d0/d29/chan__pjsip_8c.html#ace5164553d797b66e36f41ee195856ab">transfer_refer</a> as well as to terminate the subscription, if necessary. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01927">1927</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">AST_CONTROL_TRANSFER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01238">ast_queue_control_data()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00410">AST_TRANSFER_FAILED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">AST_TRANSFER_SUCCESS</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00359">rtp_direct_media_data::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01915">refer_callback_module</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">transfer_refer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a> <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a>;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;   }</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   chan = pjsip_evsub_get_mod_data(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>.id);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <span class="keywordflow">if</span> (pjsip_evsub_get_state(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) == PJSIP_EVSUB_STATE_ACCEPTED) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="comment">/* Check if subscription is suppressed and terminate and send completion code, if so. */</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      pjsip_rx_data *rdata;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      pjsip_generic_string_hdr *refer_sub;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <span class="keyword">const</span> pj_str_t REFER_SUB = { <span class="stringliteral">&quot;Refer-Sub&quot;</span>, 9 };</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Transfer accepted on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="comment">/* Check if response message */</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;type == PJSIP_EVENT_TSX_STATE &amp;&amp; <a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;body.tsx_state.type == PJSIP_EVENT_RX_MSG) {</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;         rdata = <span class="keyword">event</span>-&gt;body.tsx_state.src.rdata;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;         <span class="comment">/* Find Refer-Sub header */</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;         refer_sub = pjsip_msg_find_hdr_by_name(rdata-&gt;msg_info.msg, &amp;REFER_SUB, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;         <span class="comment">/* Check if subscription is suppressed. If it is, the far end will not terminate it,</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">          * and the subscription will remain active until it times out.  Terminating it here</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">          * eliminates the unnecessary timeout.</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;         <span class="keywordflow">if</span> (refer_sub &amp;&amp; !pj_stricmp2(&amp;refer_sub-&gt;hvalue, <span class="stringliteral">&quot;false&quot;</span>)) {</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            <span class="comment">/* Since no subscription is desired, assume that call has been transferred successfully. */</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            <span class="comment">/* Channel reference will be released at end of function */</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="comment">/* Terminate subscription. */</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            pjsip_evsub_set_mod_data(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>.id, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            pjsip_evsub_terminate(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, PJ_TRUE);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            res = -1;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;         }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      }</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pjsip_evsub_get_state(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) == PJSIP_EVSUB_STATE_ACTIVE ||</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;         pjsip_evsub_get_state(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) == PJSIP_EVSUB_STATE_TERMINATED) {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      <span class="comment">/* Check for NOTIFY complete or error. */</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      pjsip_msg *msg;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      pjsip_msg_body *body;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      pjsip_status_line status_line = { .code = 0 };</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      pj_bool_t is_last;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;type == PJSIP_EVENT_TSX_STATE &amp;&amp; <a class="code" href="../../df/d7d/structevent.html">event</a>-&gt;body.tsx_state.type == PJSIP_EVENT_RX_MSG) {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;         pjsip_rx_data *rdata;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;         rdata = <span class="keyword">event</span>-&gt;body.tsx_state.src.rdata;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;         msg = rdata-&gt;msg_info.msg;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;         <span class="keywordflow">if</span> (msg-&gt;type == PJSIP_REQUEST_MSG) {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="keywordflow">if</span> (!pjsip_method_cmp(&amp;msg-&gt;line.req.method, pjsip_get_notify_method())) {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;               body = msg-&gt;body;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;               <span class="keywordflow">if</span> (body &amp;&amp; !pj_stricmp2(&amp;body-&gt;content_type.type, <span class="stringliteral">&quot;message&quot;</span>)</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                  &amp;&amp; !pj_stricmp2(&amp;body-&gt;content_type.subtype, <span class="stringliteral">&quot;sipfrag&quot;</span>)) {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                  pjsip_parse_status_line((<span class="keywordtype">char</span> *)body-&gt;data, body-&gt;len, &amp;status_line);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;               }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            }</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            status_line.code = msg-&gt;line.status.code;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            status_line.reason = msg-&gt;line.status.reason;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;         }</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;         status_line.code = 500;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;         status_line.reason = *pjsip_get_status_text(500);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      }</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      is_last = (pjsip_evsub_get_state(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) == PJSIP_EVSUB_STATE_TERMINATED);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="comment">/* If the status code is &gt;= 200, the subscription is finished. */</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="keywordflow">if</span> (status_line.code &gt;= 200 || is_last) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;         res = -1;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;         <span class="comment">/* If the subscription has terminated, return AST_TRANSFER_SUCCESS for 2XX.</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">          * Return AST_TRANSFER_FAILED for any code &lt; 200.</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="comment">          * Otherwise, return the status code.</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment">          * The subscription should not terminate for any code &lt; 200,</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">          * but if it does, that constitutes a failure. */</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;         <span class="keywordflow">if</span> (status_line.code &lt; 200) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            message = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a>;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status_line.code &gt;= 300) {</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            message = status_line.code;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;         }</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;         <span class="comment">/* If subscription not terminated and subscription is finished (status code &gt;= 200)</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">          * terminate it */</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;         <span class="keywordflow">if</span> (!is_last) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            pjsip_tx_data *tdata;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            status = pjsip_evsub_initiate(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, pjsip_get_subscribe_method(), 0, &amp;tdata);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            <span class="keywordflow">if</span> (status == PJ_SUCCESS) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;               pjsip_evsub_send_request(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, tdata);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            }</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;         }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;         <span class="comment">/* Finished. Remove session from subscription */</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;         pjsip_evsub_set_mod_data(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a>.id, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Transfer channel %s completed: %d %.*s (%s)\n&quot;</span>,</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;               status_line.code,</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;               (<span class="keywordtype">int</span>)status_line.reason.slen, status_line.reason.ptr,</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;               (message == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a>) ? <span class="stringliteral">&quot;Success&quot;</span> : <span class="stringliteral">&quot;Failure&quot;</span>);</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      }</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   }</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>, &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan, -1);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   }</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">include/asterisk/frame.h:409</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a></div><div class="ttdeci">ast_control_transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00408">include/asterisk/frame.h:408</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a9e829b838998b3165e1ea7811886332c"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9e829b838998b3165e1ea7811886332c">refer_callback_module</a></div><div class="ttdeci">static pjsip_module refer_callback_module</div><div class="ttdoc">REFER Callback module, used to attach session data structure to subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01915">chan_pjsip.c:1915</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a3752844ed9e12f636ca1d576d4b1b4ff">AST_TRANSFER_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00410">include/asterisk/frame.h:410</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">include/asterisk/frame.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP Channel Driver&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DRIVER, .requires = &quot;res_pjsip,res_pjsip_session,res_pjsip_pubsub&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03438">3438</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03438">3438</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="af8f919fd0f5ea30c5cfd7ae0a3a3b47d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f919fd0f5ea30c5cfd7ae0a3a3b47d">&#9670;&nbsp;</a></span>call_pickup_supplement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> call_pickup_supplement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .method = <span class="stringliteral">&quot;INVITE&quot;</span>,</div><div class="line">   .priority = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a6e3c5164d38b50bc0f4f22040dedb2ceada231ff2577ce4d1f8d57afded2cd888">AST_SIP_SUPPLEMENT_PRIORITY_LAST</a> - 1,</div><div class="line">   .incoming_request = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aa575d2376b18837a5125b106d8cb2b6d">call_pickup_incoming_request</a>,</div><div class="line">}</div><div class="ttc" id="chan__pjsip_8c_html_aa575d2376b18837a5125b106d8cb2b6d"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aa575d2376b18837a5125b106d8cb2b6d">call_pickup_incoming_request</a></div><div class="ttdeci">static int call_pickup_incoming_request(struct ast_sip_session *session, pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03065">chan_pjsip.c:3065</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a6e3c5164d38b50bc0f4f22040dedb2ceada231ff2577ce4d1f8d57afded2cd888"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a6e3c5164d38b50bc0f4f22040dedb2ceada231ff2577ce4d1f8d57afded2cd888">AST_SIP_SUPPLEMENT_PRIORITY_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02878">res_pjsip.h:2878</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03109">3109</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="ad7b8d8b99d184d28a5f0e9fe66a47261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7b8d8b99d184d28a5f0e9fe66a47261">&#9670;&nbsp;</a></span>chan_idx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int chan_idx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00080">80</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>.</p>

</div>
</div>
<a id="ac48366228fe4cc370e050c2364be43ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac48366228fe4cc370e050c2364be43ab">&#9670;&nbsp;</a></span>chan_pjsip_ack_supplement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> chan_pjsip_ack_supplement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .method = <span class="stringliteral">&quot;ACK&quot;</span>,</div><div class="line">   .priority = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a6e3c5164d38b50bc0f4f22040dedb2cea9dbb0c95071568837209872e28864f43">AST_SIP_SUPPLEMENT_PRIORITY_CHANNEL</a>,</div><div class="line">   .incoming_request = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a063c3c49b5a808d76b74850a0c355d36">chan_pjsip_incoming_ack</a>,</div><div class="line">}</div><div class="ttc" id="res__pjsip_8h_html_a6e3c5164d38b50bc0f4f22040dedb2cea9dbb0c95071568837209872e28864f43"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a6e3c5164d38b50bc0f4f22040dedb2cea9dbb0c95071568837209872e28864f43">AST_SIP_SUPPLEMENT_PRIORITY_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02876">res_pjsip.h:2876</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a063c3c49b5a808d76b74850a0c355d36"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a063c3c49b5a808d76b74850a0c355d36">chan_pjsip_incoming_ack</a></div><div class="ttdeci">static int chan_pjsip_incoming_ack(struct ast_sip_session *session, struct pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03241">chan_pjsip.c:3241</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00164">164</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a637fba0a1b7a8d6059fdc2c9e598e8bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a637fba0a1b7a8d6059fdc2c9e598e8bc">&#9670;&nbsp;</a></span>chan_pjsip_dial_contacts_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> chan_pjsip_dial_contacts_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PJSIP_DIAL_CONTACTS&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#acaa05a68b4619213ebc4458bc9a55693">pjsip_acf_dial_contacts_read</a>,</div><div class="line">}</div><div class="ttc" id="pjsip_2dialplan__functions_8c_html_acaa05a68b4619213ebc4458bc9a55693"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#acaa05a68b4619213ebc4458bc9a55693">pjsip_acf_dial_contacts_read</a></div><div class="ttdeci">int pjsip_acf_dial_contacts_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdoc">PJSIP_DIAL_CONTACTS function read callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00983">pjsip/dialplan_functions.c:983</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03261">3261</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="acda6def7b4067227ca75d803f66ac0db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acda6def7b4067227ca75d803f66ac0db">&#9670;&nbsp;</a></span>chan_pjsip_parse_uri_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> chan_pjsip_parse_uri_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PJSIP_PARSE_URI&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#acd8bcc87e56668a31f9e8db2a7456435">pjsip_acf_parse_uri_read</a>,</div><div class="line">}</div><div class="ttc" id="pjsip_2dialplan__functions_8c_html_acd8bcc87e56668a31f9e8db2a7456435"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#acd8bcc87e56668a31f9e8db2a7456435">pjsip_acf_parse_uri_read</a></div><div class="ttdeci">int pjsip_acf_parse_uri_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdoc">PJSIP_PARSE_URI function read callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01197">pjsip/dialplan_functions.c:1197</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03266">3266</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a9d86812ca5c40c8e82be3e77ce5156c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d86812ca5c40c8e82be3e77ce5156c8">&#9670;&nbsp;</a></span>chan_pjsip_rtp_glue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/dc9/structast__rtp__glue.html">ast_rtp_glue</a> chan_pjsip_rtp_glue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Local glue for interacting with the RTP engine core. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00486">486</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a3fb40d1def7c4a16194fc411b28e9086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fb40d1def7c4a16194fc411b28e9086">&#9670;&nbsp;</a></span>chan_pjsip_supplement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> chan_pjsip_supplement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SIP session supplement structure. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00143">143</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="aeccb50f70da772a3bef4ee65f8101f6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeccb50f70da772a3bef4ee65f8101f6b">&#9670;&nbsp;</a></span>chan_pjsip_supplement_response</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> chan_pjsip_supplement_response</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SIP session supplement structure just for responses. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00155">155</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a74cd5fcb1313f0fb5f2f876bf484b3b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74cd5fcb1313f0fb5f2f876bf484b3b7">&#9670;&nbsp;</a></span>chan_pjsip_tech</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> chan_pjsip_tech</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PBX interface structure for channel registration. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00109">109</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="aab0df6f9b19263e2a45ed03a8bef4a0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab0df6f9b19263e2a45ed03a8bef4a0d">&#9670;&nbsp;</a></span>channel_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char channel_type[] = &quot;PJSIP&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00078">78</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>.</p>

</div>
</div>
<a id="a09b37fd87b4ebd1a80bff709a7f8c882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09b37fd87b4ebd1a80bff709a7f8c882">&#9670;&nbsp;</a></span>direct_media_mitigation_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> direct_media_mitigation_info = { }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00266">266</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="afea6ae18672039da64b60ec44988f100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea6ae18672039da64b60ec44988f100">&#9670;&nbsp;</a></span>dtmf_mode_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> dtmf_mode_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PJSIP_DTMF_MODE&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#ac1352c8f2adaea44a67d5d82226c3d80">pjsip_acf_dtmf_mode_read</a>,</div><div class="line">   .write = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a3019dadb0ab8e5fa971c0f081e6d9f0d">pjsip_acf_dtmf_mode_write</a></div><div class="line">}</div><div class="ttc" id="pjsip_2dialplan__functions_8c_html_ac1352c8f2adaea44a67d5d82226c3d80"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#ac1352c8f2adaea44a67d5d82226c3d80">pjsip_acf_dtmf_mode_read</a></div><div class="ttdeci">int pjsip_acf_dtmf_mode_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdoc">PJSIP_DTMF_MODE function read callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01429">pjsip/dialplan_functions.c:1429</a></div></div>
<div class="ttc" id="pjsip_2dialplan__functions_8c_html_a3019dadb0ab8e5fa971c0f081e6d9f0d"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a3019dadb0ab8e5fa971c0f081e6d9f0d">pjsip_acf_dtmf_mode_write</a></div><div class="ttdeci">int pjsip_acf_dtmf_mode_write(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdoc">PJSIP_DTMF_MODE function write callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01530">pjsip/dialplan_functions.c:1530</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03277">3277</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="aba7e6da76cbe793e06eb03e0a01c5275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba7e6da76cbe793e06eb03e0a01c5275">&#9670;&nbsp;</a></span>media_offer_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> media_offer_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PJSIP_MEDIA_OFFER&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a04f75938f1cd3e7813fabe5ff3ceb54b">pjsip_acf_media_offer_read</a>,</div><div class="line">   .write = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a0e534df9849b51f6369459ca2124ba15">pjsip_acf_media_offer_write</a></div><div class="line">}</div><div class="ttc" id="pjsip_2dialplan__functions_8c_html_a04f75938f1cd3e7813fabe5ff3ceb54b"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a04f75938f1cd3e7813fabe5ff3ceb54b">pjsip_acf_media_offer_read</a></div><div class="ttdeci">int pjsip_acf_media_offer_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdoc">PJSIP_MEDIA_OFFER function read callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01372">pjsip/dialplan_functions.c:1372</a></div></div>
<div class="ttc" id="pjsip_2dialplan__functions_8c_html_a0e534df9849b51f6369459ca2124ba15"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a0e534df9849b51f6369459ca2124ba15">pjsip_acf_media_offer_write</a></div><div class="ttdeci">int pjsip_acf_media_offer_write(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdoc">PJSIP_MEDIA_OFFER function write callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01400">pjsip/dialplan_functions.c:1400</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03271">3271</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="ab5176ef2df39ebfba32475964a912822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5176ef2df39ebfba32475964a912822">&#9670;&nbsp;</a></span>moh_passthrough_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> moh_passthrough_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PJSIP_MOH_PASSTHROUGH&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a04288afbb5bd0eaf46102d0da2c43cbe">pjsip_acf_moh_passthrough_read</a>,</div><div class="line">   .write = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a7c23eface5015785a06af3560a44ee77">pjsip_acf_moh_passthrough_write</a></div><div class="line">}</div><div class="ttc" id="pjsip_2dialplan__functions_8c_html_a7c23eface5015785a06af3560a44ee77"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a7c23eface5015785a06af3560a44ee77">pjsip_acf_moh_passthrough_write</a></div><div class="ttdeci">int pjsip_acf_moh_passthrough_write(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdoc">PJSIP_MOH_PASSTHROUGH function write callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01628">pjsip/dialplan_functions.c:1628</a></div></div>
<div class="ttc" id="pjsip_2dialplan__functions_8c_html_a04288afbb5bd0eaf46102d0da2c43cbe"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a04288afbb5bd0eaf46102d0da2c43cbe">pjsip_acf_moh_passthrough_read</a></div><div class="ttdeci">int pjsip_acf_moh_passthrough_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdoc">PJSIP_MOH_PASSTHROUGH function read callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01457">pjsip/dialplan_functions.c:1457</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03283">3283</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a80d1e0cd20b19a8071f0695cc3008b8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d1e0cd20b19a8071f0695cc3008b8d">&#9670;&nbsp;</a></span>pbx_start_supplement</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/db8/structast__sip__session__supplement.html">ast_sip_session_supplement</a> pbx_start_supplement</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .method = <span class="stringliteral">&quot;INVITE&quot;</span>,</div><div class="line">   .priority = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a6e3c5164d38b50bc0f4f22040dedb2ceada231ff2577ce4d1f8d57afded2cd888">AST_SIP_SUPPLEMENT_PRIORITY_LAST</a>,</div><div class="line">   .incoming_request = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ad56235030707963962d208ed278ab639">pbx_start_incoming_request</a>,</div><div class="line">}</div><div class="ttc" id="chan__pjsip_8c_html_ad56235030707963962d208ed278ab639"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ad56235030707963962d208ed278ab639">pbx_start_incoming_request</a></div><div class="ttdeci">static int pbx_start_incoming_request(struct ast_sip_session *session, pjsip_rx_data *rdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l03115">chan_pjsip.c:3115</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a6e3c5164d38b50bc0f4f22040dedb2ceada231ff2577ce4d1f8d57afded2cd888"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a6e3c5164d38b50bc0f4f22040dedb2ceada231ff2577ce4d1f8d57afded2cd888">AST_SIP_SUPPLEMENT_PRIORITY_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02878">res_pjsip.h:2878</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03149">3149</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a6ab56a6616234005e8d75b380aceddf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ab56a6616234005e8d75b380aceddf0">&#9670;&nbsp;</a></span>pjsip_uids_onhold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* pjsip_uids_onhold</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01107">1107</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a9e829b838998b3165e1ea7811886332c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e829b838998b3165e1ea7811886332c">&#9670;&nbsp;</a></span>refer_callback_module</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_module refer_callback_module</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = { <span class="stringliteral">&quot;REFER Callback&quot;</span>, 14 },</div><div class="line">   .id = -1,</div><div class="line">}</div></div><!-- fragment -->
<p>REFER Callback module, used to attach session data structure to subscription. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01915">1915</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">transfer_refer()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03403">unload_module()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01927">xfer_client_on_evsub_state()</a>.</p>

</div>
</div>
<a id="ade433b4f10a05327a621e8b05244cb32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade433b4f10a05327a621e8b05244cb32">&#9670;&nbsp;</a></span>session_refresh_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> session_refresh_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;PJSIP_SEND_SESSION_REFRESH&quot;</span>,</div><div class="line">   .write = <a class="code" href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a39c320d347c60a6f3251ce2cd6ac6370">pjsip_acf_session_refresh_write</a>,</div><div class="line">}</div><div class="ttc" id="pjsip_2dialplan__functions_8c_html_a39c320d347c60a6f3251ce2cd6ac6370"><div class="ttname"><a href="../../de/dfc/pjsip_2dialplan__functions_8c.html#a39c320d347c60a6f3251ce2cd6ac6370">pjsip_acf_session_refresh_write</a></div><div class="ttdeci">int pjsip_acf_session_refresh_write(struct ast_channel *chan, const char *cmd, char *data, const char *value)</div><div class="ttdoc">PJSIP_SEND_SESSION_REFRESH function write callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01671">pjsip/dialplan_functions.c:1671</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03289">3289</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="a1110e321d34ddd45dd93c2217aa8cca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1110e321d34ddd45dd93c2217aa8cca7">&#9670;&nbsp;</a></span>transport_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> transport_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <span class="stringliteral">&quot;chan_pjsip_transport_info&quot;</span>,</div><div class="line">   .destroy = <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a9b3c2bb01bda9a7d660caee513f238d3">transport_info_destroy</a>,</div><div class="line">}</div><div class="ttc" id="chan__pjsip_8c_html_a9b3c2bb01bda9a7d660caee513f238d3"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a9b3c2bb01bda9a7d660caee513f238d3">transport_info_destroy</a></div><div class="ttdeci">static void transport_info_destroy(void *obj)</div><div class="ttdoc">Destructor function for transport_info_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00253">chan_pjsip.c:253</a></div></div>
</div><!-- fragment -->
<p>Datastore used to store local/remote addresses for the INVITE request that created the PJSIP channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00261">261</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

</div>
</div>
<a id="acf8c7e538ca5104ac27f05759c116281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf8c7e538ca5104ac27f05759c116281">&#9670;&nbsp;</a></span>uniqueid_threadbuf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> uniqueid_threadbuf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d0/d29/chan__pjsip_8c.html#a07bf5ef75f46849351b11f967a1385e5">__init_uniqueid_threadbuf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00075">75</a> of file <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html">chan_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01278">chan_pjsip_get_uniqueid()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:12 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
