<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: prometheus_internal.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li><li class="navelem"><a class="el" href="../../dir_73eb7d5bb8c65cc7cf626919b2bea2a3.html">prometheus</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">prometheus_internal.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/de9/prometheus__internal_8h__dep__incl.png" border="0" usemap="#prometheus__internal_8hdep" alt=""/></div>
<map name="prometheus__internal_8hdep" id="prometheus__internal_8hdep">
<area shape="rect" id="node2" href="../../d8/d3a/bridges_8c.html" title="Prometheus Bridge Metrics. " alt="" coords="5,80,85,107"/>
<area shape="rect" id="node3" href="../../df/d8d/channels_8c.html" title="Prometheus Channel Metrics. " alt="" coords="109,80,200,107"/>
<area shape="rect" id="node4" href="../../d5/db8/res_2prometheus_2cli_8c.html" title="Prometheus CLI Commands. " alt="" coords="225,80,271,107"/>
<area shape="rect" id="node5" href="../../d6/d2c/res_2prometheus_2endpoints_8c.html" title="Prometheus Endpoint Metrics. " alt="" coords="296,80,392,107"/>
<area shape="rect" id="node6" href="../../d6/d5d/pjsip__outbound__registrations_8c.html" title="Prometheus PJSIP Outbound Registration Metrics. " alt="" coords="417,80,634,107"/>
<area shape="rect" id="node7" href="../../d7/d1b/res__prometheus_8c.html" title="Core Prometheus metrics API. " alt="" coords="659,80,797,107"/>
</map>
</div>
</div>
<p><a href="../../d0/d89/prometheus__internal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aecd310ab6f7c7d2536f3156541891b47"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#aecd310ab6f7c7d2536f3156541891b47">bridge_metrics_init</a> (void)</td></tr>
<tr class="memdesc:aecd310ab6f7c7d2536f3156541891b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize bridge metrics.  <a href="#aecd310ab6f7c7d2536f3156541891b47">More...</a><br /></td></tr>
<tr class="separator:aecd310ab6f7c7d2536f3156541891b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e66902318cc97373d88db1e0aecf4d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#a1e66902318cc97373d88db1e0aecf4d2">channel_metrics_init</a> (void)</td></tr>
<tr class="memdesc:a1e66902318cc97373d88db1e0aecf4d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize channel metrics.  <a href="#a1e66902318cc97373d88db1e0aecf4d2">More...</a><br /></td></tr>
<tr class="separator:a1e66902318cc97373d88db1e0aecf4d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8344521e6d0a510224cc68f40e97c7ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#a8344521e6d0a510224cc68f40e97c7ca">cli_init</a> (void)</td></tr>
<tr class="memdesc:a8344521e6d0a510224cc68f40e97c7ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize CLI command.  <a href="#a8344521e6d0a510224cc68f40e97c7ca">More...</a><br /></td></tr>
<tr class="separator:a8344521e6d0a510224cc68f40e97c7ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f2265acbc16ea23195efc98f72ae88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#af9f2265acbc16ea23195efc98f72ae88">endpoint_metrics_init</a> (void)</td></tr>
<tr class="memdesc:af9f2265acbc16ea23195efc98f72ae88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize endpoint metrics.  <a href="#af9f2265acbc16ea23195efc98f72ae88">More...</a><br /></td></tr>
<tr class="separator:af9f2265acbc16ea23195efc98f72ae88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a050053af11b48dc9a115dd03d1e92346"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#a050053af11b48dc9a115dd03d1e92346">pjsip_outbound_registration_metrics_init</a> (void)</td></tr>
<tr class="memdesc:a050053af11b48dc9a115dd03d1e92346"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize PJSIP outbound registration metrics.  <a href="#a050053af11b48dc9a115dd03d1e92346">More...</a><br /></td></tr>
<tr class="separator:a050053af11b48dc9a115dd03d1e92346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b9fac7324225a514f786b91b7c66e3"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#ab0b9fac7324225a514f786b91b7c66e3">prometheus_last_scrape_duration_get</a> (void)</td></tr>
<tr class="memdesc:ab0b9fac7324225a514f786b91b7c66e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the amount of time it took to perform the last scrape.  <a href="#ab0b9fac7324225a514f786b91b7c66e3">More...</a><br /></td></tr>
<tr class="separator:ab0b9fac7324225a514f786b91b7c66e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a81b00149e0574228e695029439f842"><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#a7a81b00149e0574228e695029439f842">prometheus_last_scrape_time_get</a> (void)</td></tr>
<tr class="memdesc:a7a81b00149e0574228e695029439f842"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the timestamp when the last scrape occurred.  <a href="#a7a81b00149e0574228e695029439f842">More...</a><br /></td></tr>
<tr class="separator:a7a81b00149e0574228e695029439f842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77a98b32e9e582d8fc6e0e5a4b7947af"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d89/prometheus__internal_8h.html#a77a98b32e9e582d8fc6e0e5a4b7947af">prometheus_scrape_to_string</a> (void)</td></tr>
<tr class="memdesc:a77a98b32e9e582d8fc6e0e5a4b7947af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the raw output of what a scrape would produce.  <a href="#a77a98b32e9e582d8fc6e0e5a4b7947af">More...</a><br /></td></tr>
<tr class="separator:a77a98b32e9e582d8fc6e0e5a4b7947af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aecd310ab6f7c7d2536f3156541891b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd310ab6f7c7d2536f3156541891b47">&#9670;&nbsp;</a></span>bridge_metrics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_metrics_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize bridge metrics. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d3a/bridges_8c_source.html#l00183">183</a> of file <a class="el" href="../../d8/d3a/bridges_8c_source.html">bridges.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00535">prometheus_callback_register()</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00871">prometheus_metrics_provider_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a>(&amp;<a class="code" href="../../d8/d3a/bridges_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ae28fee05e158456c0b5e7d236fc20d40">prometheus_callback_register</a>(&amp;<a class="code" href="../../d8/d3a/bridges_8c.html#a532fc0c7cdef848103ee3ae15e496490">bridges_callback</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="ttc" id="bridges_8c_html_a532fc0c7cdef848103ee3ae15e496490"><div class="ttname"><a href="../../d8/d3a/bridges_8c.html#a532fc0c7cdef848103ee3ae15e496490">bridges_callback</a></div><div class="ttdeci">struct prometheus_callback bridges_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3a/bridges_8c_source.html#l00160">bridges.c:160</a></div></div>
<div class="ttc" id="res__prometheus_8h_html_ae28fee05e158456c0b5e7d236fc20d40"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ae28fee05e158456c0b5e7d236fc20d40">prometheus_callback_register</a></div><div class="ttdeci">int prometheus_callback_register(struct prometheus_callback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00535">res_prometheus.c:535</a></div></div>
<div class="ttc" id="res__prometheus_8h_html_ac9324bd9603be11341b0d982095a2c50"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a></div><div class="ttdeci">void prometheus_metrics_provider_register(const struct prometheus_metrics_provider *provider)</div><div class="ttdoc">Register a metrics provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00871">res_prometheus.c:871</a></div></div>
<div class="ttc" id="bridges_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../d8/d3a/bridges_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3a/bridges_8c_source.html#l00178">bridges.c:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e66902318cc97373d88db1e0aecf4d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e66902318cc97373d88db1e0aecf4d2">&#9670;&nbsp;</a></span>channel_metrics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int channel_metrics_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize channel metrics. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d8d/channels_8c_source.html#l00241">241</a> of file <a class="el" href="../../df/d8d/channels_8c_source.html">channels.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00535">prometheus_callback_register()</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00871">prometheus_metrics_provider_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a>(&amp;<a class="code" href="../../df/d8d/channels_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ae28fee05e158456c0b5e7d236fc20d40">prometheus_callback_register</a>(&amp;<a class="code" href="../../df/d8d/channels_8c.html#af7018e9a4d4c54d1c079f2a2cdf7e392">channels_callback</a>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div><div class="ttc" id="res__prometheus_8h_html_ae28fee05e158456c0b5e7d236fc20d40"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ae28fee05e158456c0b5e7d236fc20d40">prometheus_callback_register</a></div><div class="ttdeci">int prometheus_callback_register(struct prometheus_callback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00535">res_prometheus.c:535</a></div></div>
<div class="ttc" id="res__prometheus_8h_html_ac9324bd9603be11341b0d982095a2c50"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a></div><div class="ttdeci">void prometheus_metrics_provider_register(const struct prometheus_metrics_provider *provider)</div><div class="ttdoc">Register a metrics provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00871">res_prometheus.c:871</a></div></div>
<div class="ttc" id="channels_8c_html_af7018e9a4d4c54d1c079f2a2cdf7e392"><div class="ttname"><a href="../../df/d8d/channels_8c.html#af7018e9a4d4c54d1c079f2a2cdf7e392">channels_callback</a></div><div class="ttdeci">struct prometheus_callback channels_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8d/channels_8c_source.html#l00218">channels.c:218</a></div></div>
<div class="ttc" id="channels_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../df/d8d/channels_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8d/channels_8c_source.html#l00236">channels.c:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8344521e6d0a510224cc68f40e97c7ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8344521e6d0a510224cc68f40e97c7ca">&#9670;&nbsp;</a></span>cli_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cli_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize CLI command. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00137">137</a> of file <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html">res/prometheus/cli.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00871">prometheus_metrics_provider_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a>(&amp;<a class="code" href="../../d5/db8/res_2prometheus_2cli_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d5/db8/res_2prometheus_2cli_8c.html#aac8b4924934e90b36a8012ce3d3bc607">cli_prometheus</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d5/db8/res_2prometheus_2cli_8c.html#aac8b4924934e90b36a8012ce3d3bc607">cli_prometheus</a>));</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="res_2prometheus_2cli_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../d5/db8/res_2prometheus_2cli_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00132">res/prometheus/cli.c:132</a></div></div>
<div class="ttc" id="res__prometheus_8h_html_ac9324bd9603be11341b0d982095a2c50"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a></div><div class="ttdeci">void prometheus_metrics_provider_register(const struct prometheus_metrics_provider *provider)</div><div class="ttdoc">Register a metrics provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00871">res_prometheus.c:871</a></div></div>
<div class="ttc" id="res_2prometheus_2cli_8c_html_aac8b4924934e90b36a8012ce3d3bc607"><div class="ttname"><a href="../../d5/db8/res_2prometheus_2cli_8c.html#aac8b4924934e90b36a8012ce3d3bc607">cli_prometheus</a></div><div class="ttdeci">static struct ast_cli_entry cli_prometheus[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00114">res/prometheus/cli.c:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9f2265acbc16ea23195efc98f72ae88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9f2265acbc16ea23195efc98f72ae88">&#9670;&nbsp;</a></span>endpoint_metrics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int endpoint_metrics_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize endpoint metrics. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d2c/res_2prometheus_2endpoints_8c_source.html#l00198">198</a> of file <a class="el" href="../../d6/d2c/res_2prometheus_2endpoints_8c_source.html">res/prometheus/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00535">prometheus_callback_register()</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00871">prometheus_metrics_provider_register()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a>(&amp;<a class="code" href="../../d6/d2c/res_2prometheus_2endpoints_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ae28fee05e158456c0b5e7d236fc20d40">prometheus_callback_register</a>(&amp;<a class="code" href="../../d6/d2c/res_2prometheus_2endpoints_8c.html#a73b9218bc5d4ce48a3d1d68b3157c490">endpoints_callback</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div><div class="ttc" id="res__prometheus_8h_html_ae28fee05e158456c0b5e7d236fc20d40"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ae28fee05e158456c0b5e7d236fc20d40">prometheus_callback_register</a></div><div class="ttdeci">int prometheus_callback_register(struct prometheus_callback *callback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00535">res_prometheus.c:535</a></div></div>
<div class="ttc" id="res__prometheus_8h_html_ac9324bd9603be11341b0d982095a2c50"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a></div><div class="ttdeci">void prometheus_metrics_provider_register(const struct prometheus_metrics_provider *provider)</div><div class="ttdoc">Register a metrics provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00871">res_prometheus.c:871</a></div></div>
<div class="ttc" id="res_2prometheus_2endpoints_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../d6/d2c/res_2prometheus_2endpoints_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d2c/res_2prometheus_2endpoints_8c_source.html#l00193">res/prometheus/endpoints.c:193</a></div></div>
<div class="ttc" id="res_2prometheus_2endpoints_8c_html_a73b9218bc5d4ce48a3d1d68b3157c490"><div class="ttname"><a href="../../d6/d2c/res_2prometheus_2endpoints_8c.html#a73b9218bc5d4ce48a3d1d68b3157c490">endpoints_callback</a></div><div class="ttdeci">struct prometheus_callback endpoints_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d2c/res_2prometheus_2endpoints_8c_source.html#l00175">res/prometheus/endpoints.c:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a050053af11b48dc9a115dd03d1e92346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a050053af11b48dc9a115dd03d1e92346">&#9670;&nbsp;</a></span>pjsip_outbound_registration_metrics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pjsip_outbound_registration_metrics_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize PJSIP outbound registration metrics. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00342">342</a> of file <a class="el" href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html">pjsip_outbound_registrations.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l00520">ast_sorcery_instance_observer_add()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l00537">ast_sorcery_instance_observer_remove()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02386">ast_sorcery_observer_add()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02418">ast_sorcery_observer_remove()</a>, <a class="el" href="../../d3/df0/stasis__system_8h.html#a12c122212914777f05a6a821a3b6df70">ast_system_registry_type()</a>, <a class="el" href="../../df/da0/stasis__system_8c_source.html#l00347">ast_system_topic()</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00871">prometheus_metrics_provider_register()</a>, <a class="el" href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00267">registry_message_cb()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, and <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router_create</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a>(&amp;<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a> = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(<a class="code" href="../../d3/df0/stasis__system_8h.html#a196188f45631aed77434c898ed322ce6">ast_system_topic</a>());</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>, <a class="code" href="../../d3/df0/stasis__system_8h.html#a12c122212914777f05a6a821a3b6df70">ast_system_registry_type</a>(), <a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a395b5d6617f4f577d8789dbbde85a03e">registry_message_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d25/sorcery_8h.html#ae0f5f4c63ea1bd82304c9c1bacd10068">ast_sorcery_instance_observer_add</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), &amp;<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a08ceb135e9c4b8c983eecf12fb01cde7">observer_callbacks_registrations</a>)) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d25/sorcery_8h.html#a6c1928d47eae1172f236e8ee421c2db4">ast_sorcery_observer_add</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;registration&quot;</span>, &amp;<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a4c0c7887be88ee3edb5385b829098eef">registration_observer</a>)) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_PJPROJECT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#ifdef HAVE_PJPROJECT</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#a27e4472f54af1cf4a00c936b65c3967b">ast_sorcery_instance_observer_remove</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), &amp;<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a08ceb135e9c4b8c983eecf12fb01cde7">observer_callbacks_registrations</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../d8/d25/sorcery_8h.html#a18d64c360480b458754fc30f781d5011">ast_sorcery_observer_remove</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;registration&quot;</span>, &amp;<a class="code" href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a4c0c7887be88ee3edb5385b829098eef">registration_observer</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_PJPROJECT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div><div class="ttc" id="sorcery_8h_html_ae0f5f4c63ea1bd82304c9c1bacd10068"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#ae0f5f4c63ea1bd82304c9c1bacd10068">ast_sorcery_instance_observer_add</a></div><div class="ttdeci">int ast_sorcery_instance_observer_add(struct ast_sorcery *sorcery, const struct ast_sorcery_instance_observer *callbacks)</div><div class="ttdoc">Add an observer to a sorcery instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l00520">sorcery.c:520</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_a85c07e3e0d15ea99cf0c5dbe1dfdcb24"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a></div><div class="ttdeci">static struct stasis_message_router * router</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00042">pjsip_outbound_registrations.c:42</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_a395b5d6617f4f577d8789dbbde85a03e"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a395b5d6617f4f577d8789dbbde85a03e">registry_message_cb</a></div><div class="ttdeci">static void registry_message_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00267">pjsip_outbound_registrations.c:267</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_a08ceb135e9c4b8c983eecf12fb01cde7"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a08ceb135e9c4b8c983eecf12fb01cde7">observer_callbacks_registrations</a></div><div class="ttdeci">static const struct ast_sorcery_instance_observer observer_callbacks_registrations</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00251">pjsip_outbound_registrations.c:251</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_a4c0c7887be88ee3edb5385b829098eef"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#a4c0c7887be88ee3edb5385b829098eef">registration_observer</a></div><div class="ttdeci">static const struct ast_sorcery_observer registration_observer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00191">pjsip_outbound_registrations.c:191</a></div></div>
<div class="ttc" id="res__prometheus_8h_html_ac9324bd9603be11341b0d982095a2c50"><div class="ttname"><a href="../../d0/db1/res__prometheus_8h.html#ac9324bd9603be11341b0d982095a2c50">prometheus_metrics_provider_register</a></div><div class="ttdeci">void prometheus_metrics_provider_register(const struct prometheus_metrics_provider *provider)</div><div class="ttdoc">Register a metrics provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00871">res_prometheus.c:871</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="sorcery_8h_html_a27e4472f54af1cf4a00c936b65c3967b"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a27e4472f54af1cf4a00c936b65c3967b">ast_sorcery_instance_observer_remove</a></div><div class="ttdeci">void ast_sorcery_instance_observer_remove(struct ast_sorcery *sorcery, const struct ast_sorcery_instance_observer *callbacks)</div><div class="ttdoc">Remove an observer from a sorcery instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l00537">sorcery.c:537</a></div></div>
<div class="ttc" id="sorcery_8h_html_a6c1928d47eae1172f236e8ee421c2db4"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a6c1928d47eae1172f236e8ee421c2db4">ast_sorcery_observer_add</a></div><div class="ttdeci">int ast_sorcery_observer_add(const struct ast_sorcery *sorcery, const char *type, const struct ast_sorcery_observer *callbacks)</div><div class="ttdoc">Add an observer to a specific object type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02386">sorcery.c:2386</a></div></div>
<div class="ttc" id="stasis__system_8h_html_a12c122212914777f05a6a821a3b6df70"><div class="ttname"><a href="../../d3/df0/stasis__system_8h.html#a12c122212914777f05a6a821a3b6df70">ast_system_registry_type</a></div><div class="ttdeci">struct stasis_message_type * ast_system_registry_type(void)</div><div class="ttdoc">A stasis_message_type for outbound registration. </div></div>
<div class="ttc" id="stasis__system_8h_html_a196188f45631aed77434c898ed322ce6"><div class="ttname"><a href="../../d3/df0/stasis__system_8h.html#a196188f45631aed77434c898ed322ce6">ast_system_topic</a></div><div class="ttdeci">struct stasis_topic * ast_system_topic(void)</div><div class="ttdoc">A Stasis Message Bus API topic which publishes messages regarding system changes. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/da0/stasis__system_8c_source.html#l00347">stasis_system.c:347</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="sorcery_8h_html_a18d64c360480b458754fc30f781d5011"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a18d64c360480b458754fc30f781d5011">ast_sorcery_observer_remove</a></div><div class="ttdeci">void ast_sorcery_observer_remove(const struct ast_sorcery *sorcery, const char *type, const struct ast_sorcery_observer *callbacks)</div><div class="ttdoc">Remove an observer from a specific object type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02418">sorcery.c:2418</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="pjsip__outbound__registrations_8c_html_ab1760b9a6a6c8d063d49ab9b5bcdfa49"><div class="ttname"><a href="../../d6/d5d/pjsip__outbound__registrations_8c.html#ab1760b9a6a6c8d063d49ab9b5bcdfa49">provider</a></div><div class="ttdeci">static struct prometheus_metrics_provider provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00337">pjsip_outbound_registrations.c:337</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0b9fac7324225a514f786b91b7c66e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b9fac7324225a514f786b91b7c66e3">&#9670;&nbsp;</a></span>prometheus_last_scrape_duration_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t prometheus_last_scrape_duration_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the amount of time it took to perform the last scrape. </p>
<p>Time returned is in milliseconds</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>scrape duration, in milliseconds </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00701">701</a> of file <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html">res_prometheus.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/db1/res__prometheus_8h_source.html#l00230">prometheus_metric::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00063">prometheus_show_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;{</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   int64_t duration;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">if</span> (sscanf(<a class="code" href="../../d7/d1b/res__prometheus_8c.html#a8d658c0c628873c1c13a41b3d8076220">core_scrape_metric</a>.<a class="code" href="../../de/d94/structprometheus__metric.html#ae0c1e3dcbc35f789a9e9ff7bfbf468b1">value</a>, <span class="stringliteral">&quot;%&quot;</span> PRIu64, &amp;duration) != 1) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <span class="keywordflow">return</span> duration;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="ttc" id="structprometheus__metric_html_ae0c1e3dcbc35f789a9e9ff7bfbf468b1"><div class="ttname"><a href="../../de/d94/structprometheus__metric.html#ae0c1e3dcbc35f789a9e9ff7bfbf468b1">prometheus_metric::value</a></div><div class="ttdeci">char value[PROMETHEUS_MAX_VALUE_LENGTH]</div><div class="ttdoc">The current value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db1/res__prometheus_8h_source.html#l00230">res_prometheus.h:230</a></div></div>
<div class="ttc" id="res__prometheus_8c_html_a8d658c0c628873c1c13a41b3d8076220"><div class="ttname"><a href="../../d7/d1b/res__prometheus_8c.html#a8d658c0c628873c1c13a41b3d8076220">core_scrape_metric</a></div><div class="ttdeci">static struct prometheus_metric core_scrape_metric</div><div class="ttdoc">The scrape duration metric. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00213">res_prometheus.c:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a81b00149e0574228e695029439f842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a81b00149e0574228e695029439f842">&#9670;&nbsp;</a></span>prometheus_last_scrape_time_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval prometheus_last_scrape_time_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the timestamp when the last scrape occurred. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>time when the last scrape occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00712">712</a> of file <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html">res_prometheus.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00136">scrape_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00063">prometheus_show_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d7/d1b/res__prometheus_8c.html#a52907b32ce3af257e0ae090387c51545">scrape_lock</a>);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordflow">return</span> last_scrape;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="res__prometheus_8c_html_a52907b32ce3af257e0ae090387c51545"><div class="ttname"><a href="../../d7/d1b/res__prometheus_8c.html#a52907b32ce3af257e0ae090387c51545">scrape_lock</a></div><div class="ttdeci">static ast_mutex_t scrape_lock</div><div class="ttdoc">Lock that protects data structures during an HTTP scrape. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00136">res_prometheus.c:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77a98b32e9e582d8fc6e0e5a4b7947af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77a98b32e9e582d8fc6e0e5a4b7947af">&#9670;&nbsp;</a></span>prometheus_scrape_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a>* prometheus_scrape_to_string </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the raw output of what a scrape would produce. </p>
<p>It can be useful to dump what a scrape will look like. This function returns the raw string representation of the metrics.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
    <tr><td class="paramname">Malloc'd</td><td><a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> on success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00685">685</a> of file <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html">res_prometheus.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00136">scrape_lock</a>, and <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00563">scrape_metrics()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/db8/res_2prometheus_2cli_8c_source.html#l00033">prometheus_show_metrics()</a>.</p>
<div class="fragment"><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;{</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *response;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   response = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(512);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (!response) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d1b/res__prometheus_8c.html#a52907b32ce3af257e0ae090387c51545">scrape_lock</a>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../d7/d1b/res__prometheus_8c.html#af0bf9da827c93bf5d2eb27e80e642517">scrape_metrics</a>(&amp;response);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d1b/res__prometheus_8c.html#a52907b32ce3af257e0ae090387c51545">scrape_lock</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordflow">return</span> response;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div><div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="res__prometheus_8c_html_a52907b32ce3af257e0ae090387c51545"><div class="ttname"><a href="../../d7/d1b/res__prometheus_8c.html#a52907b32ce3af257e0ae090387c51545">scrape_lock</a></div><div class="ttdeci">static ast_mutex_t scrape_lock</div><div class="ttdoc">Lock that protects data structures during an HTTP scrape. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00136">res_prometheus.c:136</a></div></div>
<div class="ttc" id="res__prometheus_8c_html_af0bf9da827c93bf5d2eb27e80e642517"><div class="ttname"><a href="../../d7/d1b/res__prometheus_8c.html#af0bf9da827c93bf5d2eb27e80e642517">scrape_metrics</a></div><div class="ttdeci">static void scrape_metrics(struct ast_str **response)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1b/res__prometheus_8c_source.html#l00563">res_prometheus.c:563</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:16 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
