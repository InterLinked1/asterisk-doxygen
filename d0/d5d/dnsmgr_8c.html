<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: dnsmgr.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dnsmgr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Background DNS update manager.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d78/__private_8h_source.html">asterisk/_private.h</a>&quot;</code><br />
<code>#include &lt;regex.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dc4/dnsmgr_8h_source.html">asterisk/dnsmgr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d59/acl_8h_source.html">asterisk/acl.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dnsmgr.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/dfb/dnsmgr_8c__incl.png" border="0" usemap="#dnsmgr_8c" alt=""/></div>
<map name="dnsmgr_8c" id="dnsmgr_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="379,229,463,256"/>
<area shape="rect" id="node22" href="../../d4/d78/__private_8h.html" title="Prototypes for public functions only of internal interest,. " alt="" coords="2119,80,2258,107"/>
<area shape="rect" id="node25" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1647,80,1783,107"/>
<area shape="rect" id="node26" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1650,229,1765,256"/>
<area shape="rect" id="node37" href="../../db/dc4/dnsmgr_8h.html" title="Background DNS update manager. " alt="" coords="1959,80,2095,107"/>
<area shape="rect" id="node40" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1421,229,1572,256"/>
<area shape="rect" id="node41" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1859,155,1985,181"/>
<area shape="rect" id="node42" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2472,80,2599,107"/>
<area shape="rect" id="node43" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1194,155,1295,181"/>
<area shape="rect" id="node44" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1424,80,1569,107"/>
<area shape="rect" id="node48" href="../../d5/d59/acl_8h.html" title="Access Control of various sorts. " alt="" coords="2067,155,2174,181"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="755,453,910,480"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="804,304,941,331"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,304,140,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="759,528,906,555"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1241,379,1384,405"/>
<area shape="rect" id="node27" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="2017,304,2155,331"/>
<area shape="rect" id="node30" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1595,379,1657,405"/>
<area shape="rect" id="node32" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1273,304,1387,331"/>
<area shape="rect" id="node33" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1915,379,2041,405"/>
<area shape="rect" id="node34" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1745,304,1891,331"/>
<area shape="rect" id="node35" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1411,304,1569,331"/>
<area shape="rect" id="node36" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1118,304,1249,331"/>
<area shape="rect" id="node31" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1778,453,1925,480"/>
<area shape="rect" id="node38" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2369,304,2515,331"/>
<area shape="rect" id="node39" href="../../d5/d60/srv_8h.html" title="Support for DNS SRV records, used in to locate SIP services. " alt="" coords="2409,155,2515,181"/>
<area shape="rect" id="node45" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1421,155,1572,181"/>
<area shape="rect" id="node46" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="1211,229,1345,256"/>
<area shape="rect" id="node47" href="../../d0/d62/xml_8h.html" title="Asterisk XML abstraction layer. " alt="" coords="983,304,1093,331"/>
<area shape="rect" id="node49" href="../../dc/dac/io_8h.html" title="I/O Management (derived from Cheops&#45;NG) " alt="" coords="2185,229,2283,256"/>
<area shape="rect" id="node50" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="2180,304,2344,331"/>
</map>
</div>
</div>
<p><a href="../../d0/d5d/dnsmgr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d52/structentry__list.html">entry_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d31/structrefresh__info.html">refresh_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4eac7b6f80c0e093ae0517ecc49ae7ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a4eac7b6f80c0e093ae0517ecc49ae7ef">REFRESH_DEFAULT</a>&#160;&#160;&#160;300</td></tr>
<tr class="separator:a4eac7b6f80c0e093ae0517ecc49ae7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43ae5f58db3498b5b1830bd98677117"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#ad43ae5f58db3498b5b1830bd98677117">ast_dnsmgr_changed</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:ad43ae5f58db3498b5b1830bd98677117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check is see if a dnsmgr entry has changed.  <a href="#ad43ae5f58db3498b5b1830bd98677117">More...</a><br /></td></tr>
<tr class="separator:ad43ae5f58db3498b5b1830bd98677117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45925bf0069c6da3eb1f17eca54a5035"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a45925bf0069c6da3eb1f17eca54a5035">ast_dnsmgr_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>)</td></tr>
<tr class="memdesc:a45925bf0069c6da3eb1f17eca54a5035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new DNS manager entry.  <a href="#a45925bf0069c6da3eb1f17eca54a5035">More...</a><br /></td></tr>
<tr class="separator:a45925bf0069c6da3eb1f17eca54a5035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd92dad21a119434e9c286499c817b6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, unsigned int family)</td></tr>
<tr class="memdesc:a5bd92dad21a119434e9c286499c817b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new DNS manager entry.  <a href="#a5bd92dad21a119434e9c286499c817b6">More...</a><br /></td></tr>
<tr class="separator:a5bd92dad21a119434e9c286499c817b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7299760ea18ab2ff1badadcd8af4dd0c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a7299760ea18ab2ff1badadcd8af4dd0c">ast_dnsmgr_lookup</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **dnsmgr, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>)</td></tr>
<tr class="memdesc:a7299760ea18ab2ff1badadcd8af4dd0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and initialize a DNS manager entry.  <a href="#a7299760ea18ab2ff1badadcd8af4dd0c">More...</a><br /></td></tr>
<tr class="separator:a7299760ea18ab2ff1badadcd8af4dd0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537cbd033c88567a4ec2c03df80e6994"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a537cbd033c88567a4ec2c03df80e6994">ast_dnsmgr_lookup_cb</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **dnsmgr, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, <a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a> func, void *data)</td></tr>
<tr class="memdesc:a537cbd033c88567a4ec2c03df80e6994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and initialize a DNS manager entry, with update callback.  <a href="#a537cbd033c88567a4ec2c03df80e6994">More...</a><br /></td></tr>
<tr class="separator:a537cbd033c88567a4ec2c03df80e6994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add74c87320b8447b69e776931520e994"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#add74c87320b8447b69e776931520e994">ast_dnsmgr_refresh</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:add74c87320b8447b69e776931520e994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force a refresh of a dnsmgr entry.  <a href="#add74c87320b8447b69e776931520e994">More...</a><br /></td></tr>
<tr class="separator:add74c87320b8447b69e776931520e994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0255399a507b71ae563fc2caf94d749c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a0255399a507b71ae563fc2caf94d749c">ast_dnsmgr_release</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:a0255399a507b71ae563fc2caf94d749c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a DNS manager entry.  <a href="#a0255399a507b71ae563fc2caf94d749c">More...</a><br /></td></tr>
<tr class="separator:a0255399a507b71ae563fc2caf94d749c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4006993b0aac1410d7255730bc3a7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a> (struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>, int verbose)</td></tr>
<tr class="separator:afd4006993b0aac1410d7255730bc3a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ede7ff922fb2764dfd455e49dc59bc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a0ede7ff922fb2764dfd455e49dc59bc8">dnsmgr_start_refresh</a> (void)</td></tr>
<tr class="separator:a0ede7ff922fb2764dfd455e49dc59bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea7f3ec33ca5aef5c8e8c532b313976"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#acea7f3ec33ca5aef5c8e8c532b313976">do_refresh</a> (void *data)</td></tr>
<tr class="separator:acea7f3ec33ca5aef5c8e8c532b313976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeaf0f7f80508d4b4bfd37c5cda21b97"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a> (int loading)</td></tr>
<tr class="separator:adeaf0f7f80508d4b4bfd37c5cda21b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4a10fc6c4154180877b09818f5f9b76"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#af4a10fc6c4154180877b09818f5f9b76">handle_cli_refresh</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:af4a10fc6c4154180877b09818f5f9b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed484dae5cb5531660b1f571985cb6a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#abed484dae5cb5531660b1f571985cb6a">handle_cli_reload</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:abed484dae5cb5531660b1f571985cb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f51bfd026479da84c974d890c5c673"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a42f51bfd026479da84c974d890c5c673">handle_cli_status</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a42f51bfd026479da84c974d890c5c673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47531bb8c9d97ca8276b74c05bc7aea2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **dnsmgr, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, <a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a> func, void *data)</td></tr>
<tr class="separator:a47531bb8c9d97ca8276b74c05bc7aea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f623757756f349de3f28480aeb8b7a6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a> (const void *data)</td></tr>
<tr class="separator:a7f623757756f349de3f28480aeb8b7a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;DNS Manager&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa331d52ef44f75eebbe4068a001099ba"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#aa331d52ef44f75eebbe4068a001099ba">cli_refresh</a> = { .<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="el" href="../../d0/d5d/dnsmgr_8c.html#af4a10fc6c4154180877b09818f5f9b76">handle_cli_refresh</a> , .summary = &quot;Performs an <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a> <a class="el" href="../../db/dd3/res__stun__monitor_8c.html#abe8cd601789a09864cb8e795bdbf5b6b">refresh</a>&quot; ,}</td></tr>
<tr class="separator:aa331d52ef44f75eebbe4068a001099ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b66ed9cfa2ea543e90ed13a4320817"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#ab5b66ed9cfa2ea543e90ed13a4320817">cli_reload</a> = { .<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="el" href="../../d0/d5d/dnsmgr_8c.html#abed484dae5cb5531660b1f571985cb6a">handle_cli_reload</a> , .summary = &quot;Reloads the DNS manager configuration&quot; ,}</td></tr>
<tr class="separator:ab5b66ed9cfa2ea543e90ed13a4320817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bfbc88e2118d426be7b9ed59d6cf14f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a2bfbc88e2118d426be7b9ed59d6cf14f">cli_status</a> = { .<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="el" href="../../d0/d5d/dnsmgr_8c.html#a42f51bfd026479da84c974d890c5c673">handle_cli_status</a> , .summary = &quot;Display the DNS manager <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>&quot; ,}</td></tr>
<tr class="separator:a2bfbc88e2118d426be7b9ed59d6cf14f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e6cca0c879c0443efb431c30c14f76"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></td></tr>
<tr class="separator:a03e6cca0c879c0443efb431c30c14f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b65d1ea64589105945cdf1548ca804e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/d52/structentry__list.html">entry_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a9b65d1ea64589105945cdf1548ca804e">entry_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a9b65d1ea64589105945cdf1548ca804e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a809d1040a29742820a4989d585349d5b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d31/structrefresh__info.html">refresh_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a809d1040a29742820a4989d585349d5b">master_refresh_info</a></td></tr>
<tr class="separator:a809d1040a29742820a4989d585349d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09442e9709a069712484f11df9470c53"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a></td></tr>
<tr class="separator:a09442e9709a069712484f11df9470c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c89517bfb41f8528974cfb7e18fa22"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:a46c89517bfb41f8528974cfb7e18fa22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9896125bdd6cb3d2605cbb261b4228ea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a> = -1</td></tr>
<tr class="separator:a9896125bdd6cb3d2605cbb261b4228ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c64083a818c7f079198f34c0ef05aef"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:a8c64083a818c7f079198f34c0ef05aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b448e9abcfc301602a2573a662d3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5d/dnsmgr_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a></td></tr>
<tr class="separator:a361b448e9abcfc301602a2573a662d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Background DNS update manager. </p>
<dl class="section author"><dt>Author</dt><dd>Kevin P. Fleming <a href="#" onclick="location.href='mai'+'lto:'+'kpf'+'le'+'min'+'g@'+'dig'+'iu'+'m.c'+'om'; return false;">kpfle<span style="display: none;">.nosp@m.</span>ming<span style="display: none;">.nosp@m.</span>@digi<span style="display: none;">.nosp@m.</span>um.c<span style="display: none;">.nosp@m.</span>om</a></dd></dl>
<dl class="bug"><dt><b><a class="el" href="../../de/da5/bug.html#_bug000004">Bug:</a></b></dt><dd>There is a minor race condition. In the event that an IP address of a dnsmgr managed host changes, there is the potential for the consumer of that address to access the in_addr data at the same time that the dnsmgr thread is in the middle of updating it to the new address. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4eac7b6f80c0e093ae0517ecc49ae7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eac7b6f80c0e093ae0517ecc49ae7ef">&#9670;&nbsp;</a></span>REFRESH_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REFRESH_DEFAULT&#160;&#160;&#160;300</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00089">89</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00527">527</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00527">527</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="ad43ae5f58db3498b5b1830bd98677117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43ae5f58db3498b5b1830bd98677117">&#9670;&nbsp;</a></span>ast_dnsmgr_changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_changed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check is see if a dnsmgr entry has changed. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if the dnsmgr entry has changed since the last call to this function </td></tr>
    <tr><td class="paramname">zero</td><td>if the dnsmgr entry has not changed since the last call to this function </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00247">247</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00074">ast_dnsmgr_entry::changed</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12136">iax2_do_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keywordtype">int</span> changed;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   changed = entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a> = 0;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keywordflow">return</span> changed;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_af28d4213d4bda49ab19d2451ec6da277"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">ast_dnsmgr_entry::changed</a></div><div class="ttdeci">unsigned int changed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00074">dnsmgr.c:74</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45925bf0069c6da3eb1f17eca54a5035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45925bf0069c6da3eb1f17eca54a5035">&#9670;&nbsp;</a></span>ast_dnsmgr_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a>* ast_dnsmgr_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>where the DNS manager should store the IP address as it refreshes it. </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function does not force an initial lookup of the IP address. So, generally, this should be used when the initial address is already known.</p>
<dl class="section return"><dt>Returns</dt><dd>a DNS manager entry </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.6.1 result changed from struct in_addr to struct sockaddr_in to store port number </dd>
<dd>
1.8.0 result changed from struct ast_sockaddr_in to <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> for IPv6 support </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00131">131</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00106">ast_dnsmgr_get_family()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, 0);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a5bd92dad21a119434e9c286499c817b6"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a></div><div class="ttdeci">struct ast_dnsmgr_entry * ast_dnsmgr_get_family(const char *name, struct ast_sockaddr *result, const char *service, unsigned int family)</div><div class="ttdoc">Allocate a new DNS manager entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00106">dnsmgr.c:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bd92dad21a119434e9c286499c817b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd92dad21a119434e9c286499c817b6">&#9670;&nbsp;</a></span>ast_dnsmgr_get_family()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a>* ast_dnsmgr_get_family </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>where the DNS manager should store the IP address as it refreshes it. </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
    <tr><td class="paramname">family</td><td>Address family to filter DNS addresses.</td></tr>
  </table>
  </dd>
</dl>
<p>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function does not force an initial lookup of the IP address. So, generally, this should be used when the initial address is already known.</p>
<dl class="section return"><dt>Returns</dt><dd>a DNS manager entry </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00106">106</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00072">ast_dnsmgr_entry::family</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00068">ast_dnsmgr_entry::result</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00070">ast_dnsmgr_entry::service</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00131">ast_dnsmgr_get()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordtype">int</span> total_size = <span class="keyword">sizeof</span>(*entry) + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) + (<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a> ? strlen(<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>) + 1 : 0);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordflow">if</span> (!result || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) || !(entry = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, total_size))) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a> = <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   strcpy(entry-&gt;name, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">service</a> = ((<span class="keywordtype">char</span> *) entry) + <span class="keyword">sizeof</span>(*entry) + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      strcpy(entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">service</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">family</a> = <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">family</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>, entry, list);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="keywordflow">return</span> entry;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00066">dnsmgr.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a591674bedc8a4e77337bfc871d6d83be"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">ast_dnsmgr_entry::family</a></div><div class="ttdeci">unsigned int family</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00072">dnsmgr.c:72</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_aaf0b1875e63ce28096a33bd373c4a2d2"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">ast_dnsmgr_entry::result</a></div><div class="ttdeci">struct ast_sockaddr * result</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00068">dnsmgr.c:68</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structentry__list_html"><div class="ttname"><a href="../../d6/d52/structentry__list.html">entry_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00085">dnsmgr.c:85</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a95c05b2a02d1d31907fde00f0051aed2"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">ast_dnsmgr_entry::service</a></div><div class="ttdeci">char * service</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00070">dnsmgr.c:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7299760ea18ab2ff1badadcd8af4dd0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7299760ea18ab2ff1badadcd8af4dd0c">&#9670;&nbsp;</a></span>ast_dnsmgr_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_lookup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **&#160;</td>
          <td class="paramname"><em>dnsmgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and initialize a DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>where to store the IP address as the DNS manager refreshes it. The address family is used as an input parameter to filter the returned addresses. If it is 0, both IPv4 and IPv6 addresses can be returned. </td></tr>
    <tr><td class="paramname">dnsmgr</td><td>Where to store the allocate DNS manager entry </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function <em>does</em> force an initial lookup, so it may block for some period of time.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">non-zero</td><td>failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section version"><dt>Version</dt><dd>1.6.1 result changed from struct in_addr to struct aockaddr_in to store port number </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00191">191</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08541">__iax2_do_register_s()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08782">iax2_append_register()</a>, and <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00632">transport_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, dnsmgr, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a47531bb8c9d97ca8276b74c05bc7aea2"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a></div><div class="ttdeci">static int internal_dnsmgr_lookup(const char *name, struct ast_sockaddr *result, struct ast_dnsmgr_entry **dnsmgr, const char *service, dns_update_func func, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00151">dnsmgr.c:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a537cbd033c88567a4ec2c03df80e6994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a537cbd033c88567a4ec2c03df80e6994">&#9670;&nbsp;</a></span>ast_dnsmgr_lookup_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_lookup_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **&#160;</td>
          <td class="paramname"><em>dnsmgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a>&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate and initialize a DNS manager entry, with update callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the hostname </td></tr>
    <tr><td class="paramname">result</td><td>The addr which is intended to be updated in the update callback when DNS manager calls it on refresh. The address family is used as an input parameter to filter the returned addresses. If it is 0, both IPv4 and IPv6 addresses can be returned. </td></tr>
    <tr><td class="paramname">dnsmgr</td><td>Where to store the allocate DNS manager entry </td></tr>
    <tr><td class="paramname">service</td><td></td></tr>
    <tr><td class="paramname">func</td><td>The update callback function The update callback will be called when DNS manager detects that an IP address has been changed. Instead of updating the addr itself, DNS manager will call this callback function with the old and new addresses. It is the responsibility of the callback to perform any updates </td></tr>
    <tr><td class="paramname">data</td><td>A pointer to data that will be passed through to the callback function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function allocates a new DNS manager entry object, and fills it with the provided hostname and IP address. This function <em>does</em> force an initial lookup, so it may block for some period of time.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">non-zero</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00196">196</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15075">__sip_subscribe_mwi_do()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31631">build_peer()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, dnsmgr, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, func, <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">ast_dnsmgr_entry::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00076">dnsmgr.c:76</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a47531bb8c9d97ca8276b74c05bc7aea2"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a47531bb8c9d97ca8276b74c05bc7aea2">internal_dnsmgr_lookup</a></div><div class="ttdeci">static int internal_dnsmgr_lookup(const char *name, struct ast_sockaddr *result, struct ast_dnsmgr_entry **dnsmgr, const char *service, dns_update_func func, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00151">dnsmgr.c:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add74c87320b8447b69e776931520e994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add74c87320b8447b69e776931520e994">&#9670;&nbsp;</a></span>ast_dnsmgr_refresh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dnsmgr_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force a refresh of a dnsmgr entry. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if the result is different than the previous result </td></tr>
    <tr><td class="paramname">zero</td><td>if the result is the same as the previous result </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00239">239</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr_refresh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12136">iax2_do_register()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15976">sip_reg_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a>(entry, 0);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="dnsmgr_8c_html_afd4006993b0aac1410d7255730bc3a7c"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a></div><div class="ttdeci">static int dnsmgr_refresh(struct ast_dnsmgr_entry *entry, int verbose)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr.c:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0255399a507b71ae563fc2caf94d749c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0255399a507b71ae563fc2caf94d749c">&#9670;&nbsp;</a></span>ast_dnsmgr_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_dnsmgr_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a DNS manager entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>the DNS manager entry to free</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00136">136</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00884">AST_RWLIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32459">__cleanup_registration()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14935">__shutdown_mwi_subscription()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13399">delete_users()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00415">destroy_sip_transport_state()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03232">match_and_cleanup_peer_sched()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12766">peer_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="keywordflow">if</span> (!entry) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>, entry, list);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;removing dns manager for &#39;%s&#39;\n&quot;</span>, entry-&gt;name);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(entry);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6091f0518f8b6f443fd9f5150f3ac407"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6091f0518f8b6f443fd9f5150f3ac407">AST_RWLIST_REMOVE</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00884">linkedlists.h:884</a></div></div>
<div class="ttc" id="structentry__list_html"><div class="ttname"><a href="../../d6/d52/structentry__list.html">entry_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00085">dnsmgr.c:85</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00527">527</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="afd4006993b0aac1410d7255730bc3a7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd4006993b0aac1410d7255730bc3a7c">&#9670;&nbsp;</a></span>dnsmgr_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dnsmgr_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00204">204</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00897">ast_get_ip_or_srv()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00074">ast_dnsmgr_entry::changed</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00076">ast_dnsmgr_entry::data</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00072">ast_dnsmgr_entry::family</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00079">ast_dnsmgr_entry::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00068">ast_dnsmgr_entry::result</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00070">ast_dnsmgr_entry::service</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00078">ast_dnsmgr_entry::update_func</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00239">ast_dnsmgr_refresh()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">refresh_list()</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = { .len = 0, };</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordtype">int</span> changed = 0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;refreshing &#39;%s&#39;\n&quot;</span>, entry-&gt;name);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   tmp.<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family = entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">family</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d59/acl_8h.html#af92139f78c6e53ff418d9289d3a4c4b2">ast_get_ip_or_srv</a>(&amp;tmp, entry-&gt;name, entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">service</a>)) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;tmp)) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;tmp, <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a>));</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;tmp, entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a>)) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *old_addr = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a>));</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *new_addr = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;tmp));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#ae84ee8242b56452683676d29fe637415">update_func</a>) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#ae84ee8242b56452683676d29fe637415">update_func</a>(entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a>, &amp;tmp, entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;dnssrv: host &#39;%s&#39; changed from %s to %s\n&quot;</span>,</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                  entry-&gt;name, old_addr, new_addr);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">result</a>, &amp;tmp);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            changed = entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">changed</a> = 1;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;         }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;entry-&gt;<a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">return</span> changed;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#adf04f66344e3fb0a6f6a69bf39d19902">ast_dnsmgr_entry::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00079">dnsmgr.c:79</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a591674bedc8a4e77337bfc871d6d83be"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">ast_dnsmgr_entry::family</a></div><div class="ttdeci">unsigned int family</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00072">dnsmgr.c:72</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_ae84ee8242b56452683676d29fe637415"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#ae84ee8242b56452683676d29fe637415">ast_dnsmgr_entry::update_func</a></div><div class="ttdeci">dns_update_func update_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00078">dnsmgr.c:78</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_aaf0b1875e63ce28096a33bd373c4a2d2"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#aaf0b1875e63ce28096a33bd373c4a2d2">ast_dnsmgr_entry::result</a></div><div class="ttdeci">struct ast_sockaddr * result</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00068">dnsmgr.c:68</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">ast_dnsmgr_entry::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00076">dnsmgr.c:76</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="acl_8h_html_af92139f78c6e53ff418d9289d3a4c4b2"><div class="ttname"><a href="../../d5/d59/acl_8h.html#af92139f78c6e53ff418d9289d3a4c4b2">ast_get_ip_or_srv</a></div><div class="ttdeci">int ast_get_ip_or_srv(struct ast_sockaddr *addr, const char *hostname, const char *service)</div><div class="ttdoc">Get the IP address given a hostname and optional service. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00897">acl.c:897</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_af28d4213d4bda49ab19d2451ec6da277"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#af28d4213d4bda49ab19d2451ec6da277">ast_dnsmgr_entry::changed</a></div><div class="ttdeci">unsigned int changed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00074">dnsmgr.c:74</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a95c05b2a02d1d31907fde00f0051aed2"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a95c05b2a02d1d31907fde00f0051aed2">ast_dnsmgr_entry::service</a></div><div class="ttdeci">char * service</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00070">dnsmgr.c:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ede7ff922fb2764dfd455e49dc59bc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ede7ff922fb2764dfd455e49dc59bc8">&#9670;&nbsp;</a></span>dnsmgr_start_refresh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dnsmgr_start_refresh </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provided by dnsmgr.c </p>

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00302">302</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00524">ast_sched_add_variable()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">refresh_list()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00063">refresh_sched</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a> &gt; -1) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 100, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a>, &amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a809d1040a29742820a4989d585349d5b">master_refresh_info</a>, 1);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div><div class="ttc" id="dnsmgr_8c_html_a809d1040a29742820a4989d585349d5b"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a809d1040a29742820a4989d585349d5b">master_refresh_info</a></div><div class="ttdeci">static struct refresh_info master_refresh_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00101">dnsmgr.c:101</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="sched_8h_html_adec2ba936e662f6b9353fc0172e9fcec"><div class="ttname"><a href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a></div><div class="ttdeci">int ast_sched_add_variable(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data, int variable) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event with rescheduling support. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00524">sched.c:524</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a9896125bdd6cb3d2605cbb261b4228ea"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a></div><div class="ttdeci">static int refresh_sched</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00063">dnsmgr.c:63</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a7f623757756f349de3f28480aeb8b7a6"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a></div><div class="ttdeci">static int refresh_list(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00272">dnsmgr.c:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acea7f3ec33ca5aef5c8e8c532b313976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acea7f3ec33ca5aef5c8e8c532b313976">&#9670;&nbsp;</a></span>do_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* do_refresh </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00261">261</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      usleep((<a class="code" href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>)*1000));</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div><div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="sched_8h_html_af13fcd6652b8dcafae35c2fa35e80a8d"><div class="ttname"><a href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a></div><div class="ttdeci">int ast_sched_wait(struct ast_sched_context *con) attribute_warn_unused_result</div><div class="ttdoc">Determines number of seconds until the next outstanding event to take place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00431">sched.c:431</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adeaf0f7f80508d4b4bfd37c5cda21b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeaf0f7f80508d4b4bfd37c5cda21b97">&#9670;&nbsp;</a></span>do_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_reload </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loading</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">450</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00324">AST_MODPRI_CORE</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00567">ast_pthread_create_background</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00524">ast_sched_add_variable()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../de/dcc/conf2ael_8c_source.html#l00066">config</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">CONFIG_STATUS_FILEMISSING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00261">do_refresh()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00091">enabled</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00432">load_module()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00089">REFRESH_DEFAULT</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00092">refresh_interval</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">refresh_list()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00087">refresh_lock</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00063">refresh_sched</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00064">refresh_thread</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00445">reload_module()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00410">unload_module()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00302">dnsmgr_start_refresh()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00312">handle_cli_reload()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00432">load_module()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00445">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { loading ? 0 : <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> };</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keywordtype">int</span> interval;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordtype">int</span> was_enabled;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="keywordflow">if</span> ((config = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(<span class="stringliteral">&quot;dnsmgr.conf&quot;</span>, <span class="stringliteral">&quot;dnsmgr&quot;</span>, config_flags)) == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="comment">/* ensure that no refresh cycles run while the reload is in progress */</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="comment">/* reset defaults in preparation for reading config file */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a> = <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a4eac7b6f80c0e093ae0517ecc49ae7ef">REFRESH_DEFAULT</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   was_enabled = <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> = 0;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordflow">if</span> (config == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a> || config == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(config, <span class="stringliteral">&quot;general&quot;</span>); v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;enable&quot;</span>)) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;refreshinterval&quot;</span>)) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;         <span class="keywordflow">if</span> (sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;interval) &lt; 1) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to convert &#39;%s&#39; to a numeric value.\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interval &lt; 0) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid refresh interval &#39;%d&#39; specified, using default\n&quot;</span>, interval);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a> = interval;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;         }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(config);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> &amp;&amp; <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a>) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Managed DNS entries will be refreshed every %d seconds.\n&quot;</span>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="comment">/* if this reload enabled the manager, create the background thread</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">      if it does not exist */</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">if</span> (!was_enabled &amp;&amp; (<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>)) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#acea7f3ec33ca5aef5c8e8c532b313976">do_refresh</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &lt; 0) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to start refresh thread.\n&quot;</span>);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">/* make a background refresh happen right away */</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 100, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a>, &amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a809d1040a29742820a4989d585349d5b">master_refresh_info</a>, 1);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="comment">/* if this reload disabled the manager and there is a background thread, kill it */</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> &amp;&amp; was_enabled &amp;&amp; (<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>)) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">/* wake up the thread so it will exit */</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      pthread_cancel(<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      pthread_kill(<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>, SIGURG);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      pthread_join(<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a809d1040a29742820a4989d585349d5b"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a809d1040a29742820a4989d585349d5b">master_refresh_info</a></div><div class="ttdeci">static struct refresh_info master_refresh_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00101">dnsmgr.c:101</a></div></div>
<div class="ttc" id="conf2ael_8c_html_a74bb62276efdf39dd94048e007fca05b"><div class="ttname"><a href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a></div><div class="ttdeci">char * config</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conf2ael_8c_source.html#l00066">conf2ael.c:66</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a09442e9709a069712484f11df9470c53"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a></div><div class="ttdeci">static int refresh_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00092">dnsmgr.c:92</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="sched_8h_html_adec2ba936e662f6b9353fc0172e9fcec"><div class="ttname"><a href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a></div><div class="ttdeci">int ast_sched_add_variable(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data, int variable) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event with rescheduling support. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00524">sched.c:524</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a4eac7b6f80c0e093ae0517ecc49ae7ef"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a4eac7b6f80c0e093ae0517ecc49ae7ef">REFRESH_DEFAULT</a></div><div class="ttdeci">#define REFRESH_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00089">dnsmgr.c:89</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a8c64083a818c7f079198f34c0ef05aef"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a></div><div class="ttdeci">static pthread_t refresh_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00064">dnsmgr.c:64</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a9896125bdd6cb3d2605cbb261b4228ea"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a9896125bdd6cb3d2605cbb261b4228ea">refresh_sched</a></div><div class="ttdeci">static int refresh_sched</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00063">dnsmgr.c:63</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a46c89517bfb41f8528974cfb7e18fa22"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a></div><div class="ttdeci">static ast_mutex_t refresh_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00087">dnsmgr.c:87</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a7f623757756f349de3f28480aeb8b7a6"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a></div><div class="ttdeci">static int refresh_list(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00272">dnsmgr.c:272</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39bacaabcacf47583204c7634e64a2a0"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEMISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">include/asterisk/config.h:58</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_acea7f3ec33ca5aef5c8e8c532b313976"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#acea7f3ec33ca5aef5c8e8c532b313976">do_refresh</a></div><div class="ttdeci">static void * do_refresh(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00261">dnsmgr.c:261</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00091">dnsmgr.c:91</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4a10fc6c4154180877b09818f5f9b76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a10fc6c4154180877b09818f5f9b76">&#9670;&nbsp;</a></span>handle_cli_refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00332">332</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00091">enabled</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00095">refresh_info::entries</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c.html#a9b65d1ea64589105945cdf1548ca804e">entry_list</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00098">refresh_info::filter</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">refresh_list()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00097">refresh_info::regex_present</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d31/structrefresh__info.html">refresh_info</a> <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a> = {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      .entries = &amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9b65d1ea64589105945cdf1548ca804e">entry_list</a>,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      .verbose = 1,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   };</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dnsmgr refresh&quot;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         <span class="stringliteral">&quot;Usage: dnsmgr refresh [pattern]\n&quot;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         <span class="stringliteral">&quot;       Peforms an immediate refresh of the managed DNS entries.\n&quot;</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;         <span class="stringliteral">&quot;       Optional regular expression pattern is used to filter the entries to refresh.\n&quot;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DNS Manager is disabled.\n&quot;</span>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">if</span> (regcomp(&amp;info.<a class="code" href="../../d9/d31/structrefresh__info.html#a1ef66e7ee3c98b5d3c96c566c17f6d22">filter</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], REG_EXTENDED | REG_NOSUB)) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;         info.<a class="code" href="../../d9/d31/structrefresh__info.html#ad3eff95758537fb81e9e8b874b249516">regex_present</a> = 1;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a>(&amp;info);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keywordflow">if</span> (info.<a class="code" href="../../d9/d31/structrefresh__info.html#ad3eff95758537fb81e9e8b874b249516">regex_present</a>) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      regfree(&amp;info.<a class="code" href="../../d9/d31/structrefresh__info.html#a1ef66e7ee3c98b5d3c96c566c17f6d22">filter</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="ttc" id="structrefresh__info_html_a1ef66e7ee3c98b5d3c96c566c17f6d22"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html#a1ef66e7ee3c98b5d3c96c566c17f6d22">refresh_info::filter</a></div><div class="ttdeci">regex_t filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00098">dnsmgr.c:98</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structrefresh__info_html_ad3eff95758537fb81e9e8b874b249516"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html#ad3eff95758537fb81e9e8b874b249516">refresh_info::regex_present</a></div><div class="ttdeci">unsigned int regex_present</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00097">dnsmgr.c:97</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a7f623757756f349de3f28480aeb8b7a6"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a7f623757756f349de3f28480aeb8b7a6">refresh_list</a></div><div class="ttdeci">static int refresh_list(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00272">dnsmgr.c:272</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structrefresh__info_html"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html">refresh_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00094">dnsmgr.c:94</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a9b65d1ea64589105945cdf1548ca804e"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a9b65d1ea64589105945cdf1548ca804e">entry_list</a></div><div class="ttdeci">static struct entry_list entry_list</div></div>
<div class="ttc" id="dnsmgr_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00091">dnsmgr.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abed484dae5cb5531660b1f571985cb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed484dae5cb5531660b1f571985cb6a">&#9670;&nbsp;</a></span>handle_cli_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_reload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00312">312</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dnsmgr reload&quot;</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         <span class="stringliteral">&quot;Usage: dnsmgr reload\n&quot;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;         <span class="stringliteral">&quot;       Reloads the DNS manager configuration.\n&quot;</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 2) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <a class="code" href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a>(0);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_adeaf0f7f80508d4b4bfd37c5cda21b97"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a></div><div class="ttdeci">static int do_reload(int loading)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00450">dnsmgr.c:450</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42f51bfd026479da84c974d890c5c673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42f51bfd026479da84c974d890c5c673">&#9670;&nbsp;</a></span>handle_cli_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00376">376</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00091">enabled</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00092">refresh_interval</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dnsmgr status&quot;</span>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         <span class="stringliteral">&quot;Usage: dnsmgr status\n&quot;</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;         <span class="stringliteral">&quot;       Displays the DNS manager status.\n&quot;</span>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 2) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DNS Manager: %s\n&quot;</span>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> ? <span class="stringliteral">&quot;enabled&quot;</span> : <span class="stringliteral">&quot;disabled&quot;</span>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Refresh Interval: %d seconds\n&quot;</span>, <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>, entry, list)</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      count++;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d6/d52/structentry__list.html">entry_list</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of entries: %d\n&quot;</span>, count);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="ttc" id="dnsmgr_8c_html_a09442e9709a069712484f11df9470c53"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a></div><div class="ttdeci">static int refresh_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00092">dnsmgr.c:92</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00066">dnsmgr.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structentry__list_html"><div class="ttname"><a href="../../d6/d52/structentry__list.html">entry_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00085">dnsmgr.c:85</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00091">dnsmgr.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47531bb8c9d97ca8276b74c05bc7aea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47531bb8c9d97ca8276b74c05bc7aea2">&#9670;&nbsp;</a></span>internal_dnsmgr_lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int internal_dnsmgr_lookup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **&#160;</td>
          <td class="paramname"><em>dnsmgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dc4/dnsmgr_8h.html#a775690d2158634eba50a0825beb33511">dns_update_func</a>&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">151</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00106">ast_dnsmgr_get_family()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00897">ast_get_ip_or_srv()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00076">ast_dnsmgr_entry::data</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00091">enabled</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00072">ast_dnsmgr_entry::family</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00191">ast_dnsmgr_lookup()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00196">ast_dnsmgr_lookup_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">family</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) || !result || !dnsmgr) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">if</span> (*dnsmgr &amp;&amp; !strcasecmp((*dnsmgr)-&gt;name, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="comment">/* Lookup address family filter. */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   family = result-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">    * If it&#39;s actually an IP address and not a name, there&#39;s no</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">    * need for a managed lookup.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(result, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>)) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;doing dnsmgr_lookup for &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="comment">/* do a lookup now but add a manager so it will automagically get updated in the background */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <a class="code" href="../../d5/d59/acl_8h.html#af92139f78c6e53ff418d9289d3a4c4b2">ast_get_ip_or_srv</a>(result, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="comment">/* if dnsmgr is not enable don&#39;t bother adding an entry */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;adding dns manager for &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   *dnsmgr = <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, result, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a>, family);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   (*dnsmgr)-&gt;update_func = func;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   (*dnsmgr)-&gt;data = <a class="code" href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">return</span> !*dnsmgr;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a495cc24c1947d49a2b6de488a45c9d72"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a495cc24c1947d49a2b6de488a45c9d72">service</a></div><div class="ttdeci">enum ast_cc_service_type service</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00949">chan_sip.c:949</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a591674bedc8a4e77337bfc871d6d83be"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a591674bedc8a4e77337bfc871d6d83be">ast_dnsmgr_entry::family</a></div><div class="ttdeci">unsigned int family</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00072">dnsmgr.c:72</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html#a735984d41155bc1032e09bece8f8d66d">ast_dnsmgr_entry::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00076">dnsmgr.c:76</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="acl_8h_html_af92139f78c6e53ff418d9289d3a4c4b2"><div class="ttname"><a href="../../d5/d59/acl_8h.html#af92139f78c6e53ff418d9289d3a4c4b2">ast_get_ip_or_srv</a></div><div class="ttdeci">int ast_get_ip_or_srv(struct ast_sockaddr *addr, const char *hostname, const char *service)</div><div class="ttdoc">Get the IP address given a hostname and optional service. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00897">acl.c:897</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a5bd92dad21a119434e9c286499c817b6"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a5bd92dad21a119434e9c286499c817b6">ast_dnsmgr_get_family</a></div><div class="ttdeci">struct ast_dnsmgr_entry * ast_dnsmgr_get_family(const char *name, struct ast_sockaddr *result, const char *service, unsigned int family)</div><div class="ttdoc">Allocate a new DNS manager entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00106">dnsmgr.c:106</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00091">dnsmgr.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00432">432</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00256">ast_cli_register</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00102">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>())) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create schedule context.\n&quot;</span>);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a38900310ddfb39aa5b4689ec66c616ee">ast_cli_register</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#ab5b66ed9cfa2ea543e90ed13a4320817">cli_reload</a>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a38900310ddfb39aa5b4689ec66c616ee">ast_cli_register</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a2bfbc88e2118d426be7b9ed59d6cf14f">cli_status</a>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a38900310ddfb39aa5b4689ec66c616ee">ast_cli_register</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#aa331d52ef44f75eebbe4068a001099ba">cli_refresh</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a>(1) ? <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a> : <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_ab5b66ed9cfa2ea543e90ed13a4320817"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#ab5b66ed9cfa2ea543e90ed13a4320817">cli_reload</a></div><div class="ttdeci">static struct ast_cli_entry cli_reload</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00406">dnsmgr.c:406</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_aa331d52ef44f75eebbe4068a001099ba"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#aa331d52ef44f75eebbe4068a001099ba">cli_refresh</a></div><div class="ttdeci">static struct ast_cli_entry cli_refresh</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00407">dnsmgr.c:407</a></div></div>
<div class="ttc" id="cli_8h_html_a38900310ddfb39aa5b4689ec66c616ee"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a38900310ddfb39aa5b4689ec66c616ee">ast_cli_register</a></div><div class="ttdeci">#define ast_cli_register(e)</div><div class="ttdoc">Registers a command or an array of commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00256">cli.h:256</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_adeaf0f7f80508d4b4bfd37c5cda21b97"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a></div><div class="ttdeci">static int do_reload(int loading)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00450">dnsmgr.c:450</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a2bfbc88e2118d426be7b9ed59d6cf14f"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a2bfbc88e2118d426be7b9ed59d6cf14f">cli_status</a></div><div class="ttdeci">static struct ast_cli_entry cli_status</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00408">dnsmgr.c:408</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a></div><div class="ttdoc">Module could not be loaded properly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00102">module.h:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f623757756f349de3f28480aeb8b7a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f623757756f349de3f28480aeb8b7a6">&#9670;&nbsp;</a></span>refresh_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int refresh_list </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">272</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00189">ast_mutex_trylock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr_refresh()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00095">refresh_info::entries</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00098">refresh_info::filter</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00092">refresh_interval</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00087">refresh_lock</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00097">refresh_info::regex_present</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00096">refresh_info::verbose</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00302">dnsmgr_start_refresh()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00332">handle_cli_refresh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;{</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d31/structrefresh__info.html">refresh_info</a> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a> = (<span class="keyword">struct </span><a class="code" href="../../d9/d31/structrefresh__info.html">refresh_info</a> *)data;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="comment">/* if a refresh or reload is already in progress, exit now */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>)) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;DNS Manager refresh already in progress.\n&quot;</span>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(6, <span class="stringliteral">&quot;Refreshing DNS lookups.\n&quot;</span>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#aa809bd76ac6f10f49321dd9600723b53">entries</a>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#aa809bd76ac6f10f49321dd9600723b53">entries</a>, entry, list) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">if</span> (info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#ad3eff95758537fb81e9e8b874b249516">regex_present</a> &amp;&amp; regexec(&amp;info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#a1ef66e7ee3c98b5d3c96c566c17f6d22">filter</a>, entry-&gt;name, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <a class="code" href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a>(entry, info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(info-&gt;<a class="code" href="../../d9/d31/structrefresh__info.html#aa809bd76ac6f10f49321dd9600723b53">entries</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="comment">/* automatically reschedule based on the interval */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a> * 1000;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="ttc" id="structrefresh__info_html_a1ef66e7ee3c98b5d3c96c566c17f6d22"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html#a1ef66e7ee3c98b5d3c96c566c17f6d22">refresh_info::filter</a></div><div class="ttdeci">regex_t filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00098">dnsmgr.c:98</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a09442e9709a069712484f11df9470c53"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a09442e9709a069712484f11df9470c53">refresh_interval</a></div><div class="ttdeci">static int refresh_interval</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00092">dnsmgr.c:92</a></div></div>
<div class="ttc" id="structrefresh__info_html_aa809bd76ac6f10f49321dd9600723b53"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html#aa809bd76ac6f10f49321dd9600723b53">refresh_info::entries</a></div><div class="ttdeci">struct entry_list * entries</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00095">dnsmgr.c:95</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__dnsmgr__entry_html"><div class="ttname"><a href="../../df/d9f/structast__dnsmgr__entry.html">ast_dnsmgr_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00066">dnsmgr.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a987fc536e8b6a1044689eca873610792"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock</a></div><div class="ttdeci">#define ast_mutex_trylock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00189">lock.h:189</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a46c89517bfb41f8528974cfb7e18fa22"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a></div><div class="ttdeci">static ast_mutex_t refresh_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00087">dnsmgr.c:87</a></div></div>
<div class="ttc" id="structrefresh__info_html_ad3eff95758537fb81e9e8b874b249516"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html#ad3eff95758537fb81e9e8b874b249516">refresh_info::regex_present</a></div><div class="ttdeci">unsigned int regex_present</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00097">dnsmgr.c:97</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_afd4006993b0aac1410d7255730bc3a7c"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#afd4006993b0aac1410d7255730bc3a7c">dnsmgr_refresh</a></div><div class="ttdeci">static int dnsmgr_refresh(struct ast_dnsmgr_entry *entry, int verbose)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr.c:204</a></div></div>
<div class="ttc" id="structrefresh__info_html_a0b2caeb4b6f130be43e5a2f0267dd453"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html#a0b2caeb4b6f130be43e5a2f0267dd453">refresh_info::verbose</a></div><div class="ttdeci">int verbose</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00096">dnsmgr.c:96</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structrefresh__info_html"><div class="ttname"><a href="../../d9/d31/structrefresh__info.html">refresh_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00094">dnsmgr.c:94</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00445">445</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;{</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a>(0);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div><div class="ttc" id="dnsmgr_8c_html_adeaf0f7f80508d4b4bfd37c5cda21b97"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#adeaf0f7f80508d4b4bfd37c5cda21b97">do_reload</a></div><div class="ttdeci">static int do_reload(int loading)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00450">dnsmgr.c:450</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00410">410</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02397">ast_cli_unregister()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00087">refresh_lock</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00064">refresh_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a3189e6720486808603d13f5d2b58daf4">ast_cli_unregister</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#ab5b66ed9cfa2ea543e90ed13a4320817">cli_reload</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a3189e6720486808603d13f5d2b58daf4">ast_cli_unregister</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a2bfbc88e2118d426be7b9ed59d6cf14f">cli_status</a>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a3189e6720486808603d13f5d2b58daf4">ast_cli_unregister</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#aa331d52ef44f75eebbe4068a001099ba">cli_refresh</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="comment">/* Destroy refresh thread. */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">/* wake up the thread so it will exit */</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      pthread_cancel(<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      pthread_kill(<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>, SIGURG);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      pthread_join(<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <a class="code" href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="ttc" id="cli_8h_html_a3189e6720486808603d13f5d2b58daf4"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a3189e6720486808603d13f5d2b58daf4">ast_cli_unregister</a></div><div class="ttdeci">int ast_cli_unregister(struct ast_cli_entry *e)</div><div class="ttdoc">Unregisters a command or an array of commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02397">main/cli.c:2397</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_ab5b66ed9cfa2ea543e90ed13a4320817"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#ab5b66ed9cfa2ea543e90ed13a4320817">cli_reload</a></div><div class="ttdeci">static struct ast_cli_entry cli_reload</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00406">dnsmgr.c:406</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a8c64083a818c7f079198f34c0ef05aef"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a8c64083a818c7f079198f34c0ef05aef">refresh_thread</a></div><div class="ttdeci">static pthread_t refresh_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00064">dnsmgr.c:64</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_aa331d52ef44f75eebbe4068a001099ba"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#aa331d52ef44f75eebbe4068a001099ba">cli_refresh</a></div><div class="ttdeci">static struct ast_cli_entry cli_refresh</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00407">dnsmgr.c:407</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a2bfbc88e2118d426be7b9ed59d6cf14f"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a2bfbc88e2118d426be7b9ed59d6cf14f">cli_status</a></div><div class="ttdeci">static struct ast_cli_entry cli_status</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00408">dnsmgr.c:408</a></div></div>
<div class="ttc" id="dnsmgr_8c_html_a46c89517bfb41f8528974cfb7e18fa22"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a46c89517bfb41f8528974cfb7e18fa22">refresh_lock</a></div><div class="ttdeci">static ast_mutex_t refresh_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d5d/dnsmgr_8c_source.html#l00087">dnsmgr.c:87</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;DNS Manager&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00527">527</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00527">527</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="aa331d52ef44f75eebbe4068a001099ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa331d52ef44f75eebbe4068a001099ba">&#9670;&nbsp;</a></span>cli_refresh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_refresh = { .<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="el" href="../../d0/d5d/dnsmgr_8c.html#af4a10fc6c4154180877b09818f5f9b76">handle_cli_refresh</a> , .summary = &quot;Performs an <a class="el" href="../../d0/dd6/chan__mgcp_8c.html#ad380fd38219b013f5a77dfd26147ddfa">immediate</a> <a class="el" href="../../db/dd3/res__stun__monitor_8c.html#abe8cd601789a09864cb8e795bdbf5b6b">refresh</a>&quot; ,}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00407">407</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="ab5b66ed9cfa2ea543e90ed13a4320817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5b66ed9cfa2ea543e90ed13a4320817">&#9670;&nbsp;</a></span>cli_reload</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_reload = { .<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="el" href="../../d0/d5d/dnsmgr_8c.html#abed484dae5cb5531660b1f571985cb6a">handle_cli_reload</a> , .summary = &quot;Reloads the DNS manager configuration&quot; ,}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00406">406</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="a2bfbc88e2118d426be7b9ed59d6cf14f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bfbc88e2118d426be7b9ed59d6cf14f">&#9670;&nbsp;</a></span>cli_status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_status = { .<a class="el" href="../../da/d03/test__ari_8c.html#a695cc202c7a2869aa8202bb20726ea3c">handler</a> = <a class="el" href="../../d0/d5d/dnsmgr_8c.html#a42f51bfd026479da84c974d890c5c673">handle_cli_status</a> , .summary = &quot;Display the DNS manager <a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>&quot; ,}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00408">408</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="a03e6cca0c879c0443efb431c30c14f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e6cca0c879c0443efb431c30c14f76">&#9670;&nbsp;</a></span>enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00091">91</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../dc/dec/res_2ari_2config_8c_source.html#l00337">ast_ari_config_init()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l00343">ast_cel_check_enabled()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06272">ast_context_set_autohints()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00332">handle_cli_refresh()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00376">handle_cli_status()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00945">load_module()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00564">load_odbc_config()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l01171">osp_check_destination()</a>, and <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00607">process_config()</a>.</p>

</div>
</div>
<a id="a9b65d1ea64589105945cdf1548ca804e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b65d1ea64589105945cdf1548ca804e">&#9670;&nbsp;</a></span>entry_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/d52/structentry__list.html">entry_list</a>   <a class="el" href="../../d6/d52/structentry__list.html">entry_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00332">handle_cli_refresh()</a>.</p>

</div>
</div>
<a id="a809d1040a29742820a4989d585349d5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a809d1040a29742820a4989d585349d5b">&#9670;&nbsp;</a></span>master_refresh_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d31/structrefresh__info.html">refresh_info</a> master_refresh_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .entries = &amp;<a class="code" href="../../d0/d5d/dnsmgr_8c.html#a9b65d1ea64589105945cdf1548ca804e">entry_list</a>,</div><div class="line">   .verbose = 0,</div><div class="line">}</div><div class="ttc" id="dnsmgr_8c_html_a9b65d1ea64589105945cdf1548ca804e"><div class="ttname"><a href="../../d0/d5d/dnsmgr_8c.html#a9b65d1ea64589105945cdf1548ca804e">entry_list</a></div><div class="ttdeci">static struct entry_list entry_list</div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00101">101</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
<a id="a09442e9709a069712484f11df9470c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09442e9709a069712484f11df9470c53">&#9670;&nbsp;</a></span>refresh_interval</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int refresh_interval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00092">92</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00376">handle_cli_status()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">refresh_list()</a>.</p>

</div>
</div>
<a id="a46c89517bfb41f8528974cfb7e18fa22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c89517bfb41f8528974cfb7e18fa22">&#9670;&nbsp;</a></span>refresh_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> refresh_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00087">87</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00272">refresh_list()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00410">unload_module()</a>.</p>

</div>
</div>
<a id="a9896125bdd6cb3d2605cbb261b4228ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9896125bdd6cb3d2605cbb261b4228ea">&#9670;&nbsp;</a></span>refresh_sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int refresh_sched = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00063">63</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00302">dnsmgr_start_refresh()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>.</p>

</div>
</div>
<a id="a8c64083a818c7f079198f34c0ef05aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c64083a818c7f079198f34c0ef05aef">&#9670;&nbsp;</a></span>refresh_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t refresh_thread = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00064">64</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, and <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00410">unload_module()</a>.</p>

</div>
</div>
<a id="a361b448e9abcfc301602a2573a662d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361b448e9abcfc301602a2573a662d3c">&#9670;&nbsp;</a></span>sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a>* <a class="el" href="../../d0/da0/structsched.html">sched</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00062">62</a> of file <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html">dnsmgr.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:48 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
