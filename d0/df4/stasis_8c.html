<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: stasis.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">stasis.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Stasis Message Bus API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d90/stasis__internal_8h_source.html">asterisk/stasis_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d40/threadpool_8h_source.html">asterisk/threadpool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d1d/uuid_8h_source.html">asterisk/uuid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d68/vector_8h_source.html">asterisk/vector.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html">asterisk/stasis_bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d44/stasis__endpoints_8h_source.html">asterisk/stasis_endpoints.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dfe/config__options_8h_source.html">asterisk/config_options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stasis.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d6c/stasis_8c__incl.png" border="0" usemap="#stasis_8c" alt=""/></div>
<map name="stasis_8c" id="stasis_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="43,543,127,569"/>
<area shape="rect" id="node21" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1157,543,1291,569"/>
<area shape="rect" id="node27" href="../../de/d90/stasis__internal_8h.html" title="Internal Stasis APIs. " alt="" coords="63,80,243,107"/>
<area shape="rect" id="node28" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="216,319,341,345"/>
<area shape="rect" id="node31" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1395,393,1509,420"/>
<area shape="rect" id="node33" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="542,543,669,569"/>
<area shape="rect" id="node36" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="1685,80,1862,107"/>
<area shape="rect" id="node37" href="../../d3/d40/threadpool_8h.html" title="asterisk/threadpool.h" alt="" coords="1887,80,2044,107"/>
<area shape="rect" id="node38" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="1111,237,1225,263"/>
<area shape="rect" id="node39" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="429,155,619,181"/>
<area shape="rect" id="node43" href="../../dc/d4e/stasis__bridges_8h.html" title="asterisk/stasis_bridges.h" alt="" coords="880,80,1059,107"/>
<area shape="rect" id="node46" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="160,155,355,181"/>
<area shape="rect" id="node48" href="../../db/dfe/config__options_8h.html" title="Configuration option&#45;handling. " alt="" coords="1361,237,1541,263"/>
<area shape="rect" id="node50" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1059,393,1160,420"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="296,841,451,868"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1174,617,1311,644"/>
<area shape="rect" id="node20" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="71,617,206,644"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="300,916,447,943"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="398,767,541,793"/>
<area shape="rect" id="node22" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="333,692,446,719"/>
<area shape="rect" id="node24" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="813,841,960,868"/>
<area shape="rect" id="node26" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="897,617,1047,644"/>
<area shape="rect" id="node23" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="855,767,918,793"/>
<area shape="rect" id="node25" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1338,767,1465,793"/>
<area shape="rect" id="node29" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="384,393,499,420"/>
<area shape="rect" id="node30" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="149,468,294,495"/>
<area shape="rect" id="node35" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="235,393,359,420"/>
<area shape="rect" id="node32" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="527,468,684,495"/>
<area shape="rect" id="node34" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1387,468,1517,495"/>
<area shape="rect" id="node40" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="845,237,984,263"/>
<area shape="rect" id="node41" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1387,319,1514,345"/>
<area shape="rect" id="node42" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="366,319,517,345"/>
<area shape="rect" id="node44" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1083,155,1211,181"/>
<area shape="rect" id="node45" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="745,155,855,181"/>
<area shape="rect" id="node47" href="../../d3/d8f/stasis__cache__pattern_8h.html" title="Caching pattern for Stasis Message Bus API topics. " alt="" coords="145,229,303,271"/>
</map>
</div>
</div>
<p><a href="../../d0/df4/stasis_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A multi object blob data structure to carry user event stasis messages.  <a href="../../d4/d38/structast__multi__object__blob.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d0e/structstasis__config.html">stasis_config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5b/structstasis__declined__config.html">stasis_declined_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to hold global configuration-related options.  <a href="../../de/d5b/structstasis__declined__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forwarding information.  <a href="../../d8/d54/structstasis__forward.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d30/structstasis__threadpool__conf.html">stasis_threadpool_conf</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threadpool configuration options.  <a href="../../df/d30/structstasis__threadpool__conf.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc8/structsync__task__data.html">sync_task_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>&#160;&#160;&#160;&quot;%-64s %-64s\n&quot;</td></tr>
<tr class="separator:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>&#160;&#160;&#160;&quot;%-64s %10d %10d %16ld %16ld\n&quot;</td></tr>
<tr class="separator:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>&#160;&#160;&#160;&quot;%-64s %10d %10d %10d %16ld %16ld\n&quot;</td></tr>
<tr class="separator:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>&#160;&#160;&#160;&quot;%-64s %10d %10d\n&quot;</td></tr>
<tr class="separator:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d858a4e8d8ee02eee5b943d65814a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a>&#160;&#160;&#160;&quot;%-64s %10d %10d\n&quot;</td></tr>
<tr class="separator:ad1d858a4e8d8ee02eee5b943d65814a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d858a4e8d8ee02eee5b943d65814a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a>&#160;&#160;&#160;&quot;%-64s %10s %10d %10d\n&quot;</td></tr>
<tr class="separator:ad1d858a4e8d8ee02eee5b943d65814a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>&#160;&#160;&#160;&quot;%-64s %-64s\n&quot;</td></tr>
<tr class="separator:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>&#160;&#160;&#160;&quot;%-64s %10s %10s %16s %16s\n&quot;</td></tr>
<tr class="separator:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>&#160;&#160;&#160;&quot;%-64s %10s %10s %10s %16s %16s\n&quot;</td></tr>
<tr class="separator:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>&#160;&#160;&#160;&quot;%-64s %10s %10s\n&quot;</td></tr>
<tr class="separator:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7335532b05804a34da6dead8e50a9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1a7335532b05804a34da6dead8e50a9d">INITIAL_SUBSCRIBERS_MAX</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a1a7335532b05804a34da6dead8e50a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92f09fdb7bda5eeca4fa0e1b4c9046c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a92f09fdb7bda5eeca4fa0e1b4c9046c0">SUBSCRIPTION_STATISTICS_BUCKETS</a>&#160;&#160;&#160;57</td></tr>
<tr class="separator:a92f09fdb7bda5eeca4fa0e1b4c9046c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25c73f0280eb52884585e91c8d18d70"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#af25c73f0280eb52884585e91c8d18d70">TOPIC_ALL_BUCKETS</a>&#160;&#160;&#160;997</td></tr>
<tr class="separator:af25c73f0280eb52884585e91c8d18d70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11ee3d32be3f0cc558f1ef40cd9a45b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ae11ee3d32be3f0cc558f1ef40cd9a45b">topic_lock_both</a>(topic1,  topic2)</td></tr>
<tr class="memdesc:ae11ee3d32be3f0cc558f1ef40cd9a45b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock two topics.  <a href="#ae11ee3d32be3f0cc558f1ef40cd9a45b">More...</a><br /></td></tr>
<tr class="separator:ae11ee3d32be3f0cc558f1ef40cd9a45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551da25f7ccf7648107004ad73424064"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a551da25f7ccf7648107004ad73424064">TOPIC_POOL_BUCKETS</a>&#160;&#160;&#160;57</td></tr>
<tr class="separator:a551da25f7ccf7648107004ad73424064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a348a7ad6b881b6b0b401da2d8546ccc4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a348a7ad6b881b6b0b401da2d8546ccc4">TOPIC_STATISTICS_BUCKETS</a>&#160;&#160;&#160;57</td></tr>
<tr class="separator:a348a7ad6b881b6b0b401da2d8546ccc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a23dcf25efe633f0f429a1520f066249f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a23dcf25efe633f0f429a1520f066249f">__stasis_subscribe</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, <a class="el" href="../../dd/d79/stasis_8h.html#a2b7854b4fb538be6f885943a24d60c8f">stasis_subscription_cb</a> callback, void *data, const char *file, int lineno, const char *func)</td></tr>
<tr class="memdesc:a23dcf25efe633f0f429a1520f066249f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a subscription.  <a href="#a23dcf25efe633f0f429a1520f066249f">More...</a><br /></td></tr>
<tr class="separator:a23dcf25efe633f0f429a1520f066249f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7cbb6df580f2e3cba59eed0400fee4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6b7cbb6df580f2e3cba59eed0400fee4">__stasis_subscribe_pool</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, <a class="el" href="../../dd/d79/stasis_8h.html#a2b7854b4fb538be6f885943a24d60c8f">stasis_subscription_cb</a> callback, void *data, const char *file, int lineno, const char *func)</td></tr>
<tr class="memdesc:a6b7cbb6df580f2e3cba59eed0400fee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a subscription whose callbacks occur on a thread pool.  <a href="#a6b7cbb6df580f2e3cba59eed0400fee4">More...</a><br /></td></tr>
<tr class="separator:a6b7cbb6df580f2e3cba59eed0400fee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20128e1cc8295228725c00a615fc3eca"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a20128e1cc8295228725c00a615fc3eca">AO2_GLOBAL_OBJ_STATIC</a> (topic_statistics)</td></tr>
<tr class="separator:a20128e1cc8295228725c00a615fc3eca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff1d27adaeaaa70f6975fa314f767df"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a7ff1d27adaeaaa70f6975fa314f767df">AO2_GLOBAL_OBJ_STATIC</a> (subscription_statistics)</td></tr>
<tr class="separator:a7ff1d27adaeaaa70f6975fa314f767df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8f4ce31d30e5a3e2c3894e6224f952"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6b8f4ce31d30e5a3e2c3894e6224f952">AO2_GLOBAL_OBJ_STATIC</a> (<a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>)</td></tr>
<tr class="memdesc:a6b8f4ce31d30e5a3e2c3894e6224f952"><td class="mdescLeft">&#160;</td><td class="mdescRight">A global object container that will contain the <a class="el" href="../../d2/d0e/structstasis__config.html">stasis_config</a> that gets swapped out on reloads.  <a href="#a6b8f4ce31d30e5a3e2c3894e6224f952">More...</a><br /></td></tr>
<tr class="separator:a6b8f4ce31d30e5a3e2c3894e6224f952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6b4b2a1eb260f1ae9b1e018918798c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aba6b4b2a1eb260f1ae9b1e018918798c">AO2_STRING_FIELD_CASE_SORT_FN</a> (<a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:aba6b4b2a1eb260f1ae9b1e018918798c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad668d6eee32e76a671a16e81c37bf3e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ad668d6eee32e76a671a16e81c37bf3e0">AO2_STRING_FIELD_CMP_FN</a> (<a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ad668d6eee32e76a671a16e81c37bf3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a313ae93cf30a6ea50b6740fc6cfe9123"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a313ae93cf30a6ea50b6740fc6cfe9123">AO2_STRING_FIELD_HASH_FN</a> (<a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a313ae93cf30a6ea50b6740fc6cfe9123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1ea12381514da43d4826808a21efc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aec1ea12381514da43d4826808a21efc1">AO2_STRING_FIELD_SORT_FN</a> (<a class="el" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a>, uniqueid)</td></tr>
<tr class="separator:aec1ea12381514da43d4826808a21efc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf5e62abd0e9f1a688b1544e84a4e2c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#acf5e62abd0e9f1a688b1544e84a4e2c5">AO2_STRING_FIELD_SORT_FN</a> (stasis_topic_statistics, <a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:acf5e62abd0e9f1a688b1544e84a4e2c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f5721e90c221f9808fcedaf013ae56e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga3f5721e90c221f9808fcedaf013ae56e">ast_multi_object_blob_add</a> (struct <a class="el" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a> *multi, enum <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga4cf6fe670f1f46e8db561d407b694d4d">stasis_user_multi_object_snapshot_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *object)</td></tr>
<tr class="memdesc:ga3f5721e90c221f9808fcedaf013ae56e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an object (snapshot) to the blob.  <a href="../../df/deb/group__StasisTopicsAndMessages.html#ga3f5721e90c221f9808fcedaf013ae56e">More...</a><br /></td></tr>
<tr class="separator:ga3f5721e90c221f9808fcedaf013ae56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0679202aea3da62adf0dff0e09a4e07a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga0679202aea3da62adf0dff0e09a4e07a">ast_multi_object_blob_create</a> (struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</td></tr>
<tr class="memdesc:ga0679202aea3da62adf0dff0e09a4e07a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stasis user event multi object blob.  <a href="../../df/deb/group__StasisTopicsAndMessages.html#ga0679202aea3da62adf0dff0e09a4e07a">More...</a><br /></td></tr>
<tr class="separator:ga0679202aea3da62adf0dff0e09a4e07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fd487c2186f10859ec2619cf26b0907"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fd487c2186f10859ec2619cf26b0907">ast_multi_object_blob_single_channel_publish</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *blob)</td></tr>
<tr class="memdesc:ga8fd487c2186f10859ec2619cf26b0907"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish single channel user event (for app_userevent compatibility)  <a href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fd487c2186f10859ec2619cf26b0907">More...</a><br /></td></tr>
<tr class="separator:ga8fd487c2186f10859ec2619cf26b0907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f19ecb7bc66ac1636376f25ff2493ec"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a9f19ecb7bc66ac1636376f25ff2493ec">AST_VECTOR</a> (struct <a class="el" href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a>)</td></tr>
<tr class="separator:a9f19ecb7bc66ac1636376f25ff2493ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71bbcf399ee9fa1e688b4cd9ff342cba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a71bbcf399ee9fa1e688b4cd9ff342cba">CONFIG_INFO_CORE</a> (&quot;stasis&quot;, cfg_info, <a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a513440e1209c1c0e7982ed5112d754f4">stasis_config_alloc</a>,.files=<a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../d0/df4/stasis_8c.html#aa3c9de336ef559d62489ee255ea4b3a4">stasis_conf</a>),)</td></tr>
<tr class="memdesc:a71bbcf399ee9fa1e688b4cd9ff342cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register information about the configs being processed by this module.  <a href="#a71bbcf399ee9fa1e688b4cd9ff342cba">More...</a><br /></td></tr>
<tr class="separator:a71bbcf399ee9fa1e688b4cd9ff342cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2be5dfe3f2bdc69bb3f0b9d92078bb4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ad2be5dfe3f2bdc69bb3f0b9d92078bb4">declined_handler</a> (const struct <a class="el" href="../../db/de0/structaco__option.html">aco_option</a> *opt, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, void *obj)</td></tr>
<tr class="separator:ad2be5dfe3f2bdc69bb3f0b9d92078bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b044b5df7fa5891d57de64a2e18cbf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ac6b044b5df7fa5891d57de64a2e18cbf">dispatch_exec_async</a> (struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *local)</td></tr>
<tr class="separator:ac6b044b5df7fa5891d57de64a2e18cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2607f6913af9644502836a6a8a588790"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a2607f6913af9644502836a6a8a588790">dispatch_exec_sync</a> (struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *local)</td></tr>
<tr class="separator:a2607f6913af9644502836a6a8a588790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae9eb64c90ceb85938c512e2f8bc488a"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aae9eb64c90ceb85938c512e2f8bc488a">dispatch_message</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>, int synchronous)</td></tr>
<tr class="separator:aae9eb64c90ceb85938c512e2f8bc488a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38736c464d6ded1bd9c2570a59dca6b3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a38736c464d6ded1bd9c2570a59dca6b3">forward_dtor</a> (void *obj)</td></tr>
<tr class="separator:a38736c464d6ded1bd9c2570a59dca6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d9bff23ceccb19080696e3b48506aa"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ab7d9bff23ceccb19080696e3b48506aa">internal_stasis_subscribe</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, <a class="el" href="../../dd/d79/stasis_8h.html#a2b7854b4fb538be6f885943a24d60c8f">stasis_subscription_cb</a> callback, void *data, int needs_mailbox, int use_thread_pool, const char *file, int lineno, const char *func)</td></tr>
<tr class="memdesc:ab7d9bff23ceccb19080696e3b48506aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a subscription.  <a href="#ab7d9bff23ceccb19080696e3b48506aa">More...</a><br /></td></tr>
<tr class="separator:ab7d9bff23ceccb19080696e3b48506aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a786a897527c7c44864c2c9f289a90c73"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a786a897527c7c44864c2c9f289a90c73">link_topic_proxy</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *detail)</td></tr>
<tr class="separator:a786a897527c7c44864c2c9f289a90c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76471c8c470fe17bf2d9c66080039d8a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a76471c8c470fe17bf2d9c66080039d8a">multi_object_blob_dtor</a> (void *obj)</td></tr>
<tr class="separator:a76471c8c470fe17bf2d9c66080039d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df2223962bc8eda9be972c8746f8328"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a5df2223962bc8eda9be972c8746f8328">multi_object_blob_to_ami</a> (void *obj)</td></tr>
<tr class="separator:a5df2223962bc8eda9be972c8746f8328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0770e6bfce19c8fee06b15270f94816e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a0770e6bfce19c8fee06b15270f94816e">multi_user_event_to_ami</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a0770e6bfce19c8fee06b15270f94816e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44b9b12f84af401e4511c7c90e2038f4"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a44b9b12f84af401e4511c7c90e2038f4">multi_user_event_to_json</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>, const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *sanitize)</td></tr>
<tr class="separator:a44b9b12f84af401e4511c7c90e2038f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5edbf1e6a7f617d0fef57a1a7ef93883"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a5edbf1e6a7f617d0fef57a1a7ef93883">proxy_dtor</a> (void *weakproxy, void *<a class="el" href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a>)</td></tr>
<tr class="separator:a5edbf1e6a7f617d0fef57a1a7ef93883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95001d504d94709275db7e173ce31b43"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a95001d504d94709275db7e173ce31b43">publish_msg</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *sync_sub)</td></tr>
<tr class="separator:a95001d504d94709275db7e173ce31b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c2e53c98f40dbe0f25e418a8974878"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aa5c2e53c98f40dbe0f25e418a8974878">send_subscription_subscribe</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:aa5c2e53c98f40dbe0f25e418a8974878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c683cc9e9e3d1c9ce2f20c97cf69feb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a8c683cc9e9e3d1c9ce2f20c97cf69feb">send_subscription_unsubscribe</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a8c683cc9e9e3d1c9ce2f20c97cf69feb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a4b47914bab8d430d86766504c52dc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a59a4b47914bab8d430d86766504c52dc">stasis_cleanup</a> (void)</td></tr>
<tr class="memdesc:a59a4b47914bab8d430d86766504c52dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup function for graceful shutdowns.  <a href="#a59a4b47914bab8d430d86766504c52dc">More...</a><br /></td></tr>
<tr class="separator:a59a4b47914bab8d430d86766504c52dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513440e1209c1c0e7982ed5112d754f4"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a513440e1209c1c0e7982ed5112d754f4">stasis_config_alloc</a> (void)</td></tr>
<tr class="separator:a513440e1209c1c0e7982ed5112d754f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683c22ddf249d0e23664056d28a750da"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a683c22ddf249d0e23664056d28a750da">stasis_config_destructor</a> (void *obj)</td></tr>
<tr class="separator:a683c22ddf249d0e23664056d28a750da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab529f60fda7c7d7f57f97c300690748"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aab529f60fda7c7d7f57f97c300690748">stasis_declined_config_destructor</a> (void *obj)</td></tr>
<tr class="separator:aab529f60fda7c7d7f57f97c300690748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2513a93567ddc93510f7896b777da119"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *from_topic, struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *to_topic)</td></tr>
<tr class="memdesc:a2513a93567ddc93510f7896b777da119"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a subscription which forwards all messages from one topic to another.  <a href="#a2513a93567ddc93510f7896b777da119">More...</a><br /></td></tr>
<tr class="separator:a2513a93567ddc93510f7896b777da119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5713715b0f26f4943d0af05363b07027"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a> (struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *forward)</td></tr>
<tr class="separator:a5713715b0f26f4943d0af05363b07027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e674e1a85d014776968a99025bf7bce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a5e674e1a85d014776968a99025bf7bce">stasis_init</a> (void)</td></tr>
<tr class="memdesc:a5e674e1a85d014776968a99025bf7bce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Stasis subsystem.  <a href="#a5e674e1a85d014776968a99025bf7bce">More...</a><br /></td></tr>
<tr class="separator:a5e674e1a85d014776968a99025bf7bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72385bdbbdd39eda3680da22820da7a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a72385bdbbdd39eda3680da22820da7a5">stasis_log_bad_type_access</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a72385bdbbdd39eda3680da22820da7a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c2e98dd27243b0fe07717c54c40d0b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6c2e98dd27243b0fe07717c54c40d0b1">stasis_message_type_declined</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a6c2e98dd27243b0fe07717c54c40d0b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a message type is declined.  <a href="#a6c2e98dd27243b0fe07717c54c40d0b1">More...</a><br /></td></tr>
<tr class="separator:a6c2e98dd27243b0fe07717c54c40d0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35c4a888e0f5a4fc7ee4e053203299b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#af35c4a888e0f5a4fc7ee4e053203299b">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>)</td></tr>
<tr class="separator:af35c4a888e0f5a4fc7ee4e053203299b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac43d0a33d111e9f34b441b285c166cfc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:ac43d0a33d111e9f34b441b285c166cfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a message to a topic's subscribers.  <a href="#ac43d0a33d111e9f34b441b285c166cfc">More...</a><br /></td></tr>
<tr class="separator:ac43d0a33d111e9f34b441b285c166cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a499d7d708fc81464ec55de7c518b02c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a499d7d708fc81464ec55de7c518b02c6">stasis_publish_sync</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a499d7d708fc81464ec55de7c518b02c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a message to a topic's subscribers, synchronizing on the specified subscriber.  <a href="#a499d7d708fc81464ec55de7c518b02c6">More...</a><br /></td></tr>
<tr class="separator:a499d7d708fc81464ec55de7c518b02c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741093249684a38185a312d3e0b51fb7"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a741093249684a38185a312d3e0b51fb7">stasis_show_topic</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a741093249684a38185a312d3e0b51fb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e125cdc817146ff611d74e0a9b8e60"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a06e125cdc817146ff611d74e0a9b8e60">stasis_show_topics</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a06e125cdc817146ff611d74e0a9b8e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3a92c10ab654d4a7b11cbf44aa1074"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aaf3a92c10ab654d4a7b11cbf44aa1074">stasis_subscription_accept_formatters</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription, enum <a class="el" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814">stasis_subscription_message_formatters</a> formatters)</td></tr>
<tr class="memdesc:aaf3a92c10ab654d4a7b11cbf44aa1074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate to a subscription that we are interested in messages with one or more formatters.  <a href="#aaf3a92c10ab654d4a7b11cbf44aa1074">More...</a><br /></td></tr>
<tr class="separator:aaf3a92c10ab654d4a7b11cbf44aa1074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f248ee5f4791f05d0af8768aaab282b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription, const struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a4f248ee5f4791f05d0af8768aaab282b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate to a subscription that we are interested in a message type.  <a href="#a4f248ee5f4791f05d0af8768aaab282b">More...</a><br /></td></tr>
<tr class="separator:a4f248ee5f4791f05d0af8768aaab282b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613709cd56550431a4ed3c45e59b72a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a613709cd56550431a4ed3c45e59b72a3">stasis_subscription_cb_noop</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a613709cd56550431a4ed3c45e59b72a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stasis subscription callback function that does nothing.  <a href="#a613709cd56550431a4ed3c45e59b72a3">More...</a><br /></td></tr>
<tr class="separator:a613709cd56550431a4ed3c45e59b72a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a223dba20686ad9d48d9ea8329984f14b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a223dba20686ad9d48d9ea8329984f14b">stasis_subscription_decline_message_type</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription, const struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a223dba20686ad9d48d9ea8329984f14b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate to a subscription that we are not interested in a message type.  <a href="#a223dba20686ad9d48d9ea8329984f14b">More...</a><br /></td></tr>
<tr class="separator:a223dba20686ad9d48d9ea8329984f14b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839350445aaa51cedf31f6daec933ee0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg)</td></tr>
<tr class="memdesc:a839350445aaa51cedf31f6daec933ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether a message is the final message to be received on a subscription.  <a href="#a839350445aaa51cedf31f6daec933ee0">More...</a><br /></td></tr>
<tr class="separator:a839350445aaa51cedf31f6daec933ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04c69c471e1b836539f280b80b0000de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a04c69c471e1b836539f280b80b0000de">stasis_subscription_is_done</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription)</td></tr>
<tr class="memdesc:a04c69c471e1b836539f280b80b0000de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether <em>subscription</em> has received its final message.  <a href="#a04c69c471e1b836539f280b80b0000de">More...</a><br /></td></tr>
<tr class="separator:a04c69c471e1b836539f280b80b0000de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5bedbb2212956dac77be47dceef510"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a> (const struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:acd5bedbb2212956dac77be47dceef510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether a subscription is currently subscribed.  <a href="#acd5bedbb2212956dac77be47dceef510">More...</a><br /></td></tr>
<tr class="separator:acd5bedbb2212956dac77be47dceef510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68a963557189666f5d733bfb9a826e41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a68a963557189666f5d733bfb9a826e41">stasis_subscription_join</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription)</td></tr>
<tr class="memdesc:a68a963557189666f5d733bfb9a826e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block until the last message is processed on a subscription.  <a href="#a68a963557189666f5d733bfb9a826e41">More...</a><br /></td></tr>
<tr class="separator:a68a963557189666f5d733bfb9a826e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d95cf98ebb8880cc602c801a639888e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a2d95cf98ebb8880cc602c801a639888e">stasis_subscription_set_congestion_limits</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription, long low_water, long high_water)</td></tr>
<tr class="memdesc:a2d95cf98ebb8880cc602c801a639888e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the high and low alert water marks of the stasis subscription.  <a href="#a2d95cf98ebb8880cc602c801a639888e">More...</a><br /></td></tr>
<tr class="separator:a2d95cf98ebb8880cc602c801a639888e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b5393bef89d7781c0d039d6489de23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription, enum <a class="el" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891">stasis_subscription_message_filter</a> <a class="el" href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a>)</td></tr>
<tr class="memdesc:a52b5393bef89d7781c0d039d6489de23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the message type filtering level on a subscription.  <a href="#a52b5393bef89d7781c0d039d6489de23">More...</a><br /></td></tr>
<tr class="separator:a52b5393bef89d7781c0d039d6489de23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62ce8a618ee8efe43cddcbfb6be1edc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aa62ce8a618ee8efe43cddcbfb6be1edc">stasis_subscription_statistics_create</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, int needs_mailbox, int use_thread_pool, const char *file, int lineno, const char *func)</td></tr>
<tr class="separator:aa62ce8a618ee8efe43cddcbfb6be1edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a7ba1f3c93ba7ee7583a0d8595025d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a> (const struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a86a7ba1f3c93ba7ee7583a0d8595025d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the unique ID for the subscription.  <a href="#a86a7ba1f3c93ba7ee7583a0d8595025d">More...</a><br /></td></tr>
<tr class="separator:a86a7ba1f3c93ba7ee7583a0d8595025d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac26206b971b094c90839b4049cb6cc"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:acac26206b971b094c90839b4049cb6cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new topic.  <a href="#acac26206b971b094c90839b4049cb6cc">More...</a><br /></td></tr>
<tr class="separator:acac26206b971b094c90839b4049cb6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b49e1209c8280ab73a25585068b04cc"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6b49e1209c8280ab73a25585068b04cc">stasis_topic_create_with_detail</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *detail)</td></tr>
<tr class="memdesc:a6b49e1209c8280ab73a25585068b04cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new topic with given detail.  <a href="#a6b49e1209c8280ab73a25585068b04cc">More...</a><br /></td></tr>
<tr class="separator:a6b49e1209c8280ab73a25585068b04cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5e4d29943a4dd27300887dc88ece28"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6e5e4d29943a4dd27300887dc88ece28">stasis_topic_detail</a> (const struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic)</td></tr>
<tr class="memdesc:a6e5e4d29943a4dd27300887dc88ece28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the detail of a topic.  <a href="#a6e5e4d29943a4dd27300887dc88ece28">More...</a><br /></td></tr>
<tr class="separator:a6e5e4d29943a4dd27300887dc88ece28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02f065d129b21343b13a9eeb1c740771"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a02f065d129b21343b13a9eeb1c740771"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a topic of the given name.  <a href="#a02f065d129b21343b13a9eeb1c740771">More...</a><br /></td></tr>
<tr class="separator:a02f065d129b21343b13a9eeb1c740771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af23deee342575033bc73311b1215d886"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a> (const struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic)</td></tr>
<tr class="memdesc:af23deee342575033bc73311b1215d886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the name of a topic.  <a href="#af23deee342575033bc73311b1215d886">More...</a><br /></td></tr>
<tr class="separator:af23deee342575033bc73311b1215d886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb9a69946c2be89329630328f125330d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *pooled_topic)</td></tr>
<tr class="memdesc:aeb9a69946c2be89329630328f125330d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a topic pool that routes messages from dynamically generated topics to the given topic.  <a href="#aeb9a69946c2be89329630328f125330d">More...</a><br /></td></tr>
<tr class="separator:aeb9a69946c2be89329630328f125330d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dfabff07a77d235b2b16d2b564f5c4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1dfabff07a77d235b2b16d2b564f5c4b">stasis_topic_pool_delete_topic</a> (struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, const char *topic_name)</td></tr>
<tr class="memdesc:a1dfabff07a77d235b2b16d2b564f5c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a topic from the topic pool.  <a href="#a1dfabff07a77d235b2b16d2b564f5c4b">More...</a><br /></td></tr>
<tr class="separator:a1dfabff07a77d235b2b16d2b564f5c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ee1df597af46f3b489cce002b604a89"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a> (struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, const char *topic_name)</td></tr>
<tr class="memdesc:a1ee1df597af46f3b489cce002b604a89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find or create a topic in the pool.  <a href="#a1ee1df597af46f3b489cce002b604a89">More...</a><br /></td></tr>
<tr class="separator:a1ee1df597af46f3b489cce002b604a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a947db1503987a5c215dbc7240800a13d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a947db1503987a5c215dbc7240800a13d">stasis_topic_pool_topic_exists</a> (const struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, const char *topic_name)</td></tr>
<tr class="memdesc:a947db1503987a5c215dbc7240800a13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a topic exists in a pool.  <a href="#a947db1503987a5c215dbc7240800a13d">More...</a><br /></td></tr>
<tr class="separator:a947db1503987a5c215dbc7240800a13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bad26ce576a9d2ed0a1116ed10ee730"><td class="memItemLeft" align="right" valign="top">static struct stasis_topic_statistics *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a4bad26ce576a9d2ed0a1116ed10ee730">stasis_topic_statistics_create</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic)</td></tr>
<tr class="separator:a4bad26ce576a9d2ed0a1116ed10ee730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a461ec3c31a2f54d7c001b0ead6c7313d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a461ec3c31a2f54d7c001b0ead6c7313d">stasis_topic_subscribers</a> (const struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic)</td></tr>
<tr class="memdesc:a461ec3c31a2f54d7c001b0ead6c7313d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of subscribers of a topic.  <a href="#a461ec3c31a2f54d7c001b0ead6c7313d">More...</a><br /></td></tr>
<tr class="separator:a461ec3c31a2f54d7c001b0ead6c7313d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9864d12ae0d2cca19740b90ee3109e9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ab9864d12ae0d2cca19740b90ee3109e9">stasis_unsubscribe</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:ab9864d12ae0d2cca19740b90ee3109e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel a subscription.  <a href="#ab9864d12ae0d2cca19740b90ee3109e9">More...</a><br /></td></tr>
<tr class="separator:ab9864d12ae0d2cca19740b90ee3109e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221d05010106dcde0cc2e2b43c1a8b67"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a221d05010106dcde0cc2e2b43c1a8b67">stasis_unsubscribe_and_join</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription)</td></tr>
<tr class="memdesc:a221d05010106dcde0cc2e2b43c1a8b67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel a subscription, blocking until the last message is processed.  <a href="#a221d05010106dcde0cc2e2b43c1a8b67">More...</a><br /></td></tr>
<tr class="separator:a221d05010106dcde0cc2e2b43c1a8b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b17ee784eba168bb1ef04892f25af19"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6b17ee784eba168bb1ef04892f25af19">statistics_show_messages</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a6b17ee784eba168bb1ef04892f25af19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8b446f15d713c18213991e2e827014"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1e8b446f15d713c18213991e2e827014">statistics_show_subscription</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a1e8b446f15d713c18213991e2e827014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cd26233f416af7d83c5371d20b97349"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1cd26233f416af7d83c5371d20b97349">statistics_show_subscriptions</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a1cd26233f416af7d83c5371d20b97349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbbe831ee07f80b3cc5b71be3f65e6ec"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#afbbe831ee07f80b3cc5b71be3f65e6ec">statistics_show_topic</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:afbbe831ee07f80b3cc5b71be3f65e6ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e18a92234989ab700fabb8abfa71c37"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a4e18a92234989ab700fabb8abfa71c37">statistics_show_topics</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a4e18a92234989ab700fabb8abfa71c37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3273b186b9627de5e6eecd8ac8230a41"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a3273b186b9627de5e6eecd8ac8230a41">sub_cleanup</a> (void *data)</td></tr>
<tr class="separator:a3273b186b9627de5e6eecd8ac8230a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a915d63fc715772a167a2308d86ab7723"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a915d63fc715772a167a2308d86ab7723">subscription_change_alloc</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, const char *uniqueid, const char *description)</td></tr>
<tr class="separator:a915d63fc715772a167a2308d86ab7723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc8b3b357793063b639afc442168fa0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1bc8b3b357793063b639afc442168fa0">subscription_change_dtor</a> (void *obj)</td></tr>
<tr class="separator:a1bc8b3b357793063b639afc442168fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8204d4969e6aeb9c8494b4a3fb40061b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a8204d4969e6aeb9c8494b4a3fb40061b">subscription_dtor</a> (void *obj)</td></tr>
<tr class="separator:a8204d4969e6aeb9c8494b4a3fb40061b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44c4bf7cb1df892584c436f1855ac28"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a> (struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:ab44c4bf7cb1df892584c436f1855ac28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke the subscription's callback.  <a href="#ab44c4bf7cb1df892584c436f1855ac28">More...</a><br /></td></tr>
<tr class="separator:ab44c4bf7cb1df892584c436f1855ac28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff7f67df7e0d35e466ad20d9f8c534da"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aff7f67df7e0d35e466ad20d9f8c534da">subscription_statistics_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:aff7f67df7e0d35e466ad20d9f8c534da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcdff136f20313f7d25599d92e099b72"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#abcdff136f20313f7d25599d92e099b72">subscription_statistics_complete_name</a> (const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, int <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="separator:abcdff136f20313f7d25599d92e099b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e3661c16fcd586edcb4eb2aa0c494b6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1e3661c16fcd586edcb4eb2aa0c494b6">subscription_statistics_destroy</a> (void *obj)</td></tr>
<tr class="separator:a1e3661c16fcd586edcb4eb2aa0c494b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f74acd52a27788bee2b0aa2a417b7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a65f74acd52a27788bee2b0aa2a417b7c">subscription_statistics_hash</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:a65f74acd52a27788bee2b0aa2a417b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79e3a46cca0390255f951e98052a6508"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="memdesc:a79e3a46cca0390255f951e98052a6508"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a subscriber to a topic.  <a href="#a79e3a46cca0390255f951e98052a6508">More...</a><br /></td></tr>
<tr class="separator:a79e3a46cca0390255f951e98052a6508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b0d5da0eb307a7fbba0e7866a97b1f6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6b0d5da0eb307a7fbba0e7866a97b1f6">topic_complete_name</a> (const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>)</td></tr>
<tr class="separator:a6b0d5da0eb307a7fbba0e7866a97b1f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5452a83caf693562327d1b86c5748703"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a5452a83caf693562327d1b86c5748703">topic_dtor</a> (void *obj)</td></tr>
<tr class="separator:a5452a83caf693562327d1b86c5748703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c5592db184a6f1d2055845a0bd94aa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a48c5592db184a6f1d2055845a0bd94aa">topic_pool_dtor</a> (void *obj)</td></tr>
<tr class="separator:a48c5592db184a6f1d2055845a0bd94aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31134d792ae64e6f21060b8e7ffd49fc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a31134d792ae64e6f21060b8e7ffd49fc">topic_pool_entry_alloc</a> (const char *topic_name)</td></tr>
<tr class="separator:a31134d792ae64e6f21060b8e7ffd49fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a669f6c3dbec7c74b97b5b388bfa999c3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a669f6c3dbec7c74b97b5b388bfa999c3">topic_pool_entry_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a669f6c3dbec7c74b97b5b388bfa999c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01a619b8ee3472ad037f16b0fc31e72"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ac01a619b8ee3472ad037f16b0fc31e72">topic_pool_entry_dtor</a> (void *obj)</td></tr>
<tr class="separator:ac01a619b8ee3472ad037f16b0fc31e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e61da6e3b66f39e64e8de751c3867c0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6e61da6e3b66f39e64e8de751c3867c0">topic_pool_entry_hash</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:a6e61da6e3b66f39e64e8de751c3867c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedcfe63e48121eabbf8ec304cee1d7bd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a> (struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:aedcfe63e48121eabbf8ec304cee1d7bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bfbdd05a5b4d1c42475d1a89d4a0bea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a1bfbdd05a5b4d1c42475d1a89d4a0bea">topic_statistics_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a1bfbdd05a5b4d1c42475d1a89d4a0bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e140c8e2ec6cd375510769195df52b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a70e140c8e2ec6cd375510769195df52b">topic_statistics_complete_name</a> (const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, int <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="separator:a70e140c8e2ec6cd375510769195df52b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a669245e59f5abe87b6109b95710ebfc7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a669245e59f5abe87b6109b95710ebfc7">topic_statistics_destroy</a> (void *obj)</td></tr>
<tr class="separator:a669245e59f5abe87b6109b95710ebfc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca08aa236124705a035a6fe95371c6ca"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aca08aa236124705a035a6fe95371c6ca">topic_statistics_hash</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:aca08aa236124705a035a6fe95371c6ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ad2d54eb7d929aa7b34751f6b07f42"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ad9ad2d54eb7d929aa7b34751f6b07f42">userevent_exclusion_cb</a> (const char *key)</td></tr>
<tr class="separator:ad9ad2d54eb7d929aa7b34751f6b07f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:af273c6620cf98ade3224665d7e13ffa3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#af273c6620cf98ade3224665d7e13ffa3">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type</a>,.to_json=<a class="el" href="../../d0/df4/stasis_8c.html#a44b9b12f84af401e4511c7c90e2038f4">multi_user_event_to_json</a>,.<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a>=<a class="el" href="../../d0/df4/stasis_8c.html#a0770e6bfce19c8fee06b15270f94816e">multi_user_event_to_ami</a>,)</td></tr>
<tr class="memdesc:af273c6620cf98ade3224665d7e13ffa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define multi user event message type(s).  <a href="#af273c6620cf98ade3224665d7e13ffa3">More...</a><br /></td></tr>
<tr class="separator:af273c6620cf98ade3224665d7e13ffa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a12e07f14a24059d6ca7ad80c23473729"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a> []</td></tr>
<tr class="separator:a12e07f14a24059d6ca7ad80c23473729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee1e67ae2faf5be87758cc11248e2f9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a> []</td></tr>
<tr class="separator:a9ee1e67ae2faf5be87758cc11248e2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe12a283dc4ec49a7557650cbc4e8ec9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a></td></tr>
<tr class="memdesc:afe12a283dc4ec49a7557650cbc4e8ec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">An <a class="el" href="../../de/d71/structaco__type.html" title="Type information about a category-level configurable object. ">aco_type</a> structure to link the "declined_message_types" category to the <a class="el" href="../../de/d5b/structstasis__declined__config.html" title="A structure to hold global configuration-related options. ">stasis_declined_config</a> type.  <a href="#afe12a283dc4ec49a7557650cbc4e8ec9">More...</a><br /></td></tr>
<tr class="separator:afe12a283dc4ec49a7557650cbc4e8ec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada04be29882062127408e67ba605ca60"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ada04be29882062127408e67ba605ca60">declined_options</a> [] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a>)</td></tr>
<tr class="separator:ada04be29882062127408e67ba605ca60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87031d017d60611ca33ad816139d0e06"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:a87031d017d60611ca33ad816139d0e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c9de336ef559d62489ee255ea4b3a4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aa3c9de336ef559d62489ee255ea4b3a4">stasis_conf</a></td></tr>
<tr class="separator:aa3c9de336ef559d62489ee255ea4b3a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc11fc8f94173cc1af379b74a096abd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a></td></tr>
<tr class="separator:a6dc11fc8f94173cc1af379b74a096abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75dbfda070501bd401698bdf6813e571"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a></td></tr>
<tr class="separator:a75dbfda070501bd401698bdf6813e571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac523295c428ee99baad3a6a7ef1cfbe"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#aac523295c428ee99baad3a6a7ef1cfbe">threadpool_options</a> [] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a>)</td></tr>
<tr class="separator:aac523295c428ee99baad3a6a7ef1cfbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14b5f72d5278c2e22621748fba0610b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></td></tr>
<tr class="separator:ae14b5f72d5278c2e22621748fba0610b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Stasis Message Bus API. </p>
<dl class="section author"><dt>Author</dt><dd>David M. Lee, II <a href="#" onclick="location.href='mai'+'lto:'+'dle'+'e@'+'dig'+'iu'+'m.c'+'om'; return false;">dlee@<span style="display: none;">.nosp@m.</span>digi<span style="display: none;">.nosp@m.</span>um.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a28e4a2cd5d9cefd5714c0a3ce2a35499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e4a2cd5d9cefd5714c0a3ce2a35499">&#9670;&nbsp;</a></span>FMT_FIELDS <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS&#160;&#160;&#160;&quot;%-64s %-64s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02334">stasis_show_topics()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02865">statistics_show_messages()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02490">statistics_show_subscriptions()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02684">statistics_show_topics()</a>.</p>

</div>
</div>
<a id="a28e4a2cd5d9cefd5714c0a3ce2a35499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e4a2cd5d9cefd5714c0a3ce2a35499">&#9670;&nbsp;</a></span>FMT_FIELDS <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS&#160;&#160;&#160;&quot;%-64s %10d %10d %16ld %16ld\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a28e4a2cd5d9cefd5714c0a3ce2a35499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e4a2cd5d9cefd5714c0a3ce2a35499">&#9670;&nbsp;</a></span>FMT_FIELDS <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS&#160;&#160;&#160;&quot;%-64s %10d %10d %10d %16ld %16ld\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a28e4a2cd5d9cefd5714c0a3ce2a35499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e4a2cd5d9cefd5714c0a3ce2a35499">&#9670;&nbsp;</a></span>FMT_FIELDS <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS&#160;&#160;&#160;&quot;%-64s %10d %10d\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad1d858a4e8d8ee02eee5b943d65814a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d858a4e8d8ee02eee5b943d65814a1">&#9670;&nbsp;</a></span>FMT_FIELDS2 <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS2&#160;&#160;&#160;&quot;%-64s %10d %10d\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02490">statistics_show_subscriptions()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02684">statistics_show_topics()</a>.</p>

</div>
</div>
<a id="ad1d858a4e8d8ee02eee5b943d65814a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d858a4e8d8ee02eee5b943d65814a1">&#9670;&nbsp;</a></span>FMT_FIELDS2 <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS2&#160;&#160;&#160;&quot;%-64s %10s %10d %10d\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a23b24e0f93569bfc937a4bc9143c21e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b24e0f93569bfc937a4bc9143c21e3">&#9670;&nbsp;</a></span>FMT_HEADERS <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_HEADERS&#160;&#160;&#160;&quot;%-64s %-64s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02334">stasis_show_topics()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02865">statistics_show_messages()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02490">statistics_show_subscriptions()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02684">statistics_show_topics()</a>.</p>

</div>
</div>
<a id="a23b24e0f93569bfc937a4bc9143c21e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b24e0f93569bfc937a4bc9143c21e3">&#9670;&nbsp;</a></span>FMT_HEADERS <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_HEADERS&#160;&#160;&#160;&quot;%-64s %10s %10s %16s %16s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a23b24e0f93569bfc937a4bc9143c21e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b24e0f93569bfc937a4bc9143c21e3">&#9670;&nbsp;</a></span>FMT_HEADERS <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_HEADERS&#160;&#160;&#160;&quot;%-64s %10s %10s %10s %16s %16s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a23b24e0f93569bfc937a4bc9143c21e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b24e0f93569bfc937a4bc9143c21e3">&#9670;&nbsp;</a></span>FMT_HEADERS <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_HEADERS&#160;&#160;&#160;&quot;%-64s %10s %10s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1a7335532b05804a34da6dead8e50a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a7335532b05804a34da6dead8e50a9d">&#9670;&nbsp;</a></span>INITIAL_SUBSCRIBERS_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INITIAL_SUBSCRIBERS_MAX&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial size of the subscribers list. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00302">302</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">stasis_topic_create_with_detail()</a>.</p>

</div>
</div>
<a id="a92f09fdb7bda5eeca4fa0e1b4c9046c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92f09fdb7bda5eeca4fa0e1b4c9046c0">&#9670;&nbsp;</a></span>SUBSCRIPTION_STATISTICS_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUBSCRIPTION_STATISTICS_BUCKETS&#160;&#160;&#160;57</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of buckets to use for subscription statistics </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00328">328</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>

</div>
</div>
<a id="af25c73f0280eb52884585e91c8d18d70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af25c73f0280eb52884585e91c8d18d70">&#9670;&nbsp;</a></span>TOPIC_ALL_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPIC_ALL_BUCKETS&#160;&#160;&#160;997</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00318">318</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>

</div>
</div>
<a id="ae11ee3d32be3f0cc558f1ef40cd9a45b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae11ee3d32be3f0cc558f1ef40cd9a45b">&#9670;&nbsp;</a></span>topic_lock_both</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define topic_lock_both</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">topic1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">topic2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock two topics. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00426">426</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>.</p>

</div>
</div>
<a id="a551da25f7ccf7648107004ad73424064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a551da25f7ccf7648107004ad73424064">&#9670;&nbsp;</a></span>TOPIC_POOL_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPIC_POOL_BUCKETS&#160;&#160;&#160;57</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of buckets to use for topic pools </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00305">305</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>

</div>
</div>
<a id="a348a7ad6b881b6b0b401da2d8546ccc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a348a7ad6b881b6b0b401da2d8546ccc4">&#9670;&nbsp;</a></span>TOPIC_STATISTICS_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPIC_STATISTICS_BUCKETS&#160;&#160;&#160;57</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of buckets to use for topic statistics </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00325">325</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a23dcf25efe633f0f429a1520f066249f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23dcf25efe633f0f429a1520f066249f">&#9670;&nbsp;</a></span>__stasis_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* __stasis_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d79/stasis_8h.html#a2b7854b4fb538be6f885943a24d60c8f">stasis_subscription_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a subscription. </p>
<p>In addition to being AO2 managed memory (requiring an <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to free up this reference), the subscription must be explicitly unsubscribed from its topic using <a class="el" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b" title="Cancel a subscription. ">stasis_unsubscribe()</a>.</p>
<p>The invocations of the callback are serialized, but may not always occur on the same thread. The invocation order of different subscriptions is unspecified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic to subscribe to. </td></tr>
    <tr><td class="paramname">callback</td><td>Callback function for subscription messages. </td></tr>
    <tr><td class="paramname">data</td><td>Data to be passed to the callback, in addition to the message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> object. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This callback will receive a callback with a message indicating it has been subscribed. This occurs immediately before accepted message types can be set and the callback must expect to receive it. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00944">944</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00207">stasis_message_router_create_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;{</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/stasis_8c.html#ab7d9bff23ceccb19080696e3b48506aa">internal_stasis_subscribe</a>(topic, callback, data, 1, 0, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, func);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="stasis_8c_html_ab7d9bff23ceccb19080696e3b48506aa"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ab7d9bff23ceccb19080696e3b48506aa">internal_stasis_subscribe</a></div><div class="ttdeci">struct stasis_subscription * internal_stasis_subscribe(struct stasis_topic *topic, stasis_subscription_cb callback, void *data, int needs_mailbox, int use_thread_pool, const char *file, int lineno, const char *func)</div><div class="ttdoc">Create a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00858">stasis.c:858</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b7cbb6df580f2e3cba59eed0400fee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b7cbb6df580f2e3cba59eed0400fee4">&#9670;&nbsp;</a></span>__stasis_subscribe_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* __stasis_subscribe_pool </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d79/stasis_8h.html#a2b7854b4fb538be6f885943a24d60c8f">stasis_subscription_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a subscription whose callbacks occur on a thread pool. </p>
<p>In addition to being AO2 managed memory (requiring an <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to free up this reference), the subscription must be explicitly unsubscribed from its topic using <a class="el" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b" title="Cancel a subscription. ">stasis_unsubscribe()</a>.</p>
<p>The invocations of the callback are serialized, but will almost certainly not always happen on the same thread. The invocation order of different subscriptions is unspecified.</p>
<p>Unlike <a class="el" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>, this function will explicitly use a threadpool to dispatch items to its <code>callback</code>. This form of subscription should be used when many subscriptions may be made to the specified <code>topic</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic to subscribe to. </td></tr>
    <tr><td class="paramname">callback</td><td>Callback function for subscription messages. </td></tr>
    <tr><td class="paramname">data</td><td>Data to be passed to the callback, in addition to the message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> object. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12.8.0</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This callback will receive a callback with a message indicating it has been subscribed. This occurs immediately before accepted message types can be set and the callback must expect to receive it. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00955">955</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00207">stasis_message_router_create_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;{</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/stasis_8c.html#ab7d9bff23ceccb19080696e3b48506aa">internal_stasis_subscribe</a>(topic, callback, data, 1, 1, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, func);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="stasis_8c_html_ab7d9bff23ceccb19080696e3b48506aa"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ab7d9bff23ceccb19080696e3b48506aa">internal_stasis_subscribe</a></div><div class="ttdeci">struct stasis_subscription * internal_stasis_subscribe(struct stasis_topic *topic, stasis_subscription_cb callback, void *data, int needs_mailbox, int use_thread_pool, const char *file, int lineno, const char *func)</div><div class="ttdoc">Create a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00858">stasis.c:858</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20128e1cc8295228725c00a615fc3eca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20128e1cc8295228725c00a615fc3eca">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">topic_statistics&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Global container which stores statistics for topics </p>

</div>
</div>
<a id="a7ff1d27adaeaaa70f6975fa314f767df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ff1d27adaeaaa70f6975fa314f767df">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">subscription_statistics&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Global container which stores statistics for subscriptions </p>

</div>
</div>
<a id="a6b8f4ce31d30e5a3e2c3894e6224f952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8f4ce31d30e5a3e2c3894e6224f952">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A global object container that will contain the <a class="el" href="../../d2/d0e/structstasis__config.html">stasis_config</a> that gets swapped out on reloads. </p>

</div>
</div>
<a id="aba6b4b2a1eb260f1ae9b1e018918798c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6b4b2a1eb260f1ae9b1e018918798c">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_CASE_SORT_FN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_CASE_SORT_FN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad668d6eee32e76a671a16e81c37bf3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad668d6eee32e76a671a16e81c37bf3e0">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_CMP_FN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_CMP_FN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a313ae93cf30a6ea50b6740fc6cfe9123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a313ae93cf30a6ea50b6740fc6cfe9123">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_HASH_FN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_HASH_FN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aec1ea12381514da43d4826808a21efc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec1ea12381514da43d4826808a21efc1">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_SORT_FN() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_SORT_FN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uniqueid&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02604">statistics_show_subscription()</a>.</p>

</div>
</div>
<a id="acf5e62abd0e9f1a688b1544e84a4e2c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf5e62abd0e9f1a688b1544e84a4e2c5">&#9670;&nbsp;</a></span>AO2_STRING_FIELD_SORT_FN() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AO2_STRING_FIELD_SORT_FN </td>
          <td>(</td>
          <td class="paramtype">stasis_topic_statistics&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9f19ecb7bc66ac1636376f25ff2493ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f19ecb7bc66ac1636376f25ff2493ec">&#9670;&nbsp;</a></span>AST_VECTOR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AST_VECTOR </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Vector containing message type information </p>
<p>Highest time spent dispatching messages to subscribers</p>
<p>Lowest time spent dispatching messages to subscribers</p>
<p>The number of messages that were not dispatched to any subscriber</p>
<p>The number of messages that were dispatched to at least 1 subscriber</p>
<p>The ids of the subscribers to this topic</p>
<p>Pointer to the topic (NOT refcounted, and must NOT be accessed)</p>
<p>Name of the topic </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00350">350</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>.</p>
<div class="fragment"><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                               {<span class="comment"></span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">   /*! \brief Highest time spent dispatching messages to subscribers */</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordtype">long</span> highest_time_dispatched;<span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">   /*! \brief Lowest time spent dispatching messages to subscribers */</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordtype">long</span> lowest_time_dispatched;<span class="comment"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">   /*! \brief The number of messages that were not dispatched to any subscriber */</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordtype">int</span> messages_not_dispatched;<span class="comment"></span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">   /*! \brief The number of messages that were dispatched to at least 1 subscriber */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordtype">int</span> messages_dispatched;<span class="comment"></span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">   /*! \brief The ids of the subscribers to this topic */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *subscribers;<span class="comment"></span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">   /*! \brief Pointer to the topic (NOT refcounted, and must NOT be accessed) */</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic;<span class="comment"></span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">   /*! \brief Name of the topic */</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[0];</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;};</div><div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71bbcf399ee9fa1e688b4cd9ff342cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71bbcf399ee9fa1e688b4cd9ff342cba">&#9670;&nbsp;</a></span>CONFIG_INFO_CORE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CONFIG_INFO_CORE </td>
          <td>(</td>
          <td class="paramtype">&quot;stasis&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cfg_info&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/dc5/extconf_8c.html#aec3689c71194f8504dafc644005a97db">globals</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/stasis_8c.html#a513440e1209c1c0e7982ed5112d754f4">stasis_config_alloc</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>files</em> = <code><a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../d0/df4/stasis_8c.html#aa3c9de336ef559d62489ee255ea4b3a4">stasis_conf</a>)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register information about the configs being processed by this module. </p>

</div>
</div>
<a id="ad2be5dfe3f2bdc69bb3f0b9d92078bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2be5dfe3f2bdc69bb3f0b9d92078bb4">&#9670;&nbsp;</a></span>declined_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int declined_handler </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../db/de0/structaco__option.html">aco_option</a> *&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02304">2304</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type()</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00206">ast_str_container_add()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02182">stasis_declined_config::declined</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02155">multi_user_event_to_ami()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02045">multi_user_event_to_json()</a>, <a class="el" href="../../d0/df4/stasis_8c.html#af35c4a888e0f5a4fc7ee4e053203299b">STASIS_MESSAGE_TYPE_DEFN()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">to_ami()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;{</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d5b/structstasis__declined__config.html">stasis_declined_config</a> *<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a> = obj;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;   }</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(declined-&gt;<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   }</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structstasis__declined__config_html_a9d8349e5ac80baf69070a6a108d8e372"><div class="ttname"><a href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">stasis_declined_config::declined</a></div><div class="ttdeci">struct ao2_container * declined</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02182">stasis.c:2182</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structstasis__declined__config_html"><div class="ttname"><a href="../../de/d5b/structstasis__declined__config.html">stasis_declined_config</a></div><div class="ttdoc">A structure to hold global configuration-related options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02180">stasis.c:2180</a></div></div>
<div class="ttc" id="strings_8h_html_ae2861c04a240bbc90f32ade1e1261afa"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a></div><div class="ttdeci">int ast_str_container_add(struct ao2_container *str_container, const char *add)</div><div class="ttdoc">Adds a string to a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00206">strings.c:206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6b044b5df7fa5891d57de64a2e18cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b044b5df7fa5891d57de64a2e18cbf">&#9670;&nbsp;</a></span>dispatch_exec_async()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dispatch_exec_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *&#160;</td>
          <td class="paramname"><em>local</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01261">1261</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00224">ast_taskprocessor_local::data</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00222">ast_taskprocessor_local::local_data</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">subscription_invoke()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">dispatch_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;{</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = local-&gt;<a class="code" href="../../dc/ded/structast__taskprocessor__local.html#afac276564d7aa87eefe4fa4b0694001e">local_data</a>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = local-&gt;<a class="code" href="../../dc/ded/structast__taskprocessor__local.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a>(sub, message);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(message);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html_afac276564d7aa87eefe4fa4b0694001e"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html#afac276564d7aa87eefe4fa4b0694001e">ast_taskprocessor_local::local_data</a></div><div class="ttdeci">void * local_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00222">taskprocessor.h:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html#a735984d41155bc1032e09bece8f8d66d">ast_taskprocessor_local::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00224">taskprocessor.h:224</a></div></div>
<div class="ttc" id="stasis_8c_html_ab44c4bf7cb1df892584c436f1855ac28"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a></div><div class="ttdeci">static void subscription_invoke(struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Invoke the subscription&amp;#39;s callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00756">stasis.c:756</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2607f6913af9644502836a6a8a588790"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2607f6913af9644502836a6a8a588790">&#9670;&nbsp;</a></span>dispatch_exec_sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dispatch_exec_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *&#160;</td>
          <td class="paramname"><em>local</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01288">1288</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01279">sync_task_data::complete</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01278">sync_task_data::cond</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00224">ast_taskprocessor_local::data</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00222">ast_taskprocessor_local::local_data</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01277">sync_task_data::lock</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">subscription_invoke()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01280">sync_task_data::task_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">dispatch_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;{</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = local-&gt;<a class="code" href="../../dc/ded/structast__taskprocessor__local.html#afac276564d7aa87eefe4fa4b0694001e">local_data</a>;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dc8/structsync__task__data.html">sync_task_data</a> *std = local-&gt;<a class="code" href="../../dc/ded/structast__taskprocessor__local.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#ac3dfbfc918763b506931680bcf2040a8">task_data</a>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a>(sub, message);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(message);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;}</div><div class="ttc" id="structsync__task__data_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#a520408f4775914f7510cc59db5a60b38">sync_task_data::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01279">stasis.c:1279</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structsync__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">sync_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01278">stasis.c:1278</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html_afac276564d7aa87eefe4fa4b0694001e"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html#afac276564d7aa87eefe4fa4b0694001e">ast_taskprocessor_local::local_data</a></div><div class="ttdeci">void * local_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00222">taskprocessor.h:222</a></div></div>
<div class="ttc" id="structsync__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">sync_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01277">stasis.c:1277</a></div></div>
<div class="ttc" id="structsync__task__data_html"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html">sync_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01276">stasis.c:1276</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html#a735984d41155bc1032e09bece8f8d66d">ast_taskprocessor_local::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00224">taskprocessor.h:224</a></div></div>
<div class="ttc" id="stasis_8c_html_ab44c4bf7cb1df892584c436f1855ac28"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a></div><div class="ttdeci">static void subscription_invoke(struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Invoke the subscription&amp;#39;s callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00756">stasis.c:756</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structsync__task__data_html_ac3dfbfc918763b506931680bcf2040a8"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#ac3dfbfc918763b506931680bcf2040a8">sync_task_data::task_data</a></div><div class="ttdeci">void * task_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01280">stasis.c:1280</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae9eb64c90ceb85938c512e2f8bc488a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae9eb64c90ceb85938c512e2f8bc488a">&#9670;&nbsp;</a></span>dispatch_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int dispatch_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>synchronous</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">1314</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01279">sync_task_data::complete</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01278">sync_task_data::cond</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01261">dispatch_exec_async()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01288">dispatch_exec_sync()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01277">sync_task_data::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00687">stasis_subscription::mailbox</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00343">stasis_message_type_statistics::message_type</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00114">stasis_message_type_available_formatters()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message_type_id()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00312">STASIS_SUBSCRIPTION_FORMATTER_NONE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">subscription_invoke()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01280">sync_task_data::task_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01432">publish_msg()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">send_subscription_unsubscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;{</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordtype">int</span> is_final = <a class="code" href="../../d0/df4/stasis_8c.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">    * The &#39;do while&#39; gives us an easy way to skip remaining logic once</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">    * we determine the message should be accepted.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">    * The code looks more verbose than it needs to be but it optimizes</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">    * down very nicely.  It&#39;s just easier to understand and debug this way.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *message_type = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <span class="keywordtype">int</span> type_id = <a class="code" href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a>(message_type);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordtype">int</span> type_filter_specified = 0;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keywordtype">int</span> formatter_filter_specified = 0;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <span class="keywordtype">int</span> type_filter_passed = 0;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordtype">int</span> formatter_filter_passed = 0;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <span class="comment">/* We always accept final messages so only run the filter logic if not final */</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">if</span> (is_final) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      type_filter_specified = sub-&gt;filter &amp; <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      formatter_filter_specified = sub-&gt;accepted_formatters != <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814ac2632bea7a56a41dbe1f53995f59f78e">STASIS_SUBSCRIPTION_FORMATTER_NONE</a>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="comment">/* Accept if no filters of either type were specified */</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keywordflow">if</span> (!type_filter_specified &amp;&amp; !formatter_filter_specified) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      type_filter_passed = type_filter_specified</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;         &amp;&amp; type_id &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;sub-&gt;accepted_message_types)</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;         &amp;&amp; <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;sub-&gt;accepted_message_types, type_id);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">       * Since the type and formatter filters are OR&#39;d, we can skip</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">       * the formatter check if the type check passes.</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="keywordflow">if</span> (type_filter_passed) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      formatter_filter_passed = formatter_filter_specified</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;         &amp;&amp; (sub-&gt;accepted_formatters &amp; <a class="code" href="../../dd/d79/stasis_8h.html#ad7a9331334e3c57d1718475864636d1c">stasis_message_type_available_formatters</a>(message_type));</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">if</span> (formatter_filter_passed) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      }</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;sub-&gt;statistics-&gt;messages_dropped, +1);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   } <span class="keywordflow">while</span> (0);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;sub-&gt;statistics-&gt;messages_passed, +1);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="comment">/* Dispatch directly */</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a>(sub, message);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="comment">/* Bump the message for the taskprocessor push. This will get de-ref&#39;d</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">    * by the task processor callback.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(message);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   <span class="keywordflow">if</span> (!synchronous) {</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>, <a class="code" href="../../d0/df4/stasis_8c.html#ac6b044b5df7fa5891d57de64a2e18cbf">dispatch_exec_async</a>, message)) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;         <span class="comment">/* Push failed; ugh. */</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Dropping async dispatch\n&quot;</span>);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(message);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/dc8/structsync__task__data.html">sync_task_data</a> std;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;std.lock);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;std.cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      std.complete = 0;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      std.task_data = message;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a2607f6913af9644502836a6a8a588790">dispatch_exec_sync</a>, &amp;std)) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;         <span class="comment">/* Push failed; ugh. */</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Dropping sync dispatch\n&quot;</span>);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(message);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;std.lock);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;std.cond);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;std.lock);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="keywordflow">while</span> (!std.complete) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;std.cond, &amp;std.lock);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;std.lock);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;std.lock);</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;std.cond);</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aaa72759806ee4118a78b9d1373c633d2"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a></div><div class="ttdeci">int stasis_message_type_id(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the id of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message.c:109</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stasis_8c_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structsync__task__data_html"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html">sync_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01276">stasis.c:1276</a></div></div>
<div class="ttc" id="structstasis__subscription_html_aa4d485b7c131a7229ae4f1054b2f506d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">stasis_subscription::mailbox</a></div><div class="ttdeci">struct ast_taskprocessor * mailbox</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00687">stasis.c:687</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6d7049467cda8b796bff04ce8bba34b5"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5">ast_taskprocessor_push_local</a></div><div class="ttdeci">int ast_taskprocessor_push_local(struct ast_taskprocessor *tps, int(*task_exe)(struct ast_taskprocessor_local *local), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="stasis_8c_html_a2607f6913af9644502836a6a8a588790"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a2607f6913af9644502836a6a8a588790">dispatch_exec_sync</a></div><div class="ttdeci">static int dispatch_exec_sync(struct ast_taskprocessor_local *local)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01288">stasis.c:1288</a></div></div>
<div class="ttc" id="stasis_8h_html_ad7a9331334e3c57d1718475864636d1c"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ad7a9331334e3c57d1718475864636d1c">stasis_message_type_available_formatters</a></div><div class="ttdeci">enum stasis_subscription_message_formatters stasis_message_type_available_formatters(const struct stasis_message_type *message_type)</div><div class="ttdoc">Get a bitmap of available formatters for a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00114">stasis_message.c:114</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814ac2632bea7a56a41dbe1f53995f59f78e"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814ac2632bea7a56a41dbe1f53995f59f78e">STASIS_SUBSCRIPTION_FORMATTER_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00312">stasis.h:312</a></div></div>
<div class="ttc" id="stasis_8c_html_ab44c4bf7cb1df892584c436f1855ac28"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ab44c4bf7cb1df892584c436f1855ac28">subscription_invoke</a></div><div class="ttdeci">static void subscription_invoke(struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Invoke the subscription&amp;#39;s callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00756">stasis.c:756</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="stasis_8c_html_ac6b044b5df7fa5891d57de64a2e18cbf"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ac6b044b5df7fa5891d57de64a2e18cbf">dispatch_exec_async</a></div><div class="ttdeci">static int dispatch_exec_async(struct ast_taskprocessor_local *local)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01261">stasis.c:1261</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a38736c464d6ded1bd9c2570a59dca6b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38736c464d6ded1bd9c2570a59dca6b3">&#9670;&nbsp;</a></span>forward_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void forward_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01538">1538</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01533">stasis_forward::from_topic</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01535">stasis_forward::to_topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;{</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *forward = obj;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">from_topic</a>);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">from_topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">to_topic</a>);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">to_topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__forward_html_a08704f04d89d378499fb30161d4772a3"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">stasis_forward::from_topic</a></div><div class="ttdeci">struct stasis_topic * from_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01533">stasis.c:1533</a></div></div>
<div class="ttc" id="structstasis__forward_html_a1cdfe3ae76a2e8b2b1c8083120f26100"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">stasis_forward::to_topic</a></div><div class="ttdeci">struct stasis_topic * to_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01535">stasis.c:1535</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7d9bff23ceccb19080696e3b48506aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d9bff23ceccb19080696e3b48506aa">&#9670;&nbsp;</a></span>internal_stasis_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* internal_stasis_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d79/stasis_8h.html#a2b7854b4fb538be6f885943a24d60c8f">stasis_subscription_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>needs_mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_thread_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a subscription. </p>
<p>In addition to being AO2 managed memory (requiring an <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> to free up this reference), the subscription must be explicitly unsubscribed from its topic using <a class="el" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b" title="Cancel a subscription. ">stasis_unsubscribe()</a>.</p>
<p>The invocations of the callback are serialized, but may not always occur on the same thread. The invocation order of different subscriptions is unspecified.</p>
<p>Note: modules outside of Stasis should use <a class="el" href="../../dd/d79/stasis_8h.html#ae3fe7fe099389094244002113814ec23">stasis_subscribe</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic to subscribe to. </td></tr>
    <tr><td class="paramname">callback</td><td>Callback function for subscription messages. </td></tr>
    <tr><td class="paramname">data</td><td>Data to be passed to the callback, in addition to the message. </td></tr>
    <tr><td class="paramname">needs_mailbox</td><td>Determines whether or not the subscription requires a mailbox. Subscriptions with mailboxes will be delivered on some non-publisher thread; subscriptions without mailboxes will be delivered on the publisher thread. </td></tr>
    <tr><td class="paramname">use_thread_pool</td><td>Use the thread pool for the subscription. This is only relevant if <code>needs_mailbox</code> is non-zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> object. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">858</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00409">ao2_t_alloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01295">ast_taskprocessor_build_name()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00060">AST_TASKPROCESSOR_MAX_NAME</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01101">ast_taskprocessor_set_local()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01432">ast_threadpool_serializer()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00689">stasis_subscription::callback</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00691">stasis_subscription::data</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00694">stasis_subscription::join_cond</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00687">stasis_subscription::mailbox</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01648">send_subscription_subscribe()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00298">STASIS_SUBSCRIPTION_FILTER_NONE</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00312">STASIS_SUBSCRIPTION_FORMATTER_NONE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00823">stasis_subscription_statistics_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00715">subscription_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01203">topic_add_subscription()</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00075">TPS_REF_DEFAULT</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00944">__stasis_subscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00955">__stasis_subscribe_pool()</a>, and <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordflow">if</span> (!topic) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="comment">/* The ao2 lock is used for join_cond. */</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   sub = <a class="code" href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a>(<span class="keyword">sizeof</span>(*sub), <a class="code" href="../../d0/df4/stasis_8c.html#a8204d4969e6aeb9c8494b4a3fb40061b">subscription_dtor</a>, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(topic));</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, <span class="stringliteral">&quot;%s:%s-%d&quot;</span>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(topic), <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;topic-&gt;subscriber_id, +1));</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   sub-&gt;statistics = <a class="code" href="../../d0/df4/stasis_8c.html#aa62ce8a618ee8efe43cddcbfb6be1edc">stasis_subscription_statistics_create</a>(sub, needs_mailbox, use_thread_pool, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, func);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0 || !sub-&gt;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>) {</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, <span class="stringliteral">&quot;%s-%d&quot;</span>, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(topic), <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;topic-&gt;subscriber_id, +1));</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keywordflow">if</span> (needs_mailbox) {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordtype">char</span> tps_name[<a class="code" href="../../d0/d1e/taskprocessor_8h.html#adf4c5a237767eb6db5b1db41ccdfc689">AST_TASKPROCESSOR_MAX_NAME</a> + 1];</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="comment">/* Create name with seq number appended. */</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a>(tps_name, <span class="keyword">sizeof</span>(tps_name), <span class="stringliteral">&quot;stasis/%c:%s&quot;</span>,</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;         use_thread_pool ? <span class="charliteral">&#39;p&#39;</span> : <span class="charliteral">&#39;m&#39;</span>,</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;         <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(topic));</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">       * With a small number of subscribers, a thread-per-sub is</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">       * acceptable. For a large number of subscribers, a thread</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">       * pool should be used.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">if</span> (use_thread_pool) {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;         sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a> = <a class="code" href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a>(tps_name, <a class="code" href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a>);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;         sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a> = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(tps_name, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">if</span> (!sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a208c9f9b930e83c7bdb833c66f13d5e8">ast_taskprocessor_set_local</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>, sub);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="comment">/* Taskprocessor has a reference */</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, +1);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, +1);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a8ef8d0e48190325c057f35cf776673e7">callback</a> = <a class="code" href="../../d9/de4/structstasis__subscription.html#a8ef8d0e48190325c057f35cf776673e7">callback</a>;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">join_cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   sub-&gt;filter = <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a98a891164b5e65d1d6377ab58321621f">STASIS_SUBSCRIPTION_FILTER_NONE</a>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;sub-&gt;accepted_message_types, 0);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   sub-&gt;accepted_formatters = <a class="code" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814ac2632bea7a56a41dbe1f53995f59f78e">STASIS_SUBSCRIPTION_FORMATTER_NONE</a>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a>(topic, sub) != 0) {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#aa5c2e53c98f40dbe0f25e418a8974878">send_subscription_subscribe</a>(topic, sub);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ab47623e207bf2cdd0edfa613d91894e5"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a></div><div class="ttdeci">void ast_taskprocessor_build_name(char *buf, unsigned int size, const char *format,...)</div><div class="ttdoc">Build a taskprocessor name with a sequence number on the end. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01295">taskprocessor.c:1295</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a98a891164b5e65d1d6377ab58321621f"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a98a891164b5e65d1d6377ab58321621f">STASIS_SUBSCRIPTION_FILTER_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00298">stasis.h:298</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad57326008c326db88dc36779741622b8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a></div><div class="ttdeci">#define ao2_t_alloc(data_size, destructor_fn, debug_msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00409">astobj2.h:409</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6e86f51d34ae17fd6f38b8379883bf87"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a></div><div class="ttdeci">struct ast_taskprocessor * ast_threadpool_serializer(const char *name, struct ast_threadpool *pool)</div><div class="ttdoc">Serialized execution of tasks within a ast_threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l01432">threadpool.c:1432</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a23bbead00056908b13511b20fd390bf6"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">stasis_subscription::join_cond</a></div><div class="ttdeci">ast_cond_t join_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00694">stasis.c:694</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7ae248d04bb7a6b5e0906e4906af4ee35a">TPS_REF_DEFAULT</a></div><div class="ttdoc">return a reference to a taskprocessor, create one if it does not exist </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00075">taskprocessor.h:75</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_adf4c5a237767eb6db5b1db41ccdfc689"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#adf4c5a237767eb6db5b1db41ccdfc689">AST_TASKPROCESSOR_MAX_NAME</a></div><div class="ttdeci">#define AST_TASKPROCESSOR_MAX_NAME</div><div class="ttdoc">Suggested maximum taskprocessor name length (less null terminator). </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00060">taskprocessor.h:60</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="stasis_8c_html_aa5c2e53c98f40dbe0f25e418a8974878"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aa5c2e53c98f40dbe0f25e418a8974878">send_subscription_subscribe</a></div><div class="ttdeci">static void send_subscription_subscribe(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01648">stasis.c:1648</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">stasis_subscription::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00691">stasis.c:691</a></div></div>
<div class="ttc" id="structstasis__subscription_html_aa4d485b7c131a7229ae4f1054b2f506d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">stasis_subscription::mailbox</a></div><div class="ttdeci">struct ast_taskprocessor * mailbox</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00687">stasis.c:687</a></div></div>
<div class="ttc" id="stasis_8c_html_a79e3a46cca0390255f951e98052a6508"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a></div><div class="ttdeci">static int topic_add_subscription(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdoc">Add a subscriber to a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01203">stasis.c:1203</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a8ef8d0e48190325c057f35cf776673e7"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a8ef8d0e48190325c057f35cf776673e7">stasis_subscription::callback</a></div><div class="ttdeci">stasis_subscription_cb callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00689">stasis.c:689</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a208c9f9b930e83c7bdb833c66f13d5e8"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a208c9f9b930e83c7bdb833c66f13d5e8">ast_taskprocessor_set_local</a></div><div class="ttdeci">void ast_taskprocessor_set_local(struct ast_taskprocessor *tps, void *local_data)</div><div class="ttdoc">Sets the local data associated with a taskprocessor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01101">taskprocessor.c:1101</a></div></div>
<div class="ttc" id="stasis_8c_html_aa62ce8a618ee8efe43cddcbfb6be1edc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aa62ce8a618ee8efe43cddcbfb6be1edc">stasis_subscription_statistics_create</a></div><div class="ttdeci">static struct stasis_subscription_statistics * stasis_subscription_statistics_create(struct stasis_subscription *sub, int needs_mailbox, int use_thread_pool, const char *file, int lineno, const char *func)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00823">stasis.c:823</a></div></div>
<div class="ttc" id="stasis_8h_html_a5ae672fb0f772d0e3066fa4c29c41814ac2632bea7a56a41dbe1f53995f59f78e"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814ac2632bea7a56a41dbe1f53995f59f78e">STASIS_SUBSCRIPTION_FORMATTER_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00312">stasis.h:312</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="stasis_8c_html_a8204d4969e6aeb9c8494b4a3fb40061b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a8204d4969e6aeb9c8494b4a3fb40061b">subscription_dtor</a></div><div class="ttdeci">static void subscription_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00715">stasis.c:715</a></div></div>
<div class="ttc" id="stasis_8c_html_a6dc11fc8f94173cc1af379b74a096abd"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a></div><div class="ttdeci">static struct ast_threadpool * threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00308">stasis.c:308</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a786a897527c7c44864c2c9f289a90c73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a786a897527c7c44864c2c9f289a90c73">&#9670;&nbsp;</a></span>link_topic_proxy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int link_topic_proxy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>detail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00501">501</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00557">ao2_t_weakproxy_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00586">ao2_t_weakproxy_set_object</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00931">ao2_weakproxy_subscribe()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00720">ao2_wrlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00406">topic_proxy::buf</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00404">topic_proxy::creationtime</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00402">topic_proxy::detail</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00401">topic_proxy::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00413">proxy_dtor()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00623">stasis_topic_get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">stasis_topic_create_with_detail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a> *proxy;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* topic_tmp;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <span class="keywordtype">size_t</span> detail_len;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="keywordflow">if</span> (!topic || !<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> || !strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) || !detail) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3498e30d6154a052e7b64b7a96da8b4b">ao2_wrlock</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   topic_tmp = <a class="code" href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keywordflow">if</span> (topic_tmp) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;The same topic is already exist. name: %s\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_tmp, -1);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   detail_len = strlen(detail) + 1;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   proxy = <a class="code" href="../../d5/da5/astobj2_8h.html#a927c9a5bce40a0164c297325eea4a562">ao2_t_weakproxy_alloc</a>(</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;         <span class="keyword">sizeof</span>(*proxy) + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) + 1 + detail_len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keywordflow">if</span> (!proxy) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="comment">/* set the proxy info */</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a> = proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a103a957b017f6b717767bba130a02694">buf</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a8e0df5282236baaaf945d6c9433ef9af">detail</a> = proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a> + strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) + 1;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   strcpy(proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a8e0df5282236baaaf945d6c9433ef9af">detail</a>, detail, detail_len); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="comment">/* We have exclusive access to proxy, no need for locking here. */</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#afd157ff946d91f29f2ec5fa43a81b9c1">ao2_t_weakproxy_set_object</a>(proxy, topic, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>, <span class="stringliteral">&quot;weakproxy link&quot;</span>)) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(proxy);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a0f7c2d3037d7c36c8c88fdb2cb65c6e1">ao2_weakproxy_subscribe</a>(proxy, <a class="code" href="../../d0/df4/stasis_8c.html#a5edbf1e6a7f617d0fef57a1a7ef93883">proxy_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>)) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(proxy);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="comment">/* setting the topic point to the proxy */</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   topic-&gt;name = proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   topic-&gt;detail = proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a8e0df5282236baaaf945d6c9433ef9af">detail</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   topic-&gt;creationtime = &amp;(proxy-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">creationtime</a>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>, proxy, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(proxy, -1);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="ttc" id="structtopic__proxy_html"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html">topic_proxy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00398">stasis.c:398</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a8e0df5282236baaaf945d6c9433ef9af"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a8e0df5282236baaaf945d6c9433ef9af">topic_proxy::detail</a></div><div class="ttdeci">char * detail</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00402">stasis.c:402</a></div></div>
<div class="ttc" id="astobj2_8h_html_a0f7c2d3037d7c36c8c88fdb2cb65c6e1"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a0f7c2d3037d7c36c8c88fdb2cb65c6e1">ao2_weakproxy_subscribe</a></div><div class="ttdeci">int ao2_weakproxy_subscribe(void *weakproxy, ao2_weakproxy_notification_cb cb, void *data, int flags)</div><div class="ttdoc">Request notification when weakproxy points to NULL. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00931">astobj2.c:931</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3498e30d6154a052e7b64b7a96da8b4b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3498e30d6154a052e7b64b7a96da8b4b">ao2_wrlock</a></div><div class="ttdeci">#define ao2_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00720">astobj2.h:720</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">topic_proxy::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00401">stasis.c:401</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a103a957b017f6b717767bba130a02694">topic_proxy::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00406">stasis.c:406</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a298ce3dfc9b5b8a8351e8ed103aa7e5c"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a298ce3dfc9b5b8a8351e8ed103aa7e5c">topic_proxy::creationtime</a></div><div class="ttdeci">struct timeval creationtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00404">stasis.c:404</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_afd157ff946d91f29f2ec5fa43a81b9c1"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#afd157ff946d91f29f2ec5fa43a81b9c1">ao2_t_weakproxy_set_object</a></div><div class="ttdeci">#define ao2_t_weakproxy_set_object(weakproxy, obj, flags, tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00586">astobj2.h:586</a></div></div>
<div class="ttc" id="stasis_8c_html_ae14b5f72d5278c2e22621748fba0610b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></div><div class="ttdeci">struct ao2_container * topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00396">stasis.c:396</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="stasis_8c_html_a5edbf1e6a7f617d0fef57a1a7ef93883"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a5edbf1e6a7f617d0fef57a1a7ef93883">proxy_dtor</a></div><div class="ttdeci">static void proxy_dtor(void *weakproxy, void *container)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00413">stasis.c:413</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="astobj2_8h_html_a927c9a5bce40a0164c297325eea4a562"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a927c9a5bce40a0164c297325eea4a562">ao2_t_weakproxy_alloc</a></div><div class="ttdeci">#define ao2_t_weakproxy_alloc(data_size, destructor_fn, tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00557">astobj2.h:557</a></div></div>
<div class="ttc" id="stasis_8c_html_a02f065d129b21343b13a9eeb1c740771"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_get(const char *name)</div><div class="ttdoc">Get a topic of the given name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00623">stasis.c:623</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76471c8c470fe17bf2d9c66080039d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76471c8c470fe17bf2d9c66080039d8a">&#9670;&nbsp;</a></span>multi_object_blob_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void multi_object_blob_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01959">1959</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01951">ast_multi_object_blob::blob</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01364">STASIS_UMOS_MAX</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01975">ast_multi_object_blob_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;{</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a> *multi = obj;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="keywordflow">for</span> (type = 0; type &lt; <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gad6616af7b6415ff5186c87a0236df462">STASIS_UMOS_MAX</a>; ++<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;multi-&gt;snapshots[type]); ++i) {</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;multi-&gt;snapshots[type], i));</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;multi-&gt;snapshots[type]);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   }</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(multi-&gt;<a class="code" href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gad6616af7b6415ff5186c87a0236df462"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gad6616af7b6415ff5186c87a0236df462">STASIS_UMOS_MAX</a></div><div class="ttdeci">#define STASIS_UMOS_MAX</div><div class="ttdoc">Number of snapshot types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01364">stasis.h:1364</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__multi__object__blob_html"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a></div><div class="ttdoc">A multi object blob data structure to carry user event stasis messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01950">stasis.c:1950</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__multi__object__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_multi_object_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01951">stasis.c:1951</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5df2223962bc8eda9be972c8746f8328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df2223962bc8eda9be972c8746f8328">&#9670;&nbsp;</a></span>multi_object_blob_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a>* multi_object_blob_to_ami </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02096">2096</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00223">ast_manager_build_bridge_state_string_prefix()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00487">ast_manager_build_channel_state_string_prefix()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01359">STASIS_UMOS_BRIDGE</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01358">STASIS_UMOS_CHANNEL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01360">STASIS_UMOS_ENDPOINT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01364">STASIS_UMOS_MAX</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02155">multi_user_event_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;{</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *ami_str=<a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *ami_snapshot;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a> *multi = obj;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga4cf6fe670f1f46e8db561d407b694d4d">stasis_user_multi_object_snapshot_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;   <span class="keywordflow">if</span> (!ami_str) {</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keywordflow">if</span> (!multi) {</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ami_str);</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;   }</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;   <span class="keywordflow">for</span> (type = 0; type &lt; <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gad6616af7b6415ff5186c87a0236df462">STASIS_UMOS_MAX</a>; ++<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;multi-&gt;snapshots[type]); ++i) {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;         <span class="keywordtype">void</span> *snapshot = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;multi-&gt;snapshots[type], i);</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;         ami_snapshot = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;         <span class="keywordflow">if</span> (i &gt; 0) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;name, <span class="stringliteral">&quot;%d&quot;</span>, i + 1);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;         }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;         <span class="keywordflow">switch</span> (type) {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da679186d0a76e3ed91a98c2289921485a">STASIS_UMOS_CHANNEL</a>:</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            ami_snapshot = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(snapshot, name ?: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da30a07e65360c3484148ca1750067fe87">STASIS_UMOS_BRIDGE</a>:</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            ami_snapshot = <a class="code" href="../../db/d45/manager_8h.html#ae848cf7930ca566b76a13a4b3b7e0466">ast_manager_build_bridge_state_string_prefix</a>(snapshot, name ?: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da1f02519f8ea66bad627d5797b0c6b0ce">STASIS_UMOS_ENDPOINT</a>:</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            <span class="comment">/* currently not sending endpoint snapshots to AMI */</span></div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;         }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;         <span class="keywordflow">if</span> (ami_snapshot) {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;ami_str, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(ami_snapshot));</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ami_snapshot);</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;         }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(name);</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;   }</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   <span class="keywordflow">return</span> ami_str;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gad6616af7b6415ff5186c87a0236df462"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gad6616af7b6415ff5186c87a0236df462">STASIS_UMOS_MAX</a></div><div class="ttdeci">#define STASIS_UMOS_MAX</div><div class="ttdoc">Number of snapshot types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01364">stasis.h:1364</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="manager_8h_html_ab71472ea55b4114f460a4459e3dcd18b"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string_prefix(const struct ast_channel_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00487">manager_channels.c:487</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="manager_8h_html_ae848cf7930ca566b76a13a4b3b7e0466"><div class="ttname"><a href="../../db/d45/manager_8h.html#ae848cf7930ca566b76a13a4b3b7e0466">ast_manager_build_bridge_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_bridge_state_string_prefix(const struct ast_bridge_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a bridge snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d10/manager__bridges_8c_source.html#l00223">manager_bridges.c:223</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gga4cf6fe670f1f46e8db561d407b694d4da30a07e65360c3484148ca1750067fe87"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da30a07e65360c3484148ca1750067fe87">STASIS_UMOS_BRIDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01359">stasis.h:1359</a></div></div>
<div class="ttc" id="structast__multi__object__blob_html"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a></div><div class="ttdoc">A multi object blob data structure to carry user event stasis messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01950">stasis.c:1950</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga4cf6fe670f1f46e8db561d407b694d4d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga4cf6fe670f1f46e8db561d407b694d4d">stasis_user_multi_object_snapshot_type</a></div><div class="ttdeci">stasis_user_multi_object_snapshot_type</div><div class="ttdoc">Object type code for multi user object snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01357">stasis.h:1357</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gga4cf6fe670f1f46e8db561d407b694d4da679186d0a76e3ed91a98c2289921485a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da679186d0a76e3ed91a98c2289921485a">STASIS_UMOS_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01358">stasis.h:1358</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gga4cf6fe670f1f46e8db561d407b694d4da1f02519f8ea66bad627d5797b0c6b0ce"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da1f02519f8ea66bad627d5797b0c6b0ce">STASIS_UMOS_ENDPOINT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01360">stasis.h:1360</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0770e6bfce19c8fee06b15270f94816e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0770e6bfce19c8fee06b15270f94816e">&#9670;&nbsp;</a></span>multi_user_event_to_ami()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a>* multi_user_event_to_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02155">2155</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00273">ast_json_string_get()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09727">ast_manager_event_blob_create()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01821">ast_manager_str_from_json_object()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01951">ast_multi_object_blob::blob</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00077">EVENT_FLAG_USER</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02096">multi_object_blob_to_ami()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02147">userevent_exclusion_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02304">declined_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;{</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, object_string, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, body, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a> *multi = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *eventname;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;   eventname = <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(multi-&gt;<a class="code" href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;eventname&quot;</span>));</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   body = <a class="code" href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a>(multi-&gt;<a class="code" href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <a class="code" href="../../d0/df4/stasis_8c.html#ad9ad2d54eb7d929aa7b34751f6b07f42">userevent_exclusion_cb</a>);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   object_string = <a class="code" href="../../d0/df4/stasis_8c.html#a5df2223962bc8eda9be972c8746f8328">multi_object_blob_to_ami</a>(multi);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <span class="keywordflow">if</span> (!object_string || !body) {</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#acc12c2bc03dce67ddd1590d67ab11f4d">EVENT_FLAG_USER</a>, <span class="stringliteral">&quot;UserEvent&quot;</span>,</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="stringliteral">&quot;UserEvent: %s\r\n&quot;</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(object_string),</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      eventname,</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(body));</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga2a7a78b91c9ba54f89c9b5a9e7435027"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga2a7a78b91c9ba54f89c9b5a9e7435027">ast_manager_str_from_json_object</a></div><div class="ttdeci">struct ast_str * ast_manager_str_from_json_object(struct ast_json *blob, key_exclusion_cb exclusion_cb)</div><div class="ttdoc">Convert a JSON object into an AMI compatible string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01821">manager.c:1821</a></div></div>
<div class="ttc" id="structast__multi__object__blob_html"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a></div><div class="ttdoc">A multi object blob data structure to carry user event stasis messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01950">stasis.c:1950</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="stasis_8c_html_ad9ad2d54eb7d929aa7b34751f6b07f42"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ad9ad2d54eb7d929aa7b34751f6b07f42">userevent_exclusion_cb</a></div><div class="ttdeci">static int userevent_exclusion_cb(const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02147">stasis.c:2147</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="manager_8h_html_acc12c2bc03dce67ddd1590d67ab11f4d"><div class="ttname"><a href="../../db/d45/manager_8h.html#acc12c2bc03dce67ddd1590d67ab11f4d">EVENT_FLAG_USER</a></div><div class="ttdeci">#define EVENT_FLAG_USER</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00077">manager.h:77</a></div></div>
<div class="ttc" id="stasis_8c_html_a5df2223962bc8eda9be972c8746f8328"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a5df2223962bc8eda9be972c8746f8328">multi_object_blob_to_ami</a></div><div class="ttdeci">static struct ast_str * multi_object_blob_to_ami(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02096">stasis.c:2096</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="structast__multi__object__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_multi_object_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01951">stasis.c:1951</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44b9b12f84af401e4511c7c90e2038f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44b9b12f84af401e4511c7c90e2038f4">&#9670;&nbsp;</a></span>multi_user_event_to_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/da1/structast__json.html">ast_json</a>* multi_user_event_to_json </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d45/structstasis__message__sanitizer.html">stasis_message_sanitizer</a> *&#160;</td>
          <td class="paramname"><em>sanitize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02045">2045</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00712">ast_bridge_snapshot_to_json()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01255">ast_channel_snapshot_to_json()</a>, <a class="el" href="../../d3/daf/stasis__endpoints_8c_source.html#l00398">ast_endpoint_snapshot_to_json()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00389">ast_json_object_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00397">ast_json_object_get()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00404">ast_json_object_set()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00067">ast_json_ref()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00268">ast_json_string_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00649">ast_json_timeval()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01951">ast_multi_object_blob::blob</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message_timestamp()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01359">STASIS_UMOS_BRIDGE</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01358">STASIS_UMOS_CHANNEL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01360">STASIS_UMOS_ENDPOINT</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01364">STASIS_UMOS_MAX</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02304">declined_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;{</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a> *multi = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob = multi-&gt;<a class="code" href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>timeval *tv = <a class="code" href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a>(message);</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga4cf6fe670f1f46e8db561d407b694d4d">stasis_user_multi_object_snapshot_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   out = <a class="code" href="../../d4/d05/json_8h.html#a5892d6cd943e00556180fcf15d30788e">ast_json_object_create</a>();</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;   <span class="keywordflow">if</span> (!out) {</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;   }</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a>(<span class="stringliteral">&quot;ChannelUserevent&quot;</span>));</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;timestamp&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a>(*tv, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;eventname&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;eventname&quot;</span>)));</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, <span class="stringliteral">&quot;userevent&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a>(blob));</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   <span class="keywordflow">for</span> (type = 0; type &lt; <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gad6616af7b6415ff5186c87a0236df462">STASIS_UMOS_MAX</a>; ++<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;multi-&gt;snapshots[type]); ++i) {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;         <span class="keywordtype">void</span> *snapshot = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;multi-&gt;snapshots[type], i);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;         <span class="keywordflow">switch</span> (type) {</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da679186d0a76e3ed91a98c2289921485a">STASIS_UMOS_CHANNEL</a>:</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            json_object = <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a>(snapshot, sanitize);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            name = <span class="stringliteral">&quot;channel&quot;</span>;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da30a07e65360c3484148ca1750067fe87">STASIS_UMOS_BRIDGE</a>:</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            json_object = <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a>(snapshot, sanitize);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            name = <span class="stringliteral">&quot;bridge&quot;</span>;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da1f02519f8ea66bad627d5797b0c6b0ce">STASIS_UMOS_ENDPOINT</a>:</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            json_object = <a class="code" href="../../d7/d44/stasis__endpoints_8h.html#a1a645ca4cff86118f533143b7b950e63">ast_endpoint_snapshot_to_json</a>(snapshot, sanitize);</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            name = <span class="stringliteral">&quot;endpoint&quot;</span>;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;         }</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;         <span class="keywordflow">if</span> (json_object) {</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(out, name, json_object);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;         }</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   }</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="json_8h_html_a0ca956b7df20127f7e38993c3c06cb2c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a0ca956b7df20127f7e38993c3c06cb2c">ast_json_ref</a></div><div class="ttdeci">struct ast_json * ast_json_ref(struct ast_json *value)</div><div class="ttdoc">Increase refcount on value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00067">json.c:67</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gad6616af7b6415ff5186c87a0236df462"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gad6616af7b6415ff5186c87a0236df462">STASIS_UMOS_MAX</a></div><div class="ttdeci">#define STASIS_UMOS_MAX</div><div class="ttdoc">Number of snapshot types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01364">stasis.h:1364</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gga4cf6fe670f1f46e8db561d407b694d4da30a07e65360c3484148ca1750067fe87"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da30a07e65360c3484148ca1750067fe87">STASIS_UMOS_BRIDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01359">stasis.h:1359</a></div></div>
<div class="ttc" id="structast__multi__object__blob_html"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html">ast_multi_object_blob</a></div><div class="ttdoc">A multi object blob data structure to carry user event stasis messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01950">stasis.c:1950</a></div></div>
<div class="ttc" id="json_8h_html_adc52f8d76b7fdd0c8d12987981fd5bf5"><div class="ttname"><a href="../../d4/d05/json_8h.html#adc52f8d76b7fdd0c8d12987981fd5bf5">ast_json_string_create</a></div><div class="ttdeci">struct ast_json * ast_json_string_create(const char *value)</div><div class="ttdoc">Construct a JSON string from value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00268">json.c:268</a></div></div>
<div class="ttc" id="stasis_8h_html_a0a9c10eadd9db34f8c0b19619752ea93"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a0a9c10eadd9db34f8c0b19619752ea93">stasis_message_timestamp</a></div><div class="ttdeci">const struct timeval * stasis_message_timestamp(const struct stasis_message *msg)</div><div class="ttdoc">Get the time when a message was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00203">stasis_message.c:203</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga4cf6fe670f1f46e8db561d407b694d4d"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga4cf6fe670f1f46e8db561d407b694d4d">stasis_user_multi_object_snapshot_type</a></div><div class="ttdeci">stasis_user_multi_object_snapshot_type</div><div class="ttdoc">Object type code for multi user object snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01357">stasis.h:1357</a></div></div>
<div class="ttc" id="json_8h_html_a2b7c72e2e3ab2634d8a4f8b708440d95"><div class="ttname"><a href="../../d4/d05/json_8h.html#a2b7c72e2e3ab2634d8a4f8b708440d95">ast_json_timeval</a></div><div class="ttdeci">struct ast_json * ast_json_timeval(const struct timeval tv, const char *zone)</div><div class="ttdoc">Construct a timeval as JSON. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00649">json.c:649</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a7571e6d10d716525aaa64b1f6583979b"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a7571e6d10d716525aaa64b1f6583979b">ast_channel_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_channel_snapshot_to_json(const struct ast_channel_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_channel_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01255">stasis_channels.c:1255</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="json_8h_html_a5892d6cd943e00556180fcf15d30788e"><div class="ttname"><a href="../../d4/d05/json_8h.html#a5892d6cd943e00556180fcf15d30788e">ast_json_object_create</a></div><div class="ttdeci">struct ast_json * ast_json_object_create(void)</div><div class="ttdoc">Create a new JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00389">json.c:389</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_a76837dd4c259276cc59d163e4bc2a3b5"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a76837dd4c259276cc59d163e4bc2a3b5">ast_bridge_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_bridge_snapshot_to_json(const struct ast_bridge_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_bridge_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00712">stasis_bridges.c:712</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__multi__object__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../d4/d38/structast__multi__object__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_multi_object_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01951">stasis.c:1951</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gga4cf6fe670f1f46e8db561d407b694d4da679186d0a76e3ed91a98c2289921485a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da679186d0a76e3ed91a98c2289921485a">STASIS_UMOS_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01358">stasis.h:1358</a></div></div>
<div class="ttc" id="stasis__endpoints_8h_html_a1a645ca4cff86118f533143b7b950e63"><div class="ttname"><a href="../../d7/d44/stasis__endpoints_8h.html#a1a645ca4cff86118f533143b7b950e63">ast_endpoint_snapshot_to_json</a></div><div class="ttdeci">struct ast_json * ast_endpoint_snapshot_to_json(const struct ast_endpoint_snapshot *snapshot, const struct stasis_message_sanitizer *sanitize)</div><div class="ttdoc">Build a JSON object from a ast_endpoint_snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/daf/stasis__endpoints_8c_source.html#l00398">stasis_endpoints.c:398</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gga4cf6fe670f1f46e8db561d407b694d4da1f02519f8ea66bad627d5797b0c6b0ce"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gga4cf6fe670f1f46e8db561d407b694d4da1f02519f8ea66bad627d5797b0c6b0ce">STASIS_UMOS_ENDPOINT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01360">stasis.h:1360</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5edbf1e6a7f617d0fef57a1a7ef93883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5edbf1e6a7f617d0fef57a1a7ef93883">&#9670;&nbsp;</a></span>proxy_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void proxy_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>weakproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>container</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00413">413</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01203">topic_add_subscription()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01231">topic_remove_subscription()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00501">link_topic_proxy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(<a class="code" href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a>, weakproxy);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="ttc" id="res__fax_8c_html_a7ea220e4d14b05876af4430e9832ce47"><div class="ttname"><a href="../../d0/d60/res__fax_8c.html#a7ea220e4d14b05876af4430e9832ce47">container</a></div><div class="ttdeci">struct ao2_container * container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d60/res__fax_8c_source.html#l00502">res_fax.c:502</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95001d504d94709275db7e173ce31b43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95001d504d94709275db7e173ce31b43">&#9670;&nbsp;</a></span>publish_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sync_sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01432">1432</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">dispatch_message()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00343">stasis_message_type_statistics::message_type</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00047">message_type_id</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00347">message_type_statistics_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00339">stasis_message_type_statistics::published</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message_type_id()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00644">stasis_topic_subscribers()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00341">stasis_message_type_statistics::unused</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01516">stasis_publish_sync()</a>.</p>
<div class="fragment"><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;{</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dispatched = 0;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d2/db9/stasis__message_8c.html#a744ceb580c661e018a750bee94f2a1c0">message_type_id</a> = <a class="code" href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a>(<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message));</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordtype">long</span> elapsed;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topic != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(message != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a>);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   <span class="keywordflow">if</span> (message_type_id &gt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;message_type_statistics)) {</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a> new_statistics = {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;         .<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a4bb7cb4220849b6b01585abfeac40731">published</a> = 0,</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      };</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;message_type_statistics, message_type_id, new_statistics)) {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a>);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   statistics = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;message_type_statistics, message_type_id);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#add6b02fb3f4bece79957e0b9a1355440">message_type</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a>);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a4bb7cb4220849b6b01585abfeac40731">published</a>, +1);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="comment">/* If there are no subscribers don&#39;t bother */</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/df4/stasis_8c.html#a461ec3c31a2f54d7c001b0ead6c7313d">stasis_topic_subscribers</a>(topic)) {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a2ff411b23972f6578df341c33895d3e2">unused</a>, +1);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;topic-&gt;statistics-&gt;messages_not_dispatched, +1);</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   }</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">    * The topic may be unref&#39;ed by the subscription invocation.</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">    * Make sure we hold onto a reference while dispatching.</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, +1);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(topic);</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;subscribers); ++i) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topic-&gt;subscribers, i);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(sub != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      dispatched += <a class="code" href="../../d0/df4/stasis_8c.html#aae9eb64c90ceb85938c512e2f8bc488a">dispatch_message</a>(sub, message, (sub == sync_sub));</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   }</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(topic);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordflow">if</span> (elapsed &gt; topic-&gt;statistics-&gt;highest_time_dispatched) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      topic-&gt;statistics-&gt;highest_time_dispatched = elapsed;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="keywordflow">if</span> (elapsed &lt; topic-&gt;statistics-&gt;lowest_time_dispatched) {</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      topic-&gt;statistics-&gt;lowest_time_dispatched = elapsed;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   }</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keywordflow">if</span> (dispatched) {</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;topic-&gt;statistics-&gt;messages_dispatched, +1);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a2ff411b23972f6578df341c33895d3e2">unused</a>, +1);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;topic-&gt;statistics-&gt;messages_not_dispatched, +1);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8h_html_aaa72759806ee4118a78b9d1373c633d2"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a></div><div class="ttdeci">int stasis_message_type_id(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the id of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message.c:109</a></div></div>
<div class="ttc" id="stasis__message_8c_html_a744ceb580c661e018a750bee94f2a1c0"><div class="ttname"><a href="../../d2/db9/stasis__message_8c.html#a744ceb580c661e018a750bee94f2a1c0">message_type_id</a></div><div class="ttdeci">static int message_type_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00047">stasis_message.c:47</a></div></div>
<div class="ttc" id="stasis_8c_html_a461ec3c31a2f54d7c001b0ead6c7313d"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a461ec3c31a2f54d7c001b0ead6c7313d">stasis_topic_subscribers</a></div><div class="ttdeci">size_t stasis_topic_subscribers(const struct stasis_topic *topic)</div><div class="ttdoc">Return the number of subscribers of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00644">stasis.c:644</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html_a2ff411b23972f6578df341c33895d3e2"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html#a2ff411b23972f6578df341c33895d3e2">stasis_message_type_statistics::unused</a></div><div class="ttdeci">int unused</div><div class="ttdoc">The number of messages of this that did not reach a subscriber. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00341">stasis.c:341</a></div></div>
<div class="ttc" id="stasis_8c_html_a87031d017d60611ca33ad816139d0e06"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a></div><div class="ttdeci">static ast_mutex_t message_type_statistics_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00347">stasis.c:347</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="stasis_8c_html_aae9eb64c90ceb85938c512e2f8bc488a"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aae9eb64c90ceb85938c512e2f8bc488a">dispatch_message</a></div><div class="ttdeci">static unsigned int dispatch_message(struct stasis_subscription *sub, struct stasis_message *message, int synchronous)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01314">stasis.c:1314</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00337">stasis.c:337</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html_a4bb7cb4220849b6b01585abfeac40731"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html#a4bb7cb4220849b6b01585abfeac40731">stasis_message_type_statistics::published</a></div><div class="ttdeci">int published</div><div class="ttdoc">The number of messages of this published. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00339">stasis.c:339</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html_add6b02fb3f4bece79957e0b9a1355440"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html#add6b02fb3f4bece79957e0b9a1355440">stasis_message_type_statistics::message_type</a></div><div class="ttdeci">struct stasis_message_type * message_type</div><div class="ttdoc">The stasis message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00343">stasis.c:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5c2e53c98f40dbe0f25e418a8974878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c2e53c98f40dbe0f25e418a8974878">&#9670;&nbsp;</a></span>send_subscription_subscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_subscription_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01648">1648</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01152">stasis_subscription_is_subscribed()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01627">subscription_change_alloc()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">subscription_invoke()</a>.</p>
<div class="fragment"><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;{</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="comment">/* This assumes that we have already unsubscribed */</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a>(sub));</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>()) {</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   change = <a class="code" href="../../d0/df4/stasis_8c.html#a915d63fc715772a167a2308d86ab7723">subscription_change_alloc</a>(topic, sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, <span class="stringliteral">&quot;Subscribe&quot;</span>);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="keywordflow">if</span> (!change) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;   }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>(), change);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(change);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   }</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, msg);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(change);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a915d63fc715772a167a2308d86ab7723"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a915d63fc715772a167a2308d86ab7723">subscription_change_alloc</a></div><div class="ttdeci">static struct stasis_subscription_change * subscription_change_alloc(struct stasis_topic *topic, const char *uniqueid, const char *description)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01627">stasis.c:1627</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="stasis_8c_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis_8c_html_acd5bedbb2212956dac77be47dceef510"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a></div><div class="ttdeci">int stasis_subscription_is_subscribed(const struct stasis_subscription *sub)</div><div class="ttdoc">Returns whether a subscription is currently subscribed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01152">stasis.c:1152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c683cc9e9e3d1c9ce2f20c97cf69feb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c683cc9e9e3d1c9ce2f20c97cf69feb">&#9670;&nbsp;</a></span>send_subscription_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_subscription_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">1676</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">dispatch_message()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01152">stasis_subscription_is_subscribed()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01627">subscription_change_alloc()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">subscription_invoke()</a>.</p>
<div class="fragment"><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;{</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   <span class="comment">/* This assumes that we have already unsubscribed */</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a>(sub));</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>()) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;   change = <a class="code" href="../../d0/df4/stasis_8c.html#a915d63fc715772a167a2308d86ab7723">subscription_change_alloc</a>(topic, sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, <span class="stringliteral">&quot;Unsubscribe&quot;</span>);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <span class="keywordflow">if</span> (!change) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;   }</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>(), change);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(change);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, msg);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   <span class="comment">/* Now we have to dispatch to the subscription itself */</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#aae9eb64c90ceb85938c512e2f8bc488a">dispatch_message</a>(sub, msg, 0);</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(change);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a915d63fc715772a167a2308d86ab7723"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a915d63fc715772a167a2308d86ab7723">subscription_change_alloc</a></div><div class="ttdeci">static struct stasis_subscription_change * subscription_change_alloc(struct stasis_topic *topic, const char *uniqueid, const char *description)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01627">stasis.c:1627</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stasis_8c_html_aae9eb64c90ceb85938c512e2f8bc488a"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aae9eb64c90ceb85938c512e2f8bc488a">dispatch_message</a></div><div class="ttdeci">static unsigned int dispatch_message(struct stasis_subscription *sub, struct stasis_message *message, int synchronous)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01314">stasis.c:1314</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="stasis_8c_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis_8c_html_acd5bedbb2212956dac77be47dceef510"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a></div><div class="ttdeci">int stasis_subscription_is_subscribed(const struct stasis_subscription *sub)</div><div class="ttdoc">Returns whether a subscription is currently subscribed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01152">stasis.c:1152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a59a4b47914bab8d430d86766504c52dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a4b47914bab8d430d86766504c52dc">&#9670;&nbsp;</a></span>stasis_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stasis_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleanup function for graceful shutdowns. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l03042">3042</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00910">aco_info_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01523">STASIS_MESSAGE_TYPE_CLEANUP</a>, and <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;{</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a>));</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;message_type_statistics);</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(subscription_statistics);</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(topic_statistics);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a>));</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a>);</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type</a>);</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="stasis_8c_html_a9ee1e67ae2faf5be87758cc11248e2f9"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a></div><div class="ttdeci">static struct ast_cli_entry cli_stasis_statistics[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02916">stasis.c:2916</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="stasis_8c_html_a12e07f14a24059d6ca7ad80c23473729"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a></div><div class="ttdeci">static struct ast_cli_entry cli_stasis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02476">stasis.c:2476</a></div></div>
<div class="ttc" id="config__options_8h_html_a21b11339ca4d0b1167c956a9f816bd19"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a></div><div class="ttdeci">void aco_info_destroy(struct aco_info *info)</div><div class="ttdoc">Destroy an initialized aco_info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00910">config_options.c:910</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="stasis_8c_html_ae14b5f72d5278c2e22621748fba0610b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></div><div class="ttdeci">struct ao2_container * topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00396">stasis.c:396</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga903c0022d53e0cac08b7eab6539ab206"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type</a></div><div class="ttdeci">struct stasis_message_type * ast_multi_user_event_type(void)</div><div class="ttdoc">Message type for custom user defined events with multi object blobs. </div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="stasis_8c_html_a6dc11fc8f94173cc1af379b74a096abd"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a></div><div class="ttdeci">static struct ast_threadpool * threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00308">stasis.c:308</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a513440e1209c1c0e7982ed5112d754f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a513440e1209c1c0e7982ed5112d754f4">&#9670;&nbsp;</a></span>stasis_config_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * stasis_config_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02253">2253</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01312">ast_str_container_alloc</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02182">stasis_declined_config::declined</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02199">stasis_config::declined_message_types</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02245">stasis_config_destructor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02238">stasis_declined_config_destructor()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02197">stasis_config::threadpool_options</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;{</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d0e/structstasis__config.html">stasis_config</a> *cfg;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cfg), <a class="code" href="../../d0/df4/stasis_8c.html#a683c22ddf249d0e23664056d28a750da">stasis_config_destructor</a>))) {</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;   }</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;   cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>));</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>) {</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   }</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>),</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#aab529f60fda7c7d7f57f97c300690748">stasis_declined_config_destructor</a>);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>) {</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>-&gt;<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a> = <a class="code" href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a>(13);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>-&gt;<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a>) {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   }</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;}</div><div class="ttc" id="strings_8h_html_a77f7edf078454c39f51bae4bb400e764"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a></div><div class="ttdeci">#define ast_str_container_alloc(buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01312">strings.h:1312</a></div></div>
<div class="ttc" id="stasis_8c_html_aab529f60fda7c7d7f57f97c300690748"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aab529f60fda7c7d7f57f97c300690748">stasis_declined_config_destructor</a></div><div class="ttdeci">static void stasis_declined_config_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02238">stasis.c:2238</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__declined__config_html_a9d8349e5ac80baf69070a6a108d8e372"><div class="ttname"><a href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">stasis_declined_config::declined</a></div><div class="ttdeci">struct ao2_container * declined</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02182">stasis.c:2182</a></div></div>
<div class="ttc" id="structstasis__config_html_a6f30927c99c8edf4d9c895bf3ab7baca"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">stasis_config::declined_message_types</a></div><div class="ttdeci">struct stasis_declined_config * declined_message_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02199">stasis.c:2199</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__config_html"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html">stasis_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02195">stasis.c:2195</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structstasis__config_html_a9b9399e0648d49583081463ba55ce257"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">stasis_config::threadpool_options</a></div><div class="ttdeci">struct stasis_threadpool_conf * threadpool_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02197">stasis.c:2197</a></div></div>
<div class="ttc" id="stasis_8c_html_a683c22ddf249d0e23664056d28a750da"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a683c22ddf249d0e23664056d28a750da">stasis_config_destructor</a></div><div class="ttdeci">static void stasis_config_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02245">stasis.c:2245</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a683c22ddf249d0e23664056d28a750da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683c22ddf249d0e23664056d28a750da">&#9670;&nbsp;</a></span>stasis_config_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stasis_config_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02245">2245</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02199">stasis_config::declined_message_types</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02197">stasis_config::threadpool_options</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02253">stasis_config_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;{</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d0e/structstasis__config.html">stasis_config</a> *cfg = obj;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;}</div><div class="ttc" id="structstasis__config_html_a6f30927c99c8edf4d9c895bf3ab7baca"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">stasis_config::declined_message_types</a></div><div class="ttdeci">struct stasis_declined_config * declined_message_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02199">stasis.c:2199</a></div></div>
<div class="ttc" id="structstasis__config_html"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html">stasis_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02195">stasis.c:2195</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__config_html_a9b9399e0648d49583081463ba55ce257"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">stasis_config::threadpool_options</a></div><div class="ttdeci">struct stasis_threadpool_conf * threadpool_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02197">stasis.c:2197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab529f60fda7c7d7f57f97c300690748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab529f60fda7c7d7f57f97c300690748">&#9670;&nbsp;</a></span>stasis_declined_config_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stasis_declined_config_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02238">2238</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02182">stasis_declined_config::declined</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02253">stasis_config_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;{</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d5b/structstasis__declined__config.html">stasis_declined_config</a> *<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a> = obj;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(declined-&gt;<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a>);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;}</div><div class="ttc" id="structstasis__declined__config_html_a9d8349e5ac80baf69070a6a108d8e372"><div class="ttname"><a href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">stasis_declined_config::declined</a></div><div class="ttdeci">struct ao2_container * declined</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02182">stasis.c:2182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__declined__config_html"><div class="ttname"><a href="../../de/d5b/structstasis__declined__config.html">stasis_declined_config</a></div><div class="ttdoc">A structure to hold global configuration-related options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02180">stasis.c:2180</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2513a93567ddc93510f7896b777da119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2513a93567ddc93510f7896b777da119">&#9670;&nbsp;</a></span>stasis_forward_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* stasis_forward_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>from_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>to_topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a subscription which forwards all messages from one topic to another. </p>
<p>Note that the <em>topic</em> parameter of the invoked callback will the be the <em>topic</em> the message was sent to, not the topic the subscriber subscribed to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from_topic</td><td>Topic to forward. </td></tr>
    <tr><td class="paramname">to_topic</td><td>Destination topic of forwarded messages. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New forwarding subscription. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">1578</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01538">forward_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01533">stasis_forward::from_topic</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01535">stasis_forward::to_topic</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01203">topic_add_subscription()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00426">topic_lock_both</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01511">ast_channel_forward_endpoint()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01527">ast_channel_internal_setup_topics()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00613">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04314">create_subscriptions()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00164">forwards_create_bridge()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00136">forwards_create_channel()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00199">forwards_create_endpoint()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00681">manager_bridging_init()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l01308">manager_channels_init()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00153">manager_mwi_init()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09053">manager_subscriptions_init()</a>, <a class="el" href="../../dd/d65/manager__system_8c_source.html#l00043">manager_system_init()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00065">stasis_cp_all_create()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00139">stasis_cp_single_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>, and <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00167">state_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keywordtype">size_t</span> idx;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *forward;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   <span class="keywordflow">if</span> (!from_topic || !to_topic) {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   forward = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*forward), <a class="code" href="../../d0/df4/stasis_8c.html#a38736c464d6ded1bd9c2570a59dca6b3">forward_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="keywordflow">if</span> (!forward) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   }</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="comment">/* Forwards to ourselves are implicit. */</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keywordflow">if</span> (to_topic == from_topic) {</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="keywordflow">return</span> forward;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">from_topic</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(from_topic);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">to_topic</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(to_topic);</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ae11ee3d32be3f0cc558f1ef40cd9a45b">topic_lock_both</a>(to_topic, from_topic);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   res = <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;to_topic-&gt;upstream_topics, from_topic);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(from_topic);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(to_topic);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(forward, -1);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   }</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;to_topic-&gt;subscribers); ++idx) {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a>(from_topic, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;to_topic-&gt;subscribers, idx));</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;   }</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(from_topic);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(to_topic);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <span class="keywordflow">return</span> forward;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="stasis_8c_html_a38736c464d6ded1bd9c2570a59dca6b3"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a38736c464d6ded1bd9c2570a59dca6b3">forward_dtor</a></div><div class="ttdeci">static void forward_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01538">stasis.c:1538</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8c_html_ae11ee3d32be3f0cc558f1ef40cd9a45b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae11ee3d32be3f0cc558f1ef40cd9a45b">topic_lock_both</a></div><div class="ttdeci">#define topic_lock_both(topic1, topic2)</div><div class="ttdoc">Lock two topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00426">stasis.c:426</a></div></div>
<div class="ttc" id="structstasis__forward_html_a08704f04d89d378499fb30161d4772a3"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">stasis_forward::from_topic</a></div><div class="ttdeci">struct stasis_topic * from_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01533">stasis.c:1533</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__forward_html_a1cdfe3ae76a2e8b2b1c8083120f26100"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">stasis_forward::to_topic</a></div><div class="ttdeci">struct stasis_topic * to_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01535">stasis.c:1535</a></div></div>
<div class="ttc" id="stasis_8c_html_a79e3a46cca0390255f951e98052a6508"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a></div><div class="ttdeci">static int topic_add_subscription(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdoc">Add a subscriber to a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01203">stasis.c:1203</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structstasis__forward_html"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html">stasis_forward</a></div><div class="ttdoc">Forwarding information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01531">stasis.c:1531</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5713715b0f26f4943d0af05363b07027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5713715b0f26f4943d0af05363b07027">&#9670;&nbsp;</a></span>stasis_forward_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* stasis_forward_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;</td>
          <td class="paramname"><em>forward</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">1548</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00585">AST_VECTOR_REMOVE_ELEM_UNORDERED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01533">stasis_forward::from_topic</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01535">stasis_forward::to_topic</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00426">topic_lock_both</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01231">topic_remove_subscription()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00051">all_dtor()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00407">ari_bridges_play_new()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01471">ast_channel_internal_cleanup()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00350">ast_endpoint_shutdown()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00613">AST_TEST_DEFINE()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00288">bridge_channel_control_thread()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04304">destroy_subscriptions()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00108">forwards_unsubscribe()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, <a class="el" href="../../df/d1d/res__manager__devicestate_8c_source.html#l00123">load_module()</a>, <a class="el" href="../../da/d10/manager__bridges_8c_source.html#l00670">manager_bridging_cleanup()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l01302">manager_channels_shutdown()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00147">manager_mwi_shutdown()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08956">manager_shutdown()</a>, <a class="el" href="../../dd/d65/manager__system_8c_source.html#l00037">manager_system_shutdown()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00189">stasis_cp_single_unsubscribe()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00121">state_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01715">topic_pool_entry_dtor()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11250">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;{</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *from;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *to;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   <span class="keywordflow">if</span> (!forward) {</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   }</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   from = forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">from_topic</a>;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   to = forward-&gt;<a class="code" href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">to_topic</a>;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   <span class="keywordflow">if</span> (from &amp;&amp; to) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#ae11ee3d32be3f0cc558f1ef40cd9a45b">topic_lock_both</a>(to, from);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a79df3872d03069f077e7cab2262b8550">AST_VECTOR_REMOVE_ELEM_UNORDERED</a>(&amp;to-&gt;upstream_topics, from,</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;to-&gt;subscribers); ++idx) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;         <a class="code" href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a>(from, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;to-&gt;subscribers, idx));</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      }</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(from);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(to);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   }</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(forward);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div><div class="ttc" id="stasis_8c_html_aedcfe63e48121eabbf8ec304cee1d7bd"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a></div><div class="ttdeci">static int topic_remove_subscription(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01231">stasis.c:1231</a></div></div>
<div class="ttc" id="vector_8h_html_a79df3872d03069f077e7cab2262b8550"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a79df3872d03069f077e7cab2262b8550">AST_VECTOR_REMOVE_ELEM_UNORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_ELEM_UNORDERED(vec, elem, cleanup)</div><div class="ttdoc">Remove an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00585">vector.h:585</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8c_html_ae11ee3d32be3f0cc558f1ef40cd9a45b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae11ee3d32be3f0cc558f1ef40cd9a45b">topic_lock_both</a></div><div class="ttdeci">#define topic_lock_both(topic1, topic2)</div><div class="ttdoc">Lock two topics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00426">stasis.c:426</a></div></div>
<div class="ttc" id="structstasis__forward_html_a08704f04d89d378499fb30161d4772a3"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html#a08704f04d89d378499fb30161d4772a3">stasis_forward::from_topic</a></div><div class="ttdeci">struct stasis_topic * from_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01533">stasis.c:1533</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="structstasis__forward_html_a1cdfe3ae76a2e8b2b1c8083120f26100"><div class="ttname"><a href="../../d8/d54/structstasis__forward.html#a1cdfe3ae76a2e8b2b1c8083120f26100">stasis_forward::to_topic</a></div><div class="ttdeci">struct stasis_topic * to_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01535">stasis.c:1535</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e674e1a85d014776968a99025bf7bce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e674e1a85d014776968a99025bf7bce">&#9670;&nbsp;</a></span>stasis_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Stasis subsystem. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
Non-zero on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">3061</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dfe/config__options_8h_source.html#l00064">ACO_EXACT</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00877">aco_info_init()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00623">aco_option_register</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00638">aco_option_register_custom</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00924">aco_set_defaults()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00090">ast_threadpool_options::auto_increment</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02304">declined_handler()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02199">stasis_config::declined_message_types</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00816">FLDSET</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00079">ast_threadpool_options::idle_timeout</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02190">stasis_threadpool_conf::idle_timeout_sec</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00100">ast_threadpool_options::initial_size</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02188">stasis_threadpool_conf::initial_size</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00110">ast_threadpool_options::max_size</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02192">stasis_threadpool_conf::max_size</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01125">PARSE_IN_RANGE</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l01008">stasis_cache_init()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l03042">stasis_cleanup()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02253">stasis_config_alloc()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00328">SUBSCRIPTION_STATISTICS_BUCKETS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02945">subscription_statistics_cmp()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02924">subscription_statistics_hash()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02197">stasis_config::threadpool_options</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00318">TOPIC_ALL_BUCKETS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00325">TOPIC_STATISTICS_BUCKETS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l03003">topic_statistics_cmp()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02982">topic_statistics_hash()</a>, and <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;{</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d0e/structstasis__config.html">stasis_config</a> *cfg;</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;   <span class="keywordtype">int</span> cache_init;</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> threadpool_opts = { 0, };</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *subscription_stats;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *topic_stats;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   <span class="comment">/* Be sure the types are cleaned up after the message bus */</span></div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a59a4b47914bab8d430d86766504c52dc">stasis_cleanup</a>);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a>(&amp;cfg_info)) {</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   }</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a83b8d55eb1ba88ac7291f77a3ebfce45">aco_option_register_custom</a>(&amp;cfg_info, <span class="stringliteral">&quot;decline&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>,</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#ada04be29882062127408e67ba605ca60">declined_options</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d0/df4/stasis_8c.html#ad2be5dfe3f2bdc69bb3f0b9d92078bb4">declined_handler</a>, 0);</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;initial_size&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>,</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#aac523295c428ee99baad3a6a7ef1cfbe">threadpool_options</a>, <span class="stringliteral">&quot;5&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>,</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d30/structstasis__threadpool__conf.html">stasis_threadpool_conf</a>, initial_size), 0,</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      INT_MAX);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;idle_timeout_sec&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>,</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#aac523295c428ee99baad3a6a7ef1cfbe">threadpool_options</a>, <span class="stringliteral">&quot;20&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>,</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d30/structstasis__threadpool__conf.html">stasis_threadpool_conf</a>, idle_timeout_sec), 0,</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      INT_MAX);</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;max_size&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>,</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#aac523295c428ee99baad3a6a7ef1cfbe">threadpool_options</a>, <span class="stringliteral">&quot;50&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a>,</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d30/structstasis__threadpool__conf.html">stasis_threadpool_conf</a>, max_size), 0,</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      INT_MAX);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 0) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d0e/structstasis__config.html">stasis_config</a> *default_cfg = <a class="code" href="../../d0/df4/stasis_8c.html#a513440e1209c1c0e7982ed5112d754f4">stasis_config_alloc</a>();</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      <span class="keywordflow">if</span> (!default_cfg) {</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      }</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a>, <span class="stringliteral">&quot;threadpool&quot;</span>, default_cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>)) {</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize defaults on Stasis configuration object\n&quot;</span>);</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(default_cfg, -1);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      }</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a>, <span class="stringliteral">&quot;declined_message_types&quot;</span>, default_cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>)) {</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to load stasis.conf and failed to initialize defaults.\n&quot;</span>);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(default_cfg, -1);</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      }</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Could not load Stasis configuration; using defaults\n&quot;</span>);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, default_cfg);</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      cfg = default_cfg;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to obtain Stasis configuration object\n&quot;</span>);</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      }</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   }</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   threadpool_opts.<a class="code" href="../../de/de6/structast__threadpool__options.html#aad880fc4455c253781e8968f2239d56f">version</a> = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>;</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;   threadpool_opts.<a class="code" href="../../de/de6/structast__threadpool__options.html#af688239509aef8d133559c6b15c96395">initial_size</a> = cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>-&gt;<a class="code" href="../../df/d30/structstasis__threadpool__conf.html#af688239509aef8d133559c6b15c96395">initial_size</a>;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;   threadpool_opts.<a class="code" href="../../de/de6/structast__threadpool__options.html#ae44aa7ff10e622be697711e67c13be3b">auto_increment</a> = 1;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   threadpool_opts.<a class="code" href="../../de/de6/structast__threadpool__options.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a> = cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>-&gt;<a class="code" href="../../df/d30/structstasis__threadpool__conf.html#a98ca8117bc73d9d7520727c4ce8772e6">max_size</a>;</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;   threadpool_opts.<a class="code" href="../../de/de6/structast__threadpool__options.html#a55f8da70e65091a4533dae72885d0227">idle_timeout</a> = cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">threadpool_options</a>-&gt;<a class="code" href="../../df/d30/structstasis__threadpool__conf.html#a645e9643f8d1fb189cc95263ebe2df05">idle_timeout_sec</a>;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a> = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<span class="stringliteral">&quot;stasis&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;threadpool_opts);</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a>) {</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create &#39;stasis-core&#39; threadpool\n&quot;</span>);</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   }</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   cache_init = <a class="code" href="../../dd/d79/stasis_8h.html#a81215cb37a9287389855d0529332b1b7">stasis_cache_init</a>();</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   <span class="keywordflow">if</span> (cache_init != 0) {</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;   }</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>) != 0) {</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;   }</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type</a>) != 0) {</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;   }</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../d0/df4/stasis_8c.html#af25c73f0280eb52884585e91c8d18d70">TOPIC_ALL_BUCKETS</a>,</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;         topic_proxy_hash_fn, 0, topic_proxy_cmp_fn);</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>) {</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;   }</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a>))) {</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;   }</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;   <span class="comment">/* Statistics information is stored separately so that we don&#39;t alter or interrupt the lifetime of the underlying</span></div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="comment">    * topic or subscripton.</span></div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;   subscription_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../d0/df4/stasis_8c.html#a92f09fdb7bda5eeca4fa0e1b4c9046c0">SUBSCRIPTION_STATISTICS_BUCKETS</a>,</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#a65f74acd52a27788bee2b0aa2a417b7c">subscription_statistics_hash</a>, 0, <a class="code" href="../../d0/df4/stasis_8c.html#aff7f67df7e0d35e466ad20d9f8c534da">subscription_statistics_cmp</a>);</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   <span class="keywordflow">if</span> (!subscription_stats) {</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;   }</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(subscription_statistics, subscription_stats);</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(subscription_stats);</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;   topic_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../d0/df4/stasis_8c.html#a348a7ad6b881b6b0b401da2d8546ccc4">TOPIC_STATISTICS_BUCKETS</a>,</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#aca08aa236124705a035a6fe95371c6ca">topic_statistics_hash</a>, 0, <a class="code" href="../../d0/df4/stasis_8c.html#a1bfbdd05a5b4d1c42475d1a89d4a0bea">topic_statistics_cmp</a>);</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   <span class="keywordflow">if</span> (!topic_stats) {</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   }</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(topic_statistics, topic_stats);</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(topic_stats);</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   <span class="keywordflow">if</span> (!topic_stats) {</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   }</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;message_type_statistics, 0);</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a>))) {</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;   }</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a75dbfda070501bd401698bdf6813e571"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a></div><div class="ttdeci">static struct aco_type threadpool_option</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02202">stasis.c:2202</a></div></div>
<div class="ttc" id="structast__threadpool__options_html_ae44aa7ff10e622be697711e67c13be3b"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html#ae44aa7ff10e622be697711e67c13be3b">ast_threadpool_options::auto_increment</a></div><div class="ttdeci">int auto_increment</div><div class="ttdoc">Number of threads to increment pool by. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00090">threadpool.h:90</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__threadpool__options_html_a55f8da70e65091a4533dae72885d0227"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html#a55f8da70e65091a4533dae72885d0227">ast_threadpool_options::idle_timeout</a></div><div class="ttdeci">int idle_timeout</div><div class="ttdoc">Time limit in seconds for idle threads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00079">threadpool.h:79</a></div></div>
<div class="ttc" id="config__options_8h_html_a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00064">config_options.h:64</a></div></div>
<div class="ttc" id="config__options_8h_html_a83b8d55eb1ba88ac7291f77a3ebfce45"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a83b8d55eb1ba88ac7291f77a3ebfce45">aco_option_register_custom</a></div><div class="ttdeci">#define aco_option_register_custom(info, name, matchtype, types, default_val, handler, flags)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00638">config_options.h:638</a></div></div>
<div class="ttc" id="structast__threadpool__options_html_af688239509aef8d133559c6b15c96395"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html#af688239509aef8d133559c6b15c96395">ast_threadpool_options::initial_size</a></div><div class="ttdeci">int initial_size</div><div class="ttdoc">Number of threads the pool will start with. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00100">threadpool.h:100</a></div></div>
<div class="ttc" id="stasis_8c_html_a59a4b47914bab8d430d86766504c52dc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a59a4b47914bab8d430d86766504c52dc">stasis_cleanup</a></div><div class="ttdeci">static void stasis_cleanup(void)</div><div class="ttdoc">Cleanup function for graceful shutdowns. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l03042">stasis.c:3042</a></div></div>
<div class="ttc" id="structast__threadpool__options_html_a98ca8117bc73d9d7520727c4ce8772e6"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html#a98ca8117bc73d9d7520727c4ce8772e6">ast_threadpool_options::max_size</a></div><div class="ttdeci">int max_size</div><div class="ttdoc">Maximum number of threads a pool may have. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00110">threadpool.h:110</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="stasis_8c_html_a9ee1e67ae2faf5be87758cc11248e2f9"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a9ee1e67ae2faf5be87758cc11248e2f9">cli_stasis_statistics</a></div><div class="ttdeci">static struct ast_cli_entry cli_stasis_statistics[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02916">stasis.c:2916</a></div></div>
<div class="ttc" id="config__options_8h_html_a60d17d3e9451ddcb5aa861339c757bed"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a></div><div class="ttdeci">#define aco_option_register(info, name, matchtype, types, default_val, opt_type, flags,...)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00623">config_options.h:623</a></div></div>
<div class="ttc" id="structstasis__threadpool__conf_html"><div class="ttname"><a href="../../df/d30/structstasis__threadpool__conf.html">stasis_threadpool_conf</a></div><div class="ttdoc">Threadpool configuration options. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02186">stasis.c:2186</a></div></div>
<div class="ttc" id="structstasis__threadpool__conf_html_a98ca8117bc73d9d7520727c4ce8772e6"><div class="ttname"><a href="../../df/d30/structstasis__threadpool__conf.html#a98ca8117bc73d9d7520727c4ce8772e6">stasis_threadpool_conf::max_size</a></div><div class="ttdeci">int max_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02192">stasis.c:2192</a></div></div>
<div class="ttc" id="stasis_8c_html_ada04be29882062127408e67ba605ca60"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ada04be29882062127408e67ba605ca60">declined_options</a></div><div class="ttdeci">struct aco_type * declined_options[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02221">stasis.c:2221</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structstasis__config_html_a6f30927c99c8edf4d9c895bf3ab7baca"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">stasis_config::declined_message_types</a></div><div class="ttdeci">struct stasis_declined_config * declined_message_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02199">stasis.c:2199</a></div></div>
<div class="ttc" id="structstasis__threadpool__conf_html_af688239509aef8d133559c6b15c96395"><div class="ttname"><a href="../../df/d30/structstasis__threadpool__conf.html#af688239509aef8d133559c6b15c96395">stasis_threadpool_conf::initial_size</a></div><div class="ttdeci">int initial_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02188">stasis.c:2188</a></div></div>
<div class="ttc" id="config__options_8h_html_a5793d5d6ccf2df0b2423eb3274af7802"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a></div><div class="ttdeci">#define FLDSET(type,...)</div><div class="ttdoc">Convert a struct and list of fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00816">config_options.h:816</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="config__options_8h_html_a3f40a7cffea07c21a21faaee64d24398"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a></div><div class="ttdeci">int aco_info_init(struct aco_info *info)</div><div class="ttdoc">Initialize an aco_info structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00877">config_options.c:877</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="stasis_8c_html_a65f74acd52a27788bee2b0aa2a417b7c"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a65f74acd52a27788bee2b0aa2a417b7c">subscription_statistics_hash</a></div><div class="ttdeci">static int subscription_statistics_hash(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02924">stasis.c:2924</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8c_html_aca08aa236124705a035a6fe95371c6ca"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aca08aa236124705a035a6fe95371c6ca">topic_statistics_hash</a></div><div class="ttdeci">static int topic_statistics_hash(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02982">stasis.c:2982</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="structstasis__threadpool__conf_html_a645e9643f8d1fb189cc95263ebe2df05"><div class="ttname"><a href="../../df/d30/structstasis__threadpool__conf.html#a645e9643f8d1fb189cc95263ebe2df05">stasis_threadpool_conf::idle_timeout_sec</a></div><div class="ttdeci">int idle_timeout_sec</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02190">stasis.c:2190</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="structstasis__config_html"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html">stasis_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02195">stasis.c:2195</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="stasis_8c_html_a92f09fdb7bda5eeca4fa0e1b4c9046c0"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a92f09fdb7bda5eeca4fa0e1b4c9046c0">SUBSCRIPTION_STATISTICS_BUCKETS</a></div><div class="ttdeci">#define SUBSCRIPTION_STATISTICS_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00328">stasis.c:328</a></div></div>
<div class="ttc" id="stasis_8c_html_a12e07f14a24059d6ca7ad80c23473729"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a12e07f14a24059d6ca7ad80c23473729">cli_stasis</a></div><div class="ttdeci">static struct ast_cli_entry cli_stasis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02476">stasis.c:2476</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="stasis_8c_html_a513440e1209c1c0e7982ed5112d754f4"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a513440e1209c1c0e7982ed5112d754f4">stasis_config_alloc</a></div><div class="ttdeci">static void * stasis_config_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02253">stasis.c:2253</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa37848843c0c65e9ce998148c2f16d585">PARSE_IN_RANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01125">include/asterisk/config.h:1125</a></div></div>
<div class="ttc" id="stasis_8c_html_aff7f67df7e0d35e466ad20d9f8c534da"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aff7f67df7e0d35e466ad20d9f8c534da">subscription_statistics_cmp</a></div><div class="ttdeci">static int subscription_statistics_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02945">stasis.c:2945</a></div></div>
<div class="ttc" id="stasis_8c_html_ae14b5f72d5278c2e22621748fba0610b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></div><div class="ttdeci">struct ao2_container * topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00396">stasis.c:396</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__threadpool__options_html_aad880fc4455c253781e8968f2239d56f"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html#aad880fc4455c253781e8968f2239d56f">ast_threadpool_options::version</a></div><div class="ttdeci">int version</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00073">threadpool.h:73</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="config__options_8h_html_a206bf60e38d1114efdeeabc35b7eaa69"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a206bf60e38d1114efdeeabc35b7eaa69">aco_set_defaults</a></div><div class="ttdeci">int aco_set_defaults(struct aco_type *type, const char *category, void *obj)</div><div class="ttdoc">Set all default options of obj. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00924">config_options.c:924</a></div></div>
<div class="ttc" id="stasis_8c_html_afe12a283dc4ec49a7557650cbc4e8ec9"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a></div><div class="ttdeci">static struct aco_type declined_option</div><div class="ttdoc">An aco_type structure to link the &quot;declined_message_types&quot; category to the stasis_declined_config typ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02213">stasis.c:2213</a></div></div>
<div class="ttc" id="stasis_8h_html_a81215cb37a9287389855d0529332b1b7"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a81215cb37a9287389855d0529332b1b7">stasis_cache_init</a></div><div class="ttdeci">int stasis_cache_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l01008">stasis_cache.c:1008</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga903c0022d53e0cac08b7eab6539ab206"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type</a></div><div class="ttdeci">struct stasis_message_type * ast_multi_user_event_type(void)</div><div class="ttdoc">Message type for custom user defined events with multi object blobs. </div></div>
<div class="ttc" id="stasis_8c_html_a348a7ad6b881b6b0b401da2d8546ccc4"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a348a7ad6b881b6b0b401da2d8546ccc4">TOPIC_STATISTICS_BUCKETS</a></div><div class="ttdeci">#define TOPIC_STATISTICS_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00325">stasis.c:325</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__config_html_a9b9399e0648d49583081463ba55ce257"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a9b9399e0648d49583081463ba55ce257">stasis_config::threadpool_options</a></div><div class="ttdeci">struct stasis_threadpool_conf * threadpool_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02197">stasis.c:2197</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="stasis_8c_html_aac523295c428ee99baad3a6a7ef1cfbe"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aac523295c428ee99baad3a6a7ef1cfbe">threadpool_options</a></div><div class="ttdeci">static struct aco_type * threadpool_options[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02210">stasis.c:2210</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
<div class="ttc" id="stasis_8c_html_a6dc11fc8f94173cc1af379b74a096abd"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6dc11fc8f94173cc1af379b74a096abd">threadpool</a></div><div class="ttdeci">static struct ast_threadpool * threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00308">stasis.c:308</a></div></div>
<div class="ttc" id="stasis_8c_html_a1bfbdd05a5b4d1c42475d1a89d4a0bea"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a1bfbdd05a5b4d1c42475d1a89d4a0bea">topic_statistics_cmp</a></div><div class="ttdeci">static int topic_statistics_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l03003">stasis.c:3003</a></div></div>
<div class="ttc" id="stasis_8c_html_ad2be5dfe3f2bdc69bb3f0b9d92078bb4"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ad2be5dfe3f2bdc69bb3f0b9d92078bb4">declined_handler</a></div><div class="ttdeci">static int declined_handler(const struct aco_option *opt, struct ast_variable *var, void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02304">stasis.c:2304</a></div></div>
<div class="ttc" id="stasis_8c_html_af25c73f0280eb52884585e91c8d18d70"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af25c73f0280eb52884585e91c8d18d70">TOPIC_ALL_BUCKETS</a></div><div class="ttdeci">#define TOPIC_ALL_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00318">stasis.c:318</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72385bdbbdd39eda3680da22820da7a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72385bdbbdd39eda3680da22820da7a5">&#9670;&nbsp;</a></span>stasis_log_bad_type_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_log_bad_type_access </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01940">1940</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02283">stasis_message_type_declined()</a>.</p>
<div class="fragment"><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;{</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/df4/stasis_8c.html#a6c2e98dd27243b0fe07717c54c40d0b1">stasis_message_type_declined</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Use of %s() before init/after destruction\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;}</div><div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stasis_8c_html_a6c2e98dd27243b0fe07717c54c40d0b1"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6c2e98dd27243b0fe07717c54c40d0b1">stasis_message_type_declined</a></div><div class="ttdeci">int stasis_message_type_declined(const char *name)</div><div class="ttdoc">Check whether a message type is declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02283">stasis.c:2283</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c2e98dd27243b0fe07717c54c40d0b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c2e98dd27243b0fe07717c54c40d0b1">&#9670;&nbsp;</a></span>stasis_message_type_declined()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_message_type_declined </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether a message type is declined. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the message type to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">zero</td><td>The message type is not declined </td></tr>
    <tr><td class="paramname">non-zero</td><td>The message type is declined </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02283">2283</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02182">stasis_declined_config::declined</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02199">stasis_config::declined_message_types</a>, <a class="el" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01940">stasis_log_bad_type_access()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00056">stasis_message_type_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;{</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d0e/structstasis__config.html">stasis_config</a> *cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a>);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   <span class="keywordtype">char</span> *name_in_declined;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   <span class="keywordflow">if</span> (!cfg || !cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>) {</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   }</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   name_in_declined = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(cfg-&gt;<a class="code" href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">declined_message_types</a>-&gt;<a class="code" href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">declined</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   res = name_in_declined ? 1 : 0;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(name_in_declined);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Declining to allocate Stasis message type &#39;%s&#39; due to configuration\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   }</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="structstasis__declined__config_html_a9d8349e5ac80baf69070a6a108d8e372"><div class="ttname"><a href="../../de/d5b/structstasis__declined__config.html#a9d8349e5ac80baf69070a6a108d8e372">stasis_declined_config::declined</a></div><div class="ttdeci">struct ao2_container * declined</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02182">stasis.c:2182</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structstasis__config_html_a6f30927c99c8edf4d9c895bf3ab7baca"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html#a6f30927c99c8edf4d9c895bf3ab7baca">stasis_config::declined_message_types</a></div><div class="ttdeci">struct stasis_declined_config * declined_message_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02199">stasis.c:2199</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__console_8c_html_aa36e3e2c486b920b166c2d17c5242221"><div class="ttname"><a href="../../d3/d4e/chan__console_8c.html#aa36e3e2c486b920b166c2d17c5242221">globals</a></div><div class="ttdeci">static struct console_pvt globals</div></div>
<div class="ttc" id="structstasis__config_html"><div class="ttname"><a href="../../d2/d0e/structstasis__config.html">stasis_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02195">stasis.c:2195</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af35c4a888e0f5a4fc7ee4e053203299b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35c4a888e0f5a4fc7ee4e053203299b">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02304">declined_handler()</a>.</p>

</div>
</div>
<a id="af273c6620cf98ade3224665d7e13ffa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af273c6620cf98ade3224665d7e13ffa3">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga903c0022d53e0cac08b7eab6539ab206">ast_multi_user_event_type</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_json</em> = <code><a class="el" href="../../d0/df4/stasis_8c.html#a44b9b12f84af401e4511c7c90e2038f4">multi_user_event_to_json</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_ami</em> = <code><a class="el" href="../../d0/df4/stasis_8c.html#a0770e6bfce19c8fee06b15270f94816e">multi_user_event_to_ami</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define multi user event message type(s). </p>

</div>
</div>
<a id="ac43d0a33d111e9f34b441b285c166cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac43d0a33d111e9f34b441b285c166cfc">&#9670;&nbsp;</a></span>stasis_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_publish </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a message to a topic's subscribers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic. </td></tr>
    <tr><td class="paramname">message</td><td>Message to publish.</td></tr>
  </table>
  </dd>
</dl>
<p>This call is asynchronous and will return immediately upon queueing the message for delivery to the topic's subscribers.</p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">1511</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01432">publish_msg()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/db9/test_8c_source.html#l01145">__ast_test_suite_event_notify()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01835">aoc_publish_blob()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l01083">app_send_end_msg()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01346">ast_bridge_publish_attended_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00953">ast_bridge_publish_blind_transfer()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00460">ast_bridge_publish_merge()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00350">ast_bridge_publish_state()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l01666">ast_cel_publish_event()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01135">ast_channel_publish_blob()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00917">ast_channel_publish_final_snapshot()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01055">ast_channel_publish_snapshot()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00688">ast_device_state_clear_cache()</a>, <a class="el" href="../../d3/daf/stasis__endpoints_8c_source.html#l00325">ast_endpoint_blob_publish()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00350">ast_endpoint_shutdown()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01903">ast_manager_publish_event()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02010">ast_multi_object_blob_single_channel_publish()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03485">ast_rtp_publish_rtcp_message()</a>, <a class="el" href="../../df/da0/stasis__system_8c_source.html#l00118">ast_system_publish_registry()</a>, <a class="el" href="../../db/dc4/test__cel_8c_source.html#l01616">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00786">bridge_attended_transfer_handler()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00773">bridge_blind_transfer_handler()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00733">bridge_merge_handler()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00381">bridge_publish_state_from_blob()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00965">cache_test_aggregate_publish_fn()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00833">caching_topic_exec()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01023">cc_publish()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00623">clear_node_cache()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00787">device_state_aggregate_publish()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">endpoint_publish_snapshot()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00190">endpoint_state_cb()</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l01118">handle_security_event()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00433">local_optimization_finished_cb()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00390">local_optimization_started_cb()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01343">meetme_stasis_generate_msg()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01115">mixmonitor_exec()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00239">moh_post_start()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00264">moh_post_stop()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01811">notify_new_message()</a>, <a class="el" href="../../df/dde/app__fax_8c_source.html#l00206">phase_e_handler()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00294">presence_state_event()</a>, <a class="el" href="../../da/ddd/named__acl_8c_source.html#l00371">publish_acl_change()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00565">publish_chanspy_message()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00303">publish_cluster_discovery_to_stasis_full()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00204">publish_corosync_ping_to_stasis()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00093">publish_format_update()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04074">publish_hint_change()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l03924">publish_hint_remove()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01475">publish_load_message_type()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00540">publish_local_bridge_message()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00586">publish_message_for_channel_topics()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00617">publish_parked_call()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00595">publish_parked_call_failure()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02234">queue_publish_member_blob()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l02166">queue_publish_multi_channel_snapshot_blob()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00479">remove_device_states_cb()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01407">report_fax_status()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02018">report_receive_fax_status()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02527">report_send_fax_status()</a>, <a class="el" href="../../d9/dbf/pickup_8c_source.html#l00278">send_call_pickup_stasis_message()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00585">send_conf_stasis()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00622">send_conf_stasis_snapshots()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02208">send_msg()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l00991">send_start_msg_snapshots()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01648">send_subscription_subscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">send_subscription_unsubscribe()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l01436">stasis_app_control_publish()</a>, <a class="el" href="../../d2/d80/res__stasis_8c_source.html#l02095">stasis_app_user_event()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00562">stasis_state_publish()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00638">stasis_state_publish_by_id()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00658">stasis_state_remove_publish_by_id()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01257">stop_mixmonitor_full()</a>, <a class="el" href="../../db/dd3/res__stun__monitor_8c_source.html#l00085">stun_monitor_request()</a>, and <a class="el" href="../../d4/df5/func__talkdetect_8c_source.html#l00159">talk_detect_audiohook_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;{</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#a95001d504d94709275db7e173ce31b43">publish_msg</a>(topic, message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8c_html_a95001d504d94709275db7e173ce31b43"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a95001d504d94709275db7e173ce31b43">publish_msg</a></div><div class="ttdeci">static void publish_msg(struct stasis_topic *topic, struct stasis_message *message, struct stasis_subscription *sync_sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01432">stasis.c:1432</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a499d7d708fc81464ec55de7c518b02c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a499d7d708fc81464ec55de7c518b02c6">&#9670;&nbsp;</a></span>stasis_publish_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_publish_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish a message to a topic's subscribers, synchronizing on the specified subscriber. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Subscription to synchronize on. </td></tr>
    <tr><td class="paramname">message</td><td>Message to publish.</td></tr>
  </table>
  </dd>
</dl>
<p>The caller of stasis_publish_sync will block until the specified subscriber completes handling of the message.</p>
<p>All other subscribers to the topic the stasis_subpscription is subscribed to are also delivered the message; this delivery however happens asynchronously.</p>
<dl class="section since"><dt>Since</dt><dd>12.1.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01516">1516</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01432">publish_msg()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00471">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00288">stasis_message_router_publish_sync()</a>.</p>
<div class="fragment"><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;{</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(sub != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#a95001d504d94709275db7e173ce31b43">publish_msg</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, message, sub);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8c_html_a95001d504d94709275db7e173ce31b43"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a95001d504d94709275db7e173ce31b43">publish_msg</a></div><div class="ttdeci">static void publish_msg(struct stasis_topic *topic, struct stasis_message *message, struct stasis_subscription *sync_sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01432">stasis.c:1432</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a741093249684a38185a312d3e0b51fb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a741093249684a38185a312d3e0b51fb7">&#9670;&nbsp;</a></span>stasis_show_topic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* stasis_show_topic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02417">2417</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02049">ast_format_duration_hh_mm_ss()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00623">stasis_topic_get()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02391">topic_complete_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;{</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;   <span class="keywordtype">char</span> print_time[32];</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis show topic&quot;</span>;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;          <span class="stringliteral">&quot;Usage: stasis show topic &lt;name&gt;\n&quot;</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;          <span class="stringliteral">&quot;       Show stasis topic detail info.\n&quot;</span>;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/stasis_8c.html#a6b0d5da0eb307a7fbba0e7866a97b1f6">topic_complete_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      }</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   }</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   }</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   topic = <a class="code" href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <span class="keywordflow">if</span> (!topic) {</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Specified topic &#39;%s&#39; does not exist\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   }</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Name: %s\n&quot;</span>, topic-&gt;name);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Detail: %s\n&quot;</span>, topic-&gt;detail);</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Subscribers count: %zu\n&quot;</span>, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;subscribers));</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Forwarding topic count: %zu\n&quot;</span>, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;upstream_topics));</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;   <a class="code" href="../../de/df7/time_8h.html#a6414288234db8cadefa9680e8ac0f968">ast_format_duration_hh_mm_ss</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>().tv_sec - topic-&gt;creationtime-&gt;tv_sec, print_time, <span class="keyword">sizeof</span>(print_time));</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Duration time: %s\n&quot;</span>, print_time);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(topic);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nSubscribers:\n&quot;</span>);</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;subscribers); i++) {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *subscription_tmp = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topic-&gt;subscribers, i);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  UniqueID: %s, Topic: %s, Detail: %s\n&quot;</span>,</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;            subscription_tmp-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, subscription_tmp-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>-&gt;name, subscription_tmp-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>-&gt;detail);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   }</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nForwarded topics:\n&quot;</span>);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;upstream_topics); i++) {</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic_tmp = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topic-&gt;upstream_topics, i);</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  Topic: %s, Detail: %s\n&quot;</span>, topic_tmp-&gt;name, topic_tmp-&gt;detail);</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   }</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(topic);</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="stasis_8c_html_a6b0d5da0eb307a7fbba0e7866a97b1f6"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6b0d5da0eb307a7fbba0e7866a97b1f6">topic_complete_name</a></div><div class="ttdeci">static char * topic_complete_name(const char *word)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02391">stasis.c:2391</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="stasis_8c_html_a02f065d129b21343b13a9eeb1c740771"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_get(const char *name)</div><div class="ttdoc">Get a topic of the given name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00623">stasis.c:623</a></div></div>
<div class="ttc" id="time_8h_html_a6414288234db8cadefa9680e8ac0f968"><div class="ttname"><a href="../../de/df7/time_8h.html#a6414288234db8cadefa9680e8ac0f968">ast_format_duration_hh_mm_ss</a></div><div class="ttdeci">void ast_format_duration_hh_mm_ss(int duration, char *buf, size_t length)</div><div class="ttdoc">Formats a duration into HH:MM:SS. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02049">main/utils.c:2049</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06e125cdc817146ff611d74e0a9b8e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e125cdc817146ff611d74e0a9b8e60">&#9670;&nbsp;</a></span>stasis_show_topics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* stasis_show_topics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02334">2334</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01335">ao2_container_alloc_list</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00673">ao2_container_dup()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01883">AO2_ITERATOR_UNLINK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00402">topic_proxy::detail</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00401">topic_proxy::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;{</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a> *topic;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *tmp_container;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="preprocessor">#define FMT_HEADERS     &quot;%-64s %-64s\n&quot;</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="preprocessor">#define FMT_FIELDS      &quot;%-64s %-64s\n&quot;</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis show topics&quot;</span>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;         <span class="stringliteral">&quot;Usage: stasis show topics\n&quot;</span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;         <span class="stringliteral">&quot;  Shows a list of topics\n&quot;</span>;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   }</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   }</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span> <a class="code" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <span class="stringliteral">&quot;Name&quot;</span>, <span class="stringliteral">&quot;Detail&quot;</span>);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   tmp_container = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 0,</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            topic_proxy_sort_fn, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <span class="keywordflow">if</span> (!tmp_container || <a class="code" href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a>(tmp_container, <a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>)) {</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_container);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;   }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <span class="comment">/* getting all topic in order */</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(tmp_container, <a class="code" href="../../d5/da5/astobj2_8h.html#a7b5de2aa80f528d3dc554caadb8dc6aba3a8f36e68b2b6873804d167724e1891c">AO2_ITERATOR_UNLINK</a>);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   <span class="keywordflow">while</span> ((topic = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, topic-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a>, topic-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a8e0df5282236baaaf945d6c9433ef9af">detail</a>);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      ++count;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   }</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_container);</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%d Total topics\n\n&quot;</span>, count);</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="preprocessor">#undef FMT_HEADERS</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="preprocessor">#undef FMT_FIELDS</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a28e4a2cd5d9cefd5714c0a3ce2a35499"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a></div><div class="ttdeci">#define FMT_FIELDS</div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structtopic__proxy_html"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html">topic_proxy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00398">stasis.c:398</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a8e0df5282236baaaf945d6c9433ef9af"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a8e0df5282236baaaf945d6c9433ef9af">topic_proxy::detail</a></div><div class="ttdeci">char * detail</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00402">stasis.c:402</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">topic_proxy::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00401">stasis.c:401</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a04bf2beaf5811f6b95768e42fb95d9a5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a></div><div class="ttdeci">int ao2_container_dup(struct ao2_container *dest, struct ao2_container *src, enum search_flags flags)</div><div class="ttdoc">Copy all object references in the src container into the dest container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00673">astobj2_container.c:673</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7b5de2aa80f528d3dc554caadb8dc6aba3a8f36e68b2b6873804d167724e1891c"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7b5de2aa80f528d3dc554caadb8dc6aba3a8f36e68b2b6873804d167724e1891c">AO2_ITERATOR_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01883">astobj2.h:1883</a></div></div>
<div class="ttc" id="stasis_8c_html_ae14b5f72d5278c2e22621748fba0610b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></div><div class="ttdeci">struct ao2_container * topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00396">stasis.c:396</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis_8c_html_a23b24e0f93569bfc937a4bc9143c21e3"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a></div><div class="ttdeci">#define FMT_HEADERS</div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf3a92c10ab654d4a7b11cbf44aa1074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3a92c10ab654d4a7b11cbf44aa1074">&#9670;&nbsp;</a></span>stasis_subscription_accept_formatters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_subscription_accept_formatters </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814">stasis_subscription_message_formatters</a>&#160;</td>
          <td class="paramname"><em>formatters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate to a subscription that we are interested in messages with one or more formatters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription to alter. </td></tr>
    <tr><td class="paramname">formatters</td><td>A bitmap of <a class="el" href="../../dd/d79/stasis_8h.html#a5ae672fb0f772d0e3066fa4c29c41814">stasis_subscription_message_formatters</a> we wish to receive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.25.0 </dd>
<dd>
16.2.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01095">1095</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02301">AST_TEST_DEFINE()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00420">stasis_message_router_accept_formatters()</a>, and <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00397">stasis_message_router_set_formatters_default()</a>.</p>
<div class="fragment"><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;{</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(subscription != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   subscription-&gt;accepted_formatters = formatters;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f248ee5f4791f05d0af8768aaab282b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f248ee5f4791f05d0af8768aaab282b">&#9670;&nbsp;</a></span>stasis_subscription_accept_message_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_accept_message_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate to a subscription that we are interested in a message type. </p>
<p>This will cause the subscription to allow the given message type to be raised to our subscription callback. This enables internal filtering in the stasis message bus to reduce messages.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription to add message type to. </td></tr>
    <tr><td class="paramname">type</td><td>The message type we wish to receive. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>17.0.0</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If you are wanting to use stasis_final_message you will need to accept <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a> as a message type.</dd>
<dd>
Until the subscription is set to selective filtering it is possible for it to receive messages of message types that would not normally be accepted. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01025">1025</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message_type_id()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00299">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01470">acl_change_stasis_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28499">add_peer_mwi_subs()</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00230">ast_mwi_subscribe_pool()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01973">ast_res_pjsip_initialize_configuration()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02791">cc_generic_agent_start_monitoring()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01409">create_new_generic_list()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00174">create_parked_subscription_full()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">devstate_init()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08460">load_pbx()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00140">mwi_stasis_subscription_alloc()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01455">network_change_stasis_subscribe()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00892">park_and_announce_app_exec()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00685">parking_manager_enable_stasis()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00625">refer_blind_callback()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00090">stasis_caching_accept_message_type()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00336">stasis_message_router_add_cache_update()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00207">stasis_message_router_create_internal()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01588">xmpp_init_event_distribution()</a>.</p>
<div class="fragment"><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;{</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordflow">if</span> (!subscription) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(type != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(type) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <span class="keywordflow">if</span> (!type || !<a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(type)) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="comment">/* Filtering is unreliable as this message type is not yet initialized</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">       * so force all messages through.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      subscription-&gt;filter = <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;subscription-&gt;accepted_message_types, <a class="code" href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a>(type), 1)) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="comment">/* We do this for the same reason as above. The subscription can still operate, so allow</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">       * it to do so by forcing all messages through.</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      subscription-&gt;filter = <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;   }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="stasis_8h_html_aaa72759806ee4118a78b9d1373c633d2"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a></div><div class="ttdeci">int stasis_message_type_id(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the id of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message.c:109</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00299">stasis.h:299</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a613709cd56550431a4ed3c45e59b72a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a613709cd56550431a4ed3c45e59b72a3">&#9670;&nbsp;</a></span>stasis_subscription_cb_noop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_subscription_cb_noop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stasis subscription callback function that does nothing. </p>
<dl class="section note"><dt>Note</dt><dd>This callback should be used for events are not directly processed, but need to be generated so data can be retrieved from cache later. Subscriptions with this callback can be released with <a class="el" href="../../d0/df4/stasis_8c.html#ab9864d12ae0d2cca19740b90ee3109e9">stasis_unsubscribe</a>, even during module unload.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>13.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00811">811</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, and <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l12095">mkintf()</a>.</p>
<div class="fragment"><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a223dba20686ad9d48d9ea8329984f14b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a223dba20686ad9d48d9ea8329984f14b">&#9670;&nbsp;</a></span>stasis_subscription_decline_message_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_decline_message_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate to a subscription that we are not interested in a message type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription to remove message type from. </td></tr>
    <tr><td class="paramname">type</td><td>The message type we don't wish to receive. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>17.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01055">1055</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message_type_id()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;{</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   <span class="keywordflow">if</span> (!subscription) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(type != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(type) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordflow">if</span> (!type || !<a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(type)) {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a>(type) &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;subscription-&gt;accepted_message_types)) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="comment">/* The memory is already allocated so this can&#39;t fail */</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;subscription-&gt;accepted_message_types, <a class="code" href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a>(type), 0);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;}</div><div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="stasis_8h_html_aaa72759806ee4118a78b9d1373c633d2"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a></div><div class="ttdeci">int stasis_message_type_id(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the id of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message.c:109</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a839350445aaa51cedf31f6daec933ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a839350445aaa51cedf31f6daec933ee0">&#9670;&nbsp;</a></span>stasis_subscription_final_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_final_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether a message is the final message to be received on a subscription. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Subscription on which the message was received. </td></tr>
    <tr><td class="paramname">msg</td><td>Message to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero if the provided message is not the final message. </dd>
<dd>
non-zero if the provided message is the final message. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">1176</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01171">stasis_subscription_uniqueid()</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00894">stasis_subscription_change::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00832">bridge_subscription_change_handler()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00833">caching_topic_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00204">consumer_exec()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00226">consumer_exec_sync()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00451">consumer_finalize()</a>, <a class="el" href="../../d0/dff/res__chan__stats_8c_source.html#l00130">default_route()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00301">device_state_cb()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">dispatch_message()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00203">endpoint_subscription_change()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02761">generic_agent_devstate_cb()</a>, <a class="el" href="../../da/dca/res__stasis__test_8c_source.html#l00108">message_sink_cb()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17528">mwi_event_cb()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01156">mwi_stasis_cb()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00859">park_announce_update_cb()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00158">parker_update_cb()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06261">queue_bridge_cb()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06489">queue_channel_cb()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00181">refer_progress_bridge()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00191">router_dispatch()</a>, <a class="el" href="../../d0/dff/res__chan__stats_8c_source.html#l00057">statsmaker()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00337">sub_subscription_change_handler()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">subscription_invoke()</a>.</p>
<div class="fragment"><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(msg) != <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>()) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   change = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordflow">if</span> (strcmp(<span class="stringliteral">&quot;Unsubscribe&quot;</span>, change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>)) {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a>(sub), change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>)) {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a86a7ba1f3c93ba7ee7583a0d8595025d"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a></div><div class="ttdeci">const char * stasis_subscription_uniqueid(const struct stasis_subscription *sub)</div><div class="ttdoc">Get the unique ID for the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01171">stasis.c:1171</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription_change::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00894">stasis.h:894</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04c69c471e1b836539f280b80b0000de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c69c471e1b836539f280b80b0000de">&#9670;&nbsp;</a></span>stasis_subscription_is_done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_is_done </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether <em>subscription</em> has received its final message. </p>
<p>Note that a subscription is considered done even while the <a class="el" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0" title="Determine whether a message is the final message to be received on a subscription. ">stasis_subscription_final_message()</a> is being processed. This allows cleanup routines to check the status of the subscription.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True (non-zero) if <a class="el" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0" title="Determine whether a message is the final message to be received on a subscription. ">stasis_subscription_final_message()</a> has been received. </dd>
<dd>
False (zero) if waiting for the end. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01120">1120</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00697">stasis_subscription::final_message_rxed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00142">router_dtor()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00062">stasis_caching_topic_dtor()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00278">stasis_message_router_is_done()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00715">subscription_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;{</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">if</span> (subscription) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(subscription);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      ret = subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a09021779b74a40d962db94f3910215d7">final_message_rxed</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(subscription);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <span class="comment">/* Null subscription is about as done as you can get */</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a09021779b74a40d962db94f3910215d7"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a09021779b74a40d962db94f3910215d7">stasis_subscription::final_message_rxed</a></div><div class="ttdeci">int final_message_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00697">stasis.c:697</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd5bedbb2212956dac77be47dceef510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd5bedbb2212956dac77be47dceef510">&#9670;&nbsp;</a></span>stasis_subscription_is_subscribed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_is_subscribed </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether a subscription is currently subscribed. </p>
<p>Note that there may still be messages queued up to be dispatched to this subscription, but the <a class="el" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0" title="Determine whether a message is the final message to be received on a subscription. ">stasis_subscription_final_message()</a> has been enqueued.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Subscription to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False (zero) if subscription is not subscribed. </dd>
<dd>
True (non-zero) if still subscribed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01152">1152</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00232">asterisk_publisher_mwistate_cb()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00142">router_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01648">send_subscription_subscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">send_subscription_unsubscribe()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00062">stasis_caching_topic_dtor()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00715">subscription_dtor()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01364">xmpp_pubsub_devstate_cb()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01336">xmpp_pubsub_mwi_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;{</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <span class="keywordflow">if</span> (sub) {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic = sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(topic);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;subscribers); ++i) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topic-&gt;subscribers, i) == <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(topic);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;         }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(topic);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a68a963557189666f5d733bfb9a826e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68a963557189666f5d733bfb9a826e41">&#9670;&nbsp;</a></span>stasis_subscription_join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_subscription_join </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block until the last message is processed on a subscription. </p>
<p>This function will not return until the <em>subscription's</em> callback for the <a class="el" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0" title="Determine whether a message is the final message to be received on a subscription. ">stasis_subscription_final_message()</a> completes. This allows cleanup routines to run before unblocking the joining thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription to block on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01107">1107</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00700">stasis_subscription::final_message_processed</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00694">stasis_subscription::join_cond</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00146">stasis_caching_unsubscribe_and_join()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>.</p>
<div class="fragment"><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordflow">if</span> (subscription) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(subscription);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="comment">/* Wait until the processed flag has been set */</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">while</span> (!subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#acfba3a8a57e0ab524b78b3734df9043e">final_message_processed</a>) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">join_cond</a>,</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(subscription));</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(subscription);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_a23bbead00056908b13511b20fd390bf6"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">stasis_subscription::join_cond</a></div><div class="ttdeci">ast_cond_t join_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00694">stasis.c:694</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structstasis__subscription_html_acfba3a8a57e0ab524b78b3734df9043e"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#acfba3a8a57e0ab524b78b3734df9043e">stasis_subscription::final_message_processed</a></div><div class="ttdeci">int final_message_processed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00700">stasis.c:700</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d95cf98ebb8880cc602c801a639888e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d95cf98ebb8880cc602c801a639888e">&#9670;&nbsp;</a></span>stasis_subscription_set_congestion_limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_set_congestion_limits </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>low_water</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>high_water</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the high and low alert water marks of the stasis subscription. </p>
<dl class="section since"><dt>Since</dt><dd>13.10.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Pointer to a stasis subscription </td></tr>
    <tr><td class="paramname">low_water</td><td>New queue low water mark. (-1 to set as 90% of high_water) </td></tr>
    <tr><td class="paramname">high_water</td><td>New queue high water mark.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error (water marks not changed). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01013">1013</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00830">ast_taskprocessor_alert_set_levels()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00687">stasis_subscription::mailbox</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00298">stasis_message_router_set_congestion_limits()</a>.</p>
<div class="fragment"><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;{</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keywordflow">if</span> (subscription) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      res = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad4d9150df7126ae11064d38c755d0813">ast_taskprocessor_alert_set_levels</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>,</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;         low_water, high_water);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   }</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;}</div><div class="ttc" id="taskprocessor_8h_html_ad4d9150df7126ae11064d38c755d0813"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ad4d9150df7126ae11064d38c755d0813">ast_taskprocessor_alert_set_levels</a></div><div class="ttdeci">int ast_taskprocessor_alert_set_levels(struct ast_taskprocessor *tps, long low_water, long high_water)</div><div class="ttdoc">Set the high and low alert water marks of the given taskprocessor queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00830">taskprocessor.c:830</a></div></div>
<div class="ttc" id="structstasis__subscription_html_aa4d485b7c131a7229ae4f1054b2f506d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">stasis_subscription::mailbox</a></div><div class="ttdeci">struct ast_taskprocessor * mailbox</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00687">stasis.c:687</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52b5393bef89d7781c0d039d6489de23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b5393bef89d7781c0d039d6489de23">&#9670;&nbsp;</a></span>stasis_subscription_set_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_subscription_set_filter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891">stasis_subscription_message_filter</a>&#160;</td>
          <td class="paramname"><em>filter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the message type filtering level on a subscription. </p>
<p>This will cause the subscription to filter messages according to the provided filter level. For example if selective is used then only messages matching those provided to <a class="el" href="../../d0/df4/stasis_8c.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a> will be raised to the subscription callback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription that should receive all messages. </td></tr>
    <tr><td class="paramname">filter</td><td>What filter to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>17.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01079">1079</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00709">filter()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00299">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01470">acl_change_stasis_subscribe()</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00230">ast_mwi_subscribe_pool()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01973">ast_res_pjsip_initialize_configuration()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02234">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00322">asterisk_start_devicestate_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00401">asterisk_start_mwi_publishing()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02791">cc_generic_agent_start_monitoring()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01409">create_new_generic_list()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00174">create_parked_subscription_full()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">devstate_init()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08460">load_pbx()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01455">network_change_stasis_subscribe()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00892">park_and_announce_app_exec()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00685">parking_manager_enable_stasis()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00625">refer_blind_callback()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00109">stasis_caching_set_filter()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00336">stasis_message_router_add_cache_update()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00397">stasis_message_router_set_formatters_default()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00360">subscribe_device_state()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01588">xmpp_init_event_distribution()</a>.</p>
<div class="fragment"><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;{</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keywordflow">if</span> (!subscription) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keywordflow">if</span> (subscription-&gt;filter != <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a>) {</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      subscription-&gt;filter = <a class="code" href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(subscription-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0f11df7f719d6b220647144b298b1d70">STASIS_SUBSCRIPTION_FILTER_FORCED_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00299">stasis.h:299</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="func__strings_8c_html_af2deb3c7b0d3bdd442bb9ada5fda3d17"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af2deb3c7b0d3bdd442bb9ada5fda3d17">filter</a></div><div class="ttdeci">static int filter(struct ast_channel *chan, const char *cmd, char *parse, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l00709">func_strings.c:709</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa62ce8a618ee8efe43cddcbfb6be1edc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62ce8a618ee8efe43cddcbfb6be1edc">&#9670;&nbsp;</a></span>stasis_subscription_statistics_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a>* stasis_subscription_statistics_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>needs_mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_thread_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00823">823</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01312">ast_str_container_alloc</a>, <a class="el" href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs::file</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00652">stasis_subscription_statistics::file</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00654">stasis_subscription_statistics::func</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00672">stasis_subscription_statistics::lineno</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00674">stasis_subscription_statistics::sub</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00816">subscription_statistics_destroy()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00656">stasis_subscription_statistics::topics</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00676">stasis_subscription_statistics::uniqueid</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00668">stasis_subscription_statistics::uses_mailbox</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00670">stasis_subscription_statistics::uses_threadpool</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;{</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, subscription_stats, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(subscription_statistics), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">if</span> (!subscription_stats) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*statistics) + strlen(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>) + 1, <a class="code" href="../../d0/df4/stasis_8c.html#a1e3661c16fcd586edcb4eb2aa0c494b6">subscription_statistics_destroy</a>);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">if</span> (!statistics) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">topics</a> = <a class="code" href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a>(1);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (!statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">topics</a>) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a> = <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a> = <a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a> = <a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#ad5fa00fe59e725a122fe5f96d8670e20">uses_mailbox</a> = needs_mailbox;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#af7a89c8702252f1e7d912e79bdf7d99d">uses_threadpool</a> = use_thread_pool;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   strcpy(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>, sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a> = <a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(subscription_stats, statistics);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#afc4e949c7b7d0ab565ecfb62c3380171">stasis_subscription_statistics::func</a></div><div class="ttdeci">const char * func</div><div class="ttdoc">The function where the subscription originates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00654">stasis.c:654</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="strings_8h_html_a77f7edf078454c39f51bae4bb400e764"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a></div><div class="ttdeci">#define ast_str_container_alloc(buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01312">strings.h:1312</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a501b314f49b3a9ff6e7be599d94686ee">stasis_subscription_statistics::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdoc">The line number where the subscription originates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00672">stasis.c:672</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8c_html_a1e3661c16fcd586edcb4eb2aa0c494b6"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a1e3661c16fcd586edcb4eb2aa0c494b6">subscription_statistics_destroy</a></div><div class="ttdeci">static void subscription_statistics_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00816">stasis.c:816</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#af0baa3ccdd9d2a6adf03b72e2bea5789">stasis_subscription_statistics::file</a></div><div class="ttdeci">const char * file</div><div class="ttdoc">The filename where the subscription originates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00652">stasis.c:652</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a6a51d6ccf4e2b62fbdea2ee744af5442"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">stasis_subscription_statistics::topics</a></div><div class="ttdeci">struct ao2_container * topics</div><div class="ttdoc">Names of the topics we are subscribed to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00656">stasis.c:656</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_ad5fa00fe59e725a122fe5f96d8670e20"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#ad5fa00fe59e725a122fe5f96d8670e20">stasis_subscription_statistics::uses_mailbox</a></div><div class="ttdeci">int uses_mailbox</div><div class="ttdoc">Using a mailbox to queue messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00668">stasis.c:668</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_af7a89c8702252f1e7d912e79bdf7d99d"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#af7a89c8702252f1e7d912e79bdf7d99d">stasis_subscription_statistics::uses_threadpool</a></div><div class="ttdeci">int uses_threadpool</div><div class="ttdoc">Using stasis threadpool for handling messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00670">stasis.c:670</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a1a905b721c77a2bb137f7a655f9d9428"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">stasis_subscription_statistics::uniqueid</a></div><div class="ttdeci">char uniqueid[0]</div><div class="ttdoc">Unique ID of the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00676">stasis.c:676</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a03bb86c52b8e22ea4325ea04e6443fa0">stasis_subscription_statistics::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdoc">Pointer to the subscription (NOT refcounted, and must NOT be accessed) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00674">stasis.c:674</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86a7ba1f3c93ba7ee7583a0d8595025d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86a7ba1f3c93ba7ee7583a0d8595025d">&#9670;&nbsp;</a></span>stasis_subscription_uniqueid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* stasis_subscription_uniqueid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the unique ID for the subscription. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Subscription for which to get the unique ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Unique ID for the subscription. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01171">1171</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01203">topic_add_subscription()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01231">topic_remove_subscription()</a>.</p>
<div class="fragment"><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;{</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordflow">return</span> sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acac26206b971b094c90839b4049cb6cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac26206b971b094c90839b4049cb6cc">&#9670;&nbsp;</a></span>stasis_topic_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* stasis_topic_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the new topic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New topic instance. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12</dd></dl>
<dl class="section note"><dt>Note</dt><dd>There is no explicit ability to unsubscribe all subscribers from a topic and destroy it. As a result the topic can persist until the last subscriber unsubscribes itself even if there is no publisher.</dd>
<dd>
Topic names should be in the form of &lt;subsystem&gt;:&lt;functionality&gt;[/&lt;object&gt;] </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">618</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">stasis_topic_create_with_detail()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00915">app_create()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03205">app_init()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01527">ast_channel_internal_setup_topics()</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00053">ast_parking_stasis_init()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00495">ast_presence_state_engine_init()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03622">ast_rtp_engine_init()</a>, <a class="el" href="../../d8/d30/main_2security__events_8c_source.html#l00483">ast_security_stasis_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01666">ast_stasis_channels_init()</a>, <a class="el" href="../../df/da0/stasis__system_8c_source.html#l00373">ast_stasis_system_init()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">AST_TEST_DEFINE()</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l01221">ast_test_init()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02154">create_cts()</a>, <a class="el" href="../../da/dc9/cel_8c_source.html#l01454">create_subscriptions()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">devstate_init()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l04522">load_module()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00065">stasis_cp_all_create()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00162">stasis_cp_sink_create()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00324">stasis_state_manager_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>, and <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00167">state_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;{</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/stasis_8c.html#a6b49e1209c8280ab73a25585068b04cc">stasis_topic_create_with_detail</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a6b49e1209c8280ab73a25585068b04cc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6b49e1209c8280ab73a25585068b04cc">stasis_topic_create_with_detail</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create_with_detail(const char *name, const char *detail)</div><div class="ttdoc">Create a new topic with given detail. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00569">stasis.c:569</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b49e1209c8280ab73a25585068b04cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b49e1209c8280ab73a25585068b04cc">&#9670;&nbsp;</a></span>stasis_topic_create_with_detail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* stasis_topic_create_with_detail </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>detail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new topic with given detail. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the new topic. </td></tr>
    <tr><td class="paramname">detail</td><td>Detail description of the new topic. i.e. "Queue main topic for subscribing every queue event" </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New topic instance. </dd>
<dd>
<code>NULL</code> on error.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>There is no explicit ability to unsubscribe all subscribers from a topic and destroy it. As a result the topic can persist until the last subscriber unsubscribes itself even if there is no publisher. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">569</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00409">ao2_t_alloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00302">INITIAL_SUBSCRIBERS_MAX</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00501">link_topic_proxy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00623">stasis_topic_get()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00472">stasis_topic_statistics_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00434">topic_dtor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>|| !strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) || !detail) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Creating topic. name: %s, detail: %s\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, detail);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   topic = <a class="code" href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">if</span> (topic) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Topic is already exist. name: %s, detail: %s\n&quot;</span>,</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, detail);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span> topic;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   topic = <a class="code" href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a>(<span class="keyword">sizeof</span>(*topic), <a class="code" href="../../d0/df4/stasis_8c.html#a5452a83caf693562327d1b86c5748703">topic_dtor</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordflow">if</span> (!topic) {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   res |= <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;topic-&gt;subscribers, <a class="code" href="../../d0/df4/stasis_8c.html#a1a7335532b05804a34da6dead8e50a9d">INITIAL_SUBSCRIBERS_MAX</a>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   res |= <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;topic-&gt;upstream_topics, 0);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="comment">/* link to the proxy */</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/df4/stasis_8c.html#a786a897527c7c44864c2c9f289a90c73">link_topic_proxy</a>(topic, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, detail)) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   topic-&gt;statistics = <a class="code" href="../../d0/df4/stasis_8c.html#a4bad26ce576a9d2ed0a1116ed10ee730">stasis_topic_statistics_create</a>(topic);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keywordflow">if</span> (!topic-&gt;statistics) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Topic &#39;%s&#39;: %p created\n&quot;</span>, topic-&gt;name, topic);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">return</span> topic;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad57326008c326db88dc36779741622b8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a></div><div class="ttdeci">#define ao2_t_alloc(data_size, destructor_fn, debug_msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00409">astobj2.h:409</a></div></div>
<div class="ttc" id="stasis_8c_html_a5452a83caf693562327d1b86c5748703"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a5452a83caf693562327d1b86c5748703">topic_dtor</a></div><div class="ttdeci">static void topic_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00434">stasis.c:434</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="stasis_8c_html_a786a897527c7c44864c2c9f289a90c73"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a786a897527c7c44864c2c9f289a90c73">link_topic_proxy</a></div><div class="ttdeci">static int link_topic_proxy(struct stasis_topic *topic, const char *name, const char *detail)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00501">stasis.c:501</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="stasis_8c_html_a4bad26ce576a9d2ed0a1116ed10ee730"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a4bad26ce576a9d2ed0a1116ed10ee730">stasis_topic_statistics_create</a></div><div class="ttdeci">static struct stasis_topic_statistics * stasis_topic_statistics_create(struct stasis_topic *topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00472">stasis.c:472</a></div></div>
<div class="ttc" id="stasis_8c_html_a1a7335532b05804a34da6dead8e50a9d"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a1a7335532b05804a34da6dead8e50a9d">INITIAL_SUBSCRIBERS_MAX</a></div><div class="ttdeci">#define INITIAL_SUBSCRIBERS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00302">stasis.c:302</a></div></div>
<div class="ttc" id="stasis_8c_html_a02f065d129b21343b13a9eeb1c740771"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a02f065d129b21343b13a9eeb1c740771">stasis_topic_get</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_get(const char *name)</div><div class="ttdoc">Get a topic of the given name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00623">stasis.c:623</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e5e4d29943a4dd27300887dc88ece28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e5e4d29943a4dd27300887dc88ece28">&#9670;&nbsp;</a></span>stasis_topic_detail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* stasis_topic_detail </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the detail of a topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Detail of the topic. </dd>
<dd>
<code>NULL</code> if topic is <code>NULL</code>. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00636">636</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;{</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordflow">if</span> (!topic) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keywordflow">return</span> topic-&gt;detail;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02f065d129b21343b13a9eeb1c740771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02f065d129b21343b13a9eeb1c740771">&#9670;&nbsp;</a></span>stasis_topic_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* stasis_topic_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a topic of the given name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Topic's name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Name of the topic. </dd>
<dd>
<code>NULL</code> on error or not exist.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This SHOULD NOT be used in normal operation for publishing messages. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00623">623</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01768">ao2_weakproxy_find</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00501">link_topic_proxy()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02417">stasis_show_topic()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">stasis_topic_create_with_detail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#aa78a383f537bc7a35efb8eaabcdc44e9">ao2_weakproxy_find</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="stasis_8c_html_ae14b5f72d5278c2e22621748fba0610b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></div><div class="ttdeci">struct ao2_container * topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00396">stasis.c:396</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa78a383f537bc7a35efb8eaabcdc44e9"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa78a383f537bc7a35efb8eaabcdc44e9">ao2_weakproxy_find</a></div><div class="ttdeci">#define ao2_weakproxy_find(c, arg, flags, tag)</div><div class="ttdoc">Perform an ao2_find on a container with ao2_weakproxy objects, returning the real object...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01768">astobj2.h:1768</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af23deee342575033bc73311b1215d886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af23deee342575033bc73311b1215d886">&#9670;&nbsp;</a></span>stasis_topic_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* stasis_topic_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the name of a topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Name of the topic. </dd>
<dd>
<code>NULL</code> if topic is <code>NULL</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">628</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00833">caching_topic_exec()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00948">stasis_caching_topic_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00062">stasis_caching_topic_dtor()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00207">stasis_message_router_create_internal()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00531">stasis_state_add_publisher()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00412">stasis_state_add_subscriber()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00324">stasis_state_manager_create()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00446">stasis_state_subscribe_pool()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01864">stasis_topic_pool_delete_topic()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00167">state_alloc()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00104">state_id_by_topic()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00292">state_manager_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01203">topic_add_subscription()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01744">topic_pool_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01784">topic_pool_entry_cmp()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01231">topic_remove_subscription()</a>.</p>
<div class="fragment"><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordflow">if</span> (!topic) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keywordflow">return</span> topic-&gt;name;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb9a69946c2be89329630328f125330d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb9a69946c2be89329630328f125330d">&#9670;&nbsp;</a></span>stasis_topic_pool_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a>* stasis_topic_pool_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>pooled_topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a topic pool that routes messages from dynamically generated topics to the given topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pooled_topic</td><td>Topic to which messages will be routed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> </dd>
<dd>
<code>NULL</code> on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">1833</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00958">ao2_container_register()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01740">stasis_topic_pool::pool_container</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01741">stasis_topic_pool::pool_topic</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00305">TOPIC_POOL_BUCKETS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01744">topic_pool_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01784">topic_pool_entry_cmp()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01763">topic_pool_entry_hash()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03205">app_init()</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l01407">ast_stasis_bridging_init()</a>, and <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00898">devstate_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;{</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   pool = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*pool), <a class="code" href="../../d0/df4/stasis_8c.html#a48c5592db184a6f1d2055845a0bd94aa">topic_pool_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   }</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#a551da25f7ccf7648107004ad73424064">TOPIC_POOL_BUCKETS</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a6e61da6e3b66f39e64e8de751c3867c0">topic_pool_entry_hash</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a669f6c3dbec7c74b97b5b388bfa999c3">topic_pool_entry_cmp</a>);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="keywordflow">if</span> (!pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>) {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(pool);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="preprocessor">#ifdef AO2_DEBUG</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   {</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <span class="keywordtype">char</span> *container_name =</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(strlen(<a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(pooled_topic)) + strlen(<span class="stringliteral">&quot;-pool&quot;</span>) + 1);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      sprintf(container_name, <span class="stringliteral">&quot;%s-pool&quot;</span>, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(pooled_topic));</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a>(container_name, pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>, topic_pool_prnt_obj);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;   }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(pooled_topic, +1);</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a> = pooled_topic;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="stasis_8c_html_a551da25f7ccf7648107004ad73424064"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a551da25f7ccf7648107004ad73424064">TOPIC_POOL_BUCKETS</a></div><div class="ttdeci">#define TOPIC_POOL_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00305">stasis.c:305</a></div></div>
<div class="ttc" id="stasis_8c_html_a48c5592db184a6f1d2055845a0bd94aa"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a48c5592db184a6f1d2055845a0bd94aa">topic_pool_dtor</a></div><div class="ttdeci">static void topic_pool_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01744">stasis.c:1744</a></div></div>
<div class="ttc" id="stasis_8c_html_a669f6c3dbec7c74b97b5b388bfa999c3"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a669f6c3dbec7c74b97b5b388bfa999c3">topic_pool_entry_cmp</a></div><div class="ttdeci">static int topic_pool_entry_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01784">stasis.c:1784</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a1c800fe69edb831327a694a01d61af71"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">stasis_topic_pool::pool_container</a></div><div class="ttdeci">struct ao2_container * pool_container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01740">stasis.c:1740</a></div></div>
<div class="ttc" id="stasis_8c_html_a6e61da6e3b66f39e64e8de751c3867c0"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a6e61da6e3b66f39e64e8de751c3867c0">topic_pool_entry_hash</a></div><div class="ttdeci">static int topic_pool_entry_hash(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01763">stasis.c:1763</a></div></div>
<div class="ttc" id="astobj2_8h_html_abdb952d2373503555d96f02f130c5770"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a></div><div class="ttdeci">int ao2_container_register(const char *name, struct ao2_container *self, ao2_prnt_obj_fn *prnt_obj)</div><div class="ttdoc">Register a container for CLI stats and integrity check. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00958">astobj2_container.c:958</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01739">stasis.c:1739</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a4d4893d86a646368c7187e1d2540241a"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">stasis_topic_pool::pool_topic</a></div><div class="ttdeci">struct stasis_topic * pool_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01741">stasis.c:1741</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1dfabff07a77d235b2b16d2b564f5c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dfabff07a77d235b2b16d2b564f5c4b">&#9670;&nbsp;</a></span>stasis_topic_pool_delete_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stasis_topic_pool_delete_topic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a topic from the topic pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool from which to delete the topic </td></tr>
    <tr><td class="paramname">topic_name</td><td>Name of the topic to delete in the form of &lt;pool_topic_name&gt;/&lt;topic_name&gt; or just &lt;topic_name&gt;</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.24 </dd>
<dd>
15.6 </dd>
<dd>
16.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01864">1864</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01740">stasis_topic_pool::pool_container</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01741">stasis_topic_pool::pool_topic</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00319">bridge_topics_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;{</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">    * The topic_name passed in could be a fully-qualified name like &lt;pool_topic_name&gt;/&lt;topic_name&gt;</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">    * or just &lt;topic_name&gt;.  If it&#39;s fully qualified, we need to skip past &lt;pool_topic_name&gt;</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">    * name and search only on &lt;topic_name&gt;.</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *pool_topic_name = <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a>);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   <span class="keywordtype">int</span> pool_topic_name_len = strlen(pool_topic_name);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *search_topic_name;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="keywordflow">if</span> (strncmp(pool_topic_name, topic_name, pool_topic_name_len) == 0) {</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      search_topic_name = topic_name + pool_topic_name_len + 1;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      search_topic_name = topic_name;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   }</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>, search_topic_name, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a>);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a1c800fe69edb831327a694a01d61af71"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">stasis_topic_pool::pool_container</a></div><div class="ttdeci">struct ao2_container * pool_container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01740">stasis.c:1740</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a4d4893d86a646368c7187e1d2540241a"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">stasis_topic_pool::pool_topic</a></div><div class="ttdeci">struct stasis_topic * pool_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01741">stasis.c:1741</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ee1df597af46f3b489cce002b604a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ee1df597af46f3b489cce002b604a89">&#9670;&nbsp;</a></span>stasis_topic_pool_get_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* stasis_topic_pool_get_topic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find or create a topic in the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool for which to get the topic </td></tr>
    <tr><td class="paramname">topic_name</td><td>Name of the topic to get </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The already stored or newly allocated topic </dd>
<dd>
<code>NULL</code> if the topic was not found and could not be allocated </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">1884</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01710">topic_pool_entry::forward</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01740">stasis_topic_pool::pool_container</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01741">stasis_topic_pool::pool_topic</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01711">topic_pool_entry::topic</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01724">topic_pool_entry_alloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00683">ast_device_state_topic()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03189">ast_queue_topic()</a>, and <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00295">bridge_topics_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;{</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *, <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(topic_container_lock, pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   <span class="keywordtype">char</span> *new_topic_name;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>, topic_name, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> = <a class="code" href="../../d0/df4/stasis_8c.html#a31134d792ae64e6f21060b8e7ffd49fc">topic_pool_entry_alloc</a>(topic_name);</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   <span class="comment">/* To provide further detail and to ensure that the topic is unique within the scope of the</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment">    * system we prefix it with the pooling topic name, which should itself already be unique.</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;new_topic_name, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a>), topic_name);</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../d0/df4/stasis_8c.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(new_topic_name);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(new_topic_name);</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a>) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   }</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd101b3d2cc1eb673b30afb631718b79">forward</a> = <a class="code" href="../../d0/df4/stasis_8c.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a>);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd101b3d2cc1eb673b30afb631718b79">forward</a>) {</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   }</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>, <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>)) {</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   }</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;}</div><div class="ttc" id="structtopic__pool__entry_html"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01709">stasis.c:1709</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="stasis_8c_html_a31134d792ae64e6f21060b8e7ffd49fc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a31134d792ae64e6f21060b8e7ffd49fc">topic_pool_entry_alloc</a></div><div class="ttdeci">static struct topic_pool_entry * topic_pool_entry_alloc(const char *topic_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01724">stasis.c:1724</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a1c800fe69edb831327a694a01d61af71"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">stasis_topic_pool::pool_container</a></div><div class="ttdeci">struct ao2_container * pool_container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01740">stasis.c:1740</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stasis_8c_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic_pool_entry::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01711">stasis.c:1711</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a4d4893d86a646368c7187e1d2540241a"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">stasis_topic_pool::pool_topic</a></div><div class="ttdeci">struct stasis_topic * pool_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01741">stasis.c:1741</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html_afd101b3d2cc1eb673b30afb631718b79"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html#afd101b3d2cc1eb673b30afb631718b79">topic_pool_entry::forward</a></div><div class="ttdeci">struct stasis_forward * forward</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01710">stasis.c:1710</a></div></div>
<div class="ttc" id="stasis_8c_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a947db1503987a5c215dbc7240800a13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a947db1503987a5c215dbc7240800a13d">&#9670;&nbsp;</a></span>stasis_topic_pool_topic_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stasis_topic_pool_topic_exists </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a topic exists in a pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to check </td></tr>
    <tr><td class="paramname">topic_name</td><td>Name of the topic to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>exists </td></tr>
    <tr><td class="paramname">0</td><td>does not exist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.23.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01927">1927</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01740">stasis_topic_pool::pool_container</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   topic_pool_entry = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>, topic_name, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <span class="keywordflow">if</span> (!topic_pool_entry) {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   }</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_pool_entry, -1);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;}</div><div class="ttc" id="structtopic__pool__entry_html"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01709">stasis.c:1709</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a1c800fe69edb831327a694a01d61af71"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">stasis_topic_pool::pool_container</a></div><div class="ttdeci">struct ao2_container * pool_container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01740">stasis.c:1740</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4bad26ce576a9d2ed0a1116ed10ee730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bad26ce576a9d2ed0a1116ed10ee730">&#9670;&nbsp;</a></span>stasis_topic_statistics_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct stasis_topic_statistics* stasis_topic_statistics_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00472">472</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01312">ast_str_container_alloc</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00465">topic_statistics_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">stasis_topic_create_with_detail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keyword">struct </span>stasis_topic_statistics *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *, topic_stats, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(topic_statistics), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">if</span> (!topic_stats) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*statistics) + strlen(topic-&gt;name) + 1, <a class="code" href="../../d0/df4/stasis_8c.html#a669245e59f5abe87b6109b95710ebfc7">topic_statistics_destroy</a>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">if</span> (!statistics) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   statistics-&gt;subscribers = <a class="code" href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a>(1);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">if</span> (!statistics-&gt;subscribers) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="comment">/* This is strictly used for the pointer address when showing the topic */</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   statistics-&gt;topic = topic;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   strcpy(statistics-&gt;name, topic-&gt;name); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(topic_stats, statistics);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="strings_8h_html_a77f7edf078454c39f51bae4bb400e764"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a77f7edf078454c39f51bae4bb400e764">ast_str_container_alloc</a></div><div class="ttdeci">#define ast_str_container_alloc(buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01312">strings.h:1312</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis_8c_html_a669245e59f5abe87b6109b95710ebfc7"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a669245e59f5abe87b6109b95710ebfc7">topic_statistics_destroy</a></div><div class="ttdeci">static void topic_statistics_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00465">stasis.c:465</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a461ec3c31a2f54d7c001b0ead6c7313d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a461ec3c31a2f54d7c001b0ead6c7313d">&#9670;&nbsp;</a></span>stasis_topic_subscribers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t stasis_topic_subscribers </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of subscribers of a topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of subscribers of the topic. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>17.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00644">644</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00833">caching_topic_exec()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01432">publish_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;subscribers);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div><div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9864d12ae0d2cca19740b90ee3109e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9864d12ae0d2cca19740b90ee3109e9">&#9670;&nbsp;</a></span>stasis_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* stasis_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel a subscription. </p>
<p>Note that in an asynchronous system, there may still be messages queued or in transit to the subscription's callback. These will still be delivered. There will be a final 'SubscriptionCancelled' message, indicating the delivery of the final message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription to cancel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>NULL</code> for convenience </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">973</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00687">stasis_subscription::mailbox</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">send_subscription_unsubscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00966">sub_cleanup()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01231">topic_remove_subscription()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00314">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02911">cc_generic_agent_destructor()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02145">destroy_cts()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02761">generic_agent_devstate_cb()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01396">generic_monitor_instance_list_destructor()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01483">mwi_startup_event_cb()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00892">park_and_announce_app_exec()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00076">parked_subscription_datastore_destroy()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00181">refer_progress_bridge()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00349">refer_progress_destroy()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00297">refer_progress_framehook_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l35461">startup_event_cb()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00119">stasis_caching_unsubscribe()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00258">stasis_message_router_unsubscribe()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00470">stasis_state_unsubscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">stasis_unsubscribe_and_join()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01772">subscription_persistence_event_cb()</a>, <a class="el" href="../../d2/dd0/res__mwi__devstate_8c_source.html#l00064">unload_module()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01588">xmpp_init_event_distribution()</a>.</p>
<div class="fragment"><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;{</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="comment">/* The subscription may be the last ref to this topic. Hold</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">    * the topic ref open until after the unlock. */</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   topic = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <span class="comment">/* We have to remove the subscription first, to ensure the unsubscribe</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">    * is the final message */</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>, sub) != 0) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         <span class="stringliteral">&quot;Internal error: subscription has invalid topic\n&quot;</span>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(topic);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="comment">/* Now let everyone know about the unsubscribe */</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#a8c683cc9e9e3d1c9ce2f20c97cf69feb">send_subscription_unsubscribe</a>(topic, sub);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="comment">/* When all that&#39;s done, remove the ref the mailbox has on the sub */</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a3273b186b9627de5e6eecd8ac8230a41">sub_cleanup</a>, sub)) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;         <span class="comment">/* Nothing we can do here, the conditional is just to keep</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">          * the compiler happy that we&#39;re not ignoring the result. */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="comment">/* Unsubscribing unrefs the subscription */</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sub);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(topic);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div><div class="ttc" id="stasis_8c_html_aedcfe63e48121eabbf8ec304cee1d7bd"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a></div><div class="ttdeci">static int topic_remove_subscription(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01231">stasis.c:1231</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="stasis_8c_html_a3273b186b9627de5e6eecd8ac8230a41"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a3273b186b9627de5e6eecd8ac8230a41">sub_cleanup</a></div><div class="ttdeci">static int sub_cleanup(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00966">stasis.c:966</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stasis_8c_html_a8c683cc9e9e3d1c9ce2f20c97cf69feb"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a8c683cc9e9e3d1c9ce2f20c97cf69feb">send_subscription_unsubscribe</a></div><div class="ttdeci">static void send_subscription_unsubscribe(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01676">stasis.c:1676</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structstasis__subscription_html_aa4d485b7c131a7229ae4f1054b2f506d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">stasis_subscription::mailbox</a></div><div class="ttdeci">struct ast_taskprocessor * mailbox</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00687">stasis.c:687</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a221d05010106dcde0cc2e2b43c1a8b67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a221d05010106dcde0cc2e2b43c1a8b67">&#9670;&nbsp;</a></span>stasis_unsubscribe_and_join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a>* stasis_unsubscribe_and_join </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel a subscription, blocking until the last message is processed. </p>
<p>While normally it's recommended to <a class="el" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b" title="Cancel a subscription. ">stasis_unsubscribe()</a> and wait for <a class="el" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0" title="Determine whether a message is the final message to be received on a subscription. ">stasis_subscription_final_message()</a>, there are times (like during a module unload) where you have to wait for the final message (otherwise you'll call a function in a shared module that no longer exists).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription to cancel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>NULL</code> for convenience </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01136">1136</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01107">stasis_subscription_join()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17573">acl_change_event_stasis_unsubscribe()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01480">acl_change_stasis_unsubscribe()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02219">ast_res_pjsip_destroy_configuration()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l03528">ast_xmpp_client_disconnect()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00374">asterisk_stop_devicestate_publishing()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00452">asterisk_stop_mwi_publishing()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00881">devstate_cleanup()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01465">network_change_stasis_unsubscribe()</a>, <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00705">parking_manager_disable_stasis()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00705">presence_change_common()</a>, <a class="el" href="../../dd/d71/res__stasis__device__state_8c_source.html#l00151">remove_device_state_subscription()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router_unsubscribe_and_join()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00477">stasis_state_unsubscribe_and_join()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11250">unload_module()</a>, and <a class="el" href="../../db/d94/pbx_8c_source.html#l08448">unload_pbx()</a>.</p>
<div class="fragment"><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;{</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <span class="keywordflow">if</span> (!subscription) {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="comment">/* Bump refcount to hold it past the unsubscribe */</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription, +1);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#ab9864d12ae0d2cca19740b90ee3109e9">stasis_unsubscribe</a>(subscription);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <a class="code" href="../../d0/df4/stasis_8c.html#a68a963557189666f5d733bfb9a826e41">stasis_subscription_join</a>(subscription);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   <span class="comment">/* Now decrement the refcount back */</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(subscription);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8c_html_ab9864d12ae0d2cca19740b90ee3109e9"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ab9864d12ae0d2cca19740b90ee3109e9">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *sub)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis_8c_html_a68a963557189666f5d733bfb9a826e41"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a68a963557189666f5d733bfb9a826e41">stasis_subscription_join</a></div><div class="ttdeci">void stasis_subscription_join(struct stasis_subscription *subscription)</div><div class="ttdoc">Block until the last message is processed on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01107">stasis.c:1107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b17ee784eba168bb1ef04892f25af19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b17ee784eba168bb1ef04892f25af19">&#9670;&nbsp;</a></span>statistics_show_messages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* statistics_show_messages </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02865">2865</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00670">AST_VECTOR_GET_ADDR</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00343">stasis_message_type_statistics::message_type</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00347">message_type_statistics_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00339">stasis_message_type_statistics::published</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00341">stasis_message_type_statistics::unused</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;{</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   <span class="keywordtype">int</span> published = 0;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;   <span class="keywordtype">int</span> unused = 0;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="preprocessor">#define FMT_HEADERS     &quot;%-64s %10s %10s\n&quot;</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="preprocessor">#define FMT_FIELDS      &quot;%-64s %10d %10d\n&quot;</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis statistics show messages&quot;</span>;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;         <span class="stringliteral">&quot;Usage: stasis statistics show messages\n&quot;</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;         <span class="stringliteral">&quot;  Shows a list of message types and their general statistics\n&quot;</span>;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;   }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   }</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span> <a class="code" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <span class="stringliteral">&quot;Message Type&quot;</span>, <span class="stringliteral">&quot;Published&quot;</span>, <span class="stringliteral">&quot;Unused&quot;</span>);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a>);</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;message_type_statistics); ++i) {</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a> = <a class="code" href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a>(&amp;message_type_statistics, i);</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      <span class="keywordflow">if</span> (!statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#add6b02fb3f4bece79957e0b9a1355440">message_type</a>) {</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      }</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, <a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#add6b02fb3f4bece79957e0b9a1355440">message_type</a>), statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a4bb7cb4220849b6b01585abfeac40731">published</a>,</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;         statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a2ff411b23972f6578df341c33895d3e2">unused</a>);</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      published += statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a4bb7cb4220849b6b01585abfeac40731">published</a>;</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      unused += statistics-&gt;<a class="code" href="../../de/d39/structstasis__message__type__statistics.html#a2ff411b23972f6578df341c33895d3e2">unused</a>;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;      ++count;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   }</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a>);</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, <span class="stringliteral">&quot;Total&quot;</span>, published, unused);</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%d seen message types\n\n&quot;</span>, count);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="preprocessor">#undef FMT_HEADERS</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="preprocessor">#undef FMT_FIELDS</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="stasis_8c_html_a28e4a2cd5d9cefd5714c0a3ce2a35499"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a></div><div class="ttdeci">#define FMT_FIELDS</div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html_a2ff411b23972f6578df341c33895d3e2"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html#a2ff411b23972f6578df341c33895d3e2">stasis_message_type_statistics::unused</a></div><div class="ttdeci">int unused</div><div class="ttdoc">The number of messages of this that did not reach a subscriber. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00341">stasis.c:341</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="stasis_8c_html_a87031d017d60611ca33ad816139d0e06"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a87031d017d60611ca33ad816139d0e06">message_type_statistics_lock</a></div><div class="ttdeci">static ast_mutex_t message_type_statistics_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00347">stasis.c:347</a></div></div>
<div class="ttc" id="vector_8h_html_af613aa5306ff5ad101734708861d634e"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af613aa5306ff5ad101734708861d634e">AST_VECTOR_GET_ADDR</a></div><div class="ttdeci">#define AST_VECTOR_GET_ADDR(vec, idx)</div><div class="ttdoc">Get an address of element in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00670">vector.h:670</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html">stasis_message_type_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00337">stasis.c:337</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html_a4bb7cb4220849b6b01585abfeac40731"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html#a4bb7cb4220849b6b01585abfeac40731">stasis_message_type_statistics::published</a></div><div class="ttdeci">int published</div><div class="ttdoc">The number of messages of this published. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00339">stasis.c:339</a></div></div>
<div class="ttc" id="stasis_8c_html_a23b24e0f93569bfc937a4bc9143c21e3"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a></div><div class="ttdeci">#define FMT_HEADERS</div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structstasis__message__type__statistics_html_add6b02fb3f4bece79957e0b9a1355440"><div class="ttname"><a href="../../de/d39/structstasis__message__type__statistics.html#add6b02fb3f4bece79957e0b9a1355440">stasis_message_type_statistics::message_type</a></div><div class="ttdeci">struct stasis_message_type * message_type</div><div class="ttdoc">The stasis message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00343">stasis.c:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e8b446f15d713c18213991e2e827014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8b446f15d713c18213991e2e827014">&#9670;&nbsp;</a></span>statistics_show_subscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* statistics_show_subscription </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02604">2604</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d0/df4/stasis_8c.html#aec1ea12381514da43d4826808a21efc1">AO2_STRING_FIELD_SORT_FN()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00652">stasis_subscription_statistics::file</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00654">stasis_subscription_statistics::func</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00660">stasis_subscription_statistics::highest_time_invoked</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00658">stasis_subscription_statistics::highest_time_message_type</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00672">stasis_subscription_statistics::lineno</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00662">stasis_subscription_statistics::lowest_time_invoked</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00664">stasis_subscription_statistics::messages_dropped</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00666">stasis_subscription_statistics::messages_passed</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message_type_name()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00674">stasis_subscription_statistics::sub</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02570">subscription_statistics_complete_name()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00656">stasis_subscription_statistics::topics</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00676">stasis_subscription_statistics::uniqueid</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00668">stasis_subscription_statistics::uses_mailbox</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00670">stasis_subscription_statistics::uses_threadpool</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;{</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *subscription_stats;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis statistics show subscription&quot;</span>;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;          <span class="stringliteral">&quot;Usage: stasis statistics show subscription &lt;uniqueid&gt;\n&quot;</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;          <span class="stringliteral">&quot;       Show stasis subscription statistics.\n&quot;</span>;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 4) {</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/stasis_8c.html#abcdff136f20313f7d25599d92e099b72">subscription_statistics_complete_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      }</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   }</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 5) {</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   }</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   subscription_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(subscription_statistics);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;   <span class="keywordflow">if</span> (!subscription_stats) {</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not fetch subcription_statistics container\n&quot;</span>);</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;   }</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(subscription_stats, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <span class="keywordflow">if</span> (!statistics) {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Specified subscription &#39;%s&#39; does not exist\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   }</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Subscription: %s\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Pointer Address: %p\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a03bb86c52b8e22ea4325ea04e6443fa0">sub</a>);</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Source filename: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, <span class="stringliteral">&quot;&lt;unavailable&gt;&quot;</span>));</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Source line number: %d\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Source function: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>, <span class="stringliteral">&quot;&lt;unavailable&gt;&quot;</span>));</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of messages dropped due to filtering: %d\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#aa4e531d581599f64aabbb8e0d3993a6e">messages_dropped</a>);</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of messages passed to subscriber callback: %d\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a86fdf2ac1af9769def6fd92b7a3c48d3">messages_passed</a>);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Using mailbox to queue messages: %s\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#ad5fa00fe59e725a122fe5f96d8670e20">uses_mailbox</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Using stasis threadpool for handling messages: %s\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#af7a89c8702252f1e7d912e79bdf7d99d">uses_threadpool</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Lowest amount of time (in milliseconds) spent invoking message: %ld\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a935ee5b3fccf94f92536c8d721012fc0">lowest_time_invoked</a>);</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Highest amount of time (in milliseconds) spent invoking message: %ld\n&quot;</span>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#af2ae30a31c9c7b9c8fab6507689215de">highest_time_invoked</a>);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(statistics);</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   <span class="keywordflow">if</span> (statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#aafa98169890db4d225634c14d67b7f1a">highest_time_message_type</a>) {</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Offender message type for highest invoking time: %s\n&quot;</span>, <a class="code" href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#aafa98169890db4d225634c14d67b7f1a">highest_time_message_type</a>));</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;   }</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(statistics);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of topics: %d\n&quot;</span>, <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">topics</a>));</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Subscribed topics:\n&quot;</span>);</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">topics</a>, 0);</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   <span class="keywordflow">while</span> ((name = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\t%s\n&quot;</span>, name);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(name, -1);</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;   }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8c_html_abcdff136f20313f7d25599d92e099b72"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#abcdff136f20313f7d25599d92e099b72">subscription_statistics_complete_name</a></div><div class="ttdeci">static char * subscription_statistics_complete_name(const char *word, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02570">stasis.c:2570</a></div></div>
<div class="ttc" id="stasis_8h_html_aefd78086150c89477f5851f2836e0478"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aefd78086150c89477f5851f2836e0478">stasis_message_type_name</a></div><div class="ttdeci">const char * stasis_message_type_name(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the name of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00099">stasis_message.c:99</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#afc4e949c7b7d0ab565ecfb62c3380171">stasis_subscription_statistics::func</a></div><div class="ttdeci">const char * func</div><div class="ttdoc">The function where the subscription originates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00654">stasis.c:654</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_af2ae30a31c9c7b9c8fab6507689215de"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#af2ae30a31c9c7b9c8fab6507689215de">stasis_subscription_statistics::highest_time_invoked</a></div><div class="ttdeci">long highest_time_invoked</div><div class="ttdoc">Highest time spent invoking a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00660">stasis.c:660</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a501b314f49b3a9ff6e7be599d94686ee">stasis_subscription_statistics::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdoc">The line number where the subscription originates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00672">stasis.c:672</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#af0baa3ccdd9d2a6adf03b72e2bea5789">stasis_subscription_statistics::file</a></div><div class="ttdeci">const char * file</div><div class="ttdoc">The filename where the subscription originates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00652">stasis.c:652</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a86fdf2ac1af9769def6fd92b7a3c48d3"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a86fdf2ac1af9769def6fd92b7a3c48d3">stasis_subscription_statistics::messages_passed</a></div><div class="ttdeci">int messages_passed</div><div class="ttdoc">The number of messages that passed filtering. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00666">stasis.c:666</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a6a51d6ccf4e2b62fbdea2ee744af5442"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">stasis_subscription_statistics::topics</a></div><div class="ttdeci">struct ao2_container * topics</div><div class="ttdoc">Names of the topics we are subscribed to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00656">stasis.c:656</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_ad5fa00fe59e725a122fe5f96d8670e20"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#ad5fa00fe59e725a122fe5f96d8670e20">stasis_subscription_statistics::uses_mailbox</a></div><div class="ttdeci">int uses_mailbox</div><div class="ttdoc">Using a mailbox to queue messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00668">stasis.c:668</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_af7a89c8702252f1e7d912e79bdf7d99d"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#af7a89c8702252f1e7d912e79bdf7d99d">stasis_subscription_statistics::uses_threadpool</a></div><div class="ttdeci">int uses_threadpool</div><div class="ttdoc">Using stasis threadpool for handling messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00670">stasis.c:670</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_aafa98169890db4d225634c14d67b7f1a"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#aafa98169890db4d225634c14d67b7f1a">stasis_subscription_statistics::highest_time_message_type</a></div><div class="ttdeci">struct stasis_message_type * highest_time_message_type</div><div class="ttdoc">The message type that currently took the longest to process. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00658">stasis.c:658</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a1a905b721c77a2bb137f7a655f9d9428"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">stasis_subscription_statistics::uniqueid</a></div><div class="ttdeci">char uniqueid[0]</div><div class="ttdoc">Unique ID of the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00676">stasis.c:676</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a03bb86c52b8e22ea4325ea04e6443fa0"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a03bb86c52b8e22ea4325ea04e6443fa0">stasis_subscription_statistics::sub</a></div><div class="ttdeci">struct stasis_subscription * sub</div><div class="ttdoc">Pointer to the subscription (NOT refcounted, and must NOT be accessed) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00674">stasis.c:674</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a935ee5b3fccf94f92536c8d721012fc0"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a935ee5b3fccf94f92536c8d721012fc0">stasis_subscription_statistics::lowest_time_invoked</a></div><div class="ttdeci">long lowest_time_invoked</div><div class="ttdoc">Lowest time spent invoking a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00662">stasis.c:662</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_aa4e531d581599f64aabbb8e0d3993a6e"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#aa4e531d581599f64aabbb8e0d3993a6e">stasis_subscription_statistics::messages_dropped</a></div><div class="ttdeci">int messages_dropped</div><div class="ttdoc">The number of messages that were filtered out. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00664">stasis.c:664</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1cd26233f416af7d83c5371d20b97349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cd26233f416af7d83c5371d20b97349">&#9670;&nbsp;</a></span>statistics_show_subscriptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* statistics_show_subscriptions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02490">2490</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01358">ao2_container_alloc_rbtree</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00673">ao2_container_dup()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, <a class="el" href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00660">stasis_subscription_statistics::highest_time_invoked</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00662">stasis_subscription_statistics::lowest_time_invoked</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00664">stasis_subscription_statistics::messages_dropped</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00666">stasis_subscription_statistics::messages_passed</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00676">stasis_subscription_statistics::uniqueid</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;{</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *sorted_subscriptions;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *subscription_stats;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordtype">int</span> dropped = 0;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;   <span class="keywordtype">int</span> passed = 0;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="preprocessor">#define FMT_HEADERS     &quot;%-64s %10s %10s %16s %16s\n&quot;</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="preprocessor">#define FMT_FIELDS      &quot;%-64s %10d %10d %16ld %16ld\n&quot;</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="preprocessor">#define FMT_FIELDS2     &quot;%-64s %10d %10d\n&quot;</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis statistics show subscriptions&quot;</span>;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;         <span class="stringliteral">&quot;Usage: stasis statistics show subscriptions\n&quot;</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;         <span class="stringliteral">&quot;  Shows a list of subscriptions and their general statistics\n&quot;</span>;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   }</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;   }</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   subscription_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(subscription_statistics);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   <span class="keywordflow">if</span> (!subscription_stats) {</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not fetch subscription_statistics container\n&quot;</span>);</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;   }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   sorted_subscriptions = <a class="code" href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 0,</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      stasis_subscription_statistics_sort_fn, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;   <span class="keywordflow">if</span> (!sorted_subscriptions) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not create container for sorting subscription statistics\n&quot;</span>);</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   }</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a>(sorted_subscriptions, subscription_stats, 0)) {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sorted_subscriptions, -1);</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not sort subscription statistics\n&quot;</span>);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;   }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span> <a class="code" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <span class="stringliteral">&quot;Subscription&quot;</span>, <span class="stringliteral">&quot;Dropped&quot;</span>, <span class="stringliteral">&quot;Passed&quot;</span>, <span class="stringliteral">&quot;Lowest Invoke&quot;</span>, <span class="stringliteral">&quot;Highest Invoke&quot;</span>);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sorted_subscriptions, 0);</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <span class="keywordflow">while</span> ((statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#aa4e531d581599f64aabbb8e0d3993a6e">messages_dropped</a>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a86fdf2ac1af9769def6fd92b7a3c48d3">messages_passed</a>,</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;         statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a935ee5b3fccf94f92536c8d721012fc0">lowest_time_invoked</a>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#af2ae30a31c9c7b9c8fab6507689215de">highest_time_invoked</a>);</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      dropped += statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#aa4e531d581599f64aabbb8e0d3993a6e">messages_dropped</a>;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      passed += statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a86fdf2ac1af9769def6fd92b7a3c48d3">messages_passed</a>;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      ++count;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   }</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sorted_subscriptions, -1);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a>, <span class="stringliteral">&quot;Total&quot;</span>, dropped, passed);</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%d subscriptions\n\n&quot;</span>, count);</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="preprocessor">#undef FMT_HEADERS</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;<span class="preprocessor">#undef FMT_FIELDS</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="preprocessor">#undef FMT_FIELDS2</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8c_html_a28e4a2cd5d9cefd5714c0a3ce2a35499"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a></div><div class="ttdeci">#define FMT_FIELDS</div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_af2ae30a31c9c7b9c8fab6507689215de"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#af2ae30a31c9c7b9c8fab6507689215de">stasis_subscription_statistics::highest_time_invoked</a></div><div class="ttdeci">long highest_time_invoked</div><div class="ttdoc">Highest time spent invoking a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00660">stasis.c:660</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a86fdf2ac1af9769def6fd92b7a3c48d3"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a86fdf2ac1af9769def6fd92b7a3c48d3">stasis_subscription_statistics::messages_passed</a></div><div class="ttdeci">int messages_passed</div><div class="ttdoc">The number of messages that passed filtering. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00666">stasis.c:666</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="astobj2_8h_html_a04bf2beaf5811f6b95768e42fb95d9a5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a></div><div class="ttdeci">int ao2_container_dup(struct ao2_container *dest, struct ao2_container *src, enum search_flags flags)</div><div class="ttdoc">Copy all object references in the src container into the dest container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00673">astobj2_container.c:673</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="stasis_8c_html_ad1d858a4e8d8ee02eee5b943d65814a1"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a></div><div class="ttdeci">#define FMT_FIELDS2</div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a1a905b721c77a2bb137f7a655f9d9428"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">stasis_subscription_statistics::uniqueid</a></div><div class="ttdeci">char uniqueid[0]</div><div class="ttdoc">Unique ID of the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00676">stasis.c:676</a></div></div>
<div class="ttc" id="stasis_8c_html_a23b24e0f93569bfc937a4bc9143c21e3"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a></div><div class="ttdeci">#define FMT_HEADERS</div></div>
<div class="ttc" id="astobj2_8h_html_a9657c4f40f012fc1d426c3c94b3d32c0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a></div><div class="ttdeci">#define ao2_container_alloc_rbtree(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01358">astobj2.h:1358</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a935ee5b3fccf94f92536c8d721012fc0"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a935ee5b3fccf94f92536c8d721012fc0">stasis_subscription_statistics::lowest_time_invoked</a></div><div class="ttdeci">long lowest_time_invoked</div><div class="ttdoc">Lowest time spent invoking a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00662">stasis.c:662</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_aa4e531d581599f64aabbb8e0d3993a6e"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#aa4e531d581599f64aabbb8e0d3993a6e">stasis_subscription_statistics::messages_dropped</a></div><div class="ttdeci">int messages_dropped</div><div class="ttdoc">The number of messages that were filtered out. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00664">stasis.c:664</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbbe831ee07f80b3cc5b71be3f65e6ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbbe831ee07f80b3cc5b71be3f65e6ec">&#9670;&nbsp;</a></span>statistics_show_topic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* statistics_show_topic </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02799">2799</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l02765">topic_statistics_complete_name()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;{</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;   <span class="keyword">struct </span>stasis_topic_statistics *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *topic_stats;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;   <span class="keywordtype">char</span> *uniqueid;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis statistics show topic&quot;</span>;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;          <span class="stringliteral">&quot;Usage: stasis statistics show topic &lt;name&gt;\n&quot;</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;          <span class="stringliteral">&quot;       Show stasis topic statistics.\n&quot;</span>;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 4) {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/stasis_8c.html#a70e140c8e2ec6cd375510769195df52b">topic_statistics_complete_name</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;      }</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;   }</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 5) {</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;   }</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;   topic_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(topic_statistics);</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;   <span class="keywordflow">if</span> (!topic_stats) {</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not fetch topic_statistics container\n&quot;</span>);</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;   }</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(topic_stats, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;   <span class="keywordflow">if</span> (!statistics) {</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Specified topic &#39;%s&#39; does not exist\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   }</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Topic: %s\n&quot;</span>, statistics-&gt;name);</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Pointer Address: %p\n&quot;</span>, statistics-&gt;topic);</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of messages published that went to no subscriber: %d\n&quot;</span>, statistics-&gt;messages_not_dispatched);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of messages that went to at least one subscriber: %d\n&quot;</span>, statistics-&gt;messages_dispatched);</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Lowest amount of time (in milliseconds) spent dispatching message: %ld\n&quot;</span>, statistics-&gt;lowest_time_dispatched);</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Highest amount of time (in milliseconds) spent dispatching messages: %ld\n&quot;</span>, statistics-&gt;highest_time_dispatched);</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of subscribers: %d\n&quot;</span>, <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(statistics-&gt;subscribers));</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Subscribers:\n&quot;</span>);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(statistics-&gt;subscribers, 0);</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   <span class="keywordflow">while</span> ((uniqueid = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\t%s\n&quot;</span>, uniqueid);</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(uniqueid, -1);</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;   }</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8c_html_a70e140c8e2ec6cd375510769195df52b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a70e140c8e2ec6cd375510769195df52b">topic_statistics_complete_name</a></div><div class="ttdeci">static char * topic_statistics_complete_name(const char *word, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02765">stasis.c:2765</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e18a92234989ab700fabb8abfa71c37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e18a92234989ab700fabb8abfa71c37">&#9670;&nbsp;</a></span>statistics_show_topics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* statistics_show_topics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02684">2684</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01358">ao2_container_alloc_rbtree</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00673">ao2_container_dup()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, <a class="el" href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a>, <a class="el" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;{</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *sorted_topics;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *topic_stats;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;   <span class="keyword">struct </span>stasis_topic_statistics *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;   <span class="keywordtype">int</span> not_dispatched = 0;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   <span class="keywordtype">int</span> dispatched = 0;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="preprocessor">#define FMT_HEADERS     &quot;%-64s %10s %10s %10s %16s %16s\n&quot;</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;<span class="preprocessor">#define FMT_FIELDS      &quot;%-64s %10d %10d %10d %16ld %16ld\n&quot;</span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;<span class="preprocessor">#define FMT_FIELDS2     &quot;%-64s %10s %10d %10d\n&quot;</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;stasis statistics show topics&quot;</span>;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;         <span class="stringliteral">&quot;Usage: stasis statistics show topics\n&quot;</span></div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;         <span class="stringliteral">&quot;  Shows a list of topics and their general statistics\n&quot;</span>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   }</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   }</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;   topic_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(topic_statistics);</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   <span class="keywordflow">if</span> (!topic_stats) {</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not fetch topic_statistics container\n&quot;</span>);</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;   }</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   sorted_topics = <a class="code" href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 0,</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      stasis_topic_statistics_sort_fn, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;   <span class="keywordflow">if</span> (!sorted_topics) {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not create container for sorting topic statistics\n&quot;</span>);</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   }</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a>(sorted_topics, topic_stats, 0)) {</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sorted_topics, -1);</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not sort topic statistics\n&quot;</span>);</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;   }</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span> <a class="code" href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <span class="stringliteral">&quot;Topic&quot;</span>, <span class="stringliteral">&quot;Subscribers&quot;</span>, <span class="stringliteral">&quot;Dropped&quot;</span>, <span class="stringliteral">&quot;Dispatched&quot;</span>, <span class="stringliteral">&quot;Lowest Dispatch&quot;</span>, <span class="stringliteral">&quot;Highest Dispatch&quot;</span>);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sorted_topics, 0);</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   <span class="keywordflow">while</span> ((statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, statistics-&gt;name, <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(statistics-&gt;subscribers),</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;         statistics-&gt;messages_not_dispatched, statistics-&gt;messages_dispatched,</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;         statistics-&gt;lowest_time_dispatched, statistics-&gt;highest_time_dispatched);</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      not_dispatched += statistics-&gt;messages_not_dispatched;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;      dispatched += statistics-&gt;messages_dispatched;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      ++count;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;   }</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sorted_topics, -1);</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a>, <span class="stringliteral">&quot;Total&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, not_dispatched, dispatched);</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%d topics\n\n&quot;</span>, count);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="preprocessor">#undef FMT_HEADERS</span></div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="preprocessor">#undef FMT_FIELDS</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="preprocessor">#undef FMT_FIELDS2</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8c_html_a28e4a2cd5d9cefd5714c0a3ce2a35499"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a></div><div class="ttdeci">#define FMT_FIELDS</div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a04bf2beaf5811f6b95768e42fb95d9a5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a></div><div class="ttdeci">int ao2_container_dup(struct ao2_container *dest, struct ao2_container *src, enum search_flags flags)</div><div class="ttdoc">Copy all object references in the src container into the dest container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00673">astobj2_container.c:673</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="stasis_8c_html_ad1d858a4e8d8ee02eee5b943d65814a1"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ad1d858a4e8d8ee02eee5b943d65814a1">FMT_FIELDS2</a></div><div class="ttdeci">#define FMT_FIELDS2</div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="stasis_8c_html_a23b24e0f93569bfc937a4bc9143c21e3"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a></div><div class="ttdeci">#define FMT_HEADERS</div></div>
<div class="ttc" id="astobj2_8h_html_a9657c4f40f012fc1d426c3c94b3d32c0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a></div><div class="ttdeci">#define ao2_container_alloc_rbtree(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01358">astobj2.h:1358</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3273b186b9627de5e6eecd8ac8230a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3273b186b9627de5e6eecd8ac8230a41">&#9670;&nbsp;</a></span>sub_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sub_cleanup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00966">966</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00691">stasis_subscription::data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = <a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sub);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div><div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">stasis_subscription::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00691">stasis.c:691</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a915d63fc715772a167a2308d86ab7723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a915d63fc715772a167a2308d86ab7723">&#9670;&nbsp;</a></span>subscription_change_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a>* subscription_change_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uniqueid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01627">1627</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00895">stasis_subscription_change::description</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01620">subscription_change_dtor()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00894">stasis_subscription_change::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01648">send_subscription_subscribe()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">send_subscription_unsubscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;{</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   <span class="keywordtype">size_t</span> description_len = strlen(description) + 1;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="keywordtype">size_t</span> uniqueid_len = strlen(<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>) + 1;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   change = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*change) + description_len + uniqueid_len,</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#a1bc8b3b357793063b639afc442168fa0">subscription_change_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   <span class="keywordflow">if</span> (!change) {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   strcpy(change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a>); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a> = change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">description</a> + description_len;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, <a class="code" href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>, uniqueid_len); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, +1);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <span class="keywordflow">return</span> change;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis_8c_html_a1bc8b3b357793063b639afc442168fa0"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a1bc8b3b357793063b639afc442168fa0">subscription_change_dtor</a></div><div class="ttdeci">static void subscription_change_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01620">stasis.c:1620</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription_change::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00894">stasis.h:894</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html_a148e968cb2e6176288982274dab428c3"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a148e968cb2e6176288982274dab428c3">stasis_subscription_change::description</a></div><div class="ttdeci">char description[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00895">stasis.h:895</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bc8b3b357793063b639afc442168fa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc8b3b357793063b639afc442168fa0">&#9670;&nbsp;</a></span>subscription_change_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subscription_change_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01620">1620</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00893">stasis_subscription_change::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01627">subscription_change_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;{</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a> *change = obj;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(change-&gt;<a class="code" href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;}</div><div class="ttc" id="structstasis__subscription__change_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription_change::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00893">stasis.h:893</a></div></div>
<div class="ttc" id="structstasis__subscription__change_html"><div class="ttname"><a href="../../d5/d43/structstasis__subscription__change.html">stasis_subscription_change</a></div><div class="ttdoc">Holds details about changes to subscriptions for the specified topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00892">stasis.h:892</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8204d4969e6aeb9c8494b4a3fb40061b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8204d4969e6aeb9c8494b4a3fb40061b">&#9670;&nbsp;</a></span>subscription_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subscription_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00715">715</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00694">stasis_subscription::join_cond</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00687">stasis_subscription::mailbox</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01120">stasis_subscription_is_done()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01152">stasis_subscription_is_subscribed()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00685">stasis_subscription::topic</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00683">stasis_subscription::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a> = obj;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *subscription_stats;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="comment">/* Subscriptions need to be manually unsubscribed before destruction</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">    * b/c there&#39;s a cyclic reference between topics and subscriptions */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a>(sub));</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="comment">/* If there are any messages in flight to this subscription; that would</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">    * be bad. */</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d0/df4/stasis_8c.html#a04c69c471e1b836539f280b80b0000de">stasis_subscription_is_done</a>(sub));</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">uniqueid</a>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a>);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">mailbox</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">join_cond</a>);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;sub-&gt;accepted_message_types);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">if</span> (sub-&gt;statistics) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      subscription_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(subscription_statistics);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">if</span> (subscription_stats) {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(subscription_stats, sub-&gt;statistics);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub-&gt;statistics, -1);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a136460a7868b48ef576c0fa505ef96db">stasis_subscription::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00685">stasis.c:685</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a23bbead00056908b13511b20fd390bf6"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">stasis_subscription::join_cond</a></div><div class="ttdeci">ast_cond_t join_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00694">stasis.c:694</a></div></div>
<div class="ttc" id="stasis_8c_html_a04c69c471e1b836539f280b80b0000de"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a04c69c471e1b836539f280b80b0000de">stasis_subscription_is_done</a></div><div class="ttdeci">int stasis_subscription_is_done(struct stasis_subscription *subscription)</div><div class="ttdoc">Returns whether subscription has received its final message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01120">stasis.c:1120</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structstasis__subscription_html_ace8710cd56677f85900cab7dca29b82c"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#ace8710cd56677f85900cab7dca29b82c">stasis_subscription::uniqueid</a></div><div class="ttdeci">char * uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00683">stasis.c:683</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__subscription_html_aa4d485b7c131a7229ae4f1054b2f506d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#aa4d485b7c131a7229ae4f1054b2f506d">stasis_subscription::mailbox</a></div><div class="ttdeci">struct ast_taskprocessor * mailbox</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00687">stasis.c:687</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="stasis_8c_html_acd5bedbb2212956dac77be47dceef510"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#acd5bedbb2212956dac77be47dceef510">stasis_subscription_is_subscribed</a></div><div class="ttdeci">int stasis_subscription_is_subscribed(const struct stasis_subscription *sub)</div><div class="ttdoc">Returns whether a subscription is currently subscribed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01152">stasis.c:1152</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab44c4bf7cb1df892584c436f1855ac28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab44c4bf7cb1df892584c436f1855ac28">&#9670;&nbsp;</a></span>subscription_invoke()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subscription_invoke </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoke the subscription's callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Subscription to invoke. </td></tr>
    <tr><td class="paramname">topic</td><td>Topic message was published to. </td></tr>
    <tr><td class="paramname">message</td><td>Message to send. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00756">756</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00689">stasis_subscription::callback</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00691">stasis_subscription::data</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00700">stasis_subscription::final_message_processed</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00697">stasis_subscription::final_message_rxed</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00694">stasis_subscription::join_cond</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00047">message_type_id</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01648">send_subscription_subscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01676">send_subscription_unsubscribe()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message_type()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message_type_id()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01261">dispatch_exec_async()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01288">dispatch_exec_sync()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01314">dispatch_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;{</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">final</span> = <a class="code" href="../../d0/df4/stasis_8c.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d2/db9/stasis__message_8c.html#a744ceb580c661e018a750bee94f2a1c0">message_type_id</a> = <a class="code" href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>());</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordtype">long</span> elapsed;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="comment">/* Notify that the final message has been received */</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keywordflow">if</span> (<span class="keyword">final</span>) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(sub);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a09021779b74a40d962db94f3910215d7">final_message_rxed</a> = 1;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">join_cond</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(sub);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   }</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">    * If filtering is turned on and this is a &#39;final&#39; message, we only invoke the callback</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">    * if the subscriber accepts subscription_change message types.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <span class="keywordflow">if</span> (!<span class="keyword">final</span> || sub-&gt;filter != <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a> ||</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      (message_type_id &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;sub-&gt;accepted_message_types) &amp;&amp; <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;sub-&gt;accepted_message_types, message_type_id))) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="comment">/* Since sub is mostly immutable, no need to lock sub */</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a8ef8d0e48190325c057f35cf776673e7">callback</a>(sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">data</a>, sub, message);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="comment">/* Notify that the final message has been processed */</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> (<span class="keyword">final</span>) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(sub);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#acfba3a8a57e0ab524b78b3734df9043e">final_message_processed</a> = 1;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;sub-&gt;<a class="code" href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">join_cond</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(sub);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">if</span> (elapsed &gt; sub-&gt;statistics-&gt;highest_time_invoked) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      sub-&gt;statistics-&gt;highest_time_invoked = elapsed;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(sub-&gt;statistics);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      sub-&gt;statistics-&gt;highest_time_message_type = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(sub-&gt;statistics);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordflow">if</span> (elapsed &lt; sub-&gt;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>-&gt;lowest_time_invoked) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      sub-&gt;statistics-&gt;lowest_time_invoked = elapsed;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="stasis_8h_html_aaa72759806ee4118a78b9d1373c633d2"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aaa72759806ee4118a78b9d1373c633d2">stasis_message_type_id</a></div><div class="ttdeci">int stasis_message_type_id(const struct stasis_message_type *type)</div><div class="ttdoc">Gets the id of a given message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00109">stasis_message.c:109</a></div></div>
<div class="ttc" id="stasis__message_8c_html_a744ceb580c661e018a750bee94f2a1c0"><div class="ttname"><a href="../../d2/db9/stasis__message_8c.html#a744ceb580c661e018a750bee94f2a1c0">message_type_id</a></div><div class="ttdeci">static int message_type_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00047">stasis_message.c:47</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a23bbead00056908b13511b20fd390bf6"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a23bbead00056908b13511b20fd390bf6">stasis_subscription::join_cond</a></div><div class="ttdeci">ast_cond_t join_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00694">stasis.c:694</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structstasis__subscription_html_acfba3a8a57e0ab524b78b3734df9043e"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#acfba3a8a57e0ab524b78b3734df9043e">stasis_subscription::final_message_processed</a></div><div class="ttdeci">int final_message_processed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00700">stasis.c:700</a></div></div>
<div class="ttc" id="stasis_8c_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a09021779b74a40d962db94f3910215d7"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a09021779b74a40d962db94f3910215d7">stasis_subscription::final_message_rxed</a></div><div class="ttdeci">int final_message_rxed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00697">stasis.c:697</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a735984d41155bc1032e09bece8f8d66d">stasis_subscription::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00691">stasis.c:691</a></div></div>
<div class="ttc" id="structstasis__subscription_html_a8ef8d0e48190325c057f35cf776673e7"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html#a8ef8d0e48190325c057f35cf776673e7">stasis_subscription::callback</a></div><div class="ttdeci">stasis_subscription_cb callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00689">stasis.c:689</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff7f67df7e0d35e466ad20d9f8c534da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff7f67df7e0d35e466ad20d9f8c534da">&#9670;&nbsp;</a></span>subscription_statistics_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subscription_statistics_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02945">2945</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00676">stasis_subscription_statistics::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;{</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *object_left = obj;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *object_right = arg;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      right_key = object_right-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      cmp = strcasecmp(object_left-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>, right_key);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      <span class="comment">/* Not supported by container */</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      cmp = -1;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="comment">       * What arg points to is specific to this traversal callback</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="comment">       * and has no special meaning to astobj2.</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      cmp = 0;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;   }</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;   <span class="keywordflow">if</span> (cmp) {</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;   }</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;<span class="comment">    * At this point the traversal callback is identical to a sorted</span></div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="comment">    * container.</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a1a905b721c77a2bb137f7a655f9d9428"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">stasis_subscription_statistics::uniqueid</a></div><div class="ttdeci">char uniqueid[0]</div><div class="ttdoc">Unique ID of the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00676">stasis.c:676</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abcdff136f20313f7d25599d92e099b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcdff136f20313f7d25599d92e099b72">&#9670;&nbsp;</a></span>subscription_statistics_complete_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* subscription_statistics_complete_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02570">2570</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00676">stasis_subscription_statistics::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02604">statistics_show_subscription()</a>.</p>
<div class="fragment"><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;{</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *subscription_stats;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_statistics;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>);</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;   subscription_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(subscription_statistics);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   <span class="keywordflow">if</span> (!subscription_stats) {</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   }</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   it_statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(subscription_stats, 0);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   <span class="keywordflow">while</span> ((statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_statistics))) {</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>, wordlen)</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;         &amp;&amp; ++which &gt; <a class="code" href="../../d4/d88/structstate.html">state</a>) {</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;         result = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">uniqueid</a>);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <span class="keywordflow">if</span> (result) {</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      }</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;   }</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_statistics);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(subscription_stats, -1);</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a1a905b721c77a2bb137f7a655f9d9428"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a1a905b721c77a2bb137f7a655f9d9428">stasis_subscription_statistics::uniqueid</a></div><div class="ttdeci">char uniqueid[0]</div><div class="ttdoc">Unique ID of the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00676">stasis.c:676</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e3661c16fcd586edcb4eb2aa0c494b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e3661c16fcd586edcb4eb2aa0c494b6">&#9670;&nbsp;</a></span>subscription_statistics_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subscription_statistics_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00816">816</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00656">stasis_subscription_statistics::topics</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00823">stasis_subscription_statistics_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;{</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a> = obj;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(statistics-&gt;<a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">topics</a>);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html_a6a51d6ccf4e2b62fbdea2ee744af5442"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html#a6a51d6ccf4e2b62fbdea2ee744af5442">stasis_subscription_statistics::topics</a></div><div class="ttdeci">struct ao2_container * topics</div><div class="ttdoc">Names of the topics we are subscribed to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00656">stasis.c:656</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65f74acd52a27788bee2b0aa2a417b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65f74acd52a27788bee2b0aa2a417b7c">&#9670;&nbsp;</a></span>subscription_statistics_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subscription_statistics_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02924">2924</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01250">ast_str_case_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;{</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a> *object;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;      key = obj;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordtype">object</span> = obj;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      key = <span class="keywordtype">object</span>-&gt;uniqueid;</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      <span class="comment">/* Hash can only work on something with a full key. */</span></div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;   }</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(key);</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structstasis__subscription__statistics_html"><div class="ttname"><a href="../../d6/d7d/structstasis__subscription__statistics.html">stasis_subscription_statistics</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00650">stasis.c:650</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a79e3a46cca0390255f951e98052a6508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79e3a46cca0390255f951e98052a6508">&#9670;&nbsp;</a></span>topic_add_subscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int topic_add_subscription </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a subscriber to a topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>Topic </td></tr>
    <tr><td class="paramname">sub</td><td>Subscriber </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
Non-zero on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01203">1203</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00206">ast_str_container_add()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01171">stasis_subscription_uniqueid()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00413">proxy_dtor()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;{</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="keywordtype">size_t</span> idx;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(topic);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="comment">/* The reference from the topic to the subscription is shared with</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">    * the owner of the subscription, which will explicitly unsubscribe</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">    * to release it.</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">    * If we bumped the refcount here, the owner would have to unsubscribe</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">    * and cleanup, which is a bit awkward. */</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;topic-&gt;subscribers, sub);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;upstream_topics); ++idx) {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a>(</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topic-&gt;upstream_topics, idx), sub);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(topic-&gt;statistics-&gt;subscribers, <a class="code" href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a>(sub));</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(sub-&gt;statistics-&gt;topics, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(topic));</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(topic);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;}</div><div class="ttc" id="stasis_8c_html_a86a7ba1f3c93ba7ee7583a0d8595025d"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a></div><div class="ttdeci">const char * stasis_subscription_uniqueid(const struct stasis_subscription *sub)</div><div class="ttdoc">Get the unique ID for the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01171">stasis.c:1171</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="stasis_8c_html_a79e3a46cca0390255f951e98052a6508"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a79e3a46cca0390255f951e98052a6508">topic_add_subscription</a></div><div class="ttdeci">static int topic_add_subscription(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdoc">Add a subscriber to a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01203">stasis.c:1203</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="strings_8h_html_ae2861c04a240bbc90f32ade1e1261afa"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a></div><div class="ttdeci">int ast_str_container_add(struct ao2_container *str_container, const char *add)</div><div class="ttdoc">Adds a string to a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00206">strings.c:206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b0d5da0eb307a7fbba0e7866a97b1f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b0d5da0eb307a7fbba0e7866a97b1f6">&#9670;&nbsp;</a></span>topic_complete_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* topic_complete_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02391">2391</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00401">topic_proxy::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02417">stasis_show_topic()</a>.</p>
<div class="fragment"><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;{</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/ddb/structtopic__proxy.html">topic_proxy</a> *topic;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   it = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(<a class="code" href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a>, 0);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;   <span class="keywordflow">while</span> ((topic = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it))) {</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, topic-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a>, wordlen)) {</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;         ret = <a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(topic-&gt;<a class="code" href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">name</a>));</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;         <span class="keywordflow">if</span> (ret) {</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;         }</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      }</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic, -1);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   }</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;}</div><div class="ttc" id="structtopic__proxy_html"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html">topic_proxy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00398">stasis.c:398</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtopic__proxy_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../db/ddb/structtopic__proxy.html#a5ac083a645d964373f022d03df4849c8">topic_proxy::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00401">stasis.c:401</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8c_html_ae14b5f72d5278c2e22621748fba0610b"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ae14b5f72d5278c2e22621748fba0610b">topic_all</a></div><div class="ttdeci">struct ao2_container * topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00396">stasis.c:396</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5452a83caf693562327d1b86c5748703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5452a83caf693562327d1b86c5748703">&#9670;&nbsp;</a></span>topic_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void topic_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00434">434</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, and <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00569">stasis_topic_create_with_detail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic = obj;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *topic_stats;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Destroying topic. name: %s, detail: %s\n&quot;</span>,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         topic-&gt;name, topic-&gt;detail);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="comment">/* Subscribers hold a reference to topics, so they should all be</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">    * unsubscribed before we get here. */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;subscribers) == 0);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;topic-&gt;subscribers);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;topic-&gt;upstream_topics);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Topic &#39;%s&#39;: %p destroyed\n&quot;</span>, topic-&gt;name, topic);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">if</span> (topic-&gt;statistics) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      topic_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(topic_statistics);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">if</span> (topic_stats) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(topic_stats, topic-&gt;statistics);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic-&gt;statistics, -1);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48c5592db184a6f1d2055845a0bd94aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c5592db184a6f1d2055845a0bd94aa">&#9670;&nbsp;</a></span>topic_pool_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void topic_pool_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01744">1744</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00985">ao2_container_unregister()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01740">stasis_topic_pool::pool_container</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01741">stasis_topic_pool::pool_topic</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;{</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = obj;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="preprocessor">#ifdef AO2_DEBUG</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   {</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="keywordtype">char</span> *container_name =</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(strlen(<a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a>)) + strlen(<span class="stringliteral">&quot;-pool&quot;</span>) + 1);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      sprintf(container_name, <span class="stringliteral">&quot;%s-pool&quot;</span>, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a>));</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a>(container_name);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   }</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a>);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;   pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">pool_container</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a>);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   pool-&gt;<a class="code" href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">pool_topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;}</div><div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a1c800fe69edb831327a694a01d61af71"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a1c800fe69edb831327a694a01d61af71">stasis_topic_pool::pool_container</a></div><div class="ttdeci">struct ao2_container * pool_container</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01740">stasis.c:1740</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4b8c1cca9dace1cf1bbadc5039f3dedf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a></div><div class="ttdeci">void ao2_container_unregister(const char *name)</div><div class="ttdoc">Unregister a container for CLI stats and integrity check. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00985">astobj2_container.c:985</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01739">stasis.c:1739</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structstasis__topic__pool_html_a4d4893d86a646368c7187e1d2540241a"><div class="ttname"><a href="../../d1/d65/structstasis__topic__pool.html#a4d4893d86a646368c7187e1d2540241a">stasis_topic_pool::pool_topic</a></div><div class="ttdeci">struct stasis_topic * pool_topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01741">stasis.c:1741</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31134d792ae64e6f21060b8e7ffd49fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31134d792ae64e6f21060b8e7ffd49fc">&#9670;&nbsp;</a></span>topic_pool_entry_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>* topic_pool_entry_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01724">1724</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01712">topic_pool_entry::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01715">topic_pool_entry_dtor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>.</p>
<div class="fragment"><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;{</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *<a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a>;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   topic_pool_entry = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*topic_pool_entry) + strlen(topic_name) + 1,</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#ac01a619b8ee3472ad037f16b0fc31e72">topic_pool_entry_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordflow">if</span> (!topic_pool_entry) {</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   strcpy(topic_pool_entry-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, topic_name); <span class="comment">/* Safe */</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   <span class="keywordflow">return</span> topic_pool_entry;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01709">stasis.c:1709</a></div></div>
<div class="ttc" id="stasis_8c_html_ac01a619b8ee3472ad037f16b0fc31e72"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#ac01a619b8ee3472ad037f16b0fc31e72">topic_pool_entry_dtor</a></div><div class="ttdeci">static void topic_pool_entry_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01715">stasis.c:1715</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">topic_pool_entry::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01712">stasis.c:1712</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a669f6c3dbec7c74b97b5b388bfa999c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a669f6c3dbec7c74b97b5b388bfa999c3">&#9670;&nbsp;</a></span>topic_pool_entry_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int topic_pool_entry_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01784">1784</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01712">topic_pool_entry::name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01711">topic_pool_entry::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;{</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *object_left = obj;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *object_right = arg;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      right_key = object_right-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      cmp = strcasecmp(object_left-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, right_key);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <span class="comment">/* Not supported by container */</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      cmp = -1;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">       * What arg points to is specific to this traversal callback</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">       * and has no special meaning to astobj2.</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      cmp = 0;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   }</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   <span class="keywordflow">if</span> (cmp) {</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">    * At this point the traversal callback is identical to a sorted</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">    * container.</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;}</div><div class="ttc" id="structtopic__pool__entry_html"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01709">stasis.c:1709</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html#afd3f693e384b1ee0a0c44d58351eb87d">topic_pool_entry::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01712">stasis.c:1712</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac01a619b8ee3472ad037f16b0fc31e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac01a619b8ee3472ad037f16b0fc31e72">&#9670;&nbsp;</a></span>topic_pool_entry_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void topic_pool_entry_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01715">1715</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01710">topic_pool_entry::forward</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01711">topic_pool_entry::topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01724">topic_pool_entry_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;{</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a> = obj;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   entry-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd101b3d2cc1eb673b30afb631718b79">forward</a> = <a class="code" href="../../d0/df4/stasis_8c.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(entry-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#afd101b3d2cc1eb673b30afb631718b79">forward</a>);</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(entry-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a>);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   entry-&gt;<a class="code" href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;}</div><div class="ttc" id="structtopic__pool__entry_html"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01709">stasis.c:1709</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html_a136460a7868b48ef576c0fa505ef96db"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html#a136460a7868b48ef576c0fa505ef96db">topic_pool_entry::topic</a></div><div class="ttdeci">struct stasis_topic * topic</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01711">stasis.c:1711</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structtopic__pool__entry_html_afd101b3d2cc1eb673b30afb631718b79"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html#afd101b3d2cc1eb673b30afb631718b79">topic_pool_entry::forward</a></div><div class="ttdeci">struct stasis_forward * forward</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01710">stasis.c:1710</a></div></div>
<div class="ttc" id="stasis_8c_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e61da6e3b66f39e64e8de751c3867c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e61da6e3b66f39e64e8de751c3867c0">&#9670;&nbsp;</a></span>topic_pool_entry_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int topic_pool_entry_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01763">1763</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01250">ast_str_case_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;{</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a> *object;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      key = obj;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordtype">object</span> = obj;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      key = <span class="keywordtype">object</span>-&gt;name;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="comment">/* Hash can only work on something with a full key. */</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   }</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(key);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;}</div><div class="ttc" id="structtopic__pool__entry_html"><div class="ttname"><a href="../../dc/d12/structtopic__pool__entry.html">topic_pool_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01709">stasis.c:1709</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedcfe63e48121eabbf8ec304cee1d7bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedcfe63e48121eabbf8ec304cee1d7bd">&#9670;&nbsp;</a></span>topic_remove_subscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int topic_remove_subscription </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l01231">1231</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00222">ast_str_container_remove()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00573">AST_VECTOR_ELEM_CLEANUP_NOOP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00585">AST_VECTOR_REMOVE_ELEM_UNORDERED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01171">stasis_subscription_uniqueid()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00628">stasis_topic_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00413">proxy_dtor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordtype">size_t</span> idx;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(topic);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topic-&gt;upstream_topics); ++idx) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <a class="code" href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a>(</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topic-&gt;upstream_topics, idx), sub);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   res = <a class="code" href="../../d6/d68/vector_8h.html#a79df3872d03069f077e7cab2262b8550">AST_VECTOR_REMOVE_ELEM_UNORDERED</a>(&amp;topic-&gt;subscribers, sub,</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a>);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ad763671e425c36b3d4c467a32676e0a5">ast_str_container_remove</a>(topic-&gt;statistics-&gt;subscribers, <a class="code" href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a>(sub));</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ad763671e425c36b3d4c467a32676e0a5">ast_str_container_remove</a>(sub-&gt;statistics-&gt;topics, <a class="code" href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a>(topic));</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(topic);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div><div class="ttc" id="stasis_8c_html_aedcfe63e48121eabbf8ec304cee1d7bd"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#aedcfe63e48121eabbf8ec304cee1d7bd">topic_remove_subscription</a></div><div class="ttdeci">static int topic_remove_subscription(struct stasis_topic *topic, struct stasis_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01231">stasis.c:1231</a></div></div>
<div class="ttc" id="vector_8h_html_a79df3872d03069f077e7cab2262b8550"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a79df3872d03069f077e7cab2262b8550">AST_VECTOR_REMOVE_ELEM_UNORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_ELEM_UNORDERED(vec, elem, cleanup)</div><div class="ttdoc">Remove an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00585">vector.h:585</a></div></div>
<div class="ttc" id="stasis_8c_html_a86a7ba1f3c93ba7ee7583a0d8595025d"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a86a7ba1f3c93ba7ee7583a0d8595025d">stasis_subscription_uniqueid</a></div><div class="ttdeci">const char * stasis_subscription_uniqueid(const struct stasis_subscription *sub)</div><div class="ttdoc">Get the unique ID for the subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01171">stasis.c:1171</a></div></div>
<div class="ttc" id="strings_8h_html_ad763671e425c36b3d4c467a32676e0a5"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ad763671e425c36b3d4c467a32676e0a5">ast_str_container_remove</a></div><div class="ttdeci">void ast_str_container_remove(struct ao2_container *str_container, const char *remove)</div><div class="ttdoc">Removes a string from a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00222">strings.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="vector_8h_html_a1885c25b9d767a53d1df9b641f53951a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a1885c25b9d767a53d1df9b641f53951a">AST_VECTOR_ELEM_CLEANUP_NOOP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_CLEANUP_NOOP(elem)</div><div class="ttdoc">Vector element cleanup that does nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00573">vector.h:573</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="stasis_8c_html_af23deee342575033bc73311b1215d886"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#af23deee342575033bc73311b1215d886">stasis_topic_name</a></div><div class="ttdeci">const char * stasis_topic_name(const struct stasis_topic *topic)</div><div class="ttdoc">Return the name of a topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00628">stasis.c:628</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bfbdd05a5b4d1c42475d1a89d4a0bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bfbdd05a5b4d1c42475d1a89d4a0bea">&#9670;&nbsp;</a></span>topic_statistics_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int topic_statistics_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l03003">3003</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;{</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>stasis_topic_statistics *object_left = obj;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>stasis_topic_statistics *object_right = arg;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = arg;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;      right_key = object_right-&gt;name;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      cmp = strcasecmp(object_left-&gt;name, right_key);</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      <span class="comment">/* Not supported by container */</span></div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      cmp = -1;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="comment">       * What arg points to is specific to this traversal callback</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;<span class="comment">       * and has no special meaning to astobj2.</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      cmp = 0;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;   }</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;   <span class="keywordflow">if</span> (cmp) {</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;   }</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;<span class="comment">    * At this point the traversal callback is identical to a sorted</span></div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;<span class="comment">    * container.</span></div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70e140c8e2ec6cd375510769195df52b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70e140c8e2ec6cd375510769195df52b">&#9670;&nbsp;</a></span>topic_statistics_complete_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* topic_statistics_complete_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02765">2765</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02799">statistics_show_topic()</a>.</p>
<div class="fragment"><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;{</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   <span class="keyword">struct </span>stasis_topic_statistics *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a>;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *topic_stats;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it_statistics;</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>);</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;   topic_stats = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(topic_statistics);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;   <span class="keywordflow">if</span> (!topic_stats) {</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;   }</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;   it_statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(topic_stats, 0);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;   <span class="keywordflow">while</span> ((statistics = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it_statistics))) {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, statistics-&gt;name, wordlen)</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;         &amp;&amp; ++which &gt; <a class="code" href="../../d4/d88/structstate.html">state</a>) {</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;         result = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(statistics-&gt;name);</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      }</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(statistics, -1);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;      <span class="keywordflow">if</span> (result) {</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   }</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it_statistics);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topic_stats, -1);</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a669245e59f5abe87b6109b95710ebfc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a669245e59f5abe87b6109b95710ebfc7">&#9670;&nbsp;</a></span>topic_statistics_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void topic_statistics_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00465">465</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00287">statistics()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l00472">stasis_topic_statistics_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keyword">struct </span>stasis_topic_statistics *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a> = obj;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(statistics-&gt;subscribers);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div><div class="ttc" id="utils_2frame_8c_html_a9fb5bb4e9b7208689bf5ebb56e3306e8"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a9fb5bb4e9b7208689bf5ebb56e3306e8">statistics</a></div><div class="ttdeci">static void statistics(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00287">utils/frame.c:287</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca08aa236124705a035a6fe95371c6ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca08aa236124705a035a6fe95371c6ca">&#9670;&nbsp;</a></span>topic_statistics_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int topic_statistics_hash </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02982">2982</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01250">ast_str_case_hash()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l03061">stasis_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;{</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>stasis_topic_statistics *object;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      key = obj;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;      <span class="keywordtype">object</span> = obj;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;      key = <span class="keywordtype">object</span>-&gt;name;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;      <span class="comment">/* Hash can only work on something with a full key. */</span></div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;   }</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(key);</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9ad2d54eb7d929aa7b34751f6b07f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ad2d54eb7d929aa7b34751f6b07f42">&#9670;&nbsp;</a></span>userevent_exclusion_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int userevent_exclusion_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02147">2147</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l02155">multi_user_event_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;{</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<span class="stringliteral">&quot;eventname&quot;</span>, key)) {</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a12e07f14a24059d6ca7ad80c23473729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e07f14a24059d6ca7ad80c23473729">&#9670;&nbsp;</a></span>cli_stasis</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_stasis[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../d0/df4/stasis_8c.html#a06e125cdc817146ff611d74e0a9b8e60">stasis_show_topics</a> , .summary =  <span class="stringliteral">&quot;Show all topics&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../d0/df4/stasis_8c.html#a741093249684a38185a312d3e0b51fb7">stasis_show_topic</a> , .summary =  <span class="stringliteral">&quot;Show topic&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="stasis_8c_html_a741093249684a38185a312d3e0b51fb7"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a741093249684a38185a312d3e0b51fb7">stasis_show_topic</a></div><div class="ttdeci">static char * stasis_show_topic(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02417">stasis.c:2417</a></div></div>
<div class="ttc" id="stasis_8c_html_a06e125cdc817146ff611d74e0a9b8e60"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a06e125cdc817146ff611d74e0a9b8e60">stasis_show_topics</a></div><div class="ttdeci">static char * stasis_show_topics(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02334">stasis.c:2334</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02476">2476</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="a9ee1e67ae2faf5be87758cc11248e2f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee1e67ae2faf5be87758cc11248e2f9">&#9670;&nbsp;</a></span>cli_stasis_statistics</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_stasis_statistics[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02916">2916</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="afe12a283dc4ec49a7557650cbc4e8ec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe12a283dc4ec49a7557650cbc4e8ec9">&#9670;&nbsp;</a></span>declined_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> declined_option</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An <a class="el" href="../../de/d71/structaco__type.html" title="Type information about a category-level configurable object. ">aco_type</a> structure to link the "declined_message_types" category to the <a class="el" href="../../de/d5b/structstasis__declined__config.html" title="A structure to hold global configuration-related options. ">stasis_declined_config</a> type. </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02213">2213</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="ada04be29882062127408e67ba605ca60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada04be29882062127408e67ba605ca60">&#9670;&nbsp;</a></span>declined_options</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>* declined_options[] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02221">2221</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="a87031d017d60611ca33ad816139d0e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87031d017d60611ca33ad816139d0e06">&#9670;&nbsp;</a></span>message_type_statistics_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> message_type_statistics_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lock to protect the message types vector </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00347">347</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/df4/stasis_8c_source.html#l01432">publish_msg()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02865">statistics_show_messages()</a>.</p>

</div>
</div>
<a id="aa3c9de336ef559d62489ee255ea4b3a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c9de336ef559d62489ee255ea4b3a4">&#9670;&nbsp;</a></span>stasis_conf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a> stasis_conf</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        .filename = <span class="stringliteral">&quot;stasis.conf&quot;</span>,</div><div class="line">   .types = <a class="code" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="code" href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a>, &amp;<a class="code" href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a>),</div><div class="line">}</div><div class="ttc" id="stasis_8c_html_a75dbfda070501bd401698bdf6813e571"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a></div><div class="ttdeci">static struct aco_type threadpool_option</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02202">stasis.c:2202</a></div></div>
<div class="ttc" id="config__options_8h_html_af773eedd7f94d718752798605c687c4b"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a></div><div class="ttdeci">#define ACO_TYPES(...)</div><div class="ttdoc">A helper macro to ensure that aco_info types always have a sentinel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00181">config_options.h:181</a></div></div>
<div class="ttc" id="stasis_8c_html_afe12a283dc4ec49a7557650cbc4e8ec9"><div class="ttname"><a href="../../d0/df4/stasis_8c.html#afe12a283dc4ec49a7557650cbc4e8ec9">declined_option</a></div><div class="ttdeci">static struct aco_type declined_option</div><div class="ttdoc">An aco_type structure to link the &quot;declined_message_types&quot; category to the stasis_declined_config typ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l02213">stasis.c:2213</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02223">2223</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="a6dc11fc8f94173cc1af379b74a096abd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc11fc8f94173cc1af379b74a096abd">&#9670;&nbsp;</a></span>threadpool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a>* threadpool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thread pool for topics that don't want a dedicated taskprocessor </p>

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00308">308</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="a75dbfda070501bd401698bdf6813e571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75dbfda070501bd401698bdf6813e571">&#9670;&nbsp;</a></span>threadpool_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> threadpool_option</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02202">2202</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="aac523295c428ee99baad3a6a7ef1cfbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac523295c428ee99baad3a6a7ef1cfbe">&#9670;&nbsp;</a></span>threadpool_options</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>* threadpool_options[] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../d0/df4/stasis_8c.html#a75dbfda070501bd401698bdf6813e571">threadpool_option</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l02210">2210</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
<a id="ae14b5f72d5278c2e22621748fba0610b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae14b5f72d5278c2e22621748fba0610b">&#9670;&nbsp;</a></span>topic_all</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* topic_all</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d0/df4/stasis_8c_source.html#l00396">396</a> of file <a class="el" href="../../d0/df4/stasis_8c_source.html">stasis.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:48 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
