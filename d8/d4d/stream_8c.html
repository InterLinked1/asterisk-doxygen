<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: stream.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">stream.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Media Stream API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d95/stream_8h_source.html">asterisk/stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d0a/format_8h_source.html">asterisk/format.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3c/format__cap_8h_source.html">asterisk/format_cap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d68/vector_8h_source.html">asterisk/vector.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/rtp__engine_8h_source.html">asterisk/rtp_engine.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stream.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/dea/stream_8c__incl.png" border="0" usemap="#stream_8c" alt=""/></div>
<map name="stream_8c" id="stream_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="221,229,305,256"/>
<area shape="rect" id="node22" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="2042,528,2169,555"/>
<area shape="rect" id="node24" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="2209,229,2343,256"/>
<area shape="rect" id="node26" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="1854,379,1981,405"/>
<area shape="rect" id="node31" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1195,80,1325,107"/>
<area shape="rect" id="node40" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2419,229,2549,256"/>
<area shape="rect" id="node41" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2259,155,2421,181"/>
<area shape="rect" id="node42" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="147,155,274,181"/>
<area shape="rect" id="node43" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="1787,80,1943,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1764,677,1919,704"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="758,304,895,331"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="195,304,330,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1768,752,1915,779"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1499,528,1642,555"/>
<area shape="rect" id="node23" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="2026,603,2161,629"/>
<area shape="rect" id="node25" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="2318,304,2445,331"/>
<area shape="rect" id="node27" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1681,453,1794,480"/>
<area shape="rect" id="node28" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1810,528,1873,555"/>
<area shape="rect" id="node30" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1363,603,1509,629"/>
<area shape="rect" id="node33" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1203,229,1317,256"/>
<area shape="rect" id="node37" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1032,155,1211,181"/>
<area shape="rect" id="node38" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1581,229,1715,256"/>
<area shape="rect" id="node34" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1011,304,1149,331"/>
<area shape="rect" id="node35" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1173,304,1320,331"/>
<area shape="rect" id="node36" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1395,304,1552,331"/>
<area shape="rect" id="node39" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1779,304,1930,331"/>
<area shape="rect" id="node44" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1853,155,1979,181"/>
<area shape="rect" id="node46" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2239,453,2385,480"/>
<area shape="rect" id="node47" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1598,155,1725,181"/>
<area shape="rect" id="node48" href="../../de/d15/res__srtp_8h.html" title="SRTP resource. " alt="" coords="867,155,1007,181"/>
<area shape="rect" id="node49" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1360,155,1485,181"/>
<area shape="rect" id="node50" href="../../d5/d1f/logger__category_8h.html" title="asterisk/logger_category.h" alt="" coords="2025,453,2215,480"/>
<area shape="rect" id="node45" href="../../d1/d84/endian_8h.html" title="Asterisk architecture endianess compatibility definitions. " alt="" coords="1851,229,1981,256"/>
</map>
</div>
</div>
<p><a href="../../d8/d4d/stream_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dbf/structast__stream__metadata__entry.html">ast_stream_metadata_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac18ead73a13a3d361b125535b9855723"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ac18ead73a13a3d361b125535b9855723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad49ba9aa487f49967510747b5ba1c42b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ad49ba9aa487f49967510747b5ba1c42b">set_pref_value</a>(_name,  _value,  _prefs,  _UC,  _lc,  _error_message)</td></tr>
<tr class="separator:ad49ba9aa487f49967510747b5ba1c42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf62f1ea27a9646d140e77fca738fc9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#abf62f1ea27a9646d140e77fca738fc9a">TOPOLOGY_INITIAL_STREAM_COUNT</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:abf62f1ea27a9646d140e77fca738fc9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afd6abeccf161767b676a3cb54715df2c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#afd6abeccf161767b676a3cb54715df2c">ast_stream_alloc</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:afd6abeccf161767b676a3cb54715df2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new media stream representation.  <a href="#afd6abeccf161767b676a3cb54715df2c">More...</a><br /></td></tr>
<tr class="separator:afd6abeccf161767b676a3cb54715df2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dcdd3db33377db2e845ada4c281d1d6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a9dcdd3db33377db2e845ada4c281d1d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a deep clone of an existing stream.  <a href="#a9dcdd3db33377db2e845ada4c281d1d6">More...</a><br /></td></tr>
<tr class="separator:a9dcdd3db33377db2e845ada4c281d1d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5219e4ccedf3586fd505213d0a7e24a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a5219e4ccedf3586fd505213d0a7e24a2">ast_stream_codec_prefs_parse</a> (const char *pref_string, struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *prefs, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **error_message)</td></tr>
<tr class="memdesc:a5219e4ccedf3586fd505213d0a7e24a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a string representing the codec prefs into a ast_stream_codec_negotiation_pref structure.  <a href="#a5219e4ccedf3586fd505213d0a7e24a2">More...</a><br /></td></tr>
<tr class="separator:a5219e4ccedf3586fd505213d0a7e24a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1fbca25af1ce63679d959f77868e12"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ade1fbca25af1ce63679d959f77868e12">ast_stream_codec_prefs_to_str</a> (const struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *prefs, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</td></tr>
<tr class="memdesc:ade1fbca25af1ce63679d959f77868e12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a string representing the codec preferences.  <a href="#ade1fbca25af1ce63679d959f77868e12">More...</a><br /></td></tr>
<tr class="separator:ade1fbca25af1ce63679d959f77868e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afebce6545627c349aa4877efa83f64f0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#afebce6545627c349aa4877efa83f64f0">ast_stream_create_resolved</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *pending_stream, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *validation_stream, struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *prefs, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **error_message)</td></tr>
<tr class="memdesc:afebce6545627c349aa4877efa83f64f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a resolved stream from 2 streams.  <a href="#afebce6545627c349aa4877efa83f64f0">More...</a><br /></td></tr>
<tr class="separator:afebce6545627c349aa4877efa83f64f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd53513fe1965d4e5d4581d79ef8d24c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:acd53513fe1965d4e5d4581d79ef8d24c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a media stream representation.  <a href="#acd53513fe1965d4e5d4581d79ef8d24c">More...</a><br /></td></tr>
<tr class="separator:acd53513fe1965d4e5d4581d79ef8d24c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc9bce25a44e3d9074337e2c882f445"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a6cc9bce25a44e3d9074337e2c882f445">ast_stream_get_format_count</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a6cc9bce25a44e3d9074337e2c882f445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the count of the current negotiated formats of a stream.  <a href="#a6cc9bce25a44e3d9074337e2c882f445">More...</a><br /></td></tr>
<tr class="separator:a6cc9bce25a44e3d9074337e2c882f445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8e2f46d218285e0f0ec97ba8ab77ffb"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:ae8e2f46d218285e0f0ec97ba8ab77ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current negotiated formats of a stream.  <a href="#ae8e2f46d218285e0f0ec97ba8ab77ffb">More...</a><br /></td></tr>
<tr class="separator:ae8e2f46d218285e0f0ec97ba8ab77ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783fc78f3bfbd8cf6f05102645e0500d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a783fc78f3bfbd8cf6f05102645e0500d">ast_stream_get_group</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a783fc78f3bfbd8cf6f05102645e0500d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the stream group that a stream is part of.  <a href="#a783fc78f3bfbd8cf6f05102645e0500d">More...</a><br /></td></tr>
<tr class="separator:a783fc78f3bfbd8cf6f05102645e0500d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a311bed754f00753d0fd141266ee0d282"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a311bed754f00753d0fd141266ee0d282">ast_stream_get_metadata</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, const char *m_key)</td></tr>
<tr class="memdesc:a311bed754f00753d0fd141266ee0d282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a stream metadata value.  <a href="#a311bed754f00753d0fd141266ee0d282">More...</a><br /></td></tr>
<tr class="separator:a311bed754f00753d0fd141266ee0d282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58448517075dc3723f701aade2684cb4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a58448517075dc3723f701aade2684cb4">ast_stream_get_metadata_list</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a58448517075dc3723f701aade2684cb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all stream metadata keys.  <a href="#a58448517075dc3723f701aade2684cb4">More...</a><br /></td></tr>
<tr class="separator:a58448517075dc3723f701aade2684cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb45a1d2880128928cfb6d91b19ab46"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#afcb45a1d2880128928cfb6d91b19ab46">ast_stream_get_name</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:afcb45a1d2880128928cfb6d91b19ab46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of a stream.  <a href="#afcb45a1d2880128928cfb6d91b19ab46">More...</a><br /></td></tr>
<tr class="separator:afcb45a1d2880128928cfb6d91b19ab46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35dd19cc6a6f0310d45e181398095463"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a35dd19cc6a6f0310d45e181398095463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the position of the stream in the topology.  <a href="#a35dd19cc6a6f0310d45e181398095463">More...</a><br /></td></tr>
<tr class="separator:a35dd19cc6a6f0310d45e181398095463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5654bf1d006598647c4c1c2e5105dd91"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a5654bf1d006598647c4c1c2e5105dd91">ast_stream_get_rtp_codecs</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a5654bf1d006598647c4c1c2e5105dd91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get rtp_codecs associated with the stream.  <a href="#a5654bf1d006598647c4c1c2e5105dd91">More...</a><br /></td></tr>
<tr class="separator:a5654bf1d006598647c4c1c2e5105dd91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fdfb5754dad81680c197d5c9df44971"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a6fdfb5754dad81680c197d5c9df44971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current state of a stream.  <a href="#a6fdfb5754dad81680c197d5c9df44971">More...</a><br /></td></tr>
<tr class="separator:a6fdfb5754dad81680c197d5c9df44971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86319542b92fb0dc6b2ed337d83cf8ce"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a86319542b92fb0dc6b2ed337d83cf8ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the media type of a stream.  <a href="#a86319542b92fb0dc6b2ed337d83cf8ce">More...</a><br /></td></tr>
<tr class="separator:a86319542b92fb0dc6b2ed337d83cf8ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dc44f43dab4a5484631812d9bbc3ae9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps)</td></tr>
<tr class="memdesc:a8dc44f43dab4a5484631812d9bbc3ae9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current negotiated formats of a stream.  <a href="#a8dc44f43dab4a5484631812d9bbc3ae9">More...</a><br /></td></tr>
<tr class="separator:a8dc44f43dab4a5484631812d9bbc3ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d76202e9622c9812699ae76e3f9a24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ad4d76202e9622c9812699ae76e3f9a24">ast_stream_set_group</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, int <a class="el" href="../../d3/d08/structgroup.html">group</a>)</td></tr>
<tr class="memdesc:ad4d76202e9622c9812699ae76e3f9a24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the stream group for a stream.  <a href="#ad4d76202e9622c9812699ae76e3f9a24">More...</a><br /></td></tr>
<tr class="separator:ad4d76202e9622c9812699ae76e3f9a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3190a21208ef7b4137f3355cb13a61f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a3190a21208ef7b4137f3355cb13a61f0">ast_stream_set_metadata</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, const char *m_key, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a3190a21208ef7b4137f3355cb13a61f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a stream metadata value.  <a href="#a3190a21208ef7b4137f3355cb13a61f0">More...</a><br /></td></tr>
<tr class="separator:a3190a21208ef7b4137f3355cb13a61f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07092758fc077c3b8f8c280957b3d486"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a07092758fc077c3b8f8c280957b3d486">ast_stream_set_rtp_codecs</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, struct <a class="el" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *rtp_codecs)</td></tr>
<tr class="memdesc:a07092758fc077c3b8f8c280957b3d486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set rtp_codecs associated with the stream.  <a href="#a07092758fc077c3b8f8c280957b3d486">More...</a><br /></td></tr>
<tr class="separator:a07092758fc077c3b8f8c280957b3d486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4459bba3b00250f5c5b2b4ae265909ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a4459bba3b00250f5c5b2b4ae265909ee">ast_stream_set_state</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:a4459bba3b00250f5c5b2b4ae265909ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the state of a stream.  <a href="#a4459bba3b00250f5c5b2b4ae265909ee">More...</a><br /></td></tr>
<tr class="separator:a4459bba3b00250f5c5b2b4ae265909ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f1abaafdf85418fea16366a1b5208f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a95f1abaafdf85418fea16366a1b5208f">ast_stream_set_type</a> (struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a95f1abaafdf85418fea16366a1b5208f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the media type of a stream.  <a href="#a95f1abaafdf85418fea16366a1b5208f">More...</a><br /></td></tr>
<tr class="separator:a95f1abaafdf85418fea16366a1b5208f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae96305003700b238d098ad2296a24416"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ae96305003700b238d098ad2296a24416">ast_stream_state2str</a> (enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:ae96305003700b238d098ad2296a24416"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the state of a stream into a string.  <a href="#ae96305003700b238d098ad2296a24416">More...</a><br /></td></tr>
<tr class="separator:ae96305003700b238d098ad2296a24416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d560ac6a71551ea5ce111edd6727b87"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a4d560ac6a71551ea5ce111edd6727b87">ast_stream_str2state</a> (const char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="memdesc:a4d560ac6a71551ea5ce111edd6727b87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a string to a stream state.  <a href="#a4d560ac6a71551ea5ce111edd6727b87">More...</a><br /></td></tr>
<tr class="separator:a4d560ac6a71551ea5ce111edd6727b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af793e90c3796564a01574fd9c5e9e208"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a> (const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</td></tr>
<tr class="memdesc:af793e90c3796564a01574fd9c5e9e208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a string representing the stream for debugging/display purposes.  <a href="#af793e90c3796564a01574fd9c5e9e208">More...</a><br /></td></tr>
<tr class="separator:af793e90c3796564a01574fd9c5e9e208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad225f95d1de536ba61f43150cfe3bd06"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a> (void)</td></tr>
<tr class="memdesc:ad225f95d1de536ba61f43150cfe3bd06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a stream topology.  <a href="#ad225f95d1de536ba61f43150cfe3bd06">More...</a><br /></td></tr>
<tr class="separator:ad225f95d1de536ba61f43150cfe3bd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a452835913f7150a5045dd75ee822b491"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a452835913f7150a5045dd75ee822b491">ast_stream_topology_append_stream</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a452835913f7150a5045dd75ee822b491"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a stream to the topology.  <a href="#a452835913f7150a5045dd75ee822b491">More...</a><br /></td></tr>
<tr class="separator:a452835913f7150a5045dd75ee822b491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b605b453fe5ff538e361126d600303"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</td></tr>
<tr class="memdesc:a00b605b453fe5ff538e361126d600303"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a deep clone of an existing stream topology.  <a href="#a00b605b453fe5ff538e361126d600303">More...</a><br /></td></tr>
<tr class="separator:a00b605b453fe5ff538e361126d600303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57b837e53f8ea2335ec9dc00cdc0c0c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a> (struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap)</td></tr>
<tr class="memdesc:ab57b837e53f8ea2335ec9dc00cdc0c0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A helper function that, given a format capabilities structure, creates a topology and separates the media types in format_cap into separate streams.  <a href="#ab57b837e53f8ea2335ec9dc00cdc0c0c">More...</a><br /></td></tr>
<tr class="separator:ab57b837e53f8ea2335ec9dc00cdc0c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38f129886d756e4f982d749b6278909"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ac38f129886d756e4f982d749b6278909">ast_stream_topology_create_resolved</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *pending_topology, struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *configured_topology, struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *prefs, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **error_message)</td></tr>
<tr class="memdesc:ac38f129886d756e4f982d749b6278909"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a resolved stream topology from 2 topologies.  <a href="#ac38f129886d756e4f982d749b6278909">More...</a><br /></td></tr>
<tr class="separator:ac38f129886d756e4f982d749b6278909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71a656802bd6b8e87846b42a5fb35a79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a71a656802bd6b8e87846b42a5fb35a79">ast_stream_topology_del_stream</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, unsigned int position)</td></tr>
<tr class="memdesc:a71a656802bd6b8e87846b42a5fb35a79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a specified stream from the given topology.  <a href="#a71a656802bd6b8e87846b42a5fb35a79">More...</a><br /></td></tr>
<tr class="separator:a71a656802bd6b8e87846b42a5fb35a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d846e650b6d3e654c01d61a991c82c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ae0d846e650b6d3e654c01d61a991c82c">ast_stream_topology_equal</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *left, const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *right)</td></tr>
<tr class="memdesc:ae0d846e650b6d3e654c01d61a991c82c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two stream topologies to see if they are equal.  <a href="#ae0d846e650b6d3e654c01d61a991c82c">More...</a><br /></td></tr>
<tr class="separator:ae0d846e650b6d3e654c01d61a991c82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88eca139ded2d5bbc6cdcf793febc265"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</td></tr>
<tr class="memdesc:a88eca139ded2d5bbc6cdcf793febc265"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unreference and destroy a stream topology.  <a href="#a88eca139ded2d5bbc6cdcf793febc265">More...</a><br /></td></tr>
<tr class="separator:a88eca139ded2d5bbc6cdcf793febc265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9535a0540728f4a16be338a261a89580"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a9535a0540728f4a16be338a261a89580">ast_stream_topology_get_active_count</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</td></tr>
<tr class="memdesc:a9535a0540728f4a16be338a261a89580"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of active (non-REMOVED) streams in a topology.  <a href="#a9535a0540728f4a16be338a261a89580">More...</a><br /></td></tr>
<tr class="separator:a9535a0540728f4a16be338a261a89580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb43440630db819220df97b01f48922"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</td></tr>
<tr class="memdesc:a5eb43440630db819220df97b01f48922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of streams in a topology.  <a href="#a5eb43440630db819220df97b01f48922">More...</a><br /></td></tr>
<tr class="separator:a5eb43440630db819220df97b01f48922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b577a1e826e57092e8dba77a89031f5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a1b577a1e826e57092e8dba77a89031f5">ast_stream_topology_get_first_stream_by_type</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a1b577a1e826e57092e8dba77a89031f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the first active stream of a specific type from the topology.  <a href="#a1b577a1e826e57092e8dba77a89031f5">More...</a><br /></td></tr>
<tr class="separator:a1b577a1e826e57092e8dba77a89031f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac027a9684ada5477ddc7f64142b5338d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</td></tr>
<tr class="memdesc:ac027a9684ada5477ddc7f64142b5338d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a format capabilities structure representing the topology.  <a href="#ac027a9684ada5477ddc7f64142b5338d">More...</a><br /></td></tr>
<tr class="separator:ac027a9684ada5477ddc7f64142b5338d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328f6c3cf20cbd6a1a402bb4a8cfe2ca"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a328f6c3cf20cbd6a1a402bb4a8cfe2ca">ast_stream_topology_get_formats_by_type</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:a328f6c3cf20cbd6a1a402bb4a8cfe2ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a format capabilities structure containing all the formats from all the streams of a particular type in the topology.  <a href="#a328f6c3cf20cbd6a1a402bb4a8cfe2ca">More...</a><br /></td></tr>
<tr class="separator:a328f6c3cf20cbd6a1a402bb4a8cfe2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f727f403d8899cdb55488a49c9b7841"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a1f727f403d8899cdb55488a49c9b7841">ast_stream_topology_get_stream</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, unsigned int stream_num)</td></tr>
<tr class="memdesc:a1f727f403d8899cdb55488a49c9b7841"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a specific stream from the topology.  <a href="#a1f727f403d8899cdb55488a49c9b7841">More...</a><br /></td></tr>
<tr class="separator:a1f727f403d8899cdb55488a49c9b7841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b482e485bd9a3c1d2ab8acdd90eadc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ad9b482e485bd9a3c1d2ab8acdd90eadc">ast_stream_topology_map</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, struct ast_vector_int *types, struct ast_vector_int *v0, struct ast_vector_int *v1)</td></tr>
<tr class="memdesc:ad9b482e485bd9a3c1d2ab8acdd90eadc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map a given topology's streams to the given types.  <a href="#ad9b482e485bd9a3c1d2ab8acdd90eadc">More...</a><br /></td></tr>
<tr class="separator:ad9b482e485bd9a3c1d2ab8acdd90eadc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bec3fe997f1085a3095cd46e8208b20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a1bec3fe997f1085a3095cd46e8208b20">ast_stream_topology_set_stream</a> (struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, unsigned int position, struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream)</td></tr>
<tr class="memdesc:a1bec3fe997f1085a3095cd46e8208b20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a specific position in a topology.  <a href="#a1bec3fe997f1085a3095cd46e8208b20">More...</a><br /></td></tr>
<tr class="separator:a1bec3fe997f1085a3095cd46e8208b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da8d8e63718c47d43b9e738c7f6e55a"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a> (const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</td></tr>
<tr class="memdesc:a3da8d8e63718c47d43b9e738c7f6e55a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a string representing the topology for debugging/display purposes.  <a href="#a3da8d8e63718c47d43b9e738c7f6e55a">More...</a><br /></td></tr>
<tr class="separator:a3da8d8e63718c47d43b9e738c7f6e55a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a2b435e5057a153b0a13cc309b0056"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a37a2b435e5057a153b0a13cc309b0056">stream_topology_destroy</a> (void *data)</td></tr>
<tr class="separator:a37a2b435e5057a153b0a13cc309b0056"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa906f45fa54e87a73685dc5ea6ab413f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#aa906f45fa54e87a73685dc5ea6ab413f">ast_stream_codec_negotiation_keep_map</a> []</td></tr>
<tr class="memdesc:aa906f45fa54e87a73685dc5ea6ab413f"><td class="mdescLeft">&#160;</td><td class="mdescRight">"keep" enum to string map  <a href="#aa906f45fa54e87a73685dc5ea6ab413f">More...</a><br /></td></tr>
<tr class="separator:aa906f45fa54e87a73685dc5ea6ab413f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4a8c3911f998b400bfb2b0368e11eb8"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#af4a8c3911f998b400bfb2b0368e11eb8">ast_stream_codec_negotiation_operation_map</a> []</td></tr>
<tr class="memdesc:af4a8c3911f998b400bfb2b0368e11eb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">"operation" enum to string map  <a href="#af4a8c3911f998b400bfb2b0368e11eb8">More...</a><br /></td></tr>
<tr class="separator:af4a8c3911f998b400bfb2b0368e11eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96efa5b5faa4f5032955f6cedf1aa7ea"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a96efa5b5faa4f5032955f6cedf1aa7ea">ast_stream_codec_negotiation_params_map</a> []</td></tr>
<tr class="memdesc:a96efa5b5faa4f5032955f6cedf1aa7ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preference enum to string map.  <a href="#a96efa5b5faa4f5032955f6cedf1aa7ea">More...</a><br /></td></tr>
<tr class="separator:a96efa5b5faa4f5032955f6cedf1aa7ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad33bdf05a7a6f778f16680a619da8fa2"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#ad33bdf05a7a6f778f16680a619da8fa2">ast_stream_codec_negotiation_prefer_map</a> []</td></tr>
<tr class="memdesc:ad33bdf05a7a6f778f16680a619da8fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">"prefer" enum to string map  <a href="#ad33bdf05a7a6f778f16680a619da8fa2">More...</a><br /></td></tr>
<tr class="separator:ad33bdf05a7a6f778f16680a619da8fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909312fd0db16d78469c74b2f67255b0"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#a909312fd0db16d78469c74b2f67255b0">ast_stream_codec_negotiation_transcode_map</a> []</td></tr>
<tr class="memdesc:a909312fd0db16d78469c74b2f67255b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">"transcode" state enum to string map  <a href="#a909312fd0db16d78469c74b2f67255b0">More...</a><br /></td></tr>
<tr class="separator:a909312fd0db16d78469c74b2f67255b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca7fc670baa89f55e1e218f0ea4c0eac"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4d/stream_8c.html#aca7fc670baa89f55e1e218f0ea4c0eac">ast_stream_state_map</a> []</td></tr>
<tr class="memdesc:aca7fc670baa89f55e1e218f0ea4c0eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stream state enum to string map.  <a href="#aca7fc670baa89f55e1e218f0ea4c0eac">More...</a><br /></td></tr>
<tr class="separator:aca7fc670baa89f55e1e218f0ea4c0eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Media Stream API. </p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac18ead73a13a3d361b125535b9855723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac18ead73a13a3d361b125535b9855723">&#9670;&nbsp;</a></span>MIN_STREAM_NAME_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_STREAM_NAME_LEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00231">231</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00233">ast_stream_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00257">ast_stream_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00748">ast_stream_topology_append_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00796">ast_stream_topology_set_stream()</a>.</p>

</div>
</div>
<a id="ad49ba9aa487f49967510747b5ba1c42b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad49ba9aa487f49967510747b5ba1c42b">&#9670;&nbsp;</a></span>set_pref_value</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define set_pref_value</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_value, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_prefs, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_UC, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_lc, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_error_message&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00159">159</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00181">ast_stream_codec_prefs_parse()</a>.</p>

</div>
</div>
<a id="abf62f1ea27a9646d140e77fca738fc9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf62f1ea27a9646d140e77fca738fc9a">&#9670;&nbsp;</a></span>TOPOLOGY_INITIAL_STREAM_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPOLOGY_INITIAL_STREAM_COUNT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00649">649</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00650">ast_stream_topology_alloc()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afd6abeccf161767b676a3cb54715df2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6abeccf161767b676a3cb54715df2c">&#9670;&nbsp;</a></span>ast_stream_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a>* ast_stream_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new media stream representation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>A name for the stream </td></tr>
    <tr><td class="paramname">type</td><td>The media type the stream is handling</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is NOT an AO2 object and has no locking. It is expected that a higher level object provides protection.</dd>
<dd>
The stream will default to an inactive state until changed.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00233">233</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00094">AST_STREAM_STATE_INACTIVE</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00110">ast_stream::group</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00228">MAX</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00231">MIN_STREAM_NAME_LEN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00622">ast_unreal_indicate()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02613">build_topology()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01650">make_channel()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00367">t38_create_media_state()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05523">test_stream_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordtype">size_t</span> name_len = <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(strlen(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;&quot;</span>)), <a class="code" href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a>); <span class="comment">/* Ensure there is enough room for &#39;removed&#39; or a type-position */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   stream = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*stream) + name_len + 1);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a> = <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">group</a> = -1;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   strcpy(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="stringliteral">&quot;&quot;</span>)); <span class="comment">/* Safe */</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(stream);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordflow">return</span> stream;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="stream_8c_html_ac18ead73a13a3d361b125535b9855723"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a></div><div class="ttdeci">#define MIN_STREAM_NAME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00231">stream.c:231</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a></div><div class="ttdoc">Set when the stream is not sending OR receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00094">stream.h:94</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
<div class="ttc" id="structast__stream_html_a0242027ec3331f3d5793c42d21b6f4e1"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">ast_stream::group</a></div><div class="ttdeci">int group</div><div class="ttdoc">The group that the stream is part of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00110">stream.c:110</a></div></div>
<div class="ttc" id="utils_8h_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00228">utils.h:228</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9dcdd3db33377db2e845ada4c281d1d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dcdd3db33377db2e845ada4c281d1d6">&#9670;&nbsp;</a></span>ast_stream_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a>* ast_stream_clone </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a deep clone of an existing stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The existing stream </td></tr>
    <tr><td class="paramname">Optional</td><td>name for cloned stream. If NULL, then existing stream's name is copied.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Opaque data pointers set with ast_stream_set_data() are not part of the deep clone. We have no way to clone the data.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00257">257</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00439">ast_stream_get_metadata_list()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00110">ast_stream::group</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00228">MAX</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00105">ast_stream::metadata</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00231">MIN_STREAM_NAME_LEN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00505">append_source_stream()</a>, <a class="el" href="../../dc/d13/pjsip__session__caps_8c_source.html#l00130">ast_sip_session_create_joint_call_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00525">ast_stream_create_resolved()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, and <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *new_stream;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *stream_name;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordtype">size_t</span> name_len;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   stream_name = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> ?: stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   name_len = <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(strlen(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stream_name, <span class="stringliteral">&quot;&quot;</span>)), <a class="code" href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a>); <span class="comment">/* Ensure there is enough room for &#39;removed&#39; or a type-position */</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   new_stream = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*stream) + name_len + 1);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">if</span> (!new_stream) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   memcpy(new_stream, stream, <span class="keyword">sizeof</span>(*new_stream));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   strcpy(new_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, stream_name); <span class="comment">/* Safe */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   new_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">group</a> = -1;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   new_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">if</span> (!new_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(new_stream);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(new_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>, stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   new_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a> = <a class="code" href="../../d8/d4d/stream_8c.html#a58448517075dc3723f701aade2684cb4">ast_stream_get_metadata_list</a>(stream);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="comment">/* rtp_codecs aren&#39;t cloned */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">return</span> new_stream;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="stream_8c_html_ac18ead73a13a3d361b125535b9855723"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a></div><div class="ttdeci">#define MIN_STREAM_NAME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00231">stream.c:231</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
<div class="ttc" id="structast__stream_html_a0242027ec3331f3d5793c42d21b6f4e1"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">ast_stream::group</a></div><div class="ttdeci">int group</div><div class="ttdoc">The group that the stream is part of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00110">stream.c:110</a></div></div>
<div class="ttc" id="utils_8h_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00228">utils.h:228</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="stream_8c_html_a58448517075dc3723f701aade2684cb4"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a58448517075dc3723f701aade2684cb4">ast_stream_get_metadata_list</a></div><div class="ttdeci">struct ast_variable * ast_stream_get_metadata_list(const struct ast_stream *stream)</div><div class="ttdoc">Get all stream metadata keys. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00439">stream.c:439</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="structast__stream_html_a5a1d2088082da5d4a054aaf0322d91fb"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">ast_stream::metadata</a></div><div class="ttdeci">struct ast_variable * metadata</div><div class="ttdoc">Stream metadata vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00105">stream.c:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5219e4ccedf3586fd505213d0a7e24a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5219e4ccedf3586fd505213d0a7e24a2">&#9670;&nbsp;</a></span>ast_stream_codec_prefs_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_codec_prefs_parse </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pref_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *&#160;</td>
          <td class="paramname"><em>prefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>error_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a string representing the codec prefs into a ast_stream_codec_negotiation_pref structure. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<p>This function is mainly used by pjsip_configuration as a sorcery parameter handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pref_string</td><td>A string in the format described by <a class="el" href="../../d8/d95/stream_8h.html#ade1fbca25af1ce63679d959f77868e12" title="Return a string representing the codec preferences. ">ast_stream_codec_prefs_to_str()</a>. </td></tr>
    <tr><td class="paramname">prefs</td><td>Pointer to a <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> structure to receive the parsed values. </td></tr>
    <tr><td class="paramname">error_message</td><td>An optional ast_str** into which parsing errors will be placed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if success </td></tr>
    <tr><td class="paramname">-1</td><td>if failed</td></tr>
  </table>
  </dd>
</dl>
<p>Whitespace around the ':' and ',' separators is ignored and the parameters can be specified in any order. Parameters missing in the input string will have their values set to the appropriate *_UNSPECIFIED value and will not be considered an error. It's up to the caller to decide whether set a default value, return an error, etc.</p>
<p>Sample input: "prefer : configured , operation: union,keep:all, transcode:prevent" </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00181">181</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00178">CODEC_NEGOTIATION_KEEP_UNSPECIFIED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00160">CODEC_NEGOTIATION_OPERATION_UNSPECIFIED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00146">CODEC_NEGOTIATION_PREFER_UNSPECIFIED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00192">CODEC_NEGOTIATION_TRANSCODE_UNSPECIFIED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00298">ast_stream_codec_negotiation_prefs::keep</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00296">ast_stream_codec_negotiation_prefs::operation</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00294">ast_stream_codec_negotiation_prefs::prefer</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00159">set_pref_value</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00300">ast_stream_codec_negotiation_prefs::transcode</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01169">codec_prefs_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordtype">char</span> *initial_value = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(pref_string);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordtype">char</span> *current_value;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordtype">char</span> *pref;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordtype">char</span> *saveptr1;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordtype">char</span> *saveptr2;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">if</span> (!prefs) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#ac4a2de04e8761e580204eb83436f590a">prefer</a> = <a class="code" href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a43cca64d95fd6af164696bba94c7d345">CODEC_NEGOTIATION_PREFER_UNSPECIFIED</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a361eb12b4f33a22fcbd2d1d33eb4d965">operation</a> = <a class="code" href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9a963b84a2777ca31a097c9ed6f29a79cf">CODEC_NEGOTIATION_OPERATION_UNSPECIFIED</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#aae179d28711a4e2b6e9d7ca2de6df98f">keep</a> = <a class="code" href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a3a687db29203d7bd1e68c74df77593ef">CODEC_NEGOTIATION_KEEP_UNSPECIFIED</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a0764fa7f586e00e99738ec6a9a57838e">transcode</a> = <a class="code" href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89a0970c228ef64e5e731fbb03fd3689c1f">CODEC_NEGOTIATION_TRANSCODE_UNSPECIFIED</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">for</span> (current_value = initial_value; (pref = strtok_r(current_value, <span class="stringliteral">&quot;,&quot;</span>, &amp;saveptr1)) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; ) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      name = strtok_r(pref, <span class="stringliteral">&quot;: &quot;</span>, &amp;saveptr2);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      value = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;: &quot;</span>, &amp;saveptr2);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">if</span> (!name || !value) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         <span class="keywordflow">if</span> (error_message) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot;Codec preference &#39;%s&#39; is invalid&quot;</span>, pref);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#ad49ba9aa487f49967510747b5ba1c42b">set_pref_value</a>(name, value, prefs, OPERATION, operation, error_message);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#ad49ba9aa487f49967510747b5ba1c42b">set_pref_value</a>(name, value, prefs, PREFER, prefer, error_message);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#ad49ba9aa487f49967510747b5ba1c42b">set_pref_value</a>(name, value, prefs, KEEP, keep, error_message);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#ad49ba9aa487f49967510747b5ba1c42b">set_pref_value</a>(name, value, prefs, TRANSCODE, transcode, error_message);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      current_value = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="ttc" id="stream_8h_html_a9a24d8917f7266637f81d3352da9be89a0970c228ef64e5e731fbb03fd3689c1f"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89a0970c228ef64e5e731fbb03fd3689c1f">CODEC_NEGOTIATION_TRANSCODE_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00192">stream.h:192</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_a361eb12b4f33a22fcbd2d1d33eb4d965"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a361eb12b4f33a22fcbd2d1d33eb4d965">ast_stream_codec_negotiation_prefs::operation</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_operation_values operation</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00296">stream.h:296</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_ac4a2de04e8761e580204eb83436f590a"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#ac4a2de04e8761e580204eb83436f590a">ast_stream_codec_negotiation_prefs::prefer</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_prefer_values prefer</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00294">stream.h:294</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_aae179d28711a4e2b6e9d7ca2de6df98f"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#aae179d28711a4e2b6e9d7ca2de6df98f">ast_stream_codec_negotiation_prefs::keep</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_keep_values keep</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00298">stream.h:298</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="stream_8h_html_a2f0040e1dc71ef11bcf2184318bf24e9a963b84a2777ca31a097c9ed6f29a79cf"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9a963b84a2777ca31a097c9ed6f29a79cf">CODEC_NEGOTIATION_OPERATION_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00160">stream.h:160</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_a0764fa7f586e00e99738ec6a9a57838e"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a0764fa7f586e00e99738ec6a9a57838e">ast_stream_codec_negotiation_prefs::transcode</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_transcode_values transcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00300">stream.h:300</a></div></div>
<div class="ttc" id="stream_8h_html_aef2c14792611abd0869728c2e0396921a43cca64d95fd6af164696bba94c7d345"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a43cca64d95fd6af164696bba94c7d345">CODEC_NEGOTIATION_PREFER_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00146">stream.h:146</a></div></div>
<div class="ttc" id="stream_8c_html_ad49ba9aa487f49967510747b5ba1c42b"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ad49ba9aa487f49967510747b5ba1c42b">set_pref_value</a></div><div class="ttdeci">#define set_pref_value(_name, _value, _prefs, _UC, _lc, _error_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00159">stream.c:159</a></div></div>
<div class="ttc" id="stream_8h_html_a45f84a7fad92fc9e7013a7bc8825f8e5a3a687db29203d7bd1e68c74df77593ef"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a3a687db29203d7bd1e68c74df77593ef">CODEC_NEGOTIATION_KEEP_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00178">stream.h:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade1fbca25af1ce63679d959f77868e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade1fbca25af1ce63679d959f77868e12">&#9670;&nbsp;</a></span>ast_stream_codec_prefs_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_codec_prefs_to_str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *&#160;</td>
          <td class="paramname"><em>prefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a string representing the codec preferences. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<p>This function can be used for debugging purposes but is also used in pjsip_configuration as a sorcery parameter handler</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefs</td><td>A pointer to a <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> structure </td></tr>
    <tr><td class="paramname">buf</td><td>A pointer to an ast_str* used for the output. See note below.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the contents of the <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> as a const char *.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>No attempt should ever be made to free the returned char * and it should be dup'd if needed after the <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> is freed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>buf can't be NULL but it CAN contain a NULL value. If so, a new <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> will be allocated and the value of buf updated with a pointer to it. Whether the caller supplies the <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> or it's allocated by this function, it's the caller's responsibility to free it.</dd></dl>
<p>Sample output: "prefer: configured, operation: union, keep:all, transcode:prevent" </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00132">132</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00274">ast_stream_codec_keep_to_str</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00264">ast_stream_codec_operation_to_str</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00244">ast_stream_codec_param_to_str</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00254">ast_stream_codec_prefer_to_str</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00284">ast_stream_codec_transcode_to_str</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00134">CODEC_NEGOTIATION_PARAM_KEEP</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00132">CODEC_NEGOTIATION_PARAM_OPERATION</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00130">CODEC_NEGOTIATION_PARAM_PREFER</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00136">CODEC_NEGOTIATION_PARAM_TRANSCODE</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00298">ast_stream_codec_negotiation_prefs::keep</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00296">ast_stream_codec_negotiation_prefs::operation</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00294">ast_stream_codec_negotiation_prefs::prefer</a>, and <a class="el" href="../../d8/d95/stream_8h_source.html#l00300">ast_stream_codec_negotiation_prefs::transcode</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00525">ast_stream_create_resolved()</a>, and <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01244">codec_prefs_to_str()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="keywordflow">if</span> (!prefs || !buf || !*buf) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;%s:%s, %s:%s, %s:%s, %s:%s&quot;</span>,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#af23aa1aece7e6d9808fe1f2f250a5c0d">ast_stream_codec_param_to_str</a>(<a class="code" href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2a0e712a8c31e1410318075611f03b53c0">CODEC_NEGOTIATION_PARAM_PREFER</a>),</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#af90a4acb9bb32ad34b669296331b0c4f">ast_stream_codec_prefer_to_str</a>(prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#ac4a2de04e8761e580204eb83436f590a">prefer</a>),</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#af23aa1aece7e6d9808fe1f2f250a5c0d">ast_stream_codec_param_to_str</a>(<a class="code" href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2adf9c2a73f7273f9b32e108a0027038f6">CODEC_NEGOTIATION_PARAM_OPERATION</a>),</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a57f7437ec458977009b8e2d77ab7bb7c">ast_stream_codec_operation_to_str</a>(prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a361eb12b4f33a22fcbd2d1d33eb4d965">operation</a>),</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#af23aa1aece7e6d9808fe1f2f250a5c0d">ast_stream_codec_param_to_str</a>(<a class="code" href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2ac5fba588460ee1eb6cada956deb7e902">CODEC_NEGOTIATION_PARAM_KEEP</a>),</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#afd22b1af11404506a48989ff976241f2">ast_stream_codec_keep_to_str</a>(prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#aae179d28711a4e2b6e9d7ca2de6df98f">keep</a>),</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#af23aa1aece7e6d9808fe1f2f250a5c0d">ast_stream_codec_param_to_str</a>(<a class="code" href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2a31b8080983557f21f9be91344a13d7fd">CODEC_NEGOTIATION_PARAM_TRANSCODE</a>),</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a867071194965013a5c2377bf9fb1e8a3">ast_stream_codec_transcode_to_str</a>(prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a0764fa7f586e00e99738ec6a9a57838e">transcode</a>)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      );</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="stream_8h_html_ab1842f1217a2965e38d67d9c380fe7a2adf9c2a73f7273f9b32e108a0027038f6"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2adf9c2a73f7273f9b32e108a0027038f6">CODEC_NEGOTIATION_PARAM_OPERATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00132">stream.h:132</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_a361eb12b4f33a22fcbd2d1d33eb4d965"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a361eb12b4f33a22fcbd2d1d33eb4d965">ast_stream_codec_negotiation_prefs::operation</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_operation_values operation</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00296">stream.h:296</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_ac4a2de04e8761e580204eb83436f590a"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#ac4a2de04e8761e580204eb83436f590a">ast_stream_codec_negotiation_prefs::prefer</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_prefer_values prefer</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00294">stream.h:294</a></div></div>
<div class="ttc" id="stream_8h_html_ab1842f1217a2965e38d67d9c380fe7a2a0e712a8c31e1410318075611f03b53c0"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2a0e712a8c31e1410318075611f03b53c0">CODEC_NEGOTIATION_PARAM_PREFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00130">stream.h:130</a></div></div>
<div class="ttc" id="stream_8h_html_a57f7437ec458977009b8e2d77ab7bb7c"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a57f7437ec458977009b8e2d77ab7bb7c">ast_stream_codec_operation_to_str</a></div><div class="ttdeci">#define ast_stream_codec_operation_to_str(value)</div><div class="ttdoc">Safely get the name of an &quot;operation&quot; parameter value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00264">stream.h:264</a></div></div>
<div class="ttc" id="stream_8h_html_ab1842f1217a2965e38d67d9c380fe7a2ac5fba588460ee1eb6cada956deb7e902"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2ac5fba588460ee1eb6cada956deb7e902">CODEC_NEGOTIATION_PARAM_KEEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00134">stream.h:134</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_aae179d28711a4e2b6e9d7ca2de6df98f"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#aae179d28711a4e2b6e9d7ca2de6df98f">ast_stream_codec_negotiation_prefs::keep</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_keep_values keep</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00298">stream.h:298</a></div></div>
<div class="ttc" id="stream_8h_html_afd22b1af11404506a48989ff976241f2"><div class="ttname"><a href="../../d8/d95/stream_8h.html#afd22b1af11404506a48989ff976241f2">ast_stream_codec_keep_to_str</a></div><div class="ttdeci">#define ast_stream_codec_keep_to_str(value)</div><div class="ttdoc">Safely get the name of a &quot;keep&quot; parameter value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00274">stream.h:274</a></div></div>
<div class="ttc" id="stream_8h_html_a867071194965013a5c2377bf9fb1e8a3"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a867071194965013a5c2377bf9fb1e8a3">ast_stream_codec_transcode_to_str</a></div><div class="ttdeci">#define ast_stream_codec_transcode_to_str(value)</div><div class="ttdoc">Safely get the name of a &quot;transcode&quot; parameter value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00284">stream.h:284</a></div></div>
<div class="ttc" id="stream_8h_html_ab1842f1217a2965e38d67d9c380fe7a2a31b8080983557f21f9be91344a13d7fd"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab1842f1217a2965e38d67d9c380fe7a2a31b8080983557f21f9be91344a13d7fd">CODEC_NEGOTIATION_PARAM_TRANSCODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00136">stream.h:136</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_a0764fa7f586e00e99738ec6a9a57838e"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a0764fa7f586e00e99738ec6a9a57838e">ast_stream_codec_negotiation_prefs::transcode</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_transcode_values transcode</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00300">stream.h:300</a></div></div>
<div class="ttc" id="stream_8h_html_af90a4acb9bb32ad34b669296331b0c4f"><div class="ttname"><a href="../../d8/d95/stream_8h.html#af90a4acb9bb32ad34b669296331b0c4f">ast_stream_codec_prefer_to_str</a></div><div class="ttdeci">#define ast_stream_codec_prefer_to_str(value)</div><div class="ttdoc">Safely get the name of a &quot;prefer&quot; parameter value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00254">stream.h:254</a></div></div>
<div class="ttc" id="stream_8h_html_af23aa1aece7e6d9808fe1f2f250a5c0d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#af23aa1aece7e6d9808fe1f2f250a5c0d">ast_stream_codec_param_to_str</a></div><div class="ttdeci">#define ast_stream_codec_param_to_str(value)</div><div class="ttdoc">Safely get the name of a preference parameter. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00244">stream.h:244</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afebce6545627c349aa4877efa83f64f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afebce6545627c349aa4877efa83f64f0">&#9670;&nbsp;</a></span>ast_stream_create_resolved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a>* ast_stream_create_resolved </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>pending_stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>configured_stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *&#160;</td>
          <td class="paramname"><em>prefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>error_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a resolved stream from 2 streams. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pending_stream</td><td>The "live" stream created from an SDP, passed through the core, or used to create an SDP. </td></tr>
    <tr><td class="paramname">configured_stream</td><td>The static stream used to validate the pending stream. </td></tr>
    <tr><td class="paramname">prefs</td><td>A pointer to an <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> structure. </td></tr>
    <tr><td class="paramname">error_message</td><td>If supplied, error messages will be appended.</td></tr>
  </table>
  </dd>
</dl>
<p>The resulting stream will contain all of the attributes and metadata of the pending stream but will contain only the formats that passed the validation specified by the <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> structure. This may mean that the stream's format_caps will be empty. It's up to the caller to determine what to do with the stream in that case. I.E. Free it, set it to the REMOVED state, etc. A stream will always be returned unless there was some catastrophic allocation failure.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if there was some allocation failure. </td></tr>
    <tr><td class="paramname">A</td><td>new, resolved stream. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00525">525</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00741">ast_format_cap_append_names()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00746">ast_format_cap_empty()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00630">ast_format_cap_get_compatible()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00438">ast_format_cap_get_framing()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00525">ast_format_cap_remove_by_type()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00136">ast_format_cap_set_framing()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01136">ast_str_tmp</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00257">ast_stream_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00132">ast_stream_codec_prefs_to_str()</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00307">AST_STREAM_MAX_CODEC_PREFS_LENGTH</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00365">ast_stream_set_formats()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00337">ast_stream_to_str()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00692">ast_trace</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00182">CODEC_NEGOTIATION_KEEP_FIRST</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00162">CODEC_NEGOTIATION_OPERATION_INTERSECT</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00168">CODEC_NEGOTIATION_OPERATION_ONLY_NONPREFERRED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00166">CODEC_NEGOTIATION_OPERATION_ONLY_PREFERRED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00164">CODEC_NEGOTIATION_OPERATION_UNION</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00148">CODEC_NEGOTIATION_PREFER_PENDING</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00298">ast_stream_codec_negotiation_prefs::keep</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00296">ast_stream_codec_negotiation_prefs::operation</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00294">ast_stream_codec_negotiation_prefs::prefer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00780">SCOPE_ENTER</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00875">SCOPE_EXIT_RTN_VALUE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00637">TRACE_ATLEAST</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>.</p>
<div class="fragment"><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;{</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *preferred_caps = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *nonpreferred_caps = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *joint_caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *joint_stream;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a> = pending_stream ? pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> : <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a>(4, <span class="stringliteral">&quot;Pending: %s  Validation: %s  Prefs: %s\n&quot;</span>,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(128, <a class="code" href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a>(pending_stream, &amp;STR_TMP)),</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(128, <a class="code" href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a>(validation_stream, &amp;STR_TMP)),</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(128, <a class="code" href="../../d8/d4d/stream_8c.html#ade1fbca25af1ce63679d959f77868e12">ast_stream_codec_prefs_to_str</a>(prefs, &amp;STR_TMP)));</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keywordflow">if</span> (!pending_stream || !validation_stream || !prefs || !joint_caps</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      || media_type == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">if</span> (error_message) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot;Invalid arguments&quot;</span>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_caps);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;Invalid arguments\n&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">if</span> (prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#ac4a2de04e8761e580204eb83436f590a">prefer</a> == <a class="code" href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a4d65c44e2c39297c0c297d0ed8889cdf">CODEC_NEGOTIATION_PREFER_PENDING</a>) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      preferred_caps = pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      nonpreferred_caps = validation_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      preferred_caps = validation_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      nonpreferred_caps = pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ad938aaf8c3c616b854d44f8bfa3bab1d">ast_format_cap_set_framing</a>(joint_caps, <a class="code" href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a>(pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>));</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordflow">switch</span>(prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a361eb12b4f33a22fcbd2d1d33eb4d965">operation</a>) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9a85b2f3505a06a643c14db40f9a132e9f">CODEC_NEGOTIATION_OPERATION_ONLY_PREFERRED</a>:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      res = <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(joint_caps, preferred_caps, media_type);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9a9f458e7ee0b6cc294125093fdd8c0fdd">CODEC_NEGOTIATION_OPERATION_ONLY_NONPREFERRED</a>:</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      res = <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(joint_caps, nonpreferred_caps, media_type);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9ae917f0f03eb5037b6546008fbaac2631">CODEC_NEGOTIATION_OPERATION_INTERSECT</a>:</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      res = <a class="code" href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a>(preferred_caps, nonpreferred_caps, joint_caps);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9aad8c5fd9a0993eae54191dbb45212d12">CODEC_NEGOTIATION_OPERATION_UNION</a>:</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      res = <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(joint_caps, preferred_caps, media_type);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;         res = <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(joint_caps, nonpreferred_caps, media_type);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (error_message) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot;No common formats available for media type &#39;%s&#39; &quot;</span>,</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(preferred_caps, error_message);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot;&lt;&gt;&quot;</span>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(nonpreferred_caps, error_message);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot; with prefs: &quot;</span>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#ade1fbca25af1ce63679d959f77868e12">ast_stream_codec_prefs_to_str</a>(prefs, error_message);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_caps);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;No common formats available\n&quot;</span>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(joint_caps)) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">if</span> (prefs-&gt;<a class="code" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#aae179d28711a4e2b6e9d7ca2de6df98f">keep</a> == <a class="code" href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a0fff4780f7aa3c25f6f1161961c5618a">CODEC_NEGOTIATION_KEEP_FIRST</a>) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *single = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(joint_caps, 0);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(joint_caps, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(joint_caps, single, 0);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(single, -1);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">if</span> (error_message) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot;No common formats available for media type &#39;%s&#39; &quot;</span>,</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(preferred_caps, error_message);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot;&lt;&gt;&quot;</span>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(nonpreferred_caps, error_message);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(error_message, 0, <span class="stringliteral">&quot; with prefs: &quot;</span>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#ade1fbca25af1ce63679d959f77868e12">ast_stream_codec_prefs_to_str</a>(prefs, error_message);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   joint_stream = <a class="code" href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a>(pending_stream, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keywordflow">if</span> (!joint_stream) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_caps);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="comment">/* ref to joint_caps will be transferred to the stream */</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <a class="code" href="../../d8/d4d/stream_8c.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a>(joint_stream, joint_caps);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a57001f3d33d960dec79dee782b6229a8">TRACE_ATLEAST</a>(3)) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>((<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a> * 3) + <a class="code" href="../../d8/d95/stream_8h.html#a270ded10b843425ad2417df10ecf880e">AST_STREAM_MAX_CODEC_PREFS_LENGTH</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;buf, 0, <span class="stringliteral">&quot;Resolved &#39;%s&#39; stream &quot;</span>, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(preferred_caps, &amp;buf);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot;&lt;&gt;&quot;</span>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(nonpreferred_caps, &amp;buf);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot; to &quot;</span>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(joint_caps, &amp;buf);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;buf, 0, <span class="stringliteral">&quot; with prefs: &quot;</span>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#ade1fbca25af1ce63679d959f77868e12">ast_stream_codec_prefs_to_str</a>(prefs, &amp;buf);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(buf));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_caps);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a>(joint_stream, <span class="stringliteral">&quot;Joint stream: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(128, <a class="code" href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a>(joint_stream, &amp;STR_TMP)));</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="format__cap_8h_html_a3aaa13500c7e4dd3dad8e4c6afccbed3"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a></div><div class="ttdeci">unsigned int ast_format_cap_get_framing(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00438">format_cap.c:438</a></div></div>
<div class="ttc" id="sip_8h_html_a99c5ff7e5199a13ca4884062b413d68f"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a99c5ff7e5199a13ca4884062b413d68f">media_type</a></div><div class="ttdeci">media_type</div><div class="ttdoc">Media types generate different &quot;dummy answers&quot; for not accepting the offer of a media stream...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00489">sip.h:489</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="stream_8h_html_a270ded10b843425ad2417df10ecf880e"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a270ded10b843425ad2417df10ecf880e">AST_STREAM_MAX_CODEC_PREFS_LENGTH</a></div><div class="ttdeci">#define AST_STREAM_MAX_CODEC_PREFS_LENGTH</div><div class="ttdoc">Define for allocating buffer space for to_str() functions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00307">stream.h:307</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="stream_8h_html_a45f84a7fad92fc9e7013a7bc8825f8e5a0fff4780f7aa3c25f6f1161961c5618a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a0fff4780f7aa3c25f6f1161961c5618a">CODEC_NEGOTIATION_KEEP_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00182">stream.h:182</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_a361eb12b4f33a22fcbd2d1d33eb4d965"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#a361eb12b4f33a22fcbd2d1d33eb4d965">ast_stream_codec_negotiation_prefs::operation</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_operation_values operation</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00296">stream.h:296</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="logger_8h_html_ac300475e729a060042d5fae346e6d966"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac300475e729a060042d5fae346e6d966">ast_trace</a></div><div class="ttdeci">#define ast_trace(level,...)</div><div class="ttdoc">Print a basic trace message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00692">logger.h:692</a></div></div>
<div class="ttc" id="stream_8h_html_aef2c14792611abd0869728c2e0396921a4d65c44e2c39297c0c297d0ed8889cdf"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a4d65c44e2c39297c0c297d0ed8889cdf">CODEC_NEGOTIATION_PREFER_PENDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00148">stream.h:148</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_ac4a2de04e8761e580204eb83436f590a"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#ac4a2de04e8761e580204eb83436f590a">ast_stream_codec_negotiation_prefs::prefer</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_prefer_values prefer</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00294">stream.h:294</a></div></div>
<div class="ttc" id="stream_8c_html_ade1fbca25af1ce63679d959f77868e12"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ade1fbca25af1ce63679d959f77868e12">ast_stream_codec_prefs_to_str</a></div><div class="ttdeci">const char * ast_stream_codec_prefs_to_str(const struct ast_stream_codec_negotiation_prefs *prefs, struct ast_str **buf)</div><div class="ttdoc">Return a string representing the codec preferences. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00132">stream.c:132</a></div></div>
<div class="ttc" id="format__cap_8h_html_ad938aaf8c3c616b854d44f8bfa3bab1d"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ad938aaf8c3c616b854d44f8bfa3bab1d">ast_format_cap_set_framing</a></div><div class="ttdeci">void ast_format_cap_set_framing(struct ast_format_cap *cap, unsigned int framing)</div><div class="ttdoc">Set the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00136">format_cap.c:136</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="stream_8h_html_a2f0040e1dc71ef11bcf2184318bf24e9a9f458e7ee0b6cc294125093fdd8c0fdd"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9a9f458e7ee0b6cc294125093fdd8c0fdd">CODEC_NEGOTIATION_OPERATION_ONLY_NONPREFERRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00168">stream.h:168</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="stream_8c_html_af793e90c3796564a01574fd9c5e9e208"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a></div><div class="ttdeci">const char * ast_stream_to_str(const struct ast_stream *stream, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the stream for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00337">stream.c:337</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__stream__codec__negotiation__prefs_html_aae179d28711a4e2b6e9d7ca2de6df98f"><div class="ttname"><a href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html#aae179d28711a4e2b6e9d7ca2de6df98f">ast_stream_codec_negotiation_prefs::keep</a></div><div class="ttdeci">enum ast_stream_codec_negotiation_prefs_keep_values keep</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00298">stream.h:298</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="stream_8c_html_a8dc44f43dab4a5484631812d9bbc3ae9"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a></div><div class="ttdeci">void ast_stream_set_formats(struct ast_stream *stream, struct ast_format_cap *caps)</div><div class="ttdoc">Set the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00365">stream.c:365</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="logger_8h_html_a6b8ff8a8d4420d96aa103bc4b01b965f"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6b8ff8a8d4420d96aa103bc4b01b965f">SCOPE_ENTER</a></div><div class="ttdeci">#define SCOPE_ENTER(level,...)</div><div class="ttdoc">Non RAII_VAR Scope Trace macros The advantage of these macros is that the EXITs will have the actual ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00780">logger.h:780</a></div></div>
<div class="ttc" id="logger_8h_html_a57001f3d33d960dec79dee782b6229a8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57001f3d33d960dec79dee782b6229a8">TRACE_ATLEAST</a></div><div class="ttdeci">#define TRACE_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00637">logger.h:637</a></div></div>
<div class="ttc" id="stream_8h_html_a2f0040e1dc71ef11bcf2184318bf24e9aad8c5fd9a0993eae54191dbb45212d12"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9aad8c5fd9a0993eae54191dbb45212d12">CODEC_NEGOTIATION_OPERATION_UNION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00164">stream.h:164</a></div></div>
<div class="ttc" id="logger_8h_html_a57e630b146704e4ca08289ff7b9c91f8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a57e630b146704e4ca08289ff7b9c91f8">SCOPE_EXIT_RTN_VALUE</a></div><div class="ttdeci">#define SCOPE_EXIT_RTN_VALUE(__return_value,...)</div><div class="ttdoc">Scope Exit with return value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00875">logger.h:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="stream_8c_html_a9dcdd3db33377db2e845ada4c281d1d6"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a></div><div class="ttdeci">struct ast_stream * ast_stream_clone(const struct ast_stream *stream, const char *name)</div><div class="ttdoc">Create a deep clone of an existing stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00257">stream.c:257</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="format__cap_8h_html_a09809d02373dbc26b136f52cc98f7513"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a></div><div class="ttdeci">int ast_format_cap_empty(const struct ast_format_cap *cap)</div><div class="ttdoc">Determine if a format cap has no formats in it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00746">format_cap.c:746</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="format__cap_8h_html_a43950f716385bc78a73de04acd6a7eb4"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a></div><div class="ttdeci">int ast_format_cap_get_compatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2, struct ast_format_cap *result)</div><div class="ttdoc">Find the compatible formats between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00630">format_cap.c:630</a></div></div>
<div class="ttc" id="stream_8h_html_a2f0040e1dc71ef11bcf2184318bf24e9a85b2f3505a06a643c14db40f9a132e9f"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9a85b2f3505a06a643c14db40f9a132e9f">CODEC_NEGOTIATION_OPERATION_ONLY_PREFERRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00166">stream.h:166</a></div></div>
<div class="ttc" id="stream_8h_html_a2f0040e1dc71ef11bcf2184318bf24e9ae917f0f03eb5037b6546008fbaac2631"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a2f0040e1dc71ef11bcf2184318bf24e9ae917f0f03eb5037b6546008fbaac2631">CODEC_NEGOTIATION_OPERATION_INTERSECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00162">stream.h:162</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="format__cap_8h_html_aac100518fea8ca0cae75b8909992b9dd"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a></div><div class="ttdeci">const char * ast_format_cap_append_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Append the names of codecs of a set of formats to an ast_str buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00741">format_cap.c:741</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd53513fe1965d4e5d4581d79ef8d24c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd53513fe1965d4e5d4581d79ef8d24c">&#9670;&nbsp;</a></span>ast_stream_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a media stream representation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">292</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00974">ast_rtp_codecs_payloads_destroy()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00105">ast_stream::metadata</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00115">ast_stream::rtp_codecs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00505">append_source_stream()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00825">ast_stream_topology_del_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00796">ast_stream_topology_set_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02613">build_topology()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00641">stream_topology_destroy()</a>, and <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00367">t38_create_media_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">if</span> (stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">rtp_codecs</a>) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">rtp_codecs</a>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(stream);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div><div class="ttc" id="structast__stream_html_a4c64f5b634d006a28ddfed356e138bdf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">ast_stream::rtp_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * rtp_codecs</div><div class="ttdoc">The rtp_codecs used by the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00115">stream.c:115</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0afb91e7a58d2fbac8e5febe0f94069b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_destroy(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Destroy the contents of an RTP codecs structure (but not the structure itself) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00974">rtp_engine.c:974</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__stream_html_a5a1d2088082da5d4a054aaf0322d91fb"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">ast_stream::metadata</a></div><div class="ttdeci">struct ast_variable * metadata</div><div class="ttdoc">Stream metadata vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00105">stream.c:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cc9bce25a44e3d9074337e2c882f445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc9bce25a44e3d9074337e2c882f445">&#9670;&nbsp;</a></span>ast_stream_get_format_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_get_format_count </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the count of the current negotiated formats of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The count of negotiated formats</dd></dl>
<dl class="section since"><dt>Since</dt><dd>18 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00358">358</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a> ? <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>) : 0;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div><div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae8e2f46d218285e0f0ec97ba8ab77ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8e2f46d218285e0f0ec97ba8ab77ffb">&#9670;&nbsp;</a></span>ast_stream_get_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a>* ast_stream_get_formats </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current negotiated formats of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The reference count is not increased</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00330">330</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d13/pjsip__session__caps_8c_source.html#l00130">ast_sip_session_create_joint_call_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">ast_stream_topology_equal()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02797">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00824">is_compatible_format()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01232">media_offer_read_av()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01318">media_offer_write_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02652">validate_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a783fc78f3bfbd8cf6f05102645e0500d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783fc78f3bfbd8cf6f05102645e0500d">&#9670;&nbsp;</a></span>ast_stream_get_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_get_group </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the stream group that a stream is part of. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the numerical stream group (-1 if not in a group)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.2.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l01077">1077</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00110">ast_stream::group</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">add_msid_to_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, and <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>.</p>
<div class="fragment"><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;{</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">group</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_a0242027ec3331f3d5793c42d21b6f4e1"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">ast_stream::group</a></div><div class="ttdeci">int group</div><div class="ttdoc">The group that the stream is part of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00110">stream.c:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a311bed754f00753d0fd141266ee0d282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311bed754f00753d0fd141266ee0d282">&#9670;&nbsp;</a></span>ast_stream_get_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_get_metadata </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>m_key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a stream metadata value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream </td></tr>
    <tr><td class="paramname">m_key</td><td>An arbitrary metadata key</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>metadata value </td></tr>
    <tr><td class="paramname">NULL</td><td>failure or not found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00423">423</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00696">ast_assert_return</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00105">ast_stream::metadata</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">add_msid_to_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00228">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a>(m_key != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">for</span> (v = stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a>; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">if</span> (strcmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, m_key) == 0) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;         <span class="keywordflow">return</span> v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="utils_8h_html_a72a60604069828e7b2a23d0974c65c7b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a></div><div class="ttdeci">#define ast_assert_return(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00696">utils.h:696</a></div></div>
<div class="ttc" id="structast__stream_html_a5a1d2088082da5d4a054aaf0322d91fb"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">ast_stream::metadata</a></div><div class="ttdeci">struct ast_variable * metadata</div><div class="ttdoc">Stream metadata vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00105">stream.c:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58448517075dc3723f701aade2684cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58448517075dc3723f701aade2684cb4">&#9670;&nbsp;</a></span>ast_stream_get_metadata_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a>* ast_stream_get_metadata_list </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all stream metadata keys. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">An</td><td><a class="el" href="../../dd/d02/structast__variable.html" title="Structure for variables, used for configurations and for channel variables. ">ast_variable</a> list of the metadata key/value pairs. </td></tr>
    <tr><td class="paramname">NULL</td><td>if error or no variables are set.</td></tr>
  </table>
  </dd>
</dl>
<p>When you're finished with the list, you must call ast_variables_destroy(list);</p>
<dl class="section since"><dt>Since</dt><dd>15.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00439">439</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00696">ast_assert_return</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">ast_variable_list_append</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00105">ast_stream::metadata</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00257">ast_stream_clone()</a>, and <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>.</p>
<div class="fragment"><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *vout = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">for</span> (v = stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a>; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *vt = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (!vt) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(vout);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;vout, vt);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keywordflow">return</span> vout;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="utils_8h_html_a72a60604069828e7b2a23d0974c65c7b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a></div><div class="ttdeci">#define ast_assert_return(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00696">utils.h:696</a></div></div>
<div class="ttc" id="structast__stream_html_a5a1d2088082da5d4a054aaf0322d91fb"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">ast_stream::metadata</a></div><div class="ttdeci">struct ast_variable * metadata</div><div class="ttdoc">Stream metadata vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00105">stream.c:105</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7af2e88e6e3812ec80facb1b41df43de"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a></div><div class="ttdeci">#define ast_variable_list_append(head, new_var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">include/asterisk/config.h:949</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcb45a1d2880128928cfb6d91b19ab46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcb45a1d2880128928cfb6d91b19ab46">&#9670;&nbsp;</a></span>ast_stream_get_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_get_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00309">309</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00490">ast_sip_session_media_state_add()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">ast_stream_topology_equal()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02797">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00468">is_video_dest()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00441">is_video_source()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02652">validate_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35dd19cc6a6f0310d45e181398095463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35dd19cc6a6f0310d45e181398095463">&#9670;&nbsp;</a></span>ast_stream_get_position()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_get_position </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the position of the stream in the topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The position of the stream (-1 on error)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00500">500</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00090">ast_stream::position</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00442">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00650">check_stream_positions()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00078">stream_echo_write_error()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l05177">tech_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_a1d7b72031fa39d396d531503904f337b"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">ast_stream::position</a></div><div class="ttdeci">unsigned int position</div><div class="ttdoc">The position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00090">stream.c:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5654bf1d006598647c4c1c2e5105dd91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5654bf1d006598647c4c1c2e5105dd91">&#9670;&nbsp;</a></span>ast_stream_get_rtp_codecs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a>* ast_stream_get_rtp_codecs </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get rtp_codecs associated with the stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The rtp_codecs</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00507">507</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00115">ast_stream::rtp_codecs</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">rtp_codecs</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div><div class="ttc" id="structast__stream_html_a4c64f5b634d006a28ddfed356e138bdf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">ast_stream::rtp_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * rtp_codecs</div><div class="ttdoc">The rtp_codecs used by the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00115">stream.c:115</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6fdfb5754dad81680c197d5c9df44971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fdfb5754dad81680c197d5c9df44971">&#9670;&nbsp;</a></span>ast_stream_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a> ast_stream_get_state </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current state of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The state of the stream (AST_STREAM_STATE_UNKNOWN on error)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00373">373</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00490">ast_sip_session_media_state_add()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00297">ast_sip_session_media_state_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">ast_stream_topology_equal()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02797">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01063">handle_negotiated_sdp()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00468">is_video_dest()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00441">is_video_source()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01232">media_offer_read_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05536">test_media_add()</a>, and <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00555">unreal_colp_stream_topology_request_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86319542b92fb0dc6b2ed337d83cf8ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86319542b92fb0dc6b2ed337d83cf8ce">&#9670;&nbsp;</a></span>ast_stream_get_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> ast_stream_get_type </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the media type of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The media type of the stream (AST_MEDIA_TYPE_UNKNOWN on error)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00316">316</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">add_msid_to_stream()</a>, <a class="el" href="../../dc/d13/pjsip__session__caps_8c_source.html#l00130">ast_sip_session_create_joint_call_stream()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00297">ast_sip_session_media_state_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">ast_stream_topology_equal()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00985">ast_stream_topology_map()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00650">check_stream_positions()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00468">is_video_dest()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00441">is_video_source()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01232">media_offer_read_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00099">stream_echo_write()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00078">stream_echo_write_error()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02652">validate_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">return</span> stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8dc44f43dab4a5484631812d9bbc3ae9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dc44f43dab4a5484631812d9bbc3ae9">&#9670;&nbsp;</a></span>ast_stream_set_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_set_formats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>caps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current negotiated formats of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream </td></tr>
    <tr><td class="paramname">caps</td><td>The current negotiated formats</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The new format capabilities structure has its refcount bumped and any existing format capabilities structure has its refcount decremented.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00365">365</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00407">apply_cap_to_bundled()</a>, <a class="el" href="../../dc/d13/pjsip__session__caps_8c_source.html#l00130">ast_sip_session_create_joint_call_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00525">ast_stream_create_resolved()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00145">AST_TEST_DEFINE()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02613">build_topology()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01318">media_offer_write_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, and <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00367">t38_create_media_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(caps);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div><div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4d76202e9622c9812699ae76e3f9a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d76202e9622c9812699ae76e3f9a24">&#9670;&nbsp;</a></span>ast_stream_set_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_set_group </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the stream group for a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream </td></tr>
    <tr><td class="paramname">group</td><td>The group the stream is part of</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.2.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l01084">1084</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00110">ast_stream::group</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00684">set_remote_mslabel_and_stream_group()</a>.</p>
<div class="fragment"><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;{</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">group</a> = <a class="code" href="../../d3/d08/structgroup.html">group</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_a0242027ec3331f3d5793c42d21b6f4e1"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a0242027ec3331f3d5793c42d21b6f4e1">ast_stream::group</a></div><div class="ttdeci">int group</div><div class="ttdoc">The group that the stream is part of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00110">stream.c:110</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3190a21208ef7b4137f3355cb13a61f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3190a21208ef7b4137f3355cb13a61f0">&#9670;&nbsp;</a></span>ast_stream_set_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_set_metadata </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>m_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a stream metadata value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream </td></tr>
    <tr><td class="paramname">m_key</td><td>An arbitrary metadata key </td></tr>
    <tr><td class="paramname">value</td><td>String metadata value or NULL to remove existing value</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure </td></tr>
    <tr><td class="paramname">0</td><td>success</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00460">460</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00696">ast_assert_return</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">ast_variable_list_append</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00105">ast_stream::metadata</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01272">add_msid_to_stream()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00505">append_source_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00228">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01318">media_offer_write_av()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *prev;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -1);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a>(m_key != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -1);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   v = stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordflow">while</span>(v) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">if</span> (strcmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, m_key) == 0) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;         <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            prev-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = <a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a> = <a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(v);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;         prev = v;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      v = <a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(m_key, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordflow">if</span> (!v) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">metadata</a>, v);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="utils_8h_html_a72a60604069828e7b2a23d0974c65c7b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a72a60604069828e7b2a23d0974c65c7b">ast_assert_return</a></div><div class="ttdeci">#define ast_assert_return(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00696">utils.h:696</a></div></div>
<div class="ttc" id="structast__stream_html_a5a1d2088082da5d4a054aaf0322d91fb"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a5a1d2088082da5d4a054aaf0322d91fb">ast_stream::metadata</a></div><div class="ttdeci">struct ast_variable * metadata</div><div class="ttdoc">Stream metadata vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00105">stream.c:105</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7af2e88e6e3812ec80facb1b41df43de"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a></div><div class="ttdeci">#define ast_variable_list_append(head, new_var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">include/asterisk/config.h:949</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07092758fc077c3b8f8c280957b3d486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07092758fc077c3b8f8c280957b3d486">&#9670;&nbsp;</a></span>ast_stream_set_rtp_codecs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_set_rtp_codecs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d0e/structast__rtp__codecs.html">ast_rtp_codecs</a> *&#160;</td>
          <td class="paramname"><em>rtp_codecs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set rtp_codecs associated with the stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream </td></tr>
    <tr><td class="paramname">rtp_codecs</td><td>The rtp_codecs</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00514">514</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00974">ast_rtp_codecs_payloads_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00115">ast_stream::rtp_codecs</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">if</span> (stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">rtp_codecs</a>) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <a class="code" href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a>(rtp_codecs);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">rtp_codecs</a> = rtp_codecs;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div><div class="ttc" id="structast__stream_html_a4c64f5b634d006a28ddfed356e138bdf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a4c64f5b634d006a28ddfed356e138bdf">ast_stream::rtp_codecs</a></div><div class="ttdeci">struct ast_rtp_codecs * rtp_codecs</div><div class="ttdoc">The rtp_codecs used by the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00115">stream.c:115</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="rtp__engine_8h_html_a0afb91e7a58d2fbac8e5febe0f94069b"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a0afb91e7a58d2fbac8e5febe0f94069b">ast_rtp_codecs_payloads_destroy</a></div><div class="ttdeci">void ast_rtp_codecs_payloads_destroy(struct ast_rtp_codecs *codecs)</div><div class="ttdoc">Destroy the contents of an RTP codecs structure (but not the structure itself) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbe/rtp__engine_8c_source.html#l00974">rtp_engine.c:974</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4459bba3b00250f5c5b2b4ae265909ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4459bba3b00250f5c5b2b4ae265909ee">&#9670;&nbsp;</a></span>ast_stream_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_set_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the state of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream </td></tr>
    <tr><td class="paramname">state</td><td>The new state that the stream is in</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Used by stream creator to update internal state</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00380">380</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00505">append_source_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00191">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01063">handle_negotiated_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00964">handle_negotiated_sdp_session_media()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00776">remove_destination_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00754">remove_stream_from_bundle()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00367">t38_create_media_state()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05523">test_stream_alloc()</a>, and <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00555">unreal_colp_stream_topology_request_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95f1abaafdf85418fea16366a1b5208f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f1abaafdf85418fea16366a1b5208f">&#9670;&nbsp;</a></span>ast_stream_set_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_set_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the media type of a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The media stream </td></tr>
    <tr><td class="paramname">type</td><td>The new media type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00323">323</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00108">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(stream != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae96305003700b238d098ad2296a24416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae96305003700b238d098ad2296a24416">&#9670;&nbsp;</a></span>ast_stream_state2str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_state2str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the state of a stream into a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The stream state</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The state of the stream in string format</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00388">388</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d95/stream_8h_source.html#l00094">AST_STREAM_STATE_INACTIVE</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00090">AST_STREAM_STATE_RECVONLY</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00086">AST_STREAM_STATE_SENDONLY</a>, and <a class="el" href="../../d8/d95/stream_8h_source.html#l00082">AST_STREAM_STATE_SENDRECV</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/d88/structstate.html">state</a>) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>:</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;removed&quot;</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80">AST_STREAM_STATE_SENDRECV</a>:</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sendrecv&quot;</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443">AST_STREAM_STATE_SENDONLY</a>:</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sendonly&quot;</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24">AST_STREAM_STATE_RECVONLY</a>:</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;recvonly&quot;</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a>:</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;inactive&quot;</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a></div><div class="ttdoc">Set when the stream is not sending OR receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00094">stream.h:94</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80">AST_STREAM_STATE_SENDRECV</a></div><div class="ttdoc">Set when the stream is sending and receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00082">stream.h:82</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443">AST_STREAM_STATE_SENDONLY</a></div><div class="ttdoc">Set when the stream is sending media only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00086">stream.h:86</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24">AST_STREAM_STATE_RECVONLY</a></div><div class="ttdoc">Set when the stream is receiving media only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00090">stream.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d560ac6a71551ea5ce111edd6727b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d560ac6a71551ea5ce111edd6727b87">&#9670;&nbsp;</a></span>ast_stream_str2state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288">ast_stream_state</a> ast_stream_str2state </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a string to a stream state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>The string to convert</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The stream state</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00406">406</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d95/stream_8h_source.html#l00094">AST_STREAM_STATE_INACTIVE</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00090">AST_STREAM_STATE_RECVONLY</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00086">AST_STREAM_STATE_SENDONLY</a>, and <a class="el" href="../../d8/d95/stream_8h_source.html#l00082">AST_STREAM_STATE_SENDRECV</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<span class="stringliteral">&quot;sendrecv&quot;</span>, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80">AST_STREAM_STATE_SENDRECV</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<span class="stringliteral">&quot;sendonly&quot;</span>, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443">AST_STREAM_STATE_SENDONLY</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<span class="stringliteral">&quot;recvonly&quot;</span>, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24">AST_STREAM_STATE_RECVONLY</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<span class="stringliteral">&quot;inactive&quot;</span>, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ab9ff868b434da3a67f28c50766cb3c93">AST_STREAM_STATE_INACTIVE</a></div><div class="ttdoc">Set when the stream is not sending OR receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00094">stream.h:94</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80">AST_STREAM_STATE_SENDRECV</a></div><div class="ttdoc">Set when the stream is sending and receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00082">stream.h:82</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288afaf3d3b8e7792a1332821dbbebf2d443">AST_STREAM_STATE_SENDONLY</a></div><div class="ttdoc">Set when the stream is sending media only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00086">stream.h:86</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288a5c7755c7947aed47c123f459311deb24">AST_STREAM_STATE_RECVONLY</a></div><div class="ttdoc">Set when the stream is receiving media only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00090">stream.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af793e90c3796564a01574fd9c5e9e208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af793e90c3796564a01574fd9c5e9e208">&#9670;&nbsp;</a></span>ast_stream_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_to_str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a string representing the stream for debugging/display purposes. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>A stream </td></tr>
    <tr><td class="paramname">buf</td><td>A pointer to an ast_str* used for the output.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">""</td><td>(empty string) if either buf or *buf are NULL </td></tr>
    <tr><td class="paramname">(null stream)</td><td>if *stream was NULL </td></tr>
    <tr><td class="paramname">&lt;stream_representation&gt;</td><td>otherwise</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>No attempt should ever be made to free the returned char * and it should be dup'd if needed after the <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> is freed.</dd></dl>
<p>Return format: &lt;name&gt;:&lt;media_type&gt;:&lt;stream_state&gt; (formats)</p>
<p>Sample return: "audio:audio:sendrecv (ulaw,g722)" </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00337">337</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00741">ast_format_cap_append_names()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00223">ast_stream_state_map</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00090">ast_stream::position</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04957">add_sdp_streams()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00525">ast_stream_create_resolved()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">ast_stream_topology_to_str()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="keywordflow">if</span> (!buf || !*buf) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;(null stream)&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;%d:%s:%s:%s &quot;</span>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <span class="stringliteral">&quot;noname&quot;</span>),</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>),</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#aca7fc670baa89f55e1e218f0ea4c0eac">ast_stream_state_map</a>[stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a>]);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>, buf);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="stream_8c_html_aca7fc670baa89f55e1e218f0ea4c0eac"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#aca7fc670baa89f55e1e218f0ea4c0eac">ast_stream_state_map</a></div><div class="ttdeci">const char * ast_stream_state_map[]</div><div class="ttdoc">Stream state enum to string map. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00223">stream.c:223</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__stream_html_a1d7b72031fa39d396d531503904f337b"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">ast_stream::position</a></div><div class="ttdeci">unsigned int position</div><div class="ttdoc">The position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00090">stream.c:90</a></div></div>
<div class="ttc" id="format__cap_8h_html_aac100518fea8ca0cae75b8909992b9dd"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aac100518fea8ca0cae75b8909992b9dd">ast_format_cap_append_names</a></div><div class="ttdeci">const char * ast_format_cap_append_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Append the names of codecs of a set of formats to an ast_str buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00741">format_cap.c:741</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad225f95d1de536ba61f43150cfe3bd06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad225f95d1de536ba61f43150cfe3bd06">&#9670;&nbsp;</a></span>ast_stream_topology_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a>* ast_stream_topology_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a stream topology. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This returns an ao2 refcounted object </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00650">650</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00641">stream_topology_destroy()</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00649">TOPOLOGY_INITIAL_STREAM_COUNT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l00739">__ast_channel_alloc_ap()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01591">ast_channel_set_stream_topology()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00292">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00622">ast_unreal_indicate()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02613">build_topology()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01650">make_channel()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00621">sfu_topologies_on_join()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01124">sfu_topologies_on_source_change()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, and <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00367">t38_create_media_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   topology = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*topology), <a class="code" href="../../d8/d4d/stream_8c.html#a37a2b435e5057a153b0a13cc309b0056">stream_topology_destroy</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">if</span> (!topology) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;topology-&gt;streams, <a class="code" href="../../d8/d4d/stream_8c.html#abf62f1ea27a9646d140e77fca738fc9a">TOPOLOGY_INITIAL_STREAM_COUNT</a>)) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(topology, -1);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      topology = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keywordflow">return</span> topology;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="stream_8c_html_a37a2b435e5057a153b0a13cc309b0056"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a37a2b435e5057a153b0a13cc309b0056">stream_topology_destroy</a></div><div class="ttdeci">static void stream_topology_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00641">stream.c:641</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stream_8c_html_abf62f1ea27a9646d140e77fca738fc9a"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#abf62f1ea27a9646d140e77fca738fc9a">TOPOLOGY_INITIAL_STREAM_COUNT</a></div><div class="ttdeci">#define TOPOLOGY_INITIAL_STREAM_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00649">stream.c:649</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a452835913f7150a5045dd75ee822b491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452835913f7150a5045dd75ee822b491">&#9670;&nbsp;</a></span>ast_stream_topology_append_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_topology_append_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append a stream to the topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams </td></tr>
    <tr><td class="paramname">stream</td><td>The stream to append</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the position of the stream in the topology (-1 on error)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the stream's name is empty, it'll be set to &lt;stream_type&gt;-&lt;position&gt; </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00748">748</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00231">MIN_STREAM_NAME_LEN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00090">ast_stream::position</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00505">append_source_stream()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00317">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00622">ast_unreal_indicate()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02613">build_topology()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01650">make_channel()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05536">test_media_add()</a>.</p>
<div class="fragment"><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology &amp;&amp; stream);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;topology-&gt;streams, stream)) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams) - 1;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>)) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      snprintf(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a>, <span class="stringliteral">&quot;%s-%d&quot;</span>, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>), stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams) - 1;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="stream_8c_html_ac18ead73a13a3d361b125535b9855723"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a></div><div class="ttdeci">#define MIN_STREAM_NAME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00231">stream.c:231</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="structast__stream_html_a1d7b72031fa39d396d531503904f337b"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">ast_stream::position</a></div><div class="ttdeci">unsigned int position</div><div class="ttdoc">The position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00090">stream.c:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00b605b453fe5ff538e361126d600303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b605b453fe5ff538e361126d600303">&#9670;&nbsp;</a></span>ast_stream_topology_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a>* ast_stream_topology_clone </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a deep clone of an existing stream topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The existing topology of streams</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This returns an ao2 refcounted object </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">667</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00257">ast_stream_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">ast_stream_free()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01077">ast_stream_get_group()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l01084">ast_stream_set_group()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00650">ast_stream_topology_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00743">ast_stream_topology_free()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00297">ast_sip_session_media_state_clone()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00317">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01128">ast_unreal_alloc_stream_topology()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01162">ast_unreal_new_channels()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l00930">do_forward()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01063">handle_negotiated_sdp()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01232">media_offer_read_av()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01318">media_offer_write_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01078">session_refresh_state_get_or_alloc()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00621">sfu_topologies_on_join()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01124">sfu_topologies_on_source_change()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01524">topology_change_refresh_data_alloc()</a>, and <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00555">unreal_colp_stream_topology_request_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *new_topology;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   new_topology = <a class="code" href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a>();</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">if</span> (!new_topology) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams); i++) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *existing = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, i);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream = <a class="code" href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a>(existing, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">if</span> (!stream || <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;new_topology-&gt;streams, stream)) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a>(stream);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(new_topology);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#ad4d76202e9622c9812699ae76e3f9a24">ast_stream_set_group</a>(stream, <a class="code" href="../../d8/d4d/stream_8c.html#a783fc78f3bfbd8cf6f05102645e0500d">ast_stream_get_group</a>(existing));</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">return</span> new_topology;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div><div class="ttc" id="stream_8c_html_ad225f95d1de536ba61f43150cfe3bd06"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_alloc(void)</div><div class="ttdoc">Create a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00650">stream.c:650</a></div></div>
<div class="ttc" id="stream_8c_html_a88eca139ded2d5bbc6cdcf793febc265"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a></div><div class="ttdeci">void ast_stream_topology_free(struct ast_stream_topology *topology)</div><div class="ttdoc">Unreference and destroy a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00743">stream.c:743</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stream_8c_html_acd53513fe1965d4e5d4581d79ef8d24c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a></div><div class="ttdeci">void ast_stream_free(struct ast_stream *stream)</div><div class="ttdoc">Destroy a media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00292">stream.c:292</a></div></div>
<div class="ttc" id="stream_8c_html_ad4d76202e9622c9812699ae76e3f9a24"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ad4d76202e9622c9812699ae76e3f9a24">ast_stream_set_group</a></div><div class="ttdeci">void ast_stream_set_group(struct ast_stream *stream, int group)</div><div class="ttdoc">Set the stream group for a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l01084">stream.c:1084</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="stream_8c_html_a9dcdd3db33377db2e845ada4c281d1d6"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a></div><div class="ttdeci">struct ast_stream * ast_stream_clone(const struct ast_stream *stream, const char *name)</div><div class="ttdoc">Create a deep clone of an existing stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00257">stream.c:257</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="stream_8c_html_a783fc78f3bfbd8cf6f05102645e0500d"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a783fc78f3bfbd8cf6f05102645e0500d">ast_stream_get_group</a></div><div class="ttdeci">int ast_stream_get_group(const struct ast_stream *stream)</div><div class="ttdoc">Get the stream group that a stream is part of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l01077">stream.c:1077</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab57b837e53f8ea2335ec9dc00cdc0c0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab57b837e53f8ea2335ec9dc00cdc0c0c">&#9670;&nbsp;</a></span>ast_stream_topology_create_from_format_cap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a>* ast_stream_topology_create_from_format_cap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A helper function that, given a format capabilities structure, creates a topology and separates the media types in format_cap into separate streams. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">caps</td><td>The format capabilities structure (NULL creates an empty topology)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The format capabilities reference is NOT altered by this function since a new format capabilities structure is created for each media type.</dd>
<dd>
Each stream will have its name set to the corresponding media type. For example: "audio".</dd>
<dd>
Each stream will be set to the sendrecv state.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">848</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00438">ast_format_cap_get_framing()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00615">ast_format_cap_has_type()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00136">ast_format_cap_set_framing()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00036">AST_MEDIA_TYPE_END</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00233">ast_stream_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">ast_stream_free()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00365">ast_stream_set_formats()</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00082">AST_STREAM_STATE_SENDRECV</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00650">ast_stream_topology_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00748">ast_stream_topology_append_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00743">ast_stream_topology_free()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00231">MIN_STREAM_NAME_LEN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00090">ast_stream::position</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00790">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01111">ast_unreal_alloc()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02694">chan_pjsip_request()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00922">local_request()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06309">request_channel()</a>, and <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01443">sip_endpoint_apply_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;{</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   topology = <a class="code" href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a>();</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keywordflow">if</span> (!topology || !cap || !<a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(cap)) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">return</span> topology;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">for</span> (type = <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a> + 1; type &lt; <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c">AST_MEDIA_TYPE_END</a>; type++) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *new_cap;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(cap, type)) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      new_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">if</span> (!new_cap) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#ad938aaf8c3c616b854d44f8bfa3bab1d">ast_format_cap_set_framing</a>(new_cap, <a class="code" href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a>(cap));</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(new_cap, cap, type)) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(new_cap);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      stream = <a class="code" href="../../d8/d4d/stream_8c.html#afd6abeccf161767b676a3cb54715df2c">ast_stream_alloc</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, type);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(new_cap);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a>(stream, new_cap);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(new_cap, -1);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a> = <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80">AST_STREAM_STATE_SENDRECV</a>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4d/stream_8c.html#a452835913f7150a5045dd75ee822b491">ast_stream_topology_append_stream</a>(topology, stream) == -1) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a>(stream);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      snprintf(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a>, <span class="stringliteral">&quot;%s-%d&quot;</span>, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>), stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <span class="keywordflow">return</span> topology;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div><div class="ttc" id="stream_8c_html_ad225f95d1de536ba61f43150cfe3bd06"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_alloc(void)</div><div class="ttdoc">Create a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00650">stream.c:650</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="format__cap_8h_html_a3aaa13500c7e4dd3dad8e4c6afccbed3"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a3aaa13500c7e4dd3dad8e4c6afccbed3">ast_format_cap_get_framing</a></div><div class="ttdeci">unsigned int ast_format_cap_get_framing(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00438">format_cap.c:438</a></div></div>
<div class="ttc" id="stream_8c_html_a88eca139ded2d5bbc6cdcf793febc265"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a></div><div class="ttdeci">void ast_stream_topology_free(struct ast_stream_topology *topology)</div><div class="ttdoc">Unreference and destroy a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00743">stream.c:743</a></div></div>
<div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="stream_8c_html_ac18ead73a13a3d361b125535b9855723"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a></div><div class="ttdeci">#define MIN_STREAM_NAME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00231">stream.c:231</a></div></div>
<div class="ttc" id="format__cap_8h_html_ad938aaf8c3c616b854d44f8bfa3bab1d"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ad938aaf8c3c616b854d44f8bfa3bab1d">ast_format_cap_set_framing</a></div><div class="ttdeci">void ast_format_cap_set_framing(struct ast_format_cap *cap, unsigned int framing)</div><div class="ttdoc">Set the global framing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00136">format_cap.c:136</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
<div class="ttc" id="stream_8c_html_acd53513fe1965d4e5d4581d79ef8d24c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a></div><div class="ttdeci">void ast_stream_free(struct ast_stream *stream)</div><div class="ttdoc">Destroy a media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00292">stream.c:292</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
<div class="ttc" id="stream_8c_html_afd6abeccf161767b676a3cb54715df2c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#afd6abeccf161767b676a3cb54715df2c">ast_stream_alloc</a></div><div class="ttdeci">struct ast_stream * ast_stream_alloc(const char *name, enum ast_media_type type)</div><div class="ttdoc">Create a new media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00233">stream.c:233</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="stream_8c_html_a452835913f7150a5045dd75ee822b491"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a452835913f7150a5045dd75ee822b491">ast_stream_topology_append_stream</a></div><div class="ttdeci">int ast_stream_topology_append_stream(struct ast_stream_topology *topology, struct ast_stream *stream)</div><div class="ttdoc">Append a stream to the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00748">stream.c:748</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="stream_8c_html_a8dc44f43dab4a5484631812d9bbc3ae9"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a></div><div class="ttdeci">void ast_stream_set_formats(struct ast_stream *stream, struct ast_format_cap *caps)</div><div class="ttdoc">Set the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00365">stream.c:365</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288ae82f7244a7d4557091b08952d6a9cb80">AST_STREAM_STATE_SENDRECV</a></div><div class="ttdoc">Set when the stream is sending and receiving media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00082">stream.h:82</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c">AST_MEDIA_TYPE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00036">codec.h:36</a></div></div>
<div class="ttc" id="structast__stream_html_a1d7b72031fa39d396d531503904f337b"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">ast_stream::position</a></div><div class="ttdeci">unsigned int position</div><div class="ttdoc">The position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00090">stream.c:90</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9b2d6490b222d436f5f6a8296d36c13f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a></div><div class="ttdeci">int ast_format_cap_has_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Find out if the capabilities structure has any formats of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00615">format_cap.c:615</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac38f129886d756e4f982d749b6278909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac38f129886d756e4f982d749b6278909">&#9670;&nbsp;</a></span>ast_stream_topology_create_resolved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a>* ast_stream_topology_create_resolved </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>pending_topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>validation_topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> *&#160;</td>
          <td class="paramname"><em>prefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>error_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a resolved stream topology from 2 topologies. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pending_topology</td><td>The "live" topology created from an SDP, passed through the core, or used to create an SDP. </td></tr>
    <tr><td class="paramname">configured_topology</td><td>The static topology used to validate the pending topology. It MUST have only 1 stream per media type. </td></tr>
    <tr><td class="paramname">prefs</td><td>A pointer to an <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> structure. </td></tr>
    <tr><td class="paramname">error_message</td><td>If supplied, error messages will be appended.</td></tr>
  </table>
  </dd>
</dl>
<p>The streams in the resolved topology will contain all of the attributes of the corresponding stream from the pending topology. It's format_caps however will contain only the formats that passed the validation specified by the <a class="el" href="../../d7/dfe/structast__stream__codec__negotiation__prefs.html">ast_stream_codec_negotiation_prefs</a> structure. This may mean that some of the streams format_caps will be empty. If that's the case, the stream will be in a REMOVED state. With those rules in mind, a resolved topology will always be returned (unless there's some catastrophic allocation failure) and the resolved topology is guaranteed to have the same number of streams, in the same order, as the pending topology.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if there was some allocation failure. </td></tr>
    <tr><td class="paramname">The</td><td>joint topology. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">1030</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00257">ast_stream_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00525">ast_stream_create_resolved()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">ast_stream_free()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00358">ast_stream_get_format_count()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00380">ast_stream_set_state()</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00650">ast_stream_topology_alloc()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00748">ast_stream_topology_append_stream()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00964">ast_stream_topology_get_first_stream_by_type()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>
<div class="fragment"><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *joint_topology = <a class="code" href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a>();</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordflow">if</span> (!pending_topology || !configured_topology || !joint_topology) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_topology);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;pending_topology-&gt;streams); i++) {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *pending_stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;pending_topology-&gt;streams, i);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *configured_stream =</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a1b577a1e826e57092e8dba77a89031f5">ast_stream_topology_get_first_stream_by_type</a>(configured_topology, pending_stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *joint_stream;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (!configured_stream) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         joint_stream = <a class="code" href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a>(pending_stream, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;         <span class="keywordflow">if</span> (!joint_stream) {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_topology);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;         }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#a4459bba3b00250f5c5b2b4ae265909ee">ast_stream_set_state</a>(joint_stream, <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;         joint_stream = <a class="code" href="../../d8/d4d/stream_8c.html#afebce6545627c349aa4877efa83f64f0">ast_stream_create_resolved</a>(pending_stream, configured_stream, prefs, error_message);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;         <span class="keywordflow">if</span> (!joint_stream) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_topology);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4d/stream_8c.html#a6cc9bce25a44e3d9074337e2c882f445">ast_stream_get_format_count</a>(joint_stream) == 0) {</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <a class="code" href="../../d8/d4d/stream_8c.html#a4459bba3b00250f5c5b2b4ae265909ee">ast_stream_set_state</a>(joint_stream, <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;         }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      res = <a class="code" href="../../d8/d4d/stream_8c.html#a452835913f7150a5045dd75ee822b491">ast_stream_topology_append_stream</a>(joint_topology, joint_stream);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         <a class="code" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a>(joint_stream);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(joint_topology);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="keywordflow">return</span> joint_topology;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;}</div><div class="ttc" id="stream_8c_html_ad225f95d1de536ba61f43150cfe3bd06"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_alloc(void)</div><div class="ttdoc">Create a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00650">stream.c:650</a></div></div>
<div class="ttc" id="stream_8c_html_afebce6545627c349aa4877efa83f64f0"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#afebce6545627c349aa4877efa83f64f0">ast_stream_create_resolved</a></div><div class="ttdeci">struct ast_stream * ast_stream_create_resolved(struct ast_stream *pending_stream, struct ast_stream *validation_stream, struct ast_stream_codec_negotiation_prefs *prefs, struct ast_str **error_message)</div><div class="ttdoc">Create a resolved stream from 2 streams. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00525">stream.c:525</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="stream_8c_html_a6cc9bce25a44e3d9074337e2c882f445"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a6cc9bce25a44e3d9074337e2c882f445">ast_stream_get_format_count</a></div><div class="ttdeci">int ast_stream_get_format_count(const struct ast_stream *stream)</div><div class="ttdoc">Get the count of the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00358">stream.c:358</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stream_8c_html_acd53513fe1965d4e5d4581d79ef8d24c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a></div><div class="ttdeci">void ast_stream_free(struct ast_stream *stream)</div><div class="ttdoc">Destroy a media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00292">stream.c:292</a></div></div>
<div class="ttc" id="stream_8c_html_a1b577a1e826e57092e8dba77a89031f5"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a1b577a1e826e57092e8dba77a89031f5">ast_stream_topology_get_first_stream_by_type</a></div><div class="ttdeci">struct ast_stream * ast_stream_topology_get_first_stream_by_type(const struct ast_stream_topology *topology, enum ast_media_type type)</div><div class="ttdoc">Gets the first active stream of a specific type from the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00964">stream.c:964</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="stream_8c_html_a452835913f7150a5045dd75ee822b491"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a452835913f7150a5045dd75ee822b491">ast_stream_topology_append_stream</a></div><div class="ttdeci">int ast_stream_topology_append_stream(struct ast_stream_topology *topology, struct ast_stream *stream)</div><div class="ttdoc">Append a stream to the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00748">stream.c:748</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="stream_8c_html_a9dcdd3db33377db2e845ada4c281d1d6"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a9dcdd3db33377db2e845ada4c281d1d6">ast_stream_clone</a></div><div class="ttdeci">struct ast_stream * ast_stream_clone(const struct ast_stream *stream, const char *name)</div><div class="ttdoc">Create a deep clone of an existing stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00257">stream.c:257</a></div></div>
<div class="ttc" id="stream_8c_html_a4459bba3b00250f5c5b2b4ae265909ee"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a4459bba3b00250f5c5b2b4ae265909ee">ast_stream_set_state</a></div><div class="ttdeci">void ast_stream_set_state(struct ast_stream *stream, enum ast_stream_state state)</div><div class="ttdoc">Set the state of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00380">stream.c:380</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71a656802bd6b8e87846b42a5fb35a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71a656802bd6b8e87846b42a5fb35a79">&#9670;&nbsp;</a></span>ast_stream_topology_del_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_topology_del_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a specified stream from the given topology. </p>
<dl class="section since"><dt>Since</dt><dd>15.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams. </td></tr>
    <tr><td class="paramname">position</td><td>The topology position to delete.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Deleting a stream will completely remove it from the topology as if it never existed in it. i.e., Any following stream positions will shift down so there is no gap.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00825">825</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">ast_stream_free()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00448">AST_VECTOR_REMOVE_ORDERED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00090">ast_stream::position</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00670">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams) &lt;= <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   stream = <a class="code" href="../../d6/d68/vector_8h.html#a0414ce2ed1741b1e048ccafc0df420c3">AST_VECTOR_REMOVE_ORDERED</a>(&amp;topology-&gt;streams, <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <a class="code" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a>(stream);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="comment">/* Fix up higher stream position indices */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">for</span> (; <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams); ++<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> = <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stream_8c_html_acd53513fe1965d4e5d4581d79ef8d24c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a></div><div class="ttdeci">void ast_stream_free(struct ast_stream *stream)</div><div class="ttdoc">Destroy a media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00292">stream.c:292</a></div></div>
<div class="ttc" id="vector_8h_html_a0414ce2ed1741b1e048ccafc0df420c3"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0414ce2ed1741b1e048ccafc0df420c3">AST_VECTOR_REMOVE_ORDERED</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE_ORDERED(vec, idx)</div><div class="ttdoc">Remove an element from a vector by index while maintaining order. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00448">vector.h:448</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="structast__stream_html_a1d7b72031fa39d396d531503904f337b"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">ast_stream::position</a></div><div class="ttdeci">unsigned int position</div><div class="ttdoc">The position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00090">stream.c:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0d846e650b6d3e654c01d61a991c82c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d846e650b6d3e654c01d61a991c82c">&#9670;&nbsp;</a></span>ast_stream_topology_equal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_topology_equal </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare two stream topologies to see if they are equal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">left</td><td>The left topology </td></tr>
    <tr><td class="paramname">right</td><td>The right topology</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>topologies are equivalent </td></tr>
    <tr><td class="paramname">0</td><td>topologies differ</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">696</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00689">ast_format_cap_identical()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00330">ast_stream_get_formats()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00309">ast_stream_get_name()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00373">ast_stream_get_state()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00316">ast_stream_get_type()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00765">ast_stream_topology_get_count()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00788">ast_stream_topology_get_stream()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l11167">ast_channel_request_stream_topology_change()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01063">handle_negotiated_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04269">reschedule_reinvite()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05596">test_is_media_state_equal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;{</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(left != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(right != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(left) != <a class="code" href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(right)) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(left); ++index) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *left_stream = <a class="code" href="../../d8/d4d/stream_8c.html#a1f727f403d8899cdb55488a49c9b7841">ast_stream_topology_get_stream</a>(left, index);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *right_stream = <a class="code" href="../../d8/d4d/stream_8c.html#a1f727f403d8899cdb55488a49c9b7841">ast_stream_topology_get_stream</a>(right, index);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4d/stream_8c.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(left_stream) != <a class="code" href="../../d8/d4d/stream_8c.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(right_stream)) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4d/stream_8c.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(left_stream) != <a class="code" href="../../d8/d4d/stream_8c.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(right_stream)) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(left_stream) &amp;&amp; <a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(right_stream) &amp;&amp;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(<a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(right_stream))) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <span class="comment">/* A NULL format capabilities and an empty format capabilities are the same, as they have</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">          * no formats inside. If one does though... they are not equal.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(right_stream) &amp;&amp; <a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(left_stream) &amp;&amp;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(<a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(left_stream))) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(left_stream) &amp;&amp; <a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(right_stream) &amp;&amp;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;         !<a class="code" href="../../d0/d3c/format__cap_8h.html#a99125057461b0c99fb93f2ab5e4e99f2">ast_format_cap_identical</a>(<a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(left_stream), <a class="code" href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(right_stream))) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;         <span class="comment">/* But if both are actually present we need to do an actual identical check. */</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d8/d4d/stream_8c.html#afcb45a1d2880128928cfb6d91b19ab46">ast_stream_get_name</a>(left_stream), <a class="code" href="../../d8/d4d/stream_8c.html#afcb45a1d2880128928cfb6d91b19ab46">ast_stream_get_name</a>(right_stream))) {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stream_8c_html_ae8e2f46d218285e0f0ec97ba8ab77ffb"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a></div><div class="ttdeci">const struct ast_format_cap * ast_stream_get_formats(const struct ast_stream *stream)</div><div class="ttdoc">Get the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00330">stream.c:330</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stream_8c_html_a6fdfb5754dad81680c197d5c9df44971"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a></div><div class="ttdeci">enum ast_stream_state ast_stream_get_state(const struct ast_stream *stream)</div><div class="ttdoc">Get the current state of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00373">stream.c:373</a></div></div>
<div class="ttc" id="stream_8c_html_a5eb43440630db819220df97b01f48922"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a></div><div class="ttdeci">int ast_stream_topology_get_count(const struct ast_stream_topology *topology)</div><div class="ttdoc">Get the number of streams in a topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00765">stream.c:765</a></div></div>
<div class="ttc" id="format__cap_8h_html_a99125057461b0c99fb93f2ab5e4e99f2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a99125057461b0c99fb93f2ab5e4e99f2">ast_format_cap_identical</a></div><div class="ttdeci">int ast_format_cap_identical(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2)</div><div class="ttdoc">Determine if two capabilities structures are identical. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00689">format_cap.c:689</a></div></div>
<div class="ttc" id="stream_8c_html_a86319542b92fb0dc6b2ed337d83cf8ce"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a></div><div class="ttdeci">enum ast_media_type ast_stream_get_type(const struct ast_stream *stream)</div><div class="ttdoc">Get the media type of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00316">stream.c:316</a></div></div>
<div class="ttc" id="stream_8c_html_a1f727f403d8899cdb55488a49c9b7841"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a1f727f403d8899cdb55488a49c9b7841">ast_stream_topology_get_stream</a></div><div class="ttdeci">struct ast_stream * ast_stream_topology_get_stream(const struct ast_stream_topology *topology, unsigned int stream_num)</div><div class="ttdoc">Get a specific stream from the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00788">stream.c:788</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="stream_8c_html_afcb45a1d2880128928cfb6d91b19ab46"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#afcb45a1d2880128928cfb6d91b19ab46">ast_stream_get_name</a></div><div class="ttdeci">const char * ast_stream_get_name(const struct ast_stream *stream)</div><div class="ttdoc">Get the name of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00309">stream.c:309</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88eca139ded2d5bbc6cdcf793febc265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88eca139ded2d5bbc6cdcf793febc265">&#9670;&nbsp;</a></span>ast_stream_topology_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_topology_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unreference and destroy a stream topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>All streams contained within the topology will be destroyed</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00743">743</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00658">ast_channel_internal_set_stream_topology()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00278">ast_sip_session_media_state_reset()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00667">ast_stream_topology_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00848">ast_stream_topology_create_from_format_cap()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02709">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01111">ast_unreal_alloc()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01099">ast_unreal_destructor()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01162">ast_unreal_new_channels()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02613">build_topology()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02694">chan_pjsip_request()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l00930">do_forward()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02267">endpoint_destructor()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00922">local_request()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01650">make_channel()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00967">native_rtp_bridge_join()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00920">native_rtp_stream_topology_changed()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06309">request_channel()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00621">sfu_topologies_on_join()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01124">sfu_topologies_on_source_change()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00124">simple_bridge_join()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00204">simple_bridge_stream_topology_changed()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00817">softmix_bridge_leave()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00284">stream_echo_exec()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, and <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00555">unreal_colp_stream_topology_request_change()</a>.</p>
<div class="fragment"><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(topology);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9535a0540728f4a16be338a261a89580"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9535a0540728f4a16be338a261a89580">&#9670;&nbsp;</a></span>ast_stream_topology_get_active_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_topology_get_active_count </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of active (non-REMOVED) streams in a topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of active streams</dd></dl>
<dl class="section since"><dt>Since</dt><dd>18 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00772">772</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>.</p>
<div class="fragment"><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;{</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams); i++) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, i);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">if</span> (stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a> != <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;         count++;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div><div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5eb43440630db819220df97b01f48922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb43440630db819220df97b01f48922">&#9670;&nbsp;</a></span>ast_stream_topology_get_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_topology_get_count </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of streams in a topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of streams (-1 on error)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00765">765</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00545">append_source_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">ast_stream_topology_equal()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00985">ast_stream_topology_map()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02709">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00650">check_stream_positions()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01063">handle_negotiated_sdp()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l01650">make_channel()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02181">map_source_to_destinations()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01232">media_offer_read_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00967">native_rtp_bridge_join()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00776">remove_destination_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00124">simple_bridge_join()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00099">stream_echo_write()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05536">test_media_add()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00555">unreal_colp_stream_topology_request_change()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02689">validate_original_streams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;{</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b577a1e826e57092e8dba77a89031f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b577a1e826e57092e8dba77a89031f5">&#9670;&nbsp;</a></span>ast_stream_topology_get_first_stream_by_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a>* ast_stream_topology_get_first_stream_by_type </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the first active stream of a specific type from the topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams </td></tr>
    <tr><td class="paramname">type</td><td>The media type</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00964">964</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l01030">ast_stream_topology_create_resolved()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00873">AST_TEST_DEFINE()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00642">channel_set_default_streams()</a>, and <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01318">media_offer_write_av()</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams); i++) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, i);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">if</span> (stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> == <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;         &amp;&amp; stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a> != <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;         <span class="keywordflow">return</span> stream;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac027a9684ada5477ddc7f64142b5338d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac027a9684ada5477ddc7f64142b5338d">&#9670;&nbsp;</a></span>ast_stream_topology_get_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a>* ast_stream_topology_get_formats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a format capabilities structure representing the topology. </p>
<p>A helper function that, given a stream topology, creates a format capabilities structure containing all formats from all active streams.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success (the resulting format caps must be unreffed by the caller) </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The stream topology is NOT altered by this function.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00930">930</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00902">ast_stream_topology_get_formats_by_type()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d49/test__stream_8c_source.html#l02069">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01128">ast_unreal_alloc_stream_topology()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00526">compatible_formats_exist()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l06309">request_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;{</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d4d/stream_8c.html#a328f6c3cf20cbd6a1a402bb4a8cfe2ca">ast_stream_topology_get_formats_by_type</a>(topology, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;}</div><div class="ttc" id="stream_8c_html_a328f6c3cf20cbd6a1a402bb4a8cfe2ca"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a328f6c3cf20cbd6a1a402bb4a8cfe2ca">ast_stream_topology_get_formats_by_type</a></div><div class="ttdeci">struct ast_format_cap * ast_stream_topology_get_formats_by_type(struct ast_stream_topology *topology, enum ast_media_type type)</div><div class="ttdoc">Create a format capabilities structure containing all the formats from all the streams of a particula...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00902">stream.c:902</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a328f6c3cf20cbd6a1a402bb4a8cfe2ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a328f6c3cf20cbd6a1a402bb4a8cfe2ca">&#9670;&nbsp;</a></span>ast_stream_topology_get_formats_by_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a>* ast_stream_topology_get_formats_by_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a format capabilities structure containing all the formats from all the streams of a particular type in the topology. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<p>A helper function that, given a stream topology and a media type, creates a format capabilities structure containing all formats from all active streams with the particular type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams </td></tr>
    <tr><td class="paramname">type</td><td>The media type</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success (the resulting format caps must be unreffed by the caller) </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The stream topology is NOT altered by this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00902">902</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../d8/d95/stream_8h_source.html#l00078">AST_STREAM_STATE_REMOVED</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00095">ast_stream::formats</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00100">ast_stream::state</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00930">ast_stream_topology_get_formats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;{</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordflow">if</span> (!caps) {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams); i++) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, i);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">if</span> (!stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a> || stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">state</a> == <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a> || <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> == stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(caps, stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">formats</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">return</span> caps;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__stream_html_a026600af913fb0e5ce56099e1786b471"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a026600af913fb0e5ce56099e1786b471">ast_stream::formats</a></div><div class="ttdeci">struct ast_format_cap * formats</div><div class="ttdoc">Current formats negotiated on the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00095">stream.c:95</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__stream_html_ada3bb2d20bb8b542a31f8b3ab5cacbbf"><div class="ttname"><a href="../../d4/d17/structast__stream.html#ada3bb2d20bb8b542a31f8b3ab5cacbbf">ast_stream::state</a></div><div class="ttdeci">enum ast_stream_state state</div><div class="ttdoc">The current state of the stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00100">stream.c:100</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f727f403d8899cdb55488a49c9b7841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f727f403d8899cdb55488a49c9b7841">&#9670;&nbsp;</a></span>ast_stream_topology_get_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a>* ast_stream_topology_get_stream </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a specific stream from the topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams </td></tr>
    <tr><td class="paramname">position</td><td>The topology position to get</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00788">788</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00545">append_source_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00359">ast_sip_session_is_pending_stream_default()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00490">ast_sip_session_media_state_add()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00297">ast_sip_session_media_state_clone()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00696">ast_stream_topology_equal()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00985">ast_stream_topology_map()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02709">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00650">check_stream_positions()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01063">handle_negotiated_sdp()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00824">is_compatible_format()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02181">map_source_to_destinations()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01232">media_offer_read_av()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00857">native_rtp_request_stream_topology_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00776">remove_destination_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00061">simple_bridge_request_stream_topology_update()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00222">stream_echo_topology_alloc()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00099">stream_echo_write()</a>, <a class="el" href="../../d0/d78/app__stream__echo_8c_source.html#l00078">stream_echo_write_error()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05536">test_media_add()</a>, <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l00555">unreal_colp_stream_topology_request_change()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02689">validate_original_streams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;{</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, stream_num);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9b482e485bd9a3c1d2ab8acdd90eadc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9b482e485bd9a3c1d2ab8acdd90eadc">&#9670;&nbsp;</a></span>ast_stream_topology_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_stream_topology_map </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ast_vector_int *&#160;</td>
          <td class="paramname"><em>types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ast_vector_int *&#160;</td>
          <td class="paramname"><em>v0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ast_vector_int *&#160;</td>
          <td class="paramname"><em>v1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map a given topology's streams to the given types. </p>
<dl class="section note"><dt>Note</dt><dd>The given vectors in which mapping values are placed are reset by this function. This means if those vectors already contain mapping values they will be lost.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology to map </td></tr>
    <tr><td class="paramname">types</td><td>The media types to be mapped </td></tr>
    <tr><td class="paramname">v0</td><td>Index mapping of topology to types </td></tr>
    <tr><td class="paramname">v1</td><td>Index mapping of types to topology</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00985">985</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d16/codec_8h_source.html#l00036">AST_MEDIA_TYPE_END</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00316">ast_stream_get_type()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00765">ast_stream_topology_get_count()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00788">ast_stream_topology_get_stream()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00564">AST_VECTOR_ELEM_DEFAULT_CMP</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00698">AST_VECTOR_GET_INDEX_NTH</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03174">ast_bridge_channel_stream_map()</a>, and <a class="el" href="../../dd/d49/test__stream_8c_source.html#l02173">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keywordtype">int</span> nths[<a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c">AST_MEDIA_TYPE_END</a>] = {0};</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordtype">int</span> size = <a class="code" href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(topology);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">    * Clear out any old mappings and initialize the new ones</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(v0);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(v1);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">    * Both vectors are sized to the topology. The media types vector is always</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">    * guaranteed to be the size of the given topology or greater.</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(v0, size);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(v1, size);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; size; ++i) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream = <a class="code" href="../../d8/d4d/stream_8c.html#a1f727f403d8899cdb55488a49c9b7841">ast_stream_topology_get_stream</a>(topology, i);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = <a class="code" href="../../d8/d4d/stream_8c.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(stream);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordtype">int</span> index = <a class="code" href="../../d6/d68/vector_8h.html#a2e6f1f71735063388edb3329f24c1571">AST_VECTOR_GET_INDEX_NTH</a>(types, ++nths[type],</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;         type, <a class="code" href="../../d6/d68/vector_8h.html#a815f68701a777bc620e8e24565ac0236">AST_VECTOR_ELEM_DEFAULT_CMP</a>);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">if</span> (index == -1) {</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">          * If a given type is not found for an index level then update the</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">          * media types vector with that type. This keeps the media types</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">          * vector always at the max topology size.</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(types, type);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         index = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(types) - 1;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">       * The mapping is reflexive in the sense that if it maps in one direction</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">       * then the reverse direction maps back to the other&#39;s index.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(v0, i, index);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(v1, index, i);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="vector_8h_html_a2e6f1f71735063388edb3329f24c1571"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a2e6f1f71735063388edb3329f24c1571">AST_VECTOR_GET_INDEX_NTH</a></div><div class="ttdeci">#define AST_VECTOR_GET_INDEX_NTH(vec, nth, value, cmp)</div><div class="ttdoc">Get the nth index from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00698">vector.h:698</a></div></div>
<div class="ttc" id="vector_8h_html_a815f68701a777bc620e8e24565ac0236"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a815f68701a777bc620e8e24565ac0236">AST_VECTOR_ELEM_DEFAULT_CMP</a></div><div class="ttdeci">#define AST_VECTOR_ELEM_DEFAULT_CMP(elem, value)</div><div class="ttdoc">Default comparator for AST_VECTOR_REMOVE_ELEM_UNORDERED() </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00564">vector.h:564</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="stream_8c_html_a5eb43440630db819220df97b01f48922"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a></div><div class="ttdeci">int ast_stream_topology_get_count(const struct ast_stream_topology *topology)</div><div class="ttdoc">Get the number of streams in a topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00765">stream.c:765</a></div></div>
<div class="ttc" id="stream_8c_html_a86319542b92fb0dc6b2ed337d83cf8ce"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a></div><div class="ttdeci">enum ast_media_type ast_stream_get_type(const struct ast_stream *stream)</div><div class="ttdoc">Get the media type of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00316">stream.c:316</a></div></div>
<div class="ttc" id="stream_8c_html_a1f727f403d8899cdb55488a49c9b7841"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#a1f727f403d8899cdb55488a49c9b7841">ast_stream_topology_get_stream</a></div><div class="ttdeci">struct ast_stream * ast_stream_topology_get_stream(const struct ast_stream_topology *topology, unsigned int stream_num)</div><div class="ttdoc">Get a specific stream from the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00788">stream.c:788</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a412130c13f852573e1e662864d35b55c">AST_MEDIA_TYPE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00036">codec.h:36</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bec3fe997f1085a3095cd46e8208b20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bec3fe997f1085a3095cd46e8208b20">&#9670;&nbsp;</a></span>ast_stream_topology_set_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_topology_set_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d17/structast__stream.html">ast_stream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a specific position in a topology. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>The topology of streams </td></tr>
    <tr><td class="paramname">position</td><td>The topology position to set </td></tr>
    <tr><td class="paramname">stream</td><td>The stream to put in its place</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If an existing stream exists it will be destroyed</dd>
<dd>
You can overwrite an existing position in the topology or set the first unused position. You can't set positions beyond that.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the stream's name is empty, it'll be set to &lt;stream_type&gt;-&lt;position&gt; </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00796">796</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00347">ast_codec_media_type2str()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">ast_stream_free()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00231">MIN_STREAM_NAME_LEN</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00120">ast_stream::name</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00090">ast_stream::position</a>, and <a class="el" href="../../d8/d4d/stream_8c_source.html#l00085">ast_stream::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00568">append_all_streams()</a>, <a class="el" href="../../dd/d49/test__stream_8c_source.html#l00537">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01080">remove_all_original_streams()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00367">t38_create_media_state()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05536">test_media_add()</a>.</p>
<div class="fragment"><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;{</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *existing_stream;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology &amp;&amp; stream);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> &gt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams)) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams)) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      existing_stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a>(existing_stream);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> = <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a> == <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams)) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;topology-&gt;streams, stream);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>)) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      snprintf(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a>, <span class="stringliteral">&quot;%s-%d&quot;</span>, <a class="code" href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a>(stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>), stream-&gt;<a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;topology-&gt;streams, <a class="code" href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">position</a>, stream);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div><div class="ttc" id="codec_8h_html_a97df2e6b65823085173625553d2e06c5"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a97df2e6b65823085173625553d2e06c5">ast_codec_media_type2str</a></div><div class="ttdeci">const char * ast_codec_media_type2str(enum ast_media_type type)</div><div class="ttdoc">Conversion function to take a media type and turn it into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00347">codec.c:347</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="stream_8c_html_ac18ead73a13a3d361b125535b9855723"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#ac18ead73a13a3d361b125535b9855723">MIN_STREAM_NAME_LEN</a></div><div class="ttdeci">#define MIN_STREAM_NAME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00231">stream.c:231</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="stream_8c_html_acd53513fe1965d4e5d4581d79ef8d24c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a></div><div class="ttdeci">void ast_stream_free(struct ast_stream *stream)</div><div class="ttdoc">Destroy a media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00292">stream.c:292</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__stream_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d17/structast__stream.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_stream::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Name for the stream within the context of the channel it is on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00120">stream.c:120</a></div></div>
<div class="ttc" id="structast__stream_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_stream::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">The type of media the stream is handling. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00085">stream.c:85</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="structast__stream_html_a1d7b72031fa39d396d531503904f337b"><div class="ttname"><a href="../../d4/d17/structast__stream.html#a1d7b72031fa39d396d531503904f337b">ast_stream::position</a></div><div class="ttdeci">unsigned int position</div><div class="ttdoc">The position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00090">stream.c:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3da8d8e63718c47d43b9e738c7f6e55a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3da8d8e63718c47d43b9e738c7f6e55a">&#9670;&nbsp;</a></span>ast_stream_topology_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_topology_to_str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *&#160;</td>
          <td class="paramname"><em>topology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a string representing the topology for debugging/display purposes. </p>
<dl class="section since"><dt>Since</dt><dd>18</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topology</td><td>A stream topology </td></tr>
    <tr><td class="paramname">buf</td><td>A pointer to an ast_str* used for the output.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">""</td><td>(empty string) if either buf or *buf are NULL </td></tr>
    <tr><td class="paramname">(null topology)</td><td>if *topology was NULL </td></tr>
    <tr><td class="paramname">&lt;topology_representation&gt;</td><td>otherwise</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>No attempt should ever be made to free the returned char * and it should be dup'd if needed after the <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> is freed.</dd></dl>
<p>Return format: &lt;final&gt;? &lt;stream&gt; ...</p>
<p>Sample return: "final &lt;audio:audio:sendrecv (ulaw,g722)&gt; &lt;video:video:sendonly (h264)&gt;" </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00936">936</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00337">ast_stream_to_str()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l11167">ast_channel_request_stream_topology_change()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01591">ast_channel_set_stream_topology()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02358">call()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02385">chan_pjsip_call()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01612">chan_pjsip_indicate()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02667">chan_pjsip_request_with_stream_topology()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00526">compatible_formats_exist()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01751">is_media_state_valid()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01549">on_topology_change_response()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01835">resolve_refresh_media_states()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01575">send_topology_change_refresh()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04163">session_on_tsx_state()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02184">sip_session_refresh()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02269">softmix_bridge_stream_sources_update()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01202">wait_for_answer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;{</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keywordflow">if</span> (!buf ||!*buf) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">if</span> (!topology) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;(null topology)&quot;</span>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(topology-&gt;final, <span class="stringliteral">&quot;final&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;topology-&gt;streams); i++) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      stream = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;topology-&gt;streams, i);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot; &lt;&quot;</span>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <a class="code" href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a>(stream, buf);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;&gt;&quot;</span>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="stream_8c_html_af793e90c3796564a01574fd9c5e9e208"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#af793e90c3796564a01574fd9c5e9e208">ast_stream_to_str</a></div><div class="ttdeci">const char * ast_stream_to_str(const struct ast_stream *stream, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the stream for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00337">stream.c:337</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37a2b435e5057a153b0a13cc309b0056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a2b435e5057a153b0a13cc309b0056">&#9670;&nbsp;</a></span>stream_topology_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stream_topology_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00641">641</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d4d/stream_8c_source.html#l00292">ast_stream_free()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00865">AST_VECTOR_CALLBACK_VOID</a>, and <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00650">ast_stream_topology_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology = data;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(&amp;topology-&gt;streams, <a class="code" href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;topology-&gt;streams);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="stream_8c_html_acd53513fe1965d4e5d4581d79ef8d24c"><div class="ttname"><a href="../../d8/d4d/stream_8c.html#acd53513fe1965d4e5d4581d79ef8d24c">ast_stream_free</a></div><div class="ttdeci">void ast_stream_free(struct ast_stream *stream)</div><div class="ttdoc">Destroy a media stream representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00292">stream.c:292</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa906f45fa54e87a73685dc5ea6ab413f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa906f45fa54e87a73685dc5ea6ab413f">&#9670;&nbsp;</a></span>ast_stream_codec_negotiation_keep_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_codec_negotiation_keep_map[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a3a687db29203d7bd1e68c74df77593ef">CODEC_NEGOTIATION_KEEP_UNSPECIFIED</a>] = <span class="stringliteral">&quot;unspecified&quot;</span>,</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5aa6ef772fc5c885a8be492e800bb77a5b">CODEC_NEGOTIATION_KEEP_ALL</a>] = <span class="stringliteral">&quot;all&quot;</span>,</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a0fff4780f7aa3c25f6f1161961c5618a">CODEC_NEGOTIATION_KEEP_FIRST</a>] = <span class="stringliteral">&quot;first&quot;</span>,</div><div class="line">}</div><div class="ttc" id="stream_8h_html_a45f84a7fad92fc9e7013a7bc8825f8e5aa6ef772fc5c885a8be492e800bb77a5b"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5aa6ef772fc5c885a8be492e800bb77a5b">CODEC_NEGOTIATION_KEEP_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00180">stream.h:180</a></div></div>
<div class="ttc" id="stream_8h_html_a45f84a7fad92fc9e7013a7bc8825f8e5a0fff4780f7aa3c25f6f1161961c5618a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a0fff4780f7aa3c25f6f1161961c5618a">CODEC_NEGOTIATION_KEEP_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00182">stream.h:182</a></div></div>
<div class="ttc" id="stream_8h_html_a45f84a7fad92fc9e7013a7bc8825f8e5a3a687db29203d7bd1e68c74df77593ef"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a45f84a7fad92fc9e7013a7bc8825f8e5a3a687db29203d7bd1e68c74df77593ef">CODEC_NEGOTIATION_KEEP_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00178">stream.h:178</a></div></div>
</div><!-- fragment -->
<p>"keep" enum to string map </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00069">69</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

</div>
</div>
<a id="af4a8c3911f998b400bfb2b0368e11eb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a8c3911f998b400bfb2b0368e11eb8">&#9670;&nbsp;</a></span>ast_stream_codec_negotiation_operation_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_codec_negotiation_operation_map[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>"operation" enum to string map </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00061">61</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

</div>
</div>
<a id="a96efa5b5faa4f5032955f6cedf1aa7ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96efa5b5faa4f5032955f6cedf1aa7ea">&#9670;&nbsp;</a></span>ast_stream_codec_negotiation_params_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_codec_negotiation_params_map[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preference enum to string map. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00047">47</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

</div>
</div>
<a id="ad33bdf05a7a6f778f16680a619da8fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad33bdf05a7a6f778f16680a619da8fa2">&#9670;&nbsp;</a></span>ast_stream_codec_negotiation_prefer_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_codec_negotiation_prefer_map[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a43cca64d95fd6af164696bba94c7d345">CODEC_NEGOTIATION_PREFER_UNSPECIFIED</a>] = <span class="stringliteral">&quot;unspecified&quot;</span>,</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a4d65c44e2c39297c0c297d0ed8889cdf">CODEC_NEGOTIATION_PREFER_PENDING</a>] = <span class="stringliteral">&quot;pending&quot;</span>,</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a1b73fc87b5534a84aa0ed1369072bcf2">CODEC_NEGOTIATION_PREFER_CONFIGURED</a>] = <span class="stringliteral">&quot;configured&quot;</span>,</div><div class="line">}</div><div class="ttc" id="stream_8h_html_aef2c14792611abd0869728c2e0396921a1b73fc87b5534a84aa0ed1369072bcf2"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a1b73fc87b5534a84aa0ed1369072bcf2">CODEC_NEGOTIATION_PREFER_CONFIGURED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00150">stream.h:150</a></div></div>
<div class="ttc" id="stream_8h_html_aef2c14792611abd0869728c2e0396921a4d65c44e2c39297c0c297d0ed8889cdf"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a4d65c44e2c39297c0c297d0ed8889cdf">CODEC_NEGOTIATION_PREFER_PENDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00148">stream.h:148</a></div></div>
<div class="ttc" id="stream_8h_html_aef2c14792611abd0869728c2e0396921a43cca64d95fd6af164696bba94c7d345"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aef2c14792611abd0869728c2e0396921a43cca64d95fd6af164696bba94c7d345">CODEC_NEGOTIATION_PREFER_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00146">stream.h:146</a></div></div>
</div><!-- fragment -->
<p>"prefer" enum to string map </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00055">55</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

</div>
</div>
<a id="a909312fd0db16d78469c74b2f67255b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a909312fd0db16d78469c74b2f67255b0">&#9670;&nbsp;</a></span>ast_stream_codec_negotiation_transcode_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_codec_negotiation_transcode_map[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89a0970c228ef64e5e731fbb03fd3689c1f">CODEC_NEGOTIATION_TRANSCODE_UNSPECIFIED</a>] = <span class="stringliteral">&quot;unspecified&quot;</span>,</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89aa2d245ee4ca057772b04917caefdc4a0">CODEC_NEGOTIATION_TRANSCODE_ALLOW</a>] = <span class="stringliteral">&quot;allow&quot;</span>,</div><div class="line">   [<a class="code" href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89a45dce3cca418c7a1fb216f35810da9ac">CODEC_NEGOTIATION_TRANSCODE_PREVENT</a>] = <span class="stringliteral">&quot;prevent&quot;</span>,</div><div class="line">}</div><div class="ttc" id="stream_8h_html_a9a24d8917f7266637f81d3352da9be89a0970c228ef64e5e731fbb03fd3689c1f"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89a0970c228ef64e5e731fbb03fd3689c1f">CODEC_NEGOTIATION_TRANSCODE_UNSPECIFIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00192">stream.h:192</a></div></div>
<div class="ttc" id="stream_8h_html_a9a24d8917f7266637f81d3352da9be89a45dce3cca418c7a1fb216f35810da9ac"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89a45dce3cca418c7a1fb216f35810da9ac">CODEC_NEGOTIATION_TRANSCODE_PREVENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00196">stream.h:196</a></div></div>
<div class="ttc" id="stream_8h_html_a9a24d8917f7266637f81d3352da9be89aa2d245ee4ca057772b04917caefdc4a0"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a9a24d8917f7266637f81d3352da9be89aa2d245ee4ca057772b04917caefdc4a0">CODEC_NEGOTIATION_TRANSCODE_ALLOW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00194">stream.h:194</a></div></div>
</div><!-- fragment -->
<p>"transcode" state enum to string map </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00075">75</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

</div>
</div>
<a id="aca7fc670baa89f55e1e218f0ea4c0eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca7fc670baa89f55e1e218f0ea4c0eac">&#9670;&nbsp;</a></span>ast_stream_state_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_stream_state_map[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stream state enum to string map. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d4d/stream_8c_source.html#l00223">223</a> of file <a class="el" href="../../d8/d4d/stream_8c_source.html">stream.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d4d/stream_8c_source.html#l00337">ast_stream_to_str()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:51 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
