<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: data_buffer.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">data_buffer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Data Buffer API.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/dd0/data__buffer_8h__dep__incl.png" border="0" usemap="#data__buffer_8hdep" alt=""/></div>
<map name="data__buffer_8hdep" id="data__buffer_8hdep">
<area shape="rect" id="node2" href="../../d2/d09/data__buffer_8c.html" title="Data Buffer API. " alt="" coords="5,80,111,107"/>
<area shape="rect" id="node3" href="../../d9/d21/res__rtp__asterisk_8c.html" title="Supports RTP and RTCP with Symmetric RTP support for NAT traversal. " alt="" coords="135,80,269,107"/>
<area shape="rect" id="node4" href="../../d9/df9/test__data__buffer_8c.html" title="Data Buffer API Unit Tests. " alt="" coords="293,80,431,107"/>
<area shape="rect" id="node5" href="../../df/d98/test__res__rtp_8c.html" title="RTP/RTCP Unit Tests. " alt="" coords="455,80,565,107"/>
</map>
</div>
</div>
<p><a href="../../d7/d82/data__buffer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7cfc723c69ce7af03bbece796ed58a4a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a7cfc723c69ce7af03bbece796ed58a4a">ast_data_buffer_free_callback</a>) (void *data)</td></tr>
<tr class="memdesc:a7cfc723c69ce7af03bbece796ed58a4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback function to free a data payload in a data buffer.  <a href="#a7cfc723c69ce7af03bbece796ed58a4a">More...</a><br /></td></tr>
<tr class="separator:a7cfc723c69ce7af03bbece796ed58a4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aee79ddfb7e64ef7430be933f9addcdfa"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#aee79ddfb7e64ef7430be933f9addcdfa">ast_data_buffer_alloc</a> (<a class="el" href="../../d7/d82/data__buffer_8h.html#a7cfc723c69ce7af03bbece796ed58a4a">ast_data_buffer_free_callback</a> free_fn, size_t size)</td></tr>
<tr class="memdesc:aee79ddfb7e64ef7430be933f9addcdfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a data buffer.  <a href="#aee79ddfb7e64ef7430be933f9addcdfa">More...</a><br /></td></tr>
<tr class="separator:aee79ddfb7e64ef7430be933f9addcdfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56472084280daafd2d67d69e4c2f7248"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a56472084280daafd2d67d69e4c2f7248">ast_data_buffer_count</a> (const struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer)</td></tr>
<tr class="memdesc:a56472084280daafd2d67d69e4c2f7248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of payloads in a data buffer.  <a href="#a56472084280daafd2d67d69e4c2f7248">More...</a><br /></td></tr>
<tr class="separator:a56472084280daafd2d67d69e4c2f7248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae796391f113088352925d4359c8f96f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#ae796391f113088352925d4359c8f96f5">ast_data_buffer_free</a> (struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer)</td></tr>
<tr class="memdesc:ae796391f113088352925d4359c8f96f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a data buffer (and all held data payloads)  <a href="#ae796391f113088352925d4359c8f96f5">More...</a><br /></td></tr>
<tr class="separator:ae796391f113088352925d4359c8f96f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91218206f7c98167c6fc48d26639cf0e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a91218206f7c98167c6fc48d26639cf0e">ast_data_buffer_get</a> (const struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer, size_t pos)</td></tr>
<tr class="memdesc:a91218206f7c98167c6fc48d26639cf0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a data payload from the data buffer.  <a href="#a91218206f7c98167c6fc48d26639cf0e">More...</a><br /></td></tr>
<tr class="separator:a91218206f7c98167c6fc48d26639cf0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e2eefe1a192ac86ab9ca3f588bf9b7a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a9e2eefe1a192ac86ab9ca3f588bf9b7a">ast_data_buffer_max</a> (const struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer)</td></tr>
<tr class="memdesc:a9e2eefe1a192ac86ab9ca3f588bf9b7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the maximum number of payloads a data buffer can hold.  <a href="#a9e2eefe1a192ac86ab9ca3f588bf9b7a">More...</a><br /></td></tr>
<tr class="separator:a9e2eefe1a192ac86ab9ca3f588bf9b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d5b92d5d157c9d56600596c9238b933"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a8d5b92d5d157c9d56600596c9238b933">ast_data_buffer_put</a> (struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer, size_t pos, void *payload)</td></tr>
<tr class="memdesc:a8d5b92d5d157c9d56600596c9238b933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place a data payload at a position in the data buffer.  <a href="#a8d5b92d5d157c9d56600596c9238b933">More...</a><br /></td></tr>
<tr class="separator:a8d5b92d5d157c9d56600596c9238b933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15a633fb9ce31edf0ab9ad85031c198"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#ad15a633fb9ce31edf0ab9ad85031c198">ast_data_buffer_remove</a> (struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer, size_t pos)</td></tr>
<tr class="memdesc:ad15a633fb9ce31edf0ab9ad85031c198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a data payload from the data buffer.  <a href="#ad15a633fb9ce31edf0ab9ad85031c198">More...</a><br /></td></tr>
<tr class="separator:ad15a633fb9ce31edf0ab9ad85031c198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c1b4aff92ccf8f129bb52902bb1263"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a33c1b4aff92ccf8f129bb52902bb1263">ast_data_buffer_remove_head</a> (struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer)</td></tr>
<tr class="memdesc:a33c1b4aff92ccf8f129bb52902bb1263"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the first payload from the data buffer.  <a href="#a33c1b4aff92ccf8f129bb52902bb1263">More...</a><br /></td></tr>
<tr class="separator:a33c1b4aff92ccf8f129bb52902bb1263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b088aaa6c2ae2366f12db54e6c76e5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d82/data__buffer_8h.html#a6b088aaa6c2ae2366f12db54e6c76e5d">ast_data_buffer_resize</a> (struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer, size_t size)</td></tr>
<tr class="memdesc:a6b088aaa6c2ae2366f12db54e6c76e5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resize a data buffer.  <a href="#a6b088aaa6c2ae2366f12db54e6c76e5d">More...</a><br /></td></tr>
<tr class="separator:a6b088aaa6c2ae2366f12db54e6c76e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data Buffer API. </p>
<p>A data buffer acts as a ring buffer of data. It is given a fixed number of data packets to store (which may be dynamically changed). Given a number it will store a data packet at that position relative to the others. Given a number it will retrieve the given data packet if it is present. This is purposely a storage of arbitrary things so that it can be used for multiple things.</p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd>
<dd>
Ben Ford <a href="#" onclick="location.href='mai'+'lto:'+'bfo'+'rd'+'@di'+'gi'+'um.'+'co'+'m'; return false;">bford<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d7/d82/data__buffer_8h_source.html">data_buffer.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a7cfc723c69ce7af03bbece796ed58a4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cfc723c69ce7af03bbece796ed58a4a">&#9670;&nbsp;</a></span>ast_data_buffer_free_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* ast_data_buffer_free_callback) (void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A callback function to free a data payload in a data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>data payload </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d82/data__buffer_8h_source.html#l00048">48</a> of file <a class="el" href="../../d7/d82/data__buffer_8h_source.html">data_buffer.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aee79ddfb7e64ef7430be933f9addcdfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee79ddfb7e64ef7430be933f9addcdfa">&#9670;&nbsp;</a></span>ast_data_buffer_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a>* ast_data_buffer_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d82/data__buffer_8h.html#a7cfc723c69ce7af03bbece796ed58a4a">ast_data_buffer_free_callback</a>&#160;</td>
          <td class="paramname"><em>free_fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">free_fn</td><td>Callback function to free a data payload </td></tr>
    <tr><td class="paramname">size</td><td>The maximum number of data payloads to contain in the data buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>free_fn can be NULL. It is up to the consumer of this API to ensure that memory is managed appropriately.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00145">145</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00100">ast_data_buffer_cache_adjust()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">ast_data_buffer::cached_payloads</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00061">ast_data_buffer::free_fn</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00074">free_fn_do_nothing()</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00069">ast_data_buffer::max</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, and <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00055">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *buffer;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(size != 0);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   buffer = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*buffer));</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <span class="keywordflow">if</span> (!buffer) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">cached_payloads</a>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="comment">/* If free_fn is NULL, just use free_fn_do_nothing as a default */</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">free_fn</a> = <a class="code" href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">free_fn</a> ? <a class="code" href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">free_fn</a> : <a class="code" href="../../d2/d09/data__buffer_8c.html#a53c48f77edd34032db8ca49a59d1d4fa">free_fn_do_nothing</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a> = size;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <a class="code" href="../../d2/d09/data__buffer_8c.html#a1608e320f083da5e211929b48e2fed69">ast_data_buffer_cache_adjust</a>(buffer);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordflow">return</span> buffer;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="structast__data__buffer_html"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a></div><div class="ttdoc">Data buffer containing fixed number of data payloads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00059">data_buffer.c:59</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a2f9ce5f01c066eb6ef649c9a2b0dbf0e"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">ast_data_buffer::max</a></div><div class="ttdeci">size_t max</div><div class="ttdoc">Maximum number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00069">data_buffer.c:69</a></div></div>
<div class="ttc" id="data__buffer_8c_html_a53c48f77edd34032db8ca49a59d1d4fa"><div class="ttname"><a href="../../d2/d09/data__buffer_8c.html#a53c48f77edd34032db8ca49a59d1d4fa">free_fn_do_nothing</a></div><div class="ttdeci">static void free_fn_do_nothing(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00074">data_buffer.c:74</a></div></div>
<div class="ttc" id="structast__data__buffer_html_ab209547481ed956867bee9ebc83c5544"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">ast_data_buffer::cached_payloads</a></div><div class="ttdeci">struct ast_data_buffer::@379 cached_payloads</div><div class="ttdoc">A linked list of unused cached data payloads. </div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="data__buffer_8c_html_a1608e320f083da5e211929b48e2fed69"><div class="ttname"><a href="../../d2/d09/data__buffer_8c.html#a1608e320f083da5e211929b48e2fed69">ast_data_buffer_cache_adjust</a></div><div class="ttdeci">static void ast_data_buffer_cache_adjust(struct ast_data_buffer *buffer)</div><div class="ttdoc">Helper function that sets the cache to its maximum number of payloads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00100">data_buffer.c:100</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a7bebf2eaff940e8b8d7f8a446bfd8f46"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">ast_data_buffer::free_fn</a></div><div class="ttdeci">ast_data_buffer_free_callback free_fn</div><div class="ttdoc">Callback function to free a data payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00061">data_buffer.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a56472084280daafd2d67d69e4c2f7248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56472084280daafd2d67d69e4c2f7248">&#9670;&nbsp;</a></span>ast_data_buffer_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ast_data_buffer_count </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of payloads in a data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>number of data payloads</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00356">356</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00067">ast_data_buffer::count</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00055">AST_TEST_DEFINE()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02430">get_recv_buffer_count()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02452">get_send_buffer_count()</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordflow">return</span> buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a76d971a3c552bc58ba9f0d5fceae9806"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">ast_data_buffer::count</a></div><div class="ttdeci">size_t count</div><div class="ttdoc">The current number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00067">data_buffer.c:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae796391f113088352925d4359c8f96f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae796391f113088352925d4359c8f96f5">&#9670;&nbsp;</a></span>ast_data_buffer_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_data_buffer_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a data buffer (and all held data payloads) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00338">338</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">ast_data_buffer::cached_payloads</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00061">ast_data_buffer::free_fn</a>, <a class="el" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer_payload_entry::payload</a>, and <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00046">ast_data_buffer_free_wrapper()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04048">ast_rtp_destroy()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *buffer_payload;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="keywordflow">while</span> ((buffer_payload = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>))) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">free_fn</a>(buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buffer_payload);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">while</span> ((buffer_payload = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">cached_payloads</a>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>))) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buffer_payload);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buffer);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div><div class="ttc" id="structdata__buffer__payload__entry_html"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a></div><div class="ttdoc">Payload entry placed inside of the data buffer list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00047">data_buffer.c:47</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a9eff55064941fb604452abb0050ea99d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">data_buffer_payload_entry::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdoc">The payload for this position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer.c:49</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__data__buffer_html_ab209547481ed956867bee9ebc83c5544"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">ast_data_buffer::cached_payloads</a></div><div class="ttdeci">struct ast_data_buffer::@379 cached_payloads</div><div class="ttdoc">A linked list of unused cached data payloads. </div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_aa399d0e739b642ed33ad259bc192a70d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a></div><div class="ttdeci">struct data_buffer_payload_entry::@377 list</div><div class="ttdoc">Linked list information. </div></div>
<div class="ttc" id="structast__data__buffer_html_a7bebf2eaff940e8b8d7f8a446bfd8f46"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">ast_data_buffer::free_fn</a></div><div class="ttdeci">ast_data_buffer_free_callback free_fn</div><div class="ttdoc">Callback function to free a data payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00061">data_buffer.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a91218206f7c98167c6fc48d26639cf0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91218206f7c98167c6fc48d26639cf0e">&#9670;&nbsp;</a></span>ast_data_buffer_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_data_buffer_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a data payload from the data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer </td></tr>
    <tr><td class="paramname">pos</td><td>The position of the data payload</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This does not remove the data payload from the data buffer. It will be removed when it is displaced.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00269">269</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer_payload_entry::payload</a>, <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>, and <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00051">data_buffer_payload_entry::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, and <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00083">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *buffer_payload;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, buffer_payload, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">if</span> (buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a> == <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         <span class="keywordflow">return</span> buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="ttc" id="structdata__buffer__payload__entry_html"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a></div><div class="ttdoc">Payload entry placed inside of the data buffer list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00047">data_buffer.c:47</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a9eff55064941fb604452abb0050ea99d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">data_buffer_payload_entry::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdoc">The payload for this position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer.c:49</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a5438a597ee291f523ae04a9fe355924f"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">data_buffer_payload_entry::pos</a></div><div class="ttdeci">size_t pos</div><div class="ttdoc">The provided position for this. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00051">data_buffer.c:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_aa399d0e739b642ed33ad259bc192a70d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a></div><div class="ttdeci">struct data_buffer_payload_entry::@377 list</div><div class="ttdoc">Linked list information. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e2eefe1a192ac86ab9ca3f588bf9b7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e2eefe1a192ac86ab9ca3f588bf9b7a">&#9670;&nbsp;</a></span>ast_data_buffer_max()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ast_data_buffer_max </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the maximum number of payloads a data buffer can hold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>maximum number of data payloads</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00363">363</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00069">ast_data_buffer::max</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00055">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02441">get_recv_buffer_max()</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">return</span> buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a2f9ce5f01c066eb6ef649c9a2b0dbf0e"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">ast_data_buffer::max</a></div><div class="ttdeci">size_t max</div><div class="ttdoc">Maximum number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00069">data_buffer.c:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d5b92d5d157c9d56600596c9238b933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d5b92d5d157c9d56600596c9238b933">&#9670;&nbsp;</a></span>ast_data_buffer_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_data_buffer_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Place a data payload at a position in the data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer </td></tr>
    <tr><td class="paramname">pos</td><td>The position of the data payload </td></tr>
    <tr><td class="paramname">payload</td><td>The data payload</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>It is up to the consumer of this API to ensure proper memory management of data payloads</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00203">203</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00100">ast_data_buffer_cache_adjust()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00598">AST_LIST_INSERT_BEFORE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00071">ast_data_buffer::cache_count</a>, <a class="el" href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">ast_data_buffer::cached_payloads</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00067">ast_data_buffer::count</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00061">ast_data_buffer::free_fn</a>, <a class="el" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00069">ast_data_buffer::max</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer_payload_entry::payload</a>, <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>, and <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00051">data_buffer_payload_entry::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00083">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04891">rtp_raw_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *buffer_payload = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *existing_payload;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordtype">int</span> inserted = 0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="comment">/* If the data buffer has reached its maximum size then the head goes away and</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">    * we will reuse its buffer payload</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a> == buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      buffer_payload = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">free_fn</a>(buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a>--;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="comment">/* Update this buffer payload with its new information */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a> = <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a> = <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keywordflow">if</span> (!buffer_payload) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span> (!buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a9f4f03d244291102bc0251f3ee921825">cache_count</a>) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <a class="code" href="../../d2/d09/data__buffer_8c.html#a1608e320f083da5e211929b48e2fed69">ast_data_buffer_cache_adjust</a>(buffer);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      buffer_payload = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">cached_payloads</a>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a9f4f03d244291102bc0251f3ee921825">cache_count</a>--;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="comment">/* Update the payload from the cache with its new information */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a> = <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a> = <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">if</span> (!buffer_payload) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="comment">/* Given the position find its ideal spot within the buffer */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, existing_payload, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="comment">/* If it&#39;s already in the buffer, drop it */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (existing_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a> == <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Packet with position %zu is already in buffer. Not inserting.\n&quot;</span>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;         inserted = -1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">if</span> (existing_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a> &gt; <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a83227c4f8c836f0452b607507c55752f">AST_LIST_INSERT_BEFORE_CURRENT</a>(buffer_payload, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         inserted = 1;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keywordflow">if</span> (inserted == -1) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">if</span> (!inserted) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, buffer_payload, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a>++;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div><div class="ttc" id="structdata__buffer__payload__entry_html"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a></div><div class="ttdoc">Payload entry placed inside of the data buffer list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00047">data_buffer.c:47</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a9eff55064941fb604452abb0050ea99d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">data_buffer_payload_entry::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdoc">The payload for this position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer.c:49</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a5438a597ee291f523ae04a9fe355924f"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">data_buffer_payload_entry::pos</a></div><div class="ttdeci">size_t pos</div><div class="ttdoc">The provided position for this. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00051">data_buffer.c:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a2f9ce5f01c066eb6ef649c9a2b0dbf0e"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">ast_data_buffer::max</a></div><div class="ttdeci">size_t max</div><div class="ttdoc">Maximum number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00069">data_buffer.c:69</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a9f4f03d244291102bc0251f3ee921825"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a9f4f03d244291102bc0251f3ee921825">ast_data_buffer::cache_count</a></div><div class="ttdeci">size_t cache_count</div><div class="ttdoc">The current number of data payloads in the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00071">data_buffer.c:71</a></div></div>
<div class="ttc" id="structast__data__buffer_html_ab209547481ed956867bee9ebc83c5544"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#ab209547481ed956867bee9ebc83c5544">ast_data_buffer::cached_payloads</a></div><div class="ttdeci">struct ast_data_buffer::@379 cached_payloads</div><div class="ttdoc">A linked list of unused cached data payloads. </div></div>
<div class="ttc" id="structast__data__buffer_html_a76d971a3c552bc58ba9f0d5fceae9806"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">ast_data_buffer::count</a></div><div class="ttdeci">size_t count</div><div class="ttdoc">The current number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00067">data_buffer.c:67</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_aa399d0e739b642ed33ad259bc192a70d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a></div><div class="ttdeci">struct data_buffer_payload_entry::@377 list</div><div class="ttdoc">Linked list information. </div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="data__buffer_8c_html_a1608e320f083da5e211929b48e2fed69"><div class="ttname"><a href="../../d2/d09/data__buffer_8c.html#a1608e320f083da5e211929b48e2fed69">ast_data_buffer_cache_adjust</a></div><div class="ttdeci">static void ast_data_buffer_cache_adjust(struct ast_data_buffer *buffer)</div><div class="ttdoc">Helper function that sets the cache to its maximum number of payloads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00100">data_buffer.c:100</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a83227c4f8c836f0452b607507c55752f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a83227c4f8c836f0452b607507c55752f">AST_LIST_INSERT_BEFORE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_INSERT_BEFORE_CURRENT(elm, field)</div><div class="ttdoc">Inserts a list entry before the current entry during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00598">linkedlists.h:598</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a7bebf2eaff940e8b8d7f8a446bfd8f46"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">ast_data_buffer::free_fn</a></div><div class="ttdeci">ast_data_buffer_free_callback free_fn</div><div class="ttdoc">Callback function to free a data payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00061">data_buffer.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad15a633fb9ce31edf0ab9ad85031c198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15a633fb9ce31edf0ab9ad85031c198">&#9670;&nbsp;</a></span>ast_data_buffer_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_data_buffer_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a data payload from the data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer </td></tr>
    <tr><td class="paramname">pos</td><td>The position of the data payload</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This DOES remove the data payload from the data buffer. It does not free it, though.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.5.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00299">299</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00284">data_buffer_free_buffer_payload()</a>, <a class="el" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer_payload_entry::payload</a>, <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>, and <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00051">data_buffer_payload_entry::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, and <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00217">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *buffer_payload;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, buffer_payload, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a> == <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">pos</a>) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <span class="keywordtype">void</span> *<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a> = buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;         <a class="code" href="../../d2/d09/data__buffer_8c.html#a0c9e75810a689b562c0473f389e332ac">data_buffer_free_buffer_payload</a>(buffer, buffer_payload);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="ttc" id="structdata__buffer__payload__entry_html"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a></div><div class="ttdoc">Payload entry placed inside of the data buffer list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00047">data_buffer.c:47</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a9eff55064941fb604452abb0050ea99d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">data_buffer_payload_entry::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdoc">The payload for this position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer.c:49</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a5438a597ee291f523ae04a9fe355924f"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a5438a597ee291f523ae04a9fe355924f">data_buffer_payload_entry::pos</a></div><div class="ttdeci">size_t pos</div><div class="ttdoc">The provided position for this. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00051">data_buffer.c:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_aa399d0e739b642ed33ad259bc192a70d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a></div><div class="ttdeci">struct data_buffer_payload_entry::@377 list</div><div class="ttdoc">Linked list information. </div></div>
<div class="ttc" id="data__buffer_8c_html_a0c9e75810a689b562c0473f389e332ac"><div class="ttname"><a href="../../d2/d09/data__buffer_8c.html#a0c9e75810a689b562c0473f389e332ac">data_buffer_free_buffer_payload</a></div><div class="ttdeci">static void data_buffer_free_buffer_payload(struct ast_data_buffer *buffer, struct data_buffer_payload_entry *buffer_payload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00284">data_buffer.c:284</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33c1b4aff92ccf8f129bb52902bb1263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33c1b4aff92ccf8f129bb52902bb1263">&#9670;&nbsp;</a></span>ast_data_buffer_remove_head()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_data_buffer_remove_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the first payload from the data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This DOES remove the data payload from the data buffer.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.5.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00320">320</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00067">ast_data_buffer::count</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00284">data_buffer_free_buffer_payload()</a>, <a class="el" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer_payload_entry::payload</a>, and <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00217">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a> &gt; 0) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *buffer_payload;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordtype">void</span> *<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      buffer_payload = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      payload = buffer_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="../../d2/d09/data__buffer_8c.html#a0c9e75810a689b562c0473f389e332ac">data_buffer_free_buffer_payload</a>(buffer, buffer_payload);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div><div class="ttc" id="structdata__buffer__payload__entry_html"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a></div><div class="ttdoc">Payload entry placed inside of the data buffer list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00047">data_buffer.c:47</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a9eff55064941fb604452abb0050ea99d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">data_buffer_payload_entry::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdoc">The payload for this position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer.c:49</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a76d971a3c552bc58ba9f0d5fceae9806"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">ast_data_buffer::count</a></div><div class="ttdeci">size_t count</div><div class="ttdoc">The current number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00067">data_buffer.c:67</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_aa399d0e739b642ed33ad259bc192a70d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a></div><div class="ttdeci">struct data_buffer_payload_entry::@377 list</div><div class="ttdoc">Linked list information. </div></div>
<div class="ttc" id="data__buffer_8c_html_a0c9e75810a689b562c0473f389e332ac"><div class="ttname"><a href="../../d2/d09/data__buffer_8c.html#a0c9e75810a689b562c0473f389e332ac">data_buffer_free_buffer_payload</a></div><div class="ttdeci">static void data_buffer_free_buffer_payload(struct ast_data_buffer *buffer, struct data_buffer_payload_entry *buffer_payload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00284">data_buffer.c:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b088aaa6c2ae2366f12db54e6c76e5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b088aaa6c2ae2366f12db54e6c76e5d">&#9670;&nbsp;</a></span>ast_data_buffer_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_data_buffer_resize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d9f/structast__data__buffer.html">ast_data_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resize a data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer </td></tr>
    <tr><td class="paramname">size</td><td>The new maximum size of the data buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If the data buffer is shrunk any old data payloads will be freed using the configured callback. The data buffer is flexible and can be used for multiple purposes. Therefore it is up to the caller of the function to know whether or not a buffer should have its size changed. Increasing the size of the buffer may make sense in some scenarios, but shrinking should always be handled with caution since data can be lost.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>15.4.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00168">168</a> of file <a class="el" href="../../d2/d09/data__buffer_8c_source.html">data_buffer.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00100">ast_data_buffer_cache_adjust()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00067">ast_data_buffer::count</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00061">ast_data_buffer::free_fn</a>, <a class="el" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00069">ast_data_buffer::max</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer_payload_entry::payload</a>, and <a class="el" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l05963">ast_rtp_rtcp_handle_nack()</a>, and <a class="el" href="../../d9/df9/test__data__buffer_8c_source.html#l00178">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a> *existing_payload;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="comment">/* The buffer must have at least a size of 1 */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(size &gt; 0);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a> == size) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="comment">/* If the size is decreasing, some payloads will need to be freed */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="keywordflow">if</span> (buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a> &gt; size) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordtype">int</span> <span class="keyword">remove</span> = buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a> - size;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, existing_payload, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         <span class="keywordflow">if</span> (<span class="keyword">remove</span>) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">payloads</a>, <a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">list</a>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">free_fn</a>(existing_payload-&gt;<a class="code" href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">payload</a>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(existing_payload);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">count</a>--;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keyword">remove</span>--;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;         }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   buffer-&gt;<a class="code" href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">max</a> = size;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <a class="code" href="../../d2/d09/data__buffer_8c.html#a1608e320f083da5e211929b48e2fed69">ast_data_buffer_cache_adjust</a>(buffer);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="structdata__buffer__payload__entry_html"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html">data_buffer_payload_entry</a></div><div class="ttdoc">Payload entry placed inside of the data buffer list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00047">data_buffer.c:47</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_a9eff55064941fb604452abb0050ea99d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#a9eff55064941fb604452abb0050ea99d">data_buffer_payload_entry::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdoc">The payload for this position. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00049">data_buffer.c:49</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a97b723853cd8a5ec59ee26ef1a560757"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a97b723853cd8a5ec59ee26ef1a560757">ast_data_buffer::payloads</a></div><div class="ttdeci">struct ast_data_buffer::@378 payloads</div><div class="ttdoc">A linked list of data payloads. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a2f9ce5f01c066eb6ef649c9a2b0dbf0e"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a2f9ce5f01c066eb6ef649c9a2b0dbf0e">ast_data_buffer::max</a></div><div class="ttdeci">size_t max</div><div class="ttdoc">Maximum number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00069">data_buffer.c:69</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a76d971a3c552bc58ba9f0d5fceae9806"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a76d971a3c552bc58ba9f0d5fceae9806">ast_data_buffer::count</a></div><div class="ttdeci">size_t count</div><div class="ttdoc">The current number of data payloads in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00067">data_buffer.c:67</a></div></div>
<div class="ttc" id="structdata__buffer__payload__entry_html_aa399d0e739b642ed33ad259bc192a70d"><div class="ttname"><a href="../../dc/df1/structdata__buffer__payload__entry.html#aa399d0e739b642ed33ad259bc192a70d">data_buffer_payload_entry::list</a></div><div class="ttdeci">struct data_buffer_payload_entry::@377 list</div><div class="ttdoc">Linked list information. </div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="data__buffer_8c_html_a1608e320f083da5e211929b48e2fed69"><div class="ttname"><a href="../../d2/d09/data__buffer_8c.html#a1608e320f083da5e211929b48e2fed69">ast_data_buffer_cache_adjust</a></div><div class="ttdeci">static void ast_data_buffer_cache_adjust(struct ast_data_buffer *buffer)</div><div class="ttdoc">Helper function that sets the cache to its maximum number of payloads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00100">data_buffer.c:100</a></div></div>
<div class="ttc" id="structast__data__buffer_html_a7bebf2eaff940e8b8d7f8a446bfd8f46"><div class="ttname"><a href="../../d6/d9f/structast__data__buffer.html#a7bebf2eaff940e8b8d7f8a446bfd8f46">ast_data_buffer::free_fn</a></div><div class="ttdeci">ast_data_buffer_free_callback free_fn</div><div class="ttdoc">Callback function to free a data payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d09/data__buffer_8c_source.html#l00061">data_buffer.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:45 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
