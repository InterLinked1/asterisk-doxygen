<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: app_mf.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">app_mf.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d7/d1d/app__mf_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2021, Naveen Albert</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Naveen Albert &lt;asterisk@phreaknet.org&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief MF sender and receiver applications</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \author Naveen Albert &lt;asterisk@phreaknet.org&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * \ingroup applications</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">   &lt;support_level&gt;extended&lt;/support_level&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4d/file_8h.html">asterisk/file.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d08/dsp_8h.html">asterisk/dsp.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d0f/indications_8h.html">asterisk/indications.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dd6/conversions_8h.html">asterisk/conversions.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">   &lt;application name=&quot;ReceiveSF&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">         Detects SF digits on a channel and saves them to a variable.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">         &lt;parameter name=&quot;variable&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">            &lt;para&gt;The input digits will be stored in the given</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">            &lt;replaceable&gt;variable&lt;/replaceable&gt; name.&lt;/para&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">         &lt;parameter name=&quot;digits&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">            &lt;para&gt;Maximum number of digits to read. Default is unlimited.&lt;/para&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">         &lt;parameter name=&quot;timeout&quot;&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">            &lt;para&gt;The number of seconds to wait for all digits, if greater</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">            than &lt;literal&gt;0&lt;/literal&gt;. Can be floating point. Default</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">            is no timeout.&lt;/para&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">         &lt;parameter name=&quot;frequency&quot;&gt;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">            &lt;para&gt;The frequency for which to detect pulsed digits.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">            Default is 2600 Hz.&lt;/para&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">         &lt;parameter name=&quot;options&quot;&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">               &lt;option name=&quot;d&quot;&gt;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">                  &lt;para&gt;Delay audio by a frame to try to extra quelch.&lt;/para&gt;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">               &lt;option name=&quot;e&quot;&gt;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">                  &lt;para&gt;Allow receiving extra pulses 11 through 16.&lt;/para&gt;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">               &lt;option name=&quot;m&quot;&gt;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">                  &lt;para&gt;Mute conference.&lt;/para&gt;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">               &lt;option name=&quot;q&quot;&gt;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">                  &lt;para&gt;Quelch SF from in-band.&lt;/para&gt;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">               &lt;option name=&quot;r&quot;&gt;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">                  &lt;para&gt;&quot;Radio&quot; mode (relaxed SF).&lt;/para&gt;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">         &lt;para&gt;Reads SF digits from the user in to the given</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">         &lt;replaceable&gt;variable&lt;/replaceable&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">         &lt;para&gt;This application does not automatically answer the channel and</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">         should be preceded with &lt;literal&gt;Answer&lt;/literal&gt; or</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">         &lt;literal&gt;Progress&lt;/literal&gt; as needed.&lt;/para&gt;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">            &lt;variable name=&quot;RECEIVESFSTATUS&quot;&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">               &lt;para&gt;This is the status of the read operation.&lt;/para&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">               &lt;value name=&quot;START&quot; /&gt;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">               &lt;value name=&quot;ERROR&quot; /&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">               &lt;value name=&quot;HANGUP&quot; /&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">               &lt;value name=&quot;TIMEOUT&quot; /&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;ReceiveMF&lt;/ref&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;SendMF&lt;/ref&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;Read&lt;/ref&gt;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">   &lt;application name=&quot;ReceiveMF&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">         Detects MF digits on a channel and saves them to a variable.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">         &lt;parameter name=&quot;variable&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">            &lt;para&gt;The input digits will be stored in the given</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">            &lt;replaceable&gt;variable&lt;/replaceable&gt; name.&lt;/para&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">         &lt;parameter name=&quot;timeout&quot;&gt;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">            &lt;para&gt;The number of seconds to wait for all digits, if greater</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">            than &lt;literal&gt;0&lt;/literal&gt;. Can be floating point. Default</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">            is no timeout.&lt;/para&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">         &lt;parameter name=&quot;options&quot;&gt;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">               &lt;option name=&quot;d&quot;&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">                  &lt;para&gt;Delay audio by a frame to try to extra quelch.&lt;/para&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">               &lt;option name=&quot;l&quot;&gt;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">                  &lt;para&gt;Receive digits even if a key pulse (KP) has not yet</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">                  been received. By default, this application will ignore</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">                  all other digits until a KP has been received.&lt;/para&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">               &lt;option name=&quot;k&quot;&gt;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">                  &lt;para&gt;Do not return a character for the KP digit.&lt;/para&gt;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">               &lt;option name=&quot;m&quot;&gt;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">                  &lt;para&gt;Mute conference.&lt;/para&gt;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">               &lt;option name=&quot;o&quot;&gt;</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">                  &lt;para&gt;Enable override. Repeated KPs will clear all previous digits.&lt;/para&gt;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">               &lt;option name=&quot;q&quot;&gt;</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">                  &lt;para&gt;Quelch MF from in-band.&lt;/para&gt;</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">               &lt;option name=&quot;r&quot;&gt;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">                  &lt;para&gt;&quot;Radio&quot; mode (relaxed MF).&lt;/para&gt;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">               &lt;option name=&quot;s&quot;&gt;</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">                  &lt;para&gt;Do not return a character for ST digits.&lt;/para&gt;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">         &lt;para&gt;Reads a ST, STP, ST2P, or ST3P-terminated string of MF digits from</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">         the user in to the given &lt;replaceable&gt;variable&lt;/replaceable&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">         &lt;para&gt;This application does not automatically answer the channel and</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">         should be preceded with &lt;literal&gt;Answer&lt;/literal&gt; or</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">         &lt;literal&gt;Progress&lt;/literal&gt; as needed.&lt;/para&gt;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">            &lt;variable name=&quot;RECEIVEMFSTATUS&quot;&gt;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">               &lt;para&gt;This is the status of the read operation.&lt;/para&gt;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">               &lt;value name=&quot;START&quot; /&gt;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">               &lt;value name=&quot;ERROR&quot; /&gt;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">               &lt;value name=&quot;HANGUP&quot; /&gt;</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">               &lt;value name=&quot;TIMEOUT&quot; /&gt;</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;ReceiveSF&lt;/ref&gt;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;SendMF&lt;/ref&gt;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;Read&lt;/ref&gt;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">   &lt;application name=&quot;SendMF&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">         Sends arbitrary MF digits on the current or specified channel.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">         &lt;parameter name=&quot;digits&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">            &lt;para&gt;List of digits 0-9,*#ABC to send; also f or F for a flash-hook</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">            if the channel supports flash-hook, and w or W for a wink if the channel</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">            supports wink.&lt;/para&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">            &lt;para&gt;Key pulse and start digits are not included automatically.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">            * is used for KP, # for ST, A for STP, B for ST2P, and C for ST3P.&lt;/para&gt;</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">         &lt;parameter name=&quot;timeout_ms&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">            &lt;para&gt;Amount of time to wait in ms between tones. (defaults to 50ms).&lt;/para&gt;</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">         &lt;parameter name=&quot;duration_ms&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">            &lt;para&gt;Duration of each numeric digit (defaults to 55ms).&lt;/para&gt;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">         &lt;parameter name=&quot;duration_ms_kp&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">            &lt;para&gt;Duration of KP digits (defaults to 120ms).&lt;/para&gt;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">         &lt;parameter name=&quot;duration_ms_st&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">            &lt;para&gt;Duration of ST, STP, ST2P, and ST3P digits (defaults to 65ms).&lt;/para&gt;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">         &lt;parameter name=&quot;channel&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">            &lt;para&gt;Channel where digits will be played&lt;/para&gt;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">         &lt;para&gt;It will send all digits or terminate if it encounters an error.&lt;/para&gt;</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;ReceiveMF&lt;/ref&gt;</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;SendDTMF&lt;/ref&gt;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">   &lt;manager name=&quot;PlayMF&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">         Play MF digit on a specific channel.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">            &lt;para&gt;Channel name to send digit to.&lt;/para&gt;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">         &lt;parameter name=&quot;Digit&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">            &lt;para&gt;The MF digit to play.&lt;/para&gt;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">         &lt;parameter name=&quot;Duration&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">            &lt;para&gt;The duration, in milliseconds, of the digit to be played.&lt;/para&gt;</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">         &lt;para&gt;Plays an MF digit on the specified channel.&lt;/para&gt;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15c">  232</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15c">read_option_flags</a> {</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f">  233</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f">OPT_DELAY</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508">  234</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508">OPT_MUTE</a> = (1 &lt;&lt; 1),</div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b">  235</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b">OPT_QUELCH</a> = (1 &lt;&lt; 2),</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518">  236</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518">OPT_RELAXED</a> = (1 &lt;&lt; 3),</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6e318ebfee0929d09877652818882e91">  237</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6e318ebfee0929d09877652818882e91">OPT_LAX_KP</a> = (1 &lt;&lt; 4),</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca09fccbfe2e104ea30b686823df4f1014">  238</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca09fccbfe2e104ea30b686823df4f1014">OPT_PROCESS</a> = (1 &lt;&lt; 5),</div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6db0b1705158c2039385dd310c5a0cc7">  239</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6db0b1705158c2039385dd310c5a0cc7">OPT_NO_KP</a> = (1 &lt;&lt; 6),</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cad1afa808fc27c96eafd07d93ad358e21">  240</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cad1afa808fc27c96eafd07d93ad358e21">OPT_NO_ST</a> = (1 &lt;&lt; 7),</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cacfa95476413c668673b419c38bf57502">  241</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cacfa95476413c668673b419c38bf57502">OPT_KP_OVERRIDE</a> = (1 &lt;&lt; 8),</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca2e1f6749f083620d8e8d32a44c2cf3c7">  242</a></span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca2e1f6749f083620d8e8d32a44c2cf3c7">OPT_EXTRAPULSES</a> = (1 &lt;&lt; 9),</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;};</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a>(<a class="code" href="../../d7/d1d/app__mf_8c.html#af6ee0eace9716bc6769fb767cdde8f63">read_app_options</a>, {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;d&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f">OPT_DELAY</a>),</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;e&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca2e1f6749f083620d8e8d32a44c2cf3c7">OPT_EXTRAPULSES</a>), <span class="comment">/* SF only */</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;l&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6e318ebfee0929d09877652818882e91">OPT_LAX_KP</a>), <span class="comment">/* MF only */</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;k&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6db0b1705158c2039385dd310c5a0cc7">OPT_NO_KP</a>), <span class="comment">/* MF only */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;m&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508">OPT_MUTE</a>),</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;o&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cacfa95476413c668673b419c38bf57502">OPT_KP_OVERRIDE</a>), <span class="comment">/* MF only */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;p&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca09fccbfe2e104ea30b686823df4f1014">OPT_PROCESS</a>), <span class="comment">/* MF only */</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;q&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b">OPT_QUELCH</a>),</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;r&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518">OPT_RELAXED</a>),</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;s&#39;</span>, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cad1afa808fc27c96eafd07d93ad358e21">OPT_NO_ST</a>), <span class="comment">/* MF only */</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#af6ee0eace9716bc6769fb767cdde8f63">  256</a></span>&#160;});</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#a84ff66a7dcf201797c651be570a39dd9">  258</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d1d/app__mf_8c.html#a84ff66a7dcf201797c651be570a39dd9">readmf_name</a> = <span class="stringliteral">&quot;ReceiveMF&quot;</span>;</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ac5f3e8c05129da6acae975486c6069d1">  259</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d1d/app__mf_8c.html#ac5f3e8c05129da6acae975486c6069d1">readsf_name</a> = <span class="stringliteral">&quot;ReceiveSF&quot;</span>;</div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#a735286e9d23589c9a3fd447868d979be">  260</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#a735286e9d23589c9a3fd447868d979be">sendmf_name</a>[] = <span class="stringliteral">&quot;SendMF&quot;</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#afa17f94d6ad790a0333df5c6d175fc2a">  262</a></span>&#160;<span class="preprocessor">#define MF_BETWEEN_MS 50</span></div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#a686f171c15f49a73998585985050b15e">  263</a></span>&#160;<span class="preprocessor">#define MF_DURATION 55</span></div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#aebc0dda2feb7b10ea1b10f3ecce23fca">  264</a></span>&#160;<span class="preprocessor">#define MF_KP_DURATION 120</span></div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#aaf157e39cdbbab5494a22b1965574008">  265</a></span>&#160;<span class="preprocessor">#define MF_ST_DURATION 65</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"> * \brief Detects MF digits on channel using DSP, terminated by ST, STP, ST2P, or ST3P</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"> * \return 0 if successful, -1 if unsuccessful.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"> * \param chan channel on which to read digits</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"> * \param str buffer in which to store digits</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> * \param timeout ms to wait for all digits before giving up</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#adcd06e0014ef5cb14dca065c50270690">  274</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#adcd06e0014ef5cb14dca065c50270690">read_mf_digits</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keywordtype">int</span> features, <span class="keywordtype">int</span> laxkp, <span class="keywordtype">int</span> <span class="keyword">override</span>, <span class="keywordtype">int</span> no_kp, <span class="keywordtype">int</span> no_st) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/de5/structast__dsp.html">ast_dsp</a> *dsp;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keywordtype">int</span> remaining_time = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordtype">int</span> digits_read = 0;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keywordtype">int</span> is_start_digit = 0;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordflow">if</span> (!(dsp = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>())) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate DSP!\n&quot;</span>);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVEMFSTATUS&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(dsp, <a class="code" href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a>);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <a class="code" href="../../d3/d08/dsp_8h.html#aa28ffa065bd46d09b5b06de2f77183b0">ast_dsp_set_digitmode</a>(dsp, <a class="code" href="../../d3/d08/dsp_8h.html#a5c7b41ef167d85ab193697e010dce94b">DSP_DIGITMODE_MF</a> | features);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   *str = 0; <span class="comment">/* start with empty output buffer */</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="comment">/* based on app_read and generic_fax_exec from res_fax */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">while</span> (timeout == 0 || remaining_time &gt; 0) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">if</span> (timeout &gt; 0) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         remaining_time = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;         <span class="keywordflow">if</span> (remaining_time &lt;= 0) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVEMFSTATUS&quot;</span>, <span class="stringliteral">&quot;TIMEOUT&quot;</span>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;         }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="comment">/* ast_waitfordigit only waits for DTMF frames, we need to do DSP on voice frames */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, 1000) &gt; 0) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;         frame = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;         <span class="keywordflow">if</span> (!frame) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel &#39;%s&#39; did not return a frame; probably hung up.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVEMFSTATUS&quot;</span>, <span class="stringliteral">&quot;HANGUP&quot;</span>);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            frame = <a class="code" href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a>(chan, dsp, frame);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="comment">/* AST_FRAME_DTMF is used all over the DSP code for DTMF, MF, fax, etc.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">               It&#39;s used because we can use the frame to store the digit detected.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">               All this means is that we received something we care about. */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;               <span class="keywordtype">char</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;               <span class="keywordflow">if</span> (digits_read == 0 &amp;&amp; !laxkp &amp;&amp; result != <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Received MF digit, but no KP yet, ignoring: %c\n&quot;</span>, result);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;               }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Received MF digit: %c\n&quot;</span>, result);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;               digits_read++;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;               <span class="keywordflow">if</span> (result == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                  <span class="comment">/* We received an additional KP, start over? */</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                  <span class="keywordflow">if</span> (<span class="keyword">override</span> &amp;&amp; digits_read &gt; 0) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Received another KP, starting over\n&quot;</span>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                     str = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                     *str = 0;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                     digits_read = 1; <span class="comment">/* we just detected a KP */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                  <span class="comment">/* if we were told not to include the ST digit in the output string, then skip it */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                  <span class="keywordflow">if</span> (no_kp) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                     <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                  }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;               }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;               is_start_digit = (strchr(<span class="stringliteral">&quot;#&quot;</span>, result) || strchr(<span class="stringliteral">&quot;A&quot;</span>, result) || strchr(<span class="stringliteral">&quot;B&quot;</span>, result) || strchr(<span class="stringliteral">&quot;C&quot;</span>, result));</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;               <span class="comment">/* if we were told not to include the ST digit in the output string, then skip it */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;               <span class="keywordflow">if</span> (!no_st || !is_start_digit) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                  *str++ = <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                  *str = 0;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;               }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;               <span class="comment">/* we received a ST digit (ST, STP, ST2P, or ST3P), so we&#39;re done */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;               <span class="keywordflow">if</span> (is_start_digit) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                  <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVEMFSTATUS&quot;</span>, <span class="stringliteral">&quot;START&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;               }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVEMFSTATUS&quot;</span>, <span class="stringliteral">&quot;HANGUP&quot;</span>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(dsp);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;channel &#39;%s&#39; - event loop stopped { timeout: %d, remaining_time: %d }\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), timeout, remaining_time);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#aabad4d294912ca33fa4b0a90a0b65ede">  358</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#aabad4d294912ca33fa4b0a90a0b65ede">read_sf_digits</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keywordtype">int</span> maxdigits, <span class="keywordtype">int</span> freq, <span class="keywordtype">int</span> features, <span class="keywordtype">int</span> extrapulses) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/de5/structast__dsp.html">ast_dsp</a> *dsp;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keyword">struct </span>timeval start, pulsetimer, digittimer;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordtype">int</span> remaining_time = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordtype">int</span> hits = 0, digits_read = 0;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> sf_on = 0;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">if</span> (!(dsp = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>())) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate DSP!\n&quot;</span>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVEMFSTATUS&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(dsp, <a class="code" href="../../d3/d08/dsp_8h.html#aba34e93f4bf51e43868d1655efec7020">DSP_FEATURE_FREQ_DETECT</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <a class="code" href="../../d3/d08/dsp_8h.html#aac6092cf8670af7b3f871a8064fb67d3">ast_dsp_set_freqmode</a>(dsp, freq, 60, 16, 0);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   *str = 0; <span class="comment">/* start with empty output buffer */</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordflow">while</span> (timeout == 0 || remaining_time &gt; 0) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">if</span> (timeout &gt; 0) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         remaining_time = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         <span class="keywordflow">if</span> (remaining_time &lt;= 0) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVESFSTATUS&quot;</span>, <span class="stringliteral">&quot;TIMEOUT&quot;</span>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, 1000) &gt; 0) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         frame = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <span class="keywordflow">if</span> (!frame) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel &#39;%s&#39; did not return a frame; probably hung up.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVESFSTATUS&quot;</span>, <span class="stringliteral">&quot;HANGUP&quot;</span>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            frame = <a class="code" href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a>(chan, dsp, frame);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;               <span class="keywordtype">char</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;               <span class="keywordflow">if</span> (result == <span class="charliteral">&#39;q&#39;</span>) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                  sf_on = 1;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                  pulsetimer = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(); <span class="comment">/* reset the pulse timer */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                  <span class="comment">/* now, we need at least a 40ms pause to register the pulse */</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;               }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;               <span class="keywordflow">if</span> (sf_on) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                  <span class="keywordtype">int</span> timeleft = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(pulsetimer, 40);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                  <span class="keywordflow">if</span> (timeleft &lt;= 0) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                     sf_on = 0;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                     <span class="comment">/* The pulse needs to end no more than 75ms after we detected it */</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                     <span class="keywordflow">if</span> (timeleft &gt; -75) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                        hits++;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                        digittimer = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(); <span class="comment">/* reset the digit timer */</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Detected SF pulse (pulse #%d)\n&quot;</span>, hits);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                        <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;SF noise, ignoring, time elapsed was %d ms\n&quot;</span>, timeleft);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                     }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                  }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hits &gt; 0 &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(digittimer, 100) &lt;= 0) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                  <span class="comment">/* has the digit finished? */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Received SF digit: %d\n&quot;</span>, hits);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                  digits_read++;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                  <span class="keywordflow">if</span> (hits &gt; 10) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                     <span class="keywordflow">if</span> (extrapulses) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        <span class="comment">/* dahdi-base.c translates 11 to * and 12 to # */</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                        <span class="keywordflow">if</span> (hits == 11)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                           hits = <span class="charliteral">&#39;*&#39;</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hits == 12)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                           hits = <span class="charliteral">&#39;#&#39;</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hits == 13)</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                           hits = <span class="charliteral">&#39;D&#39;</span>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hits == 14)</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                           hits = <span class="charliteral">&#39;C&#39;</span>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hits == 15)</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                           hits = <span class="charliteral">&#39;B&#39;</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hits == 16)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                           hits = <span class="charliteral">&#39;A&#39;</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                           <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Got SF pulse digit %d, is someone playing with the phone?\n&quot;</span>, hits);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                           hits = <span class="charliteral">&#39;A&#39;</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                        }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        *str++ = hits;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                        <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Got more than 10 pulses, truncating to 10\n&quot;</span>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                        hits = 0; <span class="comment">/* 10 dial pulses = digit 0 */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        *str++ = hits + <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                     }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                     <span class="keywordflow">if</span> (hits == 10) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                        hits = 0; <span class="comment">/* 10 dial pulses = digit 0 */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                     }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                     *str++ = hits + <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                  }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                  *str = 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                  hits = 0;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                  <span class="keywordflow">if</span> (maxdigits &gt; 0 &amp;&amp; digits_read &gt;= maxdigits) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                     <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVESFSTATUS&quot;</span>, <span class="stringliteral">&quot;START&quot;</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                  }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;               }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;         }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;RECEIVESFSTATUS&quot;</span>, <span class="stringliteral">&quot;HANGUP&quot;</span>);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(dsp);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;channel &#39;%s&#39; - event loop stopped { timeout: %d, remaining_time: %d }\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), timeout, remaining_time);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">add SendSF application here</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#a84256efdc88dd0ff8d7f21e5f10fdf2f">  472</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#a84256efdc88dd0ff8d7f21e5f10fdf2f">read_sf_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordtype">double</span> tosec;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> flags = {0};</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordtype">char</span> *argcopy = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordtype">int</span> features = 0, digits = 0, to = 0, freq = 2600;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(arglist,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(variable);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(digits);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(freq);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   );</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ReceiveSF requires an argument (variable)\n&quot;</span>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   argcopy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(arglist, argcopy);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.options)) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../d7/d1d/app__mf_8c.html#af6ee0eace9716bc6769fb767cdde8f63">read_app_options</a>, &amp;flags, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, arglist.options);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.timeout)) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      tosec = atof(arglist.timeout);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (tosec &lt;= 0) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         to = 0;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         to = tosec * 1000.0;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.digits) &amp;&amp; (<a class="code" href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a>(arglist.digits, &amp;digits) || digits &lt;= 0)) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid number of digits: %s\n&quot;</span>, arglist.digits);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.freq) &amp;&amp; (<a class="code" href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a>(arglist.freq, &amp;freq) || freq &lt;= 0)) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid freq: %s\n&quot;</span>, arglist.freq);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.variable)) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid! Usage: ReceiveSF(variable[,timeout][,option])\n&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f">OPT_DELAY</a>)) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#a6d78a2f3c0532d36beca1b8b5e97eb30">DSP_DIGITMODE_MUTEMAX</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508">OPT_MUTE</a>)) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#aa34f768f0cae2ee8f2db1e8f57f02b21">DSP_DIGITMODE_MUTECONF</a>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   }</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b">OPT_QUELCH</a>)) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#a3e5f9f8f26812f78103589047d426ea4">DSP_DIGITMODE_NOQUELCH</a>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518">OPT_RELAXED</a>)) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#af955a2d9ad32683d8d783619480cd348">DSP_DIGITMODE_RELAXDTMF</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#aabad4d294912ca33fa4b0a90a0b65ede">read_sf_digits</a>(chan, tmp, to, digits, freq, features, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca2e1f6749f083620d8e8d32a44c2cf3c7">OPT_EXTRAPULSES</a>));</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, arglist.variable, tmp);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MF digits received: &#39;%s&#39;\n&quot;</span>, tmp);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;No MF digits received.\n&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#af2d605ca054014dda1c7f5e25b1af01b">  551</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#af2d605ca054014dda1c7f5e25b1af01b">read_mf_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordtype">int</span> to = 0;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordtype">double</span> tosec;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> flags = {0};</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordtype">char</span> *argcopy = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordtype">int</span> features = 0;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(arglist,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(variable);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   );</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ReceiveMF requires an argument (variable)\n&quot;</span>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   argcopy = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(arglist, argcopy);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.options)) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../d7/d1d/app__mf_8c.html#af6ee0eace9716bc6769fb767cdde8f63">read_app_options</a>, &amp;flags, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, arglist.options);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.timeout)) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      tosec = atof(arglist.timeout);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">if</span> (tosec &lt;= 0) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;         to = 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;         to = tosec * 1000.0;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(arglist.variable)) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid! Usage: ReceiveMF(variable[,timeout][,option])\n&quot;</span>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f">OPT_DELAY</a>)) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#a6d78a2f3c0532d36beca1b8b5e97eb30">DSP_DIGITMODE_MUTEMAX</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508">OPT_MUTE</a>)) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#aa34f768f0cae2ee8f2db1e8f57f02b21">DSP_DIGITMODE_MUTECONF</a>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b">OPT_QUELCH</a>)) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#a3e5f9f8f26812f78103589047d426ea4">DSP_DIGITMODE_NOQUELCH</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518">OPT_RELAXED</a>)) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      features |= <a class="code" href="../../d3/d08/dsp_8h.html#af955a2d9ad32683d8d783619480cd348">DSP_DIGITMODE_RELAXDTMF</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   }</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <a class="code" href="../../d7/d1d/app__mf_8c.html#adcd06e0014ef5cb14dca065c50270690">read_mf_digits</a>(chan, tmp, to, features, (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6e318ebfee0929d09877652818882e91">OPT_LAX_KP</a>)),</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cacfa95476413c668673b419c38bf57502">OPT_KP_OVERRIDE</a>)), (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6db0b1705158c2039385dd310c5a0cc7">OPT_NO_KP</a>)), (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cad1afa808fc27c96eafd07d93ad358e21">OPT_NO_ST</a>)));</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, arglist.variable, tmp);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;MF digits received: &#39;%s&#39;\n&quot;</span>, tmp);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;No MF digits received.\n&quot;</span>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#a558fa9dd51c899bfee6c3bcb5fe643b4">  620</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#a558fa9dd51c899bfee6c3bcb5fe643b4">sendmf_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *vdata)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;{</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keywordtype">char</span> *data;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordtype">int</span> dinterval = 0, duration = 0, durationkp = 0, durationst = 0;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan_found = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan_dest = chan;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan_autoservice = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(digits);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(dinterval);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(duration);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(durationkp);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(durationst);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d84/structchannel.html">channel</a>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   );</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(vdata)) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SendMF requires an argument\n&quot;</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   data = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(vdata);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, data);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.digits)) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The digits argument is required (0-9,*#ABC,wf)\n&quot;</span>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.dinterval)) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a33ca869933a6085e179804d610790845">ast_app_parse_timelen</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.dinterval, &amp;dinterval, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.duration)) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a33ca869933a6085e179804d610790845">ast_app_parse_timelen</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.duration, &amp;duration, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.durationkp)) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a33ca869933a6085e179804d610790845">ast_app_parse_timelen</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.durationkp, &amp;durationkp, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.durationst)) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a33ca869933a6085e179804d610790845">ast_app_parse_timelen</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.durationst, &amp;durationst, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a>);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel)) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      chan_found = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span> (!chan_found) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No such channel: %s\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.channel);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      chan_dest = chan_found;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">if</span> (chan_found != chan) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         chan_autoservice = chan;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aea588ff21e48ab0fcdaef5beb911ea56">ast_mf_stream</a>(chan_dest, chan_autoservice, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.digits, dinterval &lt;= 0 ? <a class="code" href="../../d7/d1d/app__mf_8c.html#afa17f94d6ad790a0333df5c6d175fc2a">MF_BETWEEN_MS</a> : dinterval,</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      duration &lt;= 0 ? <a class="code" href="../../d7/d1d/app__mf_8c.html#a686f171c15f49a73998585985050b15e">MF_DURATION</a> : duration, durationkp &lt;= 0 ? <a class="code" href="../../d7/d1d/app__mf_8c.html#aebc0dda2feb7b10ea1b10f3ecce23fca">MF_KP_DURATION</a> : durationkp,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      durationst &lt;= 0 ? <a class="code" href="../../d7/d1d/app__mf_8c.html#aaf157e39cdbbab5494a22b1965574008">MF_ST_DURATION</a> : durationst, 0);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keywordflow">if</span> (chan_found) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan_found);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordflow">return</span> chan_autoservice ? 0 : res;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#a94810d2c3dcb763fab410828dcf46a47">  682</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#a94810d2c3dcb763fab410828dcf46a47">manager_play_mf</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;{</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Digit&quot;</span>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *duration = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Duration&quot;</span>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration_ms = <a class="code" href="../../d7/d1d/app__mf_8c.html#a686f171c15f49a73998585985050b15e">MF_DURATION</a>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(channel))) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel not found&quot;</span>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(digit)) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No digit specified&quot;</span>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="comment">/* Override default duration with KP or ST-specific default durations */</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">if</span> (!strcmp(digit, <span class="stringliteral">&quot;*&quot;</span>))</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      duration_ms = <a class="code" href="../../d7/d1d/app__mf_8c.html#aebc0dda2feb7b10ea1b10f3ecce23fca">MF_KP_DURATION</a>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">if</span> (!strcmp(digit, <span class="stringliteral">&quot;#&quot;</span>) || !strcmp(digit, <span class="stringliteral">&quot;A&quot;</span>) || !strcmp(digit, <span class="stringliteral">&quot;B&quot;</span>) || !strcmp(digit, <span class="stringliteral">&quot;C&quot;</span>))</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      duration_ms = <a class="code" href="../../d7/d1d/app__mf_8c.html#aaf157e39cdbbab5494a22b1965574008">MF_ST_DURATION</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(duration) &amp;&amp; (sscanf(duration, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;duration_ms) != 1)) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Could not convert Duration parameter&quot;</span>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aea588ff21e48ab0fcdaef5beb911ea56">ast_mf_stream</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, digit, 0, duration_ms, duration_ms, duration_ms, 1);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;MF successfully queued&quot;</span>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ad09fa931f468002152a3cc2d5ce25eae">  723</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;{</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   res = <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(readsf_name);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(readmf_name);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(sendmf_name);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   res |= <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;PlayMF&quot;</span>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="../../d7/d1d/app__mf_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">  735</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d1d/app__mf_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;{</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   res = <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(readsf_name, <a class="code" href="../../d7/d1d/app__mf_8c.html#a84256efdc88dd0ff8d7f21e5f10fdf2f">read_sf_exec</a>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(readmf_name, <a class="code" href="../../d7/d1d/app__mf_8c.html#af2d605ca054014dda1c7f5e25b1af01b">read_mf_exec</a>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(sendmf_name, <a class="code" href="../../d7/d1d/app__mf_8c.html#a558fa9dd51c899bfee6c3bcb5fe643b4">sendmf_exec</a>);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;PlayMF&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d7/d1d/app__mf_8c.html#a94810d2c3dcb763fab410828dcf46a47">manager_play_mf</a>);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<a class="code" href="../../d7/d1d/app__mf_8c.html#add24dc75ab5a1e6bce0895cac3a2e8a1">AST_MODULE_INFO_STANDARD_EXTENDED</a>(<a class="code" href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a>, <span class="stringliteral">&quot;MF Sender and Receiver Applications&quot;</span>);</div><div class="ttc" id="indications_8h_html"><div class="ttname"><a href="../../d2/d0f/indications_8h.html">indications.h</a></div><div class="ttdoc">Tone Indication Support. </div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="dsp_8h_html_ab6387ee12a3544d3d2068db61d9576ad"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a></div><div class="ttdeci">struct ast_frame * ast_dsp_process(struct ast_channel *chan, struct ast_dsp *dsp, struct ast_frame *inf)</div><div class="ttdoc">Return AST_FRAME_NULL frames when there is silence, AST_FRAME_BUSY on busies, and call progress...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01494">dsp.c:1494</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="app__mf_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00723">app_mf.c:723</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="dsp_8h_html_a84818b360426bdd5f588cdca463e15be"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_DIGIT_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00028">dsp.h:28</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="dsp_8h_html"><div class="ttname"><a href="../../d3/d08/dsp_8h.html">dsp.h</a></div><div class="ttdoc">Convenient Signal Processing routines. </div></div>
<div class="ttc" id="dsp_8h_html_a5c7b41ef167d85ab193697e010dce94b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a5c7b41ef167d85ab193697e010dce94b">DSP_DIGITMODE_MF</a></div><div class="ttdeci">#define DSP_DIGITMODE_MF</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00032">dsp.h:32</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="dsp_8h_html_aa34f768f0cae2ee8f2db1e8f57f02b21"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aa34f768f0cae2ee8f2db1e8f57f02b21">DSP_DIGITMODE_MUTECONF</a></div><div class="ttdeci">#define DSP_DIGITMODE_MUTECONF</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00035">dsp.h:35</a></div></div>
<div class="ttc" id="app__mf_8c_html_afa17f94d6ad790a0333df5c6d175fc2a"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#afa17f94d6ad790a0333df5c6d175fc2a">MF_BETWEEN_MS</a></div><div class="ttdeci">#define MF_BETWEEN_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00262">app_mf.c:262</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="app__mf_8c_html_ac3382bf6da54c56b37069bd76bbdf4f9"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a></div><div class="ttdeci">static int load_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00735">app_mf.c:735</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cac38cea0dc17f74e412a7b74462b3124f">OPT_DELAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00233">app_mf.c:233</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15ca6db0b1705158c2039385dd310c5a0cc7"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6db0b1705158c2039385dd310c5a0cc7">OPT_NO_KP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00239">app_mf.c:239</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="../../d2/d4d/file_8h.html">file.h</a></div><div class="ttdoc">Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. </div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="app__mf_8c_html_a686f171c15f49a73998585985050b15e"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#a686f171c15f49a73998585985050b15e">MF_DURATION</a></div><div class="ttdeci">#define MF_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00263">app_mf.c:263</a></div></div>
<div class="ttc" id="app__mf_8c_html_aebc0dda2feb7b10ea1b10f3ecce23fca"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#aebc0dda2feb7b10ea1b10f3ecce23fca">MF_KP_DURATION</a></div><div class="ttdeci">#define MF_KP_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00264">app_mf.c:264</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15cad1afa808fc27c96eafd07d93ad358e21"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cad1afa808fc27c96eafd07d93ad358e21">OPT_NO_ST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00240">app_mf.c:240</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a520a3c6b7d57903d9a616051da1a019d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a></div><div class="ttdeci">#define AST_APP_OPTIONS(holder, options...)</div><div class="ttdoc">Declares an array of options for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01393">include/asterisk/app.h:1393</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15cacfa95476413c668673b419c38bf57502"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cacfa95476413c668673b419c38bf57502">OPT_KP_OVERRIDE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00241">app_mf.c:241</a></div></div>
<div class="ttc" id="app__mf_8c_html_af6ee0eace9716bc6769fb767cdde8f63"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#af6ee0eace9716bc6769fb767cdde8f63">read_app_options</a></div><div class="ttdeci">static const struct ast_app_option read_app_options[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00256">app_mf.c:256</a></div></div>
<div class="ttc" id="dsp_8h_html_af955a2d9ad32683d8d783619480cd348"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#af955a2d9ad32683d8d783619480cd348">DSP_DIGITMODE_RELAXDTMF</a></div><div class="ttdeci">#define DSP_DIGITMODE_RELAXDTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00037">dsp.h:37</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="app__mf_8c_html_add24dc75ab5a1e6bce0895cac3a2e8a1"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#add24dc75ab5a1e6bce0895cac3a2e8a1">AST_MODULE_INFO_STANDARD_EXTENDED</a></div><div class="ttdeci">AST_MODULE_INFO_STANDARD_EXTENDED(ASTERISK_GPL_KEY, &quot;MF Sender and Receiver Applications&quot;)</div></div>
<div class="ttc" id="app__mf_8c_html_a84ff66a7dcf201797c651be570a39dd9"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#a84ff66a7dcf201797c651be570a39dd9">readmf_name</a></div><div class="ttdeci">static char * readmf_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00258">app_mf.c:258</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca5e0c908c60ac0b6aa4b5af91fc897508">OPT_MUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00234">app_mf.c:234</a></div></div>
<div class="ttc" id="structast__dsp_html"><div class="ttname"><a href="../../d6/de5/structast__dsp.html">ast_dsp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00405">dsp.c:405</a></div></div>
<div class="ttc" id="app__mf_8c_html_adcd06e0014ef5cb14dca065c50270690"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#adcd06e0014ef5cb14dca065c50270690">read_mf_digits</a></div><div class="ttdeci">static int read_mf_digits(struct ast_channel *chan, char *buf, int timeout, int features, int laxkp, int override, int no_kp, int no_st)</div><div class="ttdoc">Detects MF digits on channel using DSP, terminated by ST, STP, ST2P, or ST3P. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00274">app_mf.c:274</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15cabaeed93ff05c5c95daabd51dbfbf5a2b">OPT_QUELCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00235">app_mf.c:235</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="conversions_8h_html"><div class="ttname"><a href="../../da/dd6/conversions_8h.html">conversions.h</a></div><div class="ttdoc">Conversion utility functions. </div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="app__mf_8c_html_aaf157e39cdbbab5494a22b1965574008"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#aaf157e39cdbbab5494a22b1965574008">MF_ST_DURATION</a></div><div class="ttdeci">#define MF_ST_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00265">app_mf.c:265</a></div></div>
<div class="ttc" id="conversions_8h_html_a9936af88e7561021c10562cd7e937c4b"><div class="ttname"><a href="../../da/dd6/conversions_8h.html#a9936af88e7561021c10562cd7e937c4b">ast_str_to_int</a></div><div class="ttdeci">int ast_str_to_int(const char *str, int *res)</div><div class="ttdoc">Convert the given string to a signed integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/conversions_8c_source.html#l00044">conversions.c:44</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="dsp_8h_html_a6d78a2f3c0532d36beca1b8b5e97eb30"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a6d78a2f3c0532d36beca1b8b5e97eb30">DSP_DIGITMODE_MUTEMAX</a></div><div class="ttdeci">#define DSP_DIGITMODE_MUTEMAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00036">dsp.h:36</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15ca6e318ebfee0929d09877652818882e91"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca6e318ebfee0929d09877652818882e91">OPT_LAX_KP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00237">app_mf.c:237</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15caa1cecff070efaa90966d1662730fa518">OPT_RELAXED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00236">app_mf.c:236</a></div></div>
<div class="ttc" id="app__mf_8c_html_ac5f3e8c05129da6acae975486c6069d1"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ac5f3e8c05129da6acae975486c6069d1">readsf_name</a></div><div class="ttdeci">static char * readsf_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00259">app_mf.c:259</a></div></div>
<div class="ttc" id="app__mf_8c_html_af2d605ca054014dda1c7f5e25b1af01b"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#af2d605ca054014dda1c7f5e25b1af01b">read_mf_exec</a></div><div class="ttdeci">static int read_mf_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00551">app_mf.c:551</a></div></div>
<div class="ttc" id="time_8h_html_a904a6933b710e14c7fa2029a0f0cc91a"><div class="ttname"><a href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a></div><div class="ttdeci">int ast_remaining_ms(struct timeval start, int max_ms)</div><div class="ttdoc">Calculate remaining milliseconds given a starting timestamp and upper bound. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02033">main/utils.c:2033</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aea588ff21e48ab0fcdaef5beb911ea56"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aea588ff21e48ab0fcdaef5beb911ea56">ast_mf_stream</a></div><div class="ttdeci">int ast_mf_stream(struct ast_channel *chan, struct ast_channel *peer, const char *digits, int between, unsigned int duration, unsigned int durationkp, unsigned int durationst, int is_external)</div><div class="ttdoc">Send a string of MF digits to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00967">main/app.c:967</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15ca09fccbfe2e104ea30b686823df4f1014"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca09fccbfe2e104ea30b686823df4f1014">OPT_PROCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00238">app_mf.c:238</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="app__mf_8c_html_aabad4d294912ca33fa4b0a90a0b65ede"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#aabad4d294912ca33fa4b0a90a0b65ede">read_sf_digits</a></div><div class="ttdeci">static int read_sf_digits(struct ast_channel *chan, char *buf, int timeout, int maxdigits, int freq, int features, int extrapulses)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00358">app_mf.c:358</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15ca2e1f6749f083620d8e8d32a44c2cf3c7"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15ca2e1f6749f083620d8e8d32a44c2cf3c7">OPT_EXTRAPULSES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00242">app_mf.c:242</a></div></div>
<div class="ttc" id="app__mf_8c_html_a558fa9dd51c899bfee6c3bcb5fe643b4"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#a558fa9dd51c899bfee6c3bcb5fe643b4">sendmf_exec</a></div><div class="ttdeci">static int sendmf_exec(struct ast_channel *chan, const char *vdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00620">app_mf.c:620</a></div></div>
<div class="ttc" id="app__mf_8c_html_a84256efdc88dd0ff8d7f21e5f10fdf2f"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#a84256efdc88dd0ff8d7f21e5f10fdf2f">read_sf_exec</a></div><div class="ttdeci">static int read_sf_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00472">app_mf.c:472</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="app__mf_8c_html_a94810d2c3dcb763fab410828dcf46a47"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#a94810d2c3dcb763fab410828dcf46a47">manager_play_mf</a></div><div class="ttdeci">static int manager_play_mf(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00682">app_mf.c:682</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="app__mf_8c_html_ad5f323a3707fa727dbfdcfe68fb8c15c"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#ad5f323a3707fa727dbfdcfe68fb8c15c">read_option_flags</a></div><div class="ttdeci">read_option_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00232">app_mf.c:232</a></div></div>
<div class="ttc" id="dsp_8h_html_aac6092cf8670af7b3f871a8064fb67d3"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aac6092cf8670af7b3f871a8064fb67d3">ast_dsp_set_freqmode</a></div><div class="ttdeci">int ast_dsp_set_freqmode(struct ast_dsp *dsp, int freq1, int dur, int db, int squelch)</div><div class="ttdoc">Set arbitrary frequency detection mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01859">dsp.c:1859</a></div></div>
<div class="ttc" id="app__mf_8c_html_a735286e9d23589c9a3fd447868d979be"><div class="ttname"><a href="../../d7/d1d/app__mf_8c.html#a735286e9d23589c9a3fd447868d979be">sendmf_name</a></div><div class="ttdeci">static const char sendmf_name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1d/app__mf_8c_source.html#l00260">app_mf.c:260</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="dsp_8h_html_a3e5f9f8f26812f78103589047d426ea4"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a3e5f9f8f26812f78103589047d426ea4">DSP_DIGITMODE_NOQUELCH</a></div><div class="ttdeci">#define DSP_DIGITMODE_NOQUELCH</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00034">dsp.h:34</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aca036489931bf5571e2472331c8ac80b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a></div><div class="ttdeci">#define AST_APP_OPTION(option, flagno)</div><div class="ttdoc">Declares an application option that does not accept an argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01402">include/asterisk/app.h:1402</a></div></div>
<div class="ttc" id="dsp_8h_html_aba34e93f4bf51e43868d1655efec7020"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aba34e93f4bf51e43868d1655efec7020">DSP_FEATURE_FREQ_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_FREQ_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00045">dsp.h:45</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a33ca869933a6085e179804d610790845"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a33ca869933a6085e179804d610790845">ast_app_parse_timelen</a></div><div class="ttdeci">int ast_app_parse_timelen(const char *timestr, int *result, enum ast_timelen defunit)</div><div class="ttdoc">Common routine to parse time lengths, with optional time unit specifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03113">main/app.c:3113</a></div></div>
<div class="ttc" id="manager_8h_html_a5b63b8a8faede2d852e071e1f7b31c11"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a></div><div class="ttdeci">#define ast_manager_register_xml(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00186">manager.h:186</a></div></div>
<div class="ttc" id="module_8h_html_aba2c8d4be709a254658b21a834f8294a"><div class="ttname"><a href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a></div><div class="ttdeci">#define ASTERISK_GPL_KEY</div><div class="ttdoc">The text the key() function should return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00046">module.h:46</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00117">include/asterisk/app.h:117</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
<div class="ttc" id="dsp_8h_html_aa28ffa065bd46d09b5b06de2f77183b0"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aa28ffa065bd46d09b5b06de2f77183b0">ast_dsp_set_digitmode</a></div><div class="ttdeci">int ast_dsp_set_digitmode(struct ast_dsp *dsp, int digitmode)</div><div class="ttdoc">Set digit mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01844">dsp.c:1844</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:01 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
